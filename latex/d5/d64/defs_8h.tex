\hypertarget{defs_8h}{}\doxysection{defs.\+h File Reference}
\label{defs_8h}\index{defs.h@{defs.h}}
This graph shows which files directly or indirectly include this file\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d2/d3c/defs_8h__dep__incl}
\end{center}
\end{figure}
\doxysubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{defs_8h_afacd331296c10f360da7640e0d68429f}{NELEM}}(x)~(sizeof(x)/sizeof((x)\mbox{[}0\mbox{]}))
\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{defs_8h_a53cca0ddc98c5f1de37124eca2575a59}{binit}} (void)
\item 
struct \mbox{\hyperlink{structbuf}{buf}} $\ast$ \mbox{\hyperlink{defs_8h_a03ff74b99b4c3282b93b122e74d0804b}{bread}} (\mbox{\hyperlink{types_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}}, \mbox{\hyperlink{types_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}})
\item 
void \mbox{\hyperlink{defs_8h_aa31ec2f79e0456737a9680270bc1841b}{brelse}} (struct \mbox{\hyperlink{structbuf}{buf}} $\ast$)
\item 
void \mbox{\hyperlink{defs_8h_a1bfd775f14ad3dfee354ee3897ecd28d}{bwrite}} (struct \mbox{\hyperlink{structbuf}{buf}} $\ast$)
\item 
void \mbox{\hyperlink{defs_8h_ab508ff0f4db26fe35cd25fa648f9ee75}{consoleinit}} (void)
\item 
void \mbox{\hyperlink{defs_8h_abeb2bc020e7332bcde1d7beab08582d3}{cprintf}} (char $\ast$,...)
\item 
void \mbox{\hyperlink{defs_8h_a9ec968a6fc407075634fe0e82a9c6862}{consoleintr}} (int($\ast$)(void))
\item 
void \mbox{\hyperlink{defs_8h_a45323e3f295a0d9b90929cc30a24e2aa}{panic}} (char $\ast$) \mbox{\hyperlink{main_8c_a08f0b7c20a38fda2383d4f70bb78dc3e}{\+\_\+\+\_\+attribute\+\_\+\+\_\+}}((noreturn))
\item 
int \mbox{\hyperlink{defs_8h_aa7b4aae4a12acd187e23396214aeca47}{exec}} (char $\ast$, char $\ast$$\ast$)
\item 
struct \mbox{\hyperlink{structfile}{file}} $\ast$ \mbox{\hyperlink{defs_8h_ac56b15561658d0e74ce1c53309b8f97d}{filealloc}} (void)
\item 
void \mbox{\hyperlink{defs_8h_ac865ee0b2d70f753d61d1fefef9de0f6}{fileclose}} (struct \mbox{\hyperlink{structfile}{file}} $\ast$)
\item 
struct \mbox{\hyperlink{structfile}{file}} $\ast$ \mbox{\hyperlink{defs_8h_a67aac4011147fe1ec585211e23580721}{filedup}} (struct \mbox{\hyperlink{structfile}{file}} $\ast$)
\item 
void \mbox{\hyperlink{defs_8h_a66bb5a4b304ea0f851dd999fc8195fa4}{fileinit}} (void)
\item 
int \mbox{\hyperlink{defs_8h_a6bd1db179155944c9d1fbc89d8b7b162}{fileread}} (struct \mbox{\hyperlink{structfile}{file}} $\ast$, char $\ast$, int n)
\item 
int \mbox{\hyperlink{defs_8h_ac4979f97957194db01001985b1bfa84e}{filestat}} (struct \mbox{\hyperlink{structfile}{file}} $\ast$, struct \mbox{\hyperlink{structstat}{stat}} $\ast$)
\item 
int \mbox{\hyperlink{defs_8h_a90e8980df48fa900fc33de53448a2e18}{filewrite}} (struct \mbox{\hyperlink{structfile}{file}} $\ast$, char $\ast$, int n)
\item 
void \mbox{\hyperlink{defs_8h_aff0080b2133027be2e525ca088b40e78}{readsb}} (int dev, struct \mbox{\hyperlink{structsuperblock}{superblock}} $\ast$\mbox{\hyperlink{fs_8c_a0248d0bac625de5a1415f2f8c91f3343}{sb}})
\item 
int \mbox{\hyperlink{defs_8h_ae4ccea0aa02557162963e597737f665a}{dirlink}} (struct \mbox{\hyperlink{structinode}{inode}} $\ast$, char $\ast$, \mbox{\hyperlink{types_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}})
\item 
struct \mbox{\hyperlink{structinode}{inode}} $\ast$ \mbox{\hyperlink{defs_8h_aef19d16d1d20d8f7cdcd8ee0d98fc13f}{dirlookup}} (struct \mbox{\hyperlink{structinode}{inode}} $\ast$, char $\ast$, \mbox{\hyperlink{types_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}} $\ast$)
\item 
struct \mbox{\hyperlink{structinode}{inode}} $\ast$ \mbox{\hyperlink{defs_8h_af71d7632e6d48638682e78de0ad269af}{ialloc}} (\mbox{\hyperlink{types_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}}, short)
\item 
struct \mbox{\hyperlink{structinode}{inode}} $\ast$ \mbox{\hyperlink{defs_8h_a02a4eb876d45b936de1adc73bff02ebf}{idup}} (struct \mbox{\hyperlink{structinode}{inode}} $\ast$)
\item 
void \mbox{\hyperlink{defs_8h_a301761a27cf266e0bad483272fb31a3c}{iinit}} (int dev)
\item 
void \mbox{\hyperlink{defs_8h_a29a4d743d41fe659f74b0a57fdc25012}{ilock}} (struct \mbox{\hyperlink{structinode}{inode}} $\ast$)
\item 
void \mbox{\hyperlink{defs_8h_a29530a0afdfe924818d8c70b6724528d}{iput}} (struct \mbox{\hyperlink{structinode}{inode}} $\ast$)
\item 
void \mbox{\hyperlink{defs_8h_af301c10ad8ced77a5dfb2de3a64c666c}{iunlock}} (struct \mbox{\hyperlink{structinode}{inode}} $\ast$)
\item 
void \mbox{\hyperlink{defs_8h_adff5bb5a1eeaf921853ec06479f8c49b}{iunlockput}} (struct \mbox{\hyperlink{structinode}{inode}} $\ast$)
\item 
void \mbox{\hyperlink{defs_8h_a2ee6784c123b2a2656d88b5b357f2253}{iupdate}} (struct \mbox{\hyperlink{structinode}{inode}} $\ast$)
\item 
int \mbox{\hyperlink{defs_8h_a0206c4090dc4bdfd8481e38057d5b2af}{namecmp}} (const char $\ast$, const char $\ast$)
\item 
struct \mbox{\hyperlink{structinode}{inode}} $\ast$ \mbox{\hyperlink{defs_8h_acde7d3975db286253e584452ba03a54f}{namei}} (char $\ast$)
\item 
struct \mbox{\hyperlink{structinode}{inode}} $\ast$ \mbox{\hyperlink{defs_8h_a699674601988291ebcc47d902f18bee8}{nameiparent}} (char $\ast$, char $\ast$)
\item 
int \mbox{\hyperlink{defs_8h_a2415273b06f31f0f2587b7325588a7e4}{readi}} (struct \mbox{\hyperlink{structinode}{inode}} $\ast$, char $\ast$, \mbox{\hyperlink{types_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}}, \mbox{\hyperlink{types_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}})
\item 
void \mbox{\hyperlink{defs_8h_a528f45ea5530504abc7113acc2154348}{stati}} (struct \mbox{\hyperlink{structinode}{inode}} $\ast$, struct \mbox{\hyperlink{structstat}{stat}} $\ast$)
\item 
int \mbox{\hyperlink{defs_8h_a515876d4653cefef4732806ef7f2833f}{writei}} (struct \mbox{\hyperlink{structinode}{inode}} $\ast$, char $\ast$, \mbox{\hyperlink{types_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}}, \mbox{\hyperlink{types_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}})
\item 
void \mbox{\hyperlink{defs_8h_aefb190a6104cb58c0bc1f8fec88d1307}{ideinit}} (void)
\item 
void \mbox{\hyperlink{defs_8h_a709693afdb9b89d848e684e7acde1f8f}{ideintr}} (void)
\item 
void \mbox{\hyperlink{defs_8h_a70985c3f5b2fb79737457b5c88f5327a}{iderw}} (struct \mbox{\hyperlink{structbuf}{buf}} $\ast$)
\item 
void \mbox{\hyperlink{defs_8h_a63da75c0c2f0b051f2c790aea2116b63}{ioapicenable}} (int irq, int \mbox{\hyperlink{structcpu}{cpu}})
\item 
void \mbox{\hyperlink{defs_8h_abce023b98422f397abdb425b20c8ceec}{ioapicinit}} (void)
\item 
char $\ast$ \mbox{\hyperlink{defs_8h_a5e965f6365c721b5b23c12d16d45c3dc}{kalloc}} (void)
\item 
void \mbox{\hyperlink{defs_8h_ae79d6a7d0901b7c081cfded3f916d5bd}{kfree}} (char $\ast$)
\item 
void \mbox{\hyperlink{defs_8h_abc7a6a8cb3bcde83697a0c9a61d22d4d}{kinit1}} (void $\ast$, void $\ast$)
\item 
void \mbox{\hyperlink{defs_8h_aeb265df0f4968b40d175d9e3030d737c}{kinit2}} (void $\ast$, void $\ast$)
\item 
void \mbox{\hyperlink{defs_8h_af3d6113fa152781400e1e0e728c55e54}{kbdintr}} (void)
\item 
void \mbox{\hyperlink{defs_8h_a7247ece9501e31d62cffad46ec33d7af}{cmostime}} (struct \mbox{\hyperlink{structrtcdate}{rtcdate}} $\ast$\mbox{\hyperlink{console_8c_af10fa12dd785c91e29528fbdc50cf9af}{r}})
\item 
int \mbox{\hyperlink{defs_8h_a627f7996b64f99d885244a5102c85164}{lapicid}} (void)
\item 
void \mbox{\hyperlink{defs_8h_a42fdd0783bbeb7cdc646d360191cdcac}{lapiceoi}} (void)
\item 
void \mbox{\hyperlink{defs_8h_a6b48a1e50acc73cb3e70a65774c87392}{lapicinit}} (void)
\item 
void \mbox{\hyperlink{defs_8h_ae46b07b96e4429fa85738ac2fe1768a0}{lapicstartap}} (\mbox{\hyperlink{types_8h_a65f85814a8290f9797005d3b28e7e5fc}{uchar}}, \mbox{\hyperlink{types_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}})
\item 
void \mbox{\hyperlink{defs_8h_ada0e72e8d0a1a48090829fd03a0b76ba}{microdelay}} (int)
\item 
void \mbox{\hyperlink{defs_8h_ad5e79aaefb91f41b9ef6aeae7ecf4708}{initlog}} (int dev)
\item 
void \mbox{\hyperlink{defs_8h_a270d0050dc50965f4f851717841ad33c}{log\+\_\+write}} (struct \mbox{\hyperlink{structbuf}{buf}} $\ast$)
\item 
void \mbox{\hyperlink{defs_8h_a603ca98212e00d2ffdba7827ef0f1003}{begin\+\_\+op}} ()
\item 
void \mbox{\hyperlink{defs_8h_a2504e37a109f9bae5ca11fe89e4e8fa1}{end\+\_\+op}} ()
\item 
void \mbox{\hyperlink{defs_8h_a2fd0b66a17c5347541448ef906b7b2a2}{mpinit}} (void)
\item 
void \mbox{\hyperlink{defs_8h_a71fd35cd05f30866ae0ba1486415e786}{picenable}} (int)
\item 
void \mbox{\hyperlink{defs_8h_a8f19f54755d7fdec01e537228b10fbf6}{picinit}} (void)
\item 
int \mbox{\hyperlink{defs_8h_a3de41eab56ff42bea4d1ae78bbd1e472}{pipealloc}} (struct \mbox{\hyperlink{structfile}{file}} $\ast$$\ast$, struct \mbox{\hyperlink{structfile}{file}} $\ast$$\ast$)
\item 
void \mbox{\hyperlink{defs_8h_af6220973e389c74782d76ae641a5e7db}{pipeclose}} (struct \mbox{\hyperlink{structpipe}{pipe}} $\ast$, int)
\item 
int \mbox{\hyperlink{defs_8h_acd589a0d0d6d34b446baf33755eef519}{piperead}} (struct \mbox{\hyperlink{structpipe}{pipe}} $\ast$, char $\ast$, int)
\item 
int \mbox{\hyperlink{defs_8h_ae63b0db4ca2cbb2025b89d977c6535b1}{pipewrite}} (struct \mbox{\hyperlink{structpipe}{pipe}} $\ast$, char $\ast$, int)
\item 
int \mbox{\hyperlink{defs_8h_a1444de2903d3d2624a50de058d19c635}{cpuid}} (void)
\item 
void \mbox{\hyperlink{defs_8h_aaf98ef7cdde3a0dfb2e49919de3298b1}{exit}} (void)
\item 
int \mbox{\hyperlink{defs_8h_acd2e1ded4bb6fce4500438bf928330f4}{fork}} (void)
\item 
int \mbox{\hyperlink{defs_8h_acb02e9289fb8a1017c3455b137a9bccd}{growproc}} (int)
\item 
int \mbox{\hyperlink{defs_8h_ab893e9671d6bfe2b2604002a50639f21}{kill}} (int)
\item 
struct \mbox{\hyperlink{structcpu}{cpu}} $\ast$ \mbox{\hyperlink{defs_8h_ad427959ad025dabd8cd393b27ec39160}{mycpu}} (void)
\item 
struct \mbox{\hyperlink{structproc}{proc}} $\ast$ \mbox{\hyperlink{defs_8h_a3d2327db1e34643f4a9e6a07c8cc62c6}{myproc}} ()
\item 
void \mbox{\hyperlink{defs_8h_a9d293f913985937ee7a266fe5ddbfc77}{pinit}} (void)
\item 
void \mbox{\hyperlink{defs_8h_a7f185044294ebb57521c73f723990164}{procdump}} (void)
\item 
void \mbox{\hyperlink{defs_8h_a9596021487afc9231319f22b71e4cb42}{scheduler}} (void) \mbox{\hyperlink{main_8c_a08f0b7c20a38fda2383d4f70bb78dc3e}{\+\_\+\+\_\+attribute\+\_\+\+\_\+}}((noreturn))
\item 
void \mbox{\hyperlink{defs_8h_ad788da91743c333b5bed7c4a0dd12365}{sched}} (void)
\item 
void \mbox{\hyperlink{defs_8h_a5eefc01dac276f3d74b253c86ef43e24}{setproc}} (struct \mbox{\hyperlink{structproc}{proc}} $\ast$)
\item 
void \mbox{\hyperlink{defs_8h_aca4a88f06b3ebbcc04330f7ae06c8507}{sleep}} (void $\ast$, struct \mbox{\hyperlink{structspinlock}{spinlock}} $\ast$)
\item 
void \mbox{\hyperlink{defs_8h_a81c8a6a0cae413bc81aa223f7f7b7205}{userinit}} (void)
\item 
int \mbox{\hyperlink{defs_8h_af6f31822f7e737b4e414bdac1ccb59a4}{wait}} (void)
\item 
void \mbox{\hyperlink{defs_8h_a245b56417239f499389b2e806bd99254}{wakeup}} (void $\ast$)
\item 
void \mbox{\hyperlink{defs_8h_a7cb51f5c2b5cad3766f19eb69c92793b}{yield}} (void)
\item 
int \mbox{\hyperlink{defs_8h_a2ca17a3161c80e3e4894ec6a96e0a281}{chpr}} (int pid, int priority)
\item 
int \mbox{\hyperlink{defs_8h_a1e777db371a84ab92eb05662e4fa12d4}{cps}} (void)
\item 
int \mbox{\hyperlink{defs_8h_aee260ddc6baeb66dbf14f5efb1b799b2}{getprocs}} (int max, struct \mbox{\hyperlink{structuproc}{uproc}} $\ast$)
\item 
void \mbox{\hyperlink{defs_8h_a1d9e7047d3dfb57809a2541d8387705e}{swtch}} (struct \mbox{\hyperlink{structcontext}{context}} $\ast$$\ast$, struct \mbox{\hyperlink{structcontext}{context}} $\ast$)
\item 
void \mbox{\hyperlink{defs_8h_afe4ef8638f1ecb962a6e67fb086ee3b8}{acquire}} (struct \mbox{\hyperlink{structspinlock}{spinlock}} $\ast$)
\item 
void \mbox{\hyperlink{defs_8h_a4105de9e2969515d6c6c795c4386f69f}{getcallerpcs}} (void $\ast$, \mbox{\hyperlink{types_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}} $\ast$)
\item 
int \mbox{\hyperlink{defs_8h_ac44b13cc76bf4040e3baf34df75ff230}{holding}} (struct \mbox{\hyperlink{structspinlock}{spinlock}} $\ast$)
\item 
void \mbox{\hyperlink{defs_8h_ab56d728e6966819a0260c358d3ac3419}{initlock}} (struct \mbox{\hyperlink{structspinlock}{spinlock}} $\ast$, char $\ast$)
\item 
void \mbox{\hyperlink{defs_8h_a4f8616948f3dbce65671f666eed1d669}{release}} (struct \mbox{\hyperlink{structspinlock}{spinlock}} $\ast$)
\item 
void \mbox{\hyperlink{defs_8h_a206b749d1b7768dadce61cbcde7e0f1c}{pushcli}} (void)
\item 
void \mbox{\hyperlink{defs_8h_ae3424f669269fef400ce29c3aeb43fdb}{popcli}} (void)
\item 
void \mbox{\hyperlink{defs_8h_aecd4639fe2f9aaad8e8cee2b5e0688c3}{acquiresleep}} (struct \mbox{\hyperlink{structsleeplock}{sleeplock}} $\ast$)
\item 
void \mbox{\hyperlink{defs_8h_a840b479c87b1c047d7142f58e0ad0b27}{releasesleep}} (struct \mbox{\hyperlink{structsleeplock}{sleeplock}} $\ast$)
\item 
int \mbox{\hyperlink{defs_8h_afa76133bc67c6026376d630da9b53b68}{holdingsleep}} (struct \mbox{\hyperlink{structsleeplock}{sleeplock}} $\ast$)
\item 
void \mbox{\hyperlink{defs_8h_af5ca8072e3877a883fb34ce59eff88cb}{initsleeplock}} (struct \mbox{\hyperlink{structsleeplock}{sleeplock}} $\ast$, char $\ast$)
\item 
int \mbox{\hyperlink{defs_8h_acdb4d3f48d2fb0a834722b1107d2b284}{memcmp}} (const void $\ast$, const void $\ast$, \mbox{\hyperlink{types_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}})
\item 
void $\ast$ \mbox{\hyperlink{defs_8h_ac152fff34fe03e497d35b1d4c47f1445}{memmove}} (void $\ast$, const void $\ast$, \mbox{\hyperlink{types_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}})
\item 
void $\ast$ \mbox{\hyperlink{defs_8h_a0098886a849eef10803e9f35ceec61b9}{memset}} (void $\ast$, int, \mbox{\hyperlink{types_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}})
\item 
char $\ast$ \mbox{\hyperlink{defs_8h_aa406a54805a570dfe266281876dc5d69}{safestrcpy}} (char $\ast$, const char $\ast$, int)
\item 
int \mbox{\hyperlink{defs_8h_a5e5172aa1be36b8210c6dfd86800b44c}{strlen}} (const char $\ast$)
\item 
int \mbox{\hyperlink{defs_8h_a27e878168063a98eae64b4273dcf33cc}{strncmp}} (const char $\ast$, const char $\ast$, \mbox{\hyperlink{types_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}})
\item 
char $\ast$ \mbox{\hyperlink{defs_8h_a66107cd2364627727a36cef6c773b39c}{strncpy}} (char $\ast$, const char $\ast$, int)
\item 
int \mbox{\hyperlink{defs_8h_a75bc8d8c7ea0b4b39d4f470e18e0dba7}{argint}} (int, int $\ast$)
\item 
int \mbox{\hyperlink{defs_8h_a05c7464938c27eb91540c06ec6137f26}{argptr}} (int, char $\ast$$\ast$, int)
\item 
int \mbox{\hyperlink{defs_8h_afc00cb2e6a06b1021f3d82fa4d0eff07}{argstr}} (int, char $\ast$$\ast$)
\item 
int \mbox{\hyperlink{defs_8h_ab8c95490fad429ac2701653041f2efcf}{fetchint}} (\mbox{\hyperlink{types_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}}, int $\ast$)
\item 
int \mbox{\hyperlink{defs_8h_a386d969a02c926521cf2e1816069a4dc}{fetchstr}} (\mbox{\hyperlink{types_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}}, char $\ast$$\ast$)
\item 
void \mbox{\hyperlink{defs_8h_acd6bcafe6626fe8e7d00cacdbc3cc4f1}{syscall}} (void)
\item 
void \mbox{\hyperlink{defs_8h_a49af4bce992b520d5032364d0a4eb8ee}{timerinit}} (void)
\item 
void \mbox{\hyperlink{defs_8h_a9b6e7f6c302700cb54216ad22cbc1591}{idtinit}} (void)
\item 
void \mbox{\hyperlink{defs_8h_a9e7167b8e20e217c4af4e757f612ba6a}{tvinit}} (void)
\item 
void \mbox{\hyperlink{defs_8h_a79fa7b73d0d61fdd15d30768a395437d}{uartinit}} (void)
\item 
void \mbox{\hyperlink{defs_8h_aa64047002b0e84e2611ebf7dc46b7c99}{uartintr}} (void)
\item 
void \mbox{\hyperlink{defs_8h_a571626618a1f05ff6854802e936845d6}{uartputc}} (int)
\item 
void \mbox{\hyperlink{defs_8h_aaf5b2814a1dbf3ef0803dff58e0a76dc}{seginit}} (void)
\item 
void \mbox{\hyperlink{defs_8h_a893bf6891e427f310b43981bf8e737ea}{kvmalloc}} (void)
\item 
\mbox{\hyperlink{types_8h_ac131849542282b2c95dfeaf1f26dc010}{pde\+\_\+t}} $\ast$ \mbox{\hyperlink{defs_8h_a1c8a7a02e9391b5cf0984388216695c0}{setupkvm}} (void)
\item 
char $\ast$ \mbox{\hyperlink{defs_8h_a082f50617d3c87d732157c60daed00ce}{uva2ka}} (\mbox{\hyperlink{types_8h_ac131849542282b2c95dfeaf1f26dc010}{pde\+\_\+t}} $\ast$, char $\ast$)
\item 
int \mbox{\hyperlink{defs_8h_a67f50b6f85756f02b5acdcb084d51b9f}{allocuvm}} (\mbox{\hyperlink{types_8h_ac131849542282b2c95dfeaf1f26dc010}{pde\+\_\+t}} $\ast$, \mbox{\hyperlink{types_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}}, \mbox{\hyperlink{types_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}})
\item 
int \mbox{\hyperlink{defs_8h_ac45969a8875b6dc87245e0a642aa2d8d}{deallocuvm}} (\mbox{\hyperlink{types_8h_ac131849542282b2c95dfeaf1f26dc010}{pde\+\_\+t}} $\ast$, \mbox{\hyperlink{types_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}}, \mbox{\hyperlink{types_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}})
\item 
void \mbox{\hyperlink{defs_8h_af24cf1756e19afd8be8c95d02262cf3a}{freevm}} (\mbox{\hyperlink{types_8h_ac131849542282b2c95dfeaf1f26dc010}{pde\+\_\+t}} $\ast$)
\item 
void \mbox{\hyperlink{defs_8h_a7b3410bde4005e848e1748f2b0f0a084}{inituvm}} (\mbox{\hyperlink{types_8h_ac131849542282b2c95dfeaf1f26dc010}{pde\+\_\+t}} $\ast$, char $\ast$, \mbox{\hyperlink{types_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}})
\item 
int \mbox{\hyperlink{defs_8h_a8a149272578e00e0ce70480004640679}{loaduvm}} (\mbox{\hyperlink{types_8h_ac131849542282b2c95dfeaf1f26dc010}{pde\+\_\+t}} $\ast$, char $\ast$, struct \mbox{\hyperlink{structinode}{inode}} $\ast$, \mbox{\hyperlink{types_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}}, \mbox{\hyperlink{types_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}})
\item 
\mbox{\hyperlink{types_8h_ac131849542282b2c95dfeaf1f26dc010}{pde\+\_\+t}} $\ast$ \mbox{\hyperlink{defs_8h_a8caec506ffa8f9386b0434e4cd5aa2b8}{copyuvm}} (\mbox{\hyperlink{types_8h_ac131849542282b2c95dfeaf1f26dc010}{pde\+\_\+t}} $\ast$, \mbox{\hyperlink{types_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}})
\item 
void \mbox{\hyperlink{defs_8h_ad43d81fa3edec39a200abd0853bc84b1}{switchuvm}} (struct \mbox{\hyperlink{structproc}{proc}} $\ast$)
\item 
void \mbox{\hyperlink{defs_8h_a02ca0670bc1fe12e38453082631ff360}{switchkvm}} (void)
\item 
int \mbox{\hyperlink{defs_8h_a11f5ff2e5bcd16968a88fcbb30db5a10}{copyout}} (\mbox{\hyperlink{types_8h_ac131849542282b2c95dfeaf1f26dc010}{pde\+\_\+t}} $\ast$, \mbox{\hyperlink{types_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}}, void $\ast$, \mbox{\hyperlink{types_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}})
\item 
void \mbox{\hyperlink{defs_8h_a795e27a0cb916cfb41411ebbb9669ddf}{clearpteu}} (\mbox{\hyperlink{types_8h_ac131849542282b2c95dfeaf1f26dc010}{pde\+\_\+t}} $\ast$pgdir, char $\ast$uva)
\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{types_8h_a65f85814a8290f9797005d3b28e7e5fc}{uchar}} \mbox{\hyperlink{defs_8h_a619ae379337e3cb2397ee0b6b4fd8d6b}{ioapicid}}
\item 
volatile \mbox{\hyperlink{types_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}} $\ast$ \mbox{\hyperlink{defs_8h_a4029f3e2439d5912f93543b8addd10ec}{lapic}}
\item 
int \mbox{\hyperlink{defs_8h_a46b52bd30030451d1b65291b77ba05d5}{ismp}}
\item 
\mbox{\hyperlink{types_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}} \mbox{\hyperlink{defs_8h_a7fcd6915876e066781399d7b00f1b1f0}{ticks}}
\item 
struct \mbox{\hyperlink{structspinlock}{spinlock}} \mbox{\hyperlink{defs_8h_a094a4703b62095e2fa469fab3ffea5c7}{tickslock}}
\end{DoxyCompactItemize}


\doxysubsection{Macro Definition Documentation}
\mbox{\Hypertarget{defs_8h_afacd331296c10f360da7640e0d68429f}\label{defs_8h_afacd331296c10f360da7640e0d68429f}} 
\index{defs.h@{defs.h}!NELEM@{NELEM}}
\index{NELEM@{NELEM}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{NELEM}{NELEM}}
{\footnotesize\ttfamily \#define NELEM(\begin{DoxyParamCaption}\item[{}]{x }\end{DoxyParamCaption})~(sizeof(x)/sizeof((x)\mbox{[}0\mbox{]}))}



Definition at line \mbox{\hyperlink{defs_8h_source_l00195}{195}} of file \mbox{\hyperlink{defs_8h_source}{defs.\+h}}.



\doxysubsection{Function Documentation}
\mbox{\Hypertarget{defs_8h_afe4ef8638f1ecb962a6e67fb086ee3b8}\label{defs_8h_afe4ef8638f1ecb962a6e67fb086ee3b8}} 
\index{defs.h@{defs.h}!acquire@{acquire}}
\index{acquire@{acquire}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{acquire()}{acquire()}}
{\footnotesize\ttfamily void acquire (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structspinlock}{spinlock}} $\ast$}]{lk }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{spinlock_8c_source_l00025}{25}} of file \mbox{\hyperlink{spinlock_8c_source}{spinlock.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00026 \{}
\DoxyCodeLine{00027   \mbox{\hyperlink{spinlock_8c_a206b749d1b7768dadce61cbcde7e0f1c}{pushcli}}(); \textcolor{comment}{// disable interrupts to avoid deadlock.}}
\DoxyCodeLine{00028   \textcolor{keywordflow}{if}(\mbox{\hyperlink{spinlock_8c_aea48df3e5cfb903179ad3dc78ab502d9}{holding}}(lk))}
\DoxyCodeLine{00029     \mbox{\hyperlink{console_8c_a95c0aca5d6d7487933984f08b189917a}{panic}}(\textcolor{stringliteral}{"{}acquire"{}});}
\DoxyCodeLine{00030 }
\DoxyCodeLine{00031   \textcolor{comment}{// The xchg is atomic.}}
\DoxyCodeLine{00032   \textcolor{keywordflow}{while}(xchg(\&lk-\/>\mbox{\hyperlink{structspinlock_a48f3007579f644934d9aba91e5378c03}{locked}}, 1) != 0)}
\DoxyCodeLine{00033     ;}
\DoxyCodeLine{00034 }
\DoxyCodeLine{00035   \textcolor{comment}{// Tell the C compiler and the processor to not move loads or stores}}
\DoxyCodeLine{00036   \textcolor{comment}{// past this point, to ensure that the critical section's memory}}
\DoxyCodeLine{00037   \textcolor{comment}{// references happen after the lock is acquired.}}
\DoxyCodeLine{00038   \_\_sync\_synchronize();}
\DoxyCodeLine{00039 }
\DoxyCodeLine{00040   \textcolor{comment}{// Record info about lock acquisition for debugging.}}
\DoxyCodeLine{00041   lk-\/>\mbox{\hyperlink{structspinlock_a290ae772c8ccb9e8c1580204c31a7f88}{cpu}} = \mbox{\hyperlink{defs_8h_ad427959ad025dabd8cd393b27ec39160}{mycpu}}();}
\DoxyCodeLine{00042   \mbox{\hyperlink{spinlock_8c_a6ac35304ea80f01086b47edcc2328010}{getcallerpcs}}(\&lk, lk-\/>\mbox{\hyperlink{structspinlock_ac9ef3f16f664094198af0b9063e23fe0}{pcs}});}
\DoxyCodeLine{00043 \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_afe4ef8638f1ecb962a6e67fb086ee3b8_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=550pt]{d5/d64/defs_8h_afe4ef8638f1ecb962a6e67fb086ee3b8_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_aecd4639fe2f9aaad8e8cee2b5e0688c3}\label{defs_8h_aecd4639fe2f9aaad8e8cee2b5e0688c3}} 
\index{defs.h@{defs.h}!acquiresleep@{acquiresleep}}
\index{acquiresleep@{acquiresleep}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{acquiresleep()}{acquiresleep()}}
{\footnotesize\ttfamily void acquiresleep (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structsleeplock}{sleeplock}} $\ast$}]{lk }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{sleeplock_8c_source_l00023}{23}} of file \mbox{\hyperlink{sleeplock_8c_source}{sleeplock.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00024 \{}
\DoxyCodeLine{00025   \mbox{\hyperlink{defs_8h_afe4ef8638f1ecb962a6e67fb086ee3b8}{acquire}}(\&lk-\/>\mbox{\hyperlink{structsleeplock_a077241ea0e720d228d853208444c4c9d}{lk}});}
\DoxyCodeLine{00026   \textcolor{keywordflow}{while} (lk-\/>\mbox{\hyperlink{structsleeplock_ac5cfe608994a41b24cb1c0fd722910c3}{locked}}) \{}
\DoxyCodeLine{00027     \mbox{\hyperlink{defs_8h_aca4a88f06b3ebbcc04330f7ae06c8507}{sleep}}(lk, \&lk-\/>\mbox{\hyperlink{structsleeplock_a077241ea0e720d228d853208444c4c9d}{lk}});}
\DoxyCodeLine{00028   \}}
\DoxyCodeLine{00029   lk-\/>\mbox{\hyperlink{structsleeplock_ac5cfe608994a41b24cb1c0fd722910c3}{locked}} = 1;}
\DoxyCodeLine{00030   lk-\/>\mbox{\hyperlink{structsleeplock_a99a4c6a784956ab1c391a12af475a55e}{pid}} = \mbox{\hyperlink{defs_8h_a3d2327db1e34643f4a9e6a07c8cc62c6}{myproc}}()-\/>\mbox{\hyperlink{structproc_acf2bdf54d1f957ccbcdc987007029944}{pid}};}
\DoxyCodeLine{00031   \mbox{\hyperlink{defs_8h_a4f8616948f3dbce65671f666eed1d669}{release}}(\&lk-\/>\mbox{\hyperlink{structsleeplock_a077241ea0e720d228d853208444c4c9d}{lk}});}
\DoxyCodeLine{00032 \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_aecd4639fe2f9aaad8e8cee2b5e0688c3_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=550pt]{d5/d64/defs_8h_aecd4639fe2f9aaad8e8cee2b5e0688c3_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_a67f50b6f85756f02b5acdcb084d51b9f}\label{defs_8h_a67f50b6f85756f02b5acdcb084d51b9f}} 
\index{defs.h@{defs.h}!allocuvm@{allocuvm}}
\index{allocuvm@{allocuvm}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{allocuvm()}{allocuvm()}}
{\footnotesize\ttfamily int allocuvm (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{types_8h_ac131849542282b2c95dfeaf1f26dc010}{pde\+\_\+t}} $\ast$}]{pgdir,  }\item[{\mbox{\hyperlink{types_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}}}]{oldsz,  }\item[{\mbox{\hyperlink{types_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}}}]{newsz }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{vm_8c_source_l00222}{222}} of file \mbox{\hyperlink{vm_8c_source}{vm.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00223 \{}
\DoxyCodeLine{00224   \textcolor{keywordtype}{char} *\mbox{\hyperlink{usertests_8c_aa1c6e6e76813ccb29a29bb119dba668a}{mem}};}
\DoxyCodeLine{00225   \mbox{\hyperlink{types_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}} a;}
\DoxyCodeLine{00226 }
\DoxyCodeLine{00227   \textcolor{keywordflow}{if}(newsz >= \mbox{\hyperlink{memlayout_8h_a20cbfc19992a40ab9ccf4aa8ab8283d0}{KERNBASE}})}
\DoxyCodeLine{00228     \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{00229   \textcolor{keywordflow}{if}(newsz < oldsz)}
\DoxyCodeLine{00230     \textcolor{keywordflow}{return} oldsz;}
\DoxyCodeLine{00231 }
\DoxyCodeLine{00232   a = \mbox{\hyperlink{mmu_8h_affa8cdfbd1c15dafc9f3af3a7b641f80}{PGROUNDUP}}(oldsz);}
\DoxyCodeLine{00233   \textcolor{keywordflow}{for}(; a < newsz; a += \mbox{\hyperlink{mmu_8h_a5f96cb6ae6670e023c407cc2f77e1704}{PGSIZE}})\{}
\DoxyCodeLine{00234     \mbox{\hyperlink{usertests_8c_aa1c6e6e76813ccb29a29bb119dba668a}{mem}} = \mbox{\hyperlink{defs_8h_a5e965f6365c721b5b23c12d16d45c3dc}{kalloc}}();}
\DoxyCodeLine{00235     \textcolor{keywordflow}{if}(\mbox{\hyperlink{usertests_8c_aa1c6e6e76813ccb29a29bb119dba668a}{mem}} == 0)\{}
\DoxyCodeLine{00236       \mbox{\hyperlink{console_8c_a90f0742d846503e4ed1804f1df421ec6}{cprintf}}(\textcolor{stringliteral}{"{}allocuvm out of memory\(\backslash\)n"{}});}
\DoxyCodeLine{00237       \mbox{\hyperlink{vm_8c_a6d3019ea15a9bfdc5131ae97f3623c49}{deallocuvm}}(pgdir, newsz, oldsz);}
\DoxyCodeLine{00238       \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{00239     \}}
\DoxyCodeLine{00240     \mbox{\hyperlink{defs_8h_a0098886a849eef10803e9f35ceec61b9}{memset}}(\mbox{\hyperlink{usertests_8c_aa1c6e6e76813ccb29a29bb119dba668a}{mem}}, 0, \mbox{\hyperlink{mmu_8h_a5f96cb6ae6670e023c407cc2f77e1704}{PGSIZE}});}
\DoxyCodeLine{00241     \textcolor{keywordflow}{if}(mappages(pgdir, (\textcolor{keywordtype}{char}*)a, \mbox{\hyperlink{mmu_8h_a5f96cb6ae6670e023c407cc2f77e1704}{PGSIZE}}, \mbox{\hyperlink{memlayout_8h_a5021188bc7da1304f27e913aee183407}{V2P}}(\mbox{\hyperlink{usertests_8c_aa1c6e6e76813ccb29a29bb119dba668a}{mem}}), \mbox{\hyperlink{mmu_8h_a058fcbcc3e1eab2c09c68b3e5221c545}{PTE\_W}}|\mbox{\hyperlink{mmu_8h_adced9836a1dc98d72849361e6ab03cda}{PTE\_U}}) < 0)\{}
\DoxyCodeLine{00242       \mbox{\hyperlink{console_8c_a90f0742d846503e4ed1804f1df421ec6}{cprintf}}(\textcolor{stringliteral}{"{}allocuvm out of memory (2)\(\backslash\)n"{}});}
\DoxyCodeLine{00243       \mbox{\hyperlink{vm_8c_a6d3019ea15a9bfdc5131ae97f3623c49}{deallocuvm}}(pgdir, newsz, oldsz);}
\DoxyCodeLine{00244       \mbox{\hyperlink{defs_8h_ae79d6a7d0901b7c081cfded3f916d5bd}{kfree}}(\mbox{\hyperlink{usertests_8c_aa1c6e6e76813ccb29a29bb119dba668a}{mem}});}
\DoxyCodeLine{00245       \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{00246     \}}
\DoxyCodeLine{00247   \}}
\DoxyCodeLine{00248   \textcolor{keywordflow}{return} newsz;}
\DoxyCodeLine{00249 \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_a67f50b6f85756f02b5acdcb084d51b9f_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_a67f50b6f85756f02b5acdcb084d51b9f_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_a75bc8d8c7ea0b4b39d4f470e18e0dba7}\label{defs_8h_a75bc8d8c7ea0b4b39d4f470e18e0dba7}} 
\index{defs.h@{defs.h}!argint@{argint}}
\index{argint@{argint}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{argint()}{argint()}}
{\footnotesize\ttfamily int argint (\begin{DoxyParamCaption}\item[{int}]{n,  }\item[{int $\ast$}]{ip }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{syscall_8c_source_l00050}{50}} of file \mbox{\hyperlink{syscall_8c_source}{syscall.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00051 \{}
\DoxyCodeLine{00052   \textcolor{keywordflow}{return} \mbox{\hyperlink{syscall_8c_a918cadc6c55aa7ac38982659c27a3a75}{fetchint}}((\mbox{\hyperlink{defs_8h_a3d2327db1e34643f4a9e6a07c8cc62c6}{myproc}}()-\/>tf-\/>esp) + 4 + 4*n, ip);}
\DoxyCodeLine{00053 \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_a75bc8d8c7ea0b4b39d4f470e18e0dba7_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=550pt]{d5/d64/defs_8h_a75bc8d8c7ea0b4b39d4f470e18e0dba7_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_a05c7464938c27eb91540c06ec6137f26}\label{defs_8h_a05c7464938c27eb91540c06ec6137f26}} 
\index{defs.h@{defs.h}!argptr@{argptr}}
\index{argptr@{argptr}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{argptr()}{argptr()}}
{\footnotesize\ttfamily int argptr (\begin{DoxyParamCaption}\item[{int}]{n,  }\item[{char $\ast$$\ast$}]{pp,  }\item[{int}]{size }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{syscall_8c_source_l00059}{59}} of file \mbox{\hyperlink{syscall_8c_source}{syscall.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00060 \{}
\DoxyCodeLine{00061   \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{00062   \textcolor{keyword}{struct }\mbox{\hyperlink{structproc}{proc}} *curproc = \mbox{\hyperlink{defs_8h_a3d2327db1e34643f4a9e6a07c8cc62c6}{myproc}}();}
\DoxyCodeLine{00063  }
\DoxyCodeLine{00064   \textcolor{keywordflow}{if}(\mbox{\hyperlink{syscall_8c_ade56ef2176f85cd61e7b91b400e7d4d3}{argint}}(n, \&i) < 0)}
\DoxyCodeLine{00065     \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{00066   \textcolor{keywordflow}{if}(size < 0 || (\mbox{\hyperlink{types_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}})i >= curproc-\/>\mbox{\hyperlink{structproc_a6e67042bb361124ff287af88efc33e00}{sz}} || (\mbox{\hyperlink{types_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}})i+size > curproc-\/>\mbox{\hyperlink{structproc_a6e67042bb361124ff287af88efc33e00}{sz}})}
\DoxyCodeLine{00067     \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{00068   *pp = (\textcolor{keywordtype}{char}*)i;}
\DoxyCodeLine{00069   \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{00070 \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_a05c7464938c27eb91540c06ec6137f26_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=232pt]{d5/d64/defs_8h_a05c7464938c27eb91540c06ec6137f26_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_afc00cb2e6a06b1021f3d82fa4d0eff07}\label{defs_8h_afc00cb2e6a06b1021f3d82fa4d0eff07}} 
\index{defs.h@{defs.h}!argstr@{argstr}}
\index{argstr@{argstr}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{argstr()}{argstr()}}
{\footnotesize\ttfamily int argstr (\begin{DoxyParamCaption}\item[{int}]{n,  }\item[{char $\ast$$\ast$}]{pp }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{syscall_8c_source_l00077}{77}} of file \mbox{\hyperlink{syscall_8c_source}{syscall.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00078 \{}
\DoxyCodeLine{00079   \textcolor{keywordtype}{int} addr;}
\DoxyCodeLine{00080   \textcolor{keywordflow}{if}(\mbox{\hyperlink{syscall_8c_ade56ef2176f85cd61e7b91b400e7d4d3}{argint}}(n, \&addr) < 0)}
\DoxyCodeLine{00081     \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{00082   \textcolor{keywordflow}{return} \mbox{\hyperlink{syscall_8c_ace37b4584713ab6bda44a282a298961f}{fetchstr}}(addr, pp);}
\DoxyCodeLine{00083 \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_afc00cb2e6a06b1021f3d82fa4d0eff07_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=224pt]{d5/d64/defs_8h_afc00cb2e6a06b1021f3d82fa4d0eff07_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_a603ca98212e00d2ffdba7827ef0f1003}\label{defs_8h_a603ca98212e00d2ffdba7827ef0f1003}} 
\index{defs.h@{defs.h}!begin\_op@{begin\_op}}
\index{begin\_op@{begin\_op}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{begin\_op()}{begin\_op()}}
{\footnotesize\ttfamily void begin\+\_\+op (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{log_8c_source_l00126}{126}} of file \mbox{\hyperlink{log_8c_source}{log.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00127 \{}
\DoxyCodeLine{00128   \mbox{\hyperlink{defs_8h_afe4ef8638f1ecb962a6e67fb086ee3b8}{acquire}}(\&\mbox{\hyperlink{structlog}{log}}.\mbox{\hyperlink{structlog_a980a1d1aa9c60af7a82f297f8ab54d2e}{lock}});}
\DoxyCodeLine{00129   \textcolor{keywordflow}{while}(1)\{}
\DoxyCodeLine{00130     \textcolor{keywordflow}{if}(\mbox{\hyperlink{structlog}{log}}.\mbox{\hyperlink{structlog_afc034b98b98897c179ca8fae8e2ee181}{committing}})\{}
\DoxyCodeLine{00131       \mbox{\hyperlink{defs_8h_aca4a88f06b3ebbcc04330f7ae06c8507}{sleep}}(\&\mbox{\hyperlink{structlog}{log}}, \&\mbox{\hyperlink{structlog}{log}}.\mbox{\hyperlink{structlog_a980a1d1aa9c60af7a82f297f8ab54d2e}{lock}});}
\DoxyCodeLine{00132     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(\mbox{\hyperlink{structlog}{log}}.\mbox{\hyperlink{structlog_a7808516ed2f708dcb13912b1e8fc20d9}{lh}}.\mbox{\hyperlink{structlogheader_a50b276b70d44ae77497ef1d71d182875}{n}} + (\mbox{\hyperlink{structlog}{log}}.\mbox{\hyperlink{structlog_addfc1fc09a124978bd7e2a23a19d733d}{outstanding}}+1)*\mbox{\hyperlink{param_8h_a31cde324007b4e52bbba7079ec5e5f45}{MAXOPBLOCKS}} > \mbox{\hyperlink{param_8h_acc7694167c7840a913939a1b90808b4c}{LOGSIZE}})\{}
\DoxyCodeLine{00133       \textcolor{comment}{// this op might exhaust log space; wait for commit.}}
\DoxyCodeLine{00134       \mbox{\hyperlink{defs_8h_aca4a88f06b3ebbcc04330f7ae06c8507}{sleep}}(\&\mbox{\hyperlink{structlog}{log}}, \&\mbox{\hyperlink{structlog}{log}}.\mbox{\hyperlink{structlog_a980a1d1aa9c60af7a82f297f8ab54d2e}{lock}});}
\DoxyCodeLine{00135     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00136       \mbox{\hyperlink{structlog}{log}}.\mbox{\hyperlink{structlog_addfc1fc09a124978bd7e2a23a19d733d}{outstanding}} += 1;}
\DoxyCodeLine{00137       \mbox{\hyperlink{defs_8h_a4f8616948f3dbce65671f666eed1d669}{release}}(\&\mbox{\hyperlink{structlog}{log}}.\mbox{\hyperlink{structlog_a980a1d1aa9c60af7a82f297f8ab54d2e}{lock}});}
\DoxyCodeLine{00138       \textcolor{keywordflow}{break};}
\DoxyCodeLine{00139     \}}
\DoxyCodeLine{00140   \}}
\DoxyCodeLine{00141 \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_a603ca98212e00d2ffdba7827ef0f1003_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=550pt]{d5/d64/defs_8h_a603ca98212e00d2ffdba7827ef0f1003_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_a53cca0ddc98c5f1de37124eca2575a59}\label{defs_8h_a53cca0ddc98c5f1de37124eca2575a59}} 
\index{defs.h@{defs.h}!binit@{binit}}
\index{binit@{binit}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{binit()}{binit()}}
{\footnotesize\ttfamily void binit (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{bio_8c_source_l00039}{39}} of file \mbox{\hyperlink{bio_8c_source}{bio.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00040 \{}
\DoxyCodeLine{00041   \textcolor{keyword}{struct }\mbox{\hyperlink{structbuf}{buf}} *b;}
\DoxyCodeLine{00042 }
\DoxyCodeLine{00043   \mbox{\hyperlink{defs_8h_ab56d728e6966819a0260c358d3ac3419}{initlock}}(\&\mbox{\hyperlink{bio_8c_a7725a9957148b7740449a091ea12b0e4}{bcache}}.lock, \textcolor{stringliteral}{"{}bcache"{}});}
\DoxyCodeLine{00044 }
\DoxyCodeLine{00045 \textcolor{comment}{//PAGEBREAK!}}
\DoxyCodeLine{00046   \textcolor{comment}{// Create linked list of buffers}}
\DoxyCodeLine{00047   \mbox{\hyperlink{bio_8c_a7725a9957148b7740449a091ea12b0e4}{bcache}}.head.prev = \&\mbox{\hyperlink{bio_8c_a7725a9957148b7740449a091ea12b0e4}{bcache}}.head;}
\DoxyCodeLine{00048   \mbox{\hyperlink{bio_8c_a7725a9957148b7740449a091ea12b0e4}{bcache}}.head.next = \&\mbox{\hyperlink{bio_8c_a7725a9957148b7740449a091ea12b0e4}{bcache}}.head;}
\DoxyCodeLine{00049   \textcolor{keywordflow}{for}(b = \mbox{\hyperlink{bio_8c_a7725a9957148b7740449a091ea12b0e4}{bcache}}.buf; b < \mbox{\hyperlink{bio_8c_a7725a9957148b7740449a091ea12b0e4}{bcache}}.buf+\mbox{\hyperlink{param_8h_ad51e2f8dffd163c263ec676a268d0f0a}{NBUF}}; b++)\{}
\DoxyCodeLine{00050     b-\/>\mbox{\hyperlink{structbuf_ab18c18abb22f07617619e9a74c71f51a}{next}} = \mbox{\hyperlink{bio_8c_a7725a9957148b7740449a091ea12b0e4}{bcache}}.head.next;}
\DoxyCodeLine{00051     b-\/>\mbox{\hyperlink{structbuf_a930cab1e1b3751795d31bfd0291dff4a}{prev}} = \&\mbox{\hyperlink{bio_8c_a7725a9957148b7740449a091ea12b0e4}{bcache}}.head;}
\DoxyCodeLine{00052     \mbox{\hyperlink{defs_8h_af5ca8072e3877a883fb34ce59eff88cb}{initsleeplock}}(\&b-\/>\mbox{\hyperlink{structbuf_a626ad748d91d4bd7f4e65b74c73f2644}{lock}}, \textcolor{stringliteral}{"{}buffer"{}});}
\DoxyCodeLine{00053     \mbox{\hyperlink{bio_8c_a7725a9957148b7740449a091ea12b0e4}{bcache}}.head.next-\/>prev = b;}
\DoxyCodeLine{00054     \mbox{\hyperlink{bio_8c_a7725a9957148b7740449a091ea12b0e4}{bcache}}.head.next = b;}
\DoxyCodeLine{00055   \}}
\DoxyCodeLine{00056 \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=305pt]{d5/d64/defs_8h_a53cca0ddc98c5f1de37124eca2575a59_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_a03ff74b99b4c3282b93b122e74d0804b}\label{defs_8h_a03ff74b99b4c3282b93b122e74d0804b}} 
\index{defs.h@{defs.h}!bread@{bread}}
\index{bread@{bread}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{bread()}{bread()}}
{\footnotesize\ttfamily struct \mbox{\hyperlink{structbuf}{buf}} $\ast$ bread (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{types_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}}}]{dev,  }\item[{\mbox{\hyperlink{types_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}}}]{blockno }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{bio_8c_source_l00097}{97}} of file \mbox{\hyperlink{bio_8c_source}{bio.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00098 \{}
\DoxyCodeLine{00099   \textcolor{keyword}{struct }\mbox{\hyperlink{structbuf}{buf}} *b;}
\DoxyCodeLine{00100 }
\DoxyCodeLine{00101   b = bget(\mbox{\hyperlink{structbuf_ac96082c2b5f22133ac7092ef81487227}{dev}}, \mbox{\hyperlink{structbuf_a756b2bcc88008bef7f21d688aa4a7a48}{blockno}});}
\DoxyCodeLine{00102   \textcolor{keywordflow}{if}((b-\/>\mbox{\hyperlink{structbuf_ae7d6b6c34fdeadb38970efd0554aa1a9}{flags}} \& \mbox{\hyperlink{buf_8h_afab4199c0d27da71061f1c0cd5b51520}{B\_VALID}}) == 0) \{}
\DoxyCodeLine{00103     \mbox{\hyperlink{defs_8h_a70985c3f5b2fb79737457b5c88f5327a}{iderw}}(b);}
\DoxyCodeLine{00104   \}}
\DoxyCodeLine{00105   \textcolor{keywordflow}{return} b;}
\DoxyCodeLine{00106 \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_a03ff74b99b4c3282b93b122e74d0804b_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_a03ff74b99b4c3282b93b122e74d0804b_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_aa31ec2f79e0456737a9680270bc1841b}\label{defs_8h_aa31ec2f79e0456737a9680270bc1841b}} 
\index{defs.h@{defs.h}!brelse@{brelse}}
\index{brelse@{brelse}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{brelse()}{brelse()}}
{\footnotesize\ttfamily void brelse (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structbuf}{buf}} $\ast$}]{b }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{bio_8c_source_l00121}{121}} of file \mbox{\hyperlink{bio_8c_source}{bio.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00122 \{}
\DoxyCodeLine{00123   \textcolor{keywordflow}{if}(!\mbox{\hyperlink{defs_8h_afa76133bc67c6026376d630da9b53b68}{holdingsleep}}(\&b-\/>\mbox{\hyperlink{structbuf_a626ad748d91d4bd7f4e65b74c73f2644}{lock}}))}
\DoxyCodeLine{00124     \mbox{\hyperlink{console_8c_a95c0aca5d6d7487933984f08b189917a}{panic}}(\textcolor{stringliteral}{"{}brelse"{}});}
\DoxyCodeLine{00125 }
\DoxyCodeLine{00126   \mbox{\hyperlink{defs_8h_a840b479c87b1c047d7142f58e0ad0b27}{releasesleep}}(\&b-\/>\mbox{\hyperlink{structbuf_a626ad748d91d4bd7f4e65b74c73f2644}{lock}});}
\DoxyCodeLine{00127 }
\DoxyCodeLine{00128   \mbox{\hyperlink{defs_8h_afe4ef8638f1ecb962a6e67fb086ee3b8}{acquire}}(\&\mbox{\hyperlink{bio_8c_a7725a9957148b7740449a091ea12b0e4}{bcache}}.lock);}
\DoxyCodeLine{00129   b-\/>\mbox{\hyperlink{structbuf_aaf5efe777371aaeb9944508fd52adda5}{refcnt}}-\/-\/;}
\DoxyCodeLine{00130   \textcolor{keywordflow}{if} (b-\/>\mbox{\hyperlink{structbuf_aaf5efe777371aaeb9944508fd52adda5}{refcnt}} == 0) \{}
\DoxyCodeLine{00131     \textcolor{comment}{// no one is waiting for it.}}
\DoxyCodeLine{00132     b-\/>\mbox{\hyperlink{structbuf_ab18c18abb22f07617619e9a74c71f51a}{next}}-\/>\mbox{\hyperlink{structbuf_a930cab1e1b3751795d31bfd0291dff4a}{prev}} = b-\/>\mbox{\hyperlink{structbuf_a930cab1e1b3751795d31bfd0291dff4a}{prev}};}
\DoxyCodeLine{00133     b-\/>\mbox{\hyperlink{structbuf_a930cab1e1b3751795d31bfd0291dff4a}{prev}}-\/>\mbox{\hyperlink{structbuf_ab18c18abb22f07617619e9a74c71f51a}{next}} = b-\/>\mbox{\hyperlink{structbuf_ab18c18abb22f07617619e9a74c71f51a}{next}};}
\DoxyCodeLine{00134     b-\/>\mbox{\hyperlink{structbuf_ab18c18abb22f07617619e9a74c71f51a}{next}} = \mbox{\hyperlink{bio_8c_a7725a9957148b7740449a091ea12b0e4}{bcache}}.head.next;}
\DoxyCodeLine{00135     b-\/>\mbox{\hyperlink{structbuf_a930cab1e1b3751795d31bfd0291dff4a}{prev}} = \&\mbox{\hyperlink{bio_8c_a7725a9957148b7740449a091ea12b0e4}{bcache}}.head;}
\DoxyCodeLine{00136     \mbox{\hyperlink{bio_8c_a7725a9957148b7740449a091ea12b0e4}{bcache}}.head.next-\/>prev = b;}
\DoxyCodeLine{00137     \mbox{\hyperlink{bio_8c_a7725a9957148b7740449a091ea12b0e4}{bcache}}.head.next = b;}
\DoxyCodeLine{00138   \}}
\DoxyCodeLine{00139   }
\DoxyCodeLine{00140   \mbox{\hyperlink{defs_8h_a4f8616948f3dbce65671f666eed1d669}{release}}(\&\mbox{\hyperlink{bio_8c_a7725a9957148b7740449a091ea12b0e4}{bcache}}.lock);}
\DoxyCodeLine{00141 \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_aa31ec2f79e0456737a9680270bc1841b_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_aa31ec2f79e0456737a9680270bc1841b_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_a1bfd775f14ad3dfee354ee3897ecd28d}\label{defs_8h_a1bfd775f14ad3dfee354ee3897ecd28d}} 
\index{defs.h@{defs.h}!bwrite@{bwrite}}
\index{bwrite@{bwrite}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{bwrite()}{bwrite()}}
{\footnotesize\ttfamily void bwrite (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structbuf}{buf}} $\ast$}]{b }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{bio_8c_source_l00110}{110}} of file \mbox{\hyperlink{bio_8c_source}{bio.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00111 \{}
\DoxyCodeLine{00112   \textcolor{keywordflow}{if}(!\mbox{\hyperlink{defs_8h_afa76133bc67c6026376d630da9b53b68}{holdingsleep}}(\&b-\/>\mbox{\hyperlink{structbuf_a626ad748d91d4bd7f4e65b74c73f2644}{lock}}))}
\DoxyCodeLine{00113     \mbox{\hyperlink{console_8c_a95c0aca5d6d7487933984f08b189917a}{panic}}(\textcolor{stringliteral}{"{}bwrite"{}});}
\DoxyCodeLine{00114   b-\/>\mbox{\hyperlink{structbuf_ae7d6b6c34fdeadb38970efd0554aa1a9}{flags}} |= \mbox{\hyperlink{buf_8h_adc32011df267adb9740bcd0abf0f0663}{B\_DIRTY}};}
\DoxyCodeLine{00115   \mbox{\hyperlink{defs_8h_a70985c3f5b2fb79737457b5c88f5327a}{iderw}}(b);}
\DoxyCodeLine{00116 \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_a1bfd775f14ad3dfee354ee3897ecd28d_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_a2ca17a3161c80e3e4894ec6a96e0a281}\label{defs_8h_a2ca17a3161c80e3e4894ec6a96e0a281}} 
\index{defs.h@{defs.h}!chpr@{chpr}}
\index{chpr@{chpr}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{chpr()}{chpr()}}
{\footnotesize\ttfamily int chpr (\begin{DoxyParamCaption}\item[{int}]{pid,  }\item[{int}]{priority }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{proc_8c_source_l00559}{559}} of file \mbox{\hyperlink{proc_8c_source}{proc.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00560 \{}
\DoxyCodeLine{00561   \textcolor{keyword}{struct }\mbox{\hyperlink{structproc}{proc}} *p;}
\DoxyCodeLine{00562   \mbox{\hyperlink{defs_8h_afe4ef8638f1ecb962a6e67fb086ee3b8}{acquire}}(\&\mbox{\hyperlink{proc_8c_addf39d613ca9a58e7e6080a2e454421a}{ptable}}.lock);}
\DoxyCodeLine{00563   \textcolor{keywordflow}{for}(p = \mbox{\hyperlink{proc_8c_addf39d613ca9a58e7e6080a2e454421a}{ptable}}.proc; p < \&\mbox{\hyperlink{proc_8c_addf39d613ca9a58e7e6080a2e454421a}{ptable}}.proc[\mbox{\hyperlink{param_8h_a810c5b751df5bb30588613ed91095129}{NPROC}}]; p++)\{}
\DoxyCodeLine{00564     \textcolor{keywordflow}{if}(p-\/>\mbox{\hyperlink{structproc_acf2bdf54d1f957ccbcdc987007029944}{pid}} == \mbox{\hyperlink{structproc_acf2bdf54d1f957ccbcdc987007029944}{pid}})\{}
\DoxyCodeLine{00565       p-\/>\mbox{\hyperlink{structproc_adea4145a33ca852b6b634942f29c6534}{priority}} = \mbox{\hyperlink{structproc_adea4145a33ca852b6b634942f29c6534}{priority}};}
\DoxyCodeLine{00566       \textcolor{keywordflow}{break};}
\DoxyCodeLine{00567     \}}
\DoxyCodeLine{00568   \}}
\DoxyCodeLine{00569   \mbox{\hyperlink{defs_8h_a4f8616948f3dbce65671f666eed1d669}{release}}(\&\mbox{\hyperlink{proc_8c_addf39d613ca9a58e7e6080a2e454421a}{ptable}}.lock);}
\DoxyCodeLine{00570   \textcolor{keywordflow}{return} \mbox{\hyperlink{structproc_acf2bdf54d1f957ccbcdc987007029944}{pid}};}
\DoxyCodeLine{00571 \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_a2ca17a3161c80e3e4894ec6a96e0a281_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=207pt]{d5/d64/defs_8h_a2ca17a3161c80e3e4894ec6a96e0a281_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_a795e27a0cb916cfb41411ebbb9669ddf}\label{defs_8h_a795e27a0cb916cfb41411ebbb9669ddf}} 
\index{defs.h@{defs.h}!clearpteu@{clearpteu}}
\index{clearpteu@{clearpteu}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{clearpteu()}{clearpteu()}}
{\footnotesize\ttfamily void clearpteu (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{types_8h_ac131849542282b2c95dfeaf1f26dc010}{pde\+\_\+t}} $\ast$}]{pgdir,  }\item[{char $\ast$}]{uva }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{vm_8c_source_l00303}{303}} of file \mbox{\hyperlink{vm_8c_source}{vm.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00304 \{}
\DoxyCodeLine{00305   \mbox{\hyperlink{mmu_8h_ab23e75f764f8314a83eaff23508c2ae5}{pte\_t}} *pte;}
\DoxyCodeLine{00306 }
\DoxyCodeLine{00307   pte = walkpgdir(pgdir, uva, 0);}
\DoxyCodeLine{00308   \textcolor{keywordflow}{if}(pte == 0)}
\DoxyCodeLine{00309     \mbox{\hyperlink{console_8c_a95c0aca5d6d7487933984f08b189917a}{panic}}(\textcolor{stringliteral}{"{}clearpteu"{}});}
\DoxyCodeLine{00310   *pte \&= \string~PTE\_U;}
\DoxyCodeLine{00311 \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_a795e27a0cb916cfb41411ebbb9669ddf_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_a795e27a0cb916cfb41411ebbb9669ddf_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_a7247ece9501e31d62cffad46ec33d7af}\label{defs_8h_a7247ece9501e31d62cffad46ec33d7af}} 
\index{defs.h@{defs.h}!cmostime@{cmostime}}
\index{cmostime@{cmostime}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{cmostime()}{cmostime()}}
{\footnotesize\ttfamily void cmostime (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structrtcdate}{rtcdate}} $\ast$}]{r }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{lapic_8c_source_l00196}{196}} of file \mbox{\hyperlink{lapic_8c_source}{lapic.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00197 \{}
\DoxyCodeLine{00198   \textcolor{keyword}{struct }\mbox{\hyperlink{structrtcdate}{rtcdate}} t1, t2;}
\DoxyCodeLine{00199   \textcolor{keywordtype}{int} \mbox{\hyperlink{fs_8c_a0248d0bac625de5a1415f2f8c91f3343}{sb}}, bcd;}
\DoxyCodeLine{00200 }
\DoxyCodeLine{00201   \mbox{\hyperlink{fs_8c_a0248d0bac625de5a1415f2f8c91f3343}{sb}} = cmos\_read(\mbox{\hyperlink{lapic_8c_a7cacd7bee07e3e7ccb0bf85965d33fa4}{CMOS\_STATB}});}
\DoxyCodeLine{00202 }
\DoxyCodeLine{00203   bcd = (\mbox{\hyperlink{fs_8c_a0248d0bac625de5a1415f2f8c91f3343}{sb}} \& (1 << 2)) == 0;}
\DoxyCodeLine{00204 }
\DoxyCodeLine{00205   \textcolor{comment}{// make sure CMOS doesn't modify time while we read it}}
\DoxyCodeLine{00206   \textcolor{keywordflow}{for}(;;) \{}
\DoxyCodeLine{00207     fill\_rtcdate(\&t1);}
\DoxyCodeLine{00208     \textcolor{keywordflow}{if}(cmos\_read(\mbox{\hyperlink{lapic_8c_a7961582c4c0d7e087ef0c461b27d2bcb}{CMOS\_STATA}}) \& \mbox{\hyperlink{lapic_8c_a2c7758749c45a1f6a3ae41bcbdfa72f3}{CMOS\_UIP}})}
\DoxyCodeLine{00209         \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00210     fill\_rtcdate(\&t2);}
\DoxyCodeLine{00211     \textcolor{keywordflow}{if}(\mbox{\hyperlink{defs_8h_acdb4d3f48d2fb0a834722b1107d2b284}{memcmp}}(\&t1, \&t2, \textcolor{keyword}{sizeof}(t1)) == 0)}
\DoxyCodeLine{00212       \textcolor{keywordflow}{break};}
\DoxyCodeLine{00213   \}}
\DoxyCodeLine{00214 }
\DoxyCodeLine{00215   \textcolor{comment}{// convert}}
\DoxyCodeLine{00216   \textcolor{keywordflow}{if}(bcd) \{}
\DoxyCodeLine{00217 \textcolor{preprocessor}{\#define    CONV(x)     (t1.x = ((t1.x >> 4) * 10) + (t1.x \& 0xf))}}
\DoxyCodeLine{00218     \mbox{\hyperlink{lapic_8c_a7d52e480824afb678582f7b21cbd739d}{CONV}}(\mbox{\hyperlink{structrtcdate_affc39128483c500d77d1a012fe045664}{second}});}
\DoxyCodeLine{00219     \mbox{\hyperlink{lapic_8c_a7d52e480824afb678582f7b21cbd739d}{CONV}}(\mbox{\hyperlink{structrtcdate_a5984e264f332d7634912db2716472aa7}{minute}});}
\DoxyCodeLine{00220     \mbox{\hyperlink{lapic_8c_a7d52e480824afb678582f7b21cbd739d}{CONV}}(\mbox{\hyperlink{structrtcdate_ac601418b8ff95c35e8fddb47dd3fc77b}{hour}}  );}
\DoxyCodeLine{00221     \mbox{\hyperlink{lapic_8c_a7d52e480824afb678582f7b21cbd739d}{CONV}}(\mbox{\hyperlink{structrtcdate_a476a4a04d68d88b1515123aa24af8a4d}{day}}   );}
\DoxyCodeLine{00222     \mbox{\hyperlink{lapic_8c_a7d52e480824afb678582f7b21cbd739d}{CONV}}(\mbox{\hyperlink{structrtcdate_a3c509170b31d76f828681c2df54bf0b1}{month}} );}
\DoxyCodeLine{00223     \mbox{\hyperlink{lapic_8c_a7d52e480824afb678582f7b21cbd739d}{CONV}}(\mbox{\hyperlink{structrtcdate_a143aaaa0a5fcaae876c0af5f135ea5c8}{year}}  );}
\DoxyCodeLine{00224 \textcolor{preprocessor}{\#undef     CONV}}
\DoxyCodeLine{00225   \}}
\DoxyCodeLine{00226 }
\DoxyCodeLine{00227   *\mbox{\hyperlink{console_8c_af10fa12dd785c91e29528fbdc50cf9af}{r}} = t1;}
\DoxyCodeLine{00228   \mbox{\hyperlink{console_8c_af10fa12dd785c91e29528fbdc50cf9af}{r}}-\/>year += 2000;}
\DoxyCodeLine{00229 \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=232pt]{d5/d64/defs_8h_a7247ece9501e31d62cffad46ec33d7af_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_ab508ff0f4db26fe35cd25fa648f9ee75}\label{defs_8h_ab508ff0f4db26fe35cd25fa648f9ee75}} 
\index{defs.h@{defs.h}!consoleinit@{consoleinit}}
\index{consoleinit@{consoleinit}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{consoleinit()}{consoleinit()}}
{\footnotesize\ttfamily void consoleinit (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{console_8c_source_l00289}{289}} of file \mbox{\hyperlink{console_8c_source}{console.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00290 \{}
\DoxyCodeLine{00291   \mbox{\hyperlink{defs_8h_ab56d728e6966819a0260c358d3ac3419}{initlock}}(\&cons.lock, \textcolor{stringliteral}{"{}console"{}});}
\DoxyCodeLine{00292 }
\DoxyCodeLine{00293   \mbox{\hyperlink{structdevsw}{devsw}}[\mbox{\hyperlink{file_8h_a6c17169f464fb1a2995dbe06faa47a5f}{CONSOLE}}].\mbox{\hyperlink{structdevsw_a87fd7af6c9a6fb8663fc206be7a233d4}{write}} = \mbox{\hyperlink{console_8c_a6af7eb39268127d389792cec37785666}{consolewrite}};}
\DoxyCodeLine{00294   \mbox{\hyperlink{structdevsw}{devsw}}[\mbox{\hyperlink{file_8h_a6c17169f464fb1a2995dbe06faa47a5f}{CONSOLE}}].\mbox{\hyperlink{structdevsw_a4efbe00d0031a1c9005ef2186947ea37}{read}} = \mbox{\hyperlink{console_8c_a28ac85a90987662e306ca8efbfe16074}{consoleread}};}
\DoxyCodeLine{00295   cons.locking = 1;}
\DoxyCodeLine{00296 }
\DoxyCodeLine{00297   \mbox{\hyperlink{defs_8h_a63da75c0c2f0b051f2c790aea2116b63}{ioapicenable}}(\mbox{\hyperlink{traps_8h_a0b7569cda71298859ffb6ea55c03a36a}{IRQ\_KBD}}, 0);}
\DoxyCodeLine{00298 \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_ab508ff0f4db26fe35cd25fa648f9ee75_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_a9ec968a6fc407075634fe0e82a9c6862}\label{defs_8h_a9ec968a6fc407075634fe0e82a9c6862}} 
\index{defs.h@{defs.h}!consoleintr@{consoleintr}}
\index{consoleintr@{consoleintr}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{consoleintr()}{consoleintr()}}
{\footnotesize\ttfamily void consoleintr (\begin{DoxyParamCaption}\item[{int($\ast$)(void)}]{getc }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{console_8c_source_l00192}{192}} of file \mbox{\hyperlink{console_8c_source}{console.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00193 \{}
\DoxyCodeLine{00194   \textcolor{keywordtype}{int} c, doprocdump = 0;}
\DoxyCodeLine{00195 }
\DoxyCodeLine{00196   \mbox{\hyperlink{defs_8h_afe4ef8638f1ecb962a6e67fb086ee3b8}{acquire}}(\&cons.lock);}
\DoxyCodeLine{00197   \textcolor{keywordflow}{while}((c = getc()) >= 0)\{}
\DoxyCodeLine{00198     \textcolor{keywordflow}{switch}(c)\{}
\DoxyCodeLine{00199     \textcolor{keywordflow}{case} \mbox{\hyperlink{console_8c_ac54ae397901fe700628cafadea3c5208}{C}}(\textcolor{charliteral}{'P'}):  \textcolor{comment}{// Process listing.}}
\DoxyCodeLine{00200       \textcolor{comment}{// procdump() locks cons.lock indirectly; invoke later}}
\DoxyCodeLine{00201       doprocdump = 1;}
\DoxyCodeLine{00202       \textcolor{keywordflow}{break};}
\DoxyCodeLine{00203     \textcolor{keywordflow}{case} \mbox{\hyperlink{console_8c_ac54ae397901fe700628cafadea3c5208}{C}}(\textcolor{charliteral}{'U'}):  \textcolor{comment}{// Kill line.}}
\DoxyCodeLine{00204       while(\mbox{\hyperlink{console_8c_ad4135e5cfd2abbf73cba6fe6cdf2e949}{input}}.\mbox{\hyperlink{console_8c_ab56fa7c992b725d84916b987c3d532ea}{e}} != \mbox{\hyperlink{console_8c_ad4135e5cfd2abbf73cba6fe6cdf2e949}{input}}.\mbox{\hyperlink{console_8c_afdeff54db9a334718662b709641fdfe1}{w}} \&\&}
\DoxyCodeLine{00205             \mbox{\hyperlink{console_8c_ad4135e5cfd2abbf73cba6fe6cdf2e949}{input}}.\mbox{\hyperlink{structbuf}{buf}}[(\mbox{\hyperlink{console_8c_ad4135e5cfd2abbf73cba6fe6cdf2e949}{input}}.\mbox{\hyperlink{console_8c_ab56fa7c992b725d84916b987c3d532ea}{e}}-\/1) \% \mbox{\hyperlink{console_8c_a5d85434f2a29f6c3048aeac34d0ce41d}{INPUT\_BUF}}] != \textcolor{stringliteral}{'\(\backslash\)n'})\{}
\DoxyCodeLine{00206         \mbox{\hyperlink{console_8c_ad4135e5cfd2abbf73cba6fe6cdf2e949}{input}}.e-\/-\/;}
\DoxyCodeLine{00207         consputc(\mbox{\hyperlink{console_8c_a629568514359445d2fbda71d70eeb1ce}{BACKSPACE}});}
\DoxyCodeLine{00208       \}}
\DoxyCodeLine{00209       \textcolor{keywordflow}{break};}
\DoxyCodeLine{00210     \textcolor{keywordflow}{case} \mbox{\hyperlink{console_8c_ac54ae397901fe700628cafadea3c5208}{C}}(\textcolor{charliteral}{'H'}): case \textcolor{stringliteral}{'\(\backslash\)x7f'}:  \textcolor{comment}{// Backspace}}
\DoxyCodeLine{00211       if(\mbox{\hyperlink{console_8c_ad4135e5cfd2abbf73cba6fe6cdf2e949}{input}}.\mbox{\hyperlink{console_8c_ab56fa7c992b725d84916b987c3d532ea}{e}} != \mbox{\hyperlink{console_8c_ad4135e5cfd2abbf73cba6fe6cdf2e949}{input}}.\mbox{\hyperlink{console_8c_afdeff54db9a334718662b709641fdfe1}{w}})\{}
\DoxyCodeLine{00212         \mbox{\hyperlink{console_8c_ad4135e5cfd2abbf73cba6fe6cdf2e949}{input}}.e-\/-\/;}
\DoxyCodeLine{00213         consputc(\mbox{\hyperlink{console_8c_a629568514359445d2fbda71d70eeb1ce}{BACKSPACE}});}
\DoxyCodeLine{00214       \}}
\DoxyCodeLine{00215       \textcolor{keywordflow}{break};}
\DoxyCodeLine{00216     \textcolor{keywordflow}{default}:}
\DoxyCodeLine{00217       \textcolor{keywordflow}{if}(c != 0 \&\& \mbox{\hyperlink{console_8c_ad4135e5cfd2abbf73cba6fe6cdf2e949}{input}}.e-\/\mbox{\hyperlink{console_8c_ad4135e5cfd2abbf73cba6fe6cdf2e949}{input}}.r < \mbox{\hyperlink{console_8c_a5d85434f2a29f6c3048aeac34d0ce41d}{INPUT\_BUF}})\{}
\DoxyCodeLine{00218         c = (c == \textcolor{charliteral}{'\(\backslash\)r'}) ? \textcolor{charliteral}{'\(\backslash\)n'} : c;}
\DoxyCodeLine{00219         \mbox{\hyperlink{console_8c_ad4135e5cfd2abbf73cba6fe6cdf2e949}{input}}.buf[\mbox{\hyperlink{console_8c_ad4135e5cfd2abbf73cba6fe6cdf2e949}{input}}.e++ \% \mbox{\hyperlink{console_8c_a5d85434f2a29f6c3048aeac34d0ce41d}{INPUT\_BUF}}] = c;}
\DoxyCodeLine{00220         consputc(c);}
\DoxyCodeLine{00221         \textcolor{keywordflow}{if}(c == \textcolor{charliteral}{'\(\backslash\)n'} || c == \mbox{\hyperlink{console_8c_ac54ae397901fe700628cafadea3c5208}{C}}(\textcolor{charliteral}{'D'}) || \mbox{\hyperlink{console_8c_ad4135e5cfd2abbf73cba6fe6cdf2e949}{input}}.e == \mbox{\hyperlink{console_8c_ad4135e5cfd2abbf73cba6fe6cdf2e949}{input}}.r+\mbox{\hyperlink{console_8c_a5d85434f2a29f6c3048aeac34d0ce41d}{INPUT\_BUF}})\{}
\DoxyCodeLine{00222           \mbox{\hyperlink{console_8c_ad4135e5cfd2abbf73cba6fe6cdf2e949}{input}}.w = \mbox{\hyperlink{console_8c_ad4135e5cfd2abbf73cba6fe6cdf2e949}{input}}.e;}
\DoxyCodeLine{00223           \mbox{\hyperlink{defs_8h_a245b56417239f499389b2e806bd99254}{wakeup}}(\&\mbox{\hyperlink{console_8c_ad4135e5cfd2abbf73cba6fe6cdf2e949}{input}}.r);}
\DoxyCodeLine{00224         \}}
\DoxyCodeLine{00225       \}}
\DoxyCodeLine{00226       \textcolor{keywordflow}{break};}
\DoxyCodeLine{00227     \}}
\DoxyCodeLine{00228   \}}
\DoxyCodeLine{00229   \mbox{\hyperlink{defs_8h_a4f8616948f3dbce65671f666eed1d669}{release}}(\&cons.lock);}
\DoxyCodeLine{00230   \textcolor{keywordflow}{if}(doprocdump) \{}
\DoxyCodeLine{00231     \mbox{\hyperlink{defs_8h_a7f185044294ebb57521c73f723990164}{procdump}}();  \textcolor{comment}{// now call procdump() wo. cons.lock held}}
\DoxyCodeLine{00232   \}}
\DoxyCodeLine{00233 \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_a9ec968a6fc407075634fe0e82a9c6862_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=296pt]{d5/d64/defs_8h_a9ec968a6fc407075634fe0e82a9c6862_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_a11f5ff2e5bcd16968a88fcbb30db5a10}\label{defs_8h_a11f5ff2e5bcd16968a88fcbb30db5a10}} 
\index{defs.h@{defs.h}!copyout@{copyout}}
\index{copyout@{copyout}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{copyout()}{copyout()}}
{\footnotesize\ttfamily int copyout (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{types_8h_ac131849542282b2c95dfeaf1f26dc010}{pde\+\_\+t}} $\ast$}]{pgdir,  }\item[{\mbox{\hyperlink{types_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}}}]{va,  }\item[{void $\ast$}]{p,  }\item[{\mbox{\hyperlink{types_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}}}]{len }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{vm_8c_source_l00366}{366}} of file \mbox{\hyperlink{vm_8c_source}{vm.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00367 \{}
\DoxyCodeLine{00368   \textcolor{keywordtype}{char} *\mbox{\hyperlink{structbuf}{buf}}, *pa0;}
\DoxyCodeLine{00369   \mbox{\hyperlink{types_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}} n, va0;}
\DoxyCodeLine{00370 }
\DoxyCodeLine{00371   \mbox{\hyperlink{structbuf}{buf}} = (\textcolor{keywordtype}{char}*)p;}
\DoxyCodeLine{00372   \textcolor{keywordflow}{while}(len > 0)\{}
\DoxyCodeLine{00373     va0 = (\mbox{\hyperlink{types_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}})\mbox{\hyperlink{mmu_8h_a687e91750055553dd2788386c6a512fb}{PGROUNDDOWN}}(va);}
\DoxyCodeLine{00374     pa0 = \mbox{\hyperlink{vm_8c_a3436a3bf222c074c4ed4d985f0c1ecef}{uva2ka}}(pgdir, (\textcolor{keywordtype}{char}*)va0);}
\DoxyCodeLine{00375     \textcolor{keywordflow}{if}(pa0 == 0)}
\DoxyCodeLine{00376       \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{00377     n = \mbox{\hyperlink{mmu_8h_a5f96cb6ae6670e023c407cc2f77e1704}{PGSIZE}} -\/ (va -\/ va0);}
\DoxyCodeLine{00378     \textcolor{keywordflow}{if}(n > len)}
\DoxyCodeLine{00379       n = len;}
\DoxyCodeLine{00380     \mbox{\hyperlink{defs_8h_ac152fff34fe03e497d35b1d4c47f1445}{memmove}}(pa0 + (va -\/ va0), \mbox{\hyperlink{structbuf}{buf}}, n);}
\DoxyCodeLine{00381     len -\/= n;}
\DoxyCodeLine{00382     \mbox{\hyperlink{structbuf}{buf}} += n;}
\DoxyCodeLine{00383     va = va0 + \mbox{\hyperlink{mmu_8h_a5f96cb6ae6670e023c407cc2f77e1704}{PGSIZE}};}
\DoxyCodeLine{00384   \}}
\DoxyCodeLine{00385   \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{00386 \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=229pt]{d5/d64/defs_8h_a11f5ff2e5bcd16968a88fcbb30db5a10_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_a11f5ff2e5bcd16968a88fcbb30db5a10_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_a8caec506ffa8f9386b0434e4cd5aa2b8}\label{defs_8h_a8caec506ffa8f9386b0434e4cd5aa2b8}} 
\index{defs.h@{defs.h}!copyuvm@{copyuvm}}
\index{copyuvm@{copyuvm}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{copyuvm()}{copyuvm()}}
{\footnotesize\ttfamily \mbox{\hyperlink{types_8h_ac131849542282b2c95dfeaf1f26dc010}{pde\+\_\+t}} $\ast$ copyuvm (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{types_8h_ac131849542282b2c95dfeaf1f26dc010}{pde\+\_\+t}} $\ast$}]{pgdir,  }\item[{\mbox{\hyperlink{types_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}}}]{sz }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{vm_8c_source_l00316}{316}} of file \mbox{\hyperlink{vm_8c_source}{vm.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00317 \{}
\DoxyCodeLine{00318   \mbox{\hyperlink{types_8h_ac131849542282b2c95dfeaf1f26dc010}{pde\_t}} *d;}
\DoxyCodeLine{00319   \mbox{\hyperlink{mmu_8h_ab23e75f764f8314a83eaff23508c2ae5}{pte\_t}} *pte;}
\DoxyCodeLine{00320   \mbox{\hyperlink{types_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}} pa, i, flags;}
\DoxyCodeLine{00321   \textcolor{keywordtype}{char} *\mbox{\hyperlink{usertests_8c_aa1c6e6e76813ccb29a29bb119dba668a}{mem}};}
\DoxyCodeLine{00322 }
\DoxyCodeLine{00323   \textcolor{keywordflow}{if}((d = \mbox{\hyperlink{vm_8c_a1c8a7a02e9391b5cf0984388216695c0}{setupkvm}}()) == 0)}
\DoxyCodeLine{00324     \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{00325   \textcolor{keywordflow}{for}(i = 0; i < sz; i += \mbox{\hyperlink{mmu_8h_a5f96cb6ae6670e023c407cc2f77e1704}{PGSIZE}})\{}
\DoxyCodeLine{00326     \textcolor{keywordflow}{if}((pte = walkpgdir(pgdir, (\textcolor{keywordtype}{void} *) i, 0)) == 0)}
\DoxyCodeLine{00327       \mbox{\hyperlink{console_8c_a95c0aca5d6d7487933984f08b189917a}{panic}}(\textcolor{stringliteral}{"{}copyuvm: pte should exist"{}});}
\DoxyCodeLine{00328     \textcolor{keywordflow}{if}(!(*pte \& \mbox{\hyperlink{mmu_8h_a89bd860de64c44cd8ebaca8dc311b5ac}{PTE\_P}}))}
\DoxyCodeLine{00329       \mbox{\hyperlink{console_8c_a95c0aca5d6d7487933984f08b189917a}{panic}}(\textcolor{stringliteral}{"{}copyuvm: page not present"{}});}
\DoxyCodeLine{00330     pa = \mbox{\hyperlink{mmu_8h_a74b24f9b091875a5313370892e3f37a5}{PTE\_ADDR}}(*pte);}
\DoxyCodeLine{00331     flags = \mbox{\hyperlink{mmu_8h_a8842a288646d28dda80a0544002f6941}{PTE\_FLAGS}}(*pte);}
\DoxyCodeLine{00332     \textcolor{keywordflow}{if}((\mbox{\hyperlink{usertests_8c_aa1c6e6e76813ccb29a29bb119dba668a}{mem}} = \mbox{\hyperlink{defs_8h_a5e965f6365c721b5b23c12d16d45c3dc}{kalloc}}()) == 0)}
\DoxyCodeLine{00333       \textcolor{keywordflow}{goto} bad;}
\DoxyCodeLine{00334     \mbox{\hyperlink{defs_8h_ac152fff34fe03e497d35b1d4c47f1445}{memmove}}(\mbox{\hyperlink{usertests_8c_aa1c6e6e76813ccb29a29bb119dba668a}{mem}}, (\textcolor{keywordtype}{char}*)\mbox{\hyperlink{memlayout_8h_aefd5e8b62c49bba2cf20309c7dd174e2}{P2V}}(pa), \mbox{\hyperlink{mmu_8h_a5f96cb6ae6670e023c407cc2f77e1704}{PGSIZE}});}
\DoxyCodeLine{00335     \textcolor{keywordflow}{if}(mappages(d, (\textcolor{keywordtype}{void}*)i, \mbox{\hyperlink{mmu_8h_a5f96cb6ae6670e023c407cc2f77e1704}{PGSIZE}}, \mbox{\hyperlink{memlayout_8h_a5021188bc7da1304f27e913aee183407}{V2P}}(\mbox{\hyperlink{usertests_8c_aa1c6e6e76813ccb29a29bb119dba668a}{mem}}), flags) < 0) \{}
\DoxyCodeLine{00336       \mbox{\hyperlink{defs_8h_ae79d6a7d0901b7c081cfded3f916d5bd}{kfree}}(\mbox{\hyperlink{usertests_8c_aa1c6e6e76813ccb29a29bb119dba668a}{mem}});}
\DoxyCodeLine{00337       \textcolor{keywordflow}{goto} bad;}
\DoxyCodeLine{00338     \}}
\DoxyCodeLine{00339   \}}
\DoxyCodeLine{00340   \textcolor{keywordflow}{return} d;}
\DoxyCodeLine{00341 }
\DoxyCodeLine{00342 bad:}
\DoxyCodeLine{00343   \mbox{\hyperlink{vm_8c_aa883924e2f068c520b695cdc168e1603}{freevm}}(d);}
\DoxyCodeLine{00344   \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{00345 \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_a8caec506ffa8f9386b0434e4cd5aa2b8_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_a8caec506ffa8f9386b0434e4cd5aa2b8_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_abeb2bc020e7332bcde1d7beab08582d3}\label{defs_8h_abeb2bc020e7332bcde1d7beab08582d3}} 
\index{defs.h@{defs.h}!cprintf@{cprintf}}
\index{cprintf@{cprintf}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{cprintf()}{cprintf()}}
{\footnotesize\ttfamily void cprintf (\begin{DoxyParamCaption}\item[{char $\ast$}]{fmt,  }\item[{}]{... }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{console_8c_source_l00055}{55}} of file \mbox{\hyperlink{console_8c_source}{console.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00056 \{}
\DoxyCodeLine{00057   \textcolor{keywordtype}{int} i, c, \mbox{\hyperlink{console_8c_ae51110da3bc13ef49e32d1e2cda5d55c}{locking}};}
\DoxyCodeLine{00058   \mbox{\hyperlink{types_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}} *argp;}
\DoxyCodeLine{00059   \textcolor{keywordtype}{char} *s;}
\DoxyCodeLine{00060 }
\DoxyCodeLine{00061   \mbox{\hyperlink{console_8c_ae51110da3bc13ef49e32d1e2cda5d55c}{locking}} = cons.locking;}
\DoxyCodeLine{00062   \textcolor{keywordflow}{if}(\mbox{\hyperlink{console_8c_ae51110da3bc13ef49e32d1e2cda5d55c}{locking}})}
\DoxyCodeLine{00063     \mbox{\hyperlink{defs_8h_afe4ef8638f1ecb962a6e67fb086ee3b8}{acquire}}(\&cons.lock);}
\DoxyCodeLine{00064 }
\DoxyCodeLine{00065   \textcolor{keywordflow}{if} (fmt == 0)}
\DoxyCodeLine{00066     \mbox{\hyperlink{console_8c_a95c0aca5d6d7487933984f08b189917a}{panic}}(\textcolor{stringliteral}{"{}null fmt"{}});}
\DoxyCodeLine{00067 }
\DoxyCodeLine{00068   argp = (\mbox{\hyperlink{types_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}}*)(\textcolor{keywordtype}{void}*)(\&fmt + 1);}
\DoxyCodeLine{00069   \textcolor{keywordflow}{for}(i = 0; (c = fmt[i] \& 0xff) != 0; i++)\{}
\DoxyCodeLine{00070     \textcolor{keywordflow}{if}(c != \textcolor{charliteral}{'\%'})\{}
\DoxyCodeLine{00071       consputc(c);}
\DoxyCodeLine{00072       \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00073     \}}
\DoxyCodeLine{00074     c = fmt[++i] \& 0xff;}
\DoxyCodeLine{00075     \textcolor{keywordflow}{if}(c == 0)}
\DoxyCodeLine{00076       \textcolor{keywordflow}{break};}
\DoxyCodeLine{00077     \textcolor{keywordflow}{switch}(c)\{}
\DoxyCodeLine{00078     \textcolor{keywordflow}{case} \textcolor{charliteral}{'d'}:}
\DoxyCodeLine{00079       printint(*argp++, 10, 1);}
\DoxyCodeLine{00080       \textcolor{keywordflow}{break};}
\DoxyCodeLine{00081     \textcolor{keywordflow}{case} \textcolor{charliteral}{'x'}:}
\DoxyCodeLine{00082     \textcolor{keywordflow}{case} \textcolor{charliteral}{'p'}:}
\DoxyCodeLine{00083       printint(*argp++, 16, 0);}
\DoxyCodeLine{00084       \textcolor{keywordflow}{break};}
\DoxyCodeLine{00085     \textcolor{keywordflow}{case} \textcolor{charliteral}{'s'}:}
\DoxyCodeLine{00086       \textcolor{keywordflow}{if}((s = (\textcolor{keywordtype}{char}*)*argp++) == 0)}
\DoxyCodeLine{00087         s = \textcolor{stringliteral}{"{}(null)"{}};}
\DoxyCodeLine{00088       \textcolor{keywordflow}{for}(; *s; s++)}
\DoxyCodeLine{00089         consputc(*s);}
\DoxyCodeLine{00090       \textcolor{keywordflow}{break};}
\DoxyCodeLine{00091     \textcolor{keywordflow}{case} \textcolor{charliteral}{'\%'}:}
\DoxyCodeLine{00092       consputc(\textcolor{charliteral}{'\%'});}
\DoxyCodeLine{00093       \textcolor{keywordflow}{break};}
\DoxyCodeLine{00094     \textcolor{keywordflow}{default}:}
\DoxyCodeLine{00095       \textcolor{comment}{// Print unknown \% sequence to draw attention.}}
\DoxyCodeLine{00096       consputc(\textcolor{charliteral}{'\%'});}
\DoxyCodeLine{00097       consputc(c);}
\DoxyCodeLine{00098       \textcolor{keywordflow}{break};}
\DoxyCodeLine{00099     \}}
\DoxyCodeLine{00100   \}}
\DoxyCodeLine{00101 }
\DoxyCodeLine{00102   \textcolor{keywordflow}{if}(\mbox{\hyperlink{console_8c_ae51110da3bc13ef49e32d1e2cda5d55c}{locking}})}
\DoxyCodeLine{00103     \mbox{\hyperlink{defs_8h_a4f8616948f3dbce65671f666eed1d669}{release}}(\&cons.lock);}
\DoxyCodeLine{00104 \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_abeb2bc020e7332bcde1d7beab08582d3_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_abeb2bc020e7332bcde1d7beab08582d3_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_a1e777db371a84ab92eb05662e4fa12d4}\label{defs_8h_a1e777db371a84ab92eb05662e4fa12d4}} 
\index{defs.h@{defs.h}!cps@{cps}}
\index{cps@{cps}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{cps()}{cps()}}
{\footnotesize\ttfamily int cps (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{proc_8c_source_l00537}{537}} of file \mbox{\hyperlink{proc_8c_source}{proc.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00538 \{}
\DoxyCodeLine{00539 \textcolor{keyword}{struct }\mbox{\hyperlink{structproc}{proc}} *p;}
\DoxyCodeLine{00540 \textcolor{comment}{//Enables interrupts on this processor.}}
\DoxyCodeLine{00541 sti();}
\DoxyCodeLine{00542 }
\DoxyCodeLine{00543 \textcolor{comment}{//Loop over process table looking for process with pid.}}
\DoxyCodeLine{00544 \mbox{\hyperlink{defs_8h_afe4ef8638f1ecb962a6e67fb086ee3b8}{acquire}}(\&\mbox{\hyperlink{proc_8c_addf39d613ca9a58e7e6080a2e454421a}{ptable}}.lock);}
\DoxyCodeLine{00545 \mbox{\hyperlink{console_8c_a90f0742d846503e4ed1804f1df421ec6}{cprintf}}(\textcolor{stringliteral}{"{}name \(\backslash\)t pid \(\backslash\)t state \(\backslash\)t priority \(\backslash\)n"{}});}
\DoxyCodeLine{00546 \textcolor{keywordflow}{for}(p = \mbox{\hyperlink{proc_8c_addf39d613ca9a58e7e6080a2e454421a}{ptable}}.proc; p < \&\mbox{\hyperlink{proc_8c_addf39d613ca9a58e7e6080a2e454421a}{ptable}}.proc[\mbox{\hyperlink{param_8h_a810c5b751df5bb30588613ed91095129}{NPROC}}]; p++)\{}
\DoxyCodeLine{00547   \textcolor{keywordflow}{if}(p-\/>\mbox{\hyperlink{structproc_a0f2fe91548a1382672ae26e29ca9e736}{state}} == \mbox{\hyperlink{proc_8h_aa1ced7d2b60040fded3fa873d0c03ba7a488282601451a751e0f0e770b15d4235}{SLEEPING}})}
\DoxyCodeLine{00548     \mbox{\hyperlink{console_8c_a90f0742d846503e4ed1804f1df421ec6}{cprintf}}(\textcolor{stringliteral}{"{}\%s \(\backslash\)t \%d \(\backslash\)t SLEEPING \(\backslash\)t \%d \(\backslash\)n "{}}, p-\/>\mbox{\hyperlink{structproc_ac04af53e17d24b90c3cbfab56d658d62}{name}},p-\/>\mbox{\hyperlink{structproc_acf2bdf54d1f957ccbcdc987007029944}{pid}},p-\/>\mbox{\hyperlink{structproc_adea4145a33ca852b6b634942f29c6534}{priority}});}
\DoxyCodeLine{00549   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(p-\/>\mbox{\hyperlink{structproc_a0f2fe91548a1382672ae26e29ca9e736}{state}} == \mbox{\hyperlink{proc_8h_aa1ced7d2b60040fded3fa873d0c03ba7a1061be6c3fb88d32829cba6f6b2be304}{RUNNING}})}
\DoxyCodeLine{00550     \mbox{\hyperlink{console_8c_a90f0742d846503e4ed1804f1df421ec6}{cprintf}}(\textcolor{stringliteral}{"{}\%s \(\backslash\)t \%d \(\backslash\)t RUNNING \(\backslash\)t \%d \(\backslash\)n "{}}, p-\/>\mbox{\hyperlink{structproc_ac04af53e17d24b90c3cbfab56d658d62}{name}},p-\/>\mbox{\hyperlink{structproc_acf2bdf54d1f957ccbcdc987007029944}{pid}},p-\/>\mbox{\hyperlink{structproc_adea4145a33ca852b6b634942f29c6534}{priority}});}
\DoxyCodeLine{00551   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(p-\/>\mbox{\hyperlink{structproc_a0f2fe91548a1382672ae26e29ca9e736}{state}} == \mbox{\hyperlink{proc_8h_aa1ced7d2b60040fded3fa873d0c03ba7a269b90433e40460a2c0044a0b3e15694}{RUNNABLE}})}
\DoxyCodeLine{00552     \mbox{\hyperlink{console_8c_a90f0742d846503e4ed1804f1df421ec6}{cprintf}}(\textcolor{stringliteral}{"{}\%s \(\backslash\)t \%d \(\backslash\)t RUNNABLE \(\backslash\)t \%d \(\backslash\)n "{}}, p-\/>\mbox{\hyperlink{structproc_ac04af53e17d24b90c3cbfab56d658d62}{name}},p-\/>\mbox{\hyperlink{structproc_acf2bdf54d1f957ccbcdc987007029944}{pid}},p-\/>\mbox{\hyperlink{structproc_adea4145a33ca852b6b634942f29c6534}{priority}});}
\DoxyCodeLine{00553 \}}
\DoxyCodeLine{00554 \mbox{\hyperlink{defs_8h_a4f8616948f3dbce65671f666eed1d669}{release}}(\&\mbox{\hyperlink{proc_8c_addf39d613ca9a58e7e6080a2e454421a}{ptable}}.lock);}
\DoxyCodeLine{00555 \textcolor{keywordflow}{return} 23;}
\DoxyCodeLine{00556 \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_a1e777db371a84ab92eb05662e4fa12d4_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=201pt]{d5/d64/defs_8h_a1e777db371a84ab92eb05662e4fa12d4_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_a1444de2903d3d2624a50de058d19c635}\label{defs_8h_a1444de2903d3d2624a50de058d19c635}} 
\index{defs.h@{defs.h}!cpuid@{cpuid}}
\index{cpuid@{cpuid}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{cpuid()}{cpuid()}}
{\footnotesize\ttfamily int cpuid (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{proc_8c_source_l00031}{31}} of file \mbox{\hyperlink{proc_8c_source}{proc.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00031         \{}
\DoxyCodeLine{00032   \textcolor{keywordflow}{return} \mbox{\hyperlink{proc_8c_ad427959ad025dabd8cd393b27ec39160}{mycpu}}()-\/\mbox{\hyperlink{mp_8c_a6d2633e73724907b582dfe6938ed7bb9}{cpus}};}
\DoxyCodeLine{00033 \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_a1444de2903d3d2624a50de058d19c635_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=201pt]{d5/d64/defs_8h_a1444de2903d3d2624a50de058d19c635_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_ac45969a8875b6dc87245e0a642aa2d8d}\label{defs_8h_ac45969a8875b6dc87245e0a642aa2d8d}} 
\index{defs.h@{defs.h}!deallocuvm@{deallocuvm}}
\index{deallocuvm@{deallocuvm}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{deallocuvm()}{deallocuvm()}}
{\footnotesize\ttfamily int deallocuvm (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{types_8h_ac131849542282b2c95dfeaf1f26dc010}{pde\+\_\+t}} $\ast$}]{pgdir,  }\item[{\mbox{\hyperlink{types_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}}}]{oldsz,  }\item[{\mbox{\hyperlink{types_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}}}]{newsz }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{vm_8c_source_l00256}{256}} of file \mbox{\hyperlink{vm_8c_source}{vm.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00257 \{}
\DoxyCodeLine{00258   \mbox{\hyperlink{mmu_8h_ab23e75f764f8314a83eaff23508c2ae5}{pte\_t}} *pte;}
\DoxyCodeLine{00259   \mbox{\hyperlink{types_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}} a, pa;}
\DoxyCodeLine{00260 }
\DoxyCodeLine{00261   \textcolor{keywordflow}{if}(newsz >= oldsz)}
\DoxyCodeLine{00262     \textcolor{keywordflow}{return} oldsz;}
\DoxyCodeLine{00263 }
\DoxyCodeLine{00264   a = \mbox{\hyperlink{mmu_8h_affa8cdfbd1c15dafc9f3af3a7b641f80}{PGROUNDUP}}(newsz);}
\DoxyCodeLine{00265   \textcolor{keywordflow}{for}(; a  < oldsz; a += \mbox{\hyperlink{mmu_8h_a5f96cb6ae6670e023c407cc2f77e1704}{PGSIZE}})\{}
\DoxyCodeLine{00266     pte = walkpgdir(pgdir, (\textcolor{keywordtype}{char}*)a, 0);}
\DoxyCodeLine{00267     \textcolor{keywordflow}{if}(!pte)}
\DoxyCodeLine{00268       a = \mbox{\hyperlink{mmu_8h_a2e162e8ad6bc81877dd299db9fc87664}{PGADDR}}(\mbox{\hyperlink{mmu_8h_a110662636733266a8820e15fd32995b7}{PDX}}(a) + 1, 0, 0) -\/ \mbox{\hyperlink{mmu_8h_a5f96cb6ae6670e023c407cc2f77e1704}{PGSIZE}};}
\DoxyCodeLine{00269     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}((*pte \& \mbox{\hyperlink{mmu_8h_a89bd860de64c44cd8ebaca8dc311b5ac}{PTE\_P}}) != 0)\{}
\DoxyCodeLine{00270       pa = \mbox{\hyperlink{mmu_8h_a74b24f9b091875a5313370892e3f37a5}{PTE\_ADDR}}(*pte);}
\DoxyCodeLine{00271       \textcolor{keywordflow}{if}(pa == 0)}
\DoxyCodeLine{00272         \mbox{\hyperlink{console_8c_a95c0aca5d6d7487933984f08b189917a}{panic}}(\textcolor{stringliteral}{"{}kfree"{}});}
\DoxyCodeLine{00273       \textcolor{keywordtype}{char} *v = \mbox{\hyperlink{memlayout_8h_aefd5e8b62c49bba2cf20309c7dd174e2}{P2V}}(pa);}
\DoxyCodeLine{00274       \mbox{\hyperlink{defs_8h_ae79d6a7d0901b7c081cfded3f916d5bd}{kfree}}(v);}
\DoxyCodeLine{00275       *pte = 0;}
\DoxyCodeLine{00276     \}}
\DoxyCodeLine{00277   \}}
\DoxyCodeLine{00278   \textcolor{keywordflow}{return} newsz;}
\DoxyCodeLine{00279 \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_ac45969a8875b6dc87245e0a642aa2d8d_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_ac45969a8875b6dc87245e0a642aa2d8d_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_ae4ccea0aa02557162963e597737f665a}\label{defs_8h_ae4ccea0aa02557162963e597737f665a}} 
\index{defs.h@{defs.h}!dirlink@{dirlink}}
\index{dirlink@{dirlink}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{dirlink()}{dirlink()}}
{\footnotesize\ttfamily int dirlink (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structinode}{inode}} $\ast$}]{dp,  }\item[{char $\ast$}]{name,  }\item[{\mbox{\hyperlink{types_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}}}]{inum }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{fs_8c_source_l00552}{552}} of file \mbox{\hyperlink{fs_8c_source}{fs.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00553 \{}
\DoxyCodeLine{00554   \textcolor{keywordtype}{int} off;}
\DoxyCodeLine{00555   \textcolor{keyword}{struct }\mbox{\hyperlink{structdirent}{dirent}} de;}
\DoxyCodeLine{00556   \textcolor{keyword}{struct }\mbox{\hyperlink{structinode}{inode}} *ip;}
\DoxyCodeLine{00557 }
\DoxyCodeLine{00558   \textcolor{comment}{// Check that name is not present.}}
\DoxyCodeLine{00559   \textcolor{keywordflow}{if}((ip = \mbox{\hyperlink{fs_8c_a5341068f021beac8cf0032b97d231e6f}{dirlookup}}(dp, \mbox{\hyperlink{usertests_8c_aee754febd402311e2a552cb0d6ab6629}{name}}, 0)) != 0)\{}
\DoxyCodeLine{00560     \mbox{\hyperlink{fs_8c_ab3c447f135c68e4c3c1f8d5866f6e77b}{iput}}(ip);}
\DoxyCodeLine{00561     \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{00562   \}}
\DoxyCodeLine{00563 }
\DoxyCodeLine{00564   \textcolor{comment}{// Look for an empty dirent.}}
\DoxyCodeLine{00565   \textcolor{keywordflow}{for}(off = 0; off < dp-\/>\mbox{\hyperlink{structinode_a918af769c48a8ca8afac057bf83d12de}{size}}; off += \textcolor{keyword}{sizeof}(de))\{}
\DoxyCodeLine{00566     \textcolor{keywordflow}{if}(\mbox{\hyperlink{fs_8c_a3aba1fa9f6789d09356aec5b96d91fa8}{readi}}(dp, (\textcolor{keywordtype}{char}*)\&de, off, \textcolor{keyword}{sizeof}(de)) != \textcolor{keyword}{sizeof}(de))}
\DoxyCodeLine{00567       \mbox{\hyperlink{console_8c_a95c0aca5d6d7487933984f08b189917a}{panic}}(\textcolor{stringliteral}{"{}dirlink read"{}});}
\DoxyCodeLine{00568     \textcolor{keywordflow}{if}(de.inum == 0)}
\DoxyCodeLine{00569       \textcolor{keywordflow}{break};}
\DoxyCodeLine{00570   \}}
\DoxyCodeLine{00571 }
\DoxyCodeLine{00572   \mbox{\hyperlink{defs_8h_a66107cd2364627727a36cef6c773b39c}{strncpy}}(de.name, \mbox{\hyperlink{usertests_8c_aee754febd402311e2a552cb0d6ab6629}{name}}, \mbox{\hyperlink{fs_8h_a48246fb9e5cb7f6a71ebc9ebc2f06562}{DIRSIZ}});}
\DoxyCodeLine{00573   de.inum = \mbox{\hyperlink{structinode_a8acc2b9df0bfc6856da62925763db7fe}{inum}};}
\DoxyCodeLine{00574   \textcolor{keywordflow}{if}(\mbox{\hyperlink{fs_8c_a15858f4d8a4cc1def3d84d03c312836b}{writei}}(dp, (\textcolor{keywordtype}{char}*)\&de, off, \textcolor{keyword}{sizeof}(de)) != \textcolor{keyword}{sizeof}(de))}
\DoxyCodeLine{00575     \mbox{\hyperlink{console_8c_a95c0aca5d6d7487933984f08b189917a}{panic}}(\textcolor{stringliteral}{"{}dirlink"{}});}
\DoxyCodeLine{00576 }
\DoxyCodeLine{00577   \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{00578 \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_ae4ccea0aa02557162963e597737f665a_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=211pt]{d5/d64/defs_8h_ae4ccea0aa02557162963e597737f665a_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_aef19d16d1d20d8f7cdcd8ee0d98fc13f}\label{defs_8h_aef19d16d1d20d8f7cdcd8ee0d98fc13f}} 
\index{defs.h@{defs.h}!dirlookup@{dirlookup}}
\index{dirlookup@{dirlookup}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{dirlookup()}{dirlookup()}}
{\footnotesize\ttfamily struct \mbox{\hyperlink{structinode}{inode}} $\ast$ dirlookup (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structinode}{inode}} $\ast$}]{dp,  }\item[{char $\ast$}]{name,  }\item[{\mbox{\hyperlink{types_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}} $\ast$}]{poff }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{fs_8c_source_l00525}{525}} of file \mbox{\hyperlink{fs_8c_source}{fs.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00526 \{}
\DoxyCodeLine{00527   \mbox{\hyperlink{types_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}} off, inum;}
\DoxyCodeLine{00528   \textcolor{keyword}{struct }\mbox{\hyperlink{structdirent}{dirent}} de;}
\DoxyCodeLine{00529 }
\DoxyCodeLine{00530   \textcolor{keywordflow}{if}(dp-\/>\mbox{\hyperlink{structinode_a8d74bec2898785c057111c328d23fda2}{type}} != \mbox{\hyperlink{stat_8h_a91136bcd71a9f499304f5d7e7e9d6376}{T\_DIR}})}
\DoxyCodeLine{00531     \mbox{\hyperlink{console_8c_a95c0aca5d6d7487933984f08b189917a}{panic}}(\textcolor{stringliteral}{"{}dirlookup not DIR"{}});}
\DoxyCodeLine{00532 }
\DoxyCodeLine{00533   \textcolor{keywordflow}{for}(off = 0; off < dp-\/>\mbox{\hyperlink{structinode_a918af769c48a8ca8afac057bf83d12de}{size}}; off += \textcolor{keyword}{sizeof}(de))\{}
\DoxyCodeLine{00534     \textcolor{keywordflow}{if}(\mbox{\hyperlink{fs_8c_a3aba1fa9f6789d09356aec5b96d91fa8}{readi}}(dp, (\textcolor{keywordtype}{char}*)\&de, off, \textcolor{keyword}{sizeof}(de)) != \textcolor{keyword}{sizeof}(de))}
\DoxyCodeLine{00535       \mbox{\hyperlink{console_8c_a95c0aca5d6d7487933984f08b189917a}{panic}}(\textcolor{stringliteral}{"{}dirlookup read"{}});}
\DoxyCodeLine{00536     \textcolor{keywordflow}{if}(de.inum == 0)}
\DoxyCodeLine{00537       \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00538     \textcolor{keywordflow}{if}(\mbox{\hyperlink{fs_8c_ae74f6e5b19a4e7f3e72807ee67141819}{namecmp}}(\mbox{\hyperlink{usertests_8c_aee754febd402311e2a552cb0d6ab6629}{name}}, de.name) == 0)\{}
\DoxyCodeLine{00539       \textcolor{comment}{// entry matches path element}}
\DoxyCodeLine{00540       \textcolor{keywordflow}{if}(poff)}
\DoxyCodeLine{00541         *poff = off;}
\DoxyCodeLine{00542       \mbox{\hyperlink{structdirent_a68698c303a46d2a34232a2226629ac79}{inum}} = de.inum;}
\DoxyCodeLine{00543       \textcolor{keywordflow}{return} iget(dp-\/>\mbox{\hyperlink{structinode_a121742a89c4531f03a7de1613d5be605}{dev}}, \mbox{\hyperlink{structdirent_a68698c303a46d2a34232a2226629ac79}{inum}});}
\DoxyCodeLine{00544     \}}
\DoxyCodeLine{00545   \}}
\DoxyCodeLine{00546 }
\DoxyCodeLine{00547   \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{00548 \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_aef19d16d1d20d8f7cdcd8ee0d98fc13f_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=324pt]{d5/d64/defs_8h_aef19d16d1d20d8f7cdcd8ee0d98fc13f_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_a2504e37a109f9bae5ca11fe89e4e8fa1}\label{defs_8h_a2504e37a109f9bae5ca11fe89e4e8fa1}} 
\index{defs.h@{defs.h}!end\_op@{end\_op}}
\index{end\_op@{end\_op}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{end\_op()}{end\_op()}}
{\footnotesize\ttfamily void end\+\_\+op (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{log_8c_source_l00146}{146}} of file \mbox{\hyperlink{log_8c_source}{log.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00147 \{}
\DoxyCodeLine{00148   \textcolor{keywordtype}{int} do\_commit = 0;}
\DoxyCodeLine{00149 }
\DoxyCodeLine{00150   \mbox{\hyperlink{defs_8h_afe4ef8638f1ecb962a6e67fb086ee3b8}{acquire}}(\&\mbox{\hyperlink{structlog}{log}}.\mbox{\hyperlink{structlog_a980a1d1aa9c60af7a82f297f8ab54d2e}{lock}});}
\DoxyCodeLine{00151   \mbox{\hyperlink{structlog}{log}}.\mbox{\hyperlink{structlog_addfc1fc09a124978bd7e2a23a19d733d}{outstanding}} -\/= 1;}
\DoxyCodeLine{00152   \textcolor{keywordflow}{if}(\mbox{\hyperlink{structlog}{log}}.\mbox{\hyperlink{structlog_afc034b98b98897c179ca8fae8e2ee181}{committing}})}
\DoxyCodeLine{00153     \mbox{\hyperlink{console_8c_a95c0aca5d6d7487933984f08b189917a}{panic}}(\textcolor{stringliteral}{"{}log.committing"{}});}
\DoxyCodeLine{00154   \textcolor{keywordflow}{if}(\mbox{\hyperlink{structlog}{log}}.\mbox{\hyperlink{structlog_addfc1fc09a124978bd7e2a23a19d733d}{outstanding}} == 0)\{}
\DoxyCodeLine{00155     do\_commit = 1;}
\DoxyCodeLine{00156     \mbox{\hyperlink{structlog}{log}}.\mbox{\hyperlink{structlog_afc034b98b98897c179ca8fae8e2ee181}{committing}} = 1;}
\DoxyCodeLine{00157   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00158     \textcolor{comment}{// begin\_op() may be waiting for log space,}}
\DoxyCodeLine{00159     \textcolor{comment}{// and decrementing log.outstanding has decreased}}
\DoxyCodeLine{00160     \textcolor{comment}{// the amount of reserved space.}}
\DoxyCodeLine{00161     \mbox{\hyperlink{defs_8h_a245b56417239f499389b2e806bd99254}{wakeup}}(\&\mbox{\hyperlink{structlog}{log}});}
\DoxyCodeLine{00162   \}}
\DoxyCodeLine{00163   \mbox{\hyperlink{defs_8h_a4f8616948f3dbce65671f666eed1d669}{release}}(\&\mbox{\hyperlink{structlog}{log}}.\mbox{\hyperlink{structlog_a980a1d1aa9c60af7a82f297f8ab54d2e}{lock}});}
\DoxyCodeLine{00164 }
\DoxyCodeLine{00165   \textcolor{keywordflow}{if}(do\_commit)\{}
\DoxyCodeLine{00166     \textcolor{comment}{// call commit w/o holding locks, since not allowed}}
\DoxyCodeLine{00167     \textcolor{comment}{// to sleep with locks.}}
\DoxyCodeLine{00168     commit();}
\DoxyCodeLine{00169     \mbox{\hyperlink{defs_8h_afe4ef8638f1ecb962a6e67fb086ee3b8}{acquire}}(\&\mbox{\hyperlink{structlog}{log}}.\mbox{\hyperlink{structlog_a980a1d1aa9c60af7a82f297f8ab54d2e}{lock}});}
\DoxyCodeLine{00170     \mbox{\hyperlink{structlog}{log}}.\mbox{\hyperlink{structlog_afc034b98b98897c179ca8fae8e2ee181}{committing}} = 0;}
\DoxyCodeLine{00171     \mbox{\hyperlink{defs_8h_a245b56417239f499389b2e806bd99254}{wakeup}}(\&\mbox{\hyperlink{structlog}{log}});}
\DoxyCodeLine{00172     \mbox{\hyperlink{defs_8h_a4f8616948f3dbce65671f666eed1d669}{release}}(\&\mbox{\hyperlink{structlog}{log}}.\mbox{\hyperlink{structlog_a980a1d1aa9c60af7a82f297f8ab54d2e}{lock}});}
\DoxyCodeLine{00173   \}}
\DoxyCodeLine{00174 \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_a2504e37a109f9bae5ca11fe89e4e8fa1_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=550pt]{d5/d64/defs_8h_a2504e37a109f9bae5ca11fe89e4e8fa1_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_aa7b4aae4a12acd187e23396214aeca47}\label{defs_8h_aa7b4aae4a12acd187e23396214aeca47}} 
\index{defs.h@{defs.h}!exec@{exec}}
\index{exec@{exec}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{exec()}{exec()}}
{\footnotesize\ttfamily int exec (\begin{DoxyParamCaption}\item[{char $\ast$}]{path,  }\item[{char $\ast$$\ast$}]{argv }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{exec_8c_source_l00011}{11}} of file \mbox{\hyperlink{exec_8c_source}{exec.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00012 \{}
\DoxyCodeLine{00013   \textcolor{keywordtype}{char} *s, *last;}
\DoxyCodeLine{00014   \textcolor{keywordtype}{int} i, off;}
\DoxyCodeLine{00015   \mbox{\hyperlink{types_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}} argc, sz, sp, ustack[3+\mbox{\hyperlink{param_8h_a4c171d1ccc50f0b6ce7ad2f475eeba32}{MAXARG}}+1];}
\DoxyCodeLine{00016   \textcolor{keyword}{struct }\mbox{\hyperlink{structelfhdr}{elfhdr}} \mbox{\hyperlink{structelfhdr_a22ec6f2383f0488ee18a18673398f201}{elf}};}
\DoxyCodeLine{00017   \textcolor{keyword}{struct }\mbox{\hyperlink{structinode}{inode}} *ip;}
\DoxyCodeLine{00018   \textcolor{keyword}{struct }\mbox{\hyperlink{structproghdr}{proghdr}} ph;}
\DoxyCodeLine{00019   \mbox{\hyperlink{types_8h_ac131849542282b2c95dfeaf1f26dc010}{pde\_t}} *pgdir, *oldpgdir;}
\DoxyCodeLine{00020   \textcolor{keyword}{struct }\mbox{\hyperlink{structproc}{proc}} *curproc = \mbox{\hyperlink{defs_8h_a3d2327db1e34643f4a9e6a07c8cc62c6}{myproc}}();}
\DoxyCodeLine{00021 }
\DoxyCodeLine{00022   \mbox{\hyperlink{defs_8h_a603ca98212e00d2ffdba7827ef0f1003}{begin\_op}}();}
\DoxyCodeLine{00023 }
\DoxyCodeLine{00024   \textcolor{keywordflow}{if}((ip = \mbox{\hyperlink{defs_8h_acde7d3975db286253e584452ba03a54f}{namei}}(path)) == 0)\{}
\DoxyCodeLine{00025     \mbox{\hyperlink{defs_8h_a2504e37a109f9bae5ca11fe89e4e8fa1}{end\_op}}();}
\DoxyCodeLine{00026     \mbox{\hyperlink{console_8c_a90f0742d846503e4ed1804f1df421ec6}{cprintf}}(\textcolor{stringliteral}{"{}exec: fail\(\backslash\)n"{}});}
\DoxyCodeLine{00027     \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{00028   \}}
\DoxyCodeLine{00029   \mbox{\hyperlink{defs_8h_a29a4d743d41fe659f74b0a57fdc25012}{ilock}}(ip);}
\DoxyCodeLine{00030   \mbox{\hyperlink{structproc_ad430afc653e9eb6cee33954d5545b79d}{pgdir}} = 0;}
\DoxyCodeLine{00031 }
\DoxyCodeLine{00032   \textcolor{comment}{// Check ELF header}}
\DoxyCodeLine{00033   \textcolor{keywordflow}{if}(\mbox{\hyperlink{defs_8h_a2415273b06f31f0f2587b7325588a7e4}{readi}}(ip, (\textcolor{keywordtype}{char}*)\&elf, 0, \textcolor{keyword}{sizeof}(elf)) != \textcolor{keyword}{sizeof}(elf))}
\DoxyCodeLine{00034     \textcolor{keywordflow}{goto} bad;}
\DoxyCodeLine{00035   \textcolor{keywordflow}{if}(elf.magic != \mbox{\hyperlink{elf_8h_abb1c2e5626667aacc7b3efd269a6c0eb}{ELF\_MAGIC}})}
\DoxyCodeLine{00036     \textcolor{keywordflow}{goto} bad;}
\DoxyCodeLine{00037 }
\DoxyCodeLine{00038   \textcolor{keywordflow}{if}((\mbox{\hyperlink{structproc_ad430afc653e9eb6cee33954d5545b79d}{pgdir}} = \mbox{\hyperlink{defs_8h_a1c8a7a02e9391b5cf0984388216695c0}{setupkvm}}()) == 0)}
\DoxyCodeLine{00039     \textcolor{keywordflow}{goto} bad;}
\DoxyCodeLine{00040 }
\DoxyCodeLine{00041   \textcolor{comment}{// Load program into memory.}}
\DoxyCodeLine{00042   \mbox{\hyperlink{structproc_a6e67042bb361124ff287af88efc33e00}{sz}} = 0;}
\DoxyCodeLine{00043   \textcolor{keywordflow}{for}(i=0, off=elf.phoff; i<elf.phnum; i++, off+=\textcolor{keyword}{sizeof}(ph))\{}
\DoxyCodeLine{00044     \textcolor{keywordflow}{if}(\mbox{\hyperlink{defs_8h_a2415273b06f31f0f2587b7325588a7e4}{readi}}(ip, (\textcolor{keywordtype}{char}*)\&ph, off, \textcolor{keyword}{sizeof}(ph)) != \textcolor{keyword}{sizeof}(ph))}
\DoxyCodeLine{00045       \textcolor{keywordflow}{goto} bad;}
\DoxyCodeLine{00046     \textcolor{keywordflow}{if}(ph.type != \mbox{\hyperlink{elf_8h_a6a45c035b7a2930e62ac97a6bd8121e9}{ELF\_PROG\_LOAD}})}
\DoxyCodeLine{00047       \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00048     \textcolor{keywordflow}{if}(ph.memsz < ph.filesz)}
\DoxyCodeLine{00049       \textcolor{keywordflow}{goto} bad;}
\DoxyCodeLine{00050     \textcolor{keywordflow}{if}(ph.vaddr + ph.memsz < ph.vaddr)}
\DoxyCodeLine{00051       \textcolor{keywordflow}{goto} bad;}
\DoxyCodeLine{00052     \textcolor{keywordflow}{if}((\mbox{\hyperlink{structproc_a6e67042bb361124ff287af88efc33e00}{sz}} = \mbox{\hyperlink{defs_8h_a67f50b6f85756f02b5acdcb084d51b9f}{allocuvm}}(\mbox{\hyperlink{structproc_ad430afc653e9eb6cee33954d5545b79d}{pgdir}}, \mbox{\hyperlink{structproc_a6e67042bb361124ff287af88efc33e00}{sz}}, ph.vaddr + ph.memsz)) == 0)}
\DoxyCodeLine{00053       \textcolor{keywordflow}{goto} bad;}
\DoxyCodeLine{00054     \textcolor{keywordflow}{if}(ph.vaddr \% \mbox{\hyperlink{mmu_8h_a5f96cb6ae6670e023c407cc2f77e1704}{PGSIZE}} != 0)}
\DoxyCodeLine{00055       \textcolor{keywordflow}{goto} bad;}
\DoxyCodeLine{00056     \textcolor{keywordflow}{if}(\mbox{\hyperlink{defs_8h_a8a149272578e00e0ce70480004640679}{loaduvm}}(\mbox{\hyperlink{structproc_ad430afc653e9eb6cee33954d5545b79d}{pgdir}}, (\textcolor{keywordtype}{char}*)ph.vaddr, ip, ph.off, ph.filesz) < 0)}
\DoxyCodeLine{00057       \textcolor{keywordflow}{goto} bad;}
\DoxyCodeLine{00058   \}}
\DoxyCodeLine{00059   \mbox{\hyperlink{defs_8h_adff5bb5a1eeaf921853ec06479f8c49b}{iunlockput}}(ip);}
\DoxyCodeLine{00060   \mbox{\hyperlink{defs_8h_a2504e37a109f9bae5ca11fe89e4e8fa1}{end\_op}}();}
\DoxyCodeLine{00061   ip = 0;}
\DoxyCodeLine{00062 }
\DoxyCodeLine{00063   \textcolor{comment}{// Allocate two pages at the next page boundary.}}
\DoxyCodeLine{00064   \textcolor{comment}{// Make the first inaccessible.  Use the second as the user stack.}}
\DoxyCodeLine{00065   \mbox{\hyperlink{structproc_a6e67042bb361124ff287af88efc33e00}{sz}} = \mbox{\hyperlink{mmu_8h_affa8cdfbd1c15dafc9f3af3a7b641f80}{PGROUNDUP}}(\mbox{\hyperlink{structproc_a6e67042bb361124ff287af88efc33e00}{sz}});}
\DoxyCodeLine{00066   \textcolor{keywordflow}{if}((\mbox{\hyperlink{structproc_a6e67042bb361124ff287af88efc33e00}{sz}} = \mbox{\hyperlink{defs_8h_a67f50b6f85756f02b5acdcb084d51b9f}{allocuvm}}(\mbox{\hyperlink{structproc_ad430afc653e9eb6cee33954d5545b79d}{pgdir}}, \mbox{\hyperlink{structproc_a6e67042bb361124ff287af88efc33e00}{sz}}, \mbox{\hyperlink{structproc_a6e67042bb361124ff287af88efc33e00}{sz}} + 2*\mbox{\hyperlink{mmu_8h_a5f96cb6ae6670e023c407cc2f77e1704}{PGSIZE}})) == 0)}
\DoxyCodeLine{00067     \textcolor{keywordflow}{goto} bad;}
\DoxyCodeLine{00068   \mbox{\hyperlink{defs_8h_a795e27a0cb916cfb41411ebbb9669ddf}{clearpteu}}(\mbox{\hyperlink{structproc_ad430afc653e9eb6cee33954d5545b79d}{pgdir}}, (\textcolor{keywordtype}{char}*)(\mbox{\hyperlink{structproc_a6e67042bb361124ff287af88efc33e00}{sz}} -\/ 2*\mbox{\hyperlink{mmu_8h_a5f96cb6ae6670e023c407cc2f77e1704}{PGSIZE}}));}
\DoxyCodeLine{00069   sp = \mbox{\hyperlink{structproc_a6e67042bb361124ff287af88efc33e00}{sz}};}
\DoxyCodeLine{00070 }
\DoxyCodeLine{00071   \textcolor{comment}{// Push argument strings, prepare rest of stack in ustack.}}
\DoxyCodeLine{00072   \textcolor{keywordflow}{for}(argc = 0; \mbox{\hyperlink{init_8c_abd1a2cf54950f450187ef24c1cdcac0c}{argv}}[argc]; argc++) \{}
\DoxyCodeLine{00073     \textcolor{keywordflow}{if}(argc >= \mbox{\hyperlink{param_8h_a4c171d1ccc50f0b6ce7ad2f475eeba32}{MAXARG}})}
\DoxyCodeLine{00074       \textcolor{keywordflow}{goto} bad;}
\DoxyCodeLine{00075     sp = (sp -\/ (\mbox{\hyperlink{defs_8h_a5e5172aa1be36b8210c6dfd86800b44c}{strlen}}(\mbox{\hyperlink{init_8c_abd1a2cf54950f450187ef24c1cdcac0c}{argv}}[argc]) + 1)) \& \string~3;}
\DoxyCodeLine{00076     \textcolor{keywordflow}{if}(\mbox{\hyperlink{defs_8h_a11f5ff2e5bcd16968a88fcbb30db5a10}{copyout}}(\mbox{\hyperlink{structproc_ad430afc653e9eb6cee33954d5545b79d}{pgdir}}, sp, \mbox{\hyperlink{init_8c_abd1a2cf54950f450187ef24c1cdcac0c}{argv}}[argc], \mbox{\hyperlink{defs_8h_a5e5172aa1be36b8210c6dfd86800b44c}{strlen}}(\mbox{\hyperlink{init_8c_abd1a2cf54950f450187ef24c1cdcac0c}{argv}}[argc]) + 1) < 0)}
\DoxyCodeLine{00077       \textcolor{keywordflow}{goto} bad;}
\DoxyCodeLine{00078     ustack[3+argc] = sp;}
\DoxyCodeLine{00079   \}}
\DoxyCodeLine{00080   ustack[3+argc] = 0;}
\DoxyCodeLine{00081 }
\DoxyCodeLine{00082   ustack[0] = 0xffffffff;  \textcolor{comment}{// fake return PC}}
\DoxyCodeLine{00083   ustack[1] = argc;}
\DoxyCodeLine{00084   ustack[2] = sp -\/ (argc+1)*4;  \textcolor{comment}{// argv pointer}}
\DoxyCodeLine{00085 }
\DoxyCodeLine{00086   sp -\/= (3+argc+1) * 4;}
\DoxyCodeLine{00087   \textcolor{keywordflow}{if}(\mbox{\hyperlink{defs_8h_a11f5ff2e5bcd16968a88fcbb30db5a10}{copyout}}(\mbox{\hyperlink{structproc_ad430afc653e9eb6cee33954d5545b79d}{pgdir}}, sp, ustack, (3+argc+1)*4) < 0)}
\DoxyCodeLine{00088     \textcolor{keywordflow}{goto} bad;}
\DoxyCodeLine{00089 }
\DoxyCodeLine{00090   \textcolor{comment}{// Save program name for debugging.}}
\DoxyCodeLine{00091   \textcolor{keywordflow}{for}(last=s=path; *s; s++)}
\DoxyCodeLine{00092     \textcolor{keywordflow}{if}(*s == \textcolor{charliteral}{'/'})}
\DoxyCodeLine{00093       last = s+1;}
\DoxyCodeLine{00094   \mbox{\hyperlink{defs_8h_aa406a54805a570dfe266281876dc5d69}{safestrcpy}}(curproc-\/>\mbox{\hyperlink{structproc_ac04af53e17d24b90c3cbfab56d658d62}{name}}, last, \textcolor{keyword}{sizeof}(curproc-\/>\mbox{\hyperlink{structproc_ac04af53e17d24b90c3cbfab56d658d62}{name}}));}
\DoxyCodeLine{00095 }
\DoxyCodeLine{00096   \textcolor{comment}{// Commit to the user image.}}
\DoxyCodeLine{00097   oldpgdir = curproc-\/>\mbox{\hyperlink{structproc_ad430afc653e9eb6cee33954d5545b79d}{pgdir}};}
\DoxyCodeLine{00098   curproc-\/>\mbox{\hyperlink{structproc_ad430afc653e9eb6cee33954d5545b79d}{pgdir}} = \mbox{\hyperlink{structproc_ad430afc653e9eb6cee33954d5545b79d}{pgdir}};}
\DoxyCodeLine{00099   curproc-\/>\mbox{\hyperlink{structproc_a6e67042bb361124ff287af88efc33e00}{sz}} = \mbox{\hyperlink{structproc_a6e67042bb361124ff287af88efc33e00}{sz}};}
\DoxyCodeLine{00100   curproc-\/>\mbox{\hyperlink{structproc_a56ec07ac1e10ce42adfc8dd2a366071f}{tf}}-\/>\mbox{\hyperlink{structtrapframe_a886a5973a537894e3a95435f38767d5c}{eip}} = elf.entry;  \textcolor{comment}{// main}}
\DoxyCodeLine{00101   curproc-\/>\mbox{\hyperlink{structproc_a56ec07ac1e10ce42adfc8dd2a366071f}{tf}}-\/>\mbox{\hyperlink{structtrapframe_acd319e2dbd720d217c10f8fb620d73e2}{esp}} = sp;}
\DoxyCodeLine{00102   \mbox{\hyperlink{defs_8h_ad43d81fa3edec39a200abd0853bc84b1}{switchuvm}}(curproc);}
\DoxyCodeLine{00103   \mbox{\hyperlink{defs_8h_af24cf1756e19afd8be8c95d02262cf3a}{freevm}}(oldpgdir);}
\DoxyCodeLine{00104   \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{00105 }
\DoxyCodeLine{00106  bad:}
\DoxyCodeLine{00107   \textcolor{keywordflow}{if}(\mbox{\hyperlink{structproc_ad430afc653e9eb6cee33954d5545b79d}{pgdir}})}
\DoxyCodeLine{00108     \mbox{\hyperlink{defs_8h_af24cf1756e19afd8be8c95d02262cf3a}{freevm}}(\mbox{\hyperlink{structproc_ad430afc653e9eb6cee33954d5545b79d}{pgdir}});}
\DoxyCodeLine{00109   \textcolor{keywordflow}{if}(ip)\{}
\DoxyCodeLine{00110     \mbox{\hyperlink{defs_8h_adff5bb5a1eeaf921853ec06479f8c49b}{iunlockput}}(ip);}
\DoxyCodeLine{00111     \mbox{\hyperlink{defs_8h_a2504e37a109f9bae5ca11fe89e4e8fa1}{end\_op}}();}
\DoxyCodeLine{00112   \}}
\DoxyCodeLine{00113   \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{00114 \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_aa7b4aae4a12acd187e23396214aeca47_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=287pt]{d5/d64/defs_8h_aa7b4aae4a12acd187e23396214aeca47_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_aaf98ef7cdde3a0dfb2e49919de3298b1}\label{defs_8h_aaf98ef7cdde3a0dfb2e49919de3298b1}} 
\index{defs.h@{defs.h}!exit@{exit}}
\index{exit@{exit}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{exit()}{exit()}}
{\footnotesize\ttfamily void exit (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{proc_8c_source_l00228}{228}} of file \mbox{\hyperlink{proc_8c_source}{proc.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00229 \{}
\DoxyCodeLine{00230   \textcolor{keyword}{struct }\mbox{\hyperlink{structproc}{proc}} *curproc = \mbox{\hyperlink{proc_8c_a41af0935f3989aae450cf8988cd9c3a9}{myproc}}();}
\DoxyCodeLine{00231   \textcolor{keyword}{struct }\mbox{\hyperlink{structproc}{proc}} *p;}
\DoxyCodeLine{00232   \textcolor{keywordtype}{int} fd;}
\DoxyCodeLine{00233 }
\DoxyCodeLine{00234   \textcolor{keywordflow}{if}(curproc == initproc)}
\DoxyCodeLine{00235     \mbox{\hyperlink{console_8c_a95c0aca5d6d7487933984f08b189917a}{panic}}(\textcolor{stringliteral}{"{}init exiting"{}});}
\DoxyCodeLine{00236 }
\DoxyCodeLine{00237   \textcolor{comment}{// Close all open files.}}
\DoxyCodeLine{00238   \textcolor{keywordflow}{for}(fd = 0; fd < \mbox{\hyperlink{param_8h_a80bacbaea8dd6aecf216d85d981bcb21}{NOFILE}}; fd++)\{}
\DoxyCodeLine{00239     \textcolor{keywordflow}{if}(curproc-\/>\mbox{\hyperlink{structproc_a4a9eb0352efe3fc097c91fccfaac50bd}{ofile}}[fd])\{}
\DoxyCodeLine{00240       \mbox{\hyperlink{defs_8h_ac865ee0b2d70f753d61d1fefef9de0f6}{fileclose}}(curproc-\/>\mbox{\hyperlink{structproc_a4a9eb0352efe3fc097c91fccfaac50bd}{ofile}}[fd]);}
\DoxyCodeLine{00241       curproc-\/>\mbox{\hyperlink{structproc_a4a9eb0352efe3fc097c91fccfaac50bd}{ofile}}[fd] = 0;}
\DoxyCodeLine{00242     \}}
\DoxyCodeLine{00243   \}}
\DoxyCodeLine{00244 }
\DoxyCodeLine{00245   \mbox{\hyperlink{defs_8h_a603ca98212e00d2ffdba7827ef0f1003}{begin\_op}}();}
\DoxyCodeLine{00246   \mbox{\hyperlink{defs_8h_a29530a0afdfe924818d8c70b6724528d}{iput}}(curproc-\/>\mbox{\hyperlink{structproc_a493bc338ce008a838eef521972a35257}{cwd}});}
\DoxyCodeLine{00247   \mbox{\hyperlink{defs_8h_a2504e37a109f9bae5ca11fe89e4e8fa1}{end\_op}}();}
\DoxyCodeLine{00248   curproc-\/>\mbox{\hyperlink{structproc_a493bc338ce008a838eef521972a35257}{cwd}} = 0;}
\DoxyCodeLine{00249 }
\DoxyCodeLine{00250   \mbox{\hyperlink{defs_8h_afe4ef8638f1ecb962a6e67fb086ee3b8}{acquire}}(\&\mbox{\hyperlink{proc_8c_addf39d613ca9a58e7e6080a2e454421a}{ptable}}.lock);}
\DoxyCodeLine{00251 }
\DoxyCodeLine{00252   \textcolor{comment}{// Parent might be sleeping in wait().}}
\DoxyCodeLine{00253   wakeup1(curproc-\/>\mbox{\hyperlink{structproc_a14ea8849701ffafba4d142725de154d4}{parent}});}
\DoxyCodeLine{00254 }
\DoxyCodeLine{00255   \textcolor{comment}{// Pass abandoned children to init.}}
\DoxyCodeLine{00256   \textcolor{keywordflow}{for}(p = \mbox{\hyperlink{proc_8c_addf39d613ca9a58e7e6080a2e454421a}{ptable}}.proc; p < \&\mbox{\hyperlink{proc_8c_addf39d613ca9a58e7e6080a2e454421a}{ptable}}.proc[\mbox{\hyperlink{param_8h_a810c5b751df5bb30588613ed91095129}{NPROC}}]; p++)\{}
\DoxyCodeLine{00257     \textcolor{keywordflow}{if}(p-\/>\mbox{\hyperlink{structproc_a14ea8849701ffafba4d142725de154d4}{parent}} == curproc)\{}
\DoxyCodeLine{00258       p-\/>\mbox{\hyperlink{structproc_a14ea8849701ffafba4d142725de154d4}{parent}} = initproc;}
\DoxyCodeLine{00259       \textcolor{keywordflow}{if}(p-\/>\mbox{\hyperlink{structproc_a0f2fe91548a1382672ae26e29ca9e736}{state}} == \mbox{\hyperlink{proc_8h_aa1ced7d2b60040fded3fa873d0c03ba7a5dfb36109b24f39d54d5c3f48f53def8}{ZOMBIE}})}
\DoxyCodeLine{00260         wakeup1(initproc);}
\DoxyCodeLine{00261     \}}
\DoxyCodeLine{00262   \}}
\DoxyCodeLine{00263 }
\DoxyCodeLine{00264   \textcolor{comment}{// Jump into the scheduler, never to return.}}
\DoxyCodeLine{00265   curproc-\/>\mbox{\hyperlink{structproc_a0f2fe91548a1382672ae26e29ca9e736}{state}} = \mbox{\hyperlink{proc_8h_aa1ced7d2b60040fded3fa873d0c03ba7a5dfb36109b24f39d54d5c3f48f53def8}{ZOMBIE}};}
\DoxyCodeLine{00266   \mbox{\hyperlink{proc_8c_ad788da91743c333b5bed7c4a0dd12365}{sched}}();}
\DoxyCodeLine{00267   \mbox{\hyperlink{console_8c_a95c0aca5d6d7487933984f08b189917a}{panic}}(\textcolor{stringliteral}{"{}zombie exit"{}});}
\DoxyCodeLine{00268 \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_aaf98ef7cdde3a0dfb2e49919de3298b1_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=550pt]{d5/d64/defs_8h_aaf98ef7cdde3a0dfb2e49919de3298b1_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_ab8c95490fad429ac2701653041f2efcf}\label{defs_8h_ab8c95490fad429ac2701653041f2efcf}} 
\index{defs.h@{defs.h}!fetchint@{fetchint}}
\index{fetchint@{fetchint}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{fetchint()}{fetchint()}}
{\footnotesize\ttfamily int fetchint (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{types_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}}}]{addr,  }\item[{int $\ast$}]{ip }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{syscall_8c_source_l00018}{18}} of file \mbox{\hyperlink{syscall_8c_source}{syscall.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00019 \{}
\DoxyCodeLine{00020   \textcolor{keyword}{struct }\mbox{\hyperlink{structproc}{proc}} *curproc = \mbox{\hyperlink{defs_8h_a3d2327db1e34643f4a9e6a07c8cc62c6}{myproc}}();}
\DoxyCodeLine{00021 }
\DoxyCodeLine{00022   \textcolor{keywordflow}{if}(addr >= curproc-\/>\mbox{\hyperlink{structproc_a6e67042bb361124ff287af88efc33e00}{sz}} || addr+4 > curproc-\/>\mbox{\hyperlink{structproc_a6e67042bb361124ff287af88efc33e00}{sz}})}
\DoxyCodeLine{00023     \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{00024   *ip = *(\textcolor{keywordtype}{int}*)(addr);}
\DoxyCodeLine{00025   \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{00026 \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_ab8c95490fad429ac2701653041f2efcf_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_ab8c95490fad429ac2701653041f2efcf_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_a386d969a02c926521cf2e1816069a4dc}\label{defs_8h_a386d969a02c926521cf2e1816069a4dc}} 
\index{defs.h@{defs.h}!fetchstr@{fetchstr}}
\index{fetchstr@{fetchstr}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{fetchstr()}{fetchstr()}}
{\footnotesize\ttfamily int fetchstr (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{types_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}}}]{addr,  }\item[{char $\ast$$\ast$}]{pp }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{syscall_8c_source_l00032}{32}} of file \mbox{\hyperlink{syscall_8c_source}{syscall.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00033 \{}
\DoxyCodeLine{00034   \textcolor{keywordtype}{char} *s, *ep;}
\DoxyCodeLine{00035   \textcolor{keyword}{struct }\mbox{\hyperlink{structproc}{proc}} *curproc = \mbox{\hyperlink{defs_8h_a3d2327db1e34643f4a9e6a07c8cc62c6}{myproc}}();}
\DoxyCodeLine{00036 }
\DoxyCodeLine{00037   \textcolor{keywordflow}{if}(addr >= curproc-\/>\mbox{\hyperlink{structproc_a6e67042bb361124ff287af88efc33e00}{sz}})}
\DoxyCodeLine{00038     \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{00039   *pp = (\textcolor{keywordtype}{char}*)addr;}
\DoxyCodeLine{00040   ep = (\textcolor{keywordtype}{char}*)curproc-\/>\mbox{\hyperlink{structproc_a6e67042bb361124ff287af88efc33e00}{sz}};}
\DoxyCodeLine{00041   \textcolor{keywordflow}{for}(s = *pp; s < ep; s++)\{}
\DoxyCodeLine{00042     \textcolor{keywordflow}{if}(*s == 0)}
\DoxyCodeLine{00043       \textcolor{keywordflow}{return} s -\/ *pp;}
\DoxyCodeLine{00044   \}}
\DoxyCodeLine{00045   \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{00046 \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_a386d969a02c926521cf2e1816069a4dc_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=310pt]{d5/d64/defs_8h_a386d969a02c926521cf2e1816069a4dc_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_ac56b15561658d0e74ce1c53309b8f97d}\label{defs_8h_ac56b15561658d0e74ce1c53309b8f97d}} 
\index{defs.h@{defs.h}!filealloc@{filealloc}}
\index{filealloc@{filealloc}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{filealloc()}{filealloc()}}
{\footnotesize\ttfamily struct \mbox{\hyperlink{structfile}{file}} $\ast$ filealloc (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{file_8c_source_l00027}{27}} of file \mbox{\hyperlink{file_8c_source}{file.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00028 \{}
\DoxyCodeLine{00029   \textcolor{keyword}{struct }\mbox{\hyperlink{structfile}{file}} *f;}
\DoxyCodeLine{00030 }
\DoxyCodeLine{00031   \mbox{\hyperlink{defs_8h_afe4ef8638f1ecb962a6e67fb086ee3b8}{acquire}}(\&\mbox{\hyperlink{file_8c_aa3cdfe534b83322d79f0605488e11ecc}{ftable}}.lock);}
\DoxyCodeLine{00032   \textcolor{keywordflow}{for}(f = \mbox{\hyperlink{file_8c_aa3cdfe534b83322d79f0605488e11ecc}{ftable}}.file; f < \mbox{\hyperlink{file_8c_aa3cdfe534b83322d79f0605488e11ecc}{ftable}}.file + \mbox{\hyperlink{param_8h_a8485f4e81de2537e6a0935626167a775}{NFILE}}; f++)\{}
\DoxyCodeLine{00033     \textcolor{keywordflow}{if}(f-\/>\mbox{\hyperlink{structfile_a41c818f828adea488058bca63e4df23f}{ref}} == 0)\{}
\DoxyCodeLine{00034       f-\/>\mbox{\hyperlink{structfile_a41c818f828adea488058bca63e4df23f}{ref}} = 1;}
\DoxyCodeLine{00035       \mbox{\hyperlink{defs_8h_a4f8616948f3dbce65671f666eed1d669}{release}}(\&\mbox{\hyperlink{file_8c_aa3cdfe534b83322d79f0605488e11ecc}{ftable}}.lock);}
\DoxyCodeLine{00036       \textcolor{keywordflow}{return} f;}
\DoxyCodeLine{00037     \}}
\DoxyCodeLine{00038   \}}
\DoxyCodeLine{00039   \mbox{\hyperlink{defs_8h_a4f8616948f3dbce65671f666eed1d669}{release}}(\&\mbox{\hyperlink{file_8c_aa3cdfe534b83322d79f0605488e11ecc}{ftable}}.lock);}
\DoxyCodeLine{00040   \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{00041 \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_ac56b15561658d0e74ce1c53309b8f97d_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=317pt]{d5/d64/defs_8h_ac56b15561658d0e74ce1c53309b8f97d_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_ac865ee0b2d70f753d61d1fefef9de0f6}\label{defs_8h_ac865ee0b2d70f753d61d1fefef9de0f6}} 
\index{defs.h@{defs.h}!fileclose@{fileclose}}
\index{fileclose@{fileclose}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{fileclose()}{fileclose()}}
{\footnotesize\ttfamily void fileclose (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structfile}{file}} $\ast$}]{f }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{file_8c_source_l00057}{57}} of file \mbox{\hyperlink{file_8c_source}{file.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00058 \{}
\DoxyCodeLine{00059   \textcolor{keyword}{struct }\mbox{\hyperlink{structfile}{file}} ff;}
\DoxyCodeLine{00060 }
\DoxyCodeLine{00061   \mbox{\hyperlink{defs_8h_afe4ef8638f1ecb962a6e67fb086ee3b8}{acquire}}(\&\mbox{\hyperlink{file_8c_aa3cdfe534b83322d79f0605488e11ecc}{ftable}}.lock);}
\DoxyCodeLine{00062   \textcolor{keywordflow}{if}(f-\/>\mbox{\hyperlink{structfile_a41c818f828adea488058bca63e4df23f}{ref}} < 1)}
\DoxyCodeLine{00063     \mbox{\hyperlink{console_8c_a95c0aca5d6d7487933984f08b189917a}{panic}}(\textcolor{stringliteral}{"{}fileclose"{}});}
\DoxyCodeLine{00064   \textcolor{keywordflow}{if}(-\/-\/f-\/>\mbox{\hyperlink{structfile_a41c818f828adea488058bca63e4df23f}{ref}} > 0)\{}
\DoxyCodeLine{00065     \mbox{\hyperlink{defs_8h_a4f8616948f3dbce65671f666eed1d669}{release}}(\&\mbox{\hyperlink{file_8c_aa3cdfe534b83322d79f0605488e11ecc}{ftable}}.lock);}
\DoxyCodeLine{00066     \textcolor{keywordflow}{return};}
\DoxyCodeLine{00067   \}}
\DoxyCodeLine{00068   ff = *f;}
\DoxyCodeLine{00069   f-\/>\mbox{\hyperlink{structfile_a41c818f828adea488058bca63e4df23f}{ref}} = 0;}
\DoxyCodeLine{00070   f-\/>\mbox{\hyperlink{structfile_a3a28c808a8dcd4acf45087ac30c075e7}{type}} = \mbox{\hyperlink{structfile_a4aeeba6a286e58966d853aa1f510d3d5a224e095442d50a6bd1058fd742fb68c7}{FD\_NONE}};}
\DoxyCodeLine{00071   \mbox{\hyperlink{defs_8h_a4f8616948f3dbce65671f666eed1d669}{release}}(\&\mbox{\hyperlink{file_8c_aa3cdfe534b83322d79f0605488e11ecc}{ftable}}.lock);}
\DoxyCodeLine{00072 }
\DoxyCodeLine{00073   \textcolor{keywordflow}{if}(ff.type == \mbox{\hyperlink{structfile_a4aeeba6a286e58966d853aa1f510d3d5a59fcf59caf6e70c3cc3cc48291b89752}{FD\_PIPE}})}
\DoxyCodeLine{00074     \mbox{\hyperlink{defs_8h_af6220973e389c74782d76ae641a5e7db}{pipeclose}}(ff.pipe, ff.writable);}
\DoxyCodeLine{00075   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(ff.type == \mbox{\hyperlink{structfile_a4aeeba6a286e58966d853aa1f510d3d5aa5d8c5e0d95ed88367e96ecebfdf326d}{FD\_INODE}})\{}
\DoxyCodeLine{00076     \mbox{\hyperlink{defs_8h_a603ca98212e00d2ffdba7827ef0f1003}{begin\_op}}();}
\DoxyCodeLine{00077     \mbox{\hyperlink{defs_8h_a29530a0afdfe924818d8c70b6724528d}{iput}}(ff.ip);}
\DoxyCodeLine{00078     \mbox{\hyperlink{defs_8h_a2504e37a109f9bae5ca11fe89e4e8fa1}{end\_op}}();}
\DoxyCodeLine{00079   \}}
\DoxyCodeLine{00080 \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_ac865ee0b2d70f753d61d1fefef9de0f6_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=550pt]{d5/d64/defs_8h_ac865ee0b2d70f753d61d1fefef9de0f6_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_a67aac4011147fe1ec585211e23580721}\label{defs_8h_a67aac4011147fe1ec585211e23580721}} 
\index{defs.h@{defs.h}!filedup@{filedup}}
\index{filedup@{filedup}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{filedup()}{filedup()}}
{\footnotesize\ttfamily struct \mbox{\hyperlink{structfile}{file}} $\ast$ filedup (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structfile}{file}} $\ast$}]{f }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{file_8c_source_l00045}{45}} of file \mbox{\hyperlink{file_8c_source}{file.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00046 \{}
\DoxyCodeLine{00047   \mbox{\hyperlink{defs_8h_afe4ef8638f1ecb962a6e67fb086ee3b8}{acquire}}(\&\mbox{\hyperlink{file_8c_aa3cdfe534b83322d79f0605488e11ecc}{ftable}}.lock);}
\DoxyCodeLine{00048   \textcolor{keywordflow}{if}(f-\/>\mbox{\hyperlink{structfile_a41c818f828adea488058bca63e4df23f}{ref}} < 1)}
\DoxyCodeLine{00049     \mbox{\hyperlink{console_8c_a95c0aca5d6d7487933984f08b189917a}{panic}}(\textcolor{stringliteral}{"{}filedup"{}});}
\DoxyCodeLine{00050   f-\/>\mbox{\hyperlink{structfile_a41c818f828adea488058bca63e4df23f}{ref}}++;}
\DoxyCodeLine{00051   \mbox{\hyperlink{defs_8h_a4f8616948f3dbce65671f666eed1d669}{release}}(\&\mbox{\hyperlink{file_8c_aa3cdfe534b83322d79f0605488e11ecc}{ftable}}.lock);}
\DoxyCodeLine{00052   \textcolor{keywordflow}{return} f;}
\DoxyCodeLine{00053 \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_a67aac4011147fe1ec585211e23580721_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_a67aac4011147fe1ec585211e23580721_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_a66bb5a4b304ea0f851dd999fc8195fa4}\label{defs_8h_a66bb5a4b304ea0f851dd999fc8195fa4}} 
\index{defs.h@{defs.h}!fileinit@{fileinit}}
\index{fileinit@{fileinit}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{fileinit()}{fileinit()}}
{\footnotesize\ttfamily void fileinit (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{file_8c_source_l00020}{20}} of file \mbox{\hyperlink{file_8c_source}{file.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00021 \{}
\DoxyCodeLine{00022   \mbox{\hyperlink{defs_8h_ab56d728e6966819a0260c358d3ac3419}{initlock}}(\&\mbox{\hyperlink{file_8c_aa3cdfe534b83322d79f0605488e11ecc}{ftable}}.lock, \textcolor{stringliteral}{"{}ftable"{}});}
\DoxyCodeLine{00023 \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=205pt]{d5/d64/defs_8h_a66bb5a4b304ea0f851dd999fc8195fa4_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_a6bd1db179155944c9d1fbc89d8b7b162}\label{defs_8h_a6bd1db179155944c9d1fbc89d8b7b162}} 
\index{defs.h@{defs.h}!fileread@{fileread}}
\index{fileread@{fileread}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{fileread()}{fileread()}}
{\footnotesize\ttfamily int fileread (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structfile}{file}} $\ast$}]{f,  }\item[{char $\ast$}]{addr,  }\item[{int}]{n }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{file_8c_source_l00097}{97}} of file \mbox{\hyperlink{file_8c_source}{file.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00098 \{}
\DoxyCodeLine{00099   \textcolor{keywordtype}{int} \mbox{\hyperlink{console_8c_af10fa12dd785c91e29528fbdc50cf9af}{r}};}
\DoxyCodeLine{00100 }
\DoxyCodeLine{00101   \textcolor{keywordflow}{if}(f-\/>\mbox{\hyperlink{structfile_a0c5c8eced8bc562dbbecc8d450a6b646}{readable}} == 0)}
\DoxyCodeLine{00102     \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{00103   \textcolor{keywordflow}{if}(f-\/>\mbox{\hyperlink{structfile_a3a28c808a8dcd4acf45087ac30c075e7}{type}} == FD\_PIPE)}
\DoxyCodeLine{00104     \textcolor{keywordflow}{return} \mbox{\hyperlink{defs_8h_acd589a0d0d6d34b446baf33755eef519}{piperead}}(f-\/>\mbox{\hyperlink{structfile_a19d83a8d6cb47902fe8c762d2798c198}{pipe}}, addr, n);}
\DoxyCodeLine{00105   \textcolor{keywordflow}{if}(f-\/>\mbox{\hyperlink{structfile_a3a28c808a8dcd4acf45087ac30c075e7}{type}} == FD\_INODE)\{}
\DoxyCodeLine{00106     \mbox{\hyperlink{defs_8h_a29a4d743d41fe659f74b0a57fdc25012}{ilock}}(f-\/>\mbox{\hyperlink{structfile_a4fd095f927715574dc2a4f243690e508}{ip}});}
\DoxyCodeLine{00107     \textcolor{keywordflow}{if}((\mbox{\hyperlink{console_8c_af10fa12dd785c91e29528fbdc50cf9af}{r}} = \mbox{\hyperlink{defs_8h_a2415273b06f31f0f2587b7325588a7e4}{readi}}(f-\/>\mbox{\hyperlink{structfile_a4fd095f927715574dc2a4f243690e508}{ip}}, addr, f-\/>\mbox{\hyperlink{structfile_a94a911be6cc1b1326728392d8b40150d}{off}}, n)) > 0)}
\DoxyCodeLine{00108       f-\/>\mbox{\hyperlink{structfile_a94a911be6cc1b1326728392d8b40150d}{off}} += \mbox{\hyperlink{console_8c_af10fa12dd785c91e29528fbdc50cf9af}{r}};}
\DoxyCodeLine{00109     \mbox{\hyperlink{defs_8h_af301c10ad8ced77a5dfb2de3a64c666c}{iunlock}}(f-\/>\mbox{\hyperlink{structfile_a4fd095f927715574dc2a4f243690e508}{ip}});}
\DoxyCodeLine{00110     \textcolor{keywordflow}{return} \mbox{\hyperlink{console_8c_af10fa12dd785c91e29528fbdc50cf9af}{r}};}
\DoxyCodeLine{00111   \}}
\DoxyCodeLine{00112   \mbox{\hyperlink{console_8c_a95c0aca5d6d7487933984f08b189917a}{panic}}(\textcolor{stringliteral}{"{}fileread"{}});}
\DoxyCodeLine{00113 \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_a6bd1db179155944c9d1fbc89d8b7b162_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=220pt]{d5/d64/defs_8h_a6bd1db179155944c9d1fbc89d8b7b162_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_ac4979f97957194db01001985b1bfa84e}\label{defs_8h_ac4979f97957194db01001985b1bfa84e}} 
\index{defs.h@{defs.h}!filestat@{filestat}}
\index{filestat@{filestat}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{filestat()}{filestat()}}
{\footnotesize\ttfamily int filestat (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structfile}{file}} $\ast$}]{f,  }\item[{struct \mbox{\hyperlink{structstat}{stat}} $\ast$}]{st }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{file_8c_source_l00084}{84}} of file \mbox{\hyperlink{file_8c_source}{file.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00085 \{}
\DoxyCodeLine{00086   \textcolor{keywordflow}{if}(f-\/>\mbox{\hyperlink{structfile_a3a28c808a8dcd4acf45087ac30c075e7}{type}} == FD\_INODE)\{}
\DoxyCodeLine{00087     \mbox{\hyperlink{defs_8h_a29a4d743d41fe659f74b0a57fdc25012}{ilock}}(f-\/>\mbox{\hyperlink{structfile_a4fd095f927715574dc2a4f243690e508}{ip}});}
\DoxyCodeLine{00088     \mbox{\hyperlink{defs_8h_a528f45ea5530504abc7113acc2154348}{stati}}(f-\/>\mbox{\hyperlink{structfile_a4fd095f927715574dc2a4f243690e508}{ip}}, st);}
\DoxyCodeLine{00089     \mbox{\hyperlink{defs_8h_af301c10ad8ced77a5dfb2de3a64c666c}{iunlock}}(f-\/>\mbox{\hyperlink{structfile_a4fd095f927715574dc2a4f243690e508}{ip}});}
\DoxyCodeLine{00090     \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{00091   \}}
\DoxyCodeLine{00092   \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{00093 \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_ac4979f97957194db01001985b1bfa84e_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=219pt]{d5/d64/defs_8h_ac4979f97957194db01001985b1bfa84e_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_a90e8980df48fa900fc33de53448a2e18}\label{defs_8h_a90e8980df48fa900fc33de53448a2e18}} 
\index{defs.h@{defs.h}!filewrite@{filewrite}}
\index{filewrite@{filewrite}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{filewrite()}{filewrite()}}
{\footnotesize\ttfamily int filewrite (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structfile}{file}} $\ast$}]{f,  }\item[{char $\ast$}]{addr,  }\item[{int}]{n }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{file_8c_source_l00118}{118}} of file \mbox{\hyperlink{file_8c_source}{file.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00119 \{}
\DoxyCodeLine{00120   \textcolor{keywordtype}{int} \mbox{\hyperlink{console_8c_af10fa12dd785c91e29528fbdc50cf9af}{r}};}
\DoxyCodeLine{00121 }
\DoxyCodeLine{00122   \textcolor{keywordflow}{if}(f-\/>\mbox{\hyperlink{structfile_a6e1b641ea1551ac4316a0c11a683df45}{writable}} == 0)}
\DoxyCodeLine{00123     \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{00124   \textcolor{keywordflow}{if}(f-\/>\mbox{\hyperlink{structfile_a3a28c808a8dcd4acf45087ac30c075e7}{type}} == FD\_PIPE)}
\DoxyCodeLine{00125     \textcolor{keywordflow}{return} \mbox{\hyperlink{defs_8h_ae63b0db4ca2cbb2025b89d977c6535b1}{pipewrite}}(f-\/>\mbox{\hyperlink{structfile_a19d83a8d6cb47902fe8c762d2798c198}{pipe}}, addr, n);}
\DoxyCodeLine{00126   \textcolor{keywordflow}{if}(f-\/>\mbox{\hyperlink{structfile_a3a28c808a8dcd4acf45087ac30c075e7}{type}} == FD\_INODE)\{}
\DoxyCodeLine{00127     \textcolor{comment}{// write a few blocks at a time to avoid exceeding}}
\DoxyCodeLine{00128     \textcolor{comment}{// the maximum log transaction size, including}}
\DoxyCodeLine{00129     \textcolor{comment}{// i-\/node, indirect block, allocation blocks,}}
\DoxyCodeLine{00130     \textcolor{comment}{// and 2 blocks of slop for non-\/aligned writes.}}
\DoxyCodeLine{00131     \textcolor{comment}{// this really belongs lower down, since writei()}}
\DoxyCodeLine{00132     \textcolor{comment}{// might be writing a device like the console.}}
\DoxyCodeLine{00133     \textcolor{keywordtype}{int} max = ((\mbox{\hyperlink{param_8h_a31cde324007b4e52bbba7079ec5e5f45}{MAXOPBLOCKS}}-\/1-\/1-\/2) / 2) * 512;}
\DoxyCodeLine{00134     \textcolor{keywordtype}{int} i = 0;}
\DoxyCodeLine{00135     \textcolor{keywordflow}{while}(i < n)\{}
\DoxyCodeLine{00136       \textcolor{keywordtype}{int} n1 = n -\/ i;}
\DoxyCodeLine{00137       \textcolor{keywordflow}{if}(n1 > max)}
\DoxyCodeLine{00138         n1 = max;}
\DoxyCodeLine{00139 }
\DoxyCodeLine{00140       \mbox{\hyperlink{defs_8h_a603ca98212e00d2ffdba7827ef0f1003}{begin\_op}}();}
\DoxyCodeLine{00141       \mbox{\hyperlink{defs_8h_a29a4d743d41fe659f74b0a57fdc25012}{ilock}}(f-\/>\mbox{\hyperlink{structfile_a4fd095f927715574dc2a4f243690e508}{ip}});}
\DoxyCodeLine{00142       \textcolor{keywordflow}{if} ((\mbox{\hyperlink{console_8c_af10fa12dd785c91e29528fbdc50cf9af}{r}} = \mbox{\hyperlink{defs_8h_a515876d4653cefef4732806ef7f2833f}{writei}}(f-\/>\mbox{\hyperlink{structfile_a4fd095f927715574dc2a4f243690e508}{ip}}, addr + i, f-\/>\mbox{\hyperlink{structfile_a94a911be6cc1b1326728392d8b40150d}{off}}, n1)) > 0)}
\DoxyCodeLine{00143         f-\/>\mbox{\hyperlink{structfile_a94a911be6cc1b1326728392d8b40150d}{off}} += \mbox{\hyperlink{console_8c_af10fa12dd785c91e29528fbdc50cf9af}{r}};}
\DoxyCodeLine{00144       \mbox{\hyperlink{defs_8h_af301c10ad8ced77a5dfb2de3a64c666c}{iunlock}}(f-\/>\mbox{\hyperlink{structfile_a4fd095f927715574dc2a4f243690e508}{ip}});}
\DoxyCodeLine{00145       \mbox{\hyperlink{defs_8h_a2504e37a109f9bae5ca11fe89e4e8fa1}{end\_op}}();}
\DoxyCodeLine{00146 }
\DoxyCodeLine{00147       \textcolor{keywordflow}{if}(\mbox{\hyperlink{console_8c_af10fa12dd785c91e29528fbdc50cf9af}{r}} < 0)}
\DoxyCodeLine{00148         \textcolor{keywordflow}{break};}
\DoxyCodeLine{00149       \textcolor{keywordflow}{if}(\mbox{\hyperlink{console_8c_af10fa12dd785c91e29528fbdc50cf9af}{r}} != n1)}
\DoxyCodeLine{00150         \mbox{\hyperlink{console_8c_a95c0aca5d6d7487933984f08b189917a}{panic}}(\textcolor{stringliteral}{"{}short filewrite"{}});}
\DoxyCodeLine{00151       i += \mbox{\hyperlink{console_8c_af10fa12dd785c91e29528fbdc50cf9af}{r}};}
\DoxyCodeLine{00152     \}}
\DoxyCodeLine{00153     \textcolor{keywordflow}{return} i == n ? n : -\/1;}
\DoxyCodeLine{00154   \}}
\DoxyCodeLine{00155   \mbox{\hyperlink{console_8c_a95c0aca5d6d7487933984f08b189917a}{panic}}(\textcolor{stringliteral}{"{}filewrite"{}});}
\DoxyCodeLine{00156 \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_a90e8980df48fa900fc33de53448a2e18_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=225pt]{d5/d64/defs_8h_a90e8980df48fa900fc33de53448a2e18_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_acd2e1ded4bb6fce4500438bf928330f4}\label{defs_8h_acd2e1ded4bb6fce4500438bf928330f4}} 
\index{defs.h@{defs.h}!fork@{fork}}
\index{fork@{fork}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{fork()}{fork()}}
{\footnotesize\ttfamily int fork (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{proc_8c_source_l00181}{181}} of file \mbox{\hyperlink{proc_8c_source}{proc.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00182 \{}
\DoxyCodeLine{00183   \textcolor{keywordtype}{int} i, pid;}
\DoxyCodeLine{00184   \textcolor{keyword}{struct }\mbox{\hyperlink{structproc}{proc}} *np;}
\DoxyCodeLine{00185   \textcolor{keyword}{struct }\mbox{\hyperlink{structproc}{proc}} *curproc = \mbox{\hyperlink{proc_8c_a41af0935f3989aae450cf8988cd9c3a9}{myproc}}();}
\DoxyCodeLine{00186 }
\DoxyCodeLine{00187   \textcolor{comment}{// Allocate process.}}
\DoxyCodeLine{00188   \textcolor{keywordflow}{if}((np = allocproc()) == 0)\{}
\DoxyCodeLine{00189     \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{00190   \}}
\DoxyCodeLine{00191 }
\DoxyCodeLine{00192   \textcolor{comment}{// Copy process state from proc.}}
\DoxyCodeLine{00193   \textcolor{keywordflow}{if}((np-\/>\mbox{\hyperlink{structproc_ad430afc653e9eb6cee33954d5545b79d}{pgdir}} = \mbox{\hyperlink{defs_8h_a8caec506ffa8f9386b0434e4cd5aa2b8}{copyuvm}}(curproc-\/>\mbox{\hyperlink{structproc_ad430afc653e9eb6cee33954d5545b79d}{pgdir}}, curproc-\/>\mbox{\hyperlink{structproc_a6e67042bb361124ff287af88efc33e00}{sz}})) == 0)\{}
\DoxyCodeLine{00194     \mbox{\hyperlink{defs_8h_ae79d6a7d0901b7c081cfded3f916d5bd}{kfree}}(np-\/>\mbox{\hyperlink{structproc_a9f556df98482bff6c9216013d7581ae4}{kstack}});}
\DoxyCodeLine{00195     np-\/>\mbox{\hyperlink{structproc_a9f556df98482bff6c9216013d7581ae4}{kstack}} = 0;}
\DoxyCodeLine{00196     np-\/>\mbox{\hyperlink{structproc_a0f2fe91548a1382672ae26e29ca9e736}{state}} = \mbox{\hyperlink{proc_8h_aa1ced7d2b60040fded3fa873d0c03ba7aa09b651ef326a9d8efcee5cc5b720ab4}{UNUSED}};}
\DoxyCodeLine{00197     \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{00198   \}}
\DoxyCodeLine{00199   np-\/>\mbox{\hyperlink{structproc_a6e67042bb361124ff287af88efc33e00}{sz}} = curproc-\/>\mbox{\hyperlink{structproc_a6e67042bb361124ff287af88efc33e00}{sz}};}
\DoxyCodeLine{00200   np-\/>\mbox{\hyperlink{structproc_a14ea8849701ffafba4d142725de154d4}{parent}} = curproc;}
\DoxyCodeLine{00201   *np-\/>\mbox{\hyperlink{structproc_a56ec07ac1e10ce42adfc8dd2a366071f}{tf}} = *curproc-\/>\mbox{\hyperlink{structproc_a56ec07ac1e10ce42adfc8dd2a366071f}{tf}};}
\DoxyCodeLine{00202 }
\DoxyCodeLine{00203   \textcolor{comment}{// Clear \%eax so that fork returns 0 in the child.}}
\DoxyCodeLine{00204   np-\/>\mbox{\hyperlink{structproc_a56ec07ac1e10ce42adfc8dd2a366071f}{tf}}-\/>\mbox{\hyperlink{structtrapframe_ab1dd3a10936b61129d7395c3a21bc2fe}{eax}} = 0;}
\DoxyCodeLine{00205 }
\DoxyCodeLine{00206   \textcolor{keywordflow}{for}(i = 0; i < \mbox{\hyperlink{param_8h_a80bacbaea8dd6aecf216d85d981bcb21}{NOFILE}}; i++)}
\DoxyCodeLine{00207     \textcolor{keywordflow}{if}(curproc-\/>\mbox{\hyperlink{structproc_a4a9eb0352efe3fc097c91fccfaac50bd}{ofile}}[i])}
\DoxyCodeLine{00208       np-\/>\mbox{\hyperlink{structproc_a4a9eb0352efe3fc097c91fccfaac50bd}{ofile}}[i] = \mbox{\hyperlink{defs_8h_a67aac4011147fe1ec585211e23580721}{filedup}}(curproc-\/>\mbox{\hyperlink{structproc_a4a9eb0352efe3fc097c91fccfaac50bd}{ofile}}[i]);}
\DoxyCodeLine{00209   np-\/>\mbox{\hyperlink{structproc_a493bc338ce008a838eef521972a35257}{cwd}} = \mbox{\hyperlink{defs_8h_a02a4eb876d45b936de1adc73bff02ebf}{idup}}(curproc-\/>\mbox{\hyperlink{structproc_a493bc338ce008a838eef521972a35257}{cwd}});}
\DoxyCodeLine{00210 }
\DoxyCodeLine{00211   \mbox{\hyperlink{defs_8h_aa406a54805a570dfe266281876dc5d69}{safestrcpy}}(np-\/>\mbox{\hyperlink{structproc_ac04af53e17d24b90c3cbfab56d658d62}{name}}, curproc-\/>\mbox{\hyperlink{structproc_ac04af53e17d24b90c3cbfab56d658d62}{name}}, \textcolor{keyword}{sizeof}(curproc-\/>\mbox{\hyperlink{structproc_ac04af53e17d24b90c3cbfab56d658d62}{name}}));}
\DoxyCodeLine{00212 }
\DoxyCodeLine{00213   \mbox{\hyperlink{structproc_acf2bdf54d1f957ccbcdc987007029944}{pid}} = np-\/>\mbox{\hyperlink{structproc_acf2bdf54d1f957ccbcdc987007029944}{pid}};}
\DoxyCodeLine{00214 }
\DoxyCodeLine{00215   \mbox{\hyperlink{defs_8h_afe4ef8638f1ecb962a6e67fb086ee3b8}{acquire}}(\&\mbox{\hyperlink{proc_8c_addf39d613ca9a58e7e6080a2e454421a}{ptable}}.lock);}
\DoxyCodeLine{00216 }
\DoxyCodeLine{00217   np-\/>\mbox{\hyperlink{structproc_a0f2fe91548a1382672ae26e29ca9e736}{state}} = \mbox{\hyperlink{proc_8h_aa1ced7d2b60040fded3fa873d0c03ba7a269b90433e40460a2c0044a0b3e15694}{RUNNABLE}};}
\DoxyCodeLine{00218 }
\DoxyCodeLine{00219   \mbox{\hyperlink{defs_8h_a4f8616948f3dbce65671f666eed1d669}{release}}(\&\mbox{\hyperlink{proc_8c_addf39d613ca9a58e7e6080a2e454421a}{ptable}}.lock);}
\DoxyCodeLine{00220 }
\DoxyCodeLine{00221   \textcolor{keywordflow}{return} \mbox{\hyperlink{structproc_acf2bdf54d1f957ccbcdc987007029944}{pid}};}
\DoxyCodeLine{00222 \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_acd2e1ded4bb6fce4500438bf928330f4_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_acd2e1ded4bb6fce4500438bf928330f4_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_af24cf1756e19afd8be8c95d02262cf3a}\label{defs_8h_af24cf1756e19afd8be8c95d02262cf3a}} 
\index{defs.h@{defs.h}!freevm@{freevm}}
\index{freevm@{freevm}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{freevm()}{freevm()}}
{\footnotesize\ttfamily void freevm (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{types_8h_ac131849542282b2c95dfeaf1f26dc010}{pde\+\_\+t}} $\ast$}]{pgdir }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{vm_8c_source_l00284}{284}} of file \mbox{\hyperlink{vm_8c_source}{vm.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00285 \{}
\DoxyCodeLine{00286   \mbox{\hyperlink{types_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}} i;}
\DoxyCodeLine{00287 }
\DoxyCodeLine{00288   \textcolor{keywordflow}{if}(pgdir == 0)}
\DoxyCodeLine{00289     \mbox{\hyperlink{console_8c_a95c0aca5d6d7487933984f08b189917a}{panic}}(\textcolor{stringliteral}{"{}freevm: no pgdir"{}});}
\DoxyCodeLine{00290   \mbox{\hyperlink{vm_8c_a6d3019ea15a9bfdc5131ae97f3623c49}{deallocuvm}}(pgdir, \mbox{\hyperlink{memlayout_8h_a20cbfc19992a40ab9ccf4aa8ab8283d0}{KERNBASE}}, 0);}
\DoxyCodeLine{00291   \textcolor{keywordflow}{for}(i = 0; i < \mbox{\hyperlink{mmu_8h_af60ee3ecbf249497d0378c97201edfe8}{NPDENTRIES}}; i++)\{}
\DoxyCodeLine{00292     \textcolor{keywordflow}{if}(pgdir[i] \& \mbox{\hyperlink{mmu_8h_a89bd860de64c44cd8ebaca8dc311b5ac}{PTE\_P}})\{}
\DoxyCodeLine{00293       \textcolor{keywordtype}{char} * v = \mbox{\hyperlink{memlayout_8h_aefd5e8b62c49bba2cf20309c7dd174e2}{P2V}}(\mbox{\hyperlink{mmu_8h_a74b24f9b091875a5313370892e3f37a5}{PTE\_ADDR}}(pgdir[i]));}
\DoxyCodeLine{00294       \mbox{\hyperlink{defs_8h_ae79d6a7d0901b7c081cfded3f916d5bd}{kfree}}(v);}
\DoxyCodeLine{00295     \}}
\DoxyCodeLine{00296   \}}
\DoxyCodeLine{00297   \mbox{\hyperlink{defs_8h_ae79d6a7d0901b7c081cfded3f916d5bd}{kfree}}((\textcolor{keywordtype}{char}*)pgdir);}
\DoxyCodeLine{00298 \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_af24cf1756e19afd8be8c95d02262cf3a_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_af24cf1756e19afd8be8c95d02262cf3a_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_a4105de9e2969515d6c6c795c4386f69f}\label{defs_8h_a4105de9e2969515d6c6c795c4386f69f}} 
\index{defs.h@{defs.h}!getcallerpcs@{getcallerpcs}}
\index{getcallerpcs@{getcallerpcs}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{getcallerpcs()}{getcallerpcs()}}
{\footnotesize\ttfamily void getcallerpcs (\begin{DoxyParamCaption}\item[{void $\ast$}]{,  }\item[{\mbox{\hyperlink{types_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}} $\ast$}]{ }\end{DoxyParamCaption})}

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=550pt]{d5/d64/defs_8h_a4105de9e2969515d6c6c795c4386f69f_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_aee260ddc6baeb66dbf14f5efb1b799b2}\label{defs_8h_aee260ddc6baeb66dbf14f5efb1b799b2}} 
\index{defs.h@{defs.h}!getprocs@{getprocs}}
\index{getprocs@{getprocs}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{getprocs()}{getprocs()}}
{\footnotesize\ttfamily int getprocs (\begin{DoxyParamCaption}\item[{int}]{max,  }\item[{struct \mbox{\hyperlink{structuproc}{uproc}} $\ast$}]{ }\end{DoxyParamCaption})}

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=208pt]{d5/d64/defs_8h_aee260ddc6baeb66dbf14f5efb1b799b2_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_acb02e9289fb8a1017c3455b137a9bccd}\label{defs_8h_acb02e9289fb8a1017c3455b137a9bccd}} 
\index{defs.h@{defs.h}!growproc@{growproc}}
\index{growproc@{growproc}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{growproc()}{growproc()}}
{\footnotesize\ttfamily int growproc (\begin{DoxyParamCaption}\item[{int}]{n }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{proc_8c_source_l00159}{159}} of file \mbox{\hyperlink{proc_8c_source}{proc.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00160 \{}
\DoxyCodeLine{00161   \mbox{\hyperlink{types_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}} sz;}
\DoxyCodeLine{00162   \textcolor{keyword}{struct }\mbox{\hyperlink{structproc}{proc}} *curproc = \mbox{\hyperlink{proc_8c_a41af0935f3989aae450cf8988cd9c3a9}{myproc}}();}
\DoxyCodeLine{00163 }
\DoxyCodeLine{00164   \mbox{\hyperlink{structproc_a6e67042bb361124ff287af88efc33e00}{sz}} = curproc-\/>\mbox{\hyperlink{structproc_a6e67042bb361124ff287af88efc33e00}{sz}};}
\DoxyCodeLine{00165   \textcolor{keywordflow}{if}(n > 0)\{}
\DoxyCodeLine{00166     \textcolor{keywordflow}{if}((\mbox{\hyperlink{structproc_a6e67042bb361124ff287af88efc33e00}{sz}} = \mbox{\hyperlink{defs_8h_a67f50b6f85756f02b5acdcb084d51b9f}{allocuvm}}(curproc-\/>\mbox{\hyperlink{structproc_ad430afc653e9eb6cee33954d5545b79d}{pgdir}}, \mbox{\hyperlink{structproc_a6e67042bb361124ff287af88efc33e00}{sz}}, \mbox{\hyperlink{structproc_a6e67042bb361124ff287af88efc33e00}{sz}} + n)) == 0)}
\DoxyCodeLine{00167       \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{00168   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(n < 0)\{}
\DoxyCodeLine{00169     \textcolor{keywordflow}{if}((\mbox{\hyperlink{structproc_a6e67042bb361124ff287af88efc33e00}{sz}} = \mbox{\hyperlink{defs_8h_ac45969a8875b6dc87245e0a642aa2d8d}{deallocuvm}}(curproc-\/>\mbox{\hyperlink{structproc_ad430afc653e9eb6cee33954d5545b79d}{pgdir}}, \mbox{\hyperlink{structproc_a6e67042bb361124ff287af88efc33e00}{sz}}, \mbox{\hyperlink{structproc_a6e67042bb361124ff287af88efc33e00}{sz}} + n)) == 0)}
\DoxyCodeLine{00170       \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{00171   \}}
\DoxyCodeLine{00172   curproc-\/>\mbox{\hyperlink{structproc_a6e67042bb361124ff287af88efc33e00}{sz}} = \mbox{\hyperlink{structproc_a6e67042bb361124ff287af88efc33e00}{sz}};}
\DoxyCodeLine{00173   \mbox{\hyperlink{defs_8h_ad43d81fa3edec39a200abd0853bc84b1}{switchuvm}}(curproc);}
\DoxyCodeLine{00174   \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{00175 \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_acb02e9289fb8a1017c3455b137a9bccd_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=228pt]{d5/d64/defs_8h_acb02e9289fb8a1017c3455b137a9bccd_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_ac44b13cc76bf4040e3baf34df75ff230}\label{defs_8h_ac44b13cc76bf4040e3baf34df75ff230}} 
\index{defs.h@{defs.h}!holding@{holding}}
\index{holding@{holding}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{holding()}{holding()}}
{\footnotesize\ttfamily int holding (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structspinlock}{spinlock}} $\ast$}]{lock }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{spinlock_8c_source_l00090}{90}} of file \mbox{\hyperlink{spinlock_8c_source}{spinlock.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00091 \{}
\DoxyCodeLine{00092   \textcolor{keywordtype}{int} \mbox{\hyperlink{console_8c_af10fa12dd785c91e29528fbdc50cf9af}{r}};}
\DoxyCodeLine{00093   \mbox{\hyperlink{spinlock_8c_a206b749d1b7768dadce61cbcde7e0f1c}{pushcli}}();}
\DoxyCodeLine{00094   \mbox{\hyperlink{console_8c_af10fa12dd785c91e29528fbdc50cf9af}{r}} = \mbox{\hyperlink{bio_8c_ab28e82cd5dda7d960095706a3ea20572}{lock}}-\/>\mbox{\hyperlink{structspinlock_a48f3007579f644934d9aba91e5378c03}{locked}} \&\& \mbox{\hyperlink{bio_8c_ab28e82cd5dda7d960095706a3ea20572}{lock}}-\/>\mbox{\hyperlink{structspinlock_a290ae772c8ccb9e8c1580204c31a7f88}{cpu}} == \mbox{\hyperlink{defs_8h_ad427959ad025dabd8cd393b27ec39160}{mycpu}}();}
\DoxyCodeLine{00095   \mbox{\hyperlink{spinlock_8c_ae3424f669269fef400ce29c3aeb43fdb}{popcli}}();}
\DoxyCodeLine{00096   \textcolor{keywordflow}{return} \mbox{\hyperlink{console_8c_af10fa12dd785c91e29528fbdc50cf9af}{r}};}
\DoxyCodeLine{00097 \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_ac44b13cc76bf4040e3baf34df75ff230_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=550pt]{d5/d64/defs_8h_ac44b13cc76bf4040e3baf34df75ff230_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_afa76133bc67c6026376d630da9b53b68}\label{defs_8h_afa76133bc67c6026376d630da9b53b68}} 
\index{defs.h@{defs.h}!holdingsleep@{holdingsleep}}
\index{holdingsleep@{holdingsleep}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{holdingsleep()}{holdingsleep()}}
{\footnotesize\ttfamily int holdingsleep (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structsleeplock}{sleeplock}} $\ast$}]{lk }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{sleeplock_8c_source_l00045}{45}} of file \mbox{\hyperlink{sleeplock_8c_source}{sleeplock.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00046 \{}
\DoxyCodeLine{00047   \textcolor{keywordtype}{int} \mbox{\hyperlink{console_8c_af10fa12dd785c91e29528fbdc50cf9af}{r}};}
\DoxyCodeLine{00048   }
\DoxyCodeLine{00049   \mbox{\hyperlink{defs_8h_afe4ef8638f1ecb962a6e67fb086ee3b8}{acquire}}(\&lk-\/>\mbox{\hyperlink{structsleeplock_a077241ea0e720d228d853208444c4c9d}{lk}});}
\DoxyCodeLine{00050   \mbox{\hyperlink{console_8c_af10fa12dd785c91e29528fbdc50cf9af}{r}} = lk-\/>\mbox{\hyperlink{structsleeplock_ac5cfe608994a41b24cb1c0fd722910c3}{locked}} \&\& (lk-\/>\mbox{\hyperlink{structsleeplock_a99a4c6a784956ab1c391a12af475a55e}{pid}} == \mbox{\hyperlink{defs_8h_a3d2327db1e34643f4a9e6a07c8cc62c6}{myproc}}()-\/>\mbox{\hyperlink{structproc_acf2bdf54d1f957ccbcdc987007029944}{pid}});}
\DoxyCodeLine{00051   \mbox{\hyperlink{defs_8h_a4f8616948f3dbce65671f666eed1d669}{release}}(\&lk-\/>\mbox{\hyperlink{structsleeplock_a077241ea0e720d228d853208444c4c9d}{lk}});}
\DoxyCodeLine{00052   \textcolor{keywordflow}{return} \mbox{\hyperlink{console_8c_af10fa12dd785c91e29528fbdc50cf9af}{r}};}
\DoxyCodeLine{00053 \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_afa76133bc67c6026376d630da9b53b68_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_afa76133bc67c6026376d630da9b53b68_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_af71d7632e6d48638682e78de0ad269af}\label{defs_8h_af71d7632e6d48638682e78de0ad269af}} 
\index{defs.h@{defs.h}!ialloc@{ialloc}}
\index{ialloc@{ialloc}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{ialloc()}{ialloc()}}
{\footnotesize\ttfamily struct \mbox{\hyperlink{structinode}{inode}} $\ast$ ialloc (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{types_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}}}]{dev,  }\item[{short}]{type }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{fs_8c_source_l00195}{195}} of file \mbox{\hyperlink{fs_8c_source}{fs.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00196 \{}
\DoxyCodeLine{00197   \textcolor{keywordtype}{int} inum;}
\DoxyCodeLine{00198   \textcolor{keyword}{struct }\mbox{\hyperlink{structbuf}{buf}} *bp;}
\DoxyCodeLine{00199   \textcolor{keyword}{struct }\mbox{\hyperlink{structdinode}{dinode}} *dip;}
\DoxyCodeLine{00200 }
\DoxyCodeLine{00201   \textcolor{keywordflow}{for}(inum = 1; inum < \mbox{\hyperlink{fs_8c_a0248d0bac625de5a1415f2f8c91f3343}{sb}}.\mbox{\hyperlink{structsuperblock_a355d2a1ebdc51f80820c23e69363cf42}{ninodes}}; inum++)\{}
\DoxyCodeLine{00202     bp = \mbox{\hyperlink{bio_8c_a30b8d2ef2300ed8e3d879a428fe39898}{bread}}(dev, \mbox{\hyperlink{fs_8h_ac9a5b990015f0f86e5d4c6b21d38ffa0}{IBLOCK}}(inum, \mbox{\hyperlink{fs_8c_a0248d0bac625de5a1415f2f8c91f3343}{sb}}));}
\DoxyCodeLine{00203     dip = (\textcolor{keyword}{struct }\mbox{\hyperlink{structdinode}{dinode}}*)bp-\/>\mbox{\hyperlink{structbuf_ab0ec38784ab94ed35e575cf6d33912d2}{data}} + inum\%\mbox{\hyperlink{fs_8h_aadb6c866a6d0a173f5f0a6ed9c7e0228}{IPB}};}
\DoxyCodeLine{00204     \textcolor{keywordflow}{if}(dip-\/>\mbox{\hyperlink{structdinode_abf6b2a8476a803284f1c927fb3b82259}{type}} == 0)\{  \textcolor{comment}{// a free inode}}
\DoxyCodeLine{00205       \mbox{\hyperlink{defs_8h_a0098886a849eef10803e9f35ceec61b9}{memset}}(dip, 0, \textcolor{keyword}{sizeof}(*dip));}
\DoxyCodeLine{00206       dip-\/>\mbox{\hyperlink{structdinode_abf6b2a8476a803284f1c927fb3b82259}{type}} = \mbox{\hyperlink{structdinode_abf6b2a8476a803284f1c927fb3b82259}{type}};}
\DoxyCodeLine{00207       \mbox{\hyperlink{defs_8h_a270d0050dc50965f4f851717841ad33c}{log\_write}}(bp);   \textcolor{comment}{// mark it allocated on the disk}}
\DoxyCodeLine{00208       \mbox{\hyperlink{bio_8c_ab5335aeb503731104314321a78a6d727}{brelse}}(bp);}
\DoxyCodeLine{00209       \textcolor{keywordflow}{return} iget(dev, inum);}
\DoxyCodeLine{00210     \}}
\DoxyCodeLine{00211     \mbox{\hyperlink{bio_8c_ab5335aeb503731104314321a78a6d727}{brelse}}(bp);}
\DoxyCodeLine{00212   \}}
\DoxyCodeLine{00213   \mbox{\hyperlink{console_8c_a95c0aca5d6d7487933984f08b189917a}{panic}}(\textcolor{stringliteral}{"{}ialloc: no inodes"{}});}
\DoxyCodeLine{00214 \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_af71d7632e6d48638682e78de0ad269af_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_aefb190a6104cb58c0bc1f8fec88d1307}\label{defs_8h_aefb190a6104cb58c0bc1f8fec88d1307}} 
\index{defs.h@{defs.h}!ideinit@{ideinit}}
\index{ideinit@{ideinit}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{ideinit()}{ideinit()}}
{\footnotesize\ttfamily void ideinit (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{ide_8c_source_l00051}{51}} of file \mbox{\hyperlink{ide_8c_source}{ide.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00052 \{}
\DoxyCodeLine{00053   \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{00054 }
\DoxyCodeLine{00055   \mbox{\hyperlink{defs_8h_ab56d728e6966819a0260c358d3ac3419}{initlock}}(\&idelock, \textcolor{stringliteral}{"{}ide"{}});}
\DoxyCodeLine{00056   \mbox{\hyperlink{defs_8h_a63da75c0c2f0b051f2c790aea2116b63}{ioapicenable}}(\mbox{\hyperlink{traps_8h_ae17548e9192fbdecfb02247721aaf2df}{IRQ\_IDE}}, \mbox{\hyperlink{mp_8c_a6201a0661c3d5b88df5f63529298eb48}{ncpu}} -\/ 1);}
\DoxyCodeLine{00057   idewait(0);}
\DoxyCodeLine{00058 }
\DoxyCodeLine{00059   \textcolor{comment}{// Check if disk 1 is present}}
\DoxyCodeLine{00060   outb(0x1f6, 0xe0 | (1<<4));}
\DoxyCodeLine{00061   \textcolor{keywordflow}{for}(i=0; i<1000; i++)\{}
\DoxyCodeLine{00062     \textcolor{keywordflow}{if}(inb(0x1f7) != 0)\{}
\DoxyCodeLine{00063       havedisk1 = 1;}
\DoxyCodeLine{00064       \textcolor{keywordflow}{break};}
\DoxyCodeLine{00065     \}}
\DoxyCodeLine{00066   \}}
\DoxyCodeLine{00067 }
\DoxyCodeLine{00068   \textcolor{comment}{// Switch back to disk 0.}}
\DoxyCodeLine{00069   outb(0x1f6, 0xe0 | (0<<4));}
\DoxyCodeLine{00070 \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=229pt]{d5/d64/defs_8h_aefb190a6104cb58c0bc1f8fec88d1307_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_a709693afdb9b89d848e684e7acde1f8f}\label{defs_8h_a709693afdb9b89d848e684e7acde1f8f}} 
\index{defs.h@{defs.h}!ideintr@{ideintr}}
\index{ideintr@{ideintr}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{ideintr()}{ideintr()}}
{\footnotesize\ttfamily void ideintr (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{ide_8c_source_l00104}{104}} of file \mbox{\hyperlink{ide_8c_source}{ide.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00105 \{}
\DoxyCodeLine{00106   \textcolor{keyword}{struct }\mbox{\hyperlink{structbuf}{buf}} *b;}
\DoxyCodeLine{00107 }
\DoxyCodeLine{00108   \textcolor{comment}{// First queued buffer is the active request.}}
\DoxyCodeLine{00109   \mbox{\hyperlink{defs_8h_afe4ef8638f1ecb962a6e67fb086ee3b8}{acquire}}(\&idelock);}
\DoxyCodeLine{00110 }
\DoxyCodeLine{00111   \textcolor{keywordflow}{if}((b = idequeue) == 0)\{}
\DoxyCodeLine{00112     \mbox{\hyperlink{defs_8h_a4f8616948f3dbce65671f666eed1d669}{release}}(\&idelock);}
\DoxyCodeLine{00113     \textcolor{keywordflow}{return};}
\DoxyCodeLine{00114   \}}
\DoxyCodeLine{00115   idequeue = b-\/>\mbox{\hyperlink{structbuf_aba5c088c4da07a5ec88edfacdae9b85a}{qnext}};}
\DoxyCodeLine{00116 }
\DoxyCodeLine{00117   \textcolor{comment}{// Read data if needed.}}
\DoxyCodeLine{00118   \textcolor{keywordflow}{if}(!(b-\/>\mbox{\hyperlink{structbuf_ae7d6b6c34fdeadb38970efd0554aa1a9}{flags}} \& \mbox{\hyperlink{buf_8h_adc32011df267adb9740bcd0abf0f0663}{B\_DIRTY}}) \&\& idewait(1) >= 0)}
\DoxyCodeLine{00119     insl(0x1f0, b-\/>\mbox{\hyperlink{structbuf_ab0ec38784ab94ed35e575cf6d33912d2}{data}}, \mbox{\hyperlink{fs_8h_a403cf3149c084cea115b85c90721039a}{BSIZE}}/4);}
\DoxyCodeLine{00120 }
\DoxyCodeLine{00121   \textcolor{comment}{// Wake process waiting for this buf.}}
\DoxyCodeLine{00122   b-\/>\mbox{\hyperlink{structbuf_ae7d6b6c34fdeadb38970efd0554aa1a9}{flags}} |= \mbox{\hyperlink{buf_8h_afab4199c0d27da71061f1c0cd5b51520}{B\_VALID}};}
\DoxyCodeLine{00123   b-\/>\mbox{\hyperlink{structbuf_ae7d6b6c34fdeadb38970efd0554aa1a9}{flags}} \&= \string~B\_DIRTY;}
\DoxyCodeLine{00124   \mbox{\hyperlink{defs_8h_a245b56417239f499389b2e806bd99254}{wakeup}}(b);}
\DoxyCodeLine{00125 }
\DoxyCodeLine{00126   \textcolor{comment}{// Start disk on next buf in queue.}}
\DoxyCodeLine{00127   \textcolor{keywordflow}{if}(idequeue != 0)}
\DoxyCodeLine{00128     idestart(idequeue);}
\DoxyCodeLine{00129 }
\DoxyCodeLine{00130   \mbox{\hyperlink{defs_8h_a4f8616948f3dbce65671f666eed1d669}{release}}(\&idelock);}
\DoxyCodeLine{00131 \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_a709693afdb9b89d848e684e7acde1f8f_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=192pt]{d5/d64/defs_8h_a709693afdb9b89d848e684e7acde1f8f_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_a70985c3f5b2fb79737457b5c88f5327a}\label{defs_8h_a70985c3f5b2fb79737457b5c88f5327a}} 
\index{defs.h@{defs.h}!iderw@{iderw}}
\index{iderw@{iderw}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{iderw()}{iderw()}}
{\footnotesize\ttfamily void iderw (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structbuf}{buf}} $\ast$}]{b }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{ide_8c_source_l00138}{138}} of file \mbox{\hyperlink{ide_8c_source}{ide.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00139 \{}
\DoxyCodeLine{00140   \textcolor{keyword}{struct }\mbox{\hyperlink{structbuf}{buf}} **pp;}
\DoxyCodeLine{00141 }
\DoxyCodeLine{00142   \textcolor{keywordflow}{if}(!\mbox{\hyperlink{defs_8h_afa76133bc67c6026376d630da9b53b68}{holdingsleep}}(\&b-\/>\mbox{\hyperlink{structbuf_a626ad748d91d4bd7f4e65b74c73f2644}{lock}}))}
\DoxyCodeLine{00143     \mbox{\hyperlink{console_8c_a95c0aca5d6d7487933984f08b189917a}{panic}}(\textcolor{stringliteral}{"{}iderw: buf not locked"{}});}
\DoxyCodeLine{00144   \textcolor{keywordflow}{if}((b-\/>\mbox{\hyperlink{structbuf_ae7d6b6c34fdeadb38970efd0554aa1a9}{flags}} \& (\mbox{\hyperlink{buf_8h_afab4199c0d27da71061f1c0cd5b51520}{B\_VALID}}|\mbox{\hyperlink{buf_8h_adc32011df267adb9740bcd0abf0f0663}{B\_DIRTY}})) == \mbox{\hyperlink{buf_8h_afab4199c0d27da71061f1c0cd5b51520}{B\_VALID}})}
\DoxyCodeLine{00145     \mbox{\hyperlink{console_8c_a95c0aca5d6d7487933984f08b189917a}{panic}}(\textcolor{stringliteral}{"{}iderw: nothing to do"{}});}
\DoxyCodeLine{00146   \textcolor{keywordflow}{if}(b-\/>\mbox{\hyperlink{structbuf_ac96082c2b5f22133ac7092ef81487227}{dev}} != 0 \&\& !havedisk1)}
\DoxyCodeLine{00147     \mbox{\hyperlink{console_8c_a95c0aca5d6d7487933984f08b189917a}{panic}}(\textcolor{stringliteral}{"{}iderw: ide disk 1 not present"{}});}
\DoxyCodeLine{00148 }
\DoxyCodeLine{00149   \mbox{\hyperlink{defs_8h_afe4ef8638f1ecb962a6e67fb086ee3b8}{acquire}}(\&idelock);  \textcolor{comment}{//DOC:acquire-\/lock}}
\DoxyCodeLine{00150 }
\DoxyCodeLine{00151   \textcolor{comment}{// Append b to idequeue.}}
\DoxyCodeLine{00152   b-\/>\mbox{\hyperlink{structbuf_aba5c088c4da07a5ec88edfacdae9b85a}{qnext}} = 0;}
\DoxyCodeLine{00153   \textcolor{keywordflow}{for}(pp=\&idequeue; *pp; pp=\&(*pp)-\/>\mbox{\hyperlink{structbuf_aba5c088c4da07a5ec88edfacdae9b85a}{qnext}})  \textcolor{comment}{//DOC:insert-\/queue}}
\DoxyCodeLine{00154     ;}
\DoxyCodeLine{00155   *pp = b;}
\DoxyCodeLine{00156 }
\DoxyCodeLine{00157   \textcolor{comment}{// Start disk if necessary.}}
\DoxyCodeLine{00158   \textcolor{keywordflow}{if}(idequeue == b)}
\DoxyCodeLine{00159     idestart(b);}
\DoxyCodeLine{00160 }
\DoxyCodeLine{00161   \textcolor{comment}{// Wait for request to finish.}}
\DoxyCodeLine{00162   \textcolor{keywordflow}{while}((b-\/>\mbox{\hyperlink{structbuf_ae7d6b6c34fdeadb38970efd0554aa1a9}{flags}} \& (\mbox{\hyperlink{buf_8h_afab4199c0d27da71061f1c0cd5b51520}{B\_VALID}}|\mbox{\hyperlink{buf_8h_adc32011df267adb9740bcd0abf0f0663}{B\_DIRTY}})) != \mbox{\hyperlink{buf_8h_afab4199c0d27da71061f1c0cd5b51520}{B\_VALID}})\{}
\DoxyCodeLine{00163     \mbox{\hyperlink{defs_8h_aca4a88f06b3ebbcc04330f7ae06c8507}{sleep}}(b, \&idelock);}
\DoxyCodeLine{00164   \}}
\DoxyCodeLine{00165 }
\DoxyCodeLine{00166 }
\DoxyCodeLine{00167   \mbox{\hyperlink{defs_8h_a4f8616948f3dbce65671f666eed1d669}{release}}(\&idelock);}
\DoxyCodeLine{00168 \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_a70985c3f5b2fb79737457b5c88f5327a_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_a70985c3f5b2fb79737457b5c88f5327a_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_a9b6e7f6c302700cb54216ad22cbc1591}\label{defs_8h_a9b6e7f6c302700cb54216ad22cbc1591}} 
\index{defs.h@{defs.h}!idtinit@{idtinit}}
\index{idtinit@{idtinit}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{idtinit()}{idtinit()}}
{\footnotesize\ttfamily void idtinit (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{trap_8c_source_l00030}{30}} of file \mbox{\hyperlink{trap_8c_source}{trap.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00031 \{}
\DoxyCodeLine{00032   lidt(\mbox{\hyperlink{trap_8c_a3facbc1e1e6618fb238fc124bd9aa827}{idt}}, \textcolor{keyword}{sizeof}(\mbox{\hyperlink{trap_8c_a3facbc1e1e6618fb238fc124bd9aa827}{idt}}));}
\DoxyCodeLine{00033 \}}

\end{DoxyCode}
\mbox{\Hypertarget{defs_8h_a02a4eb876d45b936de1adc73bff02ebf}\label{defs_8h_a02a4eb876d45b936de1adc73bff02ebf}} 
\index{defs.h@{defs.h}!idup@{idup}}
\index{idup@{idup}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{idup()}{idup()}}
{\footnotesize\ttfamily struct \mbox{\hyperlink{structinode}{inode}} $\ast$ idup (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structinode}{inode}} $\ast$}]{ip }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{fs_8c_source_l00277}{277}} of file \mbox{\hyperlink{fs_8c_source}{fs.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00278 \{}
\DoxyCodeLine{00279   \mbox{\hyperlink{defs_8h_afe4ef8638f1ecb962a6e67fb086ee3b8}{acquire}}(\&\mbox{\hyperlink{fs_8c_a5a78db4f7c856337d906f0606b19bff5}{icache}}.lock);}
\DoxyCodeLine{00280   ip-\/>\mbox{\hyperlink{structinode_a6a519028ee67f805482b3e1725bf09c5}{ref}}++;}
\DoxyCodeLine{00281   \mbox{\hyperlink{defs_8h_a4f8616948f3dbce65671f666eed1d669}{release}}(\&\mbox{\hyperlink{fs_8c_a5a78db4f7c856337d906f0606b19bff5}{icache}}.lock);}
\DoxyCodeLine{00282   \textcolor{keywordflow}{return} ip;}
\DoxyCodeLine{00283 \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_a02a4eb876d45b936de1adc73bff02ebf_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_a02a4eb876d45b936de1adc73bff02ebf_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_a301761a27cf266e0bad483272fb31a3c}\label{defs_8h_a301761a27cf266e0bad483272fb31a3c}} 
\index{defs.h@{defs.h}!iinit@{iinit}}
\index{iinit@{iinit}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{iinit()}{iinit()}}
{\footnotesize\ttfamily void iinit (\begin{DoxyParamCaption}\item[{int}]{dev }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{fs_8c_source_l00172}{172}} of file \mbox{\hyperlink{fs_8c_source}{fs.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00173 \{}
\DoxyCodeLine{00174   \textcolor{keywordtype}{int} i = 0;}
\DoxyCodeLine{00175   }
\DoxyCodeLine{00176   \mbox{\hyperlink{defs_8h_ab56d728e6966819a0260c358d3ac3419}{initlock}}(\&\mbox{\hyperlink{fs_8c_a5a78db4f7c856337d906f0606b19bff5}{icache}}.lock, \textcolor{stringliteral}{"{}icache"{}});}
\DoxyCodeLine{00177   \textcolor{keywordflow}{for}(i = 0; i < \mbox{\hyperlink{param_8h_adabafa10c7951be7c875cd2ee212be85}{NINODE}}; i++) \{}
\DoxyCodeLine{00178     \mbox{\hyperlink{defs_8h_af5ca8072e3877a883fb34ce59eff88cb}{initsleeplock}}(\&\mbox{\hyperlink{fs_8c_a5a78db4f7c856337d906f0606b19bff5}{icache}}.inode[i].lock, \textcolor{stringliteral}{"{}inode"{}});}
\DoxyCodeLine{00179   \}}
\DoxyCodeLine{00180 }
\DoxyCodeLine{00181   \mbox{\hyperlink{fs_8c_aff0080b2133027be2e525ca088b40e78}{readsb}}(dev, \&\mbox{\hyperlink{fs_8c_a0248d0bac625de5a1415f2f8c91f3343}{sb}});}
\DoxyCodeLine{00182   \mbox{\hyperlink{console_8c_a90f0742d846503e4ed1804f1df421ec6}{cprintf}}(\textcolor{stringliteral}{"{}sb: size \%d nblocks \%d ninodes \%d nlog \%d logstart \%d\(\backslash\)}}
\DoxyCodeLine{00183 \textcolor{stringliteral}{ inodestart \%d bmap start \%d\(\backslash\)n"{}}, \mbox{\hyperlink{fs_8c_a0248d0bac625de5a1415f2f8c91f3343}{sb}}.\mbox{\hyperlink{structsuperblock_a7c6e4d6da139ecee74eb7816d5d44fa6}{size}}, \mbox{\hyperlink{fs_8c_a0248d0bac625de5a1415f2f8c91f3343}{sb}}.\mbox{\hyperlink{structsuperblock_a2a27a7cfb54689f0e1dcd1788d049218}{nblocks}},}
\DoxyCodeLine{00184           \mbox{\hyperlink{fs_8c_a0248d0bac625de5a1415f2f8c91f3343}{sb}}.\mbox{\hyperlink{structsuperblock_a355d2a1ebdc51f80820c23e69363cf42}{ninodes}}, \mbox{\hyperlink{fs_8c_a0248d0bac625de5a1415f2f8c91f3343}{sb}}.\mbox{\hyperlink{structsuperblock_aea92ae872785fd4fb39b903d9157aac5}{nlog}}, \mbox{\hyperlink{fs_8c_a0248d0bac625de5a1415f2f8c91f3343}{sb}}.\mbox{\hyperlink{structsuperblock_a460268b28aced19797e8d7b84aa60ebf}{logstart}}, \mbox{\hyperlink{fs_8c_a0248d0bac625de5a1415f2f8c91f3343}{sb}}.\mbox{\hyperlink{structsuperblock_adde361528f3905445974301b424611c1}{inodestart}},}
\DoxyCodeLine{00185           \mbox{\hyperlink{fs_8c_a0248d0bac625de5a1415f2f8c91f3343}{sb}}.\mbox{\hyperlink{structsuperblock_a3c815dda5be6bda609389e76434171cc}{bmapstart}});}
\DoxyCodeLine{00186 \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_a301761a27cf266e0bad483272fb31a3c_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=192pt]{d5/d64/defs_8h_a301761a27cf266e0bad483272fb31a3c_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_a29a4d743d41fe659f74b0a57fdc25012}\label{defs_8h_a29a4d743d41fe659f74b0a57fdc25012}} 
\index{defs.h@{defs.h}!ilock@{ilock}}
\index{ilock@{ilock}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{ilock()}{ilock()}}
{\footnotesize\ttfamily void ilock (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structinode}{inode}} $\ast$}]{ip }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{fs_8c_source_l00288}{288}} of file \mbox{\hyperlink{fs_8c_source}{fs.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00289 \{}
\DoxyCodeLine{00290   \textcolor{keyword}{struct }\mbox{\hyperlink{structbuf}{buf}} *bp;}
\DoxyCodeLine{00291   \textcolor{keyword}{struct }\mbox{\hyperlink{structdinode}{dinode}} *dip;}
\DoxyCodeLine{00292 }
\DoxyCodeLine{00293   \textcolor{keywordflow}{if}(ip == 0 || ip-\/>\mbox{\hyperlink{structinode_a6a519028ee67f805482b3e1725bf09c5}{ref}} < 1)}
\DoxyCodeLine{00294     \mbox{\hyperlink{console_8c_a95c0aca5d6d7487933984f08b189917a}{panic}}(\textcolor{stringliteral}{"{}ilock"{}});}
\DoxyCodeLine{00295 }
\DoxyCodeLine{00296   \mbox{\hyperlink{defs_8h_aecd4639fe2f9aaad8e8cee2b5e0688c3}{acquiresleep}}(\&ip-\/>\mbox{\hyperlink{structinode_a46bad0e938fbd348ac02bdef0c8d6215}{lock}});}
\DoxyCodeLine{00297 }
\DoxyCodeLine{00298   \textcolor{keywordflow}{if}(ip-\/>\mbox{\hyperlink{structinode_aad324382ba30eb83daa5304fce7dca08}{valid}} == 0)\{}
\DoxyCodeLine{00299     bp = \mbox{\hyperlink{bio_8c_a30b8d2ef2300ed8e3d879a428fe39898}{bread}}(ip-\/>\mbox{\hyperlink{structinode_a121742a89c4531f03a7de1613d5be605}{dev}}, \mbox{\hyperlink{fs_8h_ac9a5b990015f0f86e5d4c6b21d38ffa0}{IBLOCK}}(ip-\/>\mbox{\hyperlink{structinode_a8acc2b9df0bfc6856da62925763db7fe}{inum}}, \mbox{\hyperlink{fs_8c_a0248d0bac625de5a1415f2f8c91f3343}{sb}}));}
\DoxyCodeLine{00300     dip = (\textcolor{keyword}{struct }\mbox{\hyperlink{structdinode}{dinode}}*)bp-\/>\mbox{\hyperlink{structbuf_ab0ec38784ab94ed35e575cf6d33912d2}{data}} + ip-\/>\mbox{\hyperlink{structinode_a8acc2b9df0bfc6856da62925763db7fe}{inum}}\%\mbox{\hyperlink{fs_8h_aadb6c866a6d0a173f5f0a6ed9c7e0228}{IPB}};}
\DoxyCodeLine{00301     ip-\/>\mbox{\hyperlink{structinode_a8d74bec2898785c057111c328d23fda2}{type}} = dip-\/>\mbox{\hyperlink{structdinode_abf6b2a8476a803284f1c927fb3b82259}{type}};}
\DoxyCodeLine{00302     ip-\/>\mbox{\hyperlink{structinode_a34af7242018a977dace5730683850875}{major}} = dip-\/>\mbox{\hyperlink{structdinode_aca8272002020f48219df175c986db257}{major}};}
\DoxyCodeLine{00303     ip-\/>\mbox{\hyperlink{structinode_a37878866e7905b666db2aa33076076a2}{minor}} = dip-\/>\mbox{\hyperlink{structdinode_ae97965f85e7353313f85035e8fc63495}{minor}};}
\DoxyCodeLine{00304     ip-\/>\mbox{\hyperlink{structinode_af8b88b409bea7ef99c49a55f387538b2}{nlink}} = dip-\/>\mbox{\hyperlink{structdinode_a105562253b461c11413c9a229ef15358}{nlink}};}
\DoxyCodeLine{00305     ip-\/>\mbox{\hyperlink{structinode_a918af769c48a8ca8afac057bf83d12de}{size}} = dip-\/>\mbox{\hyperlink{structdinode_a990ad8ddf5f8c051fbbe95cf550d2164}{size}};}
\DoxyCodeLine{00306     \mbox{\hyperlink{defs_8h_ac152fff34fe03e497d35b1d4c47f1445}{memmove}}(ip-\/>\mbox{\hyperlink{structinode_a7ba4ab7e52404b80d6d854678715ae30}{addrs}}, dip-\/>\mbox{\hyperlink{structdinode_a705729b3a39c10c0ba6927fc5e4e0563}{addrs}}, \textcolor{keyword}{sizeof}(ip-\/>\mbox{\hyperlink{structinode_a7ba4ab7e52404b80d6d854678715ae30}{addrs}}));}
\DoxyCodeLine{00307     \mbox{\hyperlink{bio_8c_ab5335aeb503731104314321a78a6d727}{brelse}}(bp);}
\DoxyCodeLine{00308     ip-\/>\mbox{\hyperlink{structinode_aad324382ba30eb83daa5304fce7dca08}{valid}} = 1;}
\DoxyCodeLine{00309     \textcolor{keywordflow}{if}(ip-\/>\mbox{\hyperlink{structinode_a8d74bec2898785c057111c328d23fda2}{type}} == 0)}
\DoxyCodeLine{00310       \mbox{\hyperlink{console_8c_a95c0aca5d6d7487933984f08b189917a}{panic}}(\textcolor{stringliteral}{"{}ilock: no type"{}});}
\DoxyCodeLine{00311   \}}
\DoxyCodeLine{00312 \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_a29a4d743d41fe659f74b0a57fdc25012_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_a29a4d743d41fe659f74b0a57fdc25012_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_ab56d728e6966819a0260c358d3ac3419}\label{defs_8h_ab56d728e6966819a0260c358d3ac3419}} 
\index{defs.h@{defs.h}!initlock@{initlock}}
\index{initlock@{initlock}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{initlock()}{initlock()}}
{\footnotesize\ttfamily void initlock (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structspinlock}{spinlock}} $\ast$}]{lk,  }\item[{char $\ast$}]{name }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{spinlock_8c_source_l00013}{13}} of file \mbox{\hyperlink{spinlock_8c_source}{spinlock.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00014 \{}
\DoxyCodeLine{00015   lk-\/>\mbox{\hyperlink{structspinlock_afbec3274bf8ad9c421695a22f8d9d584}{name}} = \mbox{\hyperlink{usertests_8c_aee754febd402311e2a552cb0d6ab6629}{name}};}
\DoxyCodeLine{00016   lk-\/>\mbox{\hyperlink{structspinlock_a48f3007579f644934d9aba91e5378c03}{locked}} = 0;}
\DoxyCodeLine{00017   lk-\/>\mbox{\hyperlink{structspinlock_a290ae772c8ccb9e8c1580204c31a7f88}{cpu}} = 0;}
\DoxyCodeLine{00018 \}}

\end{DoxyCode}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_ab56d728e6966819a0260c358d3ac3419_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_ad5e79aaefb91f41b9ef6aeae7ecf4708}\label{defs_8h_ad5e79aaefb91f41b9ef6aeae7ecf4708}} 
\index{defs.h@{defs.h}!initlog@{initlog}}
\index{initlog@{initlog}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{initlog()}{initlog()}}
{\footnotesize\ttfamily void initlog (\begin{DoxyParamCaption}\item[{int}]{dev }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{log_8c_source_l00054}{54}} of file \mbox{\hyperlink{log_8c_source}{log.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00055 \{}
\DoxyCodeLine{00056   \textcolor{keywordflow}{if} (\textcolor{keyword}{sizeof}(\textcolor{keyword}{struct} \mbox{\hyperlink{structlogheader}{logheader}}) >= \mbox{\hyperlink{fs_8h_a403cf3149c084cea115b85c90721039a}{BSIZE}})}
\DoxyCodeLine{00057     \mbox{\hyperlink{console_8c_a95c0aca5d6d7487933984f08b189917a}{panic}}(\textcolor{stringliteral}{"{}initlog: too big logheader"{}});}
\DoxyCodeLine{00058 }
\DoxyCodeLine{00059   \textcolor{keyword}{struct }\mbox{\hyperlink{structsuperblock}{superblock}} \mbox{\hyperlink{fs_8c_a0248d0bac625de5a1415f2f8c91f3343}{sb}};}
\DoxyCodeLine{00060   \mbox{\hyperlink{defs_8h_ab56d728e6966819a0260c358d3ac3419}{initlock}}(\&\mbox{\hyperlink{structlog}{log}}.\mbox{\hyperlink{structlog_a980a1d1aa9c60af7a82f297f8ab54d2e}{lock}}, \textcolor{stringliteral}{"{}log"{}});}
\DoxyCodeLine{00061   \mbox{\hyperlink{defs_8h_aff0080b2133027be2e525ca088b40e78}{readsb}}(dev, \&\mbox{\hyperlink{fs_8c_a0248d0bac625de5a1415f2f8c91f3343}{sb}});}
\DoxyCodeLine{00062   \mbox{\hyperlink{structlog}{log}}.\mbox{\hyperlink{structlog_a28d847dd722497fa3497b14f68267618}{start}} = \mbox{\hyperlink{fs_8c_a0248d0bac625de5a1415f2f8c91f3343}{sb}}.\mbox{\hyperlink{structsuperblock_a460268b28aced19797e8d7b84aa60ebf}{logstart}};}
\DoxyCodeLine{00063   \mbox{\hyperlink{structlog}{log}}.\mbox{\hyperlink{structlog_a2257e716d4b77efd0524286cf5772a41}{size}} = \mbox{\hyperlink{fs_8c_a0248d0bac625de5a1415f2f8c91f3343}{sb}}.\mbox{\hyperlink{structsuperblock_aea92ae872785fd4fb39b903d9157aac5}{nlog}};}
\DoxyCodeLine{00064   \mbox{\hyperlink{structlog}{log}}.\mbox{\hyperlink{structlog_aebeeb9df7326549fb5d8b7221c9b0aa3}{dev}} = dev;}
\DoxyCodeLine{00065   recover\_from\_log();}
\DoxyCodeLine{00066 \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_ad5e79aaefb91f41b9ef6aeae7ecf4708_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=202pt]{d5/d64/defs_8h_ad5e79aaefb91f41b9ef6aeae7ecf4708_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_af5ca8072e3877a883fb34ce59eff88cb}\label{defs_8h_af5ca8072e3877a883fb34ce59eff88cb}} 
\index{defs.h@{defs.h}!initsleeplock@{initsleeplock}}
\index{initsleeplock@{initsleeplock}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{initsleeplock()}{initsleeplock()}}
{\footnotesize\ttfamily void initsleeplock (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structsleeplock}{sleeplock}} $\ast$}]{lk,  }\item[{char $\ast$}]{name }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{sleeplock_8c_source_l00014}{14}} of file \mbox{\hyperlink{sleeplock_8c_source}{sleeplock.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00015 \{}
\DoxyCodeLine{00016   \mbox{\hyperlink{defs_8h_ab56d728e6966819a0260c358d3ac3419}{initlock}}(\&lk-\/>\mbox{\hyperlink{structsleeplock_a077241ea0e720d228d853208444c4c9d}{lk}}, \textcolor{stringliteral}{"{}sleep lock"{}});}
\DoxyCodeLine{00017   lk-\/>\mbox{\hyperlink{structsleeplock_a40f1db61da688063cd5ac4f72d839590}{name}} = \mbox{\hyperlink{usertests_8c_aee754febd402311e2a552cb0d6ab6629}{name}};}
\DoxyCodeLine{00018   lk-\/>\mbox{\hyperlink{structsleeplock_ac5cfe608994a41b24cb1c0fd722910c3}{locked}} = 0;}
\DoxyCodeLine{00019   lk-\/>\mbox{\hyperlink{structsleeplock_a99a4c6a784956ab1c391a12af475a55e}{pid}} = 0;}
\DoxyCodeLine{00020 \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=234pt]{d5/d64/defs_8h_af5ca8072e3877a883fb34ce59eff88cb_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=302pt]{d5/d64/defs_8h_af5ca8072e3877a883fb34ce59eff88cb_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_a7b3410bde4005e848e1748f2b0f0a084}\label{defs_8h_a7b3410bde4005e848e1748f2b0f0a084}} 
\index{defs.h@{defs.h}!inituvm@{inituvm}}
\index{inituvm@{inituvm}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{inituvm()}{inituvm()}}
{\footnotesize\ttfamily void inituvm (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{types_8h_ac131849542282b2c95dfeaf1f26dc010}{pde\+\_\+t}} $\ast$}]{pgdir,  }\item[{char $\ast$}]{init,  }\item[{\mbox{\hyperlink{types_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}}}]{sz }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{vm_8c_source_l00183}{183}} of file \mbox{\hyperlink{vm_8c_source}{vm.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00184 \{}
\DoxyCodeLine{00185   \textcolor{keywordtype}{char} *\mbox{\hyperlink{usertests_8c_aa1c6e6e76813ccb29a29bb119dba668a}{mem}};}
\DoxyCodeLine{00186 }
\DoxyCodeLine{00187   \textcolor{keywordflow}{if}(sz >= \mbox{\hyperlink{mmu_8h_a5f96cb6ae6670e023c407cc2f77e1704}{PGSIZE}})}
\DoxyCodeLine{00188     \mbox{\hyperlink{console_8c_a95c0aca5d6d7487933984f08b189917a}{panic}}(\textcolor{stringliteral}{"{}inituvm: more than a page"{}});}
\DoxyCodeLine{00189   \mbox{\hyperlink{usertests_8c_aa1c6e6e76813ccb29a29bb119dba668a}{mem}} = \mbox{\hyperlink{defs_8h_a5e965f6365c721b5b23c12d16d45c3dc}{kalloc}}();}
\DoxyCodeLine{00190   \mbox{\hyperlink{defs_8h_a0098886a849eef10803e9f35ceec61b9}{memset}}(\mbox{\hyperlink{usertests_8c_aa1c6e6e76813ccb29a29bb119dba668a}{mem}}, 0, \mbox{\hyperlink{mmu_8h_a5f96cb6ae6670e023c407cc2f77e1704}{PGSIZE}});}
\DoxyCodeLine{00191   mappages(pgdir, 0, \mbox{\hyperlink{mmu_8h_a5f96cb6ae6670e023c407cc2f77e1704}{PGSIZE}}, \mbox{\hyperlink{memlayout_8h_a5021188bc7da1304f27e913aee183407}{V2P}}(\mbox{\hyperlink{usertests_8c_aa1c6e6e76813ccb29a29bb119dba668a}{mem}}), \mbox{\hyperlink{mmu_8h_a058fcbcc3e1eab2c09c68b3e5221c545}{PTE\_W}}|\mbox{\hyperlink{mmu_8h_adced9836a1dc98d72849361e6ab03cda}{PTE\_U}});}
\DoxyCodeLine{00192   \mbox{\hyperlink{defs_8h_ac152fff34fe03e497d35b1d4c47f1445}{memmove}}(\mbox{\hyperlink{usertests_8c_aa1c6e6e76813ccb29a29bb119dba668a}{mem}}, init, sz);}
\DoxyCodeLine{00193 \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_a7b3410bde4005e848e1748f2b0f0a084_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=212pt]{d5/d64/defs_8h_a7b3410bde4005e848e1748f2b0f0a084_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_a63da75c0c2f0b051f2c790aea2116b63}\label{defs_8h_a63da75c0c2f0b051f2c790aea2116b63}} 
\index{defs.h@{defs.h}!ioapicenable@{ioapicenable}}
\index{ioapicenable@{ioapicenable}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{ioapicenable()}{ioapicenable()}}
{\footnotesize\ttfamily void ioapicenable (\begin{DoxyParamCaption}\item[{int}]{irq,  }\item[{int}]{cpu }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{ioapic_8c_source_l00068}{68}} of file \mbox{\hyperlink{ioapic_8c_source}{ioapic.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00069 \{}
\DoxyCodeLine{00070   \textcolor{comment}{// Mark interrupt edge-\/triggered, active high,}}
\DoxyCodeLine{00071   \textcolor{comment}{// enabled, and routed to the given cpunum,}}
\DoxyCodeLine{00072   \textcolor{comment}{// which happens to be that cpu's APIC ID.}}
\DoxyCodeLine{00073   ioapicwrite(\mbox{\hyperlink{ioapic_8c_ad31b206e97e5e8cc5c70f8713669b27f}{REG\_TABLE}}+2*irq, \mbox{\hyperlink{traps_8h_a17129100154901eb81be6e438843a0e1}{T\_IRQ0}} + irq);}
\DoxyCodeLine{00074   ioapicwrite(\mbox{\hyperlink{ioapic_8c_ad31b206e97e5e8cc5c70f8713669b27f}{REG\_TABLE}}+2*irq+1, cpunum << 24);}
\DoxyCodeLine{00075 \}}

\end{DoxyCode}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=250pt]{d5/d64/defs_8h_a63da75c0c2f0b051f2c790aea2116b63_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_abce023b98422f397abdb425b20c8ceec}\label{defs_8h_abce023b98422f397abdb425b20c8ceec}} 
\index{defs.h@{defs.h}!ioapicinit@{ioapicinit}}
\index{ioapicinit@{ioapicinit}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{ioapicinit()}{ioapicinit()}}
{\footnotesize\ttfamily void ioapicinit (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{ioapic_8c_source_l00049}{49}} of file \mbox{\hyperlink{ioapic_8c_source}{ioapic.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00050 \{}
\DoxyCodeLine{00051   \textcolor{keywordtype}{int} i, id, maxintr;}
\DoxyCodeLine{00052 }
\DoxyCodeLine{00053   \mbox{\hyperlink{structioapic}{ioapic}} = (\textcolor{keyword}{volatile} \textcolor{keyword}{struct }\mbox{\hyperlink{structioapic}{ioapic}}*)\mbox{\hyperlink{ioapic_8c_a7d40119d2e49f7d8ae65520ccad99a1e}{IOAPIC}};}
\DoxyCodeLine{00054   maxintr = (ioapicread(\mbox{\hyperlink{ioapic_8c_ac56cc95ec46071699b119b24d6d808f9}{REG\_VER}}) >> 16) \& 0xFF;}
\DoxyCodeLine{00055   \textcolor{keywordtype}{id} = ioapicread(\mbox{\hyperlink{ioapic_8c_a91339a8293cb53b81407c016bc41e2b1}{REG\_ID}}) >> 24;}
\DoxyCodeLine{00056   \textcolor{keywordflow}{if}(\textcolor{keywordtype}{id} != \mbox{\hyperlink{defs_8h_a619ae379337e3cb2397ee0b6b4fd8d6b}{ioapicid}})}
\DoxyCodeLine{00057     \mbox{\hyperlink{console_8c_a90f0742d846503e4ed1804f1df421ec6}{cprintf}}(\textcolor{stringliteral}{"{}ioapicinit: id isn't equal to ioapicid; not a MP\(\backslash\)n"{}});}
\DoxyCodeLine{00058 }
\DoxyCodeLine{00059   \textcolor{comment}{// Mark all interrupts edge-\/triggered, active high, disabled,}}
\DoxyCodeLine{00060   \textcolor{comment}{// and not routed to any CPUs.}}
\DoxyCodeLine{00061   \textcolor{keywordflow}{for}(i = 0; i <= maxintr; i++)\{}
\DoxyCodeLine{00062     ioapicwrite(\mbox{\hyperlink{ioapic_8c_ad31b206e97e5e8cc5c70f8713669b27f}{REG\_TABLE}}+2*i, \mbox{\hyperlink{ioapic_8c_ab26e186261a82b907e024126fafbff1f}{INT\_DISABLED}} | (\mbox{\hyperlink{traps_8h_a17129100154901eb81be6e438843a0e1}{T\_IRQ0}} + i));}
\DoxyCodeLine{00063     ioapicwrite(\mbox{\hyperlink{ioapic_8c_ad31b206e97e5e8cc5c70f8713669b27f}{REG\_TABLE}}+2*i+1, 0);}
\DoxyCodeLine{00064   \}}
\DoxyCodeLine{00065 \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_abce023b98422f397abdb425b20c8ceec_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_a29530a0afdfe924818d8c70b6724528d}\label{defs_8h_a29530a0afdfe924818d8c70b6724528d}} 
\index{defs.h@{defs.h}!iput@{iput}}
\index{iput@{iput}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{iput()}{iput()}}
{\footnotesize\ttfamily void iput (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structinode}{inode}} $\ast$}]{ip }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{fs_8c_source_l00332}{332}} of file \mbox{\hyperlink{fs_8c_source}{fs.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00333 \{}
\DoxyCodeLine{00334   \mbox{\hyperlink{defs_8h_aecd4639fe2f9aaad8e8cee2b5e0688c3}{acquiresleep}}(\&ip-\/>\mbox{\hyperlink{structinode_a46bad0e938fbd348ac02bdef0c8d6215}{lock}});}
\DoxyCodeLine{00335   \textcolor{keywordflow}{if}(ip-\/>\mbox{\hyperlink{structinode_aad324382ba30eb83daa5304fce7dca08}{valid}} \&\& ip-\/>\mbox{\hyperlink{structinode_af8b88b409bea7ef99c49a55f387538b2}{nlink}} == 0)\{}
\DoxyCodeLine{00336     \mbox{\hyperlink{defs_8h_afe4ef8638f1ecb962a6e67fb086ee3b8}{acquire}}(\&\mbox{\hyperlink{fs_8c_a5a78db4f7c856337d906f0606b19bff5}{icache}}.lock);}
\DoxyCodeLine{00337     \textcolor{keywordtype}{int} \mbox{\hyperlink{console_8c_af10fa12dd785c91e29528fbdc50cf9af}{r}} = ip-\/>\mbox{\hyperlink{structinode_a6a519028ee67f805482b3e1725bf09c5}{ref}};}
\DoxyCodeLine{00338     \mbox{\hyperlink{defs_8h_a4f8616948f3dbce65671f666eed1d669}{release}}(\&\mbox{\hyperlink{fs_8c_a5a78db4f7c856337d906f0606b19bff5}{icache}}.lock);}
\DoxyCodeLine{00339     \textcolor{keywordflow}{if}(\mbox{\hyperlink{console_8c_af10fa12dd785c91e29528fbdc50cf9af}{r}} == 1)\{}
\DoxyCodeLine{00340       \textcolor{comment}{// inode has no links and no other references: truncate and free.}}
\DoxyCodeLine{00341       itrunc(ip);}
\DoxyCodeLine{00342       ip-\/>\mbox{\hyperlink{structinode_a8d74bec2898785c057111c328d23fda2}{type}} = 0;}
\DoxyCodeLine{00343       \mbox{\hyperlink{fs_8c_a7220afa8e5f4bea540eb95879ea7df6e}{iupdate}}(ip);}
\DoxyCodeLine{00344       ip-\/>\mbox{\hyperlink{structinode_aad324382ba30eb83daa5304fce7dca08}{valid}} = 0;}
\DoxyCodeLine{00345     \}}
\DoxyCodeLine{00346   \}}
\DoxyCodeLine{00347   \mbox{\hyperlink{defs_8h_a840b479c87b1c047d7142f58e0ad0b27}{releasesleep}}(\&ip-\/>\mbox{\hyperlink{structinode_a46bad0e938fbd348ac02bdef0c8d6215}{lock}});}
\DoxyCodeLine{00348 }
\DoxyCodeLine{00349   \mbox{\hyperlink{defs_8h_afe4ef8638f1ecb962a6e67fb086ee3b8}{acquire}}(\&\mbox{\hyperlink{fs_8c_a5a78db4f7c856337d906f0606b19bff5}{icache}}.lock);}
\DoxyCodeLine{00350   ip-\/>\mbox{\hyperlink{structinode_a6a519028ee67f805482b3e1725bf09c5}{ref}}-\/-\/;}
\DoxyCodeLine{00351   \mbox{\hyperlink{defs_8h_a4f8616948f3dbce65671f666eed1d669}{release}}(\&\mbox{\hyperlink{fs_8c_a5a78db4f7c856337d906f0606b19bff5}{icache}}.lock);}
\DoxyCodeLine{00352 \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_a29530a0afdfe924818d8c70b6724528d_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=550pt]{d5/d64/defs_8h_a29530a0afdfe924818d8c70b6724528d_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_af301c10ad8ced77a5dfb2de3a64c666c}\label{defs_8h_af301c10ad8ced77a5dfb2de3a64c666c}} 
\index{defs.h@{defs.h}!iunlock@{iunlock}}
\index{iunlock@{iunlock}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{iunlock()}{iunlock()}}
{\footnotesize\ttfamily void iunlock (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structinode}{inode}} $\ast$}]{ip }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{fs_8c_source_l00316}{316}} of file \mbox{\hyperlink{fs_8c_source}{fs.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00317 \{}
\DoxyCodeLine{00318   \textcolor{keywordflow}{if}(ip == 0 || !\mbox{\hyperlink{defs_8h_afa76133bc67c6026376d630da9b53b68}{holdingsleep}}(\&ip-\/>\mbox{\hyperlink{structinode_a46bad0e938fbd348ac02bdef0c8d6215}{lock}}) || ip-\/>\mbox{\hyperlink{structinode_a6a519028ee67f805482b3e1725bf09c5}{ref}} < 1)}
\DoxyCodeLine{00319     \mbox{\hyperlink{console_8c_a95c0aca5d6d7487933984f08b189917a}{panic}}(\textcolor{stringliteral}{"{}iunlock"{}});}
\DoxyCodeLine{00320 }
\DoxyCodeLine{00321   \mbox{\hyperlink{defs_8h_a840b479c87b1c047d7142f58e0ad0b27}{releasesleep}}(\&ip-\/>\mbox{\hyperlink{structinode_a46bad0e938fbd348ac02bdef0c8d6215}{lock}});}
\DoxyCodeLine{00322 \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_af301c10ad8ced77a5dfb2de3a64c666c_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_af301c10ad8ced77a5dfb2de3a64c666c_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_adff5bb5a1eeaf921853ec06479f8c49b}\label{defs_8h_adff5bb5a1eeaf921853ec06479f8c49b}} 
\index{defs.h@{defs.h}!iunlockput@{iunlockput}}
\index{iunlockput@{iunlockput}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{iunlockput()}{iunlockput()}}
{\footnotesize\ttfamily void iunlockput (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structinode}{inode}} $\ast$}]{ip }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{fs_8c_source_l00356}{356}} of file \mbox{\hyperlink{fs_8c_source}{fs.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00357 \{}
\DoxyCodeLine{00358   \mbox{\hyperlink{fs_8c_ae4e29916219b9293b37f9c34220694fe}{iunlock}}(ip);}
\DoxyCodeLine{00359   \mbox{\hyperlink{fs_8c_ab3c447f135c68e4c3c1f8d5866f6e77b}{iput}}(ip);}
\DoxyCodeLine{00360 \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_adff5bb5a1eeaf921853ec06479f8c49b_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_adff5bb5a1eeaf921853ec06479f8c49b_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_a2ee6784c123b2a2656d88b5b357f2253}\label{defs_8h_a2ee6784c123b2a2656d88b5b357f2253}} 
\index{defs.h@{defs.h}!iupdate@{iupdate}}
\index{iupdate@{iupdate}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{iupdate()}{iupdate()}}
{\footnotesize\ttfamily void iupdate (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structinode}{inode}} $\ast$}]{ip }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{fs_8c_source_l00221}{221}} of file \mbox{\hyperlink{fs_8c_source}{fs.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00222 \{}
\DoxyCodeLine{00223   \textcolor{keyword}{struct }\mbox{\hyperlink{structbuf}{buf}} *bp;}
\DoxyCodeLine{00224   \textcolor{keyword}{struct }\mbox{\hyperlink{structdinode}{dinode}} *dip;}
\DoxyCodeLine{00225 }
\DoxyCodeLine{00226   bp = \mbox{\hyperlink{bio_8c_a30b8d2ef2300ed8e3d879a428fe39898}{bread}}(ip-\/>\mbox{\hyperlink{structinode_a121742a89c4531f03a7de1613d5be605}{dev}}, \mbox{\hyperlink{fs_8h_ac9a5b990015f0f86e5d4c6b21d38ffa0}{IBLOCK}}(ip-\/>\mbox{\hyperlink{structinode_a8acc2b9df0bfc6856da62925763db7fe}{inum}}, \mbox{\hyperlink{fs_8c_a0248d0bac625de5a1415f2f8c91f3343}{sb}}));}
\DoxyCodeLine{00227   dip = (\textcolor{keyword}{struct }\mbox{\hyperlink{structdinode}{dinode}}*)bp-\/>\mbox{\hyperlink{structbuf_ab0ec38784ab94ed35e575cf6d33912d2}{data}} + ip-\/>\mbox{\hyperlink{structinode_a8acc2b9df0bfc6856da62925763db7fe}{inum}}\%\mbox{\hyperlink{fs_8h_aadb6c866a6d0a173f5f0a6ed9c7e0228}{IPB}};}
\DoxyCodeLine{00228   dip-\/>\mbox{\hyperlink{structdinode_abf6b2a8476a803284f1c927fb3b82259}{type}} = ip-\/>\mbox{\hyperlink{structinode_a8d74bec2898785c057111c328d23fda2}{type}};}
\DoxyCodeLine{00229   dip-\/>\mbox{\hyperlink{structdinode_aca8272002020f48219df175c986db257}{major}} = ip-\/>\mbox{\hyperlink{structinode_a34af7242018a977dace5730683850875}{major}};}
\DoxyCodeLine{00230   dip-\/>\mbox{\hyperlink{structdinode_ae97965f85e7353313f85035e8fc63495}{minor}} = ip-\/>\mbox{\hyperlink{structinode_a37878866e7905b666db2aa33076076a2}{minor}};}
\DoxyCodeLine{00231   dip-\/>\mbox{\hyperlink{structdinode_a105562253b461c11413c9a229ef15358}{nlink}} = ip-\/>\mbox{\hyperlink{structinode_af8b88b409bea7ef99c49a55f387538b2}{nlink}};}
\DoxyCodeLine{00232   dip-\/>\mbox{\hyperlink{structdinode_a990ad8ddf5f8c051fbbe95cf550d2164}{size}} = ip-\/>\mbox{\hyperlink{structinode_a918af769c48a8ca8afac057bf83d12de}{size}};}
\DoxyCodeLine{00233   \mbox{\hyperlink{defs_8h_ac152fff34fe03e497d35b1d4c47f1445}{memmove}}(dip-\/>\mbox{\hyperlink{structdinode_a705729b3a39c10c0ba6927fc5e4e0563}{addrs}}, ip-\/>\mbox{\hyperlink{structinode_a7ba4ab7e52404b80d6d854678715ae30}{addrs}}, \textcolor{keyword}{sizeof}(ip-\/>\mbox{\hyperlink{structinode_a7ba4ab7e52404b80d6d854678715ae30}{addrs}}));}
\DoxyCodeLine{00234   \mbox{\hyperlink{defs_8h_a270d0050dc50965f4f851717841ad33c}{log\_write}}(bp);}
\DoxyCodeLine{00235   \mbox{\hyperlink{bio_8c_ab5335aeb503731104314321a78a6d727}{brelse}}(bp);}
\DoxyCodeLine{00236 \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_a2ee6784c123b2a2656d88b5b357f2253_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=550pt]{d5/d64/defs_8h_a2ee6784c123b2a2656d88b5b357f2253_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_a5e965f6365c721b5b23c12d16d45c3dc}\label{defs_8h_a5e965f6365c721b5b23c12d16d45c3dc}} 
\index{defs.h@{defs.h}!kalloc@{kalloc}}
\index{kalloc@{kalloc}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{kalloc()}{kalloc()}}
{\footnotesize\ttfamily char $\ast$ kalloc (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{kalloc_8c_source_l00083}{83}} of file \mbox{\hyperlink{kalloc_8c_source}{kalloc.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00084 \{}
\DoxyCodeLine{00085   \textcolor{keyword}{struct }\mbox{\hyperlink{structrun}{run}} *\mbox{\hyperlink{console_8c_af10fa12dd785c91e29528fbdc50cf9af}{r}};}
\DoxyCodeLine{00086 }
\DoxyCodeLine{00087   \textcolor{keywordflow}{if}(\mbox{\hyperlink{kalloc_8c_a1580ee3446c9d9d159d9b57ec68b66c5}{kmem}}.use\_lock)}
\DoxyCodeLine{00088     \mbox{\hyperlink{defs_8h_afe4ef8638f1ecb962a6e67fb086ee3b8}{acquire}}(\&\mbox{\hyperlink{kalloc_8c_a1580ee3446c9d9d159d9b57ec68b66c5}{kmem}}.lock);}
\DoxyCodeLine{00089   \mbox{\hyperlink{console_8c_af10fa12dd785c91e29528fbdc50cf9af}{r}} = \mbox{\hyperlink{kalloc_8c_a1580ee3446c9d9d159d9b57ec68b66c5}{kmem}}.freelist;}
\DoxyCodeLine{00090   \textcolor{keywordflow}{if}(\mbox{\hyperlink{console_8c_af10fa12dd785c91e29528fbdc50cf9af}{r}})}
\DoxyCodeLine{00091     \mbox{\hyperlink{kalloc_8c_a1580ee3446c9d9d159d9b57ec68b66c5}{kmem}}.freelist = \mbox{\hyperlink{console_8c_af10fa12dd785c91e29528fbdc50cf9af}{r}}-\/>next;}
\DoxyCodeLine{00092   \textcolor{keywordflow}{if}(\mbox{\hyperlink{kalloc_8c_a1580ee3446c9d9d159d9b57ec68b66c5}{kmem}}.use\_lock)}
\DoxyCodeLine{00093     \mbox{\hyperlink{defs_8h_a4f8616948f3dbce65671f666eed1d669}{release}}(\&\mbox{\hyperlink{kalloc_8c_a1580ee3446c9d9d159d9b57ec68b66c5}{kmem}}.lock);}
\DoxyCodeLine{00094   \textcolor{keywordflow}{return} (\textcolor{keywordtype}{char}*)\mbox{\hyperlink{console_8c_af10fa12dd785c91e29528fbdc50cf9af}{r}};}
\DoxyCodeLine{00095 \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_a5e965f6365c721b5b23c12d16d45c3dc_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_a5e965f6365c721b5b23c12d16d45c3dc_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_af3d6113fa152781400e1e0e728c55e54}\label{defs_8h_af3d6113fa152781400e1e0e728c55e54}} 
\index{defs.h@{defs.h}!kbdintr@{kbdintr}}
\index{kbdintr@{kbdintr}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{kbdintr()}{kbdintr()}}
{\footnotesize\ttfamily void kbdintr (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{kbd_8c_source_l00047}{47}} of file \mbox{\hyperlink{kbd_8c_source}{kbd.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00048 \{}
\DoxyCodeLine{00049   \mbox{\hyperlink{console_8c_aad3d6ca39f23bb6d2686d2967e415193}{consoleintr}}(\mbox{\hyperlink{kbd_8c_ae0e5224d52563340db794138daec14ca}{kbdgetc}});}
\DoxyCodeLine{00050 \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_af3d6113fa152781400e1e0e728c55e54_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=195pt]{d5/d64/defs_8h_af3d6113fa152781400e1e0e728c55e54_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_ae79d6a7d0901b7c081cfded3f916d5bd}\label{defs_8h_ae79d6a7d0901b7c081cfded3f916d5bd}} 
\index{defs.h@{defs.h}!kfree@{kfree}}
\index{kfree@{kfree}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{kfree()}{kfree()}}
{\footnotesize\ttfamily void kfree (\begin{DoxyParamCaption}\item[{char $\ast$}]{v }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{kalloc_8c_source_l00060}{60}} of file \mbox{\hyperlink{kalloc_8c_source}{kalloc.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00061 \{}
\DoxyCodeLine{00062   \textcolor{keyword}{struct }\mbox{\hyperlink{structrun}{run}} *\mbox{\hyperlink{console_8c_af10fa12dd785c91e29528fbdc50cf9af}{r}};}
\DoxyCodeLine{00063 }
\DoxyCodeLine{00064   \textcolor{keywordflow}{if}((\mbox{\hyperlink{types_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}})v \% \mbox{\hyperlink{mmu_8h_a5f96cb6ae6670e023c407cc2f77e1704}{PGSIZE}} || v < \mbox{\hyperlink{kalloc_8c_af4f810c521bcfd87215d3007005a8325}{end}} || \mbox{\hyperlink{memlayout_8h_a5021188bc7da1304f27e913aee183407}{V2P}}(v) >= \mbox{\hyperlink{memlayout_8h_ad3c557a115f7d82d9ef849846779531c}{PHYSTOP}})}
\DoxyCodeLine{00065     \mbox{\hyperlink{console_8c_a95c0aca5d6d7487933984f08b189917a}{panic}}(\textcolor{stringliteral}{"{}kfree"{}});}
\DoxyCodeLine{00066 }
\DoxyCodeLine{00067   \textcolor{comment}{// Fill with junk to catch dangling refs.}}
\DoxyCodeLine{00068   \mbox{\hyperlink{defs_8h_a0098886a849eef10803e9f35ceec61b9}{memset}}(v, 1, \mbox{\hyperlink{mmu_8h_a5f96cb6ae6670e023c407cc2f77e1704}{PGSIZE}});}
\DoxyCodeLine{00069 }
\DoxyCodeLine{00070   \textcolor{keywordflow}{if}(\mbox{\hyperlink{kalloc_8c_a1580ee3446c9d9d159d9b57ec68b66c5}{kmem}}.use\_lock)}
\DoxyCodeLine{00071     \mbox{\hyperlink{defs_8h_afe4ef8638f1ecb962a6e67fb086ee3b8}{acquire}}(\&\mbox{\hyperlink{kalloc_8c_a1580ee3446c9d9d159d9b57ec68b66c5}{kmem}}.lock);}
\DoxyCodeLine{00072   \mbox{\hyperlink{console_8c_af10fa12dd785c91e29528fbdc50cf9af}{r}} = (\textcolor{keyword}{struct }\mbox{\hyperlink{structrun}{run}}*)v;}
\DoxyCodeLine{00073   \mbox{\hyperlink{console_8c_af10fa12dd785c91e29528fbdc50cf9af}{r}}-\/>next = \mbox{\hyperlink{kalloc_8c_a1580ee3446c9d9d159d9b57ec68b66c5}{kmem}}.freelist;}
\DoxyCodeLine{00074   \mbox{\hyperlink{kalloc_8c_a1580ee3446c9d9d159d9b57ec68b66c5}{kmem}}.freelist = \mbox{\hyperlink{console_8c_af10fa12dd785c91e29528fbdc50cf9af}{r}};}
\DoxyCodeLine{00075   \textcolor{keywordflow}{if}(\mbox{\hyperlink{kalloc_8c_a1580ee3446c9d9d159d9b57ec68b66c5}{kmem}}.use\_lock)}
\DoxyCodeLine{00076     \mbox{\hyperlink{defs_8h_a4f8616948f3dbce65671f666eed1d669}{release}}(\&\mbox{\hyperlink{kalloc_8c_a1580ee3446c9d9d159d9b57ec68b66c5}{kmem}}.lock);}
\DoxyCodeLine{00077 \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_ae79d6a7d0901b7c081cfded3f916d5bd_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_ae79d6a7d0901b7c081cfded3f916d5bd_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_ab893e9671d6bfe2b2604002a50639f21}\label{defs_8h_ab893e9671d6bfe2b2604002a50639f21}} 
\index{defs.h@{defs.h}!kill@{kill}}
\index{kill@{kill}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{kill()}{kill()}}
{\footnotesize\ttfamily int kill (\begin{DoxyParamCaption}\item[{int}]{pid }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{proc_8c_source_l00480}{480}} of file \mbox{\hyperlink{proc_8c_source}{proc.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00481 \{}
\DoxyCodeLine{00482   \textcolor{keyword}{struct }\mbox{\hyperlink{structproc}{proc}} *p;}
\DoxyCodeLine{00483 }
\DoxyCodeLine{00484   \mbox{\hyperlink{defs_8h_afe4ef8638f1ecb962a6e67fb086ee3b8}{acquire}}(\&\mbox{\hyperlink{proc_8c_addf39d613ca9a58e7e6080a2e454421a}{ptable}}.lock);}
\DoxyCodeLine{00485   \textcolor{keywordflow}{for}(p = \mbox{\hyperlink{proc_8c_addf39d613ca9a58e7e6080a2e454421a}{ptable}}.proc; p < \&\mbox{\hyperlink{proc_8c_addf39d613ca9a58e7e6080a2e454421a}{ptable}}.proc[\mbox{\hyperlink{param_8h_a810c5b751df5bb30588613ed91095129}{NPROC}}]; p++)\{}
\DoxyCodeLine{00486     \textcolor{keywordflow}{if}(p-\/>\mbox{\hyperlink{structproc_acf2bdf54d1f957ccbcdc987007029944}{pid}} == \mbox{\hyperlink{structproc_acf2bdf54d1f957ccbcdc987007029944}{pid}})\{}
\DoxyCodeLine{00487       p-\/>\mbox{\hyperlink{structproc_afb4f94a3f4df9a835dbb41b0c26660a4}{killed}} = 1;}
\DoxyCodeLine{00488       \textcolor{comment}{// Wake process from sleep if necessary.}}
\DoxyCodeLine{00489       \textcolor{keywordflow}{if}(p-\/>\mbox{\hyperlink{structproc_a0f2fe91548a1382672ae26e29ca9e736}{state}} == \mbox{\hyperlink{proc_8h_aa1ced7d2b60040fded3fa873d0c03ba7a488282601451a751e0f0e770b15d4235}{SLEEPING}})}
\DoxyCodeLine{00490         p-\/>\mbox{\hyperlink{structproc_a0f2fe91548a1382672ae26e29ca9e736}{state}} = \mbox{\hyperlink{proc_8h_aa1ced7d2b60040fded3fa873d0c03ba7a269b90433e40460a2c0044a0b3e15694}{RUNNABLE}};}
\DoxyCodeLine{00491       \mbox{\hyperlink{defs_8h_a4f8616948f3dbce65671f666eed1d669}{release}}(\&\mbox{\hyperlink{proc_8c_addf39d613ca9a58e7e6080a2e454421a}{ptable}}.lock);}
\DoxyCodeLine{00492       \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{00493     \}}
\DoxyCodeLine{00494   \}}
\DoxyCodeLine{00495   \mbox{\hyperlink{defs_8h_a4f8616948f3dbce65671f666eed1d669}{release}}(\&\mbox{\hyperlink{proc_8c_addf39d613ca9a58e7e6080a2e454421a}{ptable}}.lock);}
\DoxyCodeLine{00496   \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{00497 \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_ab893e9671d6bfe2b2604002a50639f21_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_ab893e9671d6bfe2b2604002a50639f21_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_abc7a6a8cb3bcde83697a0c9a61d22d4d}\label{defs_8h_abc7a6a8cb3bcde83697a0c9a61d22d4d}} 
\index{defs.h@{defs.h}!kinit1@{kinit1}}
\index{kinit1@{kinit1}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{kinit1()}{kinit1()}}
{\footnotesize\ttfamily void kinit1 (\begin{DoxyParamCaption}\item[{void $\ast$}]{vstart,  }\item[{void $\ast$}]{vend }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{kalloc_8c_source_l00032}{32}} of file \mbox{\hyperlink{kalloc_8c_source}{kalloc.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00033 \{}
\DoxyCodeLine{00034   \mbox{\hyperlink{defs_8h_ab56d728e6966819a0260c358d3ac3419}{initlock}}(\&\mbox{\hyperlink{kalloc_8c_a1580ee3446c9d9d159d9b57ec68b66c5}{kmem}}.lock, \textcolor{stringliteral}{"{}kmem"{}});}
\DoxyCodeLine{00035   \mbox{\hyperlink{kalloc_8c_a1580ee3446c9d9d159d9b57ec68b66c5}{kmem}}.use\_lock = 0;}
\DoxyCodeLine{00036   \mbox{\hyperlink{kalloc_8c_adeb1e621acdd949dffd5a054a43d1d89}{freerange}}(vstart, vend);}
\DoxyCodeLine{00037 \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_abc7a6a8cb3bcde83697a0c9a61d22d4d_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_aeb265df0f4968b40d175d9e3030d737c}\label{defs_8h_aeb265df0f4968b40d175d9e3030d737c}} 
\index{defs.h@{defs.h}!kinit2@{kinit2}}
\index{kinit2@{kinit2}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{kinit2()}{kinit2()}}
{\footnotesize\ttfamily void kinit2 (\begin{DoxyParamCaption}\item[{void $\ast$}]{vstart,  }\item[{void $\ast$}]{vend }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{kalloc_8c_source_l00040}{40}} of file \mbox{\hyperlink{kalloc_8c_source}{kalloc.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00041 \{}
\DoxyCodeLine{00042   \mbox{\hyperlink{kalloc_8c_adeb1e621acdd949dffd5a054a43d1d89}{freerange}}(vstart, vend);}
\DoxyCodeLine{00043   \mbox{\hyperlink{kalloc_8c_a1580ee3446c9d9d159d9b57ec68b66c5}{kmem}}.use\_lock = 1;}
\DoxyCodeLine{00044 \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_aeb265df0f4968b40d175d9e3030d737c_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_a893bf6891e427f310b43981bf8e737ea}\label{defs_8h_a893bf6891e427f310b43981bf8e737ea}} 
\index{defs.h@{defs.h}!kvmalloc@{kvmalloc}}
\index{kvmalloc@{kvmalloc}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{kvmalloc()}{kvmalloc()}}
{\footnotesize\ttfamily void kvmalloc (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{vm_8c_source_l00141}{141}} of file \mbox{\hyperlink{vm_8c_source}{vm.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00142 \{}
\DoxyCodeLine{00143   \mbox{\hyperlink{vm_8c_aff01f9f000432fd4171b7edee6c85855}{kpgdir}} = \mbox{\hyperlink{vm_8c_a1c8a7a02e9391b5cf0984388216695c0}{setupkvm}}();}
\DoxyCodeLine{00144   \mbox{\hyperlink{vm_8c_a02ca0670bc1fe12e38453082631ff360}{switchkvm}}();}
\DoxyCodeLine{00145 \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_a893bf6891e427f310b43981bf8e737ea_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_a42fdd0783bbeb7cdc646d360191cdcac}\label{defs_8h_a42fdd0783bbeb7cdc646d360191cdcac}} 
\index{defs.h@{defs.h}!lapiceoi@{lapiceoi}}
\index{lapiceoi@{lapiceoi}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{lapiceoi()}{lapiceoi()}}
{\footnotesize\ttfamily void lapiceoi (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{lapic_8c_source_l00110}{110}} of file \mbox{\hyperlink{lapic_8c_source}{lapic.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00111 \{}
\DoxyCodeLine{00112   \textcolor{keywordflow}{if}(\mbox{\hyperlink{lapic_8c_a4029f3e2439d5912f93543b8addd10ec}{lapic}})}
\DoxyCodeLine{00113     lapicw(\mbox{\hyperlink{lapic_8c_a04c9015da7e7ea45f3b80793809e2d7b}{EOI}}, 0);}
\DoxyCodeLine{00114 \}}

\end{DoxyCode}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=199pt]{d5/d64/defs_8h_a42fdd0783bbeb7cdc646d360191cdcac_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_a627f7996b64f99d885244a5102c85164}\label{defs_8h_a627f7996b64f99d885244a5102c85164}} 
\index{defs.h@{defs.h}!lapicid@{lapicid}}
\index{lapicid@{lapicid}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{lapicid()}{lapicid()}}
{\footnotesize\ttfamily int lapicid (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{lapic_8c_source_l00101}{101}} of file \mbox{\hyperlink{lapic_8c_source}{lapic.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00102 \{}
\DoxyCodeLine{00103   \textcolor{keywordflow}{if} (!\mbox{\hyperlink{lapic_8c_a4029f3e2439d5912f93543b8addd10ec}{lapic}})}
\DoxyCodeLine{00104     \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{00105   \textcolor{keywordflow}{return} \mbox{\hyperlink{lapic_8c_a4029f3e2439d5912f93543b8addd10ec}{lapic}}[\mbox{\hyperlink{lapic_8c_a77ceac8d6af195fe72f95f6afd87c45e}{ID}}] >> 24;}
\DoxyCodeLine{00106 \}}

\end{DoxyCode}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=550pt]{d5/d64/defs_8h_a627f7996b64f99d885244a5102c85164_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_a6b48a1e50acc73cb3e70a65774c87392}\label{defs_8h_a6b48a1e50acc73cb3e70a65774c87392}} 
\index{defs.h@{defs.h}!lapicinit@{lapicinit}}
\index{lapicinit@{lapicinit}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{lapicinit()}{lapicinit()}}
{\footnotesize\ttfamily void lapicinit (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{lapic_8c_source_l00055}{55}} of file \mbox{\hyperlink{lapic_8c_source}{lapic.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00056 \{}
\DoxyCodeLine{00057   \textcolor{keywordflow}{if}(!\mbox{\hyperlink{lapic_8c_a4029f3e2439d5912f93543b8addd10ec}{lapic}})}
\DoxyCodeLine{00058     \textcolor{keywordflow}{return};}
\DoxyCodeLine{00059 }
\DoxyCodeLine{00060   \textcolor{comment}{// Enable local APIC; set spurious interrupt vector.}}
\DoxyCodeLine{00061   lapicw(\mbox{\hyperlink{lapic_8c_a062fc16f4eacb723c76e2c87c8495412}{SVR}}, \mbox{\hyperlink{lapic_8c_a514ad415fb6125ba296793df7d1a468a}{ENABLE}} | (\mbox{\hyperlink{traps_8h_a17129100154901eb81be6e438843a0e1}{T\_IRQ0}} + \mbox{\hyperlink{traps_8h_a0e95f09d5e5653670eede10844d73875}{IRQ\_SPURIOUS}}));}
\DoxyCodeLine{00062 }
\DoxyCodeLine{00063   \textcolor{comment}{// The timer repeatedly counts down at bus frequency}}
\DoxyCodeLine{00064   \textcolor{comment}{// from lapic[TICR] and then issues an interrupt.}}
\DoxyCodeLine{00065   \textcolor{comment}{// If xv6 cared more about precise timekeeping,}}
\DoxyCodeLine{00066   \textcolor{comment}{// TICR would be calibrated using an external time source.}}
\DoxyCodeLine{00067   lapicw(\mbox{\hyperlink{lapic_8c_a11b0b699f28c2043fcd6da289fff7375}{TDCR}}, \mbox{\hyperlink{lapic_8c_a1964818ccd90a6173ea48cecb652feeb}{X1}});}
\DoxyCodeLine{00068   lapicw(\mbox{\hyperlink{lapic_8c_a599217205dc3092c26567a2bd868ef3a}{TIMER}}, \mbox{\hyperlink{lapic_8c_af36821ad7b93ab31dcfaaa25e134fdf0}{PERIODIC}} | (\mbox{\hyperlink{traps_8h_a17129100154901eb81be6e438843a0e1}{T\_IRQ0}} + \mbox{\hyperlink{traps_8h_a85fc66e3edd4ed6a4db6e455feaba8ca}{IRQ\_TIMER}}));}
\DoxyCodeLine{00069   lapicw(\mbox{\hyperlink{lapic_8c_af1d7a14061b402e4718eff6d9ef7ada4}{TICR}}, 10000000);}
\DoxyCodeLine{00070 }
\DoxyCodeLine{00071   \textcolor{comment}{// Disable logical interrupt lines.}}
\DoxyCodeLine{00072   lapicw(\mbox{\hyperlink{lapic_8c_acec8cff36b5e5b2b4bda262480db2af2}{LINT0}}, \mbox{\hyperlink{lapic_8c_a8fe9c058dcb81f528134d37e741182a3}{MASKED}});}
\DoxyCodeLine{00073   lapicw(\mbox{\hyperlink{lapic_8c_a19035d504c49cf257ef4dc27cd3eb668}{LINT1}}, \mbox{\hyperlink{lapic_8c_a8fe9c058dcb81f528134d37e741182a3}{MASKED}});}
\DoxyCodeLine{00074 }
\DoxyCodeLine{00075   \textcolor{comment}{// Disable performance counter overflow interrupts}}
\DoxyCodeLine{00076   \textcolor{comment}{// on machines that provide that interrupt entry.}}
\DoxyCodeLine{00077   \textcolor{keywordflow}{if}(((\mbox{\hyperlink{lapic_8c_a4029f3e2439d5912f93543b8addd10ec}{lapic}}[\mbox{\hyperlink{lapic_8c_a98ed931f97fef7e06e3ea441d0326c67}{VER}}]>>16) \& 0xFF) >= 4)}
\DoxyCodeLine{00078     lapicw(\mbox{\hyperlink{lapic_8c_a5c989e3931132d4a4aca9cacfcb8b075}{PCINT}}, \mbox{\hyperlink{lapic_8c_a8fe9c058dcb81f528134d37e741182a3}{MASKED}});}
\DoxyCodeLine{00079 }
\DoxyCodeLine{00080   \textcolor{comment}{// Map error interrupt to IRQ\_ERROR.}}
\DoxyCodeLine{00081   lapicw(\mbox{\hyperlink{lapic_8c_a8fe83ac76edc595f6b98cd4a4127aed5}{ERROR}}, \mbox{\hyperlink{traps_8h_a17129100154901eb81be6e438843a0e1}{T\_IRQ0}} + \mbox{\hyperlink{traps_8h_a7546e682900c4558b1f8c4f0633bc7b9}{IRQ\_ERROR}});}
\DoxyCodeLine{00082 }
\DoxyCodeLine{00083   \textcolor{comment}{// Clear error status register (requires back-\/to-\/back writes).}}
\DoxyCodeLine{00084   lapicw(\mbox{\hyperlink{lapic_8c_ae4ad5e3805ffa2cbe03b65421edd8f99}{ESR}}, 0);}
\DoxyCodeLine{00085   lapicw(\mbox{\hyperlink{lapic_8c_ae4ad5e3805ffa2cbe03b65421edd8f99}{ESR}}, 0);}
\DoxyCodeLine{00086 }
\DoxyCodeLine{00087   \textcolor{comment}{// Ack any outstanding interrupts.}}
\DoxyCodeLine{00088   lapicw(\mbox{\hyperlink{lapic_8c_a04c9015da7e7ea45f3b80793809e2d7b}{EOI}}, 0);}
\DoxyCodeLine{00089 }
\DoxyCodeLine{00090   \textcolor{comment}{// Send an Init Level De-\/Assert to synchronise arbitration ID's.}}
\DoxyCodeLine{00091   lapicw(\mbox{\hyperlink{lapic_8c_a9382474befd66e12c502eb221e4f9a0d}{ICRHI}}, 0);}
\DoxyCodeLine{00092   lapicw(\mbox{\hyperlink{lapic_8c_ae6db3be23c343c0823604670010635f7}{ICRLO}}, \mbox{\hyperlink{lapic_8c_adc4a14c073a7427003796cbd9d435758}{BCAST}} | \mbox{\hyperlink{lapic_8c_ab5889105dcd019008c9448dff61323f6}{INIT}} | \mbox{\hyperlink{lapic_8c_a73f717b7aae31163c2a85f67883bf0ed}{LEVEL}});}
\DoxyCodeLine{00093   \textcolor{keywordflow}{while}(\mbox{\hyperlink{lapic_8c_a4029f3e2439d5912f93543b8addd10ec}{lapic}}[\mbox{\hyperlink{lapic_8c_ae6db3be23c343c0823604670010635f7}{ICRLO}}] \& \mbox{\hyperlink{lapic_8c_a5f0b856b460d14d6fac161e35cfdb9d1}{DELIVS}})}
\DoxyCodeLine{00094     ;}
\DoxyCodeLine{00095 }
\DoxyCodeLine{00096   \textcolor{comment}{// Enable interrupts on the APIC (but not on the processor).}}
\DoxyCodeLine{00097   lapicw(\mbox{\hyperlink{lapic_8c_a0d378efcaaff1100c96bff8856bfc036}{TPR}}, 0);}
\DoxyCodeLine{00098 \}}

\end{DoxyCode}
\mbox{\Hypertarget{defs_8h_ae46b07b96e4429fa85738ac2fe1768a0}\label{defs_8h_ae46b07b96e4429fa85738ac2fe1768a0}} 
\index{defs.h@{defs.h}!lapicstartap@{lapicstartap}}
\index{lapicstartap@{lapicstartap}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{lapicstartap()}{lapicstartap()}}
{\footnotesize\ttfamily void lapicstartap (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{types_8h_a65f85814a8290f9797005d3b28e7e5fc}{uchar}}}]{apicid,  }\item[{\mbox{\hyperlink{types_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}}}]{addr }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{lapic_8c_source_l00129}{129}} of file \mbox{\hyperlink{lapic_8c_source}{lapic.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00130 \{}
\DoxyCodeLine{00131   \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{00132   \mbox{\hyperlink{types_8h_ab95f123a6c9bcfee6a343170ef8c5f69}{ushort}} *wrv;}
\DoxyCodeLine{00133 }
\DoxyCodeLine{00134   \textcolor{comment}{// "{}The BSP must initialize CMOS shutdown code to 0AH}}
\DoxyCodeLine{00135   \textcolor{comment}{// and the warm reset vector (DWORD based at 40:67) to point at}}
\DoxyCodeLine{00136   \textcolor{comment}{// the AP startup code prior to the [universal startup algorithm]."{}}}
\DoxyCodeLine{00137   outb(\mbox{\hyperlink{lapic_8c_a6ef3cdae7f581dab8f55d73dfa7a49bb}{CMOS\_PORT}}, 0xF);  \textcolor{comment}{// offset 0xF is shutdown code}}
\DoxyCodeLine{00138   outb(\mbox{\hyperlink{lapic_8c_a6ef3cdae7f581dab8f55d73dfa7a49bb}{CMOS\_PORT}}+1, 0x0A);}
\DoxyCodeLine{00139   wrv = (\mbox{\hyperlink{types_8h_ab95f123a6c9bcfee6a343170ef8c5f69}{ushort}}*)\mbox{\hyperlink{memlayout_8h_aefd5e8b62c49bba2cf20309c7dd174e2}{P2V}}((0x40<<4 | 0x67));  \textcolor{comment}{// Warm reset vector}}
\DoxyCodeLine{00140   wrv[0] = 0;}
\DoxyCodeLine{00141   wrv[1] = addr >> 4;}
\DoxyCodeLine{00142 }
\DoxyCodeLine{00143   \textcolor{comment}{// "{}Universal startup algorithm."{}}}
\DoxyCodeLine{00144   \textcolor{comment}{// Send INIT (level-\/triggered) interrupt to reset other CPU.}}
\DoxyCodeLine{00145   lapicw(\mbox{\hyperlink{lapic_8c_a9382474befd66e12c502eb221e4f9a0d}{ICRHI}}, apicid<<24);}
\DoxyCodeLine{00146   lapicw(\mbox{\hyperlink{lapic_8c_ae6db3be23c343c0823604670010635f7}{ICRLO}}, \mbox{\hyperlink{lapic_8c_ab5889105dcd019008c9448dff61323f6}{INIT}} | \mbox{\hyperlink{lapic_8c_a73f717b7aae31163c2a85f67883bf0ed}{LEVEL}} | \mbox{\hyperlink{lapic_8c_af343b20373ba49a92fce523e948f2ab3}{ASSERT}});}
\DoxyCodeLine{00147   \mbox{\hyperlink{lapic_8c_ae0ac6441d1d76d8ef821cdbbc6b6fc2f}{microdelay}}(200);}
\DoxyCodeLine{00148   lapicw(\mbox{\hyperlink{lapic_8c_ae6db3be23c343c0823604670010635f7}{ICRLO}}, \mbox{\hyperlink{lapic_8c_ab5889105dcd019008c9448dff61323f6}{INIT}} | \mbox{\hyperlink{lapic_8c_a73f717b7aae31163c2a85f67883bf0ed}{LEVEL}});}
\DoxyCodeLine{00149   \mbox{\hyperlink{lapic_8c_ae0ac6441d1d76d8ef821cdbbc6b6fc2f}{microdelay}}(100);    \textcolor{comment}{// should be 10ms, but too slow in Bochs!}}
\DoxyCodeLine{00150 }
\DoxyCodeLine{00151   \textcolor{comment}{// Send startup IPI (twice!) to enter code.}}
\DoxyCodeLine{00152   \textcolor{comment}{// Regular hardware is supposed to only accept a STARTUP}}
\DoxyCodeLine{00153   \textcolor{comment}{// when it is in the halted state due to an INIT.  So the second}}
\DoxyCodeLine{00154   \textcolor{comment}{// should be ignored, but it is part of the official Intel algorithm.}}
\DoxyCodeLine{00155   \textcolor{comment}{// Bochs complains about the second one.  Too bad for Bochs.}}
\DoxyCodeLine{00156   \textcolor{keywordflow}{for}(i = 0; i < 2; i++)\{}
\DoxyCodeLine{00157     lapicw(\mbox{\hyperlink{lapic_8c_a9382474befd66e12c502eb221e4f9a0d}{ICRHI}}, apicid<<24);}
\DoxyCodeLine{00158     lapicw(\mbox{\hyperlink{lapic_8c_ae6db3be23c343c0823604670010635f7}{ICRLO}}, \mbox{\hyperlink{lapic_8c_ad0dd8aa1d9d769cf15609ca108af4af9}{STARTUP}} | (addr>>12));}
\DoxyCodeLine{00159     \mbox{\hyperlink{lapic_8c_ae0ac6441d1d76d8ef821cdbbc6b6fc2f}{microdelay}}(200);}
\DoxyCodeLine{00160   \}}
\DoxyCodeLine{00161 \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=247pt]{d5/d64/defs_8h_ae46b07b96e4429fa85738ac2fe1768a0_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_a8a149272578e00e0ce70480004640679}\label{defs_8h_a8a149272578e00e0ce70480004640679}} 
\index{defs.h@{defs.h}!loaduvm@{loaduvm}}
\index{loaduvm@{loaduvm}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{loaduvm()}{loaduvm()}}
{\footnotesize\ttfamily int loaduvm (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{types_8h_ac131849542282b2c95dfeaf1f26dc010}{pde\+\_\+t}} $\ast$}]{pgdir,  }\item[{char $\ast$}]{addr,  }\item[{struct \mbox{\hyperlink{structinode}{inode}} $\ast$}]{ip,  }\item[{\mbox{\hyperlink{types_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}}}]{offset,  }\item[{\mbox{\hyperlink{types_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}}}]{sz }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{vm_8c_source_l00198}{198}} of file \mbox{\hyperlink{vm_8c_source}{vm.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00199 \{}
\DoxyCodeLine{00200   \mbox{\hyperlink{types_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}} i, pa, n;}
\DoxyCodeLine{00201   \mbox{\hyperlink{mmu_8h_ab23e75f764f8314a83eaff23508c2ae5}{pte\_t}} *pte;}
\DoxyCodeLine{00202 }
\DoxyCodeLine{00203   \textcolor{keywordflow}{if}((\mbox{\hyperlink{types_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}}) addr \% \mbox{\hyperlink{mmu_8h_a5f96cb6ae6670e023c407cc2f77e1704}{PGSIZE}} != 0)}
\DoxyCodeLine{00204     \mbox{\hyperlink{console_8c_a95c0aca5d6d7487933984f08b189917a}{panic}}(\textcolor{stringliteral}{"{}loaduvm: addr must be page aligned"{}});}
\DoxyCodeLine{00205   \textcolor{keywordflow}{for}(i = 0; i < sz; i += \mbox{\hyperlink{mmu_8h_a5f96cb6ae6670e023c407cc2f77e1704}{PGSIZE}})\{}
\DoxyCodeLine{00206     \textcolor{keywordflow}{if}((pte = walkpgdir(pgdir, addr+i, 0)) == 0)}
\DoxyCodeLine{00207       \mbox{\hyperlink{console_8c_a95c0aca5d6d7487933984f08b189917a}{panic}}(\textcolor{stringliteral}{"{}loaduvm: address should exist"{}});}
\DoxyCodeLine{00208     pa = \mbox{\hyperlink{mmu_8h_a74b24f9b091875a5313370892e3f37a5}{PTE\_ADDR}}(*pte);}
\DoxyCodeLine{00209     \textcolor{keywordflow}{if}(sz -\/ i < \mbox{\hyperlink{mmu_8h_a5f96cb6ae6670e023c407cc2f77e1704}{PGSIZE}})}
\DoxyCodeLine{00210       n = sz -\/ i;}
\DoxyCodeLine{00211     \textcolor{keywordflow}{else}}
\DoxyCodeLine{00212       n = \mbox{\hyperlink{mmu_8h_a5f96cb6ae6670e023c407cc2f77e1704}{PGSIZE}};}
\DoxyCodeLine{00213     \textcolor{keywordflow}{if}(\mbox{\hyperlink{defs_8h_a2415273b06f31f0f2587b7325588a7e4}{readi}}(ip, \mbox{\hyperlink{memlayout_8h_aefd5e8b62c49bba2cf20309c7dd174e2}{P2V}}(pa), offset+i, n) != n)}
\DoxyCodeLine{00214       \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{00215   \}}
\DoxyCodeLine{00216   \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{00217 \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_a8a149272578e00e0ce70480004640679_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_a8a149272578e00e0ce70480004640679_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_a270d0050dc50965f4f851717841ad33c}\label{defs_8h_a270d0050dc50965f4f851717841ad33c}} 
\index{defs.h@{defs.h}!log\_write@{log\_write}}
\index{log\_write@{log\_write}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{log\_write()}{log\_write()}}
{\footnotesize\ttfamily void log\+\_\+write (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structbuf}{buf}} $\ast$}]{b }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{log_8c_source_l00214}{214}} of file \mbox{\hyperlink{log_8c_source}{log.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00215 \{}
\DoxyCodeLine{00216   \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{00217 }
\DoxyCodeLine{00218   \textcolor{keywordflow}{if} (\mbox{\hyperlink{structlog}{log}}.\mbox{\hyperlink{structlog_a7808516ed2f708dcb13912b1e8fc20d9}{lh}}.\mbox{\hyperlink{structlogheader_a50b276b70d44ae77497ef1d71d182875}{n}} >= \mbox{\hyperlink{param_8h_acc7694167c7840a913939a1b90808b4c}{LOGSIZE}} || \mbox{\hyperlink{structlog}{log}}.\mbox{\hyperlink{structlog_a7808516ed2f708dcb13912b1e8fc20d9}{lh}}.\mbox{\hyperlink{structlogheader_a50b276b70d44ae77497ef1d71d182875}{n}} >= \mbox{\hyperlink{structlog}{log}}.\mbox{\hyperlink{structlog_a2257e716d4b77efd0524286cf5772a41}{size}} -\/ 1)}
\DoxyCodeLine{00219     \mbox{\hyperlink{console_8c_a95c0aca5d6d7487933984f08b189917a}{panic}}(\textcolor{stringliteral}{"{}too big a transaction"{}});}
\DoxyCodeLine{00220   \textcolor{keywordflow}{if} (\mbox{\hyperlink{structlog}{log}}.\mbox{\hyperlink{structlog_addfc1fc09a124978bd7e2a23a19d733d}{outstanding}} < 1)}
\DoxyCodeLine{00221     \mbox{\hyperlink{console_8c_a95c0aca5d6d7487933984f08b189917a}{panic}}(\textcolor{stringliteral}{"{}log\_write outside of trans"{}});}
\DoxyCodeLine{00222 }
\DoxyCodeLine{00223   \mbox{\hyperlink{defs_8h_afe4ef8638f1ecb962a6e67fb086ee3b8}{acquire}}(\&\mbox{\hyperlink{structlog}{log}}.\mbox{\hyperlink{structlog_a980a1d1aa9c60af7a82f297f8ab54d2e}{lock}});}
\DoxyCodeLine{00224   \textcolor{keywordflow}{for} (i = 0; i < \mbox{\hyperlink{structlog}{log}}.\mbox{\hyperlink{structlog_a7808516ed2f708dcb13912b1e8fc20d9}{lh}}.\mbox{\hyperlink{structlogheader_a50b276b70d44ae77497ef1d71d182875}{n}}; i++) \{}
\DoxyCodeLine{00225     \textcolor{keywordflow}{if} (\mbox{\hyperlink{structlog}{log}}.\mbox{\hyperlink{structlog_a7808516ed2f708dcb13912b1e8fc20d9}{lh}}.\mbox{\hyperlink{structlogheader_a020db7fe04c7ce6b8f4aee2092576c2c}{block}}[i] == b-\/>\mbox{\hyperlink{structbuf_a756b2bcc88008bef7f21d688aa4a7a48}{blockno}})   \textcolor{comment}{// log absorbtion}}
\DoxyCodeLine{00226       \textcolor{keywordflow}{break};}
\DoxyCodeLine{00227   \}}
\DoxyCodeLine{00228   \mbox{\hyperlink{structlog}{log}}.\mbox{\hyperlink{structlog_a7808516ed2f708dcb13912b1e8fc20d9}{lh}}.\mbox{\hyperlink{structlogheader_a020db7fe04c7ce6b8f4aee2092576c2c}{block}}[i] = b-\/>\mbox{\hyperlink{structbuf_a756b2bcc88008bef7f21d688aa4a7a48}{blockno}};}
\DoxyCodeLine{00229   \textcolor{keywordflow}{if} (i == \mbox{\hyperlink{structlog}{log}}.\mbox{\hyperlink{structlog_a7808516ed2f708dcb13912b1e8fc20d9}{lh}}.\mbox{\hyperlink{structlogheader_a50b276b70d44ae77497ef1d71d182875}{n}})}
\DoxyCodeLine{00230     \mbox{\hyperlink{structlog}{log}}.\mbox{\hyperlink{structlog_a7808516ed2f708dcb13912b1e8fc20d9}{lh}}.\mbox{\hyperlink{structlogheader_a50b276b70d44ae77497ef1d71d182875}{n}}++;}
\DoxyCodeLine{00231   b-\/>\mbox{\hyperlink{structbuf_ae7d6b6c34fdeadb38970efd0554aa1a9}{flags}} |= \mbox{\hyperlink{buf_8h_adc32011df267adb9740bcd0abf0f0663}{B\_DIRTY}}; \textcolor{comment}{// prevent eviction}}
\DoxyCodeLine{00232   \mbox{\hyperlink{defs_8h_a4f8616948f3dbce65671f666eed1d669}{release}}(\&\mbox{\hyperlink{structlog}{log}}.\mbox{\hyperlink{structlog_a980a1d1aa9c60af7a82f297f8ab54d2e}{lock}});}
\DoxyCodeLine{00233 \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_a270d0050dc50965f4f851717841ad33c_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=550pt]{d5/d64/defs_8h_a270d0050dc50965f4f851717841ad33c_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_acdb4d3f48d2fb0a834722b1107d2b284}\label{defs_8h_acdb4d3f48d2fb0a834722b1107d2b284}} 
\index{defs.h@{defs.h}!memcmp@{memcmp}}
\index{memcmp@{memcmp}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{memcmp()}{memcmp()}}
{\footnotesize\ttfamily int memcmp (\begin{DoxyParamCaption}\item[{const void $\ast$}]{v1,  }\item[{const void $\ast$}]{v2,  }\item[{\mbox{\hyperlink{types_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}}}]{n }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{string_8c_source_l00016}{16}} of file \mbox{\hyperlink{string_8c_source}{string.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00017 \{}
\DoxyCodeLine{00018   \textcolor{keyword}{const} \mbox{\hyperlink{types_8h_a65f85814a8290f9797005d3b28e7e5fc}{uchar}} *s1, *s2;}
\DoxyCodeLine{00019 }
\DoxyCodeLine{00020   s1 = v1;}
\DoxyCodeLine{00021   s2 = v2;}
\DoxyCodeLine{00022   \textcolor{keywordflow}{while}(n-\/-\/ > 0)\{}
\DoxyCodeLine{00023     \textcolor{keywordflow}{if}(*s1 != *s2)}
\DoxyCodeLine{00024       \textcolor{keywordflow}{return} *s1 -\/ *s2;}
\DoxyCodeLine{00025     s1++, s2++;}
\DoxyCodeLine{00026   \}}
\DoxyCodeLine{00027 }
\DoxyCodeLine{00028   \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{00029 \}}

\end{DoxyCode}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=232pt]{d5/d64/defs_8h_acdb4d3f48d2fb0a834722b1107d2b284_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_ac152fff34fe03e497d35b1d4c47f1445}\label{defs_8h_ac152fff34fe03e497d35b1d4c47f1445}} 
\index{defs.h@{defs.h}!memmove@{memmove}}
\index{memmove@{memmove}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{memmove()}{memmove()}}
{\footnotesize\ttfamily void $\ast$ memmove (\begin{DoxyParamCaption}\item[{void $\ast$}]{dst,  }\item[{const void $\ast$}]{src,  }\item[{\mbox{\hyperlink{types_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}}}]{n }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{string_8c_source_l00032}{32}} of file \mbox{\hyperlink{string_8c_source}{string.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00033 \{}
\DoxyCodeLine{00034   \textcolor{keyword}{const} \textcolor{keywordtype}{char} *s;}
\DoxyCodeLine{00035   \textcolor{keywordtype}{char} *d;}
\DoxyCodeLine{00036 }
\DoxyCodeLine{00037   s = src;}
\DoxyCodeLine{00038   d = dst;}
\DoxyCodeLine{00039   \textcolor{keywordflow}{if}(s < d \&\& s + n > d)\{}
\DoxyCodeLine{00040     s += n;}
\DoxyCodeLine{00041     d += n;}
\DoxyCodeLine{00042     \textcolor{keywordflow}{while}(n-\/-\/ > 0)}
\DoxyCodeLine{00043       *-\/-\/d = *-\/-\/s;}
\DoxyCodeLine{00044   \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{00045     \textcolor{keywordflow}{while}(n-\/-\/ > 0)}
\DoxyCodeLine{00046       *d++ = *s++;}
\DoxyCodeLine{00047 }
\DoxyCodeLine{00048   \textcolor{keywordflow}{return} dst;}
\DoxyCodeLine{00049 \}}

\end{DoxyCode}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_ac152fff34fe03e497d35b1d4c47f1445_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_a0098886a849eef10803e9f35ceec61b9}\label{defs_8h_a0098886a849eef10803e9f35ceec61b9}} 
\index{defs.h@{defs.h}!memset@{memset}}
\index{memset@{memset}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{memset()}{memset()}}
{\footnotesize\ttfamily void $\ast$ memset (\begin{DoxyParamCaption}\item[{void $\ast$}]{dst,  }\item[{int}]{c,  }\item[{\mbox{\hyperlink{types_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}}}]{n }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{string_8c_source_l00005}{5}} of file \mbox{\hyperlink{string_8c_source}{string.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00006 \{}
\DoxyCodeLine{00007   \textcolor{keywordflow}{if} ((\textcolor{keywordtype}{int})dst\%4 == 0 \&\& n\%4 == 0)\{}
\DoxyCodeLine{00008     c \&= 0xFF;}
\DoxyCodeLine{00009     stosl(dst, (c<<24)|(c<<16)|(c<<8)|c, n/4);}
\DoxyCodeLine{00010   \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{00011     stosb(dst, c, n);}
\DoxyCodeLine{00012   \textcolor{keywordflow}{return} dst;}
\DoxyCodeLine{00013 \}}

\end{DoxyCode}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_a0098886a849eef10803e9f35ceec61b9_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_ada0e72e8d0a1a48090829fd03a0b76ba}\label{defs_8h_ada0e72e8d0a1a48090829fd03a0b76ba}} 
\index{defs.h@{defs.h}!microdelay@{microdelay}}
\index{microdelay@{microdelay}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{microdelay()}{microdelay()}}
{\footnotesize\ttfamily void microdelay (\begin{DoxyParamCaption}\item[{int}]{us }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{lapic_8c_source_l00119}{119}} of file \mbox{\hyperlink{lapic_8c_source}{lapic.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00120 \{}
\DoxyCodeLine{00121 \}}

\end{DoxyCode}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=329pt]{d5/d64/defs_8h_ada0e72e8d0a1a48090829fd03a0b76ba_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_a2fd0b66a17c5347541448ef906b7b2a2}\label{defs_8h_a2fd0b66a17c5347541448ef906b7b2a2}} 
\index{defs.h@{defs.h}!mpinit@{mpinit}}
\index{mpinit@{mpinit}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{mpinit()}{mpinit()}}
{\footnotesize\ttfamily void mpinit (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{mp_8c_source_l00092}{92}} of file \mbox{\hyperlink{mp_8c_source}{mp.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00093 \{}
\DoxyCodeLine{00094   \mbox{\hyperlink{types_8h_a65f85814a8290f9797005d3b28e7e5fc}{uchar}} *p, *\mbox{\hyperlink{console_8c_ab56fa7c992b725d84916b987c3d532ea}{e}};}
\DoxyCodeLine{00095   \textcolor{keywordtype}{int} \mbox{\hyperlink{defs_8h_a46b52bd30030451d1b65291b77ba05d5}{ismp}};}
\DoxyCodeLine{00096   \textcolor{keyword}{struct }\mbox{\hyperlink{structmp}{mp}} *\mbox{\hyperlink{structmp}{mp}};}
\DoxyCodeLine{00097   \textcolor{keyword}{struct }\mbox{\hyperlink{structmpconf}{mpconf}} *conf;}
\DoxyCodeLine{00098   \textcolor{keyword}{struct }\mbox{\hyperlink{structmpproc}{mpproc}} *\mbox{\hyperlink{structproc}{proc}};}
\DoxyCodeLine{00099   \textcolor{keyword}{struct }\mbox{\hyperlink{structmpioapic}{mpioapic}} *\mbox{\hyperlink{structioapic}{ioapic}};}
\DoxyCodeLine{00100 }
\DoxyCodeLine{00101   \textcolor{keywordflow}{if}((conf = mpconfig(\&\mbox{\hyperlink{structmp}{mp}})) == 0)}
\DoxyCodeLine{00102     \mbox{\hyperlink{console_8c_a95c0aca5d6d7487933984f08b189917a}{panic}}(\textcolor{stringliteral}{"{}Expect to run on an SMP"{}});}
\DoxyCodeLine{00103   \mbox{\hyperlink{defs_8h_a46b52bd30030451d1b65291b77ba05d5}{ismp}} = 1;}
\DoxyCodeLine{00104   \mbox{\hyperlink{defs_8h_a4029f3e2439d5912f93543b8addd10ec}{lapic}} = (\mbox{\hyperlink{types_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}}*)conf-\/>\mbox{\hyperlink{structmpconf_a087fac7e9dc4ca1fdfe142b3adf96c99}{lapicaddr}};}
\DoxyCodeLine{00105   \textcolor{keywordflow}{for}(p=(\mbox{\hyperlink{types_8h_a65f85814a8290f9797005d3b28e7e5fc}{uchar}}*)(conf+1), \mbox{\hyperlink{console_8c_ab56fa7c992b725d84916b987c3d532ea}{e}}=(\mbox{\hyperlink{types_8h_a65f85814a8290f9797005d3b28e7e5fc}{uchar}}*)conf+conf-\/>\mbox{\hyperlink{structmpconf_a6b7583180c78b6a2e490d6c72779d8dd}{length}}; p<\mbox{\hyperlink{console_8c_ab56fa7c992b725d84916b987c3d532ea}{e}}; )\{}
\DoxyCodeLine{00106     \textcolor{keywordflow}{switch}(*p)\{}
\DoxyCodeLine{00107     \textcolor{keywordflow}{case} \mbox{\hyperlink{mp_8h_a0dd89a9c5a25d2d9f9a7fe57beb69597}{MPPROC}}:}
\DoxyCodeLine{00108       \mbox{\hyperlink{structproc}{proc}} = (\textcolor{keyword}{struct }\mbox{\hyperlink{structmpproc}{mpproc}}*)p;}
\DoxyCodeLine{00109       \textcolor{keywordflow}{if}(\mbox{\hyperlink{mp_8c_a6201a0661c3d5b88df5f63529298eb48}{ncpu}} < \mbox{\hyperlink{param_8h_a2c4561c4c17cde39101c4e7a40d4492a}{NCPU}}) \{}
\DoxyCodeLine{00110         \mbox{\hyperlink{mp_8c_a6d2633e73724907b582dfe6938ed7bb9}{cpus}}[\mbox{\hyperlink{mp_8c_a6201a0661c3d5b88df5f63529298eb48}{ncpu}}].\mbox{\hyperlink{structcpu_ad08a3478ec15fc8bec1d9b6b5a0431db}{apicid}} = \mbox{\hyperlink{structproc}{proc}}-\/>apicid;  \textcolor{comment}{// apicid may differ from ncpu}}
\DoxyCodeLine{00111         \mbox{\hyperlink{mp_8c_a6201a0661c3d5b88df5f63529298eb48}{ncpu}}++;}
\DoxyCodeLine{00112       \}}
\DoxyCodeLine{00113       p += \textcolor{keyword}{sizeof}(\textcolor{keyword}{struct }\mbox{\hyperlink{structmpproc}{mpproc}});}
\DoxyCodeLine{00114       \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00115     \textcolor{keywordflow}{case} \mbox{\hyperlink{mp_8h_a6d6b1d8666df6dc57974e608dda01edc}{MPIOAPIC}}:}
\DoxyCodeLine{00116       \mbox{\hyperlink{structioapic}{ioapic}} = (\textcolor{keyword}{struct }\mbox{\hyperlink{structmpioapic}{mpioapic}}*)p;}
\DoxyCodeLine{00117       \mbox{\hyperlink{mp_8c_a619ae379337e3cb2397ee0b6b4fd8d6b}{ioapicid}} = \mbox{\hyperlink{structioapic}{ioapic}}-\/>apicno;}
\DoxyCodeLine{00118       p += \textcolor{keyword}{sizeof}(\textcolor{keyword}{struct }\mbox{\hyperlink{structmpioapic}{mpioapic}});}
\DoxyCodeLine{00119       \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00120     \textcolor{keywordflow}{case} \mbox{\hyperlink{mp_8h_a10d8190eb1ea465310862131da282a09}{MPBUS}}:}
\DoxyCodeLine{00121     \textcolor{keywordflow}{case} \mbox{\hyperlink{mp_8h_a613c0cd2bca1e5a30eb1ffc7857d4d61}{MPIOINTR}}:}
\DoxyCodeLine{00122     \textcolor{keywordflow}{case} \mbox{\hyperlink{mp_8h_a993af198877b836f019baaa9f12c7c30}{MPLINTR}}:}
\DoxyCodeLine{00123       p += 8;}
\DoxyCodeLine{00124       \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00125     \textcolor{keywordflow}{default}:}
\DoxyCodeLine{00126       \mbox{\hyperlink{defs_8h_a46b52bd30030451d1b65291b77ba05d5}{ismp}} = 0;}
\DoxyCodeLine{00127       \textcolor{keywordflow}{break};}
\DoxyCodeLine{00128     \}}
\DoxyCodeLine{00129   \}}
\DoxyCodeLine{00130   \textcolor{keywordflow}{if}(!\mbox{\hyperlink{defs_8h_a46b52bd30030451d1b65291b77ba05d5}{ismp}})}
\DoxyCodeLine{00131     \mbox{\hyperlink{console_8c_a95c0aca5d6d7487933984f08b189917a}{panic}}(\textcolor{stringliteral}{"{}Didn't find a suitable machine"{}});}
\DoxyCodeLine{00132 }
\DoxyCodeLine{00133   \textcolor{keywordflow}{if}(\mbox{\hyperlink{structmp}{mp}}-\/>\mbox{\hyperlink{structmp_ae2157bc407a7423c57bdb078b70cd6e5}{imcrp}})\{}
\DoxyCodeLine{00134     \textcolor{comment}{// Bochs doesn't support IMCR, so this doesn't run on Bochs.}}
\DoxyCodeLine{00135     \textcolor{comment}{// But it would on real hardware.}}
\DoxyCodeLine{00136     outb(0x22, 0x70);   \textcolor{comment}{// Select IMCR}}
\DoxyCodeLine{00137     outb(0x23, inb(0x23) | 1);  \textcolor{comment}{// Mask external interrupts.}}
\DoxyCodeLine{00138   \}}
\DoxyCodeLine{00139 \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_a2fd0b66a17c5347541448ef906b7b2a2_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_ad427959ad025dabd8cd393b27ec39160}\label{defs_8h_ad427959ad025dabd8cd393b27ec39160}} 
\index{defs.h@{defs.h}!mycpu@{mycpu}}
\index{mycpu@{mycpu}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{mycpu()}{mycpu()}}
{\footnotesize\ttfamily struct \mbox{\hyperlink{structcpu}{cpu}} $\ast$ mycpu (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{proc_8c_source_l00038}{38}} of file \mbox{\hyperlink{proc_8c_source}{proc.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00039 \{}
\DoxyCodeLine{00040   \textcolor{keywordtype}{int} apicid, i;}
\DoxyCodeLine{00041   }
\DoxyCodeLine{00042   \textcolor{keywordflow}{if}(readeflags()\&\mbox{\hyperlink{mmu_8h_ab481068357bb42797aafe91864a2d085}{FL\_IF}})}
\DoxyCodeLine{00043     \mbox{\hyperlink{console_8c_a95c0aca5d6d7487933984f08b189917a}{panic}}(\textcolor{stringliteral}{"{}mycpu called with interrupts enabled\(\backslash\)n"{}});}
\DoxyCodeLine{00044   }
\DoxyCodeLine{00045   apicid = \mbox{\hyperlink{defs_8h_a627f7996b64f99d885244a5102c85164}{lapicid}}();}
\DoxyCodeLine{00046   \textcolor{comment}{// APIC IDs are not guaranteed to be contiguous. Maybe we should have}}
\DoxyCodeLine{00047   \textcolor{comment}{// a reverse map, or reserve a register to store \&cpus[i].}}
\DoxyCodeLine{00048   \textcolor{keywordflow}{for} (i = 0; i < \mbox{\hyperlink{mp_8c_a6201a0661c3d5b88df5f63529298eb48}{ncpu}}; ++i) \{}
\DoxyCodeLine{00049     \textcolor{keywordflow}{if} (\mbox{\hyperlink{mp_8c_a6d2633e73724907b582dfe6938ed7bb9}{cpus}}[i].apicid == apicid)}
\DoxyCodeLine{00050       \textcolor{keywordflow}{return} \&\mbox{\hyperlink{mp_8c_a6d2633e73724907b582dfe6938ed7bb9}{cpus}}[i];}
\DoxyCodeLine{00051   \}}
\DoxyCodeLine{00052   \mbox{\hyperlink{console_8c_a95c0aca5d6d7487933984f08b189917a}{panic}}(\textcolor{stringliteral}{"{}unknown apicid\(\backslash\)n"{}});}
\DoxyCodeLine{00053 \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_ad427959ad025dabd8cd393b27ec39160_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=550pt]{d5/d64/defs_8h_ad427959ad025dabd8cd393b27ec39160_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_a3d2327db1e34643f4a9e6a07c8cc62c6}\label{defs_8h_a3d2327db1e34643f4a9e6a07c8cc62c6}} 
\index{defs.h@{defs.h}!myproc@{myproc}}
\index{myproc@{myproc}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{myproc()}{myproc()}}
{\footnotesize\ttfamily struct \mbox{\hyperlink{structproc}{proc}} $\ast$ myproc (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{proc_8c_source_l00058}{58}} of file \mbox{\hyperlink{proc_8c_source}{proc.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00058              \{}
\DoxyCodeLine{00059   \textcolor{keyword}{struct }\mbox{\hyperlink{structcpu}{cpu}} *c;}
\DoxyCodeLine{00060   \textcolor{keyword}{struct }\mbox{\hyperlink{structproc}{proc}} *p;}
\DoxyCodeLine{00061   \mbox{\hyperlink{defs_8h_a206b749d1b7768dadce61cbcde7e0f1c}{pushcli}}();}
\DoxyCodeLine{00062   c = \mbox{\hyperlink{proc_8c_ad427959ad025dabd8cd393b27ec39160}{mycpu}}();}
\DoxyCodeLine{00063   p = c-\/>\mbox{\hyperlink{structcpu_a9e71a6265904fd644875a9ea5a413c89}{proc}};}
\DoxyCodeLine{00064   \mbox{\hyperlink{defs_8h_ae3424f669269fef400ce29c3aeb43fdb}{popcli}}();}
\DoxyCodeLine{00065   \textcolor{keywordflow}{return} p;}
\DoxyCodeLine{00066 \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_a3d2327db1e34643f4a9e6a07c8cc62c6_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=550pt]{d5/d64/defs_8h_a3d2327db1e34643f4a9e6a07c8cc62c6_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_a0206c4090dc4bdfd8481e38057d5b2af}\label{defs_8h_a0206c4090dc4bdfd8481e38057d5b2af}} 
\index{defs.h@{defs.h}!namecmp@{namecmp}}
\index{namecmp@{namecmp}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{namecmp()}{namecmp()}}
{\footnotesize\ttfamily int namecmp (\begin{DoxyParamCaption}\item[{const char $\ast$}]{s,  }\item[{const char $\ast$}]{t }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{fs_8c_source_l00517}{517}} of file \mbox{\hyperlink{fs_8c_source}{fs.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00518 \{}
\DoxyCodeLine{00519   \textcolor{keywordflow}{return} \mbox{\hyperlink{defs_8h_a27e878168063a98eae64b4273dcf33cc}{strncmp}}(s, t, \mbox{\hyperlink{fs_8h_a48246fb9e5cb7f6a71ebc9ebc2f06562}{DIRSIZ}});}
\DoxyCodeLine{00520 \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=227pt]{d5/d64/defs_8h_a0206c4090dc4bdfd8481e38057d5b2af_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_a0206c4090dc4bdfd8481e38057d5b2af_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_acde7d3975db286253e584452ba03a54f}\label{defs_8h_acde7d3975db286253e584452ba03a54f}} 
\index{defs.h@{defs.h}!namei@{namei}}
\index{namei@{namei}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{namei()}{namei()}}
{\footnotesize\ttfamily struct \mbox{\hyperlink{structinode}{inode}} $\ast$ namei (\begin{DoxyParamCaption}\item[{char $\ast$}]{path }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{fs_8c_source_l00660}{660}} of file \mbox{\hyperlink{fs_8c_source}{fs.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00661 \{}
\DoxyCodeLine{00662   \textcolor{keywordtype}{char} \mbox{\hyperlink{usertests_8c_aee754febd402311e2a552cb0d6ab6629}{name}}[\mbox{\hyperlink{fs_8h_a48246fb9e5cb7f6a71ebc9ebc2f06562}{DIRSIZ}}];}
\DoxyCodeLine{00663   \textcolor{keywordflow}{return} namex(path, 0, \mbox{\hyperlink{usertests_8c_aee754febd402311e2a552cb0d6ab6629}{name}});}
\DoxyCodeLine{00664 \}}

\end{DoxyCode}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_acde7d3975db286253e584452ba03a54f_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_a699674601988291ebcc47d902f18bee8}\label{defs_8h_a699674601988291ebcc47d902f18bee8}} 
\index{defs.h@{defs.h}!nameiparent@{nameiparent}}
\index{nameiparent@{nameiparent}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{nameiparent()}{nameiparent()}}
{\footnotesize\ttfamily struct \mbox{\hyperlink{structinode}{inode}} $\ast$ nameiparent (\begin{DoxyParamCaption}\item[{char $\ast$}]{path,  }\item[{char $\ast$}]{name }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{fs_8c_source_l00667}{667}} of file \mbox{\hyperlink{fs_8c_source}{fs.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00668 \{}
\DoxyCodeLine{00669   \textcolor{keywordflow}{return} namex(path, 1, \mbox{\hyperlink{usertests_8c_aee754febd402311e2a552cb0d6ab6629}{name}});}
\DoxyCodeLine{00670 \}}

\end{DoxyCode}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=249pt]{d5/d64/defs_8h_a699674601988291ebcc47d902f18bee8_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_a45323e3f295a0d9b90929cc30a24e2aa}\label{defs_8h_a45323e3f295a0d9b90929cc30a24e2aa}} 
\index{defs.h@{defs.h}!panic@{panic}}
\index{panic@{panic}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{panic()}{panic()}}
{\footnotesize\ttfamily void panic (\begin{DoxyParamCaption}\item[{char $\ast$}]{s }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{console_8c_source_l00107}{107}} of file \mbox{\hyperlink{console_8c_source}{console.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00108 \{}
\DoxyCodeLine{00109   \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{00110   \mbox{\hyperlink{types_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}} pcs[10];}
\DoxyCodeLine{00111 }
\DoxyCodeLine{00112   cli();}
\DoxyCodeLine{00113   cons.locking = 0;}
\DoxyCodeLine{00114   \textcolor{comment}{// use lapiccpunum so that we can call panic from mycpu()}}
\DoxyCodeLine{00115   \mbox{\hyperlink{console_8c_a90f0742d846503e4ed1804f1df421ec6}{cprintf}}(\textcolor{stringliteral}{"{}lapicid \%d: panic: "{}}, \mbox{\hyperlink{defs_8h_a627f7996b64f99d885244a5102c85164}{lapicid}}());}
\DoxyCodeLine{00116   \mbox{\hyperlink{console_8c_a90f0742d846503e4ed1804f1df421ec6}{cprintf}}(s);}
\DoxyCodeLine{00117   \mbox{\hyperlink{console_8c_a90f0742d846503e4ed1804f1df421ec6}{cprintf}}(\textcolor{stringliteral}{"{}\(\backslash\)n"{}});}
\DoxyCodeLine{00118   \mbox{\hyperlink{defs_8h_a4105de9e2969515d6c6c795c4386f69f}{getcallerpcs}}(\&s, pcs);}
\DoxyCodeLine{00119   \textcolor{keywordflow}{for}(i=0; i<10; i++)}
\DoxyCodeLine{00120     \mbox{\hyperlink{console_8c_a90f0742d846503e4ed1804f1df421ec6}{cprintf}}(\textcolor{stringliteral}{"{} \%p"{}}, pcs[i]);}
\DoxyCodeLine{00121   panicked = 1; \textcolor{comment}{// freeze other CPU}}
\DoxyCodeLine{00122   \textcolor{keywordflow}{for}(;;)}
\DoxyCodeLine{00123     ;}
\DoxyCodeLine{00124 \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_a45323e3f295a0d9b90929cc30a24e2aa_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=550pt]{d5/d64/defs_8h_a45323e3f295a0d9b90929cc30a24e2aa_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_a71fd35cd05f30866ae0ba1486415e786}\label{defs_8h_a71fd35cd05f30866ae0ba1486415e786}} 
\index{defs.h@{defs.h}!picenable@{picenable}}
\index{picenable@{picenable}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{picenable()}{picenable()}}
{\footnotesize\ttfamily void picenable (\begin{DoxyParamCaption}\item[{int}]{ }\end{DoxyParamCaption})}

\mbox{\Hypertarget{defs_8h_a8f19f54755d7fdec01e537228b10fbf6}\label{defs_8h_a8f19f54755d7fdec01e537228b10fbf6}} 
\index{defs.h@{defs.h}!picinit@{picinit}}
\index{picinit@{picinit}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{picinit()}{picinit()}}
{\footnotesize\ttfamily void picinit (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{picirq_8c_source_l00011}{11}} of file \mbox{\hyperlink{picirq_8c_source}{picirq.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00012 \{}
\DoxyCodeLine{00013   \textcolor{comment}{// mask all interrupts}}
\DoxyCodeLine{00014   outb(\mbox{\hyperlink{picirq_8c_ad24a6214d0f5bb9bf67a8ac744907aa0}{IO\_PIC1}}+1, 0xFF);}
\DoxyCodeLine{00015   outb(\mbox{\hyperlink{picirq_8c_ab858a4b80bd8950398355e678c578d7d}{IO\_PIC2}}+1, 0xFF);}
\DoxyCodeLine{00016 \}}

\end{DoxyCode}
\mbox{\Hypertarget{defs_8h_a9d293f913985937ee7a266fe5ddbfc77}\label{defs_8h_a9d293f913985937ee7a266fe5ddbfc77}} 
\index{defs.h@{defs.h}!pinit@{pinit}}
\index{pinit@{pinit}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{pinit()}{pinit()}}
{\footnotesize\ttfamily void pinit (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{proc_8c_source_l00024}{24}} of file \mbox{\hyperlink{proc_8c_source}{proc.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00025 \{}
\DoxyCodeLine{00026   \mbox{\hyperlink{defs_8h_ab56d728e6966819a0260c358d3ac3419}{initlock}}(\&\mbox{\hyperlink{proc_8c_addf39d613ca9a58e7e6080a2e454421a}{ptable}}.lock, \textcolor{stringliteral}{"{}ptable"{}});}
\DoxyCodeLine{00027 \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=198pt]{d5/d64/defs_8h_a9d293f913985937ee7a266fe5ddbfc77_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_a3de41eab56ff42bea4d1ae78bbd1e472}\label{defs_8h_a3de41eab56ff42bea4d1ae78bbd1e472}} 
\index{defs.h@{defs.h}!pipealloc@{pipealloc}}
\index{pipealloc@{pipealloc}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{pipealloc()}{pipealloc()}}
{\footnotesize\ttfamily int pipealloc (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structfile}{file}} $\ast$$\ast$}]{f0,  }\item[{struct \mbox{\hyperlink{structfile}{file}} $\ast$$\ast$}]{f1 }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{pipe_8c_source_l00023}{23}} of file \mbox{\hyperlink{pipe_8c_source}{pipe.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00024 \{}
\DoxyCodeLine{00025   \textcolor{keyword}{struct }\mbox{\hyperlink{structpipe}{pipe}} *p;}
\DoxyCodeLine{00026 }
\DoxyCodeLine{00027   p = 0;}
\DoxyCodeLine{00028   *f0 = *f1 = 0;}
\DoxyCodeLine{00029   \textcolor{keywordflow}{if}((*f0 = \mbox{\hyperlink{defs_8h_ac56b15561658d0e74ce1c53309b8f97d}{filealloc}}()) == 0 || (*f1 = \mbox{\hyperlink{defs_8h_ac56b15561658d0e74ce1c53309b8f97d}{filealloc}}()) == 0)}
\DoxyCodeLine{00030     \textcolor{keywordflow}{goto} bad;}
\DoxyCodeLine{00031   \textcolor{keywordflow}{if}((p = (\textcolor{keyword}{struct} \mbox{\hyperlink{structpipe}{pipe}}*)\mbox{\hyperlink{defs_8h_a5e965f6365c721b5b23c12d16d45c3dc}{kalloc}}()) == 0)}
\DoxyCodeLine{00032     \textcolor{keywordflow}{goto} bad;}
\DoxyCodeLine{00033   p-\/>\mbox{\hyperlink{structpipe_a7bdc57b39ef97dda61e468ad9e8dbfba}{readopen}} = 1;}
\DoxyCodeLine{00034   p-\/>\mbox{\hyperlink{structpipe_a9538da698ddd63615c991a318094663b}{writeopen}} = 1;}
\DoxyCodeLine{00035   p-\/>\mbox{\hyperlink{structpipe_a419b6fc2780013358de51c91371dac66}{nwrite}} = 0;}
\DoxyCodeLine{00036   p-\/>\mbox{\hyperlink{structpipe_ad71eb56c445f9178dac07ae47f352fd1}{nread}} = 0;}
\DoxyCodeLine{00037   \mbox{\hyperlink{defs_8h_ab56d728e6966819a0260c358d3ac3419}{initlock}}(\&p-\/>\mbox{\hyperlink{structpipe_a0ce399a2ba316d11cb8e678069bfd5b4}{lock}}, \textcolor{stringliteral}{"{}pipe"{}});}
\DoxyCodeLine{00038   (*f0)-\/>type = FD\_PIPE;}
\DoxyCodeLine{00039   (*f0)-\/>readable = 1;}
\DoxyCodeLine{00040   (*f0)-\/>writable = 0;}
\DoxyCodeLine{00041   (*f0)-\/>pipe = p;}
\DoxyCodeLine{00042   (*f1)-\/>type = FD\_PIPE;}
\DoxyCodeLine{00043   (*f1)-\/>readable = 0;}
\DoxyCodeLine{00044   (*f1)-\/>writable = 1;}
\DoxyCodeLine{00045   (*f1)-\/>pipe = p;}
\DoxyCodeLine{00046   \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{00047 }
\DoxyCodeLine{00048 \textcolor{comment}{//PAGEBREAK: 20}}
\DoxyCodeLine{00049  bad:}
\DoxyCodeLine{00050   \textcolor{keywordflow}{if}(p)}
\DoxyCodeLine{00051     \mbox{\hyperlink{defs_8h_ae79d6a7d0901b7c081cfded3f916d5bd}{kfree}}((\textcolor{keywordtype}{char}*)p);}
\DoxyCodeLine{00052   \textcolor{keywordflow}{if}(*f0)}
\DoxyCodeLine{00053     \mbox{\hyperlink{defs_8h_ac865ee0b2d70f753d61d1fefef9de0f6}{fileclose}}(*f0);}
\DoxyCodeLine{00054   \textcolor{keywordflow}{if}(*f1)}
\DoxyCodeLine{00055     \mbox{\hyperlink{defs_8h_ac865ee0b2d70f753d61d1fefef9de0f6}{fileclose}}(*f1);}
\DoxyCodeLine{00056   \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{00057 \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_a3de41eab56ff42bea4d1ae78bbd1e472_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=227pt]{d5/d64/defs_8h_a3de41eab56ff42bea4d1ae78bbd1e472_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_af6220973e389c74782d76ae641a5e7db}\label{defs_8h_af6220973e389c74782d76ae641a5e7db}} 
\index{defs.h@{defs.h}!pipeclose@{pipeclose}}
\index{pipeclose@{pipeclose}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{pipeclose()}{pipeclose()}}
{\footnotesize\ttfamily void pipeclose (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structpipe}{pipe}} $\ast$}]{p,  }\item[{int}]{writable }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{pipe_8c_source_l00060}{60}} of file \mbox{\hyperlink{pipe_8c_source}{pipe.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00061 \{}
\DoxyCodeLine{00062   \mbox{\hyperlink{defs_8h_afe4ef8638f1ecb962a6e67fb086ee3b8}{acquire}}(\&p-\/>\mbox{\hyperlink{structpipe_a0ce399a2ba316d11cb8e678069bfd5b4}{lock}});}
\DoxyCodeLine{00063   \textcolor{keywordflow}{if}(writable)\{}
\DoxyCodeLine{00064     p-\/>\mbox{\hyperlink{structpipe_a9538da698ddd63615c991a318094663b}{writeopen}} = 0;}
\DoxyCodeLine{00065     \mbox{\hyperlink{defs_8h_a245b56417239f499389b2e806bd99254}{wakeup}}(\&p-\/>\mbox{\hyperlink{structpipe_ad71eb56c445f9178dac07ae47f352fd1}{nread}});}
\DoxyCodeLine{00066   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00067     p-\/>\mbox{\hyperlink{structpipe_a7bdc57b39ef97dda61e468ad9e8dbfba}{readopen}} = 0;}
\DoxyCodeLine{00068     \mbox{\hyperlink{defs_8h_a245b56417239f499389b2e806bd99254}{wakeup}}(\&p-\/>\mbox{\hyperlink{structpipe_a419b6fc2780013358de51c91371dac66}{nwrite}});}
\DoxyCodeLine{00069   \}}
\DoxyCodeLine{00070   \textcolor{keywordflow}{if}(p-\/>\mbox{\hyperlink{structpipe_a7bdc57b39ef97dda61e468ad9e8dbfba}{readopen}} == 0 \&\& p-\/>\mbox{\hyperlink{structpipe_a9538da698ddd63615c991a318094663b}{writeopen}} == 0)\{}
\DoxyCodeLine{00071     \mbox{\hyperlink{defs_8h_a4f8616948f3dbce65671f666eed1d669}{release}}(\&p-\/>\mbox{\hyperlink{structpipe_a0ce399a2ba316d11cb8e678069bfd5b4}{lock}});}
\DoxyCodeLine{00072     \mbox{\hyperlink{defs_8h_ae79d6a7d0901b7c081cfded3f916d5bd}{kfree}}((\textcolor{keywordtype}{char}*)p);}
\DoxyCodeLine{00073   \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{00074     \mbox{\hyperlink{defs_8h_a4f8616948f3dbce65671f666eed1d669}{release}}(\&p-\/>\mbox{\hyperlink{structpipe_a0ce399a2ba316d11cb8e678069bfd5b4}{lock}});}
\DoxyCodeLine{00075 \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_af6220973e389c74782d76ae641a5e7db_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=550pt]{d5/d64/defs_8h_af6220973e389c74782d76ae641a5e7db_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_acd589a0d0d6d34b446baf33755eef519}\label{defs_8h_acd589a0d0d6d34b446baf33755eef519}} 
\index{defs.h@{defs.h}!piperead@{piperead}}
\index{piperead@{piperead}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{piperead()}{piperead()}}
{\footnotesize\ttfamily int piperead (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structpipe}{pipe}} $\ast$}]{p,  }\item[{char $\ast$}]{addr,  }\item[{int}]{n }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{pipe_8c_source_l00101}{101}} of file \mbox{\hyperlink{pipe_8c_source}{pipe.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00102 \{}
\DoxyCodeLine{00103   \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{00104 }
\DoxyCodeLine{00105   \mbox{\hyperlink{defs_8h_afe4ef8638f1ecb962a6e67fb086ee3b8}{acquire}}(\&p-\/>\mbox{\hyperlink{structpipe_a0ce399a2ba316d11cb8e678069bfd5b4}{lock}});}
\DoxyCodeLine{00106   \textcolor{keywordflow}{while}(p-\/>\mbox{\hyperlink{structpipe_ad71eb56c445f9178dac07ae47f352fd1}{nread}} == p-\/>\mbox{\hyperlink{structpipe_a419b6fc2780013358de51c91371dac66}{nwrite}} \&\& p-\/>\mbox{\hyperlink{structpipe_a9538da698ddd63615c991a318094663b}{writeopen}})\{  \textcolor{comment}{//DOC: pipe-\/empty}}
\DoxyCodeLine{00107     \textcolor{keywordflow}{if}(\mbox{\hyperlink{defs_8h_a3d2327db1e34643f4a9e6a07c8cc62c6}{myproc}}()-\/>killed)\{}
\DoxyCodeLine{00108       \mbox{\hyperlink{defs_8h_a4f8616948f3dbce65671f666eed1d669}{release}}(\&p-\/>\mbox{\hyperlink{structpipe_a0ce399a2ba316d11cb8e678069bfd5b4}{lock}});}
\DoxyCodeLine{00109       \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{00110     \}}
\DoxyCodeLine{00111     \mbox{\hyperlink{defs_8h_aca4a88f06b3ebbcc04330f7ae06c8507}{sleep}}(\&p-\/>\mbox{\hyperlink{structpipe_ad71eb56c445f9178dac07ae47f352fd1}{nread}}, \&p-\/>\mbox{\hyperlink{structpipe_a0ce399a2ba316d11cb8e678069bfd5b4}{lock}}); \textcolor{comment}{//DOC: piperead-\/sleep}}
\DoxyCodeLine{00112   \}}
\DoxyCodeLine{00113   \textcolor{keywordflow}{for}(i = 0; i < n; i++)\{  \textcolor{comment}{//DOC: piperead-\/copy}}
\DoxyCodeLine{00114     \textcolor{keywordflow}{if}(p-\/>\mbox{\hyperlink{structpipe_ad71eb56c445f9178dac07ae47f352fd1}{nread}} == p-\/>\mbox{\hyperlink{structpipe_a419b6fc2780013358de51c91371dac66}{nwrite}})}
\DoxyCodeLine{00115       \textcolor{keywordflow}{break};}
\DoxyCodeLine{00116     addr[i] = p-\/>\mbox{\hyperlink{structpipe_ab02ae9fa0b8b092512c28c7c080f0c7b}{data}}[p-\/>\mbox{\hyperlink{structpipe_ad71eb56c445f9178dac07ae47f352fd1}{nread}}++ \% \mbox{\hyperlink{pipe_8c_ad3dc9214a710d7a6c516cbaa2a12a1de}{PIPESIZE}}];}
\DoxyCodeLine{00117   \}}
\DoxyCodeLine{00118   \mbox{\hyperlink{defs_8h_a245b56417239f499389b2e806bd99254}{wakeup}}(\&p-\/>\mbox{\hyperlink{structpipe_a419b6fc2780013358de51c91371dac66}{nwrite}});  \textcolor{comment}{//DOC: piperead-\/wakeup}}
\DoxyCodeLine{00119   \mbox{\hyperlink{defs_8h_a4f8616948f3dbce65671f666eed1d669}{release}}(\&p-\/>\mbox{\hyperlink{structpipe_a0ce399a2ba316d11cb8e678069bfd5b4}{lock}});}
\DoxyCodeLine{00120   \textcolor{keywordflow}{return} i;}
\DoxyCodeLine{00121 \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_acd589a0d0d6d34b446baf33755eef519_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=309pt]{d5/d64/defs_8h_acd589a0d0d6d34b446baf33755eef519_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_ae63b0db4ca2cbb2025b89d977c6535b1}\label{defs_8h_ae63b0db4ca2cbb2025b89d977c6535b1}} 
\index{defs.h@{defs.h}!pipewrite@{pipewrite}}
\index{pipewrite@{pipewrite}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{pipewrite()}{pipewrite()}}
{\footnotesize\ttfamily int pipewrite (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structpipe}{pipe}} $\ast$}]{p,  }\item[{char $\ast$}]{addr,  }\item[{int}]{n }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{pipe_8c_source_l00079}{79}} of file \mbox{\hyperlink{pipe_8c_source}{pipe.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00080 \{}
\DoxyCodeLine{00081   \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{00082 }
\DoxyCodeLine{00083   \mbox{\hyperlink{defs_8h_afe4ef8638f1ecb962a6e67fb086ee3b8}{acquire}}(\&p-\/>\mbox{\hyperlink{structpipe_a0ce399a2ba316d11cb8e678069bfd5b4}{lock}});}
\DoxyCodeLine{00084   \textcolor{keywordflow}{for}(i = 0; i < n; i++)\{}
\DoxyCodeLine{00085     \textcolor{keywordflow}{while}(p-\/>\mbox{\hyperlink{structpipe_a419b6fc2780013358de51c91371dac66}{nwrite}} == p-\/>\mbox{\hyperlink{structpipe_ad71eb56c445f9178dac07ae47f352fd1}{nread}} + \mbox{\hyperlink{pipe_8c_ad3dc9214a710d7a6c516cbaa2a12a1de}{PIPESIZE}})\{  \textcolor{comment}{//DOC: pipewrite-\/full}}
\DoxyCodeLine{00086       \textcolor{keywordflow}{if}(p-\/>\mbox{\hyperlink{structpipe_a7bdc57b39ef97dda61e468ad9e8dbfba}{readopen}} == 0 || \mbox{\hyperlink{defs_8h_a3d2327db1e34643f4a9e6a07c8cc62c6}{myproc}}()-\/>killed)\{}
\DoxyCodeLine{00087         \mbox{\hyperlink{defs_8h_a4f8616948f3dbce65671f666eed1d669}{release}}(\&p-\/>\mbox{\hyperlink{structpipe_a0ce399a2ba316d11cb8e678069bfd5b4}{lock}});}
\DoxyCodeLine{00088         \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{00089       \}}
\DoxyCodeLine{00090       \mbox{\hyperlink{defs_8h_a245b56417239f499389b2e806bd99254}{wakeup}}(\&p-\/>\mbox{\hyperlink{structpipe_ad71eb56c445f9178dac07ae47f352fd1}{nread}});}
\DoxyCodeLine{00091       \mbox{\hyperlink{defs_8h_aca4a88f06b3ebbcc04330f7ae06c8507}{sleep}}(\&p-\/>\mbox{\hyperlink{structpipe_a419b6fc2780013358de51c91371dac66}{nwrite}}, \&p-\/>\mbox{\hyperlink{structpipe_a0ce399a2ba316d11cb8e678069bfd5b4}{lock}});  \textcolor{comment}{//DOC: pipewrite-\/sleep}}
\DoxyCodeLine{00092     \}}
\DoxyCodeLine{00093     p-\/>\mbox{\hyperlink{structpipe_ab02ae9fa0b8b092512c28c7c080f0c7b}{data}}[p-\/>\mbox{\hyperlink{structpipe_a419b6fc2780013358de51c91371dac66}{nwrite}}++ \% \mbox{\hyperlink{pipe_8c_ad3dc9214a710d7a6c516cbaa2a12a1de}{PIPESIZE}}] = addr[i];}
\DoxyCodeLine{00094   \}}
\DoxyCodeLine{00095   \mbox{\hyperlink{defs_8h_a245b56417239f499389b2e806bd99254}{wakeup}}(\&p-\/>\mbox{\hyperlink{structpipe_ad71eb56c445f9178dac07ae47f352fd1}{nread}});  \textcolor{comment}{//DOC: pipewrite-\/wakeup1}}
\DoxyCodeLine{00096   \mbox{\hyperlink{defs_8h_a4f8616948f3dbce65671f666eed1d669}{release}}(\&p-\/>\mbox{\hyperlink{structpipe_a0ce399a2ba316d11cb8e678069bfd5b4}{lock}});}
\DoxyCodeLine{00097   \textcolor{keywordflow}{return} n;}
\DoxyCodeLine{00098 \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_ae63b0db4ca2cbb2025b89d977c6535b1_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=317pt]{d5/d64/defs_8h_ae63b0db4ca2cbb2025b89d977c6535b1_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_ae3424f669269fef400ce29c3aeb43fdb}\label{defs_8h_ae3424f669269fef400ce29c3aeb43fdb}} 
\index{defs.h@{defs.h}!popcli@{popcli}}
\index{popcli@{popcli}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{popcli()}{popcli()}}
{\footnotesize\ttfamily void popcli (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{spinlock_8c_source_l00117}{117}} of file \mbox{\hyperlink{spinlock_8c_source}{spinlock.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00118 \{}
\DoxyCodeLine{00119   \textcolor{keywordflow}{if}(readeflags()\&\mbox{\hyperlink{mmu_8h_ab481068357bb42797aafe91864a2d085}{FL\_IF}})}
\DoxyCodeLine{00120     \mbox{\hyperlink{console_8c_a95c0aca5d6d7487933984f08b189917a}{panic}}(\textcolor{stringliteral}{"{}popcli -\/ interruptible"{}});}
\DoxyCodeLine{00121   \textcolor{keywordflow}{if}(-\/-\/\mbox{\hyperlink{defs_8h_ad427959ad025dabd8cd393b27ec39160}{mycpu}}()-\/>ncli < 0)}
\DoxyCodeLine{00122     \mbox{\hyperlink{console_8c_a95c0aca5d6d7487933984f08b189917a}{panic}}(\textcolor{stringliteral}{"{}popcli"{}});}
\DoxyCodeLine{00123   \textcolor{keywordflow}{if}(\mbox{\hyperlink{defs_8h_ad427959ad025dabd8cd393b27ec39160}{mycpu}}()-\/>ncli == 0 \&\& \mbox{\hyperlink{defs_8h_ad427959ad025dabd8cd393b27ec39160}{mycpu}}()-\/>intena)}
\DoxyCodeLine{00124     sti();}
\DoxyCodeLine{00125 \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_ae3424f669269fef400ce29c3aeb43fdb_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=550pt]{d5/d64/defs_8h_ae3424f669269fef400ce29c3aeb43fdb_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_a7f185044294ebb57521c73f723990164}\label{defs_8h_a7f185044294ebb57521c73f723990164}} 
\index{defs.h@{defs.h}!procdump@{procdump}}
\index{procdump@{procdump}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{procdump()}{procdump()}}
{\footnotesize\ttfamily void procdump (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{proc_8c_source_l00504}{504}} of file \mbox{\hyperlink{proc_8c_source}{proc.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00505 \{}
\DoxyCodeLine{00506   \textcolor{keyword}{static} \textcolor{keywordtype}{char} *states[] = \{}
\DoxyCodeLine{00507   [\mbox{\hyperlink{proc_8h_aa1ced7d2b60040fded3fa873d0c03ba7aa09b651ef326a9d8efcee5cc5b720ab4}{UNUSED}}]    \textcolor{stringliteral}{"{}unused"{}},}
\DoxyCodeLine{00508   [\mbox{\hyperlink{proc_8h_aa1ced7d2b60040fded3fa873d0c03ba7aaed0f3d976d25b54cb7c895ce591febb}{EMBRYO}}]    \textcolor{stringliteral}{"{}embryo"{}},}
\DoxyCodeLine{00509   [\mbox{\hyperlink{proc_8h_aa1ced7d2b60040fded3fa873d0c03ba7a488282601451a751e0f0e770b15d4235}{SLEEPING}}]  \textcolor{stringliteral}{"{}sleep "{}},}
\DoxyCodeLine{00510   [\mbox{\hyperlink{proc_8h_aa1ced7d2b60040fded3fa873d0c03ba7a269b90433e40460a2c0044a0b3e15694}{RUNNABLE}}]  \textcolor{stringliteral}{"{}runble"{}},}
\DoxyCodeLine{00511   [\mbox{\hyperlink{proc_8h_aa1ced7d2b60040fded3fa873d0c03ba7a1061be6c3fb88d32829cba6f6b2be304}{RUNNING}}]   \textcolor{stringliteral}{"{}run   "{}},}
\DoxyCodeLine{00512   [\mbox{\hyperlink{proc_8h_aa1ced7d2b60040fded3fa873d0c03ba7a5dfb36109b24f39d54d5c3f48f53def8}{ZOMBIE}}]    \textcolor{stringliteral}{"{}zombie"{}}}
\DoxyCodeLine{00513   \};}
\DoxyCodeLine{00514   \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{00515   \textcolor{keyword}{struct }\mbox{\hyperlink{structproc}{proc}} *p;}
\DoxyCodeLine{00516   \textcolor{keywordtype}{char} *\mbox{\hyperlink{structproc_a0f2fe91548a1382672ae26e29ca9e736}{state}};}
\DoxyCodeLine{00517   \mbox{\hyperlink{types_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}} pc[10];}
\DoxyCodeLine{00518 }
\DoxyCodeLine{00519   \textcolor{keywordflow}{for}(p = \mbox{\hyperlink{proc_8c_addf39d613ca9a58e7e6080a2e454421a}{ptable}}.proc; p < \&\mbox{\hyperlink{proc_8c_addf39d613ca9a58e7e6080a2e454421a}{ptable}}.proc[\mbox{\hyperlink{param_8h_a810c5b751df5bb30588613ed91095129}{NPROC}}]; p++)\{}
\DoxyCodeLine{00520     \textcolor{keywordflow}{if}(p-\/>\mbox{\hyperlink{structproc_a0f2fe91548a1382672ae26e29ca9e736}{state}} == \mbox{\hyperlink{proc_8h_aa1ced7d2b60040fded3fa873d0c03ba7aa09b651ef326a9d8efcee5cc5b720ab4}{UNUSED}})}
\DoxyCodeLine{00521       \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00522     \textcolor{keywordflow}{if}(p-\/>\mbox{\hyperlink{structproc_a0f2fe91548a1382672ae26e29ca9e736}{state}} >= 0 \&\& p-\/>\mbox{\hyperlink{structproc_a0f2fe91548a1382672ae26e29ca9e736}{state}} < \mbox{\hyperlink{defs_8h_afacd331296c10f360da7640e0d68429f}{NELEM}}(states) \&\& states[p-\/>\mbox{\hyperlink{structproc_a0f2fe91548a1382672ae26e29ca9e736}{state}}])}
\DoxyCodeLine{00523       \mbox{\hyperlink{structproc_a0f2fe91548a1382672ae26e29ca9e736}{state}} = states[p-\/>\mbox{\hyperlink{structproc_a0f2fe91548a1382672ae26e29ca9e736}{state}}];}
\DoxyCodeLine{00524     \textcolor{keywordflow}{else}}
\DoxyCodeLine{00525       \mbox{\hyperlink{structproc_a0f2fe91548a1382672ae26e29ca9e736}{state}} = \textcolor{stringliteral}{"{}???"{}};}
\DoxyCodeLine{00526     \mbox{\hyperlink{console_8c_a90f0742d846503e4ed1804f1df421ec6}{cprintf}}(\textcolor{stringliteral}{"{}\%d \%s \%s"{}}, p-\/>\mbox{\hyperlink{structproc_acf2bdf54d1f957ccbcdc987007029944}{pid}}, \mbox{\hyperlink{structproc_a0f2fe91548a1382672ae26e29ca9e736}{state}}, p-\/>\mbox{\hyperlink{structproc_ac04af53e17d24b90c3cbfab56d658d62}{name}});}
\DoxyCodeLine{00527     \textcolor{keywordflow}{if}(p-\/>\mbox{\hyperlink{structproc_a0f2fe91548a1382672ae26e29ca9e736}{state}} == \mbox{\hyperlink{proc_8h_aa1ced7d2b60040fded3fa873d0c03ba7a488282601451a751e0f0e770b15d4235}{SLEEPING}})\{}
\DoxyCodeLine{00528       \mbox{\hyperlink{defs_8h_a4105de9e2969515d6c6c795c4386f69f}{getcallerpcs}}((\mbox{\hyperlink{types_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}}*)p-\/>\mbox{\hyperlink{structproc_ae0d9bffe1ad1c7d60dd2733be0a2333c}{context}}-\/>\mbox{\hyperlink{structcontext_ac9640ddc2e90e4213ba9847bbe1b0e57}{ebp}}+2, pc);}
\DoxyCodeLine{00529       \textcolor{keywordflow}{for}(i=0; i<10 \&\& pc[i] != 0; i++)}
\DoxyCodeLine{00530         \mbox{\hyperlink{console_8c_a90f0742d846503e4ed1804f1df421ec6}{cprintf}}(\textcolor{stringliteral}{"{} \%p"{}}, pc[i]);}
\DoxyCodeLine{00531     \}}
\DoxyCodeLine{00532     \mbox{\hyperlink{console_8c_a90f0742d846503e4ed1804f1df421ec6}{cprintf}}(\textcolor{stringliteral}{"{}\(\backslash\)n"{}});}
\DoxyCodeLine{00533   \}}
\DoxyCodeLine{00534 \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_a7f185044294ebb57521c73f723990164_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_a7f185044294ebb57521c73f723990164_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_a206b749d1b7768dadce61cbcde7e0f1c}\label{defs_8h_a206b749d1b7768dadce61cbcde7e0f1c}} 
\index{defs.h@{defs.h}!pushcli@{pushcli}}
\index{pushcli@{pushcli}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{pushcli()}{pushcli()}}
{\footnotesize\ttfamily void pushcli (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{spinlock_8c_source_l00105}{105}} of file \mbox{\hyperlink{spinlock_8c_source}{spinlock.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00106 \{}
\DoxyCodeLine{00107   \textcolor{keywordtype}{int} eflags;}
\DoxyCodeLine{00108 }
\DoxyCodeLine{00109   eflags = readeflags();}
\DoxyCodeLine{00110   cli();}
\DoxyCodeLine{00111   \textcolor{keywordflow}{if}(\mbox{\hyperlink{defs_8h_ad427959ad025dabd8cd393b27ec39160}{mycpu}}()-\/>ncli == 0)}
\DoxyCodeLine{00112     \mbox{\hyperlink{defs_8h_ad427959ad025dabd8cd393b27ec39160}{mycpu}}()-\/>\mbox{\hyperlink{structcpu_a26fc271fea8af30d67fc2ae22ef0a82f}{intena}} = eflags \& \mbox{\hyperlink{mmu_8h_ab481068357bb42797aafe91864a2d085}{FL\_IF}};}
\DoxyCodeLine{00113   \mbox{\hyperlink{defs_8h_ad427959ad025dabd8cd393b27ec39160}{mycpu}}()-\/>\mbox{\hyperlink{structcpu_a9ccad8ae031c295f86e96de26df24805}{ncli}} += 1;}
\DoxyCodeLine{00114 \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_a206b749d1b7768dadce61cbcde7e0f1c_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=550pt]{d5/d64/defs_8h_a206b749d1b7768dadce61cbcde7e0f1c_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_a2415273b06f31f0f2587b7325588a7e4}\label{defs_8h_a2415273b06f31f0f2587b7325588a7e4}} 
\index{defs.h@{defs.h}!readi@{readi}}
\index{readi@{readi}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{readi()}{readi()}}
{\footnotesize\ttfamily int readi (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structinode}{inode}} $\ast$}]{ip,  }\item[{char $\ast$}]{dst,  }\item[{\mbox{\hyperlink{types_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}}}]{off,  }\item[{\mbox{\hyperlink{types_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}}}]{n }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{fs_8c_source_l00453}{453}} of file \mbox{\hyperlink{fs_8c_source}{fs.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00454 \{}
\DoxyCodeLine{00455   \mbox{\hyperlink{types_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}} tot, m;}
\DoxyCodeLine{00456   \textcolor{keyword}{struct }\mbox{\hyperlink{structbuf}{buf}} *bp;}
\DoxyCodeLine{00457 }
\DoxyCodeLine{00458   \textcolor{keywordflow}{if}(ip-\/>\mbox{\hyperlink{structinode_a8d74bec2898785c057111c328d23fda2}{type}} == \mbox{\hyperlink{stat_8h_a62b045a3e4fdf204bdddda0f3fc3d8c4}{T\_DEV}})\{}
\DoxyCodeLine{00459     \textcolor{keywordflow}{if}(ip-\/>\mbox{\hyperlink{structinode_a34af7242018a977dace5730683850875}{major}} < 0 || ip-\/>\mbox{\hyperlink{structinode_a34af7242018a977dace5730683850875}{major}} >= \mbox{\hyperlink{param_8h_aa564a41c8409694da49b0badf2bb2853}{NDEV}} || !\mbox{\hyperlink{structdevsw}{devsw}}[ip-\/>\mbox{\hyperlink{structinode_a34af7242018a977dace5730683850875}{major}}].\mbox{\hyperlink{structdevsw_a4efbe00d0031a1c9005ef2186947ea37}{read}})}
\DoxyCodeLine{00460       \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{00461     \textcolor{keywordflow}{return} \mbox{\hyperlink{structdevsw}{devsw}}[ip-\/>\mbox{\hyperlink{structinode_a34af7242018a977dace5730683850875}{major}}].\mbox{\hyperlink{structdevsw_a4efbe00d0031a1c9005ef2186947ea37}{read}}(ip, dst, n);}
\DoxyCodeLine{00462   \}}
\DoxyCodeLine{00463 }
\DoxyCodeLine{00464   \textcolor{keywordflow}{if}(off > ip-\/>\mbox{\hyperlink{structinode_a918af769c48a8ca8afac057bf83d12de}{size}} || off + n < off)}
\DoxyCodeLine{00465     \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{00466   \textcolor{keywordflow}{if}(off + n > ip-\/>\mbox{\hyperlink{structinode_a918af769c48a8ca8afac057bf83d12de}{size}})}
\DoxyCodeLine{00467     n = ip-\/>\mbox{\hyperlink{structinode_a918af769c48a8ca8afac057bf83d12de}{size}} -\/ off;}
\DoxyCodeLine{00468 }
\DoxyCodeLine{00469   \textcolor{keywordflow}{for}(tot=0; tot<n; tot+=m, off+=m, dst+=m)\{}
\DoxyCodeLine{00470     bp = \mbox{\hyperlink{bio_8c_a30b8d2ef2300ed8e3d879a428fe39898}{bread}}(ip-\/>\mbox{\hyperlink{structinode_a121742a89c4531f03a7de1613d5be605}{dev}}, bmap(ip, off/\mbox{\hyperlink{fs_8h_a403cf3149c084cea115b85c90721039a}{BSIZE}}));}
\DoxyCodeLine{00471     m = \mbox{\hyperlink{fs_8c_ac6afabdc09a49a433ee19d8a9486056d}{min}}(n -\/ tot, \mbox{\hyperlink{fs_8h_a403cf3149c084cea115b85c90721039a}{BSIZE}} -\/ off\%\mbox{\hyperlink{fs_8h_a403cf3149c084cea115b85c90721039a}{BSIZE}});}
\DoxyCodeLine{00472     \mbox{\hyperlink{defs_8h_ac152fff34fe03e497d35b1d4c47f1445}{memmove}}(dst, bp-\/>\mbox{\hyperlink{structbuf_ab0ec38784ab94ed35e575cf6d33912d2}{data}} + off\%\mbox{\hyperlink{fs_8h_a403cf3149c084cea115b85c90721039a}{BSIZE}}, m);}
\DoxyCodeLine{00473     \mbox{\hyperlink{bio_8c_ab5335aeb503731104314321a78a6d727}{brelse}}(bp);}
\DoxyCodeLine{00474   \}}
\DoxyCodeLine{00475   \textcolor{keywordflow}{return} n;}
\DoxyCodeLine{00476 \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_a2415273b06f31f0f2587b7325588a7e4_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_a2415273b06f31f0f2587b7325588a7e4_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_aff0080b2133027be2e525ca088b40e78}\label{defs_8h_aff0080b2133027be2e525ca088b40e78}} 
\index{defs.h@{defs.h}!readsb@{readsb}}
\index{readsb@{readsb}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{readsb()}{readsb()}}
{\footnotesize\ttfamily void readsb (\begin{DoxyParamCaption}\item[{int}]{dev,  }\item[{struct \mbox{\hyperlink{structsuperblock}{superblock}} $\ast$}]{sb }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{fs_8c_source_l00032}{32}} of file \mbox{\hyperlink{fs_8c_source}{fs.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00033 \{}
\DoxyCodeLine{00034   \textcolor{keyword}{struct }\mbox{\hyperlink{structbuf}{buf}} *bp;}
\DoxyCodeLine{00035 }
\DoxyCodeLine{00036   bp = \mbox{\hyperlink{bio_8c_a30b8d2ef2300ed8e3d879a428fe39898}{bread}}(\mbox{\hyperlink{structbuf_ac96082c2b5f22133ac7092ef81487227}{dev}}, 1);}
\DoxyCodeLine{00037   \mbox{\hyperlink{defs_8h_ac152fff34fe03e497d35b1d4c47f1445}{memmove}}(\mbox{\hyperlink{fs_8c_a0248d0bac625de5a1415f2f8c91f3343}{sb}}, bp-\/>\mbox{\hyperlink{structbuf_ab0ec38784ab94ed35e575cf6d33912d2}{data}}, \textcolor{keyword}{sizeof}(*\mbox{\hyperlink{fs_8c_a0248d0bac625de5a1415f2f8c91f3343}{sb}}));}
\DoxyCodeLine{00038   \mbox{\hyperlink{bio_8c_ab5335aeb503731104314321a78a6d727}{brelse}}(bp);}
\DoxyCodeLine{00039 \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_aff0080b2133027be2e525ca088b40e78_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=284pt]{d5/d64/defs_8h_aff0080b2133027be2e525ca088b40e78_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_a4f8616948f3dbce65671f666eed1d669}\label{defs_8h_a4f8616948f3dbce65671f666eed1d669}} 
\index{defs.h@{defs.h}!release@{release}}
\index{release@{release}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{release()}{release()}}
{\footnotesize\ttfamily void release (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structspinlock}{spinlock}} $\ast$}]{lk }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{spinlock_8c_source_l00047}{47}} of file \mbox{\hyperlink{spinlock_8c_source}{spinlock.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00048 \{}
\DoxyCodeLine{00049   \textcolor{keywordflow}{if}(!\mbox{\hyperlink{spinlock_8c_aea48df3e5cfb903179ad3dc78ab502d9}{holding}}(lk))}
\DoxyCodeLine{00050     \mbox{\hyperlink{console_8c_a95c0aca5d6d7487933984f08b189917a}{panic}}(\textcolor{stringliteral}{"{}release"{}});}
\DoxyCodeLine{00051 }
\DoxyCodeLine{00052   lk-\/>\mbox{\hyperlink{structspinlock_ac9ef3f16f664094198af0b9063e23fe0}{pcs}}[0] = 0;}
\DoxyCodeLine{00053   lk-\/>\mbox{\hyperlink{structspinlock_a290ae772c8ccb9e8c1580204c31a7f88}{cpu}} = 0;}
\DoxyCodeLine{00054 }
\DoxyCodeLine{00055   \textcolor{comment}{// Tell the C compiler and the processor to not move loads or stores}}
\DoxyCodeLine{00056   \textcolor{comment}{// past this point, to ensure that all the stores in the critical}}
\DoxyCodeLine{00057   \textcolor{comment}{// section are visible to other cores before the lock is released.}}
\DoxyCodeLine{00058   \textcolor{comment}{// Both the C compiler and the hardware may re-\/order loads and}}
\DoxyCodeLine{00059   \textcolor{comment}{// stores; \_\_sync\_synchronize() tells them both not to.}}
\DoxyCodeLine{00060   \_\_sync\_synchronize();}
\DoxyCodeLine{00061 }
\DoxyCodeLine{00062   \textcolor{comment}{// Release the lock, equivalent to lk-\/>locked = 0.}}
\DoxyCodeLine{00063   \textcolor{comment}{// This code can't use a C assignment, since it might}}
\DoxyCodeLine{00064   \textcolor{comment}{// not be atomic. A real OS would use C atomics here.}}
\DoxyCodeLine{00065   \textcolor{keyword}{asm} \textcolor{keyword}{volatile}(\textcolor{stringliteral}{"{}movl \$0, \%0"{}} : \textcolor{stringliteral}{"{}+m"{}} (lk-\/>\mbox{\hyperlink{structspinlock_a48f3007579f644934d9aba91e5378c03}{locked}}) : );}
\DoxyCodeLine{00066 }
\DoxyCodeLine{00067   \mbox{\hyperlink{spinlock_8c_ae3424f669269fef400ce29c3aeb43fdb}{popcli}}();}
\DoxyCodeLine{00068 \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_a4f8616948f3dbce65671f666eed1d669_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=550pt]{d5/d64/defs_8h_a4f8616948f3dbce65671f666eed1d669_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_a840b479c87b1c047d7142f58e0ad0b27}\label{defs_8h_a840b479c87b1c047d7142f58e0ad0b27}} 
\index{defs.h@{defs.h}!releasesleep@{releasesleep}}
\index{releasesleep@{releasesleep}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{releasesleep()}{releasesleep()}}
{\footnotesize\ttfamily void releasesleep (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structsleeplock}{sleeplock}} $\ast$}]{lk }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{sleeplock_8c_source_l00035}{35}} of file \mbox{\hyperlink{sleeplock_8c_source}{sleeplock.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00036 \{}
\DoxyCodeLine{00037   \mbox{\hyperlink{defs_8h_afe4ef8638f1ecb962a6e67fb086ee3b8}{acquire}}(\&lk-\/>\mbox{\hyperlink{structsleeplock_a077241ea0e720d228d853208444c4c9d}{lk}});}
\DoxyCodeLine{00038   lk-\/>\mbox{\hyperlink{structsleeplock_ac5cfe608994a41b24cb1c0fd722910c3}{locked}} = 0;}
\DoxyCodeLine{00039   lk-\/>\mbox{\hyperlink{structsleeplock_a99a4c6a784956ab1c391a12af475a55e}{pid}} = 0;}
\DoxyCodeLine{00040   \mbox{\hyperlink{defs_8h_a245b56417239f499389b2e806bd99254}{wakeup}}(lk);}
\DoxyCodeLine{00041   \mbox{\hyperlink{defs_8h_a4f8616948f3dbce65671f666eed1d669}{release}}(\&lk-\/>\mbox{\hyperlink{structsleeplock_a077241ea0e720d228d853208444c4c9d}{lk}});}
\DoxyCodeLine{00042 \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_a840b479c87b1c047d7142f58e0ad0b27_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_a840b479c87b1c047d7142f58e0ad0b27_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_aa406a54805a570dfe266281876dc5d69}\label{defs_8h_aa406a54805a570dfe266281876dc5d69}} 
\index{defs.h@{defs.h}!safestrcpy@{safestrcpy}}
\index{safestrcpy@{safestrcpy}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{safestrcpy()}{safestrcpy()}}
{\footnotesize\ttfamily char $\ast$ safestrcpy (\begin{DoxyParamCaption}\item[{char $\ast$}]{s,  }\item[{const char $\ast$}]{t,  }\item[{int}]{n }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{string_8c_source_l00083}{83}} of file \mbox{\hyperlink{string_8c_source}{string.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00084 \{}
\DoxyCodeLine{00085   \textcolor{keywordtype}{char} *os;}
\DoxyCodeLine{00086 }
\DoxyCodeLine{00087   os = s;}
\DoxyCodeLine{00088   \textcolor{keywordflow}{if}(n <= 0)}
\DoxyCodeLine{00089     \textcolor{keywordflow}{return} os;}
\DoxyCodeLine{00090   \textcolor{keywordflow}{while}(-\/-\/n > 0 \&\& (*s++ = *t++) != 0)}
\DoxyCodeLine{00091     ;}
\DoxyCodeLine{00092   *s = 0;}
\DoxyCodeLine{00093   \textcolor{keywordflow}{return} os;}
\DoxyCodeLine{00094 \}}

\end{DoxyCode}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_aa406a54805a570dfe266281876dc5d69_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_ad788da91743c333b5bed7c4a0dd12365}\label{defs_8h_ad788da91743c333b5bed7c4a0dd12365}} 
\index{defs.h@{defs.h}!sched@{sched}}
\index{sched@{sched}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{sched()}{sched()}}
{\footnotesize\ttfamily void sched (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{proc_8c_source_l00366}{366}} of file \mbox{\hyperlink{proc_8c_source}{proc.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00367 \{}
\DoxyCodeLine{00368   \textcolor{keywordtype}{int} intena;}
\DoxyCodeLine{00369   \textcolor{keyword}{struct }\mbox{\hyperlink{structproc}{proc}} *p = \mbox{\hyperlink{proc_8c_a41af0935f3989aae450cf8988cd9c3a9}{myproc}}();}
\DoxyCodeLine{00370 }
\DoxyCodeLine{00371   \textcolor{keywordflow}{if}(!\mbox{\hyperlink{defs_8h_ac44b13cc76bf4040e3baf34df75ff230}{holding}}(\&\mbox{\hyperlink{proc_8c_addf39d613ca9a58e7e6080a2e454421a}{ptable}}.lock))}
\DoxyCodeLine{00372     \mbox{\hyperlink{console_8c_a95c0aca5d6d7487933984f08b189917a}{panic}}(\textcolor{stringliteral}{"{}sched ptable.lock"{}});}
\DoxyCodeLine{00373   \textcolor{keywordflow}{if}(\mbox{\hyperlink{proc_8c_ad427959ad025dabd8cd393b27ec39160}{mycpu}}()-\/>ncli != 1)}
\DoxyCodeLine{00374     \mbox{\hyperlink{console_8c_a95c0aca5d6d7487933984f08b189917a}{panic}}(\textcolor{stringliteral}{"{}sched locks"{}});}
\DoxyCodeLine{00375   \textcolor{keywordflow}{if}(p-\/>\mbox{\hyperlink{structproc_a0f2fe91548a1382672ae26e29ca9e736}{state}} == \mbox{\hyperlink{proc_8h_aa1ced7d2b60040fded3fa873d0c03ba7a1061be6c3fb88d32829cba6f6b2be304}{RUNNING}})}
\DoxyCodeLine{00376     \mbox{\hyperlink{console_8c_a95c0aca5d6d7487933984f08b189917a}{panic}}(\textcolor{stringliteral}{"{}sched running"{}});}
\DoxyCodeLine{00377   \textcolor{keywordflow}{if}(readeflags()\&\mbox{\hyperlink{mmu_8h_ab481068357bb42797aafe91864a2d085}{FL\_IF}})}
\DoxyCodeLine{00378     \mbox{\hyperlink{console_8c_a95c0aca5d6d7487933984f08b189917a}{panic}}(\textcolor{stringliteral}{"{}sched interruptible"{}});}
\DoxyCodeLine{00379   intena = \mbox{\hyperlink{proc_8c_ad427959ad025dabd8cd393b27ec39160}{mycpu}}()-\/>\mbox{\hyperlink{structcpu_a26fc271fea8af30d67fc2ae22ef0a82f}{intena}};}
\DoxyCodeLine{00380   \mbox{\hyperlink{defs_8h_a1d9e7047d3dfb57809a2541d8387705e}{swtch}}(\&p-\/>\mbox{\hyperlink{structproc_ae0d9bffe1ad1c7d60dd2733be0a2333c}{context}}, \mbox{\hyperlink{proc_8c_ad427959ad025dabd8cd393b27ec39160}{mycpu}}()-\/>\mbox{\hyperlink{proc_8c_a9fa00b0be5d3c4781048861e2506eb63}{scheduler}});}
\DoxyCodeLine{00381   \mbox{\hyperlink{proc_8c_ad427959ad025dabd8cd393b27ec39160}{mycpu}}()-\/>\mbox{\hyperlink{structcpu_a26fc271fea8af30d67fc2ae22ef0a82f}{intena}} = intena;}
\DoxyCodeLine{00382 \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_ad788da91743c333b5bed7c4a0dd12365_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=550pt]{d5/d64/defs_8h_ad788da91743c333b5bed7c4a0dd12365_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_a9596021487afc9231319f22b71e4cb42}\label{defs_8h_a9596021487afc9231319f22b71e4cb42}} 
\index{defs.h@{defs.h}!scheduler@{scheduler}}
\index{scheduler@{scheduler}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{scheduler()}{scheduler()}}
{\footnotesize\ttfamily void scheduler (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{proc_8c_source_l00323}{323}} of file \mbox{\hyperlink{proc_8c_source}{proc.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00324 \{}
\DoxyCodeLine{00325   \textcolor{keyword}{struct }\mbox{\hyperlink{structproc}{proc}} *p;}
\DoxyCodeLine{00326   \textcolor{keyword}{struct }\mbox{\hyperlink{structcpu}{cpu}} *c = \mbox{\hyperlink{proc_8c_ad427959ad025dabd8cd393b27ec39160}{mycpu}}();}
\DoxyCodeLine{00327   c-\/>\mbox{\hyperlink{structcpu_a9e71a6265904fd644875a9ea5a413c89}{proc}} = 0;}
\DoxyCodeLine{00328   }
\DoxyCodeLine{00329   \textcolor{keywordflow}{for}(;;)\{}
\DoxyCodeLine{00330     \textcolor{comment}{// Enable interrupts on this processor.}}
\DoxyCodeLine{00331     sti();}
\DoxyCodeLine{00332 }
\DoxyCodeLine{00333     \textcolor{comment}{// Loop over process table looking for process to run.}}
\DoxyCodeLine{00334     \mbox{\hyperlink{defs_8h_afe4ef8638f1ecb962a6e67fb086ee3b8}{acquire}}(\&\mbox{\hyperlink{proc_8c_addf39d613ca9a58e7e6080a2e454421a}{ptable}}.lock);}
\DoxyCodeLine{00335     \textcolor{keywordflow}{for}(p = \mbox{\hyperlink{proc_8c_addf39d613ca9a58e7e6080a2e454421a}{ptable}}.proc; p < \&\mbox{\hyperlink{proc_8c_addf39d613ca9a58e7e6080a2e454421a}{ptable}}.proc[\mbox{\hyperlink{param_8h_a810c5b751df5bb30588613ed91095129}{NPROC}}]; p++)\{}
\DoxyCodeLine{00336       \textcolor{keywordflow}{if}(p-\/>\mbox{\hyperlink{structproc_a0f2fe91548a1382672ae26e29ca9e736}{state}} != \mbox{\hyperlink{proc_8h_aa1ced7d2b60040fded3fa873d0c03ba7a269b90433e40460a2c0044a0b3e15694}{RUNNABLE}})}
\DoxyCodeLine{00337         \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00338 }
\DoxyCodeLine{00339       \textcolor{comment}{// Switch to chosen process.  It is the process's job}}
\DoxyCodeLine{00340       \textcolor{comment}{// to release ptable.lock and then reacquire it}}
\DoxyCodeLine{00341       \textcolor{comment}{// before jumping back to us.}}
\DoxyCodeLine{00342       c-\/>\mbox{\hyperlink{structcpu_a9e71a6265904fd644875a9ea5a413c89}{proc}} = p;}
\DoxyCodeLine{00343       \mbox{\hyperlink{defs_8h_ad43d81fa3edec39a200abd0853bc84b1}{switchuvm}}(p);}
\DoxyCodeLine{00344       p-\/>\mbox{\hyperlink{structproc_a0f2fe91548a1382672ae26e29ca9e736}{state}} = \mbox{\hyperlink{proc_8h_aa1ced7d2b60040fded3fa873d0c03ba7a1061be6c3fb88d32829cba6f6b2be304}{RUNNING}};}
\DoxyCodeLine{00345 }
\DoxyCodeLine{00346       \mbox{\hyperlink{defs_8h_a1d9e7047d3dfb57809a2541d8387705e}{swtch}}(\&(c-\/>\mbox{\hyperlink{structcpu_aaa1510fdf8a2230c033d04e13e4fdd9e}{scheduler}}), p-\/>\mbox{\hyperlink{structproc_ae0d9bffe1ad1c7d60dd2733be0a2333c}{context}});}
\DoxyCodeLine{00347       \mbox{\hyperlink{defs_8h_a02ca0670bc1fe12e38453082631ff360}{switchkvm}}();}
\DoxyCodeLine{00348 }
\DoxyCodeLine{00349       \textcolor{comment}{// Process is done running for now.}}
\DoxyCodeLine{00350       \textcolor{comment}{// It should have changed its p-\/>state before coming back.}}
\DoxyCodeLine{00351       c-\/>\mbox{\hyperlink{structcpu_a9e71a6265904fd644875a9ea5a413c89}{proc}} = 0;}
\DoxyCodeLine{00352     \}}
\DoxyCodeLine{00353     \mbox{\hyperlink{defs_8h_a4f8616948f3dbce65671f666eed1d669}{release}}(\&\mbox{\hyperlink{proc_8c_addf39d613ca9a58e7e6080a2e454421a}{ptable}}.lock);}
\DoxyCodeLine{00354 }
\DoxyCodeLine{00355   \}}
\DoxyCodeLine{00356 \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_a9596021487afc9231319f22b71e4cb42_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=550pt]{d5/d64/defs_8h_a9596021487afc9231319f22b71e4cb42_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_aaf5b2814a1dbf3ef0803dff58e0a76dc}\label{defs_8h_aaf5b2814a1dbf3ef0803dff58e0a76dc}} 
\index{defs.h@{defs.h}!seginit@{seginit}}
\index{seginit@{seginit}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{seginit()}{seginit()}}
{\footnotesize\ttfamily void seginit (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{vm_8c_source_l00016}{16}} of file \mbox{\hyperlink{vm_8c_source}{vm.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00017 \{}
\DoxyCodeLine{00018   \textcolor{keyword}{struct }\mbox{\hyperlink{structcpu}{cpu}} *c;}
\DoxyCodeLine{00019 }
\DoxyCodeLine{00020   \textcolor{comment}{// Map "{}logical"{} addresses to virtual addresses using identity map.}}
\DoxyCodeLine{00021   \textcolor{comment}{// Cannot share a CODE descriptor for both kernel and user}}
\DoxyCodeLine{00022   \textcolor{comment}{// because it would have to have DPL\_USR, but the CPU forbids}}
\DoxyCodeLine{00023   \textcolor{comment}{// an interrupt from CPL=0 to DPL=3.}}
\DoxyCodeLine{00024   c = \&\mbox{\hyperlink{mp_8c_a6d2633e73724907b582dfe6938ed7bb9}{cpus}}[\mbox{\hyperlink{defs_8h_a1444de2903d3d2624a50de058d19c635}{cpuid}}()];}
\DoxyCodeLine{00025   c-\/>\mbox{\hyperlink{structcpu_aee38fb8832f8e728538b2cee877d1c09}{gdt}}[\mbox{\hyperlink{mmu_8h_a0d4e0c4c738af60d6092941469642429}{SEG\_KCODE}}] = \mbox{\hyperlink{mmu_8h_a1594ac4688d9f212e835fd38ff63e83f}{SEG}}(\mbox{\hyperlink{asm_8h_af30c683a434e0712fd83781307239cb9}{STA\_X}}|\mbox{\hyperlink{asm_8h_a6545a48f34a3fae1b04cf265f13bc8f3}{STA\_R}}, 0, 0xffffffff, 0);}
\DoxyCodeLine{00026   c-\/>\mbox{\hyperlink{structcpu_aee38fb8832f8e728538b2cee877d1c09}{gdt}}[\mbox{\hyperlink{mmu_8h_ad523d10217ef0ff5e75b7831f251d2b1}{SEG\_KDATA}}] = \mbox{\hyperlink{mmu_8h_a1594ac4688d9f212e835fd38ff63e83f}{SEG}}(\mbox{\hyperlink{asm_8h_a9321b5b232838b8b230c6b681be9a882}{STA\_W}}, 0, 0xffffffff, 0);}
\DoxyCodeLine{00027   c-\/>\mbox{\hyperlink{structcpu_aee38fb8832f8e728538b2cee877d1c09}{gdt}}[\mbox{\hyperlink{mmu_8h_a85b694d969eb01e547197c21db219f4b}{SEG\_UCODE}}] = \mbox{\hyperlink{mmu_8h_a1594ac4688d9f212e835fd38ff63e83f}{SEG}}(\mbox{\hyperlink{asm_8h_af30c683a434e0712fd83781307239cb9}{STA\_X}}|\mbox{\hyperlink{asm_8h_a6545a48f34a3fae1b04cf265f13bc8f3}{STA\_R}}, 0, 0xffffffff, \mbox{\hyperlink{mmu_8h_a060d4d4e32af81cab881fe77e58d7b78}{DPL\_USER}});}
\DoxyCodeLine{00028   c-\/>\mbox{\hyperlink{structcpu_aee38fb8832f8e728538b2cee877d1c09}{gdt}}[\mbox{\hyperlink{mmu_8h_aba0495696b4c656fda31704782648461}{SEG\_UDATA}}] = \mbox{\hyperlink{mmu_8h_a1594ac4688d9f212e835fd38ff63e83f}{SEG}}(\mbox{\hyperlink{asm_8h_a9321b5b232838b8b230c6b681be9a882}{STA\_W}}, 0, 0xffffffff, \mbox{\hyperlink{mmu_8h_a060d4d4e32af81cab881fe77e58d7b78}{DPL\_USER}});}
\DoxyCodeLine{00029   lgdt(c-\/>\mbox{\hyperlink{structcpu_aee38fb8832f8e728538b2cee877d1c09}{gdt}}, \textcolor{keyword}{sizeof}(c-\/>\mbox{\hyperlink{structcpu_aee38fb8832f8e728538b2cee877d1c09}{gdt}}));}
\DoxyCodeLine{00030 \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_aaf5b2814a1dbf3ef0803dff58e0a76dc_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_a5eefc01dac276f3d74b253c86ef43e24}\label{defs_8h_a5eefc01dac276f3d74b253c86ef43e24}} 
\index{defs.h@{defs.h}!setproc@{setproc}}
\index{setproc@{setproc}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{setproc()}{setproc()}}
{\footnotesize\ttfamily void setproc (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structproc}{proc}} $\ast$}]{ }\end{DoxyParamCaption})}

\mbox{\Hypertarget{defs_8h_a1c8a7a02e9391b5cf0984388216695c0}\label{defs_8h_a1c8a7a02e9391b5cf0984388216695c0}} 
\index{defs.h@{defs.h}!setupkvm@{setupkvm}}
\index{setupkvm@{setupkvm}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{setupkvm()}{setupkvm()}}
{\footnotesize\ttfamily \mbox{\hyperlink{types_8h_ac131849542282b2c95dfeaf1f26dc010}{pde\+\_\+t}} $\ast$ setupkvm (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{vm_8c_source_l00119}{119}} of file \mbox{\hyperlink{vm_8c_source}{vm.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00120 \{}
\DoxyCodeLine{00121   \mbox{\hyperlink{types_8h_ac131849542282b2c95dfeaf1f26dc010}{pde\_t}} *pgdir;}
\DoxyCodeLine{00122   \textcolor{keyword}{struct }kmap *k;}
\DoxyCodeLine{00123 }
\DoxyCodeLine{00124   \textcolor{keywordflow}{if}((pgdir = (\mbox{\hyperlink{types_8h_ac131849542282b2c95dfeaf1f26dc010}{pde\_t}}*)\mbox{\hyperlink{defs_8h_a5e965f6365c721b5b23c12d16d45c3dc}{kalloc}}()) == 0)}
\DoxyCodeLine{00125     \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{00126   \mbox{\hyperlink{defs_8h_a0098886a849eef10803e9f35ceec61b9}{memset}}(pgdir, 0, \mbox{\hyperlink{mmu_8h_a5f96cb6ae6670e023c407cc2f77e1704}{PGSIZE}});}
\DoxyCodeLine{00127   \textcolor{keywordflow}{if} (\mbox{\hyperlink{memlayout_8h_aefd5e8b62c49bba2cf20309c7dd174e2}{P2V}}(\mbox{\hyperlink{memlayout_8h_ad3c557a115f7d82d9ef849846779531c}{PHYSTOP}}) > (\textcolor{keywordtype}{void}*)\mbox{\hyperlink{memlayout_8h_a643ab4c8a98a6f7bfde12c8f52f6aafa}{DEVSPACE}})}
\DoxyCodeLine{00128     \mbox{\hyperlink{console_8c_a95c0aca5d6d7487933984f08b189917a}{panic}}(\textcolor{stringliteral}{"{}PHYSTOP too high"{}});}
\DoxyCodeLine{00129   \textcolor{keywordflow}{for}(k = kmap; k < \&kmap[\mbox{\hyperlink{defs_8h_afacd331296c10f360da7640e0d68429f}{NELEM}}(kmap)]; k++)}
\DoxyCodeLine{00130     \textcolor{keywordflow}{if}(mappages(pgdir, k-\/>virt, k-\/>phys\_end -\/ k-\/>phys\_start,}
\DoxyCodeLine{00131                 (\mbox{\hyperlink{types_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}})k-\/>phys\_start, k-\/>perm) < 0) \{}
\DoxyCodeLine{00132       \mbox{\hyperlink{vm_8c_aa883924e2f068c520b695cdc168e1603}{freevm}}(pgdir);}
\DoxyCodeLine{00133       \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{00134     \}}
\DoxyCodeLine{00135   \textcolor{keywordflow}{return} pgdir;}
\DoxyCodeLine{00136 \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_a1c8a7a02e9391b5cf0984388216695c0_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_a1c8a7a02e9391b5cf0984388216695c0_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_aca4a88f06b3ebbcc04330f7ae06c8507}\label{defs_8h_aca4a88f06b3ebbcc04330f7ae06c8507}} 
\index{defs.h@{defs.h}!sleep@{sleep}}
\index{sleep@{sleep}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{sleep()}{sleep()}}
{\footnotesize\ttfamily void sleep (\begin{DoxyParamCaption}\item[{void $\ast$}]{chan,  }\item[{struct \mbox{\hyperlink{structspinlock}{spinlock}} $\ast$}]{lk }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{proc_8c_source_l00418}{418}} of file \mbox{\hyperlink{proc_8c_source}{proc.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00419 \{}
\DoxyCodeLine{00420   \textcolor{keyword}{struct }\mbox{\hyperlink{structproc}{proc}} *p = \mbox{\hyperlink{proc_8c_a41af0935f3989aae450cf8988cd9c3a9}{myproc}}();}
\DoxyCodeLine{00421   }
\DoxyCodeLine{00422   \textcolor{keywordflow}{if}(p == 0)}
\DoxyCodeLine{00423     \mbox{\hyperlink{console_8c_a95c0aca5d6d7487933984f08b189917a}{panic}}(\textcolor{stringliteral}{"{}sleep"{}});}
\DoxyCodeLine{00424 }
\DoxyCodeLine{00425   \textcolor{keywordflow}{if}(lk == 0)}
\DoxyCodeLine{00426     \mbox{\hyperlink{console_8c_a95c0aca5d6d7487933984f08b189917a}{panic}}(\textcolor{stringliteral}{"{}sleep without lk"{}});}
\DoxyCodeLine{00427 }
\DoxyCodeLine{00428   \textcolor{comment}{// Must acquire ptable.lock in order to}}
\DoxyCodeLine{00429   \textcolor{comment}{// change p-\/>state and then call sched.}}
\DoxyCodeLine{00430   \textcolor{comment}{// Once we hold ptable.lock, we can be}}
\DoxyCodeLine{00431   \textcolor{comment}{// guaranteed that we won't miss any wakeup}}
\DoxyCodeLine{00432   \textcolor{comment}{// (wakeup runs with ptable.lock locked),}}
\DoxyCodeLine{00433   \textcolor{comment}{// so it's okay to release lk.}}
\DoxyCodeLine{00434   \textcolor{keywordflow}{if}(lk != \&\mbox{\hyperlink{proc_8c_addf39d613ca9a58e7e6080a2e454421a}{ptable}}.lock)\{  \textcolor{comment}{//DOC: sleeplock0}}
\DoxyCodeLine{00435     \mbox{\hyperlink{defs_8h_afe4ef8638f1ecb962a6e67fb086ee3b8}{acquire}}(\&\mbox{\hyperlink{proc_8c_addf39d613ca9a58e7e6080a2e454421a}{ptable}}.lock);  \textcolor{comment}{//DOC: sleeplock1}}
\DoxyCodeLine{00436     \mbox{\hyperlink{defs_8h_a4f8616948f3dbce65671f666eed1d669}{release}}(lk);}
\DoxyCodeLine{00437   \}}
\DoxyCodeLine{00438   \textcolor{comment}{// Go to sleep.}}
\DoxyCodeLine{00439   p-\/>\mbox{\hyperlink{structproc_a03048a49756c2243576208ba4ec5fbd4}{chan}} = \mbox{\hyperlink{structproc_a03048a49756c2243576208ba4ec5fbd4}{chan}};}
\DoxyCodeLine{00440   p-\/>\mbox{\hyperlink{structproc_a0f2fe91548a1382672ae26e29ca9e736}{state}} = \mbox{\hyperlink{proc_8h_aa1ced7d2b60040fded3fa873d0c03ba7a488282601451a751e0f0e770b15d4235}{SLEEPING}};}
\DoxyCodeLine{00441 }
\DoxyCodeLine{00442   \mbox{\hyperlink{proc_8c_ad788da91743c333b5bed7c4a0dd12365}{sched}}();}
\DoxyCodeLine{00443 }
\DoxyCodeLine{00444   \textcolor{comment}{// Tidy up.}}
\DoxyCodeLine{00445   p-\/>\mbox{\hyperlink{structproc_a03048a49756c2243576208ba4ec5fbd4}{chan}} = 0;}
\DoxyCodeLine{00446 }
\DoxyCodeLine{00447   \textcolor{comment}{// Reacquire original lock.}}
\DoxyCodeLine{00448   \textcolor{keywordflow}{if}(lk != \&\mbox{\hyperlink{proc_8c_addf39d613ca9a58e7e6080a2e454421a}{ptable}}.lock)\{  \textcolor{comment}{//DOC: sleeplock2}}
\DoxyCodeLine{00449     \mbox{\hyperlink{defs_8h_a4f8616948f3dbce65671f666eed1d669}{release}}(\&\mbox{\hyperlink{proc_8c_addf39d613ca9a58e7e6080a2e454421a}{ptable}}.lock);}
\DoxyCodeLine{00450     \mbox{\hyperlink{defs_8h_afe4ef8638f1ecb962a6e67fb086ee3b8}{acquire}}(lk);}
\DoxyCodeLine{00451   \}}
\DoxyCodeLine{00452 \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_aca4a88f06b3ebbcc04330f7ae06c8507_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_aca4a88f06b3ebbcc04330f7ae06c8507_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_a528f45ea5530504abc7113acc2154348}\label{defs_8h_a528f45ea5530504abc7113acc2154348}} 
\index{defs.h@{defs.h}!stati@{stati}}
\index{stati@{stati}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{stati()}{stati()}}
{\footnotesize\ttfamily void stati (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structinode}{inode}} $\ast$}]{ip,  }\item[{struct \mbox{\hyperlink{structstat}{stat}} $\ast$}]{st }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{fs_8c_source_l00440}{440}} of file \mbox{\hyperlink{fs_8c_source}{fs.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00441 \{}
\DoxyCodeLine{00442   st-\/>\mbox{\hyperlink{structstat_a14ef4f85e6fb86bf296360361d0f393b}{dev}} = ip-\/>\mbox{\hyperlink{structinode_a121742a89c4531f03a7de1613d5be605}{dev}};}
\DoxyCodeLine{00443   st-\/>\mbox{\hyperlink{structstat_abf15624517ed5d79d0fa2a5553a68e25}{ino}} = ip-\/>\mbox{\hyperlink{structinode_a8acc2b9df0bfc6856da62925763db7fe}{inum}};}
\DoxyCodeLine{00444   st-\/>\mbox{\hyperlink{structstat_a01f1b4cd7627d192a7875c9a188e0699}{type}} = ip-\/>\mbox{\hyperlink{structinode_a8d74bec2898785c057111c328d23fda2}{type}};}
\DoxyCodeLine{00445   st-\/>\mbox{\hyperlink{structstat_a99ca3487fd2f4799337eb4281f8871e4}{nlink}} = ip-\/>\mbox{\hyperlink{structinode_af8b88b409bea7ef99c49a55f387538b2}{nlink}};}
\DoxyCodeLine{00446   st-\/>\mbox{\hyperlink{structstat_a4ac15b64dd4d787c59a8a687d79adb35}{size}} = ip-\/>\mbox{\hyperlink{structinode_a918af769c48a8ca8afac057bf83d12de}{size}};}
\DoxyCodeLine{00447 \}}

\end{DoxyCode}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=290pt]{d5/d64/defs_8h_a528f45ea5530504abc7113acc2154348_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_a5e5172aa1be36b8210c6dfd86800b44c}\label{defs_8h_a5e5172aa1be36b8210c6dfd86800b44c}} 
\index{defs.h@{defs.h}!strlen@{strlen}}
\index{strlen@{strlen}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{strlen()}{strlen()}}
{\footnotesize\ttfamily int strlen (\begin{DoxyParamCaption}\item[{const char $\ast$}]{s }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{string_8c_source_l00097}{97}} of file \mbox{\hyperlink{string_8c_source}{string.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00098 \{}
\DoxyCodeLine{00099   \textcolor{keywordtype}{int} n;}
\DoxyCodeLine{00100 }
\DoxyCodeLine{00101   \textcolor{keywordflow}{for}(n = 0; s[n]; n++)}
\DoxyCodeLine{00102     ;}
\DoxyCodeLine{00103   \textcolor{keywordflow}{return} n;}
\DoxyCodeLine{00104 \}}

\end{DoxyCode}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=550pt]{d5/d64/defs_8h_a5e5172aa1be36b8210c6dfd86800b44c_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_a27e878168063a98eae64b4273dcf33cc}\label{defs_8h_a27e878168063a98eae64b4273dcf33cc}} 
\index{defs.h@{defs.h}!strncmp@{strncmp}}
\index{strncmp@{strncmp}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{strncmp()}{strncmp()}}
{\footnotesize\ttfamily int strncmp (\begin{DoxyParamCaption}\item[{const char $\ast$}]{p,  }\item[{const char $\ast$}]{q,  }\item[{\mbox{\hyperlink{types_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}}}]{n }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{string_8c_source_l00059}{59}} of file \mbox{\hyperlink{string_8c_source}{string.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00060 \{}
\DoxyCodeLine{00061   \textcolor{keywordflow}{while}(n > 0 \&\& *p \&\& *p == *q)}
\DoxyCodeLine{00062     n-\/-\/, p++, q++;}
\DoxyCodeLine{00063   \textcolor{keywordflow}{if}(n == 0)}
\DoxyCodeLine{00064     \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{00065   \textcolor{keywordflow}{return} (\mbox{\hyperlink{types_8h_a65f85814a8290f9797005d3b28e7e5fc}{uchar}})*p -\/ (\mbox{\hyperlink{types_8h_a65f85814a8290f9797005d3b28e7e5fc}{uchar}})*q;}
\DoxyCodeLine{00066 \}}

\end{DoxyCode}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_a27e878168063a98eae64b4273dcf33cc_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_a66107cd2364627727a36cef6c773b39c}\label{defs_8h_a66107cd2364627727a36cef6c773b39c}} 
\index{defs.h@{defs.h}!strncpy@{strncpy}}
\index{strncpy@{strncpy}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{strncpy()}{strncpy()}}
{\footnotesize\ttfamily char $\ast$ strncpy (\begin{DoxyParamCaption}\item[{char $\ast$}]{s,  }\item[{const char $\ast$}]{t,  }\item[{int}]{n }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{string_8c_source_l00069}{69}} of file \mbox{\hyperlink{string_8c_source}{string.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00070 \{}
\DoxyCodeLine{00071   \textcolor{keywordtype}{char} *os;}
\DoxyCodeLine{00072 }
\DoxyCodeLine{00073   os = s;}
\DoxyCodeLine{00074   \textcolor{keywordflow}{while}(n-\/-\/ > 0 \&\& (*s++ = *t++) != 0)}
\DoxyCodeLine{00075     ;}
\DoxyCodeLine{00076   \textcolor{keywordflow}{while}(n-\/-\/ > 0)}
\DoxyCodeLine{00077     *s++ = 0;}
\DoxyCodeLine{00078   \textcolor{keywordflow}{return} os;}
\DoxyCodeLine{00079 \}}

\end{DoxyCode}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=329pt]{d5/d64/defs_8h_a66107cd2364627727a36cef6c773b39c_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_a02ca0670bc1fe12e38453082631ff360}\label{defs_8h_a02ca0670bc1fe12e38453082631ff360}} 
\index{defs.h@{defs.h}!switchkvm@{switchkvm}}
\index{switchkvm@{switchkvm}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{switchkvm()}{switchkvm()}}
{\footnotesize\ttfamily void switchkvm (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{vm_8c_source_l00150}{150}} of file \mbox{\hyperlink{vm_8c_source}{vm.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00151 \{}
\DoxyCodeLine{00152   lcr3(\mbox{\hyperlink{memlayout_8h_a5021188bc7da1304f27e913aee183407}{V2P}}(\mbox{\hyperlink{vm_8c_aff01f9f000432fd4171b7edee6c85855}{kpgdir}}));   \textcolor{comment}{// switch to the kernel page table}}
\DoxyCodeLine{00153 \}}

\end{DoxyCode}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=550pt]{d5/d64/defs_8h_a02ca0670bc1fe12e38453082631ff360_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_ad43d81fa3edec39a200abd0853bc84b1}\label{defs_8h_ad43d81fa3edec39a200abd0853bc84b1}} 
\index{defs.h@{defs.h}!switchuvm@{switchuvm}}
\index{switchuvm@{switchuvm}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{switchuvm()}{switchuvm()}}
{\footnotesize\ttfamily void switchuvm (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structproc}{proc}} $\ast$}]{p }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{vm_8c_source_l00157}{157}} of file \mbox{\hyperlink{vm_8c_source}{vm.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00158 \{}
\DoxyCodeLine{00159   \textcolor{keywordflow}{if}(p == 0)}
\DoxyCodeLine{00160     \mbox{\hyperlink{console_8c_a95c0aca5d6d7487933984f08b189917a}{panic}}(\textcolor{stringliteral}{"{}switchuvm: no process"{}});}
\DoxyCodeLine{00161   \textcolor{keywordflow}{if}(p-\/>\mbox{\hyperlink{structproc_a9f556df98482bff6c9216013d7581ae4}{kstack}} == 0)}
\DoxyCodeLine{00162     \mbox{\hyperlink{console_8c_a95c0aca5d6d7487933984f08b189917a}{panic}}(\textcolor{stringliteral}{"{}switchuvm: no kstack"{}});}
\DoxyCodeLine{00163   \textcolor{keywordflow}{if}(p-\/>\mbox{\hyperlink{structproc_ad430afc653e9eb6cee33954d5545b79d}{pgdir}} == 0)}
\DoxyCodeLine{00164     \mbox{\hyperlink{console_8c_a95c0aca5d6d7487933984f08b189917a}{panic}}(\textcolor{stringliteral}{"{}switchuvm: no pgdir"{}});}
\DoxyCodeLine{00165 }
\DoxyCodeLine{00166   \mbox{\hyperlink{defs_8h_a206b749d1b7768dadce61cbcde7e0f1c}{pushcli}}();}
\DoxyCodeLine{00167   \mbox{\hyperlink{defs_8h_ad427959ad025dabd8cd393b27ec39160}{mycpu}}()-\/>\mbox{\hyperlink{structcpu_aee38fb8832f8e728538b2cee877d1c09}{gdt}}[\mbox{\hyperlink{mmu_8h_a51332450caa8201ecc42fce428288e6f}{SEG\_TSS}}] = \mbox{\hyperlink{mmu_8h_abe69a1dd6290e2be017d58309495adb7}{SEG16}}(\mbox{\hyperlink{mmu_8h_a1b27d53cef04c198f3b048345d28016c}{STS\_T32A}}, \&\mbox{\hyperlink{defs_8h_ad427959ad025dabd8cd393b27ec39160}{mycpu}}()-\/>ts,}
\DoxyCodeLine{00168                                 \textcolor{keyword}{sizeof}(\mbox{\hyperlink{defs_8h_ad427959ad025dabd8cd393b27ec39160}{mycpu}}()-\/>ts)-\/1, 0);}
\DoxyCodeLine{00169   \mbox{\hyperlink{defs_8h_ad427959ad025dabd8cd393b27ec39160}{mycpu}}()-\/>\mbox{\hyperlink{structcpu_aee38fb8832f8e728538b2cee877d1c09}{gdt}}[\mbox{\hyperlink{mmu_8h_a51332450caa8201ecc42fce428288e6f}{SEG\_TSS}}].\mbox{\hyperlink{structsegdesc_aacc67bb0857f0c77c1f8a5c9b8a1ac09}{s}} = 0;}
\DoxyCodeLine{00170   \mbox{\hyperlink{defs_8h_ad427959ad025dabd8cd393b27ec39160}{mycpu}}()-\/>\mbox{\hyperlink{structcpu_a32e7b5aa877171c943d47038e818a159}{ts}}.\mbox{\hyperlink{structtaskstate_a574e97ea3fd87f314da88afec3c6f574}{ss0}} = \mbox{\hyperlink{mmu_8h_ad523d10217ef0ff5e75b7831f251d2b1}{SEG\_KDATA}} << 3;}
\DoxyCodeLine{00171   \mbox{\hyperlink{defs_8h_ad427959ad025dabd8cd393b27ec39160}{mycpu}}()-\/>\mbox{\hyperlink{structcpu_a32e7b5aa877171c943d47038e818a159}{ts}}.\mbox{\hyperlink{structtaskstate_a41b3e1d46a5068485eb6714974a979d6}{esp0}} = (\mbox{\hyperlink{types_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}})p-\/>\mbox{\hyperlink{structproc_a9f556df98482bff6c9216013d7581ae4}{kstack}} + \mbox{\hyperlink{param_8h_a7735dc19a8cdc3fcafd4241184be4b41}{KSTACKSIZE}};}
\DoxyCodeLine{00172   \textcolor{comment}{// setting IOPL=0 in eflags *and* iomb beyond the tss segment limit}}
\DoxyCodeLine{00173   \textcolor{comment}{// forbids I/O instructions (e.g., inb and outb) from user space}}
\DoxyCodeLine{00174   \mbox{\hyperlink{defs_8h_ad427959ad025dabd8cd393b27ec39160}{mycpu}}()-\/>\mbox{\hyperlink{structcpu_a32e7b5aa877171c943d47038e818a159}{ts}}.\mbox{\hyperlink{structtaskstate_a5ee57b190324239a5d88f7c02039901f}{iomb}} = (\mbox{\hyperlink{types_8h_ab95f123a6c9bcfee6a343170ef8c5f69}{ushort}}) 0xFFFF;}
\DoxyCodeLine{00175   ltr(\mbox{\hyperlink{mmu_8h_a51332450caa8201ecc42fce428288e6f}{SEG\_TSS}} << 3);}
\DoxyCodeLine{00176   lcr3(\mbox{\hyperlink{memlayout_8h_a5021188bc7da1304f27e913aee183407}{V2P}}(p-\/>\mbox{\hyperlink{structproc_ad430afc653e9eb6cee33954d5545b79d}{pgdir}}));  \textcolor{comment}{// switch to process's address space}}
\DoxyCodeLine{00177   \mbox{\hyperlink{defs_8h_ae3424f669269fef400ce29c3aeb43fdb}{popcli}}();}
\DoxyCodeLine{00178 \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_ad43d81fa3edec39a200abd0853bc84b1_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=550pt]{d5/d64/defs_8h_ad43d81fa3edec39a200abd0853bc84b1_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_a1d9e7047d3dfb57809a2541d8387705e}\label{defs_8h_a1d9e7047d3dfb57809a2541d8387705e}} 
\index{defs.h@{defs.h}!swtch@{swtch}}
\index{swtch@{swtch}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{swtch()}{swtch()}}
{\footnotesize\ttfamily void swtch (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structcontext}{context}} $\ast$$\ast$}]{,  }\item[{struct \mbox{\hyperlink{structcontext}{context}} $\ast$}]{ }\end{DoxyParamCaption})}

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=550pt]{d5/d64/defs_8h_a1d9e7047d3dfb57809a2541d8387705e_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_acd6bcafe6626fe8e7d00cacdbc3cc4f1}\label{defs_8h_acd6bcafe6626fe8e7d00cacdbc3cc4f1}} 
\index{defs.h@{defs.h}!syscall@{syscall}}
\index{syscall@{syscall}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{syscall()}{syscall()}}
{\footnotesize\ttfamily void syscall (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{syscall_8c_source_l00140}{140}} of file \mbox{\hyperlink{syscall_8c_source}{syscall.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00141 \{}
\DoxyCodeLine{00142   \textcolor{keywordtype}{int} num;}
\DoxyCodeLine{00143   \textcolor{keyword}{struct }\mbox{\hyperlink{structproc}{proc}} *curproc = \mbox{\hyperlink{defs_8h_a3d2327db1e34643f4a9e6a07c8cc62c6}{myproc}}();}
\DoxyCodeLine{00144 }
\DoxyCodeLine{00145   num = curproc-\/>\mbox{\hyperlink{structproc_a56ec07ac1e10ce42adfc8dd2a366071f}{tf}}-\/>\mbox{\hyperlink{structtrapframe_ab1dd3a10936b61129d7395c3a21bc2fe}{eax}};}
\DoxyCodeLine{00146   \textcolor{keywordflow}{if}(num > 0 \&\& num < \mbox{\hyperlink{defs_8h_afacd331296c10f360da7640e0d68429f}{NELEM}}(syscalls) \&\& syscalls[num]) \{}
\DoxyCodeLine{00147     curproc-\/>\mbox{\hyperlink{structproc_a56ec07ac1e10ce42adfc8dd2a366071f}{tf}}-\/>\mbox{\hyperlink{structtrapframe_ab1dd3a10936b61129d7395c3a21bc2fe}{eax}} = syscalls[num]();}
\DoxyCodeLine{00148   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00149     \mbox{\hyperlink{console_8c_a90f0742d846503e4ed1804f1df421ec6}{cprintf}}(\textcolor{stringliteral}{"{}\%d \%s: unknown sys call \%d\(\backslash\)n"{}},}
\DoxyCodeLine{00150             curproc-\/>\mbox{\hyperlink{structproc_acf2bdf54d1f957ccbcdc987007029944}{pid}}, curproc-\/>\mbox{\hyperlink{structproc_ac04af53e17d24b90c3cbfab56d658d62}{name}}, num);}
\DoxyCodeLine{00151     curproc-\/>\mbox{\hyperlink{structproc_a56ec07ac1e10ce42adfc8dd2a366071f}{tf}}-\/>\mbox{\hyperlink{structtrapframe_ab1dd3a10936b61129d7395c3a21bc2fe}{eax}} = -\/1;}
\DoxyCodeLine{00152   \}}
\DoxyCodeLine{00153 \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_acd6bcafe6626fe8e7d00cacdbc3cc4f1_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=196pt]{d5/d64/defs_8h_acd6bcafe6626fe8e7d00cacdbc3cc4f1_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_a49af4bce992b520d5032364d0a4eb8ee}\label{defs_8h_a49af4bce992b520d5032364d0a4eb8ee}} 
\index{defs.h@{defs.h}!timerinit@{timerinit}}
\index{timerinit@{timerinit}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{timerinit()}{timerinit()}}
{\footnotesize\ttfamily void timerinit (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}

\mbox{\Hypertarget{defs_8h_a9e7167b8e20e217c4af4e757f612ba6a}\label{defs_8h_a9e7167b8e20e217c4af4e757f612ba6a}} 
\index{defs.h@{defs.h}!tvinit@{tvinit}}
\index{tvinit@{tvinit}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{tvinit()}{tvinit()}}
{\footnotesize\ttfamily void tvinit (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{trap_8c_source_l00018}{18}} of file \mbox{\hyperlink{trap_8c_source}{trap.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00019 \{}
\DoxyCodeLine{00020   \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{00021 }
\DoxyCodeLine{00022   \textcolor{keywordflow}{for}(i = 0; i < 256; i++)}
\DoxyCodeLine{00023     \mbox{\hyperlink{mmu_8h_a23e7ddf0a414b66cf9badd182edf1eca}{SETGATE}}(\mbox{\hyperlink{trap_8c_a3facbc1e1e6618fb238fc124bd9aa827}{idt}}[i], 0, \mbox{\hyperlink{mmu_8h_a0d4e0c4c738af60d6092941469642429}{SEG\_KCODE}}<<3, \mbox{\hyperlink{trap_8c_a3e6e0e8b5ba8014e09de2d9aa3740486}{vectors}}[i], 0);}
\DoxyCodeLine{00024   \mbox{\hyperlink{mmu_8h_a23e7ddf0a414b66cf9badd182edf1eca}{SETGATE}}(\mbox{\hyperlink{trap_8c_a3facbc1e1e6618fb238fc124bd9aa827}{idt}}[\mbox{\hyperlink{traps_8h_a6914c7173b6fe6d04e78d0876e39d95e}{T\_SYSCALL}}], 1, \mbox{\hyperlink{mmu_8h_a0d4e0c4c738af60d6092941469642429}{SEG\_KCODE}}<<3, \mbox{\hyperlink{trap_8c_a3e6e0e8b5ba8014e09de2d9aa3740486}{vectors}}[\mbox{\hyperlink{traps_8h_a6914c7173b6fe6d04e78d0876e39d95e}{T\_SYSCALL}}], \mbox{\hyperlink{mmu_8h_a060d4d4e32af81cab881fe77e58d7b78}{DPL\_USER}});}
\DoxyCodeLine{00025 }
\DoxyCodeLine{00026   \mbox{\hyperlink{defs_8h_ab56d728e6966819a0260c358d3ac3419}{initlock}}(\&\mbox{\hyperlink{trap_8c_a094a4703b62095e2fa469fab3ffea5c7}{tickslock}}, \textcolor{stringliteral}{"{}time"{}});}
\DoxyCodeLine{00027 \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=201pt]{d5/d64/defs_8h_a9e7167b8e20e217c4af4e757f612ba6a_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_a79fa7b73d0d61fdd15d30768a395437d}\label{defs_8h_a79fa7b73d0d61fdd15d30768a395437d}} 
\index{defs.h@{defs.h}!uartinit@{uartinit}}
\index{uartinit@{uartinit}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{uartinit()}{uartinit()}}
{\footnotesize\ttfamily void uartinit (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{uart_8c_source_l00020}{20}} of file \mbox{\hyperlink{uart_8c_source}{uart.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00021 \{}
\DoxyCodeLine{00022   \textcolor{keywordtype}{char} *p;}
\DoxyCodeLine{00023 }
\DoxyCodeLine{00024   \textcolor{comment}{// Turn off the FIFO}}
\DoxyCodeLine{00025   outb(\mbox{\hyperlink{uart_8c_a00dbb3ab1c59e14699be9393693e2248}{COM1}}+2, 0);}
\DoxyCodeLine{00026 }
\DoxyCodeLine{00027   \textcolor{comment}{// 9600 baud, 8 data bits, 1 stop bit, parity off.}}
\DoxyCodeLine{00028   outb(\mbox{\hyperlink{uart_8c_a00dbb3ab1c59e14699be9393693e2248}{COM1}}+3, 0x80);    \textcolor{comment}{// Unlock divisor}}
\DoxyCodeLine{00029   outb(\mbox{\hyperlink{uart_8c_a00dbb3ab1c59e14699be9393693e2248}{COM1}}+0, 115200/9600);}
\DoxyCodeLine{00030   outb(\mbox{\hyperlink{uart_8c_a00dbb3ab1c59e14699be9393693e2248}{COM1}}+1, 0);}
\DoxyCodeLine{00031   outb(\mbox{\hyperlink{uart_8c_a00dbb3ab1c59e14699be9393693e2248}{COM1}}+3, 0x03);    \textcolor{comment}{// Lock divisor, 8 data bits.}}
\DoxyCodeLine{00032   outb(\mbox{\hyperlink{uart_8c_a00dbb3ab1c59e14699be9393693e2248}{COM1}}+4, 0);}
\DoxyCodeLine{00033   outb(\mbox{\hyperlink{uart_8c_a00dbb3ab1c59e14699be9393693e2248}{COM1}}+1, 0x01);    \textcolor{comment}{// Enable receive interrupts.}}
\DoxyCodeLine{00034 }
\DoxyCodeLine{00035   \textcolor{comment}{// If status is 0xFF, no serial port.}}
\DoxyCodeLine{00036   \textcolor{keywordflow}{if}(inb(\mbox{\hyperlink{uart_8c_a00dbb3ab1c59e14699be9393693e2248}{COM1}}+5) == 0xFF)}
\DoxyCodeLine{00037     \textcolor{keywordflow}{return};}
\DoxyCodeLine{00038   uart = 1;}
\DoxyCodeLine{00039 }
\DoxyCodeLine{00040   \textcolor{comment}{// Acknowledge pre-\/existing interrupt conditions;}}
\DoxyCodeLine{00041   \textcolor{comment}{// enable interrupts.}}
\DoxyCodeLine{00042   inb(\mbox{\hyperlink{uart_8c_a00dbb3ab1c59e14699be9393693e2248}{COM1}}+2);}
\DoxyCodeLine{00043   inb(\mbox{\hyperlink{uart_8c_a00dbb3ab1c59e14699be9393693e2248}{COM1}}+0);}
\DoxyCodeLine{00044   \mbox{\hyperlink{defs_8h_a63da75c0c2f0b051f2c790aea2116b63}{ioapicenable}}(\mbox{\hyperlink{traps_8h_a603b478f70a928f442e33fefba73494a}{IRQ\_COM1}}, 0);}
\DoxyCodeLine{00045 }
\DoxyCodeLine{00046   \textcolor{comment}{// Announce that we're here.}}
\DoxyCodeLine{00047   \textcolor{keywordflow}{for}(p=\textcolor{stringliteral}{"{}xv6...\(\backslash\)n"{}}; *p; p++)}
\DoxyCodeLine{00048     \mbox{\hyperlink{uart_8c_a55840fa098ac21df6535d6ac91956d07}{uartputc}}(*p);}
\DoxyCodeLine{00049 \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=333pt]{d5/d64/defs_8h_a79fa7b73d0d61fdd15d30768a395437d_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_aa64047002b0e84e2611ebf7dc46b7c99}\label{defs_8h_aa64047002b0e84e2611ebf7dc46b7c99}} 
\index{defs.h@{defs.h}!uartintr@{uartintr}}
\index{uartintr@{uartintr}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{uartintr()}{uartintr()}}
{\footnotesize\ttfamily void uartintr (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{uart_8c_source_l00074}{74}} of file \mbox{\hyperlink{uart_8c_source}{uart.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00075 \{}
\DoxyCodeLine{00076   \mbox{\hyperlink{console_8c_aad3d6ca39f23bb6d2686d2967e415193}{consoleintr}}(uartgetc);}
\DoxyCodeLine{00077 \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_aa64047002b0e84e2611ebf7dc46b7c99_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=196pt]{d5/d64/defs_8h_aa64047002b0e84e2611ebf7dc46b7c99_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_a571626618a1f05ff6854802e936845d6}\label{defs_8h_a571626618a1f05ff6854802e936845d6}} 
\index{defs.h@{defs.h}!uartputc@{uartputc}}
\index{uartputc@{uartputc}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{uartputc()}{uartputc()}}
{\footnotesize\ttfamily void uartputc (\begin{DoxyParamCaption}\item[{int}]{c }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{uart_8c_source_l00052}{52}} of file \mbox{\hyperlink{uart_8c_source}{uart.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00053 \{}
\DoxyCodeLine{00054   \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{00055 }
\DoxyCodeLine{00056   \textcolor{keywordflow}{if}(!uart)}
\DoxyCodeLine{00057     \textcolor{keywordflow}{return};}
\DoxyCodeLine{00058   \textcolor{keywordflow}{for}(i = 0; i < 128 \&\& !(inb(\mbox{\hyperlink{uart_8c_a00dbb3ab1c59e14699be9393693e2248}{COM1}}+5) \& 0x20); i++)}
\DoxyCodeLine{00059     \mbox{\hyperlink{defs_8h_ada0e72e8d0a1a48090829fd03a0b76ba}{microdelay}}(10);}
\DoxyCodeLine{00060   outb(\mbox{\hyperlink{uart_8c_a00dbb3ab1c59e14699be9393693e2248}{COM1}}+0, c);}
\DoxyCodeLine{00061 \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=232pt]{d5/d64/defs_8h_a571626618a1f05ff6854802e936845d6_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=214pt]{d5/d64/defs_8h_a571626618a1f05ff6854802e936845d6_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_a81c8a6a0cae413bc81aa223f7f7b7205}\label{defs_8h_a81c8a6a0cae413bc81aa223f7f7b7205}} 
\index{defs.h@{defs.h}!userinit@{userinit}}
\index{userinit@{userinit}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{userinit()}{userinit()}}
{\footnotesize\ttfamily void userinit (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{proc_8c_source_l00121}{121}} of file \mbox{\hyperlink{proc_8c_source}{proc.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00122 \{}
\DoxyCodeLine{00123   \textcolor{keyword}{struct }\mbox{\hyperlink{structproc}{proc}} *p;}
\DoxyCodeLine{00124   \textcolor{keyword}{extern} \textcolor{keywordtype}{char} \_binary\_initcode\_start[], \_binary\_initcode\_size[];}
\DoxyCodeLine{00125 }
\DoxyCodeLine{00126   p = allocproc();}
\DoxyCodeLine{00127   }
\DoxyCodeLine{00128   initproc = p;}
\DoxyCodeLine{00129   \textcolor{keywordflow}{if}((p-\/>\mbox{\hyperlink{structproc_ad430afc653e9eb6cee33954d5545b79d}{pgdir}} = \mbox{\hyperlink{defs_8h_a1c8a7a02e9391b5cf0984388216695c0}{setupkvm}}()) == 0)}
\DoxyCodeLine{00130     \mbox{\hyperlink{console_8c_a95c0aca5d6d7487933984f08b189917a}{panic}}(\textcolor{stringliteral}{"{}userinit: out of memory?"{}});}
\DoxyCodeLine{00131   \mbox{\hyperlink{defs_8h_a7b3410bde4005e848e1748f2b0f0a084}{inituvm}}(p-\/>\mbox{\hyperlink{structproc_ad430afc653e9eb6cee33954d5545b79d}{pgdir}}, \_binary\_initcode\_start, (\textcolor{keywordtype}{int})\_binary\_initcode\_size);}
\DoxyCodeLine{00132   p-\/>\mbox{\hyperlink{structproc_a6e67042bb361124ff287af88efc33e00}{sz}} = \mbox{\hyperlink{mmu_8h_a5f96cb6ae6670e023c407cc2f77e1704}{PGSIZE}};}
\DoxyCodeLine{00133   \mbox{\hyperlink{defs_8h_a0098886a849eef10803e9f35ceec61b9}{memset}}(p-\/>\mbox{\hyperlink{structproc_a56ec07ac1e10ce42adfc8dd2a366071f}{tf}}, 0, \textcolor{keyword}{sizeof}(*p-\/>\mbox{\hyperlink{structproc_a56ec07ac1e10ce42adfc8dd2a366071f}{tf}}));}
\DoxyCodeLine{00134   p-\/>\mbox{\hyperlink{structproc_a56ec07ac1e10ce42adfc8dd2a366071f}{tf}}-\/>\mbox{\hyperlink{structtrapframe_a61261f63223a73e25be79fcc8c625265}{cs}} = (\mbox{\hyperlink{mmu_8h_a85b694d969eb01e547197c21db219f4b}{SEG\_UCODE}} << 3) | \mbox{\hyperlink{mmu_8h_a060d4d4e32af81cab881fe77e58d7b78}{DPL\_USER}};}
\DoxyCodeLine{00135   p-\/>\mbox{\hyperlink{structproc_a56ec07ac1e10ce42adfc8dd2a366071f}{tf}}-\/>\mbox{\hyperlink{structtrapframe_a421be1ec9ad2a55f1d1adeac9b0b89c3}{ds}} = (\mbox{\hyperlink{mmu_8h_aba0495696b4c656fda31704782648461}{SEG\_UDATA}} << 3) | \mbox{\hyperlink{mmu_8h_a060d4d4e32af81cab881fe77e58d7b78}{DPL\_USER}};}
\DoxyCodeLine{00136   p-\/>\mbox{\hyperlink{structproc_a56ec07ac1e10ce42adfc8dd2a366071f}{tf}}-\/>\mbox{\hyperlink{structtrapframe_ab974b358098da0aaa5897c32827a038d}{es}} = p-\/>\mbox{\hyperlink{structproc_a56ec07ac1e10ce42adfc8dd2a366071f}{tf}}-\/>\mbox{\hyperlink{structtrapframe_a421be1ec9ad2a55f1d1adeac9b0b89c3}{ds}};}
\DoxyCodeLine{00137   p-\/>\mbox{\hyperlink{structproc_a56ec07ac1e10ce42adfc8dd2a366071f}{tf}}-\/>\mbox{\hyperlink{structtrapframe_aa9c9b52b242d4f42fe4252e26b655bf6}{ss}} = p-\/>\mbox{\hyperlink{structproc_a56ec07ac1e10ce42adfc8dd2a366071f}{tf}}-\/>\mbox{\hyperlink{structtrapframe_a421be1ec9ad2a55f1d1adeac9b0b89c3}{ds}};}
\DoxyCodeLine{00138   p-\/>\mbox{\hyperlink{structproc_a56ec07ac1e10ce42adfc8dd2a366071f}{tf}}-\/>\mbox{\hyperlink{structtrapframe_ae6b3005ad34416546603ab18dbb4a644}{eflags}} = \mbox{\hyperlink{mmu_8h_ab481068357bb42797aafe91864a2d085}{FL\_IF}};}
\DoxyCodeLine{00139   p-\/>\mbox{\hyperlink{structproc_a56ec07ac1e10ce42adfc8dd2a366071f}{tf}}-\/>\mbox{\hyperlink{structtrapframe_acd319e2dbd720d217c10f8fb620d73e2}{esp}} = \mbox{\hyperlink{mmu_8h_a5f96cb6ae6670e023c407cc2f77e1704}{PGSIZE}};}
\DoxyCodeLine{00140   p-\/>\mbox{\hyperlink{structproc_a56ec07ac1e10ce42adfc8dd2a366071f}{tf}}-\/>\mbox{\hyperlink{structtrapframe_a886a5973a537894e3a95435f38767d5c}{eip}} = 0;  \textcolor{comment}{// beginning of initcode.S}}
\DoxyCodeLine{00141 }
\DoxyCodeLine{00142   \mbox{\hyperlink{defs_8h_aa406a54805a570dfe266281876dc5d69}{safestrcpy}}(p-\/>\mbox{\hyperlink{structproc_ac04af53e17d24b90c3cbfab56d658d62}{name}}, \textcolor{stringliteral}{"{}initcode"{}}, \textcolor{keyword}{sizeof}(p-\/>\mbox{\hyperlink{structproc_ac04af53e17d24b90c3cbfab56d658d62}{name}}));}
\DoxyCodeLine{00143   p-\/>\mbox{\hyperlink{structproc_a493bc338ce008a838eef521972a35257}{cwd}} = \mbox{\hyperlink{defs_8h_acde7d3975db286253e584452ba03a54f}{namei}}(\textcolor{stringliteral}{"{}/"{}});}
\DoxyCodeLine{00144 }
\DoxyCodeLine{00145   \textcolor{comment}{// this assignment to p-\/>state lets other cores}}
\DoxyCodeLine{00146   \textcolor{comment}{// run this process. the acquire forces the above}}
\DoxyCodeLine{00147   \textcolor{comment}{// writes to be visible, and the lock is also needed}}
\DoxyCodeLine{00148   \textcolor{comment}{// because the assignment might not be atomic.}}
\DoxyCodeLine{00149   \mbox{\hyperlink{defs_8h_afe4ef8638f1ecb962a6e67fb086ee3b8}{acquire}}(\&\mbox{\hyperlink{proc_8c_addf39d613ca9a58e7e6080a2e454421a}{ptable}}.lock);}
\DoxyCodeLine{00150 }
\DoxyCodeLine{00151   p-\/>\mbox{\hyperlink{structproc_a0f2fe91548a1382672ae26e29ca9e736}{state}} = \mbox{\hyperlink{proc_8h_aa1ced7d2b60040fded3fa873d0c03ba7a269b90433e40460a2c0044a0b3e15694}{RUNNABLE}};}
\DoxyCodeLine{00152 }
\DoxyCodeLine{00153   \mbox{\hyperlink{defs_8h_a4f8616948f3dbce65671f666eed1d669}{release}}(\&\mbox{\hyperlink{proc_8c_addf39d613ca9a58e7e6080a2e454421a}{ptable}}.lock);}
\DoxyCodeLine{00154 \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_a81c8a6a0cae413bc81aa223f7f7b7205_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_a082f50617d3c87d732157c60daed00ce}\label{defs_8h_a082f50617d3c87d732157c60daed00ce}} 
\index{defs.h@{defs.h}!uva2ka@{uva2ka}}
\index{uva2ka@{uva2ka}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{uva2ka()}{uva2ka()}}
{\footnotesize\ttfamily char $\ast$ uva2ka (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{types_8h_ac131849542282b2c95dfeaf1f26dc010}{pde\+\_\+t}} $\ast$}]{pgdir,  }\item[{char $\ast$}]{uva }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{vm_8c_source_l00350}{350}} of file \mbox{\hyperlink{vm_8c_source}{vm.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00351 \{}
\DoxyCodeLine{00352   \mbox{\hyperlink{mmu_8h_ab23e75f764f8314a83eaff23508c2ae5}{pte\_t}} *pte;}
\DoxyCodeLine{00353 }
\DoxyCodeLine{00354   pte = walkpgdir(pgdir, uva, 0);}
\DoxyCodeLine{00355   \textcolor{keywordflow}{if}((*pte \& \mbox{\hyperlink{mmu_8h_a89bd860de64c44cd8ebaca8dc311b5ac}{PTE\_P}}) == 0)}
\DoxyCodeLine{00356     \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{00357   \textcolor{keywordflow}{if}((*pte \& \mbox{\hyperlink{mmu_8h_adced9836a1dc98d72849361e6ab03cda}{PTE\_U}}) == 0)}
\DoxyCodeLine{00358     \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{00359   \textcolor{keywordflow}{return} (\textcolor{keywordtype}{char}*)\mbox{\hyperlink{memlayout_8h_aefd5e8b62c49bba2cf20309c7dd174e2}{P2V}}(\mbox{\hyperlink{mmu_8h_a74b24f9b091875a5313370892e3f37a5}{PTE\_ADDR}}(*pte));}
\DoxyCodeLine{00360 \}}

\end{DoxyCode}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_a082f50617d3c87d732157c60daed00ce_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_af6f31822f7e737b4e414bdac1ccb59a4}\label{defs_8h_af6f31822f7e737b4e414bdac1ccb59a4}} 
\index{defs.h@{defs.h}!wait@{wait}}
\index{wait@{wait}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{wait()}{wait()}}
{\footnotesize\ttfamily int wait (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{proc_8c_source_l00273}{273}} of file \mbox{\hyperlink{proc_8c_source}{proc.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00274 \{}
\DoxyCodeLine{00275   \textcolor{keyword}{struct }\mbox{\hyperlink{structproc}{proc}} *p;}
\DoxyCodeLine{00276   \textcolor{keywordtype}{int} havekids, \mbox{\hyperlink{structproc_acf2bdf54d1f957ccbcdc987007029944}{pid}};}
\DoxyCodeLine{00277   \textcolor{keyword}{struct }\mbox{\hyperlink{structproc}{proc}} *curproc = \mbox{\hyperlink{proc_8c_a41af0935f3989aae450cf8988cd9c3a9}{myproc}}();}
\DoxyCodeLine{00278   }
\DoxyCodeLine{00279   \mbox{\hyperlink{defs_8h_afe4ef8638f1ecb962a6e67fb086ee3b8}{acquire}}(\&\mbox{\hyperlink{proc_8c_addf39d613ca9a58e7e6080a2e454421a}{ptable}}.lock);}
\DoxyCodeLine{00280   \textcolor{keywordflow}{for}(;;)\{}
\DoxyCodeLine{00281     \textcolor{comment}{// Scan through table looking for exited children.}}
\DoxyCodeLine{00282     havekids = 0;}
\DoxyCodeLine{00283     \textcolor{keywordflow}{for}(p = \mbox{\hyperlink{proc_8c_addf39d613ca9a58e7e6080a2e454421a}{ptable}}.proc; p < \&\mbox{\hyperlink{proc_8c_addf39d613ca9a58e7e6080a2e454421a}{ptable}}.proc[\mbox{\hyperlink{param_8h_a810c5b751df5bb30588613ed91095129}{NPROC}}]; p++)\{}
\DoxyCodeLine{00284       \textcolor{keywordflow}{if}(p-\/>\mbox{\hyperlink{structproc_a14ea8849701ffafba4d142725de154d4}{parent}} != curproc)}
\DoxyCodeLine{00285         \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00286       havekids = 1;}
\DoxyCodeLine{00287       \textcolor{keywordflow}{if}(p-\/>\mbox{\hyperlink{structproc_a0f2fe91548a1382672ae26e29ca9e736}{state}} == \mbox{\hyperlink{proc_8h_aa1ced7d2b60040fded3fa873d0c03ba7a5dfb36109b24f39d54d5c3f48f53def8}{ZOMBIE}})\{}
\DoxyCodeLine{00288         \textcolor{comment}{// Found one.}}
\DoxyCodeLine{00289         \mbox{\hyperlink{structproc_acf2bdf54d1f957ccbcdc987007029944}{pid}} = p-\/>\mbox{\hyperlink{structproc_acf2bdf54d1f957ccbcdc987007029944}{pid}};}
\DoxyCodeLine{00290         \mbox{\hyperlink{defs_8h_ae79d6a7d0901b7c081cfded3f916d5bd}{kfree}}(p-\/>\mbox{\hyperlink{structproc_a9f556df98482bff6c9216013d7581ae4}{kstack}});}
\DoxyCodeLine{00291         p-\/>\mbox{\hyperlink{structproc_a9f556df98482bff6c9216013d7581ae4}{kstack}} = 0;}
\DoxyCodeLine{00292         \mbox{\hyperlink{defs_8h_af24cf1756e19afd8be8c95d02262cf3a}{freevm}}(p-\/>\mbox{\hyperlink{structproc_ad430afc653e9eb6cee33954d5545b79d}{pgdir}});}
\DoxyCodeLine{00293         p-\/>\mbox{\hyperlink{structproc_acf2bdf54d1f957ccbcdc987007029944}{pid}} = 0;}
\DoxyCodeLine{00294         p-\/>\mbox{\hyperlink{structproc_a14ea8849701ffafba4d142725de154d4}{parent}} = 0;}
\DoxyCodeLine{00295         p-\/>\mbox{\hyperlink{structproc_ac04af53e17d24b90c3cbfab56d658d62}{name}}[0] = 0;}
\DoxyCodeLine{00296         p-\/>\mbox{\hyperlink{structproc_afb4f94a3f4df9a835dbb41b0c26660a4}{killed}} = 0;}
\DoxyCodeLine{00297         p-\/>\mbox{\hyperlink{structproc_a0f2fe91548a1382672ae26e29ca9e736}{state}} = \mbox{\hyperlink{proc_8h_aa1ced7d2b60040fded3fa873d0c03ba7aa09b651ef326a9d8efcee5cc5b720ab4}{UNUSED}};}
\DoxyCodeLine{00298         \mbox{\hyperlink{defs_8h_a4f8616948f3dbce65671f666eed1d669}{release}}(\&\mbox{\hyperlink{proc_8c_addf39d613ca9a58e7e6080a2e454421a}{ptable}}.lock);}
\DoxyCodeLine{00299         \textcolor{keywordflow}{return} \mbox{\hyperlink{structproc_acf2bdf54d1f957ccbcdc987007029944}{pid}};}
\DoxyCodeLine{00300       \}}
\DoxyCodeLine{00301     \}}
\DoxyCodeLine{00302 }
\DoxyCodeLine{00303     \textcolor{comment}{// No point waiting if we don't have any children.}}
\DoxyCodeLine{00304     \textcolor{keywordflow}{if}(!havekids || curproc-\/>\mbox{\hyperlink{structproc_afb4f94a3f4df9a835dbb41b0c26660a4}{killed}})\{}
\DoxyCodeLine{00305       \mbox{\hyperlink{defs_8h_a4f8616948f3dbce65671f666eed1d669}{release}}(\&\mbox{\hyperlink{proc_8c_addf39d613ca9a58e7e6080a2e454421a}{ptable}}.lock);}
\DoxyCodeLine{00306       \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{00307     \}}
\DoxyCodeLine{00308 }
\DoxyCodeLine{00309     \textcolor{comment}{// Wait for children to exit.  (See wakeup1 call in proc\_exit.)}}
\DoxyCodeLine{00310     \mbox{\hyperlink{proc_8c_ae70cc0370342e46f6db3bec367232457}{sleep}}(curproc, \&\mbox{\hyperlink{proc_8c_addf39d613ca9a58e7e6080a2e454421a}{ptable}}.lock);  \textcolor{comment}{//DOC: wait-\/sleep}}
\DoxyCodeLine{00311   \}}
\DoxyCodeLine{00312 \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_af6f31822f7e737b4e414bdac1ccb59a4_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_af6f31822f7e737b4e414bdac1ccb59a4_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_a245b56417239f499389b2e806bd99254}\label{defs_8h_a245b56417239f499389b2e806bd99254}} 
\index{defs.h@{defs.h}!wakeup@{wakeup}}
\index{wakeup@{wakeup}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{wakeup()}{wakeup()}}
{\footnotesize\ttfamily void wakeup (\begin{DoxyParamCaption}\item[{void $\ast$}]{chan }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{proc_8c_source_l00469}{469}} of file \mbox{\hyperlink{proc_8c_source}{proc.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00470 \{}
\DoxyCodeLine{00471   \mbox{\hyperlink{defs_8h_afe4ef8638f1ecb962a6e67fb086ee3b8}{acquire}}(\&\mbox{\hyperlink{proc_8c_addf39d613ca9a58e7e6080a2e454421a}{ptable}}.lock);}
\DoxyCodeLine{00472   wakeup1(chan);}
\DoxyCodeLine{00473   \mbox{\hyperlink{defs_8h_a4f8616948f3dbce65671f666eed1d669}{release}}(\&\mbox{\hyperlink{proc_8c_addf39d613ca9a58e7e6080a2e454421a}{ptable}}.lock);}
\DoxyCodeLine{00474 \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_a245b56417239f499389b2e806bd99254_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_a245b56417239f499389b2e806bd99254_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_a515876d4653cefef4732806ef7f2833f}\label{defs_8h_a515876d4653cefef4732806ef7f2833f}} 
\index{defs.h@{defs.h}!writei@{writei}}
\index{writei@{writei}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{writei()}{writei()}}
{\footnotesize\ttfamily int writei (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structinode}{inode}} $\ast$}]{ip,  }\item[{char $\ast$}]{src,  }\item[{\mbox{\hyperlink{types_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}}}]{off,  }\item[{\mbox{\hyperlink{types_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}}}]{n }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{fs_8c_source_l00482}{482}} of file \mbox{\hyperlink{fs_8c_source}{fs.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00483 \{}
\DoxyCodeLine{00484   \mbox{\hyperlink{types_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}} tot, m;}
\DoxyCodeLine{00485   \textcolor{keyword}{struct }\mbox{\hyperlink{structbuf}{buf}} *bp;}
\DoxyCodeLine{00486 }
\DoxyCodeLine{00487   \textcolor{keywordflow}{if}(ip-\/>\mbox{\hyperlink{structinode_a8d74bec2898785c057111c328d23fda2}{type}} == \mbox{\hyperlink{stat_8h_a62b045a3e4fdf204bdddda0f3fc3d8c4}{T\_DEV}})\{}
\DoxyCodeLine{00488     \textcolor{keywordflow}{if}(ip-\/>\mbox{\hyperlink{structinode_a34af7242018a977dace5730683850875}{major}} < 0 || ip-\/>\mbox{\hyperlink{structinode_a34af7242018a977dace5730683850875}{major}} >= \mbox{\hyperlink{param_8h_aa564a41c8409694da49b0badf2bb2853}{NDEV}} || !\mbox{\hyperlink{structdevsw}{devsw}}[ip-\/>\mbox{\hyperlink{structinode_a34af7242018a977dace5730683850875}{major}}].\mbox{\hyperlink{structdevsw_a87fd7af6c9a6fb8663fc206be7a233d4}{write}})}
\DoxyCodeLine{00489       \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{00490     \textcolor{keywordflow}{return} \mbox{\hyperlink{structdevsw}{devsw}}[ip-\/>\mbox{\hyperlink{structinode_a34af7242018a977dace5730683850875}{major}}].\mbox{\hyperlink{structdevsw_a87fd7af6c9a6fb8663fc206be7a233d4}{write}}(ip, src, n);}
\DoxyCodeLine{00491   \}}
\DoxyCodeLine{00492 }
\DoxyCodeLine{00493   \textcolor{keywordflow}{if}(off > ip-\/>\mbox{\hyperlink{structinode_a918af769c48a8ca8afac057bf83d12de}{size}} || off + n < off)}
\DoxyCodeLine{00494     \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{00495   \textcolor{keywordflow}{if}(off + n > \mbox{\hyperlink{fs_8h_a714b2485a6dd312e37226e1f833728a9}{MAXFILE}}*\mbox{\hyperlink{fs_8h_a403cf3149c084cea115b85c90721039a}{BSIZE}})}
\DoxyCodeLine{00496     \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{00497 }
\DoxyCodeLine{00498   \textcolor{keywordflow}{for}(tot=0; tot<n; tot+=m, off+=m, src+=m)\{}
\DoxyCodeLine{00499     bp = \mbox{\hyperlink{bio_8c_a30b8d2ef2300ed8e3d879a428fe39898}{bread}}(ip-\/>\mbox{\hyperlink{structinode_a121742a89c4531f03a7de1613d5be605}{dev}}, bmap(ip, off/\mbox{\hyperlink{fs_8h_a403cf3149c084cea115b85c90721039a}{BSIZE}}));}
\DoxyCodeLine{00500     m = \mbox{\hyperlink{fs_8c_ac6afabdc09a49a433ee19d8a9486056d}{min}}(n -\/ tot, \mbox{\hyperlink{fs_8h_a403cf3149c084cea115b85c90721039a}{BSIZE}} -\/ off\%\mbox{\hyperlink{fs_8h_a403cf3149c084cea115b85c90721039a}{BSIZE}});}
\DoxyCodeLine{00501     \mbox{\hyperlink{defs_8h_ac152fff34fe03e497d35b1d4c47f1445}{memmove}}(bp-\/>\mbox{\hyperlink{structbuf_ab0ec38784ab94ed35e575cf6d33912d2}{data}} + off\%\mbox{\hyperlink{fs_8h_a403cf3149c084cea115b85c90721039a}{BSIZE}}, src, m);}
\DoxyCodeLine{00502     \mbox{\hyperlink{defs_8h_a270d0050dc50965f4f851717841ad33c}{log\_write}}(bp);}
\DoxyCodeLine{00503     \mbox{\hyperlink{bio_8c_ab5335aeb503731104314321a78a6d727}{brelse}}(bp);}
\DoxyCodeLine{00504   \}}
\DoxyCodeLine{00505 }
\DoxyCodeLine{00506   \textcolor{keywordflow}{if}(n > 0 \&\& off > ip-\/>\mbox{\hyperlink{structinode_a918af769c48a8ca8afac057bf83d12de}{size}})\{}
\DoxyCodeLine{00507     ip-\/>\mbox{\hyperlink{structinode_a918af769c48a8ca8afac057bf83d12de}{size}} = off;}
\DoxyCodeLine{00508     \mbox{\hyperlink{fs_8c_a7220afa8e5f4bea540eb95879ea7df6e}{iupdate}}(ip);}
\DoxyCodeLine{00509   \}}
\DoxyCodeLine{00510   \textcolor{keywordflow}{return} n;}
\DoxyCodeLine{00511 \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_a515876d4653cefef4732806ef7f2833f_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=314pt]{d5/d64/defs_8h_a515876d4653cefef4732806ef7f2833f_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{defs_8h_a7cb51f5c2b5cad3766f19eb69c92793b}\label{defs_8h_a7cb51f5c2b5cad3766f19eb69c92793b}} 
\index{defs.h@{defs.h}!yield@{yield}}
\index{yield@{yield}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{yield()}{yield()}}
{\footnotesize\ttfamily void yield (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{proc_8c_source_l00386}{386}} of file \mbox{\hyperlink{proc_8c_source}{proc.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00387 \{}
\DoxyCodeLine{00388   \mbox{\hyperlink{defs_8h_afe4ef8638f1ecb962a6e67fb086ee3b8}{acquire}}(\&\mbox{\hyperlink{proc_8c_addf39d613ca9a58e7e6080a2e454421a}{ptable}}.lock);  \textcolor{comment}{//DOC: yieldlock}}
\DoxyCodeLine{00389   \mbox{\hyperlink{proc_8c_a41af0935f3989aae450cf8988cd9c3a9}{myproc}}()-\/>\mbox{\hyperlink{structproc_a0f2fe91548a1382672ae26e29ca9e736}{state}} = \mbox{\hyperlink{proc_8h_aa1ced7d2b60040fded3fa873d0c03ba7a269b90433e40460a2c0044a0b3e15694}{RUNNABLE}};}
\DoxyCodeLine{00390   \mbox{\hyperlink{proc_8c_ad788da91743c333b5bed7c4a0dd12365}{sched}}();}
\DoxyCodeLine{00391   \mbox{\hyperlink{defs_8h_a4f8616948f3dbce65671f666eed1d669}{release}}(\&\mbox{\hyperlink{proc_8c_addf39d613ca9a58e7e6080a2e454421a}{ptable}}.lock);}
\DoxyCodeLine{00392 \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d64/defs_8h_a7cb51f5c2b5cad3766f19eb69c92793b_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=186pt]{d5/d64/defs_8h_a7cb51f5c2b5cad3766f19eb69c92793b_icgraph}
\end{center}
\end{figure}


\doxysubsection{Variable Documentation}
\mbox{\Hypertarget{defs_8h_a619ae379337e3cb2397ee0b6b4fd8d6b}\label{defs_8h_a619ae379337e3cb2397ee0b6b4fd8d6b}} 
\index{defs.h@{defs.h}!ioapicid@{ioapicid}}
\index{ioapicid@{ioapicid}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{ioapicid}{ioapicid}}
{\footnotesize\ttfamily \mbox{\hyperlink{types_8h_a65f85814a8290f9797005d3b28e7e5fc}{uchar}} ioapicid\hspace{0.3cm}{\ttfamily [extern]}}



Definition at line \mbox{\hyperlink{mp_8c_source_l00016}{16}} of file \mbox{\hyperlink{mp_8c_source}{mp.\+c}}.

\mbox{\Hypertarget{defs_8h_a46b52bd30030451d1b65291b77ba05d5}\label{defs_8h_a46b52bd30030451d1b65291b77ba05d5}} 
\index{defs.h@{defs.h}!ismp@{ismp}}
\index{ismp@{ismp}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{ismp}{ismp}}
{\footnotesize\ttfamily int ismp\hspace{0.3cm}{\ttfamily [extern]}}

\mbox{\Hypertarget{defs_8h_a4029f3e2439d5912f93543b8addd10ec}\label{defs_8h_a4029f3e2439d5912f93543b8addd10ec}} 
\index{defs.h@{defs.h}!lapic@{lapic}}
\index{lapic@{lapic}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{lapic}{lapic}}
{\footnotesize\ttfamily volatile \mbox{\hyperlink{types_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}}$\ast$ lapic\hspace{0.3cm}{\ttfamily [extern]}}



Definition at line \mbox{\hyperlink{lapic_8c_source_l00044}{44}} of file \mbox{\hyperlink{lapic_8c_source}{lapic.\+c}}.

\mbox{\Hypertarget{defs_8h_a7fcd6915876e066781399d7b00f1b1f0}\label{defs_8h_a7fcd6915876e066781399d7b00f1b1f0}} 
\index{defs.h@{defs.h}!ticks@{ticks}}
\index{ticks@{ticks}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{ticks}{ticks}}
{\footnotesize\ttfamily \mbox{\hyperlink{types_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}} ticks\hspace{0.3cm}{\ttfamily [extern]}}



Definition at line \mbox{\hyperlink{trap_8c_source_l00015}{15}} of file \mbox{\hyperlink{trap_8c_source}{trap.\+c}}.

\mbox{\Hypertarget{defs_8h_a094a4703b62095e2fa469fab3ffea5c7}\label{defs_8h_a094a4703b62095e2fa469fab3ffea5c7}} 
\index{defs.h@{defs.h}!tickslock@{tickslock}}
\index{tickslock@{tickslock}!defs.h@{defs.h}}
\doxysubsubsection{\texorpdfstring{tickslock}{tickslock}}
{\footnotesize\ttfamily struct \mbox{\hyperlink{structspinlock}{spinlock}} tickslock\hspace{0.3cm}{\ttfamily [extern]}}



Definition at line \mbox{\hyperlink{trap_8c_source_l00014}{14}} of file \mbox{\hyperlink{trap_8c_source}{trap.\+c}}.

