\hypertarget{umalloc_8c}{}\doxysection{umalloc.\+c File Reference}
\label{umalloc_8c}\index{umalloc.c@{umalloc.c}}
{\ttfamily \#include \char`\"{}types.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}stat.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}user.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}param.\+h\char`\"{}}\newline
Include dependency graph for umalloc.\+c\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=320pt]{d7/df9/umalloc_8c__incl}
\end{center}
\end{figure}
\doxysubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
union \mbox{\hyperlink{unionheader}{header}}
\end{DoxyCompactItemize}
\doxysubsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
typedef long \mbox{\hyperlink{umalloc_8c_aa508dd61e627680e57643837d292d89f}{Align}}
\item 
typedef union \mbox{\hyperlink{unionheader}{header}} \mbox{\hyperlink{umalloc_8c_a1a2bfaef0959ba21a357a6f8feaa477b}{Header}}
\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{umalloc_8c_adebb229f063e66907017098087cbe791}{free}} (void $\ast$ap)
\item 
void $\ast$ \mbox{\hyperlink{umalloc_8c_ac131c16d1dcb6bea908d0237c82e981d}{malloc}} (\mbox{\hyperlink{types_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}} nbytes)
\end{DoxyCompactItemize}


\doxysubsection{Typedef Documentation}
\mbox{\Hypertarget{umalloc_8c_aa508dd61e627680e57643837d292d89f}\label{umalloc_8c_aa508dd61e627680e57643837d292d89f}} 
\index{umalloc.c@{umalloc.c}!Align@{Align}}
\index{Align@{Align}!umalloc.c@{umalloc.c}}
\doxysubsubsection{\texorpdfstring{Align}{Align}}
{\footnotesize\ttfamily typedef long \mbox{\hyperlink{umalloc_8c_aa508dd61e627680e57643837d292d89f}{Align}}}



Definition at line \mbox{\hyperlink{umalloc_8c_source_l00009}{9}} of file \mbox{\hyperlink{umalloc_8c_source}{umalloc.\+c}}.

\mbox{\Hypertarget{umalloc_8c_a1a2bfaef0959ba21a357a6f8feaa477b}\label{umalloc_8c_a1a2bfaef0959ba21a357a6f8feaa477b}} 
\index{umalloc.c@{umalloc.c}!Header@{Header}}
\index{Header@{Header}!umalloc.c@{umalloc.c}}
\doxysubsubsection{\texorpdfstring{Header}{Header}}
{\footnotesize\ttfamily typedef union \mbox{\hyperlink{unionheader}{header}} \mbox{\hyperlink{umalloc_8c_a1a2bfaef0959ba21a357a6f8feaa477b}{Header}}}



Definition at line \mbox{\hyperlink{umalloc_8c_source_l00019}{19}} of file \mbox{\hyperlink{umalloc_8c_source}{umalloc.\+c}}.



\doxysubsection{Function Documentation}
\mbox{\Hypertarget{umalloc_8c_adebb229f063e66907017098087cbe791}\label{umalloc_8c_adebb229f063e66907017098087cbe791}} 
\index{umalloc.c@{umalloc.c}!free@{free}}
\index{free@{free}!umalloc.c@{umalloc.c}}
\doxysubsubsection{\texorpdfstring{free()}{free()}}
{\footnotesize\ttfamily void free (\begin{DoxyParamCaption}\item[{void $\ast$}]{ap }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{umalloc_8c_source_l00025}{25}} of file \mbox{\hyperlink{umalloc_8c_source}{umalloc.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00026 \{}
\DoxyCodeLine{00027   \mbox{\hyperlink{unionheader}{Header}} *bp, *p;}
\DoxyCodeLine{00028 }
\DoxyCodeLine{00029   bp = (\mbox{\hyperlink{unionheader}{Header}}*)ap -\/ 1;}
\DoxyCodeLine{00030   \textcolor{keywordflow}{for}(p = freep; !(bp > p \&\& bp < p-\/>\mbox{\hyperlink{unionheader_a70678459259ef591b9d448564b24f3cd}{s}}.\mbox{\hyperlink{unionheader_adcb7a02e18836885c802789f6a6c99fd}{ptr}}); p = p-\/>\mbox{\hyperlink{unionheader_a70678459259ef591b9d448564b24f3cd}{s}}.\mbox{\hyperlink{unionheader_adcb7a02e18836885c802789f6a6c99fd}{ptr}})}
\DoxyCodeLine{00031     \textcolor{keywordflow}{if}(p >= p-\/>\mbox{\hyperlink{unionheader_a70678459259ef591b9d448564b24f3cd}{s}}.\mbox{\hyperlink{unionheader_adcb7a02e18836885c802789f6a6c99fd}{ptr}} \&\& (bp > p || bp < p-\/>s.ptr))}
\DoxyCodeLine{00032       \textcolor{keywordflow}{break};}
\DoxyCodeLine{00033   \textcolor{keywordflow}{if}(bp + bp-\/>\mbox{\hyperlink{unionheader_a70678459259ef591b9d448564b24f3cd}{s}}.\mbox{\hyperlink{unionheader_a70db454b20b4a40995532b7ea029a527}{size}} == p-\/>\mbox{\hyperlink{unionheader_a70678459259ef591b9d448564b24f3cd}{s}}.\mbox{\hyperlink{unionheader_adcb7a02e18836885c802789f6a6c99fd}{ptr}})\{}
\DoxyCodeLine{00034     bp-\/>\mbox{\hyperlink{unionheader_a70678459259ef591b9d448564b24f3cd}{s}}.\mbox{\hyperlink{unionheader_a70db454b20b4a40995532b7ea029a527}{size}} += p-\/>\mbox{\hyperlink{unionheader_a70678459259ef591b9d448564b24f3cd}{s}}.\mbox{\hyperlink{unionheader_adcb7a02e18836885c802789f6a6c99fd}{ptr}}-\/>\mbox{\hyperlink{unionheader_a70678459259ef591b9d448564b24f3cd}{s}}.\mbox{\hyperlink{unionheader_a70db454b20b4a40995532b7ea029a527}{size}};}
\DoxyCodeLine{00035     bp-\/>\mbox{\hyperlink{unionheader_a70678459259ef591b9d448564b24f3cd}{s}}.\mbox{\hyperlink{unionheader_adcb7a02e18836885c802789f6a6c99fd}{ptr}} = p-\/>\mbox{\hyperlink{unionheader_a70678459259ef591b9d448564b24f3cd}{s}}.\mbox{\hyperlink{unionheader_adcb7a02e18836885c802789f6a6c99fd}{ptr}}-\/>\mbox{\hyperlink{unionheader_a70678459259ef591b9d448564b24f3cd}{s}}.\mbox{\hyperlink{unionheader_adcb7a02e18836885c802789f6a6c99fd}{ptr}};}
\DoxyCodeLine{00036   \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{00037     bp-\/>\mbox{\hyperlink{unionheader_a70678459259ef591b9d448564b24f3cd}{s}}.\mbox{\hyperlink{unionheader_adcb7a02e18836885c802789f6a6c99fd}{ptr}} = p-\/>\mbox{\hyperlink{unionheader_a70678459259ef591b9d448564b24f3cd}{s}}.\mbox{\hyperlink{unionheader_adcb7a02e18836885c802789f6a6c99fd}{ptr}};}
\DoxyCodeLine{00038   \textcolor{keywordflow}{if}(p + p-\/>\mbox{\hyperlink{unionheader_a70678459259ef591b9d448564b24f3cd}{s}}.\mbox{\hyperlink{unionheader_a70db454b20b4a40995532b7ea029a527}{size}} == bp)\{}
\DoxyCodeLine{00039     p-\/>\mbox{\hyperlink{unionheader_a70678459259ef591b9d448564b24f3cd}{s}}.\mbox{\hyperlink{unionheader_a70db454b20b4a40995532b7ea029a527}{size}} += bp-\/>\mbox{\hyperlink{unionheader_a70678459259ef591b9d448564b24f3cd}{s}}.\mbox{\hyperlink{unionheader_a70db454b20b4a40995532b7ea029a527}{size}};}
\DoxyCodeLine{00040     p-\/>\mbox{\hyperlink{unionheader_a70678459259ef591b9d448564b24f3cd}{s}}.\mbox{\hyperlink{unionheader_adcb7a02e18836885c802789f6a6c99fd}{ptr}} = bp-\/>\mbox{\hyperlink{unionheader_a70678459259ef591b9d448564b24f3cd}{s}}.\mbox{\hyperlink{unionheader_adcb7a02e18836885c802789f6a6c99fd}{ptr}};}
\DoxyCodeLine{00041   \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{00042     p-\/>\mbox{\hyperlink{unionheader_a70678459259ef591b9d448564b24f3cd}{s}}.\mbox{\hyperlink{unionheader_adcb7a02e18836885c802789f6a6c99fd}{ptr}} = bp;}
\DoxyCodeLine{00043   freep = p;}
\DoxyCodeLine{00044 \}}

\end{DoxyCode}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{df/d5d/umalloc_8c_adebb229f063e66907017098087cbe791_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{umalloc_8c_ac131c16d1dcb6bea908d0237c82e981d}\label{umalloc_8c_ac131c16d1dcb6bea908d0237c82e981d}} 
\index{umalloc.c@{umalloc.c}!malloc@{malloc}}
\index{malloc@{malloc}!umalloc.c@{umalloc.c}}
\doxysubsubsection{\texorpdfstring{malloc()}{malloc()}}
{\footnotesize\ttfamily void $\ast$ malloc (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{types_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}}}]{nbytes }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{umalloc_8c_source_l00064}{64}} of file \mbox{\hyperlink{umalloc_8c_source}{umalloc.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00065 \{}
\DoxyCodeLine{00066   \mbox{\hyperlink{unionheader}{Header}} *p, *prevp;}
\DoxyCodeLine{00067   \mbox{\hyperlink{types_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}} nunits;}
\DoxyCodeLine{00068 }
\DoxyCodeLine{00069   nunits = (nbytes + \textcolor{keyword}{sizeof}(\mbox{\hyperlink{umalloc_8c_a1a2bfaef0959ba21a357a6f8feaa477b}{Header}}) -\/ 1)/\textcolor{keyword}{sizeof}(\mbox{\hyperlink{umalloc_8c_a1a2bfaef0959ba21a357a6f8feaa477b}{Header}}) + 1;}
\DoxyCodeLine{00070   \textcolor{keywordflow}{if}((prevp = freep) == 0)\{}
\DoxyCodeLine{00071     base.\mbox{\hyperlink{unionheader_a70678459259ef591b9d448564b24f3cd}{s}}.\mbox{\hyperlink{unionheader_adcb7a02e18836885c802789f6a6c99fd}{ptr}} = freep = prevp = \&base;}
\DoxyCodeLine{00072     base.\mbox{\hyperlink{unionheader_a70678459259ef591b9d448564b24f3cd}{s}}.\mbox{\hyperlink{unionheader_a70db454b20b4a40995532b7ea029a527}{size}} = 0;}
\DoxyCodeLine{00073   \}}
\DoxyCodeLine{00074   \textcolor{keywordflow}{for}(p = prevp-\/>\mbox{\hyperlink{unionheader_a70678459259ef591b9d448564b24f3cd}{s}}.\mbox{\hyperlink{unionheader_adcb7a02e18836885c802789f6a6c99fd}{ptr}}; ; prevp = p, p = p-\/>\mbox{\hyperlink{unionheader_a70678459259ef591b9d448564b24f3cd}{s}}.\mbox{\hyperlink{unionheader_adcb7a02e18836885c802789f6a6c99fd}{ptr}})\{}
\DoxyCodeLine{00075     \textcolor{keywordflow}{if}(p-\/>\mbox{\hyperlink{unionheader_a70678459259ef591b9d448564b24f3cd}{s}}.\mbox{\hyperlink{unionheader_a70db454b20b4a40995532b7ea029a527}{size}} >= nunits)\{}
\DoxyCodeLine{00076       \textcolor{keywordflow}{if}(p-\/>\mbox{\hyperlink{unionheader_a70678459259ef591b9d448564b24f3cd}{s}}.\mbox{\hyperlink{unionheader_a70db454b20b4a40995532b7ea029a527}{size}} == nunits)}
\DoxyCodeLine{00077         prevp-\/>\mbox{\hyperlink{unionheader_a70678459259ef591b9d448564b24f3cd}{s}}.\mbox{\hyperlink{unionheader_adcb7a02e18836885c802789f6a6c99fd}{ptr}} = p-\/>\mbox{\hyperlink{unionheader_a70678459259ef591b9d448564b24f3cd}{s}}.\mbox{\hyperlink{unionheader_adcb7a02e18836885c802789f6a6c99fd}{ptr}};}
\DoxyCodeLine{00078       \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00079         p-\/>\mbox{\hyperlink{unionheader_a70678459259ef591b9d448564b24f3cd}{s}}.\mbox{\hyperlink{unionheader_a70db454b20b4a40995532b7ea029a527}{size}} -\/= nunits;}
\DoxyCodeLine{00080         p += p-\/>\mbox{\hyperlink{unionheader_a70678459259ef591b9d448564b24f3cd}{s}}.\mbox{\hyperlink{unionheader_a70db454b20b4a40995532b7ea029a527}{size}};}
\DoxyCodeLine{00081         p-\/>\mbox{\hyperlink{unionheader_a70678459259ef591b9d448564b24f3cd}{s}}.\mbox{\hyperlink{unionheader_a70db454b20b4a40995532b7ea029a527}{size}} = nunits;}
\DoxyCodeLine{00082       \}}
\DoxyCodeLine{00083       freep = prevp;}
\DoxyCodeLine{00084       \textcolor{keywordflow}{return} (\textcolor{keywordtype}{void}*)(p + 1);}
\DoxyCodeLine{00085     \}}
\DoxyCodeLine{00086     \textcolor{keywordflow}{if}(p == freep)}
\DoxyCodeLine{00087       \textcolor{keywordflow}{if}((p = morecore(nunits)) == 0)}
\DoxyCodeLine{00088         \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{00089   \}}
\DoxyCodeLine{00090 \}}

\end{DoxyCode}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{df/d5d/umalloc_8c_ac131c16d1dcb6bea908d0237c82e981d_icgraph}
\end{center}
\end{figure}
