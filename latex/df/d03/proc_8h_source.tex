\hypertarget{proc_8h_source}{}\doxysection{proc.\+h}
\mbox{\hyperlink{proc_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{proc_8h_source_l00001}00001 \textcolor{comment}{// Per-\/CPU state}}
\DoxyCodeLine{\Hypertarget{proc_8h_source_l00002}\mbox{\hyperlink{structcpu}{00002}} \textcolor{keyword}{struct }\mbox{\hyperlink{structcpu}{cpu}} \{}
\DoxyCodeLine{\Hypertarget{proc_8h_source_l00003}\mbox{\hyperlink{structcpu_ad08a3478ec15fc8bec1d9b6b5a0431db}{00003}}   \mbox{\hyperlink{types_8h_a65f85814a8290f9797005d3b28e7e5fc}{uchar}} \mbox{\hyperlink{structcpu_ad08a3478ec15fc8bec1d9b6b5a0431db}{apicid}};                \textcolor{comment}{// Local APIC ID}}
\DoxyCodeLine{\Hypertarget{proc_8h_source_l00004}\mbox{\hyperlink{structcpu_aaa1510fdf8a2230c033d04e13e4fdd9e}{00004}}   \textcolor{keyword}{struct }\mbox{\hyperlink{structcontext}{context}} *\mbox{\hyperlink{structcpu_aaa1510fdf8a2230c033d04e13e4fdd9e}{scheduler}};   \textcolor{comment}{// swtch() here to enter scheduler}}
\DoxyCodeLine{\Hypertarget{proc_8h_source_l00005}\mbox{\hyperlink{structcpu_a32e7b5aa877171c943d47038e818a159}{00005}}   \textcolor{keyword}{struct }\mbox{\hyperlink{structtaskstate}{taskstate}} \mbox{\hyperlink{structcpu_a32e7b5aa877171c943d47038e818a159}{ts}};         \textcolor{comment}{// Used by x86 to find stack for interrupt}}
\DoxyCodeLine{\Hypertarget{proc_8h_source_l00006}\mbox{\hyperlink{structcpu_aee38fb8832f8e728538b2cee877d1c09}{00006}}   \textcolor{keyword}{struct }\mbox{\hyperlink{structsegdesc}{segdesc}} \mbox{\hyperlink{structcpu_aee38fb8832f8e728538b2cee877d1c09}{gdt}}[\mbox{\hyperlink{mmu_8h_a2fca412c6ed6584438e96f43ccce030a}{NSEGS}}];   \textcolor{comment}{// x86 global descriptor table}}
\DoxyCodeLine{\Hypertarget{proc_8h_source_l00007}\mbox{\hyperlink{structcpu_a869f6e0e1dbf69de0bdb3546f981847f}{00007}}   \textcolor{keyword}{volatile} \mbox{\hyperlink{types_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}} \mbox{\hyperlink{structcpu_a869f6e0e1dbf69de0bdb3546f981847f}{started}};       \textcolor{comment}{// Has the CPU started?}}
\DoxyCodeLine{\Hypertarget{proc_8h_source_l00008}\mbox{\hyperlink{structcpu_a9ccad8ae031c295f86e96de26df24805}{00008}}   \textcolor{keywordtype}{int} \mbox{\hyperlink{structcpu_a9ccad8ae031c295f86e96de26df24805}{ncli}};                    \textcolor{comment}{// Depth of pushcli nesting.}}
\DoxyCodeLine{\Hypertarget{proc_8h_source_l00009}\mbox{\hyperlink{structcpu_a26fc271fea8af30d67fc2ae22ef0a82f}{00009}}   \textcolor{keywordtype}{int} \mbox{\hyperlink{structcpu_a26fc271fea8af30d67fc2ae22ef0a82f}{intena}};                  \textcolor{comment}{// Were interrupts enabled before pushcli?}}
\DoxyCodeLine{\Hypertarget{proc_8h_source_l00010}\mbox{\hyperlink{structcpu_a9e71a6265904fd644875a9ea5a413c89}{00010}}   \textcolor{keyword}{struct }\mbox{\hyperlink{structproc}{proc}} *\mbox{\hyperlink{structcpu_a9e71a6265904fd644875a9ea5a413c89}{proc}};           \textcolor{comment}{// The process running on this cpu or null}}
\DoxyCodeLine{\Hypertarget{proc_8h_source_l00011}00011 \};}
\DoxyCodeLine{\Hypertarget{proc_8h_source_l00012}00012 }
\DoxyCodeLine{\Hypertarget{proc_8h_source_l00013}00013 \textcolor{keyword}{extern} \textcolor{keyword}{struct }\mbox{\hyperlink{structcpu}{cpu}} \mbox{\hyperlink{proc_8h_a6d2633e73724907b582dfe6938ed7bb9}{cpus}}[\mbox{\hyperlink{param_8h_a2c4561c4c17cde39101c4e7a40d4492a}{NCPU}}];}
\DoxyCodeLine{\Hypertarget{proc_8h_source_l00014}00014 \textcolor{keyword}{extern} \textcolor{keywordtype}{int} \mbox{\hyperlink{proc_8h_a6201a0661c3d5b88df5f63529298eb48}{ncpu}};}
\DoxyCodeLine{\Hypertarget{proc_8h_source_l00015}00015 }
\DoxyCodeLine{\Hypertarget{proc_8h_source_l00016}00016 \textcolor{comment}{//PAGEBREAK: 17}}
\DoxyCodeLine{\Hypertarget{proc_8h_source_l00017}00017 \textcolor{comment}{// Saved registers for kernel context switches.}}
\DoxyCodeLine{\Hypertarget{proc_8h_source_l00018}00018 \textcolor{comment}{// Don't need to save all the segment registers (\%cs, etc),}}
\DoxyCodeLine{\Hypertarget{proc_8h_source_l00019}00019 \textcolor{comment}{// because they are constant across kernel contexts.}}
\DoxyCodeLine{\Hypertarget{proc_8h_source_l00020}00020 \textcolor{comment}{// Don't need to save \%eax, \%ecx, \%edx, because the}}
\DoxyCodeLine{\Hypertarget{proc_8h_source_l00021}00021 \textcolor{comment}{// x86 convention is that the caller has saved them.}}
\DoxyCodeLine{\Hypertarget{proc_8h_source_l00022}00022 \textcolor{comment}{// Contexts are stored at the bottom of the stack they}}
\DoxyCodeLine{\Hypertarget{proc_8h_source_l00023}00023 \textcolor{comment}{// describe; the stack pointer is the address of the context.}}
\DoxyCodeLine{\Hypertarget{proc_8h_source_l00024}00024 \textcolor{comment}{// The layout of the context matches the layout of the stack in swtch.S}}
\DoxyCodeLine{\Hypertarget{proc_8h_source_l00025}00025 \textcolor{comment}{// at the "{}Switch stacks"{} comment. Switch doesn't save eip explicitly,}}
\DoxyCodeLine{\Hypertarget{proc_8h_source_l00026}00026 \textcolor{comment}{// but it is on the stack and allocproc() manipulates it.}}
\DoxyCodeLine{\Hypertarget{proc_8h_source_l00027}\mbox{\hyperlink{structcontext}{00027}} \textcolor{keyword}{struct }\mbox{\hyperlink{structcontext}{context}} \{}
\DoxyCodeLine{\Hypertarget{proc_8h_source_l00028}\mbox{\hyperlink{structcontext_a9c926d583d00a615327b9b4a8fe0ab63}{00028}}   \mbox{\hyperlink{types_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}} \mbox{\hyperlink{structcontext_a9c926d583d00a615327b9b4a8fe0ab63}{edi}};}
\DoxyCodeLine{\Hypertarget{proc_8h_source_l00029}\mbox{\hyperlink{structcontext_a9596ea769c8681490bbc67fd1b0abc92}{00029}}   \mbox{\hyperlink{types_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}} \mbox{\hyperlink{structcontext_a9596ea769c8681490bbc67fd1b0abc92}{esi}};}
\DoxyCodeLine{\Hypertarget{proc_8h_source_l00030}\mbox{\hyperlink{structcontext_ab1dd54ca1266e38df5943750224cd8d5}{00030}}   \mbox{\hyperlink{types_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}} \mbox{\hyperlink{structcontext_ab1dd54ca1266e38df5943750224cd8d5}{ebx}};}
\DoxyCodeLine{\Hypertarget{proc_8h_source_l00031}\mbox{\hyperlink{structcontext_ac9640ddc2e90e4213ba9847bbe1b0e57}{00031}}   \mbox{\hyperlink{types_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}} \mbox{\hyperlink{structcontext_ac9640ddc2e90e4213ba9847bbe1b0e57}{ebp}};}
\DoxyCodeLine{\Hypertarget{proc_8h_source_l00032}\mbox{\hyperlink{structcontext_a0cfb49e5b03fd7bf12fa79d1a42be935}{00032}}   \mbox{\hyperlink{types_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}} \mbox{\hyperlink{structcontext_a0cfb49e5b03fd7bf12fa79d1a42be935}{eip}};}
\DoxyCodeLine{\Hypertarget{proc_8h_source_l00033}00033 \};}
\DoxyCodeLine{\Hypertarget{proc_8h_source_l00034}00034 }
\DoxyCodeLine{\Hypertarget{proc_8h_source_l00035}\mbox{\hyperlink{proc_8h_aa1ced7d2b60040fded3fa873d0c03ba7aaed0f3d976d25b54cb7c895ce591febb}{00035}} \textcolor{keyword}{enum} \mbox{\hyperlink{proc_8h_aa1ced7d2b60040fded3fa873d0c03ba7}{procstate}} \{ \mbox{\hyperlink{proc_8h_aa1ced7d2b60040fded3fa873d0c03ba7aa09b651ef326a9d8efcee5cc5b720ab4}{UNUSED}}, \mbox{\hyperlink{proc_8h_aa1ced7d2b60040fded3fa873d0c03ba7aaed0f3d976d25b54cb7c895ce591febb}{EMBRYO}}, \mbox{\hyperlink{proc_8h_aa1ced7d2b60040fded3fa873d0c03ba7a488282601451a751e0f0e770b15d4235}{SLEEPING}}, \mbox{\hyperlink{proc_8h_aa1ced7d2b60040fded3fa873d0c03ba7a269b90433e40460a2c0044a0b3e15694}{RUNNABLE}}, \mbox{\hyperlink{proc_8h_aa1ced7d2b60040fded3fa873d0c03ba7a1061be6c3fb88d32829cba6f6b2be304}{RUNNING}}, \mbox{\hyperlink{proc_8h_aa1ced7d2b60040fded3fa873d0c03ba7a5dfb36109b24f39d54d5c3f48f53def8}{ZOMBIE}} \};}
\DoxyCodeLine{\Hypertarget{proc_8h_source_l00036}00036 }
\DoxyCodeLine{\Hypertarget{proc_8h_source_l00037}00037 \textcolor{comment}{// Per-\/process state}}
\DoxyCodeLine{\Hypertarget{proc_8h_source_l00038}\mbox{\hyperlink{structproc}{00038}} \textcolor{keyword}{struct }\mbox{\hyperlink{structproc}{proc}} \{}
\DoxyCodeLine{\Hypertarget{proc_8h_source_l00039}\mbox{\hyperlink{structproc_a6e67042bb361124ff287af88efc33e00}{00039}}   \mbox{\hyperlink{types_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}} \mbox{\hyperlink{structproc_a6e67042bb361124ff287af88efc33e00}{sz}};                     \textcolor{comment}{// Size of process memory (bytes)}}
\DoxyCodeLine{\Hypertarget{proc_8h_source_l00040}\mbox{\hyperlink{structproc_ad430afc653e9eb6cee33954d5545b79d}{00040}}   \mbox{\hyperlink{types_8h_ac131849542282b2c95dfeaf1f26dc010}{pde\_t}}* \mbox{\hyperlink{structproc_ad430afc653e9eb6cee33954d5545b79d}{pgdir}};                \textcolor{comment}{// Page table}}
\DoxyCodeLine{\Hypertarget{proc_8h_source_l00041}\mbox{\hyperlink{structproc_a9f556df98482bff6c9216013d7581ae4}{00041}}   \textcolor{keywordtype}{char} *\mbox{\hyperlink{structproc_a9f556df98482bff6c9216013d7581ae4}{kstack}};                \textcolor{comment}{// Bottom of kernel stack for this process}}
\DoxyCodeLine{\Hypertarget{proc_8h_source_l00042}\mbox{\hyperlink{structproc_a0f2fe91548a1382672ae26e29ca9e736}{00042}}   \textcolor{keyword}{enum} \mbox{\hyperlink{proc_8h_aa1ced7d2b60040fded3fa873d0c03ba7}{procstate}} \mbox{\hyperlink{structproc_a0f2fe91548a1382672ae26e29ca9e736}{state}};        \textcolor{comment}{// Process state}}
\DoxyCodeLine{\Hypertarget{proc_8h_source_l00043}\mbox{\hyperlink{structproc_acf2bdf54d1f957ccbcdc987007029944}{00043}}   \textcolor{keywordtype}{int} \mbox{\hyperlink{structproc_acf2bdf54d1f957ccbcdc987007029944}{pid}};                     \textcolor{comment}{// Process ID}}
\DoxyCodeLine{\Hypertarget{proc_8h_source_l00044}\mbox{\hyperlink{structproc_a14ea8849701ffafba4d142725de154d4}{00044}}   \textcolor{keyword}{struct }\mbox{\hyperlink{structproc}{proc}} *\mbox{\hyperlink{structproc_a14ea8849701ffafba4d142725de154d4}{parent}};         \textcolor{comment}{// Parent process}}
\DoxyCodeLine{\Hypertarget{proc_8h_source_l00045}\mbox{\hyperlink{structproc_a56ec07ac1e10ce42adfc8dd2a366071f}{00045}}   \textcolor{keyword}{struct }\mbox{\hyperlink{structtrapframe}{trapframe}} *\mbox{\hyperlink{structproc_a56ec07ac1e10ce42adfc8dd2a366071f}{tf}};        \textcolor{comment}{// Trap frame for current syscall}}
\DoxyCodeLine{\Hypertarget{proc_8h_source_l00046}\mbox{\hyperlink{structproc_ae0d9bffe1ad1c7d60dd2733be0a2333c}{00046}}   \textcolor{keyword}{struct }\mbox{\hyperlink{structcontext}{context}} *\mbox{\hyperlink{structproc_ae0d9bffe1ad1c7d60dd2733be0a2333c}{context}};     \textcolor{comment}{// swtch() here to run process}}
\DoxyCodeLine{\Hypertarget{proc_8h_source_l00047}\mbox{\hyperlink{structproc_a03048a49756c2243576208ba4ec5fbd4}{00047}}   \textcolor{keywordtype}{void} *\mbox{\hyperlink{structproc_a03048a49756c2243576208ba4ec5fbd4}{chan}};                  \textcolor{comment}{// If non-\/zero, sleeping on chan}}
\DoxyCodeLine{\Hypertarget{proc_8h_source_l00048}\mbox{\hyperlink{structproc_afb4f94a3f4df9a835dbb41b0c26660a4}{00048}}   \textcolor{keywordtype}{int} \mbox{\hyperlink{structproc_afb4f94a3f4df9a835dbb41b0c26660a4}{killed}};                  \textcolor{comment}{// If non-\/zero, have been killed}}
\DoxyCodeLine{\Hypertarget{proc_8h_source_l00049}\mbox{\hyperlink{structproc_a4a9eb0352efe3fc097c91fccfaac50bd}{00049}}   \textcolor{keyword}{struct }\mbox{\hyperlink{structfile}{file}} *\mbox{\hyperlink{structproc_a4a9eb0352efe3fc097c91fccfaac50bd}{ofile}}[\mbox{\hyperlink{param_8h_a80bacbaea8dd6aecf216d85d981bcb21}{NOFILE}}];  \textcolor{comment}{// Open files}}
\DoxyCodeLine{\Hypertarget{proc_8h_source_l00050}\mbox{\hyperlink{structproc_a493bc338ce008a838eef521972a35257}{00050}}   \textcolor{keyword}{struct }\mbox{\hyperlink{structinode}{inode}} *\mbox{\hyperlink{structproc_a493bc338ce008a838eef521972a35257}{cwd}};           \textcolor{comment}{// Current directory}}
\DoxyCodeLine{\Hypertarget{proc_8h_source_l00051}\mbox{\hyperlink{structproc_ac04af53e17d24b90c3cbfab56d658d62}{00051}}   \textcolor{keywordtype}{char} \mbox{\hyperlink{structproc_ac04af53e17d24b90c3cbfab56d658d62}{name}}[16];               \textcolor{comment}{// Process name (debugging)}}
\DoxyCodeLine{\Hypertarget{proc_8h_source_l00052}\mbox{\hyperlink{structproc_adea4145a33ca852b6b634942f29c6534}{00052}}   \textcolor{keywordtype}{int} \mbox{\hyperlink{structproc_adea4145a33ca852b6b634942f29c6534}{priority}};                \textcolor{comment}{// Process priority}}
\DoxyCodeLine{\Hypertarget{proc_8h_source_l00053}00053 \};}
\DoxyCodeLine{\Hypertarget{proc_8h_source_l00054}00054 }
\DoxyCodeLine{\Hypertarget{proc_8h_source_l00055}00055 \textcolor{comment}{// Process memory is laid out contiguously, low addresses first:}}
\DoxyCodeLine{\Hypertarget{proc_8h_source_l00056}00056 \textcolor{comment}{//   text}}
\DoxyCodeLine{\Hypertarget{proc_8h_source_l00057}00057 \textcolor{comment}{//   original data and bss}}
\DoxyCodeLine{\Hypertarget{proc_8h_source_l00058}00058 \textcolor{comment}{//   fixed-\/size stack}}
\DoxyCodeLine{\Hypertarget{proc_8h_source_l00059}00059 \textcolor{comment}{//   expandable heap}}

\end{DoxyCode}
