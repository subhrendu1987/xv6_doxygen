<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>xv6: defs.h File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">xv6
   </div>
   <div id="projectbrief">Doxygen documentation for the xv6-public operating system</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">defs.h File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="../../d2/d3c/defs_8h__dep__incl.png" border="0" usemap="#adefs_8hdep" alt=""/></div>
<map name="adefs_8hdep" id="adefs_8hdep">
<area shape="rect" title=" " alt="" coords="956,5,1015,31"/>
<area shape="rect" href="../../dc/de6/bio_8c.html" title=" " alt="" coords="5,79,56,104"/>
<area shape="rect" href="../../d0/d56/console_8c.html" title=" " alt="" coords="81,79,159,104"/>
<area shape="rect" href="../../df/dc9/exec_8c.html" title=" " alt="" coords="184,79,245,104"/>
<area shape="rect" href="../../d6/d13/file_8c.html" title=" " alt="" coords="269,79,320,104"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html" title=" " alt="" coords="345,79,389,104"/>
<area shape="rect" href="../../d9/d2f/ide_8c.html" title=" " alt="" coords="413,79,464,104"/>
<area shape="rect" href="../../dd/d61/ioapic_8c.html" title=" " alt="" coords="488,79,555,104"/>
<area shape="rect" href="../../d4/def/kalloc_8c.html" title=" " alt="" coords="579,79,645,104"/>
<area shape="rect" href="../../dc/da9/kbd_8c.html" title=" " alt="" coords="670,79,725,104"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html" title=" " alt="" coords="749,79,809,104"/>
<area shape="rect" href="../../d7/df8/log_8c.html" title=" " alt="" coords="833,79,884,104"/>
<area shape="rect" href="../../d0/d29/main_8c.html" title=" " alt="" coords="908,79,969,104"/>
<area shape="rect" href="../../da/d9b/memide_8c.html" title=" " alt="" coords="994,79,1073,104"/>
<area shape="rect" href="../../dd/d06/mp_8c.html" title=" " alt="" coords="1097,79,1148,104"/>
<area shape="rect" href="../../d1/d47/pipe_8c.html" title=" " alt="" coords="1173,79,1230,104"/>
<area shape="rect" href="../../d3/dda/proc_8c.html" title=" " alt="" coords="1255,79,1313,104"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html" title=" " alt="" coords="1337,79,1425,104"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html" title=" " alt="" coords="1450,79,1531,104"/>
<area shape="rect" href="../../db/dd8/syscall_8c.html" title=" " alt="" coords="1556,79,1631,104"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html" title=" " alt="" coords="1655,79,1726,104"/>
<area shape="rect" href="../../dd/d35/sysproc_8c.html" title=" " alt="" coords="1750,79,1829,104"/>
<area shape="rect" href="../../dc/d6f/trap_8c.html" title=" " alt="" coords="1853,79,1907,104"/>
<area shape="rect" href="../../d1/d87/uart_8c.html" title=" " alt="" coords="1931,79,1986,104"/>
<area shape="rect" href="../../de/de9/vm_8c.html" title=" " alt="" coords="2011,79,2061,104"/>
</map>
</div>
</div>
<p><a href="../../d5/d64/defs_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:afacd331296c10f360da7640e0d68429f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#afacd331296c10f360da7640e0d68429f">NELEM</a>(x)&#160;&#160;&#160;(sizeof(x)/sizeof((x)[0]))</td></tr>
<tr class="separator:afacd331296c10f360da7640e0d68429f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a53cca0ddc98c5f1de37124eca2575a59"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#a53cca0ddc98c5f1de37124eca2575a59">binit</a> (void)</td></tr>
<tr class="separator:a53cca0ddc98c5f1de37124eca2575a59"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a03ff74b99b4c3282b93b122e74d0804b"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d9/dd0/structbuf.html">buf</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#a03ff74b99b4c3282b93b122e74d0804b">bread</a> (<a class="el" href="../../d9/d49/types_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>, <a class="el" href="../../d9/d49/types_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>)</td></tr>
<tr class="separator:a03ff74b99b4c3282b93b122e74d0804b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa31ec2f79e0456737a9680270bc1841b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#aa31ec2f79e0456737a9680270bc1841b">brelse</a> (struct <a class="el" href="../../d9/dd0/structbuf.html">buf</a> *)</td></tr>
<tr class="separator:aa31ec2f79e0456737a9680270bc1841b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1bfd775f14ad3dfee354ee3897ecd28d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#a1bfd775f14ad3dfee354ee3897ecd28d">bwrite</a> (struct <a class="el" href="../../d9/dd0/structbuf.html">buf</a> *)</td></tr>
<tr class="separator:a1bfd775f14ad3dfee354ee3897ecd28d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab508ff0f4db26fe35cd25fa648f9ee75"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#ab508ff0f4db26fe35cd25fa648f9ee75">consoleinit</a> (void)</td></tr>
<tr class="separator:ab508ff0f4db26fe35cd25fa648f9ee75"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abeb2bc020e7332bcde1d7beab08582d3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#abeb2bc020e7332bcde1d7beab08582d3">cprintf</a> (char *,...)</td></tr>
<tr class="separator:abeb2bc020e7332bcde1d7beab08582d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ec968a6fc407075634fe0e82a9c6862"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#a9ec968a6fc407075634fe0e82a9c6862">consoleintr</a> (int(*)(void))</td></tr>
<tr class="separator:a9ec968a6fc407075634fe0e82a9c6862"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a45323e3f295a0d9b90929cc30a24e2aa"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#a45323e3f295a0d9b90929cc30a24e2aa">panic</a> (char *) <a class="el" href="../../d0/d29/main_8c.html#a08f0b7c20a38fda2383d4f70bb78dc3e">__attribute__</a>((noreturn))</td></tr>
<tr class="separator:a45323e3f295a0d9b90929cc30a24e2aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa7b4aae4a12acd187e23396214aeca47"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#aa7b4aae4a12acd187e23396214aeca47">exec</a> (char *, char **)</td></tr>
<tr class="separator:aa7b4aae4a12acd187e23396214aeca47"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac56b15561658d0e74ce1c53309b8f97d"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d7/d3a/structfile.html">file</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#ac56b15561658d0e74ce1c53309b8f97d">filealloc</a> (void)</td></tr>
<tr class="separator:ac56b15561658d0e74ce1c53309b8f97d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac865ee0b2d70f753d61d1fefef9de0f6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#ac865ee0b2d70f753d61d1fefef9de0f6">fileclose</a> (struct <a class="el" href="../../d7/d3a/structfile.html">file</a> *)</td></tr>
<tr class="separator:ac865ee0b2d70f753d61d1fefef9de0f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a67aac4011147fe1ec585211e23580721"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d7/d3a/structfile.html">file</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#a67aac4011147fe1ec585211e23580721">filedup</a> (struct <a class="el" href="../../d7/d3a/structfile.html">file</a> *)</td></tr>
<tr class="separator:a67aac4011147fe1ec585211e23580721"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a66bb5a4b304ea0f851dd999fc8195fa4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#a66bb5a4b304ea0f851dd999fc8195fa4">fileinit</a> (void)</td></tr>
<tr class="separator:a66bb5a4b304ea0f851dd999fc8195fa4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6bd1db179155944c9d1fbc89d8b7b162"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#a6bd1db179155944c9d1fbc89d8b7b162">fileread</a> (struct <a class="el" href="../../d7/d3a/structfile.html">file</a> *, char *, int n)</td></tr>
<tr class="separator:a6bd1db179155944c9d1fbc89d8b7b162"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac4979f97957194db01001985b1bfa84e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#ac4979f97957194db01001985b1bfa84e">filestat</a> (struct <a class="el" href="../../d7/d3a/structfile.html">file</a> *, struct <a class="el" href="../../da/de7/structstat.html">stat</a> *)</td></tr>
<tr class="separator:ac4979f97957194db01001985b1bfa84e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a90e8980df48fa900fc33de53448a2e18"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#a90e8980df48fa900fc33de53448a2e18">filewrite</a> (struct <a class="el" href="../../d7/d3a/structfile.html">file</a> *, char *, int n)</td></tr>
<tr class="separator:a90e8980df48fa900fc33de53448a2e18"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff0080b2133027be2e525ca088b40e78"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#aff0080b2133027be2e525ca088b40e78">readsb</a> (int dev, struct <a class="el" href="../../df/d3d/structsuperblock.html">superblock</a> *<a class="el" href="../../d2/d5a/fs_8c.html#a0248d0bac625de5a1415f2f8c91f3343">sb</a>)</td></tr>
<tr class="separator:aff0080b2133027be2e525ca088b40e78"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae4ccea0aa02557162963e597737f665a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#ae4ccea0aa02557162963e597737f665a">dirlink</a> (struct <a class="el" href="../../d0/df8/structinode.html">inode</a> *, char *, <a class="el" href="../../d9/d49/types_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>)</td></tr>
<tr class="separator:ae4ccea0aa02557162963e597737f665a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef19d16d1d20d8f7cdcd8ee0d98fc13f"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d0/df8/structinode.html">inode</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#aef19d16d1d20d8f7cdcd8ee0d98fc13f">dirlookup</a> (struct <a class="el" href="../../d0/df8/structinode.html">inode</a> *, char *, <a class="el" href="../../d9/d49/types_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> *)</td></tr>
<tr class="separator:aef19d16d1d20d8f7cdcd8ee0d98fc13f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af71d7632e6d48638682e78de0ad269af"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d0/df8/structinode.html">inode</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#af71d7632e6d48638682e78de0ad269af">ialloc</a> (<a class="el" href="../../d9/d49/types_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>, short)</td></tr>
<tr class="separator:af71d7632e6d48638682e78de0ad269af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a02a4eb876d45b936de1adc73bff02ebf"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d0/df8/structinode.html">inode</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#a02a4eb876d45b936de1adc73bff02ebf">idup</a> (struct <a class="el" href="../../d0/df8/structinode.html">inode</a> *)</td></tr>
<tr class="separator:a02a4eb876d45b936de1adc73bff02ebf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a301761a27cf266e0bad483272fb31a3c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#a301761a27cf266e0bad483272fb31a3c">iinit</a> (int dev)</td></tr>
<tr class="separator:a301761a27cf266e0bad483272fb31a3c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a29a4d743d41fe659f74b0a57fdc25012"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#a29a4d743d41fe659f74b0a57fdc25012">ilock</a> (struct <a class="el" href="../../d0/df8/structinode.html">inode</a> *)</td></tr>
<tr class="separator:a29a4d743d41fe659f74b0a57fdc25012"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a29530a0afdfe924818d8c70b6724528d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#a29530a0afdfe924818d8c70b6724528d">iput</a> (struct <a class="el" href="../../d0/df8/structinode.html">inode</a> *)</td></tr>
<tr class="separator:a29530a0afdfe924818d8c70b6724528d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af301c10ad8ced77a5dfb2de3a64c666c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#af301c10ad8ced77a5dfb2de3a64c666c">iunlock</a> (struct <a class="el" href="../../d0/df8/structinode.html">inode</a> *)</td></tr>
<tr class="separator:af301c10ad8ced77a5dfb2de3a64c666c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adff5bb5a1eeaf921853ec06479f8c49b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#adff5bb5a1eeaf921853ec06479f8c49b">iunlockput</a> (struct <a class="el" href="../../d0/df8/structinode.html">inode</a> *)</td></tr>
<tr class="separator:adff5bb5a1eeaf921853ec06479f8c49b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ee6784c123b2a2656d88b5b357f2253"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#a2ee6784c123b2a2656d88b5b357f2253">iupdate</a> (struct <a class="el" href="../../d0/df8/structinode.html">inode</a> *)</td></tr>
<tr class="separator:a2ee6784c123b2a2656d88b5b357f2253"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0206c4090dc4bdfd8481e38057d5b2af"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#a0206c4090dc4bdfd8481e38057d5b2af">namecmp</a> (const char *, const char *)</td></tr>
<tr class="separator:a0206c4090dc4bdfd8481e38057d5b2af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acde7d3975db286253e584452ba03a54f"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d0/df8/structinode.html">inode</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#acde7d3975db286253e584452ba03a54f">namei</a> (char *)</td></tr>
<tr class="separator:acde7d3975db286253e584452ba03a54f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a699674601988291ebcc47d902f18bee8"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d0/df8/structinode.html">inode</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#a699674601988291ebcc47d902f18bee8">nameiparent</a> (char *, char *)</td></tr>
<tr class="separator:a699674601988291ebcc47d902f18bee8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2415273b06f31f0f2587b7325588a7e4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#a2415273b06f31f0f2587b7325588a7e4">readi</a> (struct <a class="el" href="../../d0/df8/structinode.html">inode</a> *, char *, <a class="el" href="../../d9/d49/types_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>, <a class="el" href="../../d9/d49/types_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>)</td></tr>
<tr class="separator:a2415273b06f31f0f2587b7325588a7e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a528f45ea5530504abc7113acc2154348"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#a528f45ea5530504abc7113acc2154348">stati</a> (struct <a class="el" href="../../d0/df8/structinode.html">inode</a> *, struct <a class="el" href="../../da/de7/structstat.html">stat</a> *)</td></tr>
<tr class="separator:a528f45ea5530504abc7113acc2154348"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a515876d4653cefef4732806ef7f2833f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#a515876d4653cefef4732806ef7f2833f">writei</a> (struct <a class="el" href="../../d0/df8/structinode.html">inode</a> *, char *, <a class="el" href="../../d9/d49/types_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>, <a class="el" href="../../d9/d49/types_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>)</td></tr>
<tr class="separator:a515876d4653cefef4732806ef7f2833f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aefb190a6104cb58c0bc1f8fec88d1307"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#aefb190a6104cb58c0bc1f8fec88d1307">ideinit</a> (void)</td></tr>
<tr class="separator:aefb190a6104cb58c0bc1f8fec88d1307"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a709693afdb9b89d848e684e7acde1f8f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#a709693afdb9b89d848e684e7acde1f8f">ideintr</a> (void)</td></tr>
<tr class="separator:a709693afdb9b89d848e684e7acde1f8f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a70985c3f5b2fb79737457b5c88f5327a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#a70985c3f5b2fb79737457b5c88f5327a">iderw</a> (struct <a class="el" href="../../d9/dd0/structbuf.html">buf</a> *)</td></tr>
<tr class="separator:a70985c3f5b2fb79737457b5c88f5327a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a63da75c0c2f0b051f2c790aea2116b63"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#a63da75c0c2f0b051f2c790aea2116b63">ioapicenable</a> (int irq, int <a class="el" href="../../db/d62/structcpu.html">cpu</a>)</td></tr>
<tr class="separator:a63da75c0c2f0b051f2c790aea2116b63"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abce023b98422f397abdb425b20c8ceec"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#abce023b98422f397abdb425b20c8ceec">ioapicinit</a> (void)</td></tr>
<tr class="separator:abce023b98422f397abdb425b20c8ceec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e965f6365c721b5b23c12d16d45c3dc"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#a5e965f6365c721b5b23c12d16d45c3dc">kalloc</a> (void)</td></tr>
<tr class="separator:a5e965f6365c721b5b23c12d16d45c3dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae79d6a7d0901b7c081cfded3f916d5bd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#ae79d6a7d0901b7c081cfded3f916d5bd">kfree</a> (char *)</td></tr>
<tr class="separator:ae79d6a7d0901b7c081cfded3f916d5bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc7a6a8cb3bcde83697a0c9a61d22d4d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#abc7a6a8cb3bcde83697a0c9a61d22d4d">kinit1</a> (void *, void *)</td></tr>
<tr class="separator:abc7a6a8cb3bcde83697a0c9a61d22d4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeb265df0f4968b40d175d9e3030d737c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#aeb265df0f4968b40d175d9e3030d737c">kinit2</a> (void *, void *)</td></tr>
<tr class="separator:aeb265df0f4968b40d175d9e3030d737c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af3d6113fa152781400e1e0e728c55e54"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#af3d6113fa152781400e1e0e728c55e54">kbdintr</a> (void)</td></tr>
<tr class="separator:af3d6113fa152781400e1e0e728c55e54"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7247ece9501e31d62cffad46ec33d7af"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#a7247ece9501e31d62cffad46ec33d7af">cmostime</a> (struct <a class="el" href="../../d3/de7/structrtcdate.html">rtcdate</a> *<a class="el" href="../../d0/d56/console_8c.html#af10fa12dd785c91e29528fbdc50cf9af">r</a>)</td></tr>
<tr class="separator:a7247ece9501e31d62cffad46ec33d7af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a627f7996b64f99d885244a5102c85164"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#a627f7996b64f99d885244a5102c85164">lapicid</a> (void)</td></tr>
<tr class="separator:a627f7996b64f99d885244a5102c85164"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a42fdd0783bbeb7cdc646d360191cdcac"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#a42fdd0783bbeb7cdc646d360191cdcac">lapiceoi</a> (void)</td></tr>
<tr class="separator:a42fdd0783bbeb7cdc646d360191cdcac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b48a1e50acc73cb3e70a65774c87392"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#a6b48a1e50acc73cb3e70a65774c87392">lapicinit</a> (void)</td></tr>
<tr class="separator:a6b48a1e50acc73cb3e70a65774c87392"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae46b07b96e4429fa85738ac2fe1768a0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#ae46b07b96e4429fa85738ac2fe1768a0">lapicstartap</a> (<a class="el" href="../../d9/d49/types_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a>, <a class="el" href="../../d9/d49/types_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>)</td></tr>
<tr class="separator:ae46b07b96e4429fa85738ac2fe1768a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada0e72e8d0a1a48090829fd03a0b76ba"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#ada0e72e8d0a1a48090829fd03a0b76ba">microdelay</a> (int)</td></tr>
<tr class="separator:ada0e72e8d0a1a48090829fd03a0b76ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad5e79aaefb91f41b9ef6aeae7ecf4708"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#ad5e79aaefb91f41b9ef6aeae7ecf4708">initlog</a> (int dev)</td></tr>
<tr class="separator:ad5e79aaefb91f41b9ef6aeae7ecf4708"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a270d0050dc50965f4f851717841ad33c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#a270d0050dc50965f4f851717841ad33c">log_write</a> (struct <a class="el" href="../../d9/dd0/structbuf.html">buf</a> *)</td></tr>
<tr class="separator:a270d0050dc50965f4f851717841ad33c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a603ca98212e00d2ffdba7827ef0f1003"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#a603ca98212e00d2ffdba7827ef0f1003">begin_op</a> ()</td></tr>
<tr class="separator:a603ca98212e00d2ffdba7827ef0f1003"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2504e37a109f9bae5ca11fe89e4e8fa1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#a2504e37a109f9bae5ca11fe89e4e8fa1">end_op</a> ()</td></tr>
<tr class="separator:a2504e37a109f9bae5ca11fe89e4e8fa1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2fd0b66a17c5347541448ef906b7b2a2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#a2fd0b66a17c5347541448ef906b7b2a2">mpinit</a> (void)</td></tr>
<tr class="separator:a2fd0b66a17c5347541448ef906b7b2a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a71fd35cd05f30866ae0ba1486415e786"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#a71fd35cd05f30866ae0ba1486415e786">picenable</a> (int)</td></tr>
<tr class="separator:a71fd35cd05f30866ae0ba1486415e786"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f19f54755d7fdec01e537228b10fbf6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#a8f19f54755d7fdec01e537228b10fbf6">picinit</a> (void)</td></tr>
<tr class="separator:a8f19f54755d7fdec01e537228b10fbf6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3de41eab56ff42bea4d1ae78bbd1e472"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#a3de41eab56ff42bea4d1ae78bbd1e472">pipealloc</a> (struct <a class="el" href="../../d7/d3a/structfile.html">file</a> **, struct <a class="el" href="../../d7/d3a/structfile.html">file</a> **)</td></tr>
<tr class="separator:a3de41eab56ff42bea4d1ae78bbd1e472"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af6220973e389c74782d76ae641a5e7db"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#af6220973e389c74782d76ae641a5e7db">pipeclose</a> (struct <a class="el" href="../../d8/d53/structpipe.html">pipe</a> *, int)</td></tr>
<tr class="separator:af6220973e389c74782d76ae641a5e7db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd589a0d0d6d34b446baf33755eef519"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#acd589a0d0d6d34b446baf33755eef519">piperead</a> (struct <a class="el" href="../../d8/d53/structpipe.html">pipe</a> *, char *, int)</td></tr>
<tr class="separator:acd589a0d0d6d34b446baf33755eef519"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae63b0db4ca2cbb2025b89d977c6535b1"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#ae63b0db4ca2cbb2025b89d977c6535b1">pipewrite</a> (struct <a class="el" href="../../d8/d53/structpipe.html">pipe</a> *, char *, int)</td></tr>
<tr class="separator:ae63b0db4ca2cbb2025b89d977c6535b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1444de2903d3d2624a50de058d19c635"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#a1444de2903d3d2624a50de058d19c635">cpuid</a> (void)</td></tr>
<tr class="separator:a1444de2903d3d2624a50de058d19c635"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf98ef7cdde3a0dfb2e49919de3298b1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#aaf98ef7cdde3a0dfb2e49919de3298b1">exit</a> (void)</td></tr>
<tr class="separator:aaf98ef7cdde3a0dfb2e49919de3298b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd2e1ded4bb6fce4500438bf928330f4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#acd2e1ded4bb6fce4500438bf928330f4">fork</a> (void)</td></tr>
<tr class="separator:acd2e1ded4bb6fce4500438bf928330f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb02e9289fb8a1017c3455b137a9bccd"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#acb02e9289fb8a1017c3455b137a9bccd">growproc</a> (int)</td></tr>
<tr class="separator:acb02e9289fb8a1017c3455b137a9bccd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab893e9671d6bfe2b2604002a50639f21"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#ab893e9671d6bfe2b2604002a50639f21">kill</a> (int)</td></tr>
<tr class="separator:ab893e9671d6bfe2b2604002a50639f21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad427959ad025dabd8cd393b27ec39160"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../db/d62/structcpu.html">cpu</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#ad427959ad025dabd8cd393b27ec39160">mycpu</a> (void)</td></tr>
<tr class="separator:ad427959ad025dabd8cd393b27ec39160"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3d2327db1e34643f4a9e6a07c8cc62c6"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../de/d48/structproc.html">proc</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#a3d2327db1e34643f4a9e6a07c8cc62c6">myproc</a> ()</td></tr>
<tr class="separator:a3d2327db1e34643f4a9e6a07c8cc62c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d293f913985937ee7a266fe5ddbfc77"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#a9d293f913985937ee7a266fe5ddbfc77">pinit</a> (void)</td></tr>
<tr class="separator:a9d293f913985937ee7a266fe5ddbfc77"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f185044294ebb57521c73f723990164"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#a7f185044294ebb57521c73f723990164">procdump</a> (void)</td></tr>
<tr class="separator:a7f185044294ebb57521c73f723990164"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9596021487afc9231319f22b71e4cb42"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#a9596021487afc9231319f22b71e4cb42">scheduler</a> (void) <a class="el" href="../../d0/d29/main_8c.html#a08f0b7c20a38fda2383d4f70bb78dc3e">__attribute__</a>((noreturn))</td></tr>
<tr class="separator:a9596021487afc9231319f22b71e4cb42"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad788da91743c333b5bed7c4a0dd12365"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#ad788da91743c333b5bed7c4a0dd12365">sched</a> (void)</td></tr>
<tr class="separator:ad788da91743c333b5bed7c4a0dd12365"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5eefc01dac276f3d74b253c86ef43e24"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#a5eefc01dac276f3d74b253c86ef43e24">setproc</a> (struct <a class="el" href="../../de/d48/structproc.html">proc</a> *)</td></tr>
<tr class="separator:a5eefc01dac276f3d74b253c86ef43e24"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aca4a88f06b3ebbcc04330f7ae06c8507"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#aca4a88f06b3ebbcc04330f7ae06c8507">sleep</a> (void *, struct <a class="el" href="../../d1/d08/structspinlock.html">spinlock</a> *)</td></tr>
<tr class="separator:aca4a88f06b3ebbcc04330f7ae06c8507"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a81c8a6a0cae413bc81aa223f7f7b7205"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#a81c8a6a0cae413bc81aa223f7f7b7205">userinit</a> (void)</td></tr>
<tr class="separator:a81c8a6a0cae413bc81aa223f7f7b7205"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af6f31822f7e737b4e414bdac1ccb59a4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#af6f31822f7e737b4e414bdac1ccb59a4">wait</a> (void)</td></tr>
<tr class="separator:af6f31822f7e737b4e414bdac1ccb59a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a245b56417239f499389b2e806bd99254"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#a245b56417239f499389b2e806bd99254">wakeup</a> (void *)</td></tr>
<tr class="separator:a245b56417239f499389b2e806bd99254"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7cb51f5c2b5cad3766f19eb69c92793b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#a7cb51f5c2b5cad3766f19eb69c92793b">yield</a> (void)</td></tr>
<tr class="separator:a7cb51f5c2b5cad3766f19eb69c92793b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ca17a3161c80e3e4894ec6a96e0a281"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#a2ca17a3161c80e3e4894ec6a96e0a281">chpr</a> (int pid, int priority)</td></tr>
<tr class="separator:a2ca17a3161c80e3e4894ec6a96e0a281"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e777db371a84ab92eb05662e4fa12d4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#a1e777db371a84ab92eb05662e4fa12d4">cps</a> (void)</td></tr>
<tr class="separator:a1e777db371a84ab92eb05662e4fa12d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee260ddc6baeb66dbf14f5efb1b799b2"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#aee260ddc6baeb66dbf14f5efb1b799b2">getprocs</a> (int max, struct <a class="el" href="../../d3/d1f/structuproc.html">uproc</a> *)</td></tr>
<tr class="separator:aee260ddc6baeb66dbf14f5efb1b799b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d9e7047d3dfb57809a2541d8387705e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#a1d9e7047d3dfb57809a2541d8387705e">swtch</a> (struct <a class="el" href="../../d7/dfe/structcontext.html">context</a> **, struct <a class="el" href="../../d7/dfe/structcontext.html">context</a> *)</td></tr>
<tr class="separator:a1d9e7047d3dfb57809a2541d8387705e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe4ef8638f1ecb962a6e67fb086ee3b8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#afe4ef8638f1ecb962a6e67fb086ee3b8">acquire</a> (struct <a class="el" href="../../d1/d08/structspinlock.html">spinlock</a> *)</td></tr>
<tr class="separator:afe4ef8638f1ecb962a6e67fb086ee3b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4105de9e2969515d6c6c795c4386f69f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f">getcallerpcs</a> (void *, <a class="el" href="../../d9/d49/types_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> *)</td></tr>
<tr class="separator:a4105de9e2969515d6c6c795c4386f69f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac44b13cc76bf4040e3baf34df75ff230"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#ac44b13cc76bf4040e3baf34df75ff230">holding</a> (struct <a class="el" href="../../d1/d08/structspinlock.html">spinlock</a> *)</td></tr>
<tr class="separator:ac44b13cc76bf4040e3baf34df75ff230"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab56d728e6966819a0260c358d3ac3419"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#ab56d728e6966819a0260c358d3ac3419">initlock</a> (struct <a class="el" href="../../d1/d08/structspinlock.html">spinlock</a> *, char *)</td></tr>
<tr class="separator:ab56d728e6966819a0260c358d3ac3419"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f8616948f3dbce65671f666eed1d669"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#a4f8616948f3dbce65671f666eed1d669">release</a> (struct <a class="el" href="../../d1/d08/structspinlock.html">spinlock</a> *)</td></tr>
<tr class="separator:a4f8616948f3dbce65671f666eed1d669"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a206b749d1b7768dadce61cbcde7e0f1c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#a206b749d1b7768dadce61cbcde7e0f1c">pushcli</a> (void)</td></tr>
<tr class="separator:a206b749d1b7768dadce61cbcde7e0f1c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae3424f669269fef400ce29c3aeb43fdb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#ae3424f669269fef400ce29c3aeb43fdb">popcli</a> (void)</td></tr>
<tr class="separator:ae3424f669269fef400ce29c3aeb43fdb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aecd4639fe2f9aaad8e8cee2b5e0688c3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#aecd4639fe2f9aaad8e8cee2b5e0688c3">acquiresleep</a> (struct <a class="el" href="../../d9/dd0/structsleeplock.html">sleeplock</a> *)</td></tr>
<tr class="separator:aecd4639fe2f9aaad8e8cee2b5e0688c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a840b479c87b1c047d7142f58e0ad0b27"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#a840b479c87b1c047d7142f58e0ad0b27">releasesleep</a> (struct <a class="el" href="../../d9/dd0/structsleeplock.html">sleeplock</a> *)</td></tr>
<tr class="separator:a840b479c87b1c047d7142f58e0ad0b27"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa76133bc67c6026376d630da9b53b68"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#afa76133bc67c6026376d630da9b53b68">holdingsleep</a> (struct <a class="el" href="../../d9/dd0/structsleeplock.html">sleeplock</a> *)</td></tr>
<tr class="separator:afa76133bc67c6026376d630da9b53b68"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5ca8072e3877a883fb34ce59eff88cb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#af5ca8072e3877a883fb34ce59eff88cb">initsleeplock</a> (struct <a class="el" href="../../d9/dd0/structsleeplock.html">sleeplock</a> *, char *)</td></tr>
<tr class="separator:af5ca8072e3877a883fb34ce59eff88cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acdb4d3f48d2fb0a834722b1107d2b284"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#acdb4d3f48d2fb0a834722b1107d2b284">memcmp</a> (const void *, const void *, <a class="el" href="../../d9/d49/types_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>)</td></tr>
<tr class="separator:acdb4d3f48d2fb0a834722b1107d2b284"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac152fff34fe03e497d35b1d4c47f1445"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#ac152fff34fe03e497d35b1d4c47f1445">memmove</a> (void *, const void *, <a class="el" href="../../d9/d49/types_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>)</td></tr>
<tr class="separator:ac152fff34fe03e497d35b1d4c47f1445"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0098886a849eef10803e9f35ceec61b9"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#a0098886a849eef10803e9f35ceec61b9">memset</a> (void *, int, <a class="el" href="../../d9/d49/types_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>)</td></tr>
<tr class="separator:a0098886a849eef10803e9f35ceec61b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa406a54805a570dfe266281876dc5d69"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#aa406a54805a570dfe266281876dc5d69">safestrcpy</a> (char *, const char *, int)</td></tr>
<tr class="separator:aa406a54805a570dfe266281876dc5d69"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e5172aa1be36b8210c6dfd86800b44c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#a5e5172aa1be36b8210c6dfd86800b44c">strlen</a> (const char *)</td></tr>
<tr class="separator:a5e5172aa1be36b8210c6dfd86800b44c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a27e878168063a98eae64b4273dcf33cc"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#a27e878168063a98eae64b4273dcf33cc">strncmp</a> (const char *, const char *, <a class="el" href="../../d9/d49/types_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>)</td></tr>
<tr class="separator:a27e878168063a98eae64b4273dcf33cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a66107cd2364627727a36cef6c773b39c"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#a66107cd2364627727a36cef6c773b39c">strncpy</a> (char *, const char *, int)</td></tr>
<tr class="separator:a66107cd2364627727a36cef6c773b39c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a75bc8d8c7ea0b4b39d4f470e18e0dba7"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#a75bc8d8c7ea0b4b39d4f470e18e0dba7">argint</a> (int, int *)</td></tr>
<tr class="separator:a75bc8d8c7ea0b4b39d4f470e18e0dba7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05c7464938c27eb91540c06ec6137f26"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#a05c7464938c27eb91540c06ec6137f26">argptr</a> (int, char **, int)</td></tr>
<tr class="separator:a05c7464938c27eb91540c06ec6137f26"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc00cb2e6a06b1021f3d82fa4d0eff07"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#afc00cb2e6a06b1021f3d82fa4d0eff07">argstr</a> (int, char **)</td></tr>
<tr class="separator:afc00cb2e6a06b1021f3d82fa4d0eff07"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab8c95490fad429ac2701653041f2efcf"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#ab8c95490fad429ac2701653041f2efcf">fetchint</a> (<a class="el" href="../../d9/d49/types_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>, int *)</td></tr>
<tr class="separator:ab8c95490fad429ac2701653041f2efcf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a386d969a02c926521cf2e1816069a4dc"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#a386d969a02c926521cf2e1816069a4dc">fetchstr</a> (<a class="el" href="../../d9/d49/types_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>, char **)</td></tr>
<tr class="separator:a386d969a02c926521cf2e1816069a4dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd6bcafe6626fe8e7d00cacdbc3cc4f1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#acd6bcafe6626fe8e7d00cacdbc3cc4f1">syscall</a> (void)</td></tr>
<tr class="separator:acd6bcafe6626fe8e7d00cacdbc3cc4f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a49af4bce992b520d5032364d0a4eb8ee"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#a49af4bce992b520d5032364d0a4eb8ee">timerinit</a> (void)</td></tr>
<tr class="separator:a49af4bce992b520d5032364d0a4eb8ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b6e7f6c302700cb54216ad22cbc1591"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#a9b6e7f6c302700cb54216ad22cbc1591">idtinit</a> (void)</td></tr>
<tr class="separator:a9b6e7f6c302700cb54216ad22cbc1591"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e7167b8e20e217c4af4e757f612ba6a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#a9e7167b8e20e217c4af4e757f612ba6a">tvinit</a> (void)</td></tr>
<tr class="separator:a9e7167b8e20e217c4af4e757f612ba6a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a79fa7b73d0d61fdd15d30768a395437d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#a79fa7b73d0d61fdd15d30768a395437d">uartinit</a> (void)</td></tr>
<tr class="separator:a79fa7b73d0d61fdd15d30768a395437d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa64047002b0e84e2611ebf7dc46b7c99"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#aa64047002b0e84e2611ebf7dc46b7c99">uartintr</a> (void)</td></tr>
<tr class="separator:aa64047002b0e84e2611ebf7dc46b7c99"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a571626618a1f05ff6854802e936845d6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#a571626618a1f05ff6854802e936845d6">uartputc</a> (int)</td></tr>
<tr class="separator:a571626618a1f05ff6854802e936845d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf5b2814a1dbf3ef0803dff58e0a76dc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#aaf5b2814a1dbf3ef0803dff58e0a76dc">seginit</a> (void)</td></tr>
<tr class="separator:aaf5b2814a1dbf3ef0803dff58e0a76dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a893bf6891e427f310b43981bf8e737ea"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#a893bf6891e427f310b43981bf8e737ea">kvmalloc</a> (void)</td></tr>
<tr class="separator:a893bf6891e427f310b43981bf8e737ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1c8a7a02e9391b5cf0984388216695c0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/d49/types_8h.html#ac131849542282b2c95dfeaf1f26dc010">pde_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#a1c8a7a02e9391b5cf0984388216695c0">setupkvm</a> (void)</td></tr>
<tr class="separator:a1c8a7a02e9391b5cf0984388216695c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a082f50617d3c87d732157c60daed00ce"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#a082f50617d3c87d732157c60daed00ce">uva2ka</a> (<a class="el" href="../../d9/d49/types_8h.html#ac131849542282b2c95dfeaf1f26dc010">pde_t</a> *, char *)</td></tr>
<tr class="separator:a082f50617d3c87d732157c60daed00ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a67f50b6f85756f02b5acdcb084d51b9f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#a67f50b6f85756f02b5acdcb084d51b9f">allocuvm</a> (<a class="el" href="../../d9/d49/types_8h.html#ac131849542282b2c95dfeaf1f26dc010">pde_t</a> *, <a class="el" href="../../d9/d49/types_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>, <a class="el" href="../../d9/d49/types_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>)</td></tr>
<tr class="separator:a67f50b6f85756f02b5acdcb084d51b9f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac45969a8875b6dc87245e0a642aa2d8d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#ac45969a8875b6dc87245e0a642aa2d8d">deallocuvm</a> (<a class="el" href="../../d9/d49/types_8h.html#ac131849542282b2c95dfeaf1f26dc010">pde_t</a> *, <a class="el" href="../../d9/d49/types_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>, <a class="el" href="../../d9/d49/types_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>)</td></tr>
<tr class="separator:ac45969a8875b6dc87245e0a642aa2d8d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af24cf1756e19afd8be8c95d02262cf3a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#af24cf1756e19afd8be8c95d02262cf3a">freevm</a> (<a class="el" href="../../d9/d49/types_8h.html#ac131849542282b2c95dfeaf1f26dc010">pde_t</a> *)</td></tr>
<tr class="separator:af24cf1756e19afd8be8c95d02262cf3a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b3410bde4005e848e1748f2b0f0a084"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#a7b3410bde4005e848e1748f2b0f0a084">inituvm</a> (<a class="el" href="../../d9/d49/types_8h.html#ac131849542282b2c95dfeaf1f26dc010">pde_t</a> *, char *, <a class="el" href="../../d9/d49/types_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>)</td></tr>
<tr class="separator:a7b3410bde4005e848e1748f2b0f0a084"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a149272578e00e0ce70480004640679"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#a8a149272578e00e0ce70480004640679">loaduvm</a> (<a class="el" href="../../d9/d49/types_8h.html#ac131849542282b2c95dfeaf1f26dc010">pde_t</a> *, char *, struct <a class="el" href="../../d0/df8/structinode.html">inode</a> *, <a class="el" href="../../d9/d49/types_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>, <a class="el" href="../../d9/d49/types_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>)</td></tr>
<tr class="separator:a8a149272578e00e0ce70480004640679"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8caec506ffa8f9386b0434e4cd5aa2b8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/d49/types_8h.html#ac131849542282b2c95dfeaf1f26dc010">pde_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#a8caec506ffa8f9386b0434e4cd5aa2b8">copyuvm</a> (<a class="el" href="../../d9/d49/types_8h.html#ac131849542282b2c95dfeaf1f26dc010">pde_t</a> *, <a class="el" href="../../d9/d49/types_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>)</td></tr>
<tr class="separator:a8caec506ffa8f9386b0434e4cd5aa2b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad43d81fa3edec39a200abd0853bc84b1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#ad43d81fa3edec39a200abd0853bc84b1">switchuvm</a> (struct <a class="el" href="../../de/d48/structproc.html">proc</a> *)</td></tr>
<tr class="separator:ad43d81fa3edec39a200abd0853bc84b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a02ca0670bc1fe12e38453082631ff360"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#a02ca0670bc1fe12e38453082631ff360">switchkvm</a> (void)</td></tr>
<tr class="separator:a02ca0670bc1fe12e38453082631ff360"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a11f5ff2e5bcd16968a88fcbb30db5a10"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#a11f5ff2e5bcd16968a88fcbb30db5a10">copyout</a> (<a class="el" href="../../d9/d49/types_8h.html#ac131849542282b2c95dfeaf1f26dc010">pde_t</a> *, <a class="el" href="../../d9/d49/types_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>, void *, <a class="el" href="../../d9/d49/types_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>)</td></tr>
<tr class="separator:a11f5ff2e5bcd16968a88fcbb30db5a10"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a795e27a0cb916cfb41411ebbb9669ddf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#a795e27a0cb916cfb41411ebbb9669ddf">clearpteu</a> (<a class="el" href="../../d9/d49/types_8h.html#ac131849542282b2c95dfeaf1f26dc010">pde_t</a> *pgdir, char *uva)</td></tr>
<tr class="separator:a795e27a0cb916cfb41411ebbb9669ddf"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a619ae379337e3cb2397ee0b6b4fd8d6b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/d49/types_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#a619ae379337e3cb2397ee0b6b4fd8d6b">ioapicid</a></td></tr>
<tr class="separator:a619ae379337e3cb2397ee0b6b4fd8d6b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4029f3e2439d5912f93543b8addd10ec"><td class="memItemLeft" align="right" valign="top">volatile <a class="el" href="../../d9/d49/types_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#a4029f3e2439d5912f93543b8addd10ec">lapic</a></td></tr>
<tr class="separator:a4029f3e2439d5912f93543b8addd10ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a46b52bd30030451d1b65291b77ba05d5"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#a46b52bd30030451d1b65291b77ba05d5">ismp</a></td></tr>
<tr class="separator:a46b52bd30030451d1b65291b77ba05d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7fcd6915876e066781399d7b00f1b1f0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/d49/types_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#a7fcd6915876e066781399d7b00f1b1f0">ticks</a></td></tr>
<tr class="separator:a7fcd6915876e066781399d7b00f1b1f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a094a4703b62095e2fa469fab3ffea5c7"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d1/d08/structspinlock.html">spinlock</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d64/defs_8h.html#a094a4703b62095e2fa469fab3ffea5c7">tickslock</a></td></tr>
<tr class="separator:a094a4703b62095e2fa469fab3ffea5c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="afacd331296c10f360da7640e0d68429f" name="afacd331296c10f360da7640e0d68429f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afacd331296c10f360da7640e0d68429f">&#9670;&#160;</a></span>NELEM</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NELEM</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">x</td><td>)</td>
          <td>&#160;&#160;&#160;(sizeof(x)/sizeof((x)[0]))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d64/defs_8h_source.html#l00195">195</a> of file <a class="el" href="../../d5/d64/defs_8h_source.html">defs.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="afe4ef8638f1ecb962a6e67fb086ee3b8" name="afe4ef8638f1ecb962a6e67fb086ee3b8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe4ef8638f1ecb962a6e67fb086ee3b8">&#9670;&#160;</a></span>acquire()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void acquire </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d1/d08/structspinlock.html">spinlock</a> *&#160;</td>
          <td class="paramname"><em>lk</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d2d/spinlock_8c_source.html#l00025">25</a> of file <a class="el" href="../../d3/d2d/spinlock_8c_source.html">spinlock.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   26</span>{</div>
<div class="line"><span class="lineno">   27</span>  <a class="code hl_function" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c">pushcli</a>(); <span class="comment">// disable interrupts to avoid deadlock.</span></div>
<div class="line"><span class="lineno">   28</span>  <span class="keywordflow">if</span>(<a class="code hl_function" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9">holding</a>(lk))</div>
<div class="line"><span class="lineno">   29</span>    <a class="code hl_function" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a">panic</a>(<span class="stringliteral">&quot;acquire&quot;</span>);</div>
<div class="line"><span class="lineno">   30</span> </div>
<div class="line"><span class="lineno">   31</span>  <span class="comment">// The xchg is atomic.</span></div>
<div class="line"><span class="lineno">   32</span>  <span class="keywordflow">while</span>(xchg(&amp;lk-&gt;<a class="code hl_variable" href="../../d1/d08/structspinlock.html#a48f3007579f644934d9aba91e5378c03">locked</a>, 1) != 0)</div>
<div class="line"><span class="lineno">   33</span>    ;</div>
<div class="line"><span class="lineno">   34</span> </div>
<div class="line"><span class="lineno">   35</span>  <span class="comment">// Tell the C compiler and the processor to not move loads or stores</span></div>
<div class="line"><span class="lineno">   36</span>  <span class="comment">// past this point, to ensure that the critical section&#39;s memory</span></div>
<div class="line"><span class="lineno">   37</span>  <span class="comment">// references happen after the lock is acquired.</span></div>
<div class="line"><span class="lineno">   38</span>  __sync_synchronize();</div>
<div class="line"><span class="lineno">   39</span> </div>
<div class="line"><span class="lineno">   40</span>  <span class="comment">// Record info about lock acquisition for debugging.</span></div>
<div class="line"><span class="lineno">   41</span>  lk-&gt;<a class="code hl_variable" href="../../d1/d08/structspinlock.html#a290ae772c8ccb9e8c1580204c31a7f88">cpu</a> = <a class="code hl_function" href="../../d5/d64/defs_8h.html#ad427959ad025dabd8cd393b27ec39160">mycpu</a>();</div>
<div class="line"><span class="lineno">   42</span>  <a class="code hl_function" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010">getcallerpcs</a>(&amp;lk, lk-&gt;<a class="code hl_variable" href="../../d1/d08/structspinlock.html#ac9ef3f16f664094198af0b9063e23fe0">pcs</a>);</div>
<div class="line"><span class="lineno">   43</span>}</div>
<div class="ttc" id="aconsole_8c_html_a95c0aca5d6d7487933984f08b189917a"><div class="ttname"><a href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a">panic</a></div><div class="ttdeci">void panic(char *s)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d56/console_8c_source.html#l00107">console.c:107</a></div></div>
<div class="ttc" id="adefs_8h_html_ad427959ad025dabd8cd393b27ec39160"><div class="ttname"><a href="../../d5/d64/defs_8h.html#ad427959ad025dabd8cd393b27ec39160">mycpu</a></div><div class="ttdeci">struct cpu * mycpu(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dda/proc_8c_source.html#l00038">proc.c:38</a></div></div>
<div class="ttc" id="aspinlock_8c_html_a206b749d1b7768dadce61cbcde7e0f1c"><div class="ttname"><a href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c">pushcli</a></div><div class="ttdeci">void pushcli(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d2d/spinlock_8c_source.html#l00105">spinlock.c:105</a></div></div>
<div class="ttc" id="aspinlock_8c_html_a6ac35304ea80f01086b47edcc2328010"><div class="ttname"><a href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010">getcallerpcs</a></div><div class="ttdeci">void getcallerpcs(void *v, uint pcs[])</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d2d/spinlock_8c_source.html#l00072">spinlock.c:72</a></div></div>
<div class="ttc" id="aspinlock_8c_html_aea48df3e5cfb903179ad3dc78ab502d9"><div class="ttname"><a href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9">holding</a></div><div class="ttdeci">int holding(struct spinlock *lock)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d2d/spinlock_8c_source.html#l00090">spinlock.c:90</a></div></div>
<div class="ttc" id="astructspinlock_html_a290ae772c8ccb9e8c1580204c31a7f88"><div class="ttname"><a href="../../d1/d08/structspinlock.html#a290ae772c8ccb9e8c1580204c31a7f88">spinlock::cpu</a></div><div class="ttdeci">struct cpu * cpu</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d63/spinlock_8h_source.html#l00007">spinlock.h:7</a></div></div>
<div class="ttc" id="astructspinlock_html_a48f3007579f644934d9aba91e5378c03"><div class="ttname"><a href="../../d1/d08/structspinlock.html#a48f3007579f644934d9aba91e5378c03">spinlock::locked</a></div><div class="ttdeci">uint locked</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d63/spinlock_8h_source.html#l00003">spinlock.h:3</a></div></div>
<div class="ttc" id="astructspinlock_html_ac9ef3f16f664094198af0b9063e23fe0"><div class="ttname"><a href="../../d1/d08/structspinlock.html#ac9ef3f16f664094198af0b9063e23fe0">spinlock::pcs</a></div><div class="ttdeci">uint pcs[10]</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d63/spinlock_8h_source.html#l00008">spinlock.h:8</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_afe4ef8638f1ecb962a6e67fb086ee3b8_cgraph.png" border="0" usemap="#ad5/d64/defs_8h_afe4ef8638f1ecb962a6e67fb086ee3b8_cgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_afe4ef8638f1ecb962a6e67fb086ee3b8_cgraph" id="ad5/d64/defs_8h_afe4ef8638f1ecb962a6e67fb086ee3b8_cgraph">
<area shape="rect" title=" " alt="" coords="5,132,69,157"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="117,5,209,31"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="132,259,195,284"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="368,208,429,233"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="477,107,531,132"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="257,208,320,233"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="831,221,887,247"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="595,208,654,233"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="595,5,654,31"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="579,107,671,132"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="719,183,783,208"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_afe4ef8638f1ecb962a6e67fb086ee3b8_icgraph.png" border="0" usemap="#ad5/d64/defs_8h_afe4ef8638f1ecb962a6e67fb086ee3b8_icgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_afe4ef8638f1ecb962a6e67fb086ee3b8_icgraph" id="ad5/d64/defs_8h_afe4ef8638f1ecb962a6e67fb086ee3b8_icgraph">
<area shape="rect" title=" " alt="" coords="1044,964,1108,989"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#aaad2d7a86d4859982dd9a132f5128ff2" title=" " alt="" coords="616,939,711,964"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a28ac85a90987662e306ca8efbfe16074" title=" " alt="" coords="352,556,444,581"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a6af7eb39268127d389792cec37785666" title=" " alt="" coords="351,409,445,435"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#ab3c447f135c68e4c3c1f8d5866f6e77b" title=" " alt="" coords="377,1464,419,1489"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#aaf98ef7cdde3a0dfb2e49919de3298b1" title=" " alt="" coords="115,1489,158,1515"/>
<area shape="rect" href="../../dc/d6f/trap_8c.html#a372d166e36c086c91e5f5d81e5fead3a" title=" " alt="" coords="5,784,49,809"/>
<area shape="rect" href="../../d6/d13/file_8c.html#ae557c81ab89c24219146144bb6adaa2c" title=" " alt="" coords="228,1515,299,1540"/>
<area shape="rect" href="../../d7/df8/log_8c.html#ac96aa31ffc0500e749c62c4d377c21c9" title=" " alt="" coords="493,1039,568,1064"/>
<area shape="rect" href="../../dc/de6/bio_8c.html#ab5335aeb503731104314321a78a6d727" title=" " alt="" coords="635,812,692,837"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a2ca17a3161c80e3e4894ec6a96e0a281" title=" " alt="" coords="925,509,972,535"/>
<area shape="rect" href="../../d0/d56/console_8c.html#aad3d6ca39f23bb6d2686d2967e415193" title=" " alt="" coords="763,1616,849,1641"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="919,157,978,183"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a45a59a61c8799cb754b4326a32c14dc4" title=" " alt="" coords="785,208,827,233"/>
<area shape="rect" href="../../d7/df8/log_8c.html#ac0f12be0ca0de555e60b27b06a57a65b" title=" " alt="" coords="499,1319,563,1344"/>
<area shape="rect" href="../../d6/d13/file_8c.html#ac56b15561658d0e74ce1c53309b8f97d" title=" " alt="" coords="630,208,697,233"/>
<area shape="rect" href="../../d6/d13/file_8c.html#a9ef0346d08d8ed79ce2a9c03f9a4b4b2" title=" " alt="" coords="919,460,979,485"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#acd2e1ded4bb6fce4500438bf928330f4" title=" " alt="" coords="784,436,828,461"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#a6fdbe54cbecd8fc67d74793b27adcf05" title=" " alt="" coords="901,761,996,787"/>
<area shape="rect" href="../../da/d9b/memide_8c.html#a7f36b008f02088c86f76e98e05b55af5" title=" " alt="" coords="779,761,833,787"/>
<area shape="rect" href="../../da/d9b/memide_8c.html#a709693afdb9b89d848e684e7acde1f8f" title=" " alt="" coords="777,1875,835,1900"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a24a91383ab80b4b8a1ef1f4df896035c" title=" " alt="" coords="925,411,972,436"/>
<area shape="rect" href="../../d4/def/kalloc_8c.html#a5e965f6365c721b5b23c12d16d45c3dc" title=" " alt="" coords="921,1116,977,1141"/>
<area shape="rect" href="../../d4/def/kalloc_8c.html#aced59ecf8411235f6dffc065236711a5" title=" " alt="" coords="923,712,974,737"/>
<area shape="rect" href="../../d1/d47/pipe_8c.html#a48642f54734698f6f881ee07723292cb" title=" " alt="" coords="767,1457,845,1483"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#af6f31822f7e737b4e414bdac1ccb59a4" title=" " alt="" coords="783,660,829,685"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a650cf0caaaa8b75f653c1c92818d03a4" title=" " alt="" coords="929,1319,968,1344"/>
<area shape="rect" href="../../d7/df8/log_8c.html#a7eacb0fbebe5ce4c7d3ddea15908b13d" title=" " alt="" coords="626,760,701,785"/>
<area shape="rect" href="../../d1/d47/pipe_8c.html#ad4cce6144039b615d139f8660c60293a" title=" " alt="" coords="771,1167,841,1192"/>
<area shape="rect" href="../../d1/d47/pipe_8c.html#acfca0fab7d2c0c0dcc56359c8febe14a" title=" " alt="" coords="769,1280,843,1305"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#aa997067c2c9bfef15af6fa0a10c20f4a" title=" " alt="" coords="759,1332,853,1357"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a9fa00b0be5d3c4781048861e2506eb63" title=" " alt="" coords="909,1572,988,1597"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ae70cc0370342e46f6db3bec367232457" title=" " alt="" coords="922,964,975,989"/>
<area shape="rect" href="../../dd/d35/sysproc_8c.html#a59778ec9bfa6b6f2100b43fbba000573" title=" " alt="" coords="765,1065,847,1091"/>
<area shape="rect" href="../../dd/d35/sysproc_8c.html#aaf8553903ba8f2776247679d4db0d121" title=" " alt="" coords="904,1724,993,1749"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a81c8a6a0cae413bc81aa223f7f7b7205" title=" " alt="" coords="917,1773,981,1799"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a4a34d9f03e436cfa09b88f735f6ee952" title=" " alt="" coords="915,1420,982,1445"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a7cb51f5c2b5cad3766f19eb69c92793b" title=" " alt="" coords="112,5,161,31"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#aed28187406d84a3aa71f10c6235a03ec" title=" " alt="" coords="506,809,555,835"/>
<area shape="rect" href="../../df/dc9/exec_8c.html#ace32454ed0d37834dcb1cb4f8b727e6e" title=" " alt="" coords="373,809,423,835"/>
<area shape="rect" href="../../d6/d13/file_8c.html#ab8de757a0a9f58dcc6511ea5e46ebb88" title=" " alt="" coords="365,1163,431,1188"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#ad1c5f8693cb35b9605fee09eebdda640" title=" " alt="" coords="224,1212,303,1237"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a759600870314007ac558871239122fb7" title=" " alt="" coords="228,960,299,985"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a74e45efc661ca17c068bc283b3842e6d" title=" " alt="" coords="97,909,176,935"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#ae1e58ee11d41f643929520d8c1640da7" title=" " alt="" coords="356,859,440,884"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a057e5bce2de7a87ebfd2dc33967bca4a" title=" " alt="" coords="357,1261,439,1287"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a25697aa3d828b5878d38170d724adb27" title=" " alt="" coords="353,1212,443,1237"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#af95049367381647bc9487af49724b869" title=" " alt="" coords="505,760,557,785"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a7220afa8e5f4bea540eb95879ea7df6e" title=" " alt="" coords="499,859,563,884"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a3aba1fa9f6789d09356aec5b96d91fa8" title=" " alt="" coords="505,908,556,933"/>
</map>
</div>

</div>
</div>
<a id="aecd4639fe2f9aaad8e8cee2b5e0688c3" name="aecd4639fe2f9aaad8e8cee2b5e0688c3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aecd4639fe2f9aaad8e8cee2b5e0688c3">&#9670;&#160;</a></span>acquiresleep()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void acquiresleep </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d9/dd0/structsleeplock.html">sleeplock</a> *&#160;</td>
          <td class="paramname"><em>lk</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d8/dd1/sleeplock_8c_source.html#l00023">23</a> of file <a class="el" href="../../d8/dd1/sleeplock_8c_source.html">sleeplock.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   24</span>{</div>
<div class="line"><span class="lineno">   25</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#afe4ef8638f1ecb962a6e67fb086ee3b8">acquire</a>(&amp;lk-&gt;<a class="code hl_variable" href="../../d9/dd0/structsleeplock.html#a077241ea0e720d228d853208444c4c9d">lk</a>);</div>
<div class="line"><span class="lineno">   26</span>  <span class="keywordflow">while</span> (lk-&gt;<a class="code hl_variable" href="../../d9/dd0/structsleeplock.html#ac5cfe608994a41b24cb1c0fd722910c3">locked</a>) {</div>
<div class="line"><span class="lineno">   27</span>    <a class="code hl_function" href="../../d5/d64/defs_8h.html#aca4a88f06b3ebbcc04330f7ae06c8507">sleep</a>(lk, &amp;lk-&gt;<a class="code hl_variable" href="../../d9/dd0/structsleeplock.html#a077241ea0e720d228d853208444c4c9d">lk</a>);</div>
<div class="line"><span class="lineno">   28</span>  }</div>
<div class="line"><span class="lineno">   29</span>  lk-&gt;<a class="code hl_variable" href="../../d9/dd0/structsleeplock.html#ac5cfe608994a41b24cb1c0fd722910c3">locked</a> = 1;</div>
<div class="line"><span class="lineno">   30</span>  lk-&gt;<a class="code hl_variable" href="../../d9/dd0/structsleeplock.html#a99a4c6a784956ab1c391a12af475a55e">pid</a> = <a class="code hl_function" href="../../d5/d64/defs_8h.html#a3d2327db1e34643f4a9e6a07c8cc62c6">myproc</a>()-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#acf2bdf54d1f957ccbcdc987007029944">pid</a>;</div>
<div class="line"><span class="lineno">   31</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#a4f8616948f3dbce65671f666eed1d669">release</a>(&amp;lk-&gt;<a class="code hl_variable" href="../../d9/dd0/structsleeplock.html#a077241ea0e720d228d853208444c4c9d">lk</a>);</div>
<div class="line"><span class="lineno">   32</span>}</div>
<div class="ttc" id="adefs_8h_html_a3d2327db1e34643f4a9e6a07c8cc62c6"><div class="ttname"><a href="../../d5/d64/defs_8h.html#a3d2327db1e34643f4a9e6a07c8cc62c6">myproc</a></div><div class="ttdeci">struct proc * myproc()</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dda/proc_8c_source.html#l00058">proc.c:58</a></div></div>
<div class="ttc" id="adefs_8h_html_a4f8616948f3dbce65671f666eed1d669"><div class="ttname"><a href="../../d5/d64/defs_8h.html#a4f8616948f3dbce65671f666eed1d669">release</a></div><div class="ttdeci">void release(struct spinlock *)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d2d/spinlock_8c_source.html#l00047">spinlock.c:47</a></div></div>
<div class="ttc" id="adefs_8h_html_aca4a88f06b3ebbcc04330f7ae06c8507"><div class="ttname"><a href="../../d5/d64/defs_8h.html#aca4a88f06b3ebbcc04330f7ae06c8507">sleep</a></div><div class="ttdeci">void sleep(void *, struct spinlock *)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dda/proc_8c_source.html#l00418">proc.c:418</a></div></div>
<div class="ttc" id="adefs_8h_html_afe4ef8638f1ecb962a6e67fb086ee3b8"><div class="ttname"><a href="../../d5/d64/defs_8h.html#afe4ef8638f1ecb962a6e67fb086ee3b8">acquire</a></div><div class="ttdeci">void acquire(struct spinlock *)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d2d/spinlock_8c_source.html#l00025">spinlock.c:25</a></div></div>
<div class="ttc" id="astructproc_html_acf2bdf54d1f957ccbcdc987007029944"><div class="ttname"><a href="../../de/d48/structproc.html#acf2bdf54d1f957ccbcdc987007029944">proc::pid</a></div><div class="ttdeci">int pid</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d03/proc_8h_source.html#l00043">proc.h:43</a></div></div>
<div class="ttc" id="astructsleeplock_html_a077241ea0e720d228d853208444c4c9d"><div class="ttname"><a href="../../d9/dd0/structsleeplock.html#a077241ea0e720d228d853208444c4c9d">sleeplock::lk</a></div><div class="ttdeci">struct spinlock lk</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d74/sleeplock_8h_source.html#l00004">sleeplock.h:4</a></div></div>
<div class="ttc" id="astructsleeplock_html_a99a4c6a784956ab1c391a12af475a55e"><div class="ttname"><a href="../../d9/dd0/structsleeplock.html#a99a4c6a784956ab1c391a12af475a55e">sleeplock::pid</a></div><div class="ttdeci">int pid</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d74/sleeplock_8h_source.html#l00008">sleeplock.h:8</a></div></div>
<div class="ttc" id="astructsleeplock_html_ac5cfe608994a41b24cb1c0fd722910c3"><div class="ttname"><a href="../../d9/dd0/structsleeplock.html#ac5cfe608994a41b24cb1c0fd722910c3">sleeplock::locked</a></div><div class="ttdeci">uint locked</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d74/sleeplock_8h_source.html#l00003">sleeplock.h:3</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_aecd4639fe2f9aaad8e8cee2b5e0688c3_cgraph.png" border="0" usemap="#ad5/d64/defs_8h_aecd4639fe2f9aaad8e8cee2b5e0688c3_cgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_aecd4639fe2f9aaad8e8cee2b5e0688c3_cgraph" id="ad5/d64/defs_8h_aecd4639fe2f9aaad8e8cee2b5e0688c3_cgraph">
<area shape="rect" title=" " alt="" coords="5,297,100,322"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="492,701,556,726"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="1216,246,1280,271"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a41af0935f3989aae450cf8988cd9c3a9" title=" " alt="" coords="361,246,427,271"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ae70cc0370342e46f6db3bec367232457" title=" " alt="" coords="148,366,201,391"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="615,753,707,778"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="629,499,692,525"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="865,474,927,499"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="975,587,1028,613"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="755,550,817,575"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="1328,310,1384,335"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="1093,437,1151,462"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="1093,587,1151,613"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="1076,538,1168,563"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad788da91743c333b5bed7c4a0dd12365" title=" " alt="" coords="249,398,307,423"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a9fa00b0be5d3c4781048861e2506eb63" title=" " alt="" coords="355,549,433,574"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a1d9e7047d3dfb57809a2541d8387705e" title=" " alt="" coords="495,651,553,677"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a02ca0670bc1fe12e38453082631ff360" title=" " alt="" coords="481,550,567,575"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a87c90f0ab2a1b11c2b55f4e483bb8493" title=" " alt="" coords="618,651,703,677"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_aecd4639fe2f9aaad8e8cee2b5e0688c3_icgraph.png" border="0" usemap="#ad5/d64/defs_8h_aecd4639fe2f9aaad8e8cee2b5e0688c3_icgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_aecd4639fe2f9aaad8e8cee2b5e0688c3_icgraph" id="ad5/d64/defs_8h_aecd4639fe2f9aaad8e8cee2b5e0688c3_icgraph">
<area shape="rect" title=" " alt="" coords="623,377,717,403"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#aed28187406d84a3aa71f10c6235a03ec" title=" " alt="" coords="419,252,468,277"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#ab3c447f135c68e4c3c1f8d5866f6e77b" title=" " alt="" coords="532,403,575,428"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a28ac85a90987662e306ca8efbfe16074" title=" " alt="" coords="261,104,353,129"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a6af7eb39268127d389792cec37785666" title=" " alt="" coords="260,153,355,179"/>
<area shape="rect" href="../../df/dc9/exec_8c.html#ace32454ed0d37834dcb1cb4f8b727e6e" title=" " alt="" coords="282,301,333,327"/>
<area shape="rect" href="../../d6/d13/file_8c.html#a1dc8c87c7e48bdaaf98e9c7047928f29" title=" " alt="" coords="275,203,339,228"/>
<area shape="rect" href="../../d6/d13/file_8c.html#afff8e849fa54dea2a5a27dbb97474607" title=" " alt="" coords="277,5,338,31"/>
<area shape="rect" href="../../d6/d13/file_8c.html#ab8de757a0a9f58dcc6511ea5e46ebb88" title=" " alt="" coords="274,55,341,80"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#ad1c5f8693cb35b9605fee09eebdda640" title=" " alt="" coords="268,351,347,376"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a759600870314007ac558871239122fb7" title=" " alt="" coords="272,452,343,477"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a74e45efc661ca17c068bc283b3842e6d" title=" " alt="" coords="268,400,347,425"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#ae1e58ee11d41f643929520d8c1640da7" title=" " alt="" coords="265,252,349,277"/>
<area shape="rect" href="../../d0/d56/console_8c.html#ab508ff0f4db26fe35cd25fa648f9ee75" title=" " alt="" coords="123,104,207,129"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#ac5b5d4517586be6396b4f3b37445945a" title=" " alt="" coords="126,403,205,428"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a6f94e3b215d069b5419e87bafe80799a" title=" " alt="" coords="129,353,201,379"/>
<area shape="rect" href="../../d8/d60/init_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title=" " alt="" coords="140,252,191,277"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#aedbeff6afe5d4e22330c7e6b5e6df893" title=" " alt="" coords="5,452,71,477"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#aeaa813ddeb6a5fac3c45714c7351c526" title=" " alt="" coords="126,203,205,228"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a54bf714d9e898cbdcbc061b280bbfae0" title=" " alt="" coords="128,153,203,179"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#ac243c8f20f5fb2e3e257b5007af2c204" title=" " alt="" coords="127,5,203,31"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a687d939a9e4792af15db96f2c2f34378" title=" " alt="" coords="126,55,205,80"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a69a135a0e8a06d9f306d77ebc0c1f7a0" title=" " alt="" coords="415,504,471,529"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#aaf98ef7cdde3a0dfb2e49919de3298b1" title=" " alt="" coords="286,948,329,973"/>
<area shape="rect" href="../../d6/d13/file_8c.html#ae557c81ab89c24219146144bb6adaa2c" title=" " alt="" coords="408,403,479,428"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a207b3008bae35596c55ec7c4fc6875eb" title=" " alt="" coords="403,301,484,327"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a77cc2edce6e78f22dd9eb377462762f2" title=" " alt="" coords="131,1395,200,1420"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#aa0d46fcb43667c805b84ea7e1ff6100a" title=" " alt="" coords="139,1444,192,1469"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a86fe524d99d69c18a335512cf3405b31" title=" " alt="" coords="137,1493,193,1519"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a57e55b2d0161d62bb99765ca3de43e35" title=" " alt="" coords="132,1543,199,1568"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a0b0ff95e564df3c3e8fc977226b75de7" title=" " alt="" coords="133,1592,198,1617"/>
<area shape="rect" href="../../d1/d8f/cat_8c.html#a90a33618884bcf5e892297879bc016ff" title=" " alt="" coords="145,1641,185,1667"/>
<area shape="rect" href="../../d1/d8f/cat_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="13,1492,63,1517"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a5a12affe4fdfaa172d85da9a6adf98d2" title=" " alt="" coords="126,501,205,527"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a425a0efe4f459decf4b5ea14517ab3cf" title=" " alt="" coords="119,551,212,576"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#aedd6d3f148dd5c99b47900215c1ac43f" title=" " alt="" coords="139,600,192,625"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a8db9f9a2634bab29096bab0b8bc6945c" title=" " alt="" coords="136,649,195,675"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a8faab06cc4d48335076b368f02709ee2" title=" " alt="" coords="122,699,209,724"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a330ed2370fe27045b8bec1eb0bd7818f" title=" " alt="" coords="132,748,199,773"/>
<area shape="rect" href="../../d5/de1/forktest_8c.html#a0ef8ccf57bc8c491407ec513b234f83c" title=" " alt="" coords="132,797,199,823"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a77a4432bc67dfb513f1c1d698c2c4ea6" title=" " alt="" coords="131,847,199,872"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#abf4af50e65630225208fef177e267efb" title=" " alt="" coords="131,948,200,973"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#ac9fe56d8f6e4ed1c9677b06cb7b325e6" title=" " alt="" coords="133,997,198,1023"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a267227083b00d0cc3141b34f5152ae04" title=" " alt="" coords="145,1047,185,1072"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a4eeee588d4689a58fc140a7d5d7b0608" title=" " alt="" coords="133,1096,197,1121"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a1740f29f4ce6d3060fd79a9312edc315" title=" " alt="" coords="127,1145,203,1171"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#aa1c6e6e76813ccb29a29bb119dba668a" title=" " alt="" coords="140,1195,191,1220"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a3208ed001a225f5d9ea3fb37f46810c7" title=" " alt="" coords="119,1244,212,1269"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#ae7c61791dd2cfb8ad59b4c6e87685c07" title=" " alt="" coords="129,1293,201,1319"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#ada38fdb2913f040f6eeb6189eeb42d32" title=" " alt="" coords="139,452,192,477"/>
</map>
</div>

</div>
</div>
<a id="a67f50b6f85756f02b5acdcb084d51b9f" name="a67f50b6f85756f02b5acdcb084d51b9f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a67f50b6f85756f02b5acdcb084d51b9f">&#9670;&#160;</a></span>allocuvm()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int allocuvm </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d49/types_8h.html#ac131849542282b2c95dfeaf1f26dc010">pde_t</a> *&#160;</td>
          <td class="paramname"><em>pgdir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/d49/types_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td>
          <td class="paramname"><em>oldsz</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/d49/types_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td>
          <td class="paramname"><em>newsz</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/de9/vm_8c_source.html#l00222">222</a> of file <a class="el" href="../../de/de9/vm_8c_source.html">vm.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  223</span>{</div>
<div class="line"><span class="lineno">  224</span>  <span class="keywordtype">char</span> *<a class="code hl_function" href="../../de/dc0/usertests_8c.html#aa1c6e6e76813ccb29a29bb119dba668a">mem</a>;</div>
<div class="line"><span class="lineno">  225</span>  <a class="code hl_typedef" href="../../d9/d49/types_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> a;</div>
<div class="line"><span class="lineno">  226</span> </div>
<div class="line"><span class="lineno">  227</span>  <span class="keywordflow">if</span>(newsz &gt;= <a class="code hl_define" href="../../d8/da9/memlayout_8h.html#a20cbfc19992a40ab9ccf4aa8ab8283d0">KERNBASE</a>)</div>
<div class="line"><span class="lineno">  228</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  229</span>  <span class="keywordflow">if</span>(newsz &lt; oldsz)</div>
<div class="line"><span class="lineno">  230</span>    <span class="keywordflow">return</span> oldsz;</div>
<div class="line"><span class="lineno">  231</span> </div>
<div class="line"><span class="lineno">  232</span>  a = <a class="code hl_define" href="../../d2/df1/mmu_8h.html#affa8cdfbd1c15dafc9f3af3a7b641f80">PGROUNDUP</a>(oldsz);</div>
<div class="line"><span class="lineno">  233</span>  <span class="keywordflow">for</span>(; a &lt; newsz; a += <a class="code hl_define" href="../../d2/df1/mmu_8h.html#a5f96cb6ae6670e023c407cc2f77e1704">PGSIZE</a>){</div>
<div class="line"><span class="lineno">  234</span>    <a class="code hl_function" href="../../de/dc0/usertests_8c.html#aa1c6e6e76813ccb29a29bb119dba668a">mem</a> = <a class="code hl_function" href="../../d5/d64/defs_8h.html#a5e965f6365c721b5b23c12d16d45c3dc">kalloc</a>();</div>
<div class="line"><span class="lineno">  235</span>    <span class="keywordflow">if</span>(<a class="code hl_function" href="../../de/dc0/usertests_8c.html#aa1c6e6e76813ccb29a29bb119dba668a">mem</a> == 0){</div>
<div class="line"><span class="lineno">  236</span>      <a class="code hl_function" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6">cprintf</a>(<span class="stringliteral">&quot;allocuvm out of memory\n&quot;</span>);</div>
<div class="line"><span class="lineno">  237</span>      <a class="code hl_function" href="../../de/de9/vm_8c.html#a6d3019ea15a9bfdc5131ae97f3623c49">deallocuvm</a>(pgdir, newsz, oldsz);</div>
<div class="line"><span class="lineno">  238</span>      <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  239</span>    }</div>
<div class="line"><span class="lineno">  240</span>    <a class="code hl_function" href="../../d5/d64/defs_8h.html#a0098886a849eef10803e9f35ceec61b9">memset</a>(<a class="code hl_function" href="../../de/dc0/usertests_8c.html#aa1c6e6e76813ccb29a29bb119dba668a">mem</a>, 0, <a class="code hl_define" href="../../d2/df1/mmu_8h.html#a5f96cb6ae6670e023c407cc2f77e1704">PGSIZE</a>);</div>
<div class="line"><span class="lineno">  241</span>    <span class="keywordflow">if</span>(mappages(pgdir, (<span class="keywordtype">char</span>*)a, <a class="code hl_define" href="../../d2/df1/mmu_8h.html#a5f96cb6ae6670e023c407cc2f77e1704">PGSIZE</a>, <a class="code hl_define" href="../../d8/da9/memlayout_8h.html#a5021188bc7da1304f27e913aee183407">V2P</a>(<a class="code hl_function" href="../../de/dc0/usertests_8c.html#aa1c6e6e76813ccb29a29bb119dba668a">mem</a>), <a class="code hl_define" href="../../d2/df1/mmu_8h.html#a058fcbcc3e1eab2c09c68b3e5221c545">PTE_W</a>|<a class="code hl_define" href="../../d2/df1/mmu_8h.html#adced9836a1dc98d72849361e6ab03cda">PTE_U</a>) &lt; 0){</div>
<div class="line"><span class="lineno">  242</span>      <a class="code hl_function" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6">cprintf</a>(<span class="stringliteral">&quot;allocuvm out of memory (2)\n&quot;</span>);</div>
<div class="line"><span class="lineno">  243</span>      <a class="code hl_function" href="../../de/de9/vm_8c.html#a6d3019ea15a9bfdc5131ae97f3623c49">deallocuvm</a>(pgdir, newsz, oldsz);</div>
<div class="line"><span class="lineno">  244</span>      <a class="code hl_function" href="../../d5/d64/defs_8h.html#ae79d6a7d0901b7c081cfded3f916d5bd">kfree</a>(<a class="code hl_function" href="../../de/dc0/usertests_8c.html#aa1c6e6e76813ccb29a29bb119dba668a">mem</a>);</div>
<div class="line"><span class="lineno">  245</span>      <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  246</span>    }</div>
<div class="line"><span class="lineno">  247</span>  }</div>
<div class="line"><span class="lineno">  248</span>  <span class="keywordflow">return</span> newsz;</div>
<div class="line"><span class="lineno">  249</span>}</div>
<div class="ttc" id="aconsole_8c_html_a90f0742d846503e4ed1804f1df421ec6"><div class="ttname"><a href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6">cprintf</a></div><div class="ttdeci">void cprintf(char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d56/console_8c_source.html#l00055">console.c:55</a></div></div>
<div class="ttc" id="adefs_8h_html_a0098886a849eef10803e9f35ceec61b9"><div class="ttname"><a href="../../d5/d64/defs_8h.html#a0098886a849eef10803e9f35ceec61b9">memset</a></div><div class="ttdeci">void * memset(void *, int, uint)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/db0/string_8c_source.html#l00005">string.c:5</a></div></div>
<div class="ttc" id="adefs_8h_html_a5e965f6365c721b5b23c12d16d45c3dc"><div class="ttname"><a href="../../d5/d64/defs_8h.html#a5e965f6365c721b5b23c12d16d45c3dc">kalloc</a></div><div class="ttdeci">char * kalloc(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/def/kalloc_8c_source.html#l00083">kalloc.c:83</a></div></div>
<div class="ttc" id="adefs_8h_html_ae79d6a7d0901b7c081cfded3f916d5bd"><div class="ttname"><a href="../../d5/d64/defs_8h.html#ae79d6a7d0901b7c081cfded3f916d5bd">kfree</a></div><div class="ttdeci">void kfree(char *)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/def/kalloc_8c_source.html#l00060">kalloc.c:60</a></div></div>
<div class="ttc" id="amemlayout_8h_html_a20cbfc19992a40ab9ccf4aa8ab8283d0"><div class="ttname"><a href="../../d8/da9/memlayout_8h.html#a20cbfc19992a40ab9ccf4aa8ab8283d0">KERNBASE</a></div><div class="ttdeci">#define KERNBASE</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/da9/memlayout_8h_source.html#l00008">memlayout.h:8</a></div></div>
<div class="ttc" id="amemlayout_8h_html_a5021188bc7da1304f27e913aee183407"><div class="ttname"><a href="../../d8/da9/memlayout_8h.html#a5021188bc7da1304f27e913aee183407">V2P</a></div><div class="ttdeci">#define V2P(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/da9/memlayout_8h_source.html#l00011">memlayout.h:11</a></div></div>
<div class="ttc" id="ammu_8h_html_a058fcbcc3e1eab2c09c68b3e5221c545"><div class="ttname"><a href="../../d2/df1/mmu_8h.html#a058fcbcc3e1eab2c09c68b3e5221c545">PTE_W</a></div><div class="ttdeci">#define PTE_W</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/df1/mmu_8h_source.html#l00095">mmu.h:95</a></div></div>
<div class="ttc" id="ammu_8h_html_a5f96cb6ae6670e023c407cc2f77e1704"><div class="ttname"><a href="../../d2/df1/mmu_8h.html#a5f96cb6ae6670e023c407cc2f77e1704">PGSIZE</a></div><div class="ttdeci">#define PGSIZE</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/df1/mmu_8h_source.html#l00085">mmu.h:85</a></div></div>
<div class="ttc" id="ammu_8h_html_adced9836a1dc98d72849361e6ab03cda"><div class="ttname"><a href="../../d2/df1/mmu_8h.html#adced9836a1dc98d72849361e6ab03cda">PTE_U</a></div><div class="ttdeci">#define PTE_U</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/df1/mmu_8h_source.html#l00096">mmu.h:96</a></div></div>
<div class="ttc" id="ammu_8h_html_affa8cdfbd1c15dafc9f3af3a7b641f80"><div class="ttname"><a href="../../d2/df1/mmu_8h.html#affa8cdfbd1c15dafc9f3af3a7b641f80">PGROUNDUP</a></div><div class="ttdeci">#define PGROUNDUP(sz)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/df1/mmu_8h_source.html#l00090">mmu.h:90</a></div></div>
<div class="ttc" id="atypes_8h_html_a91ad9478d81a7aaf2593e8d9c3d06a14"><div class="ttname"><a href="../../d9/d49/types_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a></div><div class="ttdeci">unsigned int uint</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d49/types_8h_source.html#l00001">types.h:1</a></div></div>
<div class="ttc" id="ausertests_8c_html_aa1c6e6e76813ccb29a29bb119dba668a"><div class="ttname"><a href="../../de/dc0/usertests_8c.html#aa1c6e6e76813ccb29a29bb119dba668a">mem</a></div><div class="ttdeci">void mem(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dc0/usertests_8c_source.html#l00428">usertests.c:428</a></div></div>
<div class="ttc" id="avm_8c_html_a6d3019ea15a9bfdc5131ae97f3623c49"><div class="ttname"><a href="../../de/de9/vm_8c.html#a6d3019ea15a9bfdc5131ae97f3623c49">deallocuvm</a></div><div class="ttdeci">int deallocuvm(pde_t *pgdir, uint oldsz, uint newsz)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/de9/vm_8c_source.html#l00256">vm.c:256</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_a67f50b6f85756f02b5acdcb084d51b9f_cgraph.png" border="0" usemap="#ad5/d64/defs_8h_a67f50b6f85756f02b5acdcb084d51b9f_cgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_a67f50b6f85756f02b5acdcb084d51b9f_cgraph" id="ad5/d64/defs_8h_a67f50b6f85756f02b5acdcb084d51b9f_cgraph">
<area shape="rect" title=" " alt="" coords="5,195,80,221"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="1010,94,1069,119"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a6d3019ea15a9bfdc5131ae97f3623c49" title=" " alt="" coords="861,195,949,221"/>
<area shape="rect" href="../../d4/def/kalloc_8c.html#aced59ecf8411235f6dffc065236711a5" title=" " alt="" coords="1014,449,1065,474"/>
<area shape="rect" href="../../db/d8a/ulib_8c.html#aa9cdc2409c15ccd5ee3b2031576f4093" title=" " alt="" coords="1127,157,1196,182"/>
<area shape="rect" href="../../d4/def/kalloc_8c.html#a5e965f6365c721b5b23c12d16d45c3dc" title=" " alt="" coords="740,601,796,626"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#aa1c6e6e76813ccb29a29bb119dba668a" title=" " alt="" coords="128,575,179,601"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="1129,1538,1193,1563"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="1604,753,1657,778"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="1129,1158,1193,1183"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="1244,1538,1336,1563"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="1259,1817,1321,1842"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="1495,1867,1556,1893"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="1384,1867,1447,1893"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="1387,1766,1443,1791"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="1722,1069,1781,1094"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="1705,753,1797,778"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#aaf98ef7cdde3a0dfb2e49919de3298b1" title=" " alt="" coords="235,1829,278,1854"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#acd2e1ded4bb6fce4500438bf928330f4" title=" " alt="" coords="348,803,392,829"/>
<area shape="rect" href="../../df/d5d/umalloc_8c.html#adebb229f063e66907017098087cbe791" title=" " alt="" coords="235,453,279,478"/>
<area shape="rect" href="../../d8/ddb/user_8h.html#a939cb25a305fe68aad9b365077f1a8c7" title=" " alt="" coords="228,502,285,527"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a650cf0caaaa8b75f653c1c92818d03a4" title=" " alt="" coords="1020,1107,1059,1133"/>
<area shape="rect" href="../../df/d5d/umalloc_8c.html#ac131c16d1dcb6bea908d0237c82e981d" title=" " alt="" coords="227,551,287,577"/>
<area shape="rect" href="../../d5/de1/forktest_8c.html#a249680925885256274fa9f02dd51cec4" title=" " alt="" coords="231,601,282,626"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#af6f31822f7e737b4e414bdac1ccb59a4" title=" " alt="" coords="608,753,655,778"/>
<area shape="rect" href="../../d7/df8/log_8c.html#ac96aa31ffc0500e749c62c4d377c21c9" title=" " alt="" coords="594,1829,669,1854"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a41af0935f3989aae450cf8988cd9c3a9" title=" " alt="" coords="1007,2121,1072,2146"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad788da91743c333b5bed7c4a0dd12365" title=" " alt="" coords="876,2374,933,2399"/>
<area shape="rect" href="../../d7/df8/log_8c.html#ac0f12be0ca0de555e60b27b06a57a65b" title=" " alt="" coords="873,1158,937,1183"/>
<area shape="rect" href="../../d6/d13/file_8c.html#ae557c81ab89c24219146144bb6adaa2c" title=" " alt="" coords="335,1437,405,1462"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#ab3c447f135c68e4c3c1f8d5866f6e77b" title=" " alt="" coords="473,1663,516,1689"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ae70cc0370342e46f6db3bec367232457" title=" " alt="" coords="741,1969,795,1994"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a9fa00b0be5d3c4781048861e2506eb63" title=" " alt="" coords="1000,2222,1079,2247"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a1d9e7047d3dfb57809a2541d8387705e" title=" " alt="" coords="1133,2247,1190,2273"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a4a34d9f03e436cfa09b88f735f6ee952" title=" " alt="" coords="1006,1411,1073,1437"/>
<area shape="rect" href="../../d1/d47/pipe_8c.html#a48642f54734698f6f881ee07723292cb" title=" " alt="" coords="866,1259,943,1285"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#aaad2d7a86d4859982dd9a132f5128ff2" title=" " alt="" coords="584,1969,679,1994"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a7220afa8e5f4bea540eb95879ea7df6e" title=" " alt="" coords="599,1589,663,1614"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#aa997067c2c9bfef15af6fa0a10c20f4a" title=" " alt="" coords="857,1563,952,1589"/>
<area shape="rect" href="../../dc/de6/bio_8c.html#a30b8d2ef2300ed8e3d879a428fe39898" title=" " alt="" coords="741,1613,795,1638"/>
<area shape="rect" href="../../dc/de6/bio_8c.html#ab5335aeb503731104314321a78a6d727" title=" " alt="" coords="739,1563,797,1589"/>
<area shape="rect" href="../../d1/db0/string_8c.html#a07f97e2ed1ce37955192d52de8f4911f" title=" " alt="" coords="727,1259,809,1285"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a1b57bfa0091c9be3ccc16dbb85ce3acf" title=" " alt="" coords="457,499,532,525"/>
<area shape="rect" href="../../d6/d13/file_8c.html#a9ef0346d08d8ed79ce2a9c03f9a4b4b2" title=" " alt="" coords="1009,753,1069,778"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a24a91383ab80b4b8a1ef1f4df896035c" title=" " alt="" coords="1016,1006,1063,1031"/>
<area shape="rect" href="../../d1/db0/string_8c.html#aca73516e4b2fdb2663e0d26f855ac3ca" title=" " alt="" coords="453,905,536,930"/>
<area shape="rect" href="../../de/de9/vm_8c.html#aa883924e2f068c520b695cdc168e1603" title=" " alt="" coords="737,322,799,347"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a1c8a7a02e9391b5cf0984388216695c0" title=" " alt="" coords="592,373,671,398"/>
<area shape="rect" href="../../db/d8a/ulib_8c.html#a59b5e6e6105ef0e97aed266ec6fdfe60" title=" " alt="" coords="343,601,397,626"/>
<area shape="rect" href="../../d8/ddb/user_8h.html#ae57e95d717eb7386cd8b935a0c136abe" title=" " alt="" coords="345,551,395,577"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_a67f50b6f85756f02b5acdcb084d51b9f_icgraph.png" border="0" usemap="#ad5/d64/defs_8h_a67f50b6f85756f02b5acdcb084d51b9f_icgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_a67f50b6f85756f02b5acdcb084d51b9f_icgraph" id="ad5/d64/defs_8h_a67f50b6f85756f02b5acdcb084d51b9f_icgraph">
<area shape="rect" title=" " alt="" coords="353,191,428,216"/>
<area shape="rect" href="../../df/dc9/exec_8c.html#ace32454ed0d37834dcb1cb4f8b727e6e" title=" " alt="" coords="243,141,293,167"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a9c16214741f4fcd088e5eea468709328" title=" " alt="" coords="231,215,305,240"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#ac5b5d4517586be6396b4f3b37445945a" title=" " alt="" coords="104,5,183,31"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a6f94e3b215d069b5419e87bafe80799a" title=" " alt="" coords="107,55,179,80"/>
<area shape="rect" href="../../d8/d60/init_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title=" " alt="" coords="118,104,169,129"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#aedbeff6afe5d4e22330c7e6b5e6df893" title=" " alt="" coords="111,177,176,203"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#aeaa813ddeb6a5fac3c45714c7351c526" title=" " alt="" coords="104,227,183,252"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="5,31,56,56"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title=" " alt="" coords="5,177,56,203"/>
<area shape="rect" href="../../dd/d35/sysproc_8c.html#ab21d46be776cf6075a997af525a1a628" title=" " alt="" coords="106,276,181,301"/>
</map>
</div>

</div>
</div>
<a id="a75bc8d8c7ea0b4b39d4f470e18e0dba7" name="a75bc8d8c7ea0b4b39d4f470e18e0dba7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a75bc8d8c7ea0b4b39d4f470e18e0dba7">&#9670;&#160;</a></span>argint()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int argint </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>ip</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/dd8/syscall_8c_source.html#l00050">50</a> of file <a class="el" href="../../db/dd8/syscall_8c_source.html">syscall.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   51</span>{</div>
<div class="line"><span class="lineno">   52</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="../../db/dd8/syscall_8c.html#a918cadc6c55aa7ac38982659c27a3a75">fetchint</a>((<a class="code hl_function" href="../../d5/d64/defs_8h.html#a3d2327db1e34643f4a9e6a07c8cc62c6">myproc</a>()-&gt;tf-&gt;esp) + 4 + 4*n, ip);</div>
<div class="line"><span class="lineno">   53</span>}</div>
<div class="ttc" id="asyscall_8c_html_a918cadc6c55aa7ac38982659c27a3a75"><div class="ttname"><a href="../../db/dd8/syscall_8c.html#a918cadc6c55aa7ac38982659c27a3a75">fetchint</a></div><div class="ttdeci">int fetchint(uint addr, int *ip)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/dd8/syscall_8c_source.html#l00018">syscall.c:18</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_a75bc8d8c7ea0b4b39d4f470e18e0dba7_cgraph.png" border="0" usemap="#ad5/d64/defs_8h_a75bc8d8c7ea0b4b39d4f470e18e0dba7_cgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_a75bc8d8c7ea0b4b39d4f470e18e0dba7_cgraph" id="ad5/d64/defs_8h_a75bc8d8c7ea0b4b39d4f470e18e0dba7_cgraph">
<area shape="rect" title=" " alt="" coords="5,170,60,195"/>
<area shape="rect" href="../../db/dd8/syscall_8c.html#a918cadc6c55aa7ac38982659c27a3a75" title=" " alt="" coords="108,195,173,221"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a41af0935f3989aae450cf8988cd9c3a9" title=" " alt="" coords="221,170,287,195"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="335,170,396,195"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="941,447,997,473"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="937,69,1000,94"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="562,195,621,221"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="444,297,497,322"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="562,297,621,322"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="545,346,637,371"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="685,233,749,258"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="685,359,749,385"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="797,209,889,234"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="812,258,875,283"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_a75bc8d8c7ea0b4b39d4f470e18e0dba7_icgraph.png" border="0" usemap="#ad5/d64/defs_8h_a75bc8d8c7ea0b4b39d4f470e18e0dba7_icgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_a75bc8d8c7ea0b4b39d4f470e18e0dba7_icgraph" id="ad5/d64/defs_8h_a75bc8d8c7ea0b4b39d4f470e18e0dba7_icgraph">
<area shape="rect" title=" " alt="" coords="283,375,337,400"/>
<area shape="rect" href="../../db/dd8/syscall_8c.html#a6ade9205d1f46b759cf93b60513a3421" title=" " alt="" coords="167,107,221,132"/>
<area shape="rect" href="../../dd/d35/sysproc_8c.html#a65e52d7f297b2757ffbf46e4deccf188" title=" " alt="" coords="5,5,105,31"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a54bf714d9e898cbdcbc061b280bbfae0" title=" " alt="" coords="18,153,93,179"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a687d939a9e4792af15db96f2c2f34378" title=" " alt="" coords="16,203,95,228"/>
<area shape="rect" href="../../db/dd8/syscall_8c.html#a662eedd65f3e2165093842b80e3bc024" title=" " alt="" coords="167,349,221,375"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#aeaa813ddeb6a5fac3c45714c7351c526" title=" " alt="" coords="16,252,95,277"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a25697aa3d828b5878d38170d724adb27" title=" " alt="" coords="11,499,100,524"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a74e45efc661ca17c068bc283b3842e6d" title=" " alt="" coords="16,548,95,573"/>
<area shape="rect" href="../../dd/d35/sysproc_8c.html#abc90a5b53d06206904d099c62efc1696" title=" " alt="" coords="157,501,231,527"/>
<area shape="rect" href="../../dd/d35/sysproc_8c.html#ad766b54842470b464a6497bb5c514e59" title=" " alt="" coords="161,551,227,576"/>
<area shape="rect" href="../../dd/d35/sysproc_8c.html#ab21d46be776cf6075a997af525a1a628" title=" " alt="" coords="157,600,231,625"/>
<area shape="rect" href="../../dd/d35/sysproc_8c.html#a59778ec9bfa6b6f2100b43fbba000573" title=" " alt="" coords="153,649,235,675"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#ac243c8f20f5fb2e3e257b5007af2c204" title=" " alt="" coords="17,55,93,80"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a9a70db941def46ec25939e6c2d30e399" title=" " alt="" coords="18,104,93,129"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#ad1c5f8693cb35b9605fee09eebdda640" title=" " alt="" coords="16,301,95,327"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a759600870314007ac558871239122fb7" title=" " alt="" coords="20,351,91,376"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a057e5bce2de7a87ebfd2dc33967bca4a" title=" " alt="" coords="14,400,97,425"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#ae1e58ee11d41f643929520d8c1640da7" title=" " alt="" coords="13,449,97,475"/>
</map>
</div>

</div>
</div>
<a id="a05c7464938c27eb91540c06ec6137f26" name="a05c7464938c27eb91540c06ec6137f26"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a05c7464938c27eb91540c06ec6137f26">&#9670;&#160;</a></span>argptr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int argptr </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>pp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/dd8/syscall_8c_source.html#l00059">59</a> of file <a class="el" href="../../db/dd8/syscall_8c_source.html">syscall.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   60</span>{</div>
<div class="line"><span class="lineno">   61</span>  <span class="keywordtype">int</span> i;</div>
<div class="line"><span class="lineno">   62</span>  <span class="keyword">struct </span><a class="code hl_struct" href="../../de/d48/structproc.html">proc</a> *curproc = <a class="code hl_function" href="../../d5/d64/defs_8h.html#a3d2327db1e34643f4a9e6a07c8cc62c6">myproc</a>();</div>
<div class="line"><span class="lineno">   63</span> </div>
<div class="line"><span class="lineno">   64</span>  <span class="keywordflow">if</span>(<a class="code hl_function" href="../../db/dd8/syscall_8c.html#ade56ef2176f85cd61e7b91b400e7d4d3">argint</a>(n, &amp;i) &lt; 0)</div>
<div class="line"><span class="lineno">   65</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">   66</span>  <span class="keywordflow">if</span>(size &lt; 0 || (<a class="code hl_typedef" href="../../d9/d49/types_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>)i &gt;= curproc-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#a6e67042bb361124ff287af88efc33e00">sz</a> || (<a class="code hl_typedef" href="../../d9/d49/types_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>)i+size &gt; curproc-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#a6e67042bb361124ff287af88efc33e00">sz</a>)</div>
<div class="line"><span class="lineno">   67</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">   68</span>  *pp = (<span class="keywordtype">char</span>*)i;</div>
<div class="line"><span class="lineno">   69</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">   70</span>}</div>
<div class="ttc" id="astructproc_html"><div class="ttname"><a href="../../de/d48/structproc.html">proc</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d03/proc_8h_source.html#l00038">proc.h:38</a></div></div>
<div class="ttc" id="astructproc_html_a6e67042bb361124ff287af88efc33e00"><div class="ttname"><a href="../../de/d48/structproc.html#a6e67042bb361124ff287af88efc33e00">proc::sz</a></div><div class="ttdeci">uint sz</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d03/proc_8h_source.html#l00039">proc.h:39</a></div></div>
<div class="ttc" id="asyscall_8c_html_ade56ef2176f85cd61e7b91b400e7d4d3"><div class="ttname"><a href="../../db/dd8/syscall_8c.html#ade56ef2176f85cd61e7b91b400e7d4d3">argint</a></div><div class="ttdeci">int argint(int n, int *ip)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/dd8/syscall_8c_source.html#l00050">syscall.c:50</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_a05c7464938c27eb91540c06ec6137f26_cgraph.png" border="0" usemap="#ad5/d64/defs_8h_a05c7464938c27eb91540c06ec6137f26_cgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_a05c7464938c27eb91540c06ec6137f26_cgraph" id="ad5/d64/defs_8h_a05c7464938c27eb91540c06ec6137f26_cgraph">
<area shape="rect" title=" " alt="" coords="5,145,60,170"/>
<area shape="rect" href="../../db/dd8/syscall_8c.html#ade56ef2176f85cd61e7b91b400e7d4d3" title=" " alt="" coords="108,170,163,195"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a41af0935f3989aae450cf8988cd9c3a9" title=" " alt="" coords="324,170,389,195"/>
<area shape="rect" href="../../db/dd8/syscall_8c.html#a918cadc6c55aa7ac38982659c27a3a75" title=" " alt="" coords="211,170,276,195"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="437,170,499,195"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="1043,447,1099,473"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="1040,69,1103,94"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="665,195,723,221"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="547,297,600,322"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="665,297,723,322"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="648,346,740,371"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="788,233,852,258"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="788,359,852,385"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="900,209,992,234"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="915,258,977,283"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_a05c7464938c27eb91540c06ec6137f26_icgraph.png" border="0" usemap="#ad5/d64/defs_8h_a05c7464938c27eb91540c06ec6137f26_icgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_a05c7464938c27eb91540c06ec6137f26_icgraph" id="ad5/d64/defs_8h_a05c7464938c27eb91540c06ec6137f26_icgraph">
<area shape="rect" title=" " alt="" coords="153,104,208,129"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#ac243c8f20f5fb2e3e257b5007af2c204" title=" " alt="" coords="17,5,93,31"/>
<area shape="rect" href="../../dd/d35/sysproc_8c.html#a65e52d7f297b2757ffbf46e4deccf188" title=" " alt="" coords="5,55,105,80"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a9a70db941def46ec25939e6c2d30e399" title=" " alt="" coords="18,104,93,129"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a54bf714d9e898cbdcbc061b280bbfae0" title=" " alt="" coords="18,153,93,179"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a687d939a9e4792af15db96f2c2f34378" title=" " alt="" coords="16,203,95,228"/>
</map>
</div>

</div>
</div>
<a id="afc00cb2e6a06b1021f3d82fa4d0eff07" name="afc00cb2e6a06b1021f3d82fa4d0eff07"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afc00cb2e6a06b1021f3d82fa4d0eff07">&#9670;&#160;</a></span>argstr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int argstr </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>pp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/dd8/syscall_8c_source.html#l00077">77</a> of file <a class="el" href="../../db/dd8/syscall_8c_source.html">syscall.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   78</span>{</div>
<div class="line"><span class="lineno">   79</span>  <span class="keywordtype">int</span> addr;</div>
<div class="line"><span class="lineno">   80</span>  <span class="keywordflow">if</span>(<a class="code hl_function" href="../../db/dd8/syscall_8c.html#ade56ef2176f85cd61e7b91b400e7d4d3">argint</a>(n, &amp;addr) &lt; 0)</div>
<div class="line"><span class="lineno">   81</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">   82</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="../../db/dd8/syscall_8c.html#ace37b4584713ab6bda44a282a298961f">fetchstr</a>(addr, pp);</div>
<div class="line"><span class="lineno">   83</span>}</div>
<div class="ttc" id="asyscall_8c_html_ace37b4584713ab6bda44a282a298961f"><div class="ttname"><a href="../../db/dd8/syscall_8c.html#ace37b4584713ab6bda44a282a298961f">fetchstr</a></div><div class="ttdeci">int fetchstr(uint addr, char **pp)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/dd8/syscall_8c_source.html#l00032">syscall.c:32</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_afc00cb2e6a06b1021f3d82fa4d0eff07_cgraph.png" border="0" usemap="#ad5/d64/defs_8h_afc00cb2e6a06b1021f3d82fa4d0eff07_cgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_afc00cb2e6a06b1021f3d82fa4d0eff07_cgraph" id="ad5/d64/defs_8h_afc00cb2e6a06b1021f3d82fa4d0eff07_cgraph">
<area shape="rect" title=" " alt="" coords="5,195,60,221"/>
<area shape="rect" href="../../db/dd8/syscall_8c.html#ade56ef2176f85cd61e7b91b400e7d4d3" title=" " alt="" coords="108,170,163,195"/>
<area shape="rect" href="../../db/dd8/syscall_8c.html#ace37b4584713ab6bda44a282a298961f" title=" " alt="" coords="211,221,277,246"/>
<area shape="rect" href="../../db/dd8/syscall_8c.html#a918cadc6c55aa7ac38982659c27a3a75" title=" " alt="" coords="211,119,277,145"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a41af0935f3989aae450cf8988cd9c3a9" title=" " alt="" coords="325,170,391,195"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="439,170,500,195"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="1045,447,1101,473"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="1041,69,1104,94"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="666,195,725,221"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="548,297,601,322"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="666,297,725,322"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="649,346,741,371"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="789,233,853,258"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="789,359,853,385"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="901,209,993,234"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="916,258,979,283"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_afc00cb2e6a06b1021f3d82fa4d0eff07_icgraph.png" border="0" usemap="#ad5/d64/defs_8h_afc00cb2e6a06b1021f3d82fa4d0eff07_icgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_afc00cb2e6a06b1021f3d82fa4d0eff07_icgraph" id="ad5/d64/defs_8h_afc00cb2e6a06b1021f3d82fa4d0eff07_icgraph">
<area shape="rect" title=" " alt="" coords="143,153,197,179"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#ad1c5f8693cb35b9605fee09eebdda640" title=" " alt="" coords="11,5,89,31"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#aeaa813ddeb6a5fac3c45714c7351c526" title=" " alt="" coords="11,55,89,80"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a759600870314007ac558871239122fb7" title=" " alt="" coords="15,104,85,129"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a057e5bce2de7a87ebfd2dc33967bca4a" title=" " alt="" coords="9,153,91,179"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a25697aa3d828b5878d38170d724adb27" title=" " alt="" coords="5,203,95,228"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a74e45efc661ca17c068bc283b3842e6d" title=" " alt="" coords="11,252,89,277"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#ae1e58ee11d41f643929520d8c1640da7" title=" " alt="" coords="8,301,92,327"/>
</map>
</div>

</div>
</div>
<a id="a603ca98212e00d2ffdba7827ef0f1003" name="a603ca98212e00d2ffdba7827ef0f1003"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a603ca98212e00d2ffdba7827ef0f1003">&#9670;&#160;</a></span>begin_op()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void begin_op </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/df8/log_8c_source.html#l00126">126</a> of file <a class="el" href="../../d7/df8/log_8c_source.html">log.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  127</span>{</div>
<div class="line"><span class="lineno">  128</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#afe4ef8638f1ecb962a6e67fb086ee3b8">acquire</a>(&amp;<a class="code hl_struct" href="../../d0/d4a/structlog.html">log</a>.<a class="code hl_variable" href="../../d0/d4a/structlog.html#a980a1d1aa9c60af7a82f297f8ab54d2e">lock</a>);</div>
<div class="line"><span class="lineno">  129</span>  <span class="keywordflow">while</span>(1){</div>
<div class="line"><span class="lineno">  130</span>    <span class="keywordflow">if</span>(<a class="code hl_struct" href="../../d0/d4a/structlog.html">log</a>.<a class="code hl_variable" href="../../d0/d4a/structlog.html#afc034b98b98897c179ca8fae8e2ee181">committing</a>){</div>
<div class="line"><span class="lineno">  131</span>      <a class="code hl_function" href="../../d5/d64/defs_8h.html#aca4a88f06b3ebbcc04330f7ae06c8507">sleep</a>(&amp;<a class="code hl_struct" href="../../d0/d4a/structlog.html">log</a>, &amp;<a class="code hl_struct" href="../../d0/d4a/structlog.html">log</a>.<a class="code hl_variable" href="../../d0/d4a/structlog.html#a980a1d1aa9c60af7a82f297f8ab54d2e">lock</a>);</div>
<div class="line"><span class="lineno">  132</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code hl_struct" href="../../d0/d4a/structlog.html">log</a>.<a class="code hl_variable" href="../../d0/d4a/structlog.html#a7808516ed2f708dcb13912b1e8fc20d9">lh</a>.<a class="code hl_variable" href="../../d4/d6c/structlogheader.html#a50b276b70d44ae77497ef1d71d182875">n</a> + (<a class="code hl_struct" href="../../d0/d4a/structlog.html">log</a>.<a class="code hl_variable" href="../../d0/d4a/structlog.html#addfc1fc09a124978bd7e2a23a19d733d">outstanding</a>+1)*<a class="code hl_define" href="../../d5/d33/param_8h.html#a31cde324007b4e52bbba7079ec5e5f45">MAXOPBLOCKS</a> &gt; <a class="code hl_define" href="../../d5/d33/param_8h.html#acc7694167c7840a913939a1b90808b4c">LOGSIZE</a>){</div>
<div class="line"><span class="lineno">  133</span>      <span class="comment">// this op might exhaust log space; wait for commit.</span></div>
<div class="line"><span class="lineno">  134</span>      <a class="code hl_function" href="../../d5/d64/defs_8h.html#aca4a88f06b3ebbcc04330f7ae06c8507">sleep</a>(&amp;<a class="code hl_struct" href="../../d0/d4a/structlog.html">log</a>, &amp;<a class="code hl_struct" href="../../d0/d4a/structlog.html">log</a>.<a class="code hl_variable" href="../../d0/d4a/structlog.html#a980a1d1aa9c60af7a82f297f8ab54d2e">lock</a>);</div>
<div class="line"><span class="lineno">  135</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  136</span>      <a class="code hl_struct" href="../../d0/d4a/structlog.html">log</a>.<a class="code hl_variable" href="../../d0/d4a/structlog.html#addfc1fc09a124978bd7e2a23a19d733d">outstanding</a> += 1;</div>
<div class="line"><span class="lineno">  137</span>      <a class="code hl_function" href="../../d5/d64/defs_8h.html#a4f8616948f3dbce65671f666eed1d669">release</a>(&amp;<a class="code hl_struct" href="../../d0/d4a/structlog.html">log</a>.<a class="code hl_variable" href="../../d0/d4a/structlog.html#a980a1d1aa9c60af7a82f297f8ab54d2e">lock</a>);</div>
<div class="line"><span class="lineno">  138</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  139</span>    }</div>
<div class="line"><span class="lineno">  140</span>  }</div>
<div class="line"><span class="lineno">  141</span>}</div>
<div class="ttc" id="aparam_8h_html_a31cde324007b4e52bbba7079ec5e5f45"><div class="ttname"><a href="../../d5/d33/param_8h.html#a31cde324007b4e52bbba7079ec5e5f45">MAXOPBLOCKS</a></div><div class="ttdeci">#define MAXOPBLOCKS</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d33/param_8h_source.html#l00010">param.h:10</a></div></div>
<div class="ttc" id="aparam_8h_html_acc7694167c7840a913939a1b90808b4c"><div class="ttname"><a href="../../d5/d33/param_8h.html#acc7694167c7840a913939a1b90808b4c">LOGSIZE</a></div><div class="ttdeci">#define LOGSIZE</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d33/param_8h_source.html#l00011">param.h:11</a></div></div>
<div class="ttc" id="astructlog_html"><div class="ttname"><a href="../../d0/d4a/structlog.html">log</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/df8/log_8c_source.html#l00039">log.c:39</a></div></div>
<div class="ttc" id="astructlog_html_a7808516ed2f708dcb13912b1e8fc20d9"><div class="ttname"><a href="../../d0/d4a/structlog.html#a7808516ed2f708dcb13912b1e8fc20d9">log::lh</a></div><div class="ttdeci">struct logheader lh</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/df8/log_8c_source.html#l00046">log.c:46</a></div></div>
<div class="ttc" id="astructlog_html_a980a1d1aa9c60af7a82f297f8ab54d2e"><div class="ttname"><a href="../../d0/d4a/structlog.html#a980a1d1aa9c60af7a82f297f8ab54d2e">log::lock</a></div><div class="ttdeci">struct spinlock lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/df8/log_8c_source.html#l00040">log.c:40</a></div></div>
<div class="ttc" id="astructlog_html_addfc1fc09a124978bd7e2a23a19d733d"><div class="ttname"><a href="../../d0/d4a/structlog.html#addfc1fc09a124978bd7e2a23a19d733d">log::outstanding</a></div><div class="ttdeci">int outstanding</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/df8/log_8c_source.html#l00043">log.c:43</a></div></div>
<div class="ttc" id="astructlog_html_afc034b98b98897c179ca8fae8e2ee181"><div class="ttname"><a href="../../d0/d4a/structlog.html#afc034b98b98897c179ca8fae8e2ee181">log::committing</a></div><div class="ttdeci">int committing</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/df8/log_8c_source.html#l00044">log.c:44</a></div></div>
<div class="ttc" id="astructlogheader_html_a50b276b70d44ae77497ef1d71d182875"><div class="ttname"><a href="../../d4/d6c/structlogheader.html#a50b276b70d44ae77497ef1d71d182875">logheader::n</a></div><div class="ttdeci">int n</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/df8/log_8c_source.html#l00035">log.c:35</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_a603ca98212e00d2ffdba7827ef0f1003_cgraph.png" border="0" usemap="#ad5/d64/defs_8h_a603ca98212e00d2ffdba7827ef0f1003_cgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_a603ca98212e00d2ffdba7827ef0f1003_cgraph" id="ad5/d64/defs_8h_a603ca98212e00d2ffdba7827ef0f1003_cgraph">
<area shape="rect" title=" " alt="" coords="5,474,80,499"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="472,347,536,373"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="1196,702,1260,727"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ae70cc0370342e46f6db3bec367232457" title=" " alt="" coords="128,474,181,499"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="595,347,687,373"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="609,246,672,271"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="845,297,907,322"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="955,601,1008,626"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="735,246,797,271"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="1308,335,1364,361"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="1073,487,1131,513"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="1073,550,1131,575"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="1056,651,1148,677"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a41af0935f3989aae450cf8988cd9c3a9" title=" " alt="" coords="608,43,673,69"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad788da91743c333b5bed7c4a0dd12365" title=" " alt="" coords="229,474,287,499"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a9fa00b0be5d3c4781048861e2506eb63" title=" " alt="" coords="335,601,413,626"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a1d9e7047d3dfb57809a2541d8387705e" title=" " alt="" coords="475,753,533,778"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a02ca0670bc1fe12e38453082631ff360" title=" " alt="" coords="461,651,547,677"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a87c90f0ab2a1b11c2b55f4e483bb8493" title=" " alt="" coords="598,449,683,474"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_a603ca98212e00d2ffdba7827ef0f1003_icgraph.png" border="0" usemap="#ad5/d64/defs_8h_a603ca98212e00d2ffdba7827ef0f1003_icgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_a603ca98212e00d2ffdba7827ef0f1003_icgraph" id="ad5/d64/defs_8h_a603ca98212e00d2ffdba7827ef0f1003_icgraph">
<area shape="rect" title=" " alt="" coords="524,1147,599,1172"/>
<area shape="rect" href="../../df/dc9/exec_8c.html#ace32454ed0d37834dcb1cb4f8b727e6e" title=" " alt="" coords="274,131,325,156"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#aaf98ef7cdde3a0dfb2e49919de3298b1" title=" " alt="" coords="278,1020,321,1045"/>
<area shape="rect" href="../../d6/d13/file_8c.html#ae557c81ab89c24219146144bb6adaa2c" title=" " alt="" coords="396,1020,467,1045"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a74e45efc661ca17c068bc283b3842e6d" title=" " alt="" coords="260,1069,339,1095"/>
<area shape="rect" href="../../d6/d13/file_8c.html#ab8de757a0a9f58dcc6511ea5e46ebb88" title=" " alt="" coords="398,1121,465,1147"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#ad1c5f8693cb35b9605fee09eebdda640" title=" " alt="" coords="392,1171,471,1196"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a759600870314007ac558871239122fb7" title=" " alt="" coords="396,1220,467,1245"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a057e5bce2de7a87ebfd2dc33967bca4a" title=" " alt="" coords="390,1269,473,1295"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a25697aa3d828b5878d38170d724adb27" title=" " alt="" coords="387,1319,476,1344"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#ae1e58ee11d41f643929520d8c1640da7" title=" " alt="" coords="389,1368,473,1393"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#ac5b5d4517586be6396b4f3b37445945a" title=" " alt="" coords="126,156,205,181"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a6f94e3b215d069b5419e87bafe80799a" title=" " alt="" coords="129,205,201,231"/>
<area shape="rect" href="../../d8/d60/init_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title=" " alt="" coords="140,55,191,80"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#aedbeff6afe5d4e22330c7e6b5e6df893" title=" " alt="" coords="5,255,71,280"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#aeaa813ddeb6a5fac3c45714c7351c526" title=" " alt="" coords="126,5,205,31"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a77cc2edce6e78f22dd9eb377462762f2" title=" " alt="" coords="131,1096,200,1121"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#aa0d46fcb43667c805b84ea7e1ff6100a" title=" " alt="" coords="139,1145,192,1171"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a86fe524d99d69c18a335512cf3405b31" title=" " alt="" coords="137,1195,193,1220"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a57e55b2d0161d62bb99765ca3de43e35" title=" " alt="" coords="132,1244,199,1269"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a0b0ff95e564df3c3e8fc977226b75de7" title=" " alt="" coords="133,1293,198,1319"/>
<area shape="rect" href="../../d1/d8f/cat_8c.html#a90a33618884bcf5e892297879bc016ff" title=" " alt="" coords="145,1395,185,1420"/>
<area shape="rect" href="../../d1/d8f/cat_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="13,1369,63,1395"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a5a12affe4fdfaa172d85da9a6adf98d2" title=" " alt="" coords="126,1444,205,1469"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a425a0efe4f459decf4b5ea14517ab3cf" title=" " alt="" coords="119,1493,212,1519"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#aedd6d3f148dd5c99b47900215c1ac43f" title=" " alt="" coords="139,1543,192,1568"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a8db9f9a2634bab29096bab0b8bc6945c" title=" " alt="" coords="136,1592,195,1617"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a8faab06cc4d48335076b368f02709ee2" title=" " alt="" coords="122,1641,209,1667"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a330ed2370fe27045b8bec1eb0bd7818f" title=" " alt="" coords="132,1691,199,1716"/>
<area shape="rect" href="../../d5/de1/forktest_8c.html#a0ef8ccf57bc8c491407ec513b234f83c" title=" " alt="" coords="132,1740,199,1765"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a77a4432bc67dfb513f1c1d698c2c4ea6" title=" " alt="" coords="131,1789,199,1815"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#abf4af50e65630225208fef177e267efb" title=" " alt="" coords="131,1839,200,1864"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#ac9fe56d8f6e4ed1c9677b06cb7b325e6" title=" " alt="" coords="133,1888,198,1913"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a267227083b00d0cc3141b34f5152ae04" title=" " alt="" coords="145,1937,185,1963"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a4eeee588d4689a58fc140a7d5d7b0608" title=" " alt="" coords="133,304,197,329"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a1740f29f4ce6d3060fd79a9312edc315" title=" " alt="" coords="127,353,203,379"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#aa1c6e6e76813ccb29a29bb119dba668a" title=" " alt="" coords="140,403,191,428"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a3208ed001a225f5d9ea3fb37f46810c7" title=" " alt="" coords="119,452,212,477"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#ae7c61791dd2cfb8ad59b4c6e87685c07" title=" " alt="" coords="129,501,201,527"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#ada38fdb2913f040f6eeb6189eeb42d32" title=" " alt="" coords="139,255,192,280"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a16ae754fb9c5622d44d0c3ce62ad7c49" title=" " alt="" coords="139,551,192,576"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a6b22568d42b584ed4b0dc4e2b0677013" title=" " alt="" coords="138,600,193,625"/>
<area shape="rect" href="../../d7/d1f/mkfs_8c.html#a22ea835ad23cd716a962f30e4882ee80" title=" " alt="" coords="140,649,191,675"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a06636ed0cda58c748d68e82d33d1afce" title=" " alt="" coords="131,699,200,724"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a02e1ca3f4db5f4bf8a683a0b7c18cc43" title=" " alt="" coords="129,748,201,773"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a5d39024e15998d6a6865f4cd0f69738b" title=" " alt="" coords="137,797,194,823"/>
<area shape="rect" href="../../dd/d35/sysproc_8c.html#aee72faa31a0c32b410aba558ef1d59f2" title=" " alt="" coords="130,847,201,872"/>
<area shape="rect" href="../../dc/d6f/trap_8c.html#a372d166e36c086c91e5f5d81e5fead3a" title=" " alt="" coords="143,896,187,921"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a6888f9f6d973f81f73091d1530ad212b" title=" " alt="" coords="146,945,185,971"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a3331ced6fb67502a2e5277260d4f5aec" title=" " alt="" coords="125,995,206,1020"/>
</map>
</div>

</div>
</div>
<a id="a53cca0ddc98c5f1de37124eca2575a59" name="a53cca0ddc98c5f1de37124eca2575a59"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a53cca0ddc98c5f1de37124eca2575a59">&#9670;&#160;</a></span>binit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void binit </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/de6/bio_8c_source.html#l00039">39</a> of file <a class="el" href="../../dc/de6/bio_8c_source.html">bio.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   40</span>{</div>
<div class="line"><span class="lineno">   41</span>  <span class="keyword">struct </span><a class="code hl_struct" href="../../d9/dd0/structbuf.html">buf</a> *b;</div>
<div class="line"><span class="lineno">   42</span> </div>
<div class="line"><span class="lineno">   43</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#ab56d728e6966819a0260c358d3ac3419">initlock</a>(&amp;<a class="code hl_variable" href="../../dc/de6/bio_8c.html#a7725a9957148b7740449a091ea12b0e4">bcache</a>.lock, <span class="stringliteral">&quot;bcache&quot;</span>);</div>
<div class="line"><span class="lineno">   44</span> </div>
<div class="line"><span class="lineno">   45</span><span class="comment">//PAGEBREAK!</span></div>
<div class="line"><span class="lineno">   46</span>  <span class="comment">// Create linked list of buffers</span></div>
<div class="line"><span class="lineno">   47</span>  <a class="code hl_variable" href="../../dc/de6/bio_8c.html#a7725a9957148b7740449a091ea12b0e4">bcache</a>.head.prev = &amp;<a class="code hl_variable" href="../../dc/de6/bio_8c.html#a7725a9957148b7740449a091ea12b0e4">bcache</a>.head;</div>
<div class="line"><span class="lineno">   48</span>  <a class="code hl_variable" href="../../dc/de6/bio_8c.html#a7725a9957148b7740449a091ea12b0e4">bcache</a>.head.next = &amp;<a class="code hl_variable" href="../../dc/de6/bio_8c.html#a7725a9957148b7740449a091ea12b0e4">bcache</a>.head;</div>
<div class="line"><span class="lineno">   49</span>  <span class="keywordflow">for</span>(b = <a class="code hl_variable" href="../../dc/de6/bio_8c.html#a7725a9957148b7740449a091ea12b0e4">bcache</a>.buf; b &lt; <a class="code hl_variable" href="../../dc/de6/bio_8c.html#a7725a9957148b7740449a091ea12b0e4">bcache</a>.buf+<a class="code hl_define" href="../../d5/d33/param_8h.html#ad51e2f8dffd163c263ec676a268d0f0a">NBUF</a>; b++){</div>
<div class="line"><span class="lineno">   50</span>    b-&gt;<a class="code hl_variable" href="../../d9/dd0/structbuf.html#ab18c18abb22f07617619e9a74c71f51a">next</a> = <a class="code hl_variable" href="../../dc/de6/bio_8c.html#a7725a9957148b7740449a091ea12b0e4">bcache</a>.head.next;</div>
<div class="line"><span class="lineno">   51</span>    b-&gt;<a class="code hl_variable" href="../../d9/dd0/structbuf.html#a930cab1e1b3751795d31bfd0291dff4a">prev</a> = &amp;<a class="code hl_variable" href="../../dc/de6/bio_8c.html#a7725a9957148b7740449a091ea12b0e4">bcache</a>.head;</div>
<div class="line"><span class="lineno">   52</span>    <a class="code hl_function" href="../../d5/d64/defs_8h.html#af5ca8072e3877a883fb34ce59eff88cb">initsleeplock</a>(&amp;b-&gt;<a class="code hl_variable" href="../../d9/dd0/structbuf.html#a626ad748d91d4bd7f4e65b74c73f2644">lock</a>, <span class="stringliteral">&quot;buffer&quot;</span>);</div>
<div class="line"><span class="lineno">   53</span>    <a class="code hl_variable" href="../../dc/de6/bio_8c.html#a7725a9957148b7740449a091ea12b0e4">bcache</a>.head.next-&gt;prev = b;</div>
<div class="line"><span class="lineno">   54</span>    <a class="code hl_variable" href="../../dc/de6/bio_8c.html#a7725a9957148b7740449a091ea12b0e4">bcache</a>.head.next = b;</div>
<div class="line"><span class="lineno">   55</span>  }</div>
<div class="line"><span class="lineno">   56</span>}</div>
<div class="ttc" id="abio_8c_html_a7725a9957148b7740449a091ea12b0e4"><div class="ttname"><a href="../../dc/de6/bio_8c.html#a7725a9957148b7740449a091ea12b0e4">bcache</a></div><div class="ttdeci">struct @0 bcache</div></div>
<div class="ttc" id="adefs_8h_html_ab56d728e6966819a0260c358d3ac3419"><div class="ttname"><a href="../../d5/d64/defs_8h.html#ab56d728e6966819a0260c358d3ac3419">initlock</a></div><div class="ttdeci">void initlock(struct spinlock *, char *)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d2d/spinlock_8c_source.html#l00013">spinlock.c:13</a></div></div>
<div class="ttc" id="adefs_8h_html_af5ca8072e3877a883fb34ce59eff88cb"><div class="ttname"><a href="../../d5/d64/defs_8h.html#af5ca8072e3877a883fb34ce59eff88cb">initsleeplock</a></div><div class="ttdeci">void initsleeplock(struct sleeplock *, char *)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dd1/sleeplock_8c_source.html#l00014">sleeplock.c:14</a></div></div>
<div class="ttc" id="aparam_8h_html_ad51e2f8dffd163c263ec676a268d0f0a"><div class="ttname"><a href="../../d5/d33/param_8h.html#ad51e2f8dffd163c263ec676a268d0f0a">NBUF</a></div><div class="ttdeci">#define NBUF</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d33/param_8h_source.html#l00012">param.h:12</a></div></div>
<div class="ttc" id="astructbuf_html"><div class="ttname"><a href="../../d9/dd0/structbuf.html">buf</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d6d/buf_8h_source.html#l00001">buf.h:1</a></div></div>
<div class="ttc" id="astructbuf_html_a626ad748d91d4bd7f4e65b74c73f2644"><div class="ttname"><a href="../../d9/dd0/structbuf.html#a626ad748d91d4bd7f4e65b74c73f2644">buf::lock</a></div><div class="ttdeci">struct sleeplock lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d6d/buf_8h_source.html#l00005">buf.h:5</a></div></div>
<div class="ttc" id="astructbuf_html_a930cab1e1b3751795d31bfd0291dff4a"><div class="ttname"><a href="../../d9/dd0/structbuf.html#a930cab1e1b3751795d31bfd0291dff4a">buf::prev</a></div><div class="ttdeci">struct buf * prev</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d6d/buf_8h_source.html#l00007">buf.h:7</a></div></div>
<div class="ttc" id="astructbuf_html_ab18c18abb22f07617619e9a74c71f51a"><div class="ttname"><a href="../../d9/dd0/structbuf.html#ab18c18abb22f07617619e9a74c71f51a">buf::next</a></div><div class="ttdeci">struct buf * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d6d/buf_8h_source.html#l00008">buf.h:8</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_a53cca0ddc98c5f1de37124eca2575a59_cgraph.png" border="0" usemap="#ad5/d64/defs_8h_a53cca0ddc98c5f1de37124eca2575a59_cgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_a53cca0ddc98c5f1de37124eca2575a59_cgraph" id="ad5/d64/defs_8h_a53cca0ddc98c5f1de37124eca2575a59_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,52,31"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#abda07b4a007b2e888d9d783920460b89" title=" " alt="" coords="243,5,305,31"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#aaa5746f0a7ae0071b2916be5fdedf4ab" title=" " alt="" coords="100,31,195,56"/>
</map>
</div>

</div>
</div>
<a id="a03ff74b99b4c3282b93b122e74d0804b" name="a03ff74b99b4c3282b93b122e74d0804b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a03ff74b99b4c3282b93b122e74d0804b">&#9670;&#160;</a></span>bread()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d9/dd0/structbuf.html">buf</a> * bread </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d49/types_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/d49/types_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td>
          <td class="paramname"><em>blockno</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/de6/bio_8c_source.html#l00097">97</a> of file <a class="el" href="../../dc/de6/bio_8c_source.html">bio.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   98</span>{</div>
<div class="line"><span class="lineno">   99</span>  <span class="keyword">struct </span><a class="code hl_struct" href="../../d9/dd0/structbuf.html">buf</a> *b;</div>
<div class="line"><span class="lineno">  100</span> </div>
<div class="line"><span class="lineno">  101</span>  b = bget(<a class="code hl_variable" href="../../d9/dd0/structbuf.html#ac96082c2b5f22133ac7092ef81487227">dev</a>, <a class="code hl_variable" href="../../d9/dd0/structbuf.html#a756b2bcc88008bef7f21d688aa4a7a48">blockno</a>);</div>
<div class="line"><span class="lineno">  102</span>  <span class="keywordflow">if</span>((b-&gt;<a class="code hl_variable" href="../../d9/dd0/structbuf.html#ae7d6b6c34fdeadb38970efd0554aa1a9">flags</a> &amp; <a class="code hl_define" href="../../d6/d6d/buf_8h.html#afab4199c0d27da71061f1c0cd5b51520">B_VALID</a>) == 0) {</div>
<div class="line"><span class="lineno">  103</span>    <a class="code hl_function" href="../../d5/d64/defs_8h.html#a70985c3f5b2fb79737457b5c88f5327a">iderw</a>(b);</div>
<div class="line"><span class="lineno">  104</span>  }</div>
<div class="line"><span class="lineno">  105</span>  <span class="keywordflow">return</span> b;</div>
<div class="line"><span class="lineno">  106</span>}</div>
<div class="ttc" id="abuf_8h_html_afab4199c0d27da71061f1c0cd5b51520"><div class="ttname"><a href="../../d6/d6d/buf_8h.html#afab4199c0d27da71061f1c0cd5b51520">B_VALID</a></div><div class="ttdeci">#define B_VALID</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d6d/buf_8h_source.html#l00012">buf.h:12</a></div></div>
<div class="ttc" id="adefs_8h_html_a70985c3f5b2fb79737457b5c88f5327a"><div class="ttname"><a href="../../d5/d64/defs_8h.html#a70985c3f5b2fb79737457b5c88f5327a">iderw</a></div><div class="ttdeci">void iderw(struct buf *)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2f/ide_8c_source.html#l00138">ide.c:138</a></div></div>
<div class="ttc" id="astructbuf_html_a756b2bcc88008bef7f21d688aa4a7a48"><div class="ttname"><a href="../../d9/dd0/structbuf.html#a756b2bcc88008bef7f21d688aa4a7a48">buf::blockno</a></div><div class="ttdeci">uint blockno</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d6d/buf_8h_source.html#l00004">buf.h:4</a></div></div>
<div class="ttc" id="astructbuf_html_ac96082c2b5f22133ac7092ef81487227"><div class="ttname"><a href="../../d9/dd0/structbuf.html#ac96082c2b5f22133ac7092ef81487227">buf::dev</a></div><div class="ttdeci">uint dev</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d6d/buf_8h_source.html#l00003">buf.h:3</a></div></div>
<div class="ttc" id="astructbuf_html_ae7d6b6c34fdeadb38970efd0554aa1a9"><div class="ttname"><a href="../../d9/dd0/structbuf.html#ae7d6b6c34fdeadb38970efd0554aa1a9">buf::flags</a></div><div class="ttdeci">int flags</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d6d/buf_8h_source.html#l00002">buf.h:2</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_a03ff74b99b4c3282b93b122e74d0804b_cgraph.png" border="0" usemap="#ad5/d64/defs_8h_a03ff74b99b4c3282b93b122e74d0804b_cgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_a03ff74b99b4c3282b93b122e74d0804b_cgraph" id="ad5/d64/defs_8h_a03ff74b99b4c3282b93b122e74d0804b_cgraph">
<area shape="rect" title=" " alt="" coords="5,365,60,390"/>
<area shape="rect" href="../../da/d9b/memide_8c.html#a7f36b008f02088c86f76e98e05b55af5" title=" " alt="" coords="108,365,161,390"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="599,301,663,326"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="1081,807,1135,833"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="1323,491,1387,517"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#a6fdbe54cbecd8fc67d74793b27adcf05" title=" " alt="" coords="445,250,540,275"/>
<area shape="rect" href="../../d1/db0/string_8c.html#a07f97e2ed1ce37955192d52de8f4911f" title=" " alt="" coords="209,1061,292,1086"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ae70cc0370342e46f6db3bec367232457" title=" " alt="" coords="224,491,277,517"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="721,149,813,174"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="736,402,799,427"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="972,522,1033,547"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="861,453,924,478"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="1435,263,1491,289"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="1199,657,1258,682"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="1199,706,1258,731"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="1183,807,1275,833"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a41af0935f3989aae450cf8988cd9c3a9" title=" " alt="" coords="735,503,800,529"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad788da91743c333b5bed7c4a0dd12365" title=" " alt="" coords="340,554,397,579"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a9fa00b0be5d3c4781048861e2506eb63" title=" " alt="" coords="453,655,532,681"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a1d9e7047d3dfb57809a2541d8387705e" title=" " alt="" coords="602,605,659,630"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a02ca0670bc1fe12e38453082631ff360" title=" " alt="" coords="588,757,673,782"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a87c90f0ab2a1b11c2b55f4e483bb8493" title=" " alt="" coords="725,757,810,782"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_a03ff74b99b4c3282b93b122e74d0804b_icgraph.png" border="0" usemap="#ad5/d64/defs_8h_a03ff74b99b4c3282b93b122e74d0804b_icgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_a03ff74b99b4c3282b93b122e74d0804b_icgraph" id="ad5/d64/defs_8h_a03ff74b99b4c3282b93b122e74d0804b_icgraph">
<area shape="rect" title=" " alt="" coords="752,284,807,309"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#af95049367381647bc9487af49724b869" title=" " alt="" coords="646,5,698,31"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#aed28187406d84a3aa71f10c6235a03ec" title=" " alt="" coords="404,157,453,183"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a7220afa8e5f4bea540eb95879ea7df6e" title=" " alt="" coords="640,460,704,485"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a15858f4d8a4cc1def3d84d03c312836b" title=" " alt="" coords="528,309,581,335"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a3aba1fa9f6789d09356aec5b96d91fa8" title=" " alt="" coords="647,259,697,284"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#aff0080b2133027be2e525ca088b40e78" title=" " alt="" coords="641,765,703,791"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a28ac85a90987662e306ca8efbfe16074" title=" " alt="" coords="247,204,339,229"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a6af7eb39268127d389792cec37785666" title=" " alt="" coords="245,155,340,180"/>
<area shape="rect" href="../../df/dc9/exec_8c.html#ace32454ed0d37834dcb1cb4f8b727e6e" title=" " alt="" coords="267,303,318,328"/>
<area shape="rect" href="../../d6/d13/file_8c.html#a1dc8c87c7e48bdaaf98e9c7047928f29" title=" " alt="" coords="261,56,325,81"/>
<area shape="rect" href="../../d6/d13/file_8c.html#afff8e849fa54dea2a5a27dbb97474607" title=" " alt="" coords="262,253,323,279"/>
<area shape="rect" href="../../d6/d13/file_8c.html#ab8de757a0a9f58dcc6511ea5e46ebb88" title=" " alt="" coords="259,105,326,131"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#ad1c5f8693cb35b9605fee09eebdda640" title=" " alt="" coords="253,412,332,437"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a759600870314007ac558871239122fb7" title=" " alt="" coords="257,511,328,536"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a74e45efc661ca17c068bc283b3842e6d" title=" " alt="" coords="253,461,332,487"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#ae1e58ee11d41f643929520d8c1640da7" title=" " alt="" coords="251,360,335,385"/>
<area shape="rect" href="../../d0/d56/console_8c.html#ab508ff0f4db26fe35cd25fa648f9ee75" title=" " alt="" coords="109,155,193,180"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#ac5b5d4517586be6396b4f3b37445945a" title=" " alt="" coords="111,475,190,500"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a6f94e3b215d069b5419e87bafe80799a" title=" " alt="" coords="115,425,187,451"/>
<area shape="rect" href="../../d8/d60/init_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title=" " alt="" coords="125,253,176,279"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#aedbeff6afe5d4e22330c7e6b5e6df893" title=" " alt="" coords="118,376,183,401"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#aeaa813ddeb6a5fac3c45714c7351c526" title=" " alt="" coords="111,303,190,328"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="5,696,56,721"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title=" " alt="" coords="5,376,56,401"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a54bf714d9e898cbdcbc061b280bbfae0" title=" " alt="" coords="113,56,188,81"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#ac243c8f20f5fb2e3e257b5007af2c204" title=" " alt="" coords="113,204,189,229"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a687d939a9e4792af15db96f2c2f34378" title=" " alt="" coords="111,105,190,131"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#ab3c447f135c68e4c3c1f8d5866f6e77b" title=" " alt="" coords="533,561,576,587"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a69a135a0e8a06d9f306d77ebc0c1f7a0" title=" " alt="" coords="401,511,457,536"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#aaf98ef7cdde3a0dfb2e49919de3298b1" title=" " alt="" coords="271,721,314,747"/>
<area shape="rect" href="../../d6/d13/file_8c.html#ae557c81ab89c24219146144bb6adaa2c" title=" " alt="" coords="393,612,464,637"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a207b3008bae35596c55ec7c4fc6875eb" title=" " alt="" coords="388,461,469,487"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a77cc2edce6e78f22dd9eb377462762f2" title=" " alt="" coords="116,869,185,895"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#aa0d46fcb43667c805b84ea7e1ff6100a" title=" " alt="" coords="124,968,177,993"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a86fe524d99d69c18a335512cf3405b31" title=" " alt="" coords="123,1067,179,1092"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a57e55b2d0161d62bb99765ca3de43e35" title=" " alt="" coords="117,524,184,549"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a0b0ff95e564df3c3e8fc977226b75de7" title=" " alt="" coords="118,573,183,599"/>
<area shape="rect" href="../../d1/d8f/cat_8c.html#a90a33618884bcf5e892297879bc016ff" title=" " alt="" coords="131,919,171,944"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a5a12affe4fdfaa172d85da9a6adf98d2" title=" " alt="" coords="111,623,190,648"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a425a0efe4f459decf4b5ea14517ab3cf" title=" " alt="" coords="104,672,197,697"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#aedd6d3f148dd5c99b47900215c1ac43f" title=" " alt="" coords="124,721,177,747"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a8db9f9a2634bab29096bab0b8bc6945c" title=" " alt="" coords="121,1017,180,1043"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a8faab06cc4d48335076b368f02709ee2" title=" " alt="" coords="107,771,194,796"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a330ed2370fe27045b8bec1eb0bd7818f" title=" " alt="" coords="117,820,184,845"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a5341068f021beac8cf0032b97d231e6f" title=" " alt="" coords="517,359,592,384"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a201acc8337a2893268b61ea5a1ee0d53" title=" " alt="" coords="393,259,464,284"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a301761a27cf266e0bad483272fb31a3c" title=" " alt="" coords="533,765,576,791"/>
<area shape="rect" href="../../d7/df8/log_8c.html#ad5e79aaefb91f41b9ef6aeae7ecf4708" title=" " alt="" coords="527,815,583,840"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a11c5d62d28e8121e75235d361158156e" title=" " alt="" coords="399,815,458,840"/>
</map>
</div>

</div>
</div>
<a id="aa31ec2f79e0456737a9680270bc1841b" name="aa31ec2f79e0456737a9680270bc1841b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa31ec2f79e0456737a9680270bc1841b">&#9670;&#160;</a></span>brelse()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void brelse </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d9/dd0/structbuf.html">buf</a> *&#160;</td>
          <td class="paramname"><em>b</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/de6/bio_8c_source.html#l00121">121</a> of file <a class="el" href="../../dc/de6/bio_8c_source.html">bio.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  122</span>{</div>
<div class="line"><span class="lineno">  123</span>  <span class="keywordflow">if</span>(!<a class="code hl_function" href="../../d5/d64/defs_8h.html#afa76133bc67c6026376d630da9b53b68">holdingsleep</a>(&amp;b-&gt;<a class="code hl_variable" href="../../d9/dd0/structbuf.html#a626ad748d91d4bd7f4e65b74c73f2644">lock</a>))</div>
<div class="line"><span class="lineno">  124</span>    <a class="code hl_function" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a">panic</a>(<span class="stringliteral">&quot;brelse&quot;</span>);</div>
<div class="line"><span class="lineno">  125</span> </div>
<div class="line"><span class="lineno">  126</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#a840b479c87b1c047d7142f58e0ad0b27">releasesleep</a>(&amp;b-&gt;<a class="code hl_variable" href="../../d9/dd0/structbuf.html#a626ad748d91d4bd7f4e65b74c73f2644">lock</a>);</div>
<div class="line"><span class="lineno">  127</span> </div>
<div class="line"><span class="lineno">  128</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#afe4ef8638f1ecb962a6e67fb086ee3b8">acquire</a>(&amp;<a class="code hl_variable" href="../../dc/de6/bio_8c.html#a7725a9957148b7740449a091ea12b0e4">bcache</a>.lock);</div>
<div class="line"><span class="lineno">  129</span>  b-&gt;<a class="code hl_variable" href="../../d9/dd0/structbuf.html#aaf5efe777371aaeb9944508fd52adda5">refcnt</a>--;</div>
<div class="line"><span class="lineno">  130</span>  <span class="keywordflow">if</span> (b-&gt;<a class="code hl_variable" href="../../d9/dd0/structbuf.html#aaf5efe777371aaeb9944508fd52adda5">refcnt</a> == 0) {</div>
<div class="line"><span class="lineno">  131</span>    <span class="comment">// no one is waiting for it.</span></div>
<div class="line"><span class="lineno">  132</span>    b-&gt;<a class="code hl_variable" href="../../d9/dd0/structbuf.html#ab18c18abb22f07617619e9a74c71f51a">next</a>-&gt;<a class="code hl_variable" href="../../d9/dd0/structbuf.html#a930cab1e1b3751795d31bfd0291dff4a">prev</a> = b-&gt;<a class="code hl_variable" href="../../d9/dd0/structbuf.html#a930cab1e1b3751795d31bfd0291dff4a">prev</a>;</div>
<div class="line"><span class="lineno">  133</span>    b-&gt;<a class="code hl_variable" href="../../d9/dd0/structbuf.html#a930cab1e1b3751795d31bfd0291dff4a">prev</a>-&gt;<a class="code hl_variable" href="../../d9/dd0/structbuf.html#ab18c18abb22f07617619e9a74c71f51a">next</a> = b-&gt;<a class="code hl_variable" href="../../d9/dd0/structbuf.html#ab18c18abb22f07617619e9a74c71f51a">next</a>;</div>
<div class="line"><span class="lineno">  134</span>    b-&gt;<a class="code hl_variable" href="../../d9/dd0/structbuf.html#ab18c18abb22f07617619e9a74c71f51a">next</a> = <a class="code hl_variable" href="../../dc/de6/bio_8c.html#a7725a9957148b7740449a091ea12b0e4">bcache</a>.head.next;</div>
<div class="line"><span class="lineno">  135</span>    b-&gt;<a class="code hl_variable" href="../../d9/dd0/structbuf.html#a930cab1e1b3751795d31bfd0291dff4a">prev</a> = &amp;<a class="code hl_variable" href="../../dc/de6/bio_8c.html#a7725a9957148b7740449a091ea12b0e4">bcache</a>.head;</div>
<div class="line"><span class="lineno">  136</span>    <a class="code hl_variable" href="../../dc/de6/bio_8c.html#a7725a9957148b7740449a091ea12b0e4">bcache</a>.head.next-&gt;prev = b;</div>
<div class="line"><span class="lineno">  137</span>    <a class="code hl_variable" href="../../dc/de6/bio_8c.html#a7725a9957148b7740449a091ea12b0e4">bcache</a>.head.next = b;</div>
<div class="line"><span class="lineno">  138</span>  }</div>
<div class="line"><span class="lineno">  139</span>  </div>
<div class="line"><span class="lineno">  140</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#a4f8616948f3dbce65671f666eed1d669">release</a>(&amp;<a class="code hl_variable" href="../../dc/de6/bio_8c.html#a7725a9957148b7740449a091ea12b0e4">bcache</a>.lock);</div>
<div class="line"><span class="lineno">  141</span>}</div>
<div class="ttc" id="adefs_8h_html_a840b479c87b1c047d7142f58e0ad0b27"><div class="ttname"><a href="../../d5/d64/defs_8h.html#a840b479c87b1c047d7142f58e0ad0b27">releasesleep</a></div><div class="ttdeci">void releasesleep(struct sleeplock *)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dd1/sleeplock_8c_source.html#l00035">sleeplock.c:35</a></div></div>
<div class="ttc" id="adefs_8h_html_afa76133bc67c6026376d630da9b53b68"><div class="ttname"><a href="../../d5/d64/defs_8h.html#afa76133bc67c6026376d630da9b53b68">holdingsleep</a></div><div class="ttdeci">int holdingsleep(struct sleeplock *)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dd1/sleeplock_8c_source.html#l00045">sleeplock.c:45</a></div></div>
<div class="ttc" id="astructbuf_html_aaf5efe777371aaeb9944508fd52adda5"><div class="ttname"><a href="../../d9/dd0/structbuf.html#aaf5efe777371aaeb9944508fd52adda5">buf::refcnt</a></div><div class="ttdeci">uint refcnt</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d6d/buf_8h_source.html#l00006">buf.h:6</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_aa31ec2f79e0456737a9680270bc1841b_cgraph.png" border="0" usemap="#ad5/d64/defs_8h_aa31ec2f79e0456737a9680270bc1841b_cgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_aa31ec2f79e0456737a9680270bc1841b_cgraph" id="ad5/d64/defs_8h_aa31ec2f79e0456737a9680270bc1841b_cgraph">
<area shape="rect" title=" " alt="" coords="5,395,63,421"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="396,370,460,395"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="868,193,921,218"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="1109,295,1173,321"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#a6fdbe54cbecd8fc67d74793b27adcf05" title=" " alt="" coords="253,471,348,497"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#aa997067c2c9bfef15af6fa0a10c20f4a" title=" " alt="" coords="111,319,205,345"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="508,446,600,471"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="523,345,585,370"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="759,446,820,471"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="648,497,711,522"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="1221,497,1277,522"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="986,294,1045,319"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="986,245,1045,270"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="969,195,1061,221"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a41af0935f3989aae450cf8988cd9c3a9" title=" " alt="" coords="521,547,587,573"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a4a34d9f03e436cfa09b88f735f6ee952" title=" " alt="" coords="267,294,334,319"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_aa31ec2f79e0456737a9680270bc1841b_icgraph.png" border="0" usemap="#ad5/d64/defs_8h_aa31ec2f79e0456737a9680270bc1841b_icgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_aa31ec2f79e0456737a9680270bc1841b_icgraph" id="ad5/d64/defs_8h_aa31ec2f79e0456737a9680270bc1841b_icgraph">
<area shape="rect" title=" " alt="" coords="752,284,809,309"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#af95049367381647bc9487af49724b869" title=" " alt="" coords="646,5,698,31"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#aed28187406d84a3aa71f10c6235a03ec" title=" " alt="" coords="404,157,453,183"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a7220afa8e5f4bea540eb95879ea7df6e" title=" " alt="" coords="640,460,704,485"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a15858f4d8a4cc1def3d84d03c312836b" title=" " alt="" coords="528,309,581,335"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a3aba1fa9f6789d09356aec5b96d91fa8" title=" " alt="" coords="647,259,697,284"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#aff0080b2133027be2e525ca088b40e78" title=" " alt="" coords="641,765,703,791"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a28ac85a90987662e306ca8efbfe16074" title=" " alt="" coords="247,204,339,229"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a6af7eb39268127d389792cec37785666" title=" " alt="" coords="245,155,340,180"/>
<area shape="rect" href="../../df/dc9/exec_8c.html#ace32454ed0d37834dcb1cb4f8b727e6e" title=" " alt="" coords="267,303,318,328"/>
<area shape="rect" href="../../d6/d13/file_8c.html#a1dc8c87c7e48bdaaf98e9c7047928f29" title=" " alt="" coords="261,56,325,81"/>
<area shape="rect" href="../../d6/d13/file_8c.html#afff8e849fa54dea2a5a27dbb97474607" title=" " alt="" coords="262,253,323,279"/>
<area shape="rect" href="../../d6/d13/file_8c.html#ab8de757a0a9f58dcc6511ea5e46ebb88" title=" " alt="" coords="259,105,326,131"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#ad1c5f8693cb35b9605fee09eebdda640" title=" " alt="" coords="253,412,332,437"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a759600870314007ac558871239122fb7" title=" " alt="" coords="257,511,328,536"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a74e45efc661ca17c068bc283b3842e6d" title=" " alt="" coords="253,461,332,487"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#ae1e58ee11d41f643929520d8c1640da7" title=" " alt="" coords="251,360,335,385"/>
<area shape="rect" href="../../d0/d56/console_8c.html#ab508ff0f4db26fe35cd25fa648f9ee75" title=" " alt="" coords="109,155,193,180"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#ac5b5d4517586be6396b4f3b37445945a" title=" " alt="" coords="111,475,190,500"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a6f94e3b215d069b5419e87bafe80799a" title=" " alt="" coords="115,425,187,451"/>
<area shape="rect" href="../../d8/d60/init_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title=" " alt="" coords="125,253,176,279"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#aedbeff6afe5d4e22330c7e6b5e6df893" title=" " alt="" coords="118,376,183,401"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#aeaa813ddeb6a5fac3c45714c7351c526" title=" " alt="" coords="111,303,190,328"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="5,696,56,721"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title=" " alt="" coords="5,376,56,401"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a54bf714d9e898cbdcbc061b280bbfae0" title=" " alt="" coords="113,56,188,81"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#ac243c8f20f5fb2e3e257b5007af2c204" title=" " alt="" coords="113,204,189,229"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a687d939a9e4792af15db96f2c2f34378" title=" " alt="" coords="111,105,190,131"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#ab3c447f135c68e4c3c1f8d5866f6e77b" title=" " alt="" coords="533,561,576,587"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a69a135a0e8a06d9f306d77ebc0c1f7a0" title=" " alt="" coords="401,511,457,536"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#aaf98ef7cdde3a0dfb2e49919de3298b1" title=" " alt="" coords="271,721,314,747"/>
<area shape="rect" href="../../d6/d13/file_8c.html#ae557c81ab89c24219146144bb6adaa2c" title=" " alt="" coords="393,612,464,637"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a207b3008bae35596c55ec7c4fc6875eb" title=" " alt="" coords="388,461,469,487"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a77cc2edce6e78f22dd9eb377462762f2" title=" " alt="" coords="116,869,185,895"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#aa0d46fcb43667c805b84ea7e1ff6100a" title=" " alt="" coords="124,968,177,993"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a86fe524d99d69c18a335512cf3405b31" title=" " alt="" coords="123,1067,179,1092"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a57e55b2d0161d62bb99765ca3de43e35" title=" " alt="" coords="117,524,184,549"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a0b0ff95e564df3c3e8fc977226b75de7" title=" " alt="" coords="118,573,183,599"/>
<area shape="rect" href="../../d1/d8f/cat_8c.html#a90a33618884bcf5e892297879bc016ff" title=" " alt="" coords="131,919,171,944"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a5a12affe4fdfaa172d85da9a6adf98d2" title=" " alt="" coords="111,623,190,648"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a425a0efe4f459decf4b5ea14517ab3cf" title=" " alt="" coords="104,672,197,697"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#aedd6d3f148dd5c99b47900215c1ac43f" title=" " alt="" coords="124,721,177,747"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a8db9f9a2634bab29096bab0b8bc6945c" title=" " alt="" coords="121,1017,180,1043"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a8faab06cc4d48335076b368f02709ee2" title=" " alt="" coords="107,771,194,796"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a330ed2370fe27045b8bec1eb0bd7818f" title=" " alt="" coords="117,820,184,845"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a5341068f021beac8cf0032b97d231e6f" title=" " alt="" coords="517,359,592,384"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a201acc8337a2893268b61ea5a1ee0d53" title=" " alt="" coords="393,259,464,284"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a301761a27cf266e0bad483272fb31a3c" title=" " alt="" coords="533,765,576,791"/>
<area shape="rect" href="../../d7/df8/log_8c.html#ad5e79aaefb91f41b9ef6aeae7ecf4708" title=" " alt="" coords="527,815,583,840"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a11c5d62d28e8121e75235d361158156e" title=" " alt="" coords="399,815,458,840"/>
</map>
</div>

</div>
</div>
<a id="a1bfd775f14ad3dfee354ee3897ecd28d" name="a1bfd775f14ad3dfee354ee3897ecd28d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1bfd775f14ad3dfee354ee3897ecd28d">&#9670;&#160;</a></span>bwrite()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void bwrite </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d9/dd0/structbuf.html">buf</a> *&#160;</td>
          <td class="paramname"><em>b</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/de6/bio_8c_source.html#l00110">110</a> of file <a class="el" href="../../dc/de6/bio_8c_source.html">bio.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  111</span>{</div>
<div class="line"><span class="lineno">  112</span>  <span class="keywordflow">if</span>(!<a class="code hl_function" href="../../d5/d64/defs_8h.html#afa76133bc67c6026376d630da9b53b68">holdingsleep</a>(&amp;b-&gt;<a class="code hl_variable" href="../../d9/dd0/structbuf.html#a626ad748d91d4bd7f4e65b74c73f2644">lock</a>))</div>
<div class="line"><span class="lineno">  113</span>    <a class="code hl_function" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a">panic</a>(<span class="stringliteral">&quot;bwrite&quot;</span>);</div>
<div class="line"><span class="lineno">  114</span>  b-&gt;<a class="code hl_variable" href="../../d9/dd0/structbuf.html#ae7d6b6c34fdeadb38970efd0554aa1a9">flags</a> |= <a class="code hl_define" href="../../d6/d6d/buf_8h.html#adc32011df267adb9740bcd0abf0f0663">B_DIRTY</a>;</div>
<div class="line"><span class="lineno">  115</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#a70985c3f5b2fb79737457b5c88f5327a">iderw</a>(b);</div>
<div class="line"><span class="lineno">  116</span>}</div>
<div class="ttc" id="abuf_8h_html_adc32011df267adb9740bcd0abf0f0663"><div class="ttname"><a href="../../d6/d6d/buf_8h.html#adc32011df267adb9740bcd0abf0f0663">B_DIRTY</a></div><div class="ttdeci">#define B_DIRTY</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d6d/buf_8h_source.html#l00013">buf.h:13</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_a1bfd775f14ad3dfee354ee3897ecd28d_cgraph.png" border="0" usemap="#ad5/d64/defs_8h_a1bfd775f14ad3dfee354ee3897ecd28d_cgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_a1bfd775f14ad3dfee354ee3897ecd28d_cgraph" id="ad5/d64/defs_8h_a1bfd775f14ad3dfee354ee3897ecd28d_cgraph">
<area shape="rect" title=" " alt="" coords="5,224,63,250"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#a6fdbe54cbecd8fc67d74793b27adcf05" title=" " alt="" coords="448,199,543,224"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="1084,756,1137,782"/>
<area shape="rect" href="../../da/d9b/memide_8c.html#a7f36b008f02088c86f76e98e05b55af5" title=" " alt="" coords="111,224,164,250"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="601,452,665,478"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="1325,478,1389,503"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a41af0935f3989aae450cf8988cd9c3a9" title=" " alt="" coords="737,200,803,226"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="724,300,816,326"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="739,251,801,276"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="975,415,1036,440"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="864,351,927,376"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="1437,224,1493,250"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="1202,491,1261,516"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="1202,655,1261,680"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="1185,756,1277,782"/>
<area shape="rect" href="../../d1/db0/string_8c.html#a07f97e2ed1ce37955192d52de8f4911f" title=" " alt="" coords="212,148,295,174"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ae70cc0370342e46f6db3bec367232457" title=" " alt="" coords="227,478,280,503"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad788da91743c333b5bed7c4a0dd12365" title=" " alt="" coords="343,579,400,604"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a9fa00b0be5d3c4781048861e2506eb63" title=" " alt="" coords="456,579,535,604"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a1d9e7047d3dfb57809a2541d8387705e" title=" " alt="" coords="605,756,662,782"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a02ca0670bc1fe12e38453082631ff360" title=" " alt="" coords="591,604,676,630"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a87c90f0ab2a1b11c2b55f4e483bb8493" title=" " alt="" coords="727,554,813,579"/>
</map>
</div>

</div>
</div>
<a id="a2ca17a3161c80e3e4894ec6a96e0a281" name="a2ca17a3161c80e3e4894ec6a96e0a281"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2ca17a3161c80e3e4894ec6a96e0a281">&#9670;&#160;</a></span>chpr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int chpr </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>pid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>priority</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/dda/proc_8c_source.html#l00559">559</a> of file <a class="el" href="../../d3/dda/proc_8c_source.html">proc.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  560</span>{</div>
<div class="line"><span class="lineno">  561</span>  <span class="keyword">struct </span><a class="code hl_struct" href="../../de/d48/structproc.html">proc</a> *p;</div>
<div class="line"><span class="lineno">  562</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#afe4ef8638f1ecb962a6e67fb086ee3b8">acquire</a>(&amp;<a class="code hl_variable" href="../../d3/dda/proc_8c.html#addf39d613ca9a58e7e6080a2e454421a">ptable</a>.lock);</div>
<div class="line"><span class="lineno">  563</span>  <span class="keywordflow">for</span>(p = <a class="code hl_variable" href="../../d3/dda/proc_8c.html#addf39d613ca9a58e7e6080a2e454421a">ptable</a>.proc; p &lt; &amp;<a class="code hl_variable" href="../../d3/dda/proc_8c.html#addf39d613ca9a58e7e6080a2e454421a">ptable</a>.proc[<a class="code hl_define" href="../../d5/d33/param_8h.html#a810c5b751df5bb30588613ed91095129">NPROC</a>]; p++){</div>
<div class="line"><span class="lineno">  564</span>    <span class="keywordflow">if</span>(p-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#acf2bdf54d1f957ccbcdc987007029944">pid</a> == <a class="code hl_variable" href="../../de/d48/structproc.html#acf2bdf54d1f957ccbcdc987007029944">pid</a>){</div>
<div class="line"><span class="lineno">  565</span>      p-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#adea4145a33ca852b6b634942f29c6534">priority</a> = <a class="code hl_variable" href="../../de/d48/structproc.html#adea4145a33ca852b6b634942f29c6534">priority</a>;</div>
<div class="line"><span class="lineno">  566</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  567</span>    }</div>
<div class="line"><span class="lineno">  568</span>  }</div>
<div class="line"><span class="lineno">  569</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#a4f8616948f3dbce65671f666eed1d669">release</a>(&amp;<a class="code hl_variable" href="../../d3/dda/proc_8c.html#addf39d613ca9a58e7e6080a2e454421a">ptable</a>.lock);</div>
<div class="line"><span class="lineno">  570</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="../../de/d48/structproc.html#acf2bdf54d1f957ccbcdc987007029944">pid</a>;</div>
<div class="line"><span class="lineno">  571</span>}</div>
<div class="ttc" id="aparam_8h_html_a810c5b751df5bb30588613ed91095129"><div class="ttname"><a href="../../d5/d33/param_8h.html#a810c5b751df5bb30588613ed91095129">NPROC</a></div><div class="ttdeci">#define NPROC</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d33/param_8h_source.html#l00001">param.h:1</a></div></div>
<div class="ttc" id="aproc_8c_html_addf39d613ca9a58e7e6080a2e454421a"><div class="ttname"><a href="../../d3/dda/proc_8c.html#addf39d613ca9a58e7e6080a2e454421a">ptable</a></div><div class="ttdeci">struct @7 ptable</div></div>
<div class="ttc" id="astructproc_html_adea4145a33ca852b6b634942f29c6534"><div class="ttname"><a href="../../de/d48/structproc.html#adea4145a33ca852b6b634942f29c6534">proc::priority</a></div><div class="ttdeci">int priority</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d03/proc_8h_source.html#l00052">proc.h:52</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_a2ca17a3161c80e3e4894ec6a96e0a281_cgraph.png" border="0" usemap="#ad5/d64/defs_8h_a2ca17a3161c80e3e4894ec6a96e0a281_cgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_a2ca17a3161c80e3e4894ec6a96e0a281_cgraph" id="ad5/d64/defs_8h_a2ca17a3161c80e3e4894ec6a96e0a281_cgraph">
<area shape="rect" title=" " alt="" coords="5,119,52,145"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="100,246,164,271"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="813,94,877,119"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="212,347,304,373"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="227,246,289,271"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="463,347,524,373"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="572,195,625,221"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="352,347,415,373"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="925,270,981,295"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="690,346,749,371"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="690,94,749,119"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="673,143,765,169"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_a2ca17a3161c80e3e4894ec6a96e0a281_icgraph.png" border="0" usemap="#ad5/d64/defs_8h_a2ca17a3161c80e3e4894ec6a96e0a281_icgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_a2ca17a3161c80e3e4894ec6a96e0a281_icgraph" id="ad5/d64/defs_8h_a2ca17a3161c80e3e4894ec6a96e0a281_icgraph">
<area shape="rect" title=" " alt="" coords="128,31,175,56"/>
<area shape="rect" href="../../d0/d26/nice_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="17,5,68,31"/>
<area shape="rect" href="../../dd/d35/sysproc_8c.html#abc90a5b53d06206904d099c62efc1696" title=" " alt="" coords="5,55,80,80"/>
</map>
</div>

</div>
</div>
<a id="a795e27a0cb916cfb41411ebbb9669ddf" name="a795e27a0cb916cfb41411ebbb9669ddf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a795e27a0cb916cfb41411ebbb9669ddf">&#9670;&#160;</a></span>clearpteu()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void clearpteu </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d49/types_8h.html#ac131849542282b2c95dfeaf1f26dc010">pde_t</a> *&#160;</td>
          <td class="paramname"><em>pgdir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>uva</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/de9/vm_8c_source.html#l00303">303</a> of file <a class="el" href="../../de/de9/vm_8c_source.html">vm.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  304</span>{</div>
<div class="line"><span class="lineno">  305</span>  <a class="code hl_typedef" href="../../d2/df1/mmu_8h.html#ab23e75f764f8314a83eaff23508c2ae5">pte_t</a> *pte;</div>
<div class="line"><span class="lineno">  306</span> </div>
<div class="line"><span class="lineno">  307</span>  pte = walkpgdir(pgdir, uva, 0);</div>
<div class="line"><span class="lineno">  308</span>  <span class="keywordflow">if</span>(pte == 0)</div>
<div class="line"><span class="lineno">  309</span>    <a class="code hl_function" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a">panic</a>(<span class="stringliteral">&quot;clearpteu&quot;</span>);</div>
<div class="line"><span class="lineno">  310</span>  *pte &amp;= ~PTE_U;</div>
<div class="line"><span class="lineno">  311</span>}</div>
<div class="ttc" id="ammu_8h_html_ab23e75f764f8314a83eaff23508c2ae5"><div class="ttname"><a href="../../d2/df1/mmu_8h.html#ab23e75f764f8314a83eaff23508c2ae5">pte_t</a></div><div class="ttdeci">uint pte_t</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/df1/mmu_8h_source.html#l00104">mmu.h:104</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_a795e27a0cb916cfb41411ebbb9669ddf_cgraph.png" border="0" usemap="#ad5/d64/defs_8h_a795e27a0cb916cfb41411ebbb9669ddf_cgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_a795e27a0cb916cfb41411ebbb9669ddf_cgraph" id="ad5/d64/defs_8h_a795e27a0cb916cfb41411ebbb9669ddf_cgraph">
<area shape="rect" title=" " alt="" coords="5,170,80,196"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="128,170,181,196"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="246,196,305,221"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="841,82,900,108"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="229,94,321,120"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="369,170,433,196"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="369,246,433,272"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="481,94,573,120"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="496,246,559,272"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="732,170,793,196"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="621,196,684,221"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="625,297,681,322"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_a795e27a0cb916cfb41411ebbb9669ddf_icgraph.png" border="0" usemap="#ad5/d64/defs_8h_a795e27a0cb916cfb41411ebbb9669ddf_icgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_a795e27a0cb916cfb41411ebbb9669ddf_icgraph" id="ad5/d64/defs_8h_a795e27a0cb916cfb41411ebbb9669ddf_icgraph">
<area shape="rect" title=" " alt="" coords="329,104,404,129"/>
<area shape="rect" href="../../df/dc9/exec_8c.html#ace32454ed0d37834dcb1cb4f8b727e6e" title=" " alt="" coords="231,104,281,129"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#ac5b5d4517586be6396b4f3b37445945a" title=" " alt="" coords="104,5,183,31"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a6f94e3b215d069b5419e87bafe80799a" title=" " alt="" coords="107,55,179,80"/>
<area shape="rect" href="../../d8/d60/init_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title=" " alt="" coords="118,104,169,129"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#aedbeff6afe5d4e22330c7e6b5e6df893" title=" " alt="" coords="111,177,176,203"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#aeaa813ddeb6a5fac3c45714c7351c526" title=" " alt="" coords="104,227,183,252"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="5,31,56,56"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title=" " alt="" coords="5,177,56,203"/>
</map>
</div>

</div>
</div>
<a id="a7247ece9501e31d62cffad46ec33d7af" name="a7247ece9501e31d62cffad46ec33d7af"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7247ece9501e31d62cffad46ec33d7af">&#9670;&#160;</a></span>cmostime()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cmostime </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d3/de7/structrtcdate.html">rtcdate</a> *&#160;</td>
          <td class="paramname"><em>r</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/df6/lapic_8c_source.html#l00196">196</a> of file <a class="el" href="../../dc/df6/lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  197</span>{</div>
<div class="line"><span class="lineno">  198</span>  <span class="keyword">struct </span><a class="code hl_struct" href="../../d3/de7/structrtcdate.html">rtcdate</a> t1, t2;</div>
<div class="line"><span class="lineno">  199</span>  <span class="keywordtype">int</span> <a class="code hl_variable" href="../../d2/d5a/fs_8c.html#a0248d0bac625de5a1415f2f8c91f3343">sb</a>, bcd;</div>
<div class="line"><span class="lineno">  200</span> </div>
<div class="line"><span class="lineno">  201</span>  <a class="code hl_variable" href="../../d2/d5a/fs_8c.html#a0248d0bac625de5a1415f2f8c91f3343">sb</a> = cmos_read(<a class="code hl_define" href="../../dc/df6/lapic_8c.html#a7cacd7bee07e3e7ccb0bf85965d33fa4">CMOS_STATB</a>);</div>
<div class="line"><span class="lineno">  202</span> </div>
<div class="line"><span class="lineno">  203</span>  bcd = (<a class="code hl_variable" href="../../d2/d5a/fs_8c.html#a0248d0bac625de5a1415f2f8c91f3343">sb</a> &amp; (1 &lt;&lt; 2)) == 0;</div>
<div class="line"><span class="lineno">  204</span> </div>
<div class="line"><span class="lineno">  205</span>  <span class="comment">// make sure CMOS doesn&#39;t modify time while we read it</span></div>
<div class="line"><span class="lineno">  206</span>  <span class="keywordflow">for</span>(;;) {</div>
<div class="line"><span class="lineno">  207</span>    fill_rtcdate(&amp;t1);</div>
<div class="line"><span class="lineno">  208</span>    <span class="keywordflow">if</span>(cmos_read(<a class="code hl_define" href="../../dc/df6/lapic_8c.html#a7961582c4c0d7e087ef0c461b27d2bcb">CMOS_STATA</a>) &amp; <a class="code hl_define" href="../../dc/df6/lapic_8c.html#a2c7758749c45a1f6a3ae41bcbdfa72f3">CMOS_UIP</a>)</div>
<div class="line"><span class="lineno">  209</span>        <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  210</span>    fill_rtcdate(&amp;t2);</div>
<div class="line"><span class="lineno">  211</span>    <span class="keywordflow">if</span>(<a class="code hl_function" href="../../d5/d64/defs_8h.html#acdb4d3f48d2fb0a834722b1107d2b284">memcmp</a>(&amp;t1, &amp;t2, <span class="keyword">sizeof</span>(t1)) == 0)</div>
<div class="line"><span class="lineno">  212</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  213</span>  }</div>
<div class="line"><span class="lineno">  214</span> </div>
<div class="line"><span class="lineno">  215</span>  <span class="comment">// convert</span></div>
<div class="line"><span class="lineno">  216</span>  <span class="keywordflow">if</span>(bcd) {</div>
<div class="line"><span class="lineno">  217</span><span class="preprocessor">#define    CONV(x)     (t1.x = ((t1.x &gt;&gt; 4) * 10) + (t1.x &amp; 0xf))</span></div>
<div class="line"><span class="lineno">  218</span>    <a class="code hl_define" href="../../dc/df6/lapic_8c.html#a7d52e480824afb678582f7b21cbd739d">CONV</a>(<a class="code hl_variable" href="../../d3/de7/structrtcdate.html#affc39128483c500d77d1a012fe045664">second</a>);</div>
<div class="line"><span class="lineno">  219</span>    <a class="code hl_define" href="../../dc/df6/lapic_8c.html#a7d52e480824afb678582f7b21cbd739d">CONV</a>(<a class="code hl_variable" href="../../d3/de7/structrtcdate.html#a5984e264f332d7634912db2716472aa7">minute</a>);</div>
<div class="line"><span class="lineno">  220</span>    <a class="code hl_define" href="../../dc/df6/lapic_8c.html#a7d52e480824afb678582f7b21cbd739d">CONV</a>(<a class="code hl_variable" href="../../d3/de7/structrtcdate.html#ac601418b8ff95c35e8fddb47dd3fc77b">hour</a>  );</div>
<div class="line"><span class="lineno">  221</span>    <a class="code hl_define" href="../../dc/df6/lapic_8c.html#a7d52e480824afb678582f7b21cbd739d">CONV</a>(<a class="code hl_variable" href="../../d3/de7/structrtcdate.html#a476a4a04d68d88b1515123aa24af8a4d">day</a>   );</div>
<div class="line"><span class="lineno">  222</span>    <a class="code hl_define" href="../../dc/df6/lapic_8c.html#a7d52e480824afb678582f7b21cbd739d">CONV</a>(<a class="code hl_variable" href="../../d3/de7/structrtcdate.html#a3c509170b31d76f828681c2df54bf0b1">month</a> );</div>
<div class="line"><span class="lineno">  223</span>    <a class="code hl_define" href="../../dc/df6/lapic_8c.html#a7d52e480824afb678582f7b21cbd739d">CONV</a>(<a class="code hl_variable" href="../../d3/de7/structrtcdate.html#a143aaaa0a5fcaae876c0af5f135ea5c8">year</a>  );</div>
<div class="line"><span class="lineno">  224</span><span class="preprocessor">#undef     CONV</span></div>
<div class="line"><span class="lineno">  225</span>  }</div>
<div class="line"><span class="lineno">  226</span> </div>
<div class="line"><span class="lineno">  227</span>  *<a class="code hl_variable" href="../../d0/d56/console_8c.html#af10fa12dd785c91e29528fbdc50cf9af">r</a> = t1;</div>
<div class="line"><span class="lineno">  228</span>  <a class="code hl_variable" href="../../d0/d56/console_8c.html#af10fa12dd785c91e29528fbdc50cf9af">r</a>-&gt;year += 2000;</div>
<div class="line"><span class="lineno">  229</span>}</div>
<div class="ttc" id="aconsole_8c_html_af10fa12dd785c91e29528fbdc50cf9af"><div class="ttname"><a href="../../d0/d56/console_8c.html#af10fa12dd785c91e29528fbdc50cf9af">r</a></div><div class="ttdeci">uint r</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d56/console_8c_source.html#l00184">console.c:184</a></div></div>
<div class="ttc" id="adefs_8h_html_acdb4d3f48d2fb0a834722b1107d2b284"><div class="ttname"><a href="../../d5/d64/defs_8h.html#acdb4d3f48d2fb0a834722b1107d2b284">memcmp</a></div><div class="ttdeci">int memcmp(const void *, const void *, uint)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/db0/string_8c_source.html#l00016">string.c:16</a></div></div>
<div class="ttc" id="afs_8c_html_a0248d0bac625de5a1415f2f8c91f3343"><div class="ttname"><a href="../../d2/d5a/fs_8c.html#a0248d0bac625de5a1415f2f8c91f3343">sb</a></div><div class="ttdeci">struct superblock sb</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d5a/fs_8c_source.html#l00028">fs.c:28</a></div></div>
<div class="ttc" id="alapic_8c_html_a2c7758749c45a1f6a3ae41bcbdfa72f3"><div class="ttname"><a href="../../dc/df6/lapic_8c.html#a2c7758749c45a1f6a3ae41bcbdfa72f3">CMOS_UIP</a></div><div class="ttdeci">#define CMOS_UIP</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df6/lapic_8c_source.html#l00165">lapic.c:165</a></div></div>
<div class="ttc" id="alapic_8c_html_a7961582c4c0d7e087ef0c461b27d2bcb"><div class="ttname"><a href="../../dc/df6/lapic_8c.html#a7961582c4c0d7e087ef0c461b27d2bcb">CMOS_STATA</a></div><div class="ttdeci">#define CMOS_STATA</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df6/lapic_8c_source.html#l00163">lapic.c:163</a></div></div>
<div class="ttc" id="alapic_8c_html_a7cacd7bee07e3e7ccb0bf85965d33fa4"><div class="ttname"><a href="../../dc/df6/lapic_8c.html#a7cacd7bee07e3e7ccb0bf85965d33fa4">CMOS_STATB</a></div><div class="ttdeci">#define CMOS_STATB</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df6/lapic_8c_source.html#l00164">lapic.c:164</a></div></div>
<div class="ttc" id="alapic_8c_html_a7d52e480824afb678582f7b21cbd739d"><div class="ttname"><a href="../../dc/df6/lapic_8c.html#a7d52e480824afb678582f7b21cbd739d">CONV</a></div><div class="ttdeci">#define CONV(x)</div></div>
<div class="ttc" id="astructrtcdate_html"><div class="ttname"><a href="../../d3/de7/structrtcdate.html">rtcdate</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d96/date_8h_source.html#l00001">date.h:1</a></div></div>
<div class="ttc" id="astructrtcdate_html_a143aaaa0a5fcaae876c0af5f135ea5c8"><div class="ttname"><a href="../../d3/de7/structrtcdate.html#a143aaaa0a5fcaae876c0af5f135ea5c8">rtcdate::year</a></div><div class="ttdeci">uint year</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d96/date_8h_source.html#l00007">date.h:7</a></div></div>
<div class="ttc" id="astructrtcdate_html_a3c509170b31d76f828681c2df54bf0b1"><div class="ttname"><a href="../../d3/de7/structrtcdate.html#a3c509170b31d76f828681c2df54bf0b1">rtcdate::month</a></div><div class="ttdeci">uint month</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d96/date_8h_source.html#l00006">date.h:6</a></div></div>
<div class="ttc" id="astructrtcdate_html_a476a4a04d68d88b1515123aa24af8a4d"><div class="ttname"><a href="../../d3/de7/structrtcdate.html#a476a4a04d68d88b1515123aa24af8a4d">rtcdate::day</a></div><div class="ttdeci">uint day</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d96/date_8h_source.html#l00005">date.h:5</a></div></div>
<div class="ttc" id="astructrtcdate_html_a5984e264f332d7634912db2716472aa7"><div class="ttname"><a href="../../d3/de7/structrtcdate.html#a5984e264f332d7634912db2716472aa7">rtcdate::minute</a></div><div class="ttdeci">uint minute</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d96/date_8h_source.html#l00003">date.h:3</a></div></div>
<div class="ttc" id="astructrtcdate_html_ac601418b8ff95c35e8fddb47dd3fc77b"><div class="ttname"><a href="../../d3/de7/structrtcdate.html#ac601418b8ff95c35e8fddb47dd3fc77b">rtcdate::hour</a></div><div class="ttdeci">uint hour</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d96/date_8h_source.html#l00004">date.h:4</a></div></div>
<div class="ttc" id="astructrtcdate_html_affc39128483c500d77d1a012fe045664"><div class="ttname"><a href="../../d3/de7/structrtcdate.html#affc39128483c500d77d1a012fe045664">rtcdate::second</a></div><div class="ttdeci">uint second</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d96/date_8h_source.html#l00002">date.h:2</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_a7247ece9501e31d62cffad46ec33d7af_cgraph.png" border="0" usemap="#ad5/d64/defs_8h_a7247ece9501e31d62cffad46ec33d7af_cgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_a7247ece9501e31d62cffad46ec33d7af_cgraph" id="ad5/d64/defs_8h_a7247ece9501e31d62cffad46ec33d7af_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,84,31"/>
<area shape="rect" href="../../d1/db0/string_8c.html#aa70027bbf4ef8a7388150c5b374f9b16" title=" " alt="" coords="132,5,208,31"/>
</map>
</div>

</div>
</div>
<a id="ab508ff0f4db26fe35cd25fa648f9ee75" name="ab508ff0f4db26fe35cd25fa648f9ee75"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab508ff0f4db26fe35cd25fa648f9ee75">&#9670;&#160;</a></span>consoleinit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void consoleinit </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d56/console_8c_source.html#l00289">289</a> of file <a class="el" href="../../d0/d56/console_8c_source.html">console.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  290</span>{</div>
<div class="line"><span class="lineno">  291</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#ab56d728e6966819a0260c358d3ac3419">initlock</a>(&amp;cons.lock, <span class="stringliteral">&quot;console&quot;</span>);</div>
<div class="line"><span class="lineno">  292</span> </div>
<div class="line"><span class="lineno">  293</span>  <a class="code hl_struct" href="../../de/d6a/structdevsw.html">devsw</a>[<a class="code hl_define" href="../../d2/d4d/file_8h.html#a6c17169f464fb1a2995dbe06faa47a5f">CONSOLE</a>].<a class="code hl_variable" href="../../de/d6a/structdevsw.html#a87fd7af6c9a6fb8663fc206be7a233d4">write</a> = <a class="code hl_function" href="../../d0/d56/console_8c.html#a6af7eb39268127d389792cec37785666">consolewrite</a>;</div>
<div class="line"><span class="lineno">  294</span>  <a class="code hl_struct" href="../../de/d6a/structdevsw.html">devsw</a>[<a class="code hl_define" href="../../d2/d4d/file_8h.html#a6c17169f464fb1a2995dbe06faa47a5f">CONSOLE</a>].<a class="code hl_variable" href="../../de/d6a/structdevsw.html#a4efbe00d0031a1c9005ef2186947ea37">read</a> = <a class="code hl_function" href="../../d0/d56/console_8c.html#a28ac85a90987662e306ca8efbfe16074">consoleread</a>;</div>
<div class="line"><span class="lineno">  295</span>  cons.locking = 1;</div>
<div class="line"><span class="lineno">  296</span> </div>
<div class="line"><span class="lineno">  297</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#a63da75c0c2f0b051f2c790aea2116b63">ioapicenable</a>(<a class="code hl_define" href="../../d5/d98/traps_8h.html#a0b7569cda71298859ffb6ea55c03a36a">IRQ_KBD</a>, 0);</div>
<div class="line"><span class="lineno">  298</span>}</div>
<div class="ttc" id="aconsole_8c_html_a28ac85a90987662e306ca8efbfe16074"><div class="ttname"><a href="../../d0/d56/console_8c.html#a28ac85a90987662e306ca8efbfe16074">consoleread</a></div><div class="ttdeci">int consoleread(struct inode *ip, char *dst, int n)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d56/console_8c_source.html#l00236">console.c:236</a></div></div>
<div class="ttc" id="aconsole_8c_html_a6af7eb39268127d389792cec37785666"><div class="ttname"><a href="../../d0/d56/console_8c.html#a6af7eb39268127d389792cec37785666">consolewrite</a></div><div class="ttdeci">int consolewrite(struct inode *ip, char *buf, int n)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d56/console_8c_source.html#l00274">console.c:274</a></div></div>
<div class="ttc" id="adefs_8h_html_a63da75c0c2f0b051f2c790aea2116b63"><div class="ttname"><a href="../../d5/d64/defs_8h.html#a63da75c0c2f0b051f2c790aea2116b63">ioapicenable</a></div><div class="ttdeci">void ioapicenable(int irq, int cpu)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d61/ioapic_8c_source.html#l00068">ioapic.c:68</a></div></div>
<div class="ttc" id="afile_8h_html_a6c17169f464fb1a2995dbe06faa47a5f"><div class="ttname"><a href="../../d2/d4d/file_8h.html#a6c17169f464fb1a2995dbe06faa47a5f">CONSOLE</a></div><div class="ttdeci">#define CONSOLE</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d4d/file_8h_source.html#l00037">file.h:37</a></div></div>
<div class="ttc" id="astructdevsw_html"><div class="ttname"><a href="../../de/d6a/structdevsw.html">devsw</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d4d/file_8h_source.html#l00030">file.h:30</a></div></div>
<div class="ttc" id="astructdevsw_html_a4efbe00d0031a1c9005ef2186947ea37"><div class="ttname"><a href="../../de/d6a/structdevsw.html#a4efbe00d0031a1c9005ef2186947ea37">devsw::read</a></div><div class="ttdeci">int(* read)(struct inode *, char *, int)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d4d/file_8h_source.html#l00031">file.h:31</a></div></div>
<div class="ttc" id="astructdevsw_html_a87fd7af6c9a6fb8663fc206be7a233d4"><div class="ttname"><a href="../../de/d6a/structdevsw.html#a87fd7af6c9a6fb8663fc206be7a233d4">devsw::write</a></div><div class="ttdeci">int(* write)(struct inode *, char *, int)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d4d/file_8h_source.html#l00032">file.h:32</a></div></div>
<div class="ttc" id="atraps_8h_html_a0b7569cda71298859ffb6ea55c03a36a"><div class="ttname"><a href="../../d5/d98/traps_8h.html#a0b7569cda71298859ffb6ea55c03a36a">IRQ_KBD</a></div><div class="ttdeci">#define IRQ_KBD</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d98/traps_8h_source.html#l00033">traps.h:33</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_ab508ff0f4db26fe35cd25fa648f9ee75_cgraph.png" border="0" usemap="#ad5/d64/defs_8h_ab508ff0f4db26fe35cd25fa648f9ee75_cgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_ab508ff0f4db26fe35cd25fa648f9ee75_cgraph" id="ad5/d64/defs_8h_ab508ff0f4db26fe35cd25fa648f9ee75_cgraph">
<area shape="rect" title=" " alt="" coords="5,1183,89,1209"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a28ac85a90987662e306ca8efbfe16074" title=" " alt="" coords="139,854,231,879"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a6af7eb39268127d389792cec37785666" title=" " alt="" coords="137,1158,232,1183"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#abda07b4a007b2e888d9d783920460b89" title=" " alt="" coords="153,1207,216,1233"/>
<area shape="rect" href="../../dd/d61/ioapic_8c.html#a9688537a0879e9e2ac5a90184e2ef987" title=" " alt="" coords="137,1257,232,1282"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="1033,905,1097,930"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="1757,930,1821,955"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#aed28187406d84a3aa71f10c6235a03ec" title=" " alt="" coords="280,1057,329,1082"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a41af0935f3989aae450cf8988cd9c3a9" title=" " alt="" coords="903,601,968,626"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ae70cc0370342e46f6db3bec367232457" title=" " alt="" coords="637,702,691,727"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#ae4e29916219b9293b37f9c34220694fe" title=" " alt="" coords="633,1285,695,1310"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="1156,955,1248,981"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="1171,499,1233,525"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="1407,499,1468,525"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="1516,905,1569,930"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="1296,601,1359,626"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="1869,195,1925,221"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="1634,753,1693,778"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="1634,955,1693,981"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="1617,854,1709,879"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#aaad2d7a86d4859982dd9a132f5128ff2" title=" " alt="" coords="480,702,575,727"/>
<area shape="rect" href="../../dc/de6/bio_8c.html#a30b8d2ef2300ed8e3d879a428fe39898" title=" " alt="" coords="377,1006,432,1031"/>
<area shape="rect" href="../../d1/db0/string_8c.html#a07f97e2ed1ce37955192d52de8f4911f" title=" " alt="" coords="623,1107,705,1133"/>
<area shape="rect" href="../../dc/de6/bio_8c.html#ab5335aeb503731104314321a78a6d727" title=" " alt="" coords="635,1209,693,1234"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad788da91743c333b5bed7c4a0dd12365" title=" " alt="" coords="772,373,829,398"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a9fa00b0be5d3c4781048861e2506eb63" title=" " alt="" coords="896,347,975,373"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a1d9e7047d3dfb57809a2541d8387705e" title=" " alt="" coords="1037,195,1094,221"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a02ca0670bc1fe12e38453082631ff360" title=" " alt="" coords="1023,297,1108,322"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a87c90f0ab2a1b11c2b55f4e483bb8493" title=" " alt="" coords="1159,449,1245,474"/>
<area shape="rect" href="../../da/d9b/memide_8c.html#a7f36b008f02088c86f76e98e05b55af5" title=" " alt="" coords="501,1006,554,1031"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#a6fdbe54cbecd8fc67d74793b27adcf05" title=" " alt="" coords="753,1107,848,1133"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#aa997067c2c9bfef15af6fa0a10c20f4a" title=" " alt="" coords="753,1285,848,1310"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a4a34d9f03e436cfa09b88f735f6ee952" title=" " alt="" coords="902,1310,969,1335"/>
</map>
</div>

</div>
</div>
<a id="a9ec968a6fc407075634fe0e82a9c6862" name="a9ec968a6fc407075634fe0e82a9c6862"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9ec968a6fc407075634fe0e82a9c6862">&#9670;&#160;</a></span>consoleintr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void consoleintr </td>
          <td>(</td>
          <td class="paramtype">int(*)(void)&#160;</td>
          <td class="paramname"><em>getc</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d56/console_8c_source.html#l00192">192</a> of file <a class="el" href="../../d0/d56/console_8c_source.html">console.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  193</span>{</div>
<div class="line"><span class="lineno">  194</span>  <span class="keywordtype">int</span> c, doprocdump = 0;</div>
<div class="line"><span class="lineno">  195</span> </div>
<div class="line"><span class="lineno">  196</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#afe4ef8638f1ecb962a6e67fb086ee3b8">acquire</a>(&amp;cons.lock);</div>
<div class="line"><span class="lineno">  197</span>  <span class="keywordflow">while</span>((c = getc()) &gt;= 0){</div>
<div class="line"><span class="lineno">  198</span>    <span class="keywordflow">switch</span>(c){</div>
<div class="line"><span class="lineno">  199</span>    <span class="keywordflow">case</span> <a class="code hl_define" href="../../d0/d56/console_8c.html#ac54ae397901fe700628cafadea3c5208">C</a>(<span class="charliteral">&#39;P&#39;</span>):  <span class="comment">// Process listing.</span></div>
<div class="line"><span class="lineno">  200</span>      <span class="comment">// procdump() locks cons.lock indirectly; invoke later</span></div>
<div class="line"><span class="lineno">  201</span>      doprocdump = 1;</div>
<div class="line"><span class="lineno">  202</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  203</span>    <span class="keywordflow">case</span> <a class="code hl_define" href="../../d0/d56/console_8c.html#ac54ae397901fe700628cafadea3c5208">C</a>(<span class="charliteral">&#39;U&#39;</span>):  <span class="comment">// Kill line.</span></div>
<div class="line"><span class="lineno">  204</span>      while(<a class="code hl_variable" href="../../d0/d56/console_8c.html#ad4135e5cfd2abbf73cba6fe6cdf2e949">input</a>.<a class="code hl_variable" href="../../d0/d56/console_8c.html#ab56fa7c992b725d84916b987c3d532ea">e</a> != <a class="code hl_variable" href="../../d0/d56/console_8c.html#ad4135e5cfd2abbf73cba6fe6cdf2e949">input</a>.<a class="code hl_variable" href="../../d0/d56/console_8c.html#afdeff54db9a334718662b709641fdfe1">w</a> &amp;&amp;</div>
<div class="line"><span class="lineno">  205</span>            <a class="code hl_variable" href="../../d0/d56/console_8c.html#ad4135e5cfd2abbf73cba6fe6cdf2e949">input</a>.<a class="code hl_struct" href="../../d9/dd0/structbuf.html">buf</a>[(<a class="code hl_variable" href="../../d0/d56/console_8c.html#ad4135e5cfd2abbf73cba6fe6cdf2e949">input</a>.<a class="code hl_variable" href="../../d0/d56/console_8c.html#ab56fa7c992b725d84916b987c3d532ea">e</a>-1) % <a class="code hl_define" href="../../d0/d56/console_8c.html#a5d85434f2a29f6c3048aeac34d0ce41d">INPUT_BUF</a>] != <span class="stringliteral">&#39;\n&#39;</span>){</div>
<div class="line"><span class="lineno">  206</span>        <a class="code hl_variable" href="../../d0/d56/console_8c.html#ad4135e5cfd2abbf73cba6fe6cdf2e949">input</a>.e--;</div>
<div class="line"><span class="lineno">  207</span>        consputc(<a class="code hl_define" href="../../d0/d56/console_8c.html#a629568514359445d2fbda71d70eeb1ce">BACKSPACE</a>);</div>
<div class="line"><span class="lineno">  208</span>      }</div>
<div class="line"><span class="lineno">  209</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  210</span>    <span class="keywordflow">case</span> <a class="code hl_define" href="../../d0/d56/console_8c.html#ac54ae397901fe700628cafadea3c5208">C</a>(<span class="charliteral">&#39;H&#39;</span>): case <span class="stringliteral">&#39;\x7f&#39;</span>:  <span class="comment">// Backspace</span></div>
<div class="line"><span class="lineno">  211</span>      if(<a class="code hl_variable" href="../../d0/d56/console_8c.html#ad4135e5cfd2abbf73cba6fe6cdf2e949">input</a>.<a class="code hl_variable" href="../../d0/d56/console_8c.html#ab56fa7c992b725d84916b987c3d532ea">e</a> != <a class="code hl_variable" href="../../d0/d56/console_8c.html#ad4135e5cfd2abbf73cba6fe6cdf2e949">input</a>.<a class="code hl_variable" href="../../d0/d56/console_8c.html#afdeff54db9a334718662b709641fdfe1">w</a>){</div>
<div class="line"><span class="lineno">  212</span>        <a class="code hl_variable" href="../../d0/d56/console_8c.html#ad4135e5cfd2abbf73cba6fe6cdf2e949">input</a>.e--;</div>
<div class="line"><span class="lineno">  213</span>        consputc(<a class="code hl_define" href="../../d0/d56/console_8c.html#a629568514359445d2fbda71d70eeb1ce">BACKSPACE</a>);</div>
<div class="line"><span class="lineno">  214</span>      }</div>
<div class="line"><span class="lineno">  215</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  216</span>    <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno">  217</span>      <span class="keywordflow">if</span>(c != 0 &amp;&amp; <a class="code hl_variable" href="../../d0/d56/console_8c.html#ad4135e5cfd2abbf73cba6fe6cdf2e949">input</a>.e-<a class="code hl_variable" href="../../d0/d56/console_8c.html#ad4135e5cfd2abbf73cba6fe6cdf2e949">input</a>.r &lt; <a class="code hl_define" href="../../d0/d56/console_8c.html#a5d85434f2a29f6c3048aeac34d0ce41d">INPUT_BUF</a>){</div>
<div class="line"><span class="lineno">  218</span>        c = (c == <span class="charliteral">&#39;\r&#39;</span>) ? <span class="charliteral">&#39;\n&#39;</span> : c;</div>
<div class="line"><span class="lineno">  219</span>        <a class="code hl_variable" href="../../d0/d56/console_8c.html#ad4135e5cfd2abbf73cba6fe6cdf2e949">input</a>.buf[<a class="code hl_variable" href="../../d0/d56/console_8c.html#ad4135e5cfd2abbf73cba6fe6cdf2e949">input</a>.e++ % <a class="code hl_define" href="../../d0/d56/console_8c.html#a5d85434f2a29f6c3048aeac34d0ce41d">INPUT_BUF</a>] = c;</div>
<div class="line"><span class="lineno">  220</span>        consputc(c);</div>
<div class="line"><span class="lineno">  221</span>        <span class="keywordflow">if</span>(c == <span class="charliteral">&#39;\n&#39;</span> || c == <a class="code hl_define" href="../../d0/d56/console_8c.html#ac54ae397901fe700628cafadea3c5208">C</a>(<span class="charliteral">&#39;D&#39;</span>) || <a class="code hl_variable" href="../../d0/d56/console_8c.html#ad4135e5cfd2abbf73cba6fe6cdf2e949">input</a>.e == <a class="code hl_variable" href="../../d0/d56/console_8c.html#ad4135e5cfd2abbf73cba6fe6cdf2e949">input</a>.r+<a class="code hl_define" href="../../d0/d56/console_8c.html#a5d85434f2a29f6c3048aeac34d0ce41d">INPUT_BUF</a>){</div>
<div class="line"><span class="lineno">  222</span>          <a class="code hl_variable" href="../../d0/d56/console_8c.html#ad4135e5cfd2abbf73cba6fe6cdf2e949">input</a>.w = <a class="code hl_variable" href="../../d0/d56/console_8c.html#ad4135e5cfd2abbf73cba6fe6cdf2e949">input</a>.e;</div>
<div class="line"><span class="lineno">  223</span>          <a class="code hl_function" href="../../d5/d64/defs_8h.html#a245b56417239f499389b2e806bd99254">wakeup</a>(&amp;<a class="code hl_variable" href="../../d0/d56/console_8c.html#ad4135e5cfd2abbf73cba6fe6cdf2e949">input</a>.r);</div>
<div class="line"><span class="lineno">  224</span>        }</div>
<div class="line"><span class="lineno">  225</span>      }</div>
<div class="line"><span class="lineno">  226</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  227</span>    }</div>
<div class="line"><span class="lineno">  228</span>  }</div>
<div class="line"><span class="lineno">  229</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#a4f8616948f3dbce65671f666eed1d669">release</a>(&amp;cons.lock);</div>
<div class="line"><span class="lineno">  230</span>  <span class="keywordflow">if</span>(doprocdump) {</div>
<div class="line"><span class="lineno">  231</span>    <a class="code hl_function" href="../../d5/d64/defs_8h.html#a7f185044294ebb57521c73f723990164">procdump</a>();  <span class="comment">// now call procdump() wo. cons.lock held</span></div>
<div class="line"><span class="lineno">  232</span>  }</div>
<div class="line"><span class="lineno">  233</span>}</div>
<div class="ttc" id="aconsole_8c_html_a5d85434f2a29f6c3048aeac34d0ce41d"><div class="ttname"><a href="../../d0/d56/console_8c.html#a5d85434f2a29f6c3048aeac34d0ce41d">INPUT_BUF</a></div><div class="ttdeci">#define INPUT_BUF</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d56/console_8c_source.html#l00181">console.c:181</a></div></div>
<div class="ttc" id="aconsole_8c_html_a629568514359445d2fbda71d70eeb1ce"><div class="ttname"><a href="../../d0/d56/console_8c.html#a629568514359445d2fbda71d70eeb1ce">BACKSPACE</a></div><div class="ttdeci">#define BACKSPACE</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d56/console_8c_source.html#l00127">console.c:127</a></div></div>
<div class="ttc" id="aconsole_8c_html_ab56fa7c992b725d84916b987c3d532ea"><div class="ttname"><a href="../../d0/d56/console_8c.html#ab56fa7c992b725d84916b987c3d532ea">e</a></div><div class="ttdeci">uint e</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d56/console_8c_source.html#l00186">console.c:186</a></div></div>
<div class="ttc" id="aconsole_8c_html_ac54ae397901fe700628cafadea3c5208"><div class="ttname"><a href="../../d0/d56/console_8c.html#ac54ae397901fe700628cafadea3c5208">C</a></div><div class="ttdeci">#define C(x)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d56/console_8c_source.html#l00189">console.c:189</a></div></div>
<div class="ttc" id="aconsole_8c_html_ad4135e5cfd2abbf73cba6fe6cdf2e949"><div class="ttname"><a href="../../d0/d56/console_8c.html#ad4135e5cfd2abbf73cba6fe6cdf2e949">input</a></div><div class="ttdeci">struct @2 input</div></div>
<div class="ttc" id="aconsole_8c_html_afdeff54db9a334718662b709641fdfe1"><div class="ttname"><a href="../../d0/d56/console_8c.html#afdeff54db9a334718662b709641fdfe1">w</a></div><div class="ttdeci">uint w</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d56/console_8c_source.html#l00185">console.c:185</a></div></div>
<div class="ttc" id="adefs_8h_html_a245b56417239f499389b2e806bd99254"><div class="ttname"><a href="../../d5/d64/defs_8h.html#a245b56417239f499389b2e806bd99254">wakeup</a></div><div class="ttdeci">void wakeup(void *)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dda/proc_8c_source.html#l00469">proc.c:469</a></div></div>
<div class="ttc" id="adefs_8h_html_a7f185044294ebb57521c73f723990164"><div class="ttname"><a href="../../d5/d64/defs_8h.html#a7f185044294ebb57521c73f723990164">procdump</a></div><div class="ttdeci">void procdump(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dda/proc_8c_source.html#l00504">proc.c:504</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_a9ec968a6fc407075634fe0e82a9c6862_cgraph.png" border="0" usemap="#ad5/d64/defs_8h_a9ec968a6fc407075634fe0e82a9c6862_cgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_a9ec968a6fc407075634fe0e82a9c6862_cgraph" id="ad5/d64/defs_8h_a9ec968a6fc407075634fe0e82a9c6862_cgraph">
<area shape="rect" title=" " alt="" coords="5,69,91,94"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="253,221,317,246"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="992,170,1056,196"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a7f185044294ebb57521c73f723990164" title=" " alt="" coords="725,94,804,120"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a4a34d9f03e436cfa09b88f735f6ee952" title=" " alt="" coords="139,94,205,120"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="365,196,457,221"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="380,398,443,424"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="616,334,677,360"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="738,221,791,246"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="505,348,568,373"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="1104,322,1160,348"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="869,297,927,322"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="869,145,927,170"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="852,96,944,121"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_a9ec968a6fc407075634fe0e82a9c6862_icgraph.png" border="0" usemap="#ad5/d64/defs_8h_a9ec968a6fc407075634fe0e82a9c6862_icgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_a9ec968a6fc407075634fe0e82a9c6862_icgraph" id="ad5/d64/defs_8h_a9ec968a6fc407075634fe0e82a9c6862_icgraph">
<area shape="rect" title=" " alt="" coords="208,31,293,56"/>
<area shape="rect" href="../../dc/da9/kbd_8c.html#af3d6113fa152781400e1e0e728c55e54" title=" " alt="" coords="98,5,159,31"/>
<area shape="rect" href="../../d1/d87/uart_8c.html#aa64047002b0e84e2611ebf7dc46b7c99" title=" " alt="" coords="97,55,160,80"/>
<area shape="rect" href="../../dc/d6f/trap_8c.html#a372d166e36c086c91e5f5d81e5fead3a" title=" " alt="" coords="5,31,49,56"/>
</map>
</div>

</div>
</div>
<a id="a11f5ff2e5bcd16968a88fcbb30db5a10" name="a11f5ff2e5bcd16968a88fcbb30db5a10"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a11f5ff2e5bcd16968a88fcbb30db5a10">&#9670;&#160;</a></span>copyout()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int copyout </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d49/types_8h.html#ac131849542282b2c95dfeaf1f26dc010">pde_t</a> *&#160;</td>
          <td class="paramname"><em>pgdir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/d49/types_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td>
          <td class="paramname"><em>va</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/d49/types_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/de9/vm_8c_source.html#l00366">366</a> of file <a class="el" href="../../de/de9/vm_8c_source.html">vm.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  367</span>{</div>
<div class="line"><span class="lineno">  368</span>  <span class="keywordtype">char</span> *<a class="code hl_struct" href="../../d9/dd0/structbuf.html">buf</a>, *pa0;</div>
<div class="line"><span class="lineno">  369</span>  <a class="code hl_typedef" href="../../d9/d49/types_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> n, va0;</div>
<div class="line"><span class="lineno">  370</span> </div>
<div class="line"><span class="lineno">  371</span>  <a class="code hl_struct" href="../../d9/dd0/structbuf.html">buf</a> = (<span class="keywordtype">char</span>*)p;</div>
<div class="line"><span class="lineno">  372</span>  <span class="keywordflow">while</span>(len &gt; 0){</div>
<div class="line"><span class="lineno">  373</span>    va0 = (<a class="code hl_typedef" href="../../d9/d49/types_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>)<a class="code hl_define" href="../../d2/df1/mmu_8h.html#a687e91750055553dd2788386c6a512fb">PGROUNDDOWN</a>(va);</div>
<div class="line"><span class="lineno">  374</span>    pa0 = <a class="code hl_function" href="../../de/de9/vm_8c.html#a3436a3bf222c074c4ed4d985f0c1ecef">uva2ka</a>(pgdir, (<span class="keywordtype">char</span>*)va0);</div>
<div class="line"><span class="lineno">  375</span>    <span class="keywordflow">if</span>(pa0 == 0)</div>
<div class="line"><span class="lineno">  376</span>      <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  377</span>    n = <a class="code hl_define" href="../../d2/df1/mmu_8h.html#a5f96cb6ae6670e023c407cc2f77e1704">PGSIZE</a> - (va - va0);</div>
<div class="line"><span class="lineno">  378</span>    <span class="keywordflow">if</span>(n &gt; len)</div>
<div class="line"><span class="lineno">  379</span>      n = len;</div>
<div class="line"><span class="lineno">  380</span>    <a class="code hl_function" href="../../d5/d64/defs_8h.html#ac152fff34fe03e497d35b1d4c47f1445">memmove</a>(pa0 + (va - va0), <a class="code hl_struct" href="../../d9/dd0/structbuf.html">buf</a>, n);</div>
<div class="line"><span class="lineno">  381</span>    len -= n;</div>
<div class="line"><span class="lineno">  382</span>    <a class="code hl_struct" href="../../d9/dd0/structbuf.html">buf</a> += n;</div>
<div class="line"><span class="lineno">  383</span>    va = va0 + <a class="code hl_define" href="../../d2/df1/mmu_8h.html#a5f96cb6ae6670e023c407cc2f77e1704">PGSIZE</a>;</div>
<div class="line"><span class="lineno">  384</span>  }</div>
<div class="line"><span class="lineno">  385</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  386</span>}</div>
<div class="ttc" id="adefs_8h_html_ac152fff34fe03e497d35b1d4c47f1445"><div class="ttname"><a href="../../d5/d64/defs_8h.html#ac152fff34fe03e497d35b1d4c47f1445">memmove</a></div><div class="ttdeci">void * memmove(void *, const void *, uint)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/db0/string_8c_source.html#l00032">string.c:32</a></div></div>
<div class="ttc" id="ammu_8h_html_a687e91750055553dd2788386c6a512fb"><div class="ttname"><a href="../../d2/df1/mmu_8h.html#a687e91750055553dd2788386c6a512fb">PGROUNDDOWN</a></div><div class="ttdeci">#define PGROUNDDOWN(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/df1/mmu_8h_source.html#l00091">mmu.h:91</a></div></div>
<div class="ttc" id="avm_8c_html_a3436a3bf222c074c4ed4d985f0c1ecef"><div class="ttname"><a href="../../de/de9/vm_8c.html#a3436a3bf222c074c4ed4d985f0c1ecef">uva2ka</a></div><div class="ttdeci">char * uva2ka(pde_t *pgdir, char *uva)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/de9/vm_8c_source.html#l00350">vm.c:350</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_a11f5ff2e5bcd16968a88fcbb30db5a10_cgraph.png" border="0" usemap="#ad5/d64/defs_8h_a11f5ff2e5bcd16968a88fcbb30db5a10_cgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_a11f5ff2e5bcd16968a88fcbb30db5a10_cgraph" id="ad5/d64/defs_8h_a11f5ff2e5bcd16968a88fcbb30db5a10_cgraph">
<area shape="rect" title=" " alt="" coords="5,31,73,56"/>
<area shape="rect" href="../../d1/db0/string_8c.html#a07f97e2ed1ce37955192d52de8f4911f" title=" " alt="" coords="121,5,204,31"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a3436a3bf222c074c4ed4d985f0c1ecef" title=" " alt="" coords="131,55,195,80"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_a11f5ff2e5bcd16968a88fcbb30db5a10_icgraph.png" border="0" usemap="#ad5/d64/defs_8h_a11f5ff2e5bcd16968a88fcbb30db5a10_icgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_a11f5ff2e5bcd16968a88fcbb30db5a10_icgraph" id="ad5/d64/defs_8h_a11f5ff2e5bcd16968a88fcbb30db5a10_icgraph">
<area shape="rect" title=" " alt="" coords="329,104,397,129"/>
<area shape="rect" href="../../df/dc9/exec_8c.html#ace32454ed0d37834dcb1cb4f8b727e6e" title=" " alt="" coords="231,104,281,129"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#ac5b5d4517586be6396b4f3b37445945a" title=" " alt="" coords="104,5,183,31"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a6f94e3b215d069b5419e87bafe80799a" title=" " alt="" coords="107,55,179,80"/>
<area shape="rect" href="../../d8/d60/init_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title=" " alt="" coords="118,104,169,129"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#aedbeff6afe5d4e22330c7e6b5e6df893" title=" " alt="" coords="111,177,176,203"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#aeaa813ddeb6a5fac3c45714c7351c526" title=" " alt="" coords="104,227,183,252"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="5,31,56,56"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title=" " alt="" coords="5,177,56,203"/>
</map>
</div>

</div>
</div>
<a id="a8caec506ffa8f9386b0434e4cd5aa2b8" name="a8caec506ffa8f9386b0434e4cd5aa2b8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8caec506ffa8f9386b0434e4cd5aa2b8">&#9670;&#160;</a></span>copyuvm()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/d49/types_8h.html#ac131849542282b2c95dfeaf1f26dc010">pde_t</a> * copyuvm </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d49/types_8h.html#ac131849542282b2c95dfeaf1f26dc010">pde_t</a> *&#160;</td>
          <td class="paramname"><em>pgdir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/d49/types_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td>
          <td class="paramname"><em>sz</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/de9/vm_8c_source.html#l00316">316</a> of file <a class="el" href="../../de/de9/vm_8c_source.html">vm.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  317</span>{</div>
<div class="line"><span class="lineno">  318</span>  <a class="code hl_typedef" href="../../d9/d49/types_8h.html#ac131849542282b2c95dfeaf1f26dc010">pde_t</a> *d;</div>
<div class="line"><span class="lineno">  319</span>  <a class="code hl_typedef" href="../../d2/df1/mmu_8h.html#ab23e75f764f8314a83eaff23508c2ae5">pte_t</a> *pte;</div>
<div class="line"><span class="lineno">  320</span>  <a class="code hl_typedef" href="../../d9/d49/types_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> pa, i, flags;</div>
<div class="line"><span class="lineno">  321</span>  <span class="keywordtype">char</span> *<a class="code hl_function" href="../../de/dc0/usertests_8c.html#aa1c6e6e76813ccb29a29bb119dba668a">mem</a>;</div>
<div class="line"><span class="lineno">  322</span> </div>
<div class="line"><span class="lineno">  323</span>  <span class="keywordflow">if</span>((d = <a class="code hl_function" href="../../de/de9/vm_8c.html#a1c8a7a02e9391b5cf0984388216695c0">setupkvm</a>()) == 0)</div>
<div class="line"><span class="lineno">  324</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  325</span>  <span class="keywordflow">for</span>(i = 0; i &lt; sz; i += <a class="code hl_define" href="../../d2/df1/mmu_8h.html#a5f96cb6ae6670e023c407cc2f77e1704">PGSIZE</a>){</div>
<div class="line"><span class="lineno">  326</span>    <span class="keywordflow">if</span>((pte = walkpgdir(pgdir, (<span class="keywordtype">void</span> *) i, 0)) == 0)</div>
<div class="line"><span class="lineno">  327</span>      <a class="code hl_function" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a">panic</a>(<span class="stringliteral">&quot;copyuvm: pte should exist&quot;</span>);</div>
<div class="line"><span class="lineno">  328</span>    <span class="keywordflow">if</span>(!(*pte &amp; <a class="code hl_define" href="../../d2/df1/mmu_8h.html#a89bd860de64c44cd8ebaca8dc311b5ac">PTE_P</a>))</div>
<div class="line"><span class="lineno">  329</span>      <a class="code hl_function" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a">panic</a>(<span class="stringliteral">&quot;copyuvm: page not present&quot;</span>);</div>
<div class="line"><span class="lineno">  330</span>    pa = <a class="code hl_define" href="../../d2/df1/mmu_8h.html#a74b24f9b091875a5313370892e3f37a5">PTE_ADDR</a>(*pte);</div>
<div class="line"><span class="lineno">  331</span>    flags = <a class="code hl_define" href="../../d2/df1/mmu_8h.html#a8842a288646d28dda80a0544002f6941">PTE_FLAGS</a>(*pte);</div>
<div class="line"><span class="lineno">  332</span>    <span class="keywordflow">if</span>((<a class="code hl_function" href="../../de/dc0/usertests_8c.html#aa1c6e6e76813ccb29a29bb119dba668a">mem</a> = <a class="code hl_function" href="../../d5/d64/defs_8h.html#a5e965f6365c721b5b23c12d16d45c3dc">kalloc</a>()) == 0)</div>
<div class="line"><span class="lineno">  333</span>      <span class="keywordflow">goto</span> bad;</div>
<div class="line"><span class="lineno">  334</span>    <a class="code hl_function" href="../../d5/d64/defs_8h.html#ac152fff34fe03e497d35b1d4c47f1445">memmove</a>(<a class="code hl_function" href="../../de/dc0/usertests_8c.html#aa1c6e6e76813ccb29a29bb119dba668a">mem</a>, (<span class="keywordtype">char</span>*)<a class="code hl_define" href="../../d8/da9/memlayout_8h.html#aefd5e8b62c49bba2cf20309c7dd174e2">P2V</a>(pa), <a class="code hl_define" href="../../d2/df1/mmu_8h.html#a5f96cb6ae6670e023c407cc2f77e1704">PGSIZE</a>);</div>
<div class="line"><span class="lineno">  335</span>    <span class="keywordflow">if</span>(mappages(d, (<span class="keywordtype">void</span>*)i, <a class="code hl_define" href="../../d2/df1/mmu_8h.html#a5f96cb6ae6670e023c407cc2f77e1704">PGSIZE</a>, <a class="code hl_define" href="../../d8/da9/memlayout_8h.html#a5021188bc7da1304f27e913aee183407">V2P</a>(<a class="code hl_function" href="../../de/dc0/usertests_8c.html#aa1c6e6e76813ccb29a29bb119dba668a">mem</a>), flags) &lt; 0) {</div>
<div class="line"><span class="lineno">  336</span>      <a class="code hl_function" href="../../d5/d64/defs_8h.html#ae79d6a7d0901b7c081cfded3f916d5bd">kfree</a>(<a class="code hl_function" href="../../de/dc0/usertests_8c.html#aa1c6e6e76813ccb29a29bb119dba668a">mem</a>);</div>
<div class="line"><span class="lineno">  337</span>      <span class="keywordflow">goto</span> bad;</div>
<div class="line"><span class="lineno">  338</span>    }</div>
<div class="line"><span class="lineno">  339</span>  }</div>
<div class="line"><span class="lineno">  340</span>  <span class="keywordflow">return</span> d;</div>
<div class="line"><span class="lineno">  341</span> </div>
<div class="line"><span class="lineno">  342</span>bad:</div>
<div class="line"><span class="lineno">  343</span>  <a class="code hl_function" href="../../de/de9/vm_8c.html#aa883924e2f068c520b695cdc168e1603">freevm</a>(d);</div>
<div class="line"><span class="lineno">  344</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  345</span>}</div>
<div class="ttc" id="amemlayout_8h_html_aefd5e8b62c49bba2cf20309c7dd174e2"><div class="ttname"><a href="../../d8/da9/memlayout_8h.html#aefd5e8b62c49bba2cf20309c7dd174e2">P2V</a></div><div class="ttdeci">#define P2V(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/da9/memlayout_8h_source.html#l00012">memlayout.h:12</a></div></div>
<div class="ttc" id="ammu_8h_html_a74b24f9b091875a5313370892e3f37a5"><div class="ttname"><a href="../../d2/df1/mmu_8h.html#a74b24f9b091875a5313370892e3f37a5">PTE_ADDR</a></div><div class="ttdeci">#define PTE_ADDR(pte)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/df1/mmu_8h_source.html#l00100">mmu.h:100</a></div></div>
<div class="ttc" id="ammu_8h_html_a8842a288646d28dda80a0544002f6941"><div class="ttname"><a href="../../d2/df1/mmu_8h.html#a8842a288646d28dda80a0544002f6941">PTE_FLAGS</a></div><div class="ttdeci">#define PTE_FLAGS(pte)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/df1/mmu_8h_source.html#l00101">mmu.h:101</a></div></div>
<div class="ttc" id="ammu_8h_html_a89bd860de64c44cd8ebaca8dc311b5ac"><div class="ttname"><a href="../../d2/df1/mmu_8h.html#a89bd860de64c44cd8ebaca8dc311b5ac">PTE_P</a></div><div class="ttdeci">#define PTE_P</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/df1/mmu_8h_source.html#l00094">mmu.h:94</a></div></div>
<div class="ttc" id="atypes_8h_html_ac131849542282b2c95dfeaf1f26dc010"><div class="ttname"><a href="../../d9/d49/types_8h.html#ac131849542282b2c95dfeaf1f26dc010">pde_t</a></div><div class="ttdeci">uint pde_t</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d49/types_8h_source.html#l00004">types.h:4</a></div></div>
<div class="ttc" id="avm_8c_html_a1c8a7a02e9391b5cf0984388216695c0"><div class="ttname"><a href="../../de/de9/vm_8c.html#a1c8a7a02e9391b5cf0984388216695c0">setupkvm</a></div><div class="ttdeci">pde_t * setupkvm(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/de9/vm_8c_source.html#l00119">vm.c:119</a></div></div>
<div class="ttc" id="avm_8c_html_aa883924e2f068c520b695cdc168e1603"><div class="ttname"><a href="../../de/de9/vm_8c.html#aa883924e2f068c520b695cdc168e1603">freevm</a></div><div class="ttdeci">void freevm(pde_t *pgdir)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/de9/vm_8c_source.html#l00284">vm.c:284</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_a8caec506ffa8f9386b0434e4cd5aa2b8_cgraph.png" border="0" usemap="#ad5/d64/defs_8h_a8caec506ffa8f9386b0434e4cd5aa2b8_cgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_a8caec506ffa8f9386b0434e4cd5aa2b8_cgraph" id="ad5/d64/defs_8h_a8caec506ffa8f9386b0434e4cd5aa2b8_cgraph">
<area shape="rect" title=" " alt="" coords="5,1881,80,1906"/>
<area shape="rect" href="../../de/de9/vm_8c.html#aa883924e2f068c520b695cdc168e1603" title=" " alt="" coords="697,2170,759,2195"/>
<area shape="rect" href="../../d4/def/kalloc_8c.html#aced59ecf8411235f6dffc065236711a5" title=" " alt="" coords="976,2094,1027,2119"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="1568,1259,1621,1285"/>
<area shape="rect" href="../../d4/def/kalloc_8c.html#a5e965f6365c721b5b23c12d16d45c3dc" title=" " alt="" coords="700,2069,756,2094"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#aa1c6e6e76813ccb29a29bb119dba668a" title=" " alt="" coords="128,1665,179,1690"/>
<area shape="rect" href="../../d1/db0/string_8c.html#a07f97e2ed1ce37955192d52de8f4911f" title=" " alt="" coords="687,195,769,221"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a1c8a7a02e9391b5cf0984388216695c0" title=" " alt="" coords="552,2158,631,2183"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a6d3019ea15a9bfdc5131ae97f3623c49" title=" " alt="" coords="821,2170,909,2195"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="1093,1006,1157,1031"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="1809,1334,1873,1359"/>
<area shape="rect" href="../../db/d8a/ulib_8c.html#aa9cdc2409c15ccd5ee3b2031576f4093" title=" " alt="" coords="1091,2398,1160,2423"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="1208,1006,1300,1031"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="1223,486,1285,511"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="1459,550,1520,575"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="1348,601,1411,626"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="1921,145,1977,170"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="1686,803,1745,829"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="1686,1234,1745,1259"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="1669,1283,1761,1309"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#aaf98ef7cdde3a0dfb2e49919de3298b1" title=" " alt="" coords="235,1411,278,1437"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#acd2e1ded4bb6fce4500438bf928330f4" title=" " alt="" coords="843,1714,887,1739"/>
<area shape="rect" href="../../df/d5d/umalloc_8c.html#adebb229f063e66907017098087cbe791" title=" " alt="" coords="235,1263,279,1289"/>
<area shape="rect" href="../../d8/ddb/user_8h.html#a939cb25a305fe68aad9b365077f1a8c7" title=" " alt="" coords="228,1313,285,1338"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a650cf0caaaa8b75f653c1c92818d03a4" title=" " alt="" coords="982,1917,1021,1942"/>
<area shape="rect" href="../../df/d5d/umalloc_8c.html#ac131c16d1dcb6bea908d0237c82e981d" title=" " alt="" coords="227,1362,287,1387"/>
<area shape="rect" href="../../d5/de1/forktest_8c.html#a249680925885256274fa9f02dd51cec4" title=" " alt="" coords="231,1817,282,1842"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#af6f31822f7e737b4e414bdac1ccb59a4" title=" " alt="" coords="568,1917,615,1942"/>
<area shape="rect" href="../../d7/df8/log_8c.html#ac96aa31ffc0500e749c62c4d377c21c9" title=" " alt="" coords="554,601,629,626"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a41af0935f3989aae450cf8988cd9c3a9" title=" " alt="" coords="969,449,1034,474"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad788da91743c333b5bed7c4a0dd12365" title=" " alt="" coords="836,246,893,271"/>
<area shape="rect" href="../../d7/df8/log_8c.html#ac0f12be0ca0de555e60b27b06a57a65b" title=" " alt="" coords="833,1462,897,1487"/>
<area shape="rect" href="../../d6/d13/file_8c.html#ae557c81ab89c24219146144bb6adaa2c" title=" " alt="" coords="335,1335,405,1361"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#ab3c447f135c68e4c3c1f8d5866f6e77b" title=" " alt="" coords="453,955,496,981"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ae70cc0370342e46f6db3bec367232457" title=" " alt="" coords="701,550,755,575"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a9fa00b0be5d3c4781048861e2506eb63" title=" " alt="" coords="962,246,1041,271"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a1d9e7047d3dfb57809a2541d8387705e" title=" " alt="" coords="1097,195,1154,221"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a4a34d9f03e436cfa09b88f735f6ee952" title=" " alt="" coords="968,1513,1035,1538"/>
<area shape="rect" href="../../d1/d47/pipe_8c.html#a48642f54734698f6f881ee07723292cb" title=" " alt="" coords="826,1513,903,1538"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#aaad2d7a86d4859982dd9a132f5128ff2" title=" " alt="" coords="544,650,639,675"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a7220afa8e5f4bea540eb95879ea7df6e" title=" " alt="" coords="559,955,623,981"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#aa997067c2c9bfef15af6fa0a10c20f4a" title=" " alt="" coords="817,1006,912,1031"/>
<area shape="rect" href="../../dc/de6/bio_8c.html#a30b8d2ef2300ed8e3d879a428fe39898" title=" " alt="" coords="701,905,755,930"/>
<area shape="rect" href="../../dc/de6/bio_8c.html#ab5335aeb503731104314321a78a6d727" title=" " alt="" coords="699,1006,757,1031"/>
<area shape="rect" href="../../d7/df8/log_8c.html#a7eacb0fbebe5ce4c7d3ddea15908b13d" title=" " alt="" coords="964,1310,1039,1335"/>
<area shape="rect" href="../../d6/d13/file_8c.html#a9ef0346d08d8ed79ce2a9c03f9a4b4b2" title=" " alt="" coords="971,1714,1031,1739"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a24a91383ab80b4b8a1ef1f4df896035c" title=" " alt="" coords="978,1665,1025,1690"/>
<area shape="rect" href="../../d1/db0/string_8c.html#aca73516e4b2fdb2663e0d26f855ac3ca" title=" " alt="" coords="960,1815,1043,1841"/>
<area shape="rect" href="../../db/d8a/ulib_8c.html#a59b5e6e6105ef0e97aed266ec6fdfe60" title=" " alt="" coords="343,1866,397,1891"/>
<area shape="rect" href="../../d8/ddb/user_8h.html#ae57e95d717eb7386cd8b935a0c136abe" title=" " alt="" coords="345,1817,395,1842"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_a8caec506ffa8f9386b0434e4cd5aa2b8_icgraph.png" border="0" usemap="#ad5/d64/defs_8h_a8caec506ffa8f9386b0434e4cd5aa2b8_icgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_a8caec506ffa8f9386b0434e4cd5aa2b8_icgraph" id="ad5/d64/defs_8h_a8caec506ffa8f9386b0434e4cd5aa2b8_icgraph">
<area shape="rect" title=" " alt="" coords="743,629,817,655"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#acd2e1ded4bb6fce4500438bf928330f4" title=" " alt="" coords="651,655,695,680"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#ac5b5d4517586be6396b4f3b37445945a" title=" " alt="" coords="104,328,183,353"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a5a12affe4fdfaa172d85da9a6adf98d2" title=" " alt="" coords="379,379,458,404"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a425a0efe4f459decf4b5ea14517ab3cf" title=" " alt="" coords="372,429,465,455"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a8faab06cc4d48335076b368f02709ee2" title=" " alt="" coords="234,573,321,599"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a330ed2370fe27045b8bec1eb0bd7818f" title=" " alt="" coords="385,680,452,705"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#a7ae98824a008ffbc5506060227b6faa0" title=" " alt="" coords="252,227,303,252"/>
<area shape="rect" href="../../d5/de1/forktest_8c.html#a0ef8ccf57bc8c491407ec513b234f83c" title=" " alt="" coords="525,580,591,605"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a77a4432bc67dfb513f1c1d698c2c4ea6" title=" " alt="" coords="243,781,311,807"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a1740f29f4ce6d3060fd79a9312edc315" title=" " alt="" coords="381,731,457,756"/>
<area shape="rect" href="../../d0/d87/foo_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="533,531,583,556"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#aa1c6e6e76813ccb29a29bb119dba668a" title=" " alt="" coords="533,227,583,252"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a3208ed001a225f5d9ea3fb37f46810c7" title=" " alt="" coords="231,832,324,857"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a16ae754fb9c5622d44d0c3ce62ad7c49" title=" " alt="" coords="117,883,170,908"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a026b8c4ab2cb9af17e1c20d533981604" title=" " alt="" coords="384,933,453,959"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a06636ed0cda58c748d68e82d33d1afce" title=" " alt="" coords="243,984,312,1009"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a02e1ca3f4db5f4bf8a683a0b7c18cc43" title=" " alt="" coords="522,1035,594,1060"/>
<area shape="rect" href="../../dd/d35/sysproc_8c.html#a3b05102e512b34446a54334f916ba5cd" title=" " alt="" coords="522,629,594,655"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a6888f9f6d973f81f73091d1530ad212b" title=" " alt="" coords="539,1084,577,1109"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a98d8496ecb698b9400831f2718d805c3" title=" " alt="" coords="513,1135,603,1160"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="5,756,56,781"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title=" " alt="" coords="5,252,56,277"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#aedbeff6afe5d4e22330c7e6b5e6df893" title=" " alt="" coords="111,227,176,252"/>
<area shape="rect" href="../../d5/de1/forktest_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title=" " alt="" coords="393,580,444,605"/>
<area shape="rect" href="../../de/de9/vm_8c.html#afea0f0a82a9f9c7aae26f90b5e0836c6" title=" " alt="" coords="381,165,456,191"/>
<area shape="rect" href="../../de/de9/vm_8c.html#ac96c231d4053eaf4322c27d1f2cd9d49" title=" " alt="" coords="387,92,451,117"/>
<area shape="rect" href="../../df/dc9/exec_8c.html#ace32454ed0d37834dcb1cb4f8b727e6e" title=" " alt="" coords="252,165,303,191"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a9c16214741f4fcd088e5eea468709328" title=" " alt="" coords="240,116,315,141"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a6f94e3b215d069b5419e87bafe80799a" title=" " alt="" coords="107,153,179,179"/>
<area shape="rect" href="../../d8/d60/init_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title=" " alt="" coords="118,55,169,80"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#aeaa813ddeb6a5fac3c45714c7351c526" title=" " alt="" coords="104,104,183,129"/>
<area shape="rect" href="../../dd/d35/sysproc_8c.html#ab21d46be776cf6075a997af525a1a628" title=" " alt="" coords="106,5,181,31"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a81c8a6a0cae413bc81aa223f7f7b7205" title=" " alt="" coords="245,67,309,92"/>
</map>
</div>

</div>
</div>
<a id="abeb2bc020e7332bcde1d7beab08582d3" name="abeb2bc020e7332bcde1d7beab08582d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abeb2bc020e7332bcde1d7beab08582d3">&#9670;&#160;</a></span>cprintf()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cprintf </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>fmt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d56/console_8c_source.html#l00055">55</a> of file <a class="el" href="../../d0/d56/console_8c_source.html">console.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   56</span>{</div>
<div class="line"><span class="lineno">   57</span>  <span class="keywordtype">int</span> i, c, <a class="code hl_variable" href="../../d0/d56/console_8c.html#ae51110da3bc13ef49e32d1e2cda5d55c">locking</a>;</div>
<div class="line"><span class="lineno">   58</span>  <a class="code hl_typedef" href="../../d9/d49/types_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> *argp;</div>
<div class="line"><span class="lineno">   59</span>  <span class="keywordtype">char</span> *s;</div>
<div class="line"><span class="lineno">   60</span> </div>
<div class="line"><span class="lineno">   61</span>  <a class="code hl_variable" href="../../d0/d56/console_8c.html#ae51110da3bc13ef49e32d1e2cda5d55c">locking</a> = cons.locking;</div>
<div class="line"><span class="lineno">   62</span>  <span class="keywordflow">if</span>(<a class="code hl_variable" href="../../d0/d56/console_8c.html#ae51110da3bc13ef49e32d1e2cda5d55c">locking</a>)</div>
<div class="line"><span class="lineno">   63</span>    <a class="code hl_function" href="../../d5/d64/defs_8h.html#afe4ef8638f1ecb962a6e67fb086ee3b8">acquire</a>(&amp;cons.lock);</div>
<div class="line"><span class="lineno">   64</span> </div>
<div class="line"><span class="lineno">   65</span>  <span class="keywordflow">if</span> (fmt == 0)</div>
<div class="line"><span class="lineno">   66</span>    <a class="code hl_function" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a">panic</a>(<span class="stringliteral">&quot;null fmt&quot;</span>);</div>
<div class="line"><span class="lineno">   67</span> </div>
<div class="line"><span class="lineno">   68</span>  argp = (<a class="code hl_typedef" href="../../d9/d49/types_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>*)(<span class="keywordtype">void</span>*)(&amp;fmt + 1);</div>
<div class="line"><span class="lineno">   69</span>  <span class="keywordflow">for</span>(i = 0; (c = fmt[i] &amp; 0xff) != 0; i++){</div>
<div class="line"><span class="lineno">   70</span>    <span class="keywordflow">if</span>(c != <span class="charliteral">&#39;%&#39;</span>){</div>
<div class="line"><span class="lineno">   71</span>      consputc(c);</div>
<div class="line"><span class="lineno">   72</span>      <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">   73</span>    }</div>
<div class="line"><span class="lineno">   74</span>    c = fmt[++i] &amp; 0xff;</div>
<div class="line"><span class="lineno">   75</span>    <span class="keywordflow">if</span>(c == 0)</div>
<div class="line"><span class="lineno">   76</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">   77</span>    <span class="keywordflow">switch</span>(c){</div>
<div class="line"><span class="lineno">   78</span>    <span class="keywordflow">case</span> <span class="charliteral">&#39;d&#39;</span>:</div>
<div class="line"><span class="lineno">   79</span>      printint(*argp++, 10, 1);</div>
<div class="line"><span class="lineno">   80</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">   81</span>    <span class="keywordflow">case</span> <span class="charliteral">&#39;x&#39;</span>:</div>
<div class="line"><span class="lineno">   82</span>    <span class="keywordflow">case</span> <span class="charliteral">&#39;p&#39;</span>:</div>
<div class="line"><span class="lineno">   83</span>      printint(*argp++, 16, 0);</div>
<div class="line"><span class="lineno">   84</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">   85</span>    <span class="keywordflow">case</span> <span class="charliteral">&#39;s&#39;</span>:</div>
<div class="line"><span class="lineno">   86</span>      <span class="keywordflow">if</span>((s = (<span class="keywordtype">char</span>*)*argp++) == 0)</div>
<div class="line"><span class="lineno">   87</span>        s = <span class="stringliteral">&quot;(null)&quot;</span>;</div>
<div class="line"><span class="lineno">   88</span>      <span class="keywordflow">for</span>(; *s; s++)</div>
<div class="line"><span class="lineno">   89</span>        consputc(*s);</div>
<div class="line"><span class="lineno">   90</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">   91</span>    <span class="keywordflow">case</span> <span class="charliteral">&#39;%&#39;</span>:</div>
<div class="line"><span class="lineno">   92</span>      consputc(<span class="charliteral">&#39;%&#39;</span>);</div>
<div class="line"><span class="lineno">   93</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">   94</span>    <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno">   95</span>      <span class="comment">// Print unknown % sequence to draw attention.</span></div>
<div class="line"><span class="lineno">   96</span>      consputc(<span class="charliteral">&#39;%&#39;</span>);</div>
<div class="line"><span class="lineno">   97</span>      consputc(c);</div>
<div class="line"><span class="lineno">   98</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">   99</span>    }</div>
<div class="line"><span class="lineno">  100</span>  }</div>
<div class="line"><span class="lineno">  101</span> </div>
<div class="line"><span class="lineno">  102</span>  <span class="keywordflow">if</span>(<a class="code hl_variable" href="../../d0/d56/console_8c.html#ae51110da3bc13ef49e32d1e2cda5d55c">locking</a>)</div>
<div class="line"><span class="lineno">  103</span>    <a class="code hl_function" href="../../d5/d64/defs_8h.html#a4f8616948f3dbce65671f666eed1d669">release</a>(&amp;cons.lock);</div>
<div class="line"><span class="lineno">  104</span>}</div>
<div class="ttc" id="aconsole_8c_html_ae51110da3bc13ef49e32d1e2cda5d55c"><div class="ttname"><a href="../../d0/d56/console_8c.html#ae51110da3bc13ef49e32d1e2cda5d55c">locking</a></div><div class="ttdeci">int locking</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d56/console_8c_source.html#l00024">console.c:24</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_abeb2bc020e7332bcde1d7beab08582d3_cgraph.png" border="0" usemap="#ad5/d64/defs_8h_abeb2bc020e7332bcde1d7beab08582d3_cgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_abeb2bc020e7332bcde1d7beab08582d3_cgraph" id="ad5/d64/defs_8h_abeb2bc020e7332bcde1d7beab08582d3_cgraph">
<area shape="rect" title=" " alt="" coords="5,341,64,367"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="112,132,176,157"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="584,259,637,284"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="112,284,176,309"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="224,5,316,31"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="239,208,301,233"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="475,208,536,233"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="364,157,427,183"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="367,259,423,284"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="702,209,761,235"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="685,259,777,284"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_abeb2bc020e7332bcde1d7beab08582d3_icgraph.png" border="0" usemap="#ad5/d64/defs_8h_abeb2bc020e7332bcde1d7beab08582d3_icgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_abeb2bc020e7332bcde1d7beab08582d3_icgraph" id="ad5/d64/defs_8h_abeb2bc020e7332bcde1d7beab08582d3_icgraph">
<area shape="rect" title=" " alt="" coords="1243,1587,1301,1613"/>
<area shape="rect" href="../../de/de9/vm_8c.html#afea0f0a82a9f9c7aae26f90b5e0836c6" title=" " alt="" coords="381,398,456,423"/>
<area shape="rect" href="../../df/dc9/exec_8c.html#ace32454ed0d37834dcb1cb4f8b727e6e" title=" " alt="" coords="144,499,195,525"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a45a59a61c8799cb754b4326a32c14dc4" title=" " alt="" coords="656,803,699,829"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a301761a27cf266e0bad483272fb31a3c" title=" " alt="" coords="773,1662,816,1687"/>
<area shape="rect" href="../../dd/d61/ioapic_8c.html#abce023b98422f397abdb425b20c8ceec" title=" " alt="" coords="1119,2018,1192,2043"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="1129,979,1182,1005"/>
<area shape="rect" href="../../dc/d6f/trap_8c.html#a372d166e36c086c91e5f5d81e5fead3a" title=" " alt="" coords="272,1550,316,1575"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a7f185044294ebb57521c73f723990164" title=" " alt="" coords="1116,2067,1195,2093"/>
<area shape="rect" href="../../db/dd8/syscall_8c.html#acd6bcafe6626fe8e7d00cacdbc3cc4f1" title=" " alt="" coords="879,1917,941,1942"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a9c16214741f4fcd088e5eea468709328" title=" " alt="" coords="257,398,331,423"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#ac5b5d4517586be6396b4f3b37445945a" title=" " alt="" coords="5,621,84,646"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a6f94e3b215d069b5419e87bafe80799a" title=" " alt="" coords="9,766,81,791"/>
<area shape="rect" href="../../d8/d60/init_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title=" " alt="" coords="19,523,70,549"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#aedbeff6afe5d4e22330c7e6b5e6df893" title=" " alt="" coords="12,1031,77,1057"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#aeaa813ddeb6a5fac3c45714c7351c526" title=" " alt="" coords="5,474,84,499"/>
<area shape="rect" href="../../db/d3a/ps_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title=" " alt="" coords="523,703,573,729"/>
<area shape="rect" href="../../dd/d35/sysproc_8c.html#a9eeed93775248f221437260b177591b8" title=" " alt="" coords="513,753,583,778"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a11c5d62d28e8121e75235d361158156e" title=" " alt="" coords="648,1613,707,1638"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="763,955,827,981"/>
<area shape="rect" href="../../dc/de6/bio_8c.html#ab5335aeb503731104314321a78a6d727" title=" " alt="" coords="649,1359,706,1385"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#af95049367381647bc9487af49724b869" title=" " alt="" coords="522,1359,574,1385"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#aed28187406d84a3aa71f10c6235a03ec" title=" " alt="" coords="523,1511,573,1537"/>
<area shape="rect" href="../../d6/d13/file_8c.html#a1dc8c87c7e48bdaaf98e9c7047928f29" title=" " alt="" coords="387,1662,451,1687"/>
<area shape="rect" href="../../d6/d13/file_8c.html#ab8de757a0a9f58dcc6511ea5e46ebb88" title=" " alt="" coords="385,1537,452,1562"/>
<area shape="rect" href="../../d7/df8/log_8c.html#ac0f12be0ca0de555e60b27b06a57a65b" title=" " alt="" coords="645,905,709,930"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#aaf98ef7cdde3a0dfb2e49919de3298b1" title=" " alt="" coords="397,937,440,962"/>
<area shape="rect" href="../../d6/d13/file_8c.html#ae557c81ab89c24219146144bb6adaa2c" title=" " alt="" coords="513,1006,583,1031"/>
<area shape="rect" href="../../d6/d13/file_8c.html#a9ef0346d08d8ed79ce2a9c03f9a4b4b2" title=" " alt="" coords="647,1158,707,1183"/>
<area shape="rect" href="../../da/d9b/memide_8c.html#a7f36b008f02088c86f76e98e05b55af5" title=" " alt="" coords="521,651,575,677"/>
<area shape="rect" href="../../dc/de6/bio_8c.html#a63c899c13b176ddf80064d32225e1298" title=" " alt="" coords="390,601,447,626"/>
<area shape="rect" href="../../d4/def/kalloc_8c.html#aced59ecf8411235f6dffc065236711a5" title=" " alt="" coords="652,398,703,423"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a1b57bfa0091c9be3ccc16dbb85ce3acf" title=" " alt="" coords="132,145,207,170"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a6d3019ea15a9bfdc5131ae97f3623c49" title=" " alt="" coords="504,347,592,373"/>
<area shape="rect" href="../../de/de9/vm_8c.html#aa883924e2f068c520b695cdc168e1603" title=" " alt="" coords="387,246,450,271"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a1c8a7a02e9391b5cf0984388216695c0" title=" " alt="" coords="255,246,333,271"/>
<area shape="rect" href="../../d7/df8/log_8c.html#a7eacb0fbebe5ce4c7d3ddea15908b13d" title=" " alt="" coords="640,1207,715,1233"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ae70cc0370342e46f6db3bec367232457" title=" " alt="" coords="651,651,704,677"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a795e27a0cb916cfb41411ebbb9669ddf" title=" " alt="" coords="257,349,331,374"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a69a135a0e8a06d9f306d77ebc0c1f7a0" title=" " alt="" coords="882,729,938,754"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a5341068f021beac8cf0032b97d231e6f" title=" " alt="" coords="993,754,1068,779"/>
<area shape="rect" href="../../d7/df8/log_8c.html#ad5e79aaefb91f41b9ef6aeae7ecf4708" title=" " alt="" coords="767,1613,823,1638"/>
<area shape="rect" href="../../de/de9/vm_8c.html#ac96c231d4053eaf4322c27d1f2cd9d49" title=" " alt="" coords="999,803,1063,829"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#ae4e29916219b9293b37f9c34220694fe" title=" " alt="" coords="517,1662,579,1687"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a201acc8337a2893268b61ea5a1ee0d53" title=" " alt="" coords="875,399,945,425"/>
<area shape="rect" href="../../dd/d06/mp_8c.html#a2fd0b66a17c5347541448ef906b7b2a2" title=" " alt="" coords="1002,853,1059,878"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="1000,954,1061,979"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="882,1055,938,1081"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="763,1081,827,1106"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad788da91743c333b5bed7c4a0dd12365" title=" " alt="" coords="766,653,823,678"/>
</map>
</div>

</div>
</div>
<a id="a1e777db371a84ab92eb05662e4fa12d4" name="a1e777db371a84ab92eb05662e4fa12d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1e777db371a84ab92eb05662e4fa12d4">&#9670;&#160;</a></span>cps()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cps </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/dda/proc_8c_source.html#l00537">537</a> of file <a class="el" href="../../d3/dda/proc_8c_source.html">proc.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  538</span>{</div>
<div class="line"><span class="lineno">  539</span><span class="keyword">struct </span><a class="code hl_struct" href="../../de/d48/structproc.html">proc</a> *p;</div>
<div class="line"><span class="lineno">  540</span><span class="comment">//Enables interrupts on this processor.</span></div>
<div class="line"><span class="lineno">  541</span>sti();</div>
<div class="line"><span class="lineno">  542</span> </div>
<div class="line"><span class="lineno">  543</span><span class="comment">//Loop over process table looking for process with pid.</span></div>
<div class="line"><span class="lineno">  544</span><a class="code hl_function" href="../../d5/d64/defs_8h.html#afe4ef8638f1ecb962a6e67fb086ee3b8">acquire</a>(&amp;<a class="code hl_variable" href="../../d3/dda/proc_8c.html#addf39d613ca9a58e7e6080a2e454421a">ptable</a>.lock);</div>
<div class="line"><span class="lineno">  545</span><a class="code hl_function" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6">cprintf</a>(<span class="stringliteral">&quot;name \t pid \t state \t priority \n&quot;</span>);</div>
<div class="line"><span class="lineno">  546</span><span class="keywordflow">for</span>(p = <a class="code hl_variable" href="../../d3/dda/proc_8c.html#addf39d613ca9a58e7e6080a2e454421a">ptable</a>.proc; p &lt; &amp;<a class="code hl_variable" href="../../d3/dda/proc_8c.html#addf39d613ca9a58e7e6080a2e454421a">ptable</a>.proc[<a class="code hl_define" href="../../d5/d33/param_8h.html#a810c5b751df5bb30588613ed91095129">NPROC</a>]; p++){</div>
<div class="line"><span class="lineno">  547</span>  <span class="keywordflow">if</span>(p-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#a0f2fe91548a1382672ae26e29ca9e736">state</a> == <a class="code hl_enumvalue" href="../../df/d03/proc_8h.html#aa1ced7d2b60040fded3fa873d0c03ba7a488282601451a751e0f0e770b15d4235">SLEEPING</a>)</div>
<div class="line"><span class="lineno">  548</span>    <a class="code hl_function" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6">cprintf</a>(<span class="stringliteral">&quot;%s \t %d \t SLEEPING \t %d \n &quot;</span>, p-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#ac04af53e17d24b90c3cbfab56d658d62">name</a>,p-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#acf2bdf54d1f957ccbcdc987007029944">pid</a>,p-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#adea4145a33ca852b6b634942f29c6534">priority</a>);</div>
<div class="line"><span class="lineno">  549</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span>(p-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#a0f2fe91548a1382672ae26e29ca9e736">state</a> == <a class="code hl_enumvalue" href="../../df/d03/proc_8h.html#aa1ced7d2b60040fded3fa873d0c03ba7a1061be6c3fb88d32829cba6f6b2be304">RUNNING</a>)</div>
<div class="line"><span class="lineno">  550</span>    <a class="code hl_function" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6">cprintf</a>(<span class="stringliteral">&quot;%s \t %d \t RUNNING \t %d \n &quot;</span>, p-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#ac04af53e17d24b90c3cbfab56d658d62">name</a>,p-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#acf2bdf54d1f957ccbcdc987007029944">pid</a>,p-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#adea4145a33ca852b6b634942f29c6534">priority</a>);</div>
<div class="line"><span class="lineno">  551</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span>(p-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#a0f2fe91548a1382672ae26e29ca9e736">state</a> == <a class="code hl_enumvalue" href="../../df/d03/proc_8h.html#aa1ced7d2b60040fded3fa873d0c03ba7a269b90433e40460a2c0044a0b3e15694">RUNNABLE</a>)</div>
<div class="line"><span class="lineno">  552</span>    <a class="code hl_function" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6">cprintf</a>(<span class="stringliteral">&quot;%s \t %d \t RUNNABLE \t %d \n &quot;</span>, p-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#ac04af53e17d24b90c3cbfab56d658d62">name</a>,p-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#acf2bdf54d1f957ccbcdc987007029944">pid</a>,p-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#adea4145a33ca852b6b634942f29c6534">priority</a>);</div>
<div class="line"><span class="lineno">  553</span>}</div>
<div class="line"><span class="lineno">  554</span><a class="code hl_function" href="../../d5/d64/defs_8h.html#a4f8616948f3dbce65671f666eed1d669">release</a>(&amp;<a class="code hl_variable" href="../../d3/dda/proc_8c.html#addf39d613ca9a58e7e6080a2e454421a">ptable</a>.lock);</div>
<div class="line"><span class="lineno">  555</span><span class="keywordflow">return</span> 23;</div>
<div class="line"><span class="lineno">  556</span>}</div>
<div class="ttc" id="aproc_8h_html_aa1ced7d2b60040fded3fa873d0c03ba7a1061be6c3fb88d32829cba6f6b2be304"><div class="ttname"><a href="../../df/d03/proc_8h.html#aa1ced7d2b60040fded3fa873d0c03ba7a1061be6c3fb88d32829cba6f6b2be304">RUNNING</a></div><div class="ttdeci">@ RUNNING</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d03/proc_8h_source.html#l00035">proc.h:35</a></div></div>
<div class="ttc" id="aproc_8h_html_aa1ced7d2b60040fded3fa873d0c03ba7a269b90433e40460a2c0044a0b3e15694"><div class="ttname"><a href="../../df/d03/proc_8h.html#aa1ced7d2b60040fded3fa873d0c03ba7a269b90433e40460a2c0044a0b3e15694">RUNNABLE</a></div><div class="ttdeci">@ RUNNABLE</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d03/proc_8h_source.html#l00035">proc.h:35</a></div></div>
<div class="ttc" id="aproc_8h_html_aa1ced7d2b60040fded3fa873d0c03ba7a488282601451a751e0f0e770b15d4235"><div class="ttname"><a href="../../df/d03/proc_8h.html#aa1ced7d2b60040fded3fa873d0c03ba7a488282601451a751e0f0e770b15d4235">SLEEPING</a></div><div class="ttdeci">@ SLEEPING</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d03/proc_8h_source.html#l00035">proc.h:35</a></div></div>
<div class="ttc" id="astructproc_html_a0f2fe91548a1382672ae26e29ca9e736"><div class="ttname"><a href="../../de/d48/structproc.html#a0f2fe91548a1382672ae26e29ca9e736">proc::state</a></div><div class="ttdeci">enum procstate state</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d03/proc_8h_source.html#l00042">proc.h:42</a></div></div>
<div class="ttc" id="astructproc_html_ac04af53e17d24b90c3cbfab56d658d62"><div class="ttname"><a href="../../de/d48/structproc.html#ac04af53e17d24b90c3cbfab56d658d62">proc::name</a></div><div class="ttdeci">char name[16]</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d03/proc_8h_source.html#l00051">proc.h:51</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_a1e777db371a84ab92eb05662e4fa12d4_cgraph.png" border="0" usemap="#ad5/d64/defs_8h_a1e777db371a84ab92eb05662e4fa12d4_cgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_a1e777db371a84ab92eb05662e4fa12d4_cgraph" id="ad5/d64/defs_8h_a1e777db371a84ab92eb05662e4fa12d4_cgraph">
<area shape="rect" title=" " alt="" coords="5,43,48,69"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="96,271,160,297"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="686,119,745,145"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="809,119,873,145"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="208,371,300,397"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="223,322,285,347"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="459,322,520,347"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="568,221,621,246"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="348,423,411,449"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="921,322,977,347"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="686,322,745,347"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="669,221,761,246"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_a1e777db371a84ab92eb05662e4fa12d4_icgraph.png" border="0" usemap="#ad5/d64/defs_8h_a1e777db371a84ab92eb05662e4fa12d4_icgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_a1e777db371a84ab92eb05662e4fa12d4_icgraph" id="ad5/d64/defs_8h_a1e777db371a84ab92eb05662e4fa12d4_icgraph">
<area shape="rect" title=" " alt="" coords="124,31,167,56"/>
<area shape="rect" href="../../db/d3a/ps_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title=" " alt="" coords="15,5,66,31"/>
<area shape="rect" href="../../dd/d35/sysproc_8c.html#a9eeed93775248f221437260b177591b8" title=" " alt="" coords="5,55,76,80"/>
</map>
</div>

</div>
</div>
<a id="a1444de2903d3d2624a50de058d19c635" name="a1444de2903d3d2624a50de058d19c635"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1444de2903d3d2624a50de058d19c635">&#9670;&#160;</a></span>cpuid()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cpuid </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/dda/proc_8c_source.html#l00031">31</a> of file <a class="el" href="../../d3/dda/proc_8c_source.html">proc.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   31</span>        {</div>
<div class="line"><span class="lineno">   32</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160">mycpu</a>()-<a class="code hl_variable" href="../../dd/d06/mp_8c.html#a6d2633e73724907b582dfe6938ed7bb9">cpus</a>;</div>
<div class="line"><span class="lineno">   33</span>}</div>
<div class="ttc" id="amp_8c_html_a6d2633e73724907b582dfe6938ed7bb9"><div class="ttname"><a href="../../dd/d06/mp_8c.html#a6d2633e73724907b582dfe6938ed7bb9">cpus</a></div><div class="ttdeci">struct cpu cpus[NCPU]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d06/mp_8c_source.html#l00014">mp.c:14</a></div></div>
<div class="ttc" id="aproc_8c_html_ad427959ad025dabd8cd393b27ec39160"><div class="ttname"><a href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160">mycpu</a></div><div class="ttdeci">struct cpu * mycpu(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dda/proc_8c_source.html#l00038">proc.c:38</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_a1444de2903d3d2624a50de058d19c635_cgraph.png" border="0" usemap="#ad5/d64/defs_8h_a1444de2903d3d2624a50de058d19c635_cgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_a1444de2903d3d2624a50de058d19c635_cgraph" id="ad5/d64/defs_8h_a1444de2903d3d2624a50de058d19c635_cgraph">
<area shape="rect" title=" " alt="" coords="5,119,59,145"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="107,119,168,145"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="334,145,393,170"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="216,246,269,271"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="334,246,393,271"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="317,295,409,321"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="457,195,521,221"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="457,283,521,309"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="569,195,661,221"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="584,245,647,270"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="709,145,772,170"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="713,358,769,383"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_a1444de2903d3d2624a50de058d19c635_icgraph.png" border="0" usemap="#ad5/d64/defs_8h_a1444de2903d3d2624a50de058d19c635_icgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_a1444de2903d3d2624a50de058d19c635_icgraph" id="ad5/d64/defs_8h_a1444de2903d3d2624a50de058d19c635_icgraph">
<area shape="rect" title=" " alt="" coords="113,31,167,56"/>
<area shape="rect" href="../../de/de9/vm_8c.html#aaf5b2814a1dbf3ef0803dff58e0a76dc" title=" " alt="" coords="5,5,65,31"/>
<area shape="rect" href="../../dc/d6f/trap_8c.html#a372d166e36c086c91e5f5d81e5fead3a" title=" " alt="" coords="13,55,57,80"/>
</map>
</div>

</div>
</div>
<a id="ac45969a8875b6dc87245e0a642aa2d8d" name="ac45969a8875b6dc87245e0a642aa2d8d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac45969a8875b6dc87245e0a642aa2d8d">&#9670;&#160;</a></span>deallocuvm()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int deallocuvm </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d49/types_8h.html#ac131849542282b2c95dfeaf1f26dc010">pde_t</a> *&#160;</td>
          <td class="paramname"><em>pgdir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/d49/types_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td>
          <td class="paramname"><em>oldsz</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/d49/types_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td>
          <td class="paramname"><em>newsz</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/de9/vm_8c_source.html#l00256">256</a> of file <a class="el" href="../../de/de9/vm_8c_source.html">vm.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  257</span>{</div>
<div class="line"><span class="lineno">  258</span>  <a class="code hl_typedef" href="../../d2/df1/mmu_8h.html#ab23e75f764f8314a83eaff23508c2ae5">pte_t</a> *pte;</div>
<div class="line"><span class="lineno">  259</span>  <a class="code hl_typedef" href="../../d9/d49/types_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> a, pa;</div>
<div class="line"><span class="lineno">  260</span> </div>
<div class="line"><span class="lineno">  261</span>  <span class="keywordflow">if</span>(newsz &gt;= oldsz)</div>
<div class="line"><span class="lineno">  262</span>    <span class="keywordflow">return</span> oldsz;</div>
<div class="line"><span class="lineno">  263</span> </div>
<div class="line"><span class="lineno">  264</span>  a = <a class="code hl_define" href="../../d2/df1/mmu_8h.html#affa8cdfbd1c15dafc9f3af3a7b641f80">PGROUNDUP</a>(newsz);</div>
<div class="line"><span class="lineno">  265</span>  <span class="keywordflow">for</span>(; a  &lt; oldsz; a += <a class="code hl_define" href="../../d2/df1/mmu_8h.html#a5f96cb6ae6670e023c407cc2f77e1704">PGSIZE</a>){</div>
<div class="line"><span class="lineno">  266</span>    pte = walkpgdir(pgdir, (<span class="keywordtype">char</span>*)a, 0);</div>
<div class="line"><span class="lineno">  267</span>    <span class="keywordflow">if</span>(!pte)</div>
<div class="line"><span class="lineno">  268</span>      a = <a class="code hl_define" href="../../d2/df1/mmu_8h.html#a2e162e8ad6bc81877dd299db9fc87664">PGADDR</a>(<a class="code hl_define" href="../../d2/df1/mmu_8h.html#a110662636733266a8820e15fd32995b7">PDX</a>(a) + 1, 0, 0) - <a class="code hl_define" href="../../d2/df1/mmu_8h.html#a5f96cb6ae6670e023c407cc2f77e1704">PGSIZE</a>;</div>
<div class="line"><span class="lineno">  269</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span>((*pte &amp; <a class="code hl_define" href="../../d2/df1/mmu_8h.html#a89bd860de64c44cd8ebaca8dc311b5ac">PTE_P</a>) != 0){</div>
<div class="line"><span class="lineno">  270</span>      pa = <a class="code hl_define" href="../../d2/df1/mmu_8h.html#a74b24f9b091875a5313370892e3f37a5">PTE_ADDR</a>(*pte);</div>
<div class="line"><span class="lineno">  271</span>      <span class="keywordflow">if</span>(pa == 0)</div>
<div class="line"><span class="lineno">  272</span>        <a class="code hl_function" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a">panic</a>(<span class="stringliteral">&quot;kfree&quot;</span>);</div>
<div class="line"><span class="lineno">  273</span>      <span class="keywordtype">char</span> *v = <a class="code hl_define" href="../../d8/da9/memlayout_8h.html#aefd5e8b62c49bba2cf20309c7dd174e2">P2V</a>(pa);</div>
<div class="line"><span class="lineno">  274</span>      <a class="code hl_function" href="../../d5/d64/defs_8h.html#ae79d6a7d0901b7c081cfded3f916d5bd">kfree</a>(v);</div>
<div class="line"><span class="lineno">  275</span>      *pte = 0;</div>
<div class="line"><span class="lineno">  276</span>    }</div>
<div class="line"><span class="lineno">  277</span>  }</div>
<div class="line"><span class="lineno">  278</span>  <span class="keywordflow">return</span> newsz;</div>
<div class="line"><span class="lineno">  279</span>}</div>
<div class="ttc" id="ammu_8h_html_a110662636733266a8820e15fd32995b7"><div class="ttname"><a href="../../d2/df1/mmu_8h.html#a110662636733266a8820e15fd32995b7">PDX</a></div><div class="ttdeci">#define PDX(va)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/df1/mmu_8h_source.html#l00074">mmu.h:74</a></div></div>
<div class="ttc" id="ammu_8h_html_a2e162e8ad6bc81877dd299db9fc87664"><div class="ttname"><a href="../../d2/df1/mmu_8h.html#a2e162e8ad6bc81877dd299db9fc87664">PGADDR</a></div><div class="ttdeci">#define PGADDR(d, t, o)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/df1/mmu_8h_source.html#l00080">mmu.h:80</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_ac45969a8875b6dc87245e0a642aa2d8d_cgraph.png" border="0" usemap="#ad5/d64/defs_8h_ac45969a8875b6dc87245e0a642aa2d8d_cgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_ac45969a8875b6dc87245e0a642aa2d8d_cgraph" id="ad5/d64/defs_8h_ac45969a8875b6dc87245e0a642aa2d8d_cgraph">
<area shape="rect" title=" " alt="" coords="5,411,93,436"/>
<area shape="rect" href="../../d4/def/kalloc_8c.html#aced59ecf8411235f6dffc065236711a5" title=" " alt="" coords="141,284,192,309"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="717,411,771,436"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="243,284,307,309"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="959,183,1023,208"/>
<area shape="rect" href="../../db/d8a/ulib_8c.html#aa9cdc2409c15ccd5ee3b2031576f4093" title=" " alt="" coords="240,5,309,31"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="357,259,449,284"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="372,157,435,183"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="608,271,669,296"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="497,259,560,284"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="1071,208,1127,233"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="835,284,894,309"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="835,333,894,359"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="819,435,911,460"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_ac45969a8875b6dc87245e0a642aa2d8d_icgraph.png" border="0" usemap="#ad5/d64/defs_8h_ac45969a8875b6dc87245e0a642aa2d8d_icgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_ac45969a8875b6dc87245e0a642aa2d8d_icgraph" id="ad5/d64/defs_8h_ac45969a8875b6dc87245e0a642aa2d8d_icgraph">
<area shape="rect" title=" " alt="" coords="1072,40,1160,65"/>
<area shape="rect" href="../../de/de9/vm_8c.html#afea0f0a82a9f9c7aae26f90b5e0836c6" title=" " alt="" coords="353,40,428,65"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a9c16214741f4fcd088e5eea468709328" title=" " alt="" coords="231,5,305,31"/>
<area shape="rect" href="../../de/de9/vm_8c.html#aa883924e2f068c520b695cdc168e1603" title=" " alt="" coords="961,204,1024,229"/>
<area shape="rect" href="../../df/dc9/exec_8c.html#ace32454ed0d37834dcb1cb4f8b727e6e" title=" " alt="" coords="243,131,293,156"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#ac5b5d4517586be6396b4f3b37445945a" title=" " alt="" coords="104,471,183,496"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a6f94e3b215d069b5419e87bafe80799a" title=" " alt="" coords="107,168,179,193"/>
<area shape="rect" href="../../d8/d60/init_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title=" " alt="" coords="118,69,169,95"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#aedbeff6afe5d4e22330c7e6b5e6df893" title=" " alt="" coords="111,293,176,319"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#aeaa813ddeb6a5fac3c45714c7351c526" title=" " alt="" coords="104,119,183,144"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="5,775,56,800"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title=" " alt="" coords="5,256,56,281"/>
<area shape="rect" href="../../dd/d35/sysproc_8c.html#ab21d46be776cf6075a997af525a1a628" title=" " alt="" coords="106,5,181,31"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a1b57bfa0091c9be3ccc16dbb85ce3acf" title=" " alt="" coords="712,293,787,319"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a1c8a7a02e9391b5cf0984388216695c0" title=" " alt="" coords="835,204,913,229"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#af6f31822f7e737b4e414bdac1ccb59a4" title=" " alt="" coords="617,815,664,840"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#acd2e1ded4bb6fce4500438bf928330f4" title=" " alt="" coords="619,668,663,693"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a5a12affe4fdfaa172d85da9a6adf98d2" title=" " alt="" coords="483,840,562,865"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a425a0efe4f459decf4b5ea14517ab3cf" title=" " alt="" coords="476,889,569,915"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a8faab06cc4d48335076b368f02709ee2" title=" " alt="" coords="479,939,566,964"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a330ed2370fe27045b8bec1eb0bd7818f" title=" " alt="" coords="489,988,556,1013"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#a7ae98824a008ffbc5506060227b6faa0" title=" " alt="" coords="243,219,293,244"/>
<area shape="rect" href="../../d5/de1/forktest_8c.html#a0ef8ccf57bc8c491407ec513b234f83c" title=" " alt="" coords="489,445,556,471"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a77a4432bc67dfb513f1c1d698c2c4ea6" title=" " alt="" coords="489,1087,557,1112"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a1740f29f4ce6d3060fd79a9312edc315" title=" " alt="" coords="485,1136,561,1161"/>
<area shape="rect" href="../../d0/d87/foo_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="497,1037,548,1063"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#aa1c6e6e76813ccb29a29bb119dba668a" title=" " alt="" coords="497,293,548,319"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a3208ed001a225f5d9ea3fb37f46810c7" title=" " alt="" coords="476,495,569,520"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a16ae754fb9c5622d44d0c3ce62ad7c49" title=" " alt="" coords="496,544,549,569"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a026b8c4ab2cb9af17e1c20d533981604" title=" " alt="" coords="488,593,557,619"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a06636ed0cda58c748d68e82d33d1afce" title=" " alt="" coords="488,643,557,668"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a02e1ca3f4db5f4bf8a683a0b7c18cc43" title=" " alt="" coords="487,692,559,717"/>
<area shape="rect" href="../../dd/d35/sysproc_8c.html#a3b05102e512b34446a54334f916ba5cd" title=" " alt="" coords="487,344,559,369"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a6888f9f6d973f81f73091d1530ad212b" title=" " alt="" coords="503,741,542,767"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a98d8496ecb698b9400831f2718d805c3" title=" " alt="" coords="478,791,567,816"/>
<area shape="rect" href="../../d5/de1/forktest_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title=" " alt="" coords="365,445,416,471"/>
<area shape="rect" href="../../de/de9/vm_8c.html#ac96c231d4053eaf4322c27d1f2cd9d49" title=" " alt="" coords="359,293,423,319"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a81c8a6a0cae413bc81aa223f7f7b7205" title=" " alt="" coords="236,281,300,307"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a893bf6891e427f310b43981bf8e737ea" title=" " alt="" coords="712,192,787,217"/>
<area shape="rect" href="../../dd/d35/sysproc_8c.html#ad202e06addda05ba6fe60f05d3f61913" title=" " alt="" coords="485,1288,560,1313"/>
</map>
</div>

</div>
</div>
<a id="ae4ccea0aa02557162963e597737f665a" name="ae4ccea0aa02557162963e597737f665a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae4ccea0aa02557162963e597737f665a">&#9670;&#160;</a></span>dirlink()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int dirlink </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d0/df8/structinode.html">inode</a> *&#160;</td>
          <td class="paramname"><em>dp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/d49/types_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td>
          <td class="paramname"><em>inum</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d2/d5a/fs_8c_source.html#l00552">552</a> of file <a class="el" href="../../d2/d5a/fs_8c_source.html">fs.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  553</span>{</div>
<div class="line"><span class="lineno">  554</span>  <span class="keywordtype">int</span> off;</div>
<div class="line"><span class="lineno">  555</span>  <span class="keyword">struct </span><a class="code hl_struct" href="../../d5/de2/structdirent.html">dirent</a> de;</div>
<div class="line"><span class="lineno">  556</span>  <span class="keyword">struct </span><a class="code hl_struct" href="../../d0/df8/structinode.html">inode</a> *ip;</div>
<div class="line"><span class="lineno">  557</span> </div>
<div class="line"><span class="lineno">  558</span>  <span class="comment">// Check that name is not present.</span></div>
<div class="line"><span class="lineno">  559</span>  <span class="keywordflow">if</span>((ip = <a class="code hl_function" href="../../d2/d5a/fs_8c.html#a5341068f021beac8cf0032b97d231e6f">dirlookup</a>(dp, <a class="code hl_variable" href="../../de/dc0/usertests_8c.html#aee754febd402311e2a552cb0d6ab6629">name</a>, 0)) != 0){</div>
<div class="line"><span class="lineno">  560</span>    <a class="code hl_function" href="../../d2/d5a/fs_8c.html#ab3c447f135c68e4c3c1f8d5866f6e77b">iput</a>(ip);</div>
<div class="line"><span class="lineno">  561</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  562</span>  }</div>
<div class="line"><span class="lineno">  563</span> </div>
<div class="line"><span class="lineno">  564</span>  <span class="comment">// Look for an empty dirent.</span></div>
<div class="line"><span class="lineno">  565</span>  <span class="keywordflow">for</span>(off = 0; off &lt; dp-&gt;<a class="code hl_variable" href="../../d0/df8/structinode.html#a918af769c48a8ca8afac057bf83d12de">size</a>; off += <span class="keyword">sizeof</span>(de)){</div>
<div class="line"><span class="lineno">  566</span>    <span class="keywordflow">if</span>(<a class="code hl_function" href="../../d2/d5a/fs_8c.html#a3aba1fa9f6789d09356aec5b96d91fa8">readi</a>(dp, (<span class="keywordtype">char</span>*)&amp;de, off, <span class="keyword">sizeof</span>(de)) != <span class="keyword">sizeof</span>(de))</div>
<div class="line"><span class="lineno">  567</span>      <a class="code hl_function" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a">panic</a>(<span class="stringliteral">&quot;dirlink read&quot;</span>);</div>
<div class="line"><span class="lineno">  568</span>    <span class="keywordflow">if</span>(de.inum == 0)</div>
<div class="line"><span class="lineno">  569</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  570</span>  }</div>
<div class="line"><span class="lineno">  571</span> </div>
<div class="line"><span class="lineno">  572</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#a66107cd2364627727a36cef6c773b39c">strncpy</a>(de.name, <a class="code hl_variable" href="../../de/dc0/usertests_8c.html#aee754febd402311e2a552cb0d6ab6629">name</a>, <a class="code hl_define" href="../../df/d26/fs_8h.html#a48246fb9e5cb7f6a71ebc9ebc2f06562">DIRSIZ</a>);</div>
<div class="line"><span class="lineno">  573</span>  de.inum = <a class="code hl_variable" href="../../d0/df8/structinode.html#a8acc2b9df0bfc6856da62925763db7fe">inum</a>;</div>
<div class="line"><span class="lineno">  574</span>  <span class="keywordflow">if</span>(<a class="code hl_function" href="../../d2/d5a/fs_8c.html#a15858f4d8a4cc1def3d84d03c312836b">writei</a>(dp, (<span class="keywordtype">char</span>*)&amp;de, off, <span class="keyword">sizeof</span>(de)) != <span class="keyword">sizeof</span>(de))</div>
<div class="line"><span class="lineno">  575</span>    <a class="code hl_function" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a">panic</a>(<span class="stringliteral">&quot;dirlink&quot;</span>);</div>
<div class="line"><span class="lineno">  576</span> </div>
<div class="line"><span class="lineno">  577</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  578</span>}</div>
<div class="ttc" id="adefs_8h_html_a66107cd2364627727a36cef6c773b39c"><div class="ttname"><a href="../../d5/d64/defs_8h.html#a66107cd2364627727a36cef6c773b39c">strncpy</a></div><div class="ttdeci">char * strncpy(char *, const char *, int)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/db0/string_8c_source.html#l00069">string.c:69</a></div></div>
<div class="ttc" id="afs_8c_html_a15858f4d8a4cc1def3d84d03c312836b"><div class="ttname"><a href="../../d2/d5a/fs_8c.html#a15858f4d8a4cc1def3d84d03c312836b">writei</a></div><div class="ttdeci">int writei(struct inode *ip, char *src, uint off, uint n)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d5a/fs_8c_source.html#l00482">fs.c:482</a></div></div>
<div class="ttc" id="afs_8c_html_a3aba1fa9f6789d09356aec5b96d91fa8"><div class="ttname"><a href="../../d2/d5a/fs_8c.html#a3aba1fa9f6789d09356aec5b96d91fa8">readi</a></div><div class="ttdeci">int readi(struct inode *ip, char *dst, uint off, uint n)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d5a/fs_8c_source.html#l00453">fs.c:453</a></div></div>
<div class="ttc" id="afs_8c_html_a5341068f021beac8cf0032b97d231e6f"><div class="ttname"><a href="../../d2/d5a/fs_8c.html#a5341068f021beac8cf0032b97d231e6f">dirlookup</a></div><div class="ttdeci">struct inode * dirlookup(struct inode *dp, char *name, uint *poff)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d5a/fs_8c_source.html#l00525">fs.c:525</a></div></div>
<div class="ttc" id="afs_8c_html_ab3c447f135c68e4c3c1f8d5866f6e77b"><div class="ttname"><a href="../../d2/d5a/fs_8c.html#ab3c447f135c68e4c3c1f8d5866f6e77b">iput</a></div><div class="ttdeci">void iput(struct inode *ip)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d5a/fs_8c_source.html#l00332">fs.c:332</a></div></div>
<div class="ttc" id="afs_8h_html_a48246fb9e5cb7f6a71ebc9ebc2f06562"><div class="ttname"><a href="../../df/d26/fs_8h.html#a48246fb9e5cb7f6a71ebc9ebc2f06562">DIRSIZ</a></div><div class="ttdeci">#define DIRSIZ</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d26/fs_8h_source.html#l00051">fs.h:51</a></div></div>
<div class="ttc" id="astructdirent_html"><div class="ttname"><a href="../../d5/de2/structdirent.html">dirent</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d26/fs_8h_source.html#l00053">fs.h:53</a></div></div>
<div class="ttc" id="astructinode_html"><div class="ttname"><a href="../../d0/df8/structinode.html">inode</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d4d/file_8h_source.html#l00013">file.h:13</a></div></div>
<div class="ttc" id="astructinode_html_a8acc2b9df0bfc6856da62925763db7fe"><div class="ttname"><a href="../../d0/df8/structinode.html#a8acc2b9df0bfc6856da62925763db7fe">inode::inum</a></div><div class="ttdeci">uint inum</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d4d/file_8h_source.html#l00015">file.h:15</a></div></div>
<div class="ttc" id="astructinode_html_a918af769c48a8ca8afac057bf83d12de"><div class="ttname"><a href="../../d0/df8/structinode.html#a918af769c48a8ca8afac057bf83d12de">inode::size</a></div><div class="ttdeci">uint size</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d4d/file_8h_source.html#l00024">file.h:24</a></div></div>
<div class="ttc" id="ausertests_8c_html_aee754febd402311e2a552cb0d6ab6629"><div class="ttname"><a href="../../de/dc0/usertests_8c.html#aee754febd402311e2a552cb0d6ab6629">name</a></div><div class="ttdeci">char name[3]</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dc0/usertests_8c_source.html#l00012">usertests.c:12</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_ae4ccea0aa02557162963e597737f665a_cgraph.png" border="0" usemap="#ad5/d64/defs_8h_ae4ccea0aa02557162963e597737f665a_cgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_ae4ccea0aa02557162963e597737f665a_cgraph" id="ad5/d64/defs_8h_ae4ccea0aa02557162963e597737f665a_cgraph">
<area shape="rect" title=" " alt="" coords="5,386,61,411"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a5341068f021beac8cf0032b97d231e6f" title=" " alt="" coords="109,145,184,170"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="1135,295,1189,321"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a3aba1fa9f6789d09356aec5b96d91fa8" title=" " alt="" coords="246,347,297,373"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#ab3c447f135c68e4c3c1f8d5866f6e77b" title=" " alt="" coords="125,753,168,778"/>
<area shape="rect" href="../../d1/db0/string_8c.html#a2d641d114b243d1a2d5284129a4f7078" title=" " alt="" coords="114,802,179,827"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a15858f4d8a4cc1def3d84d03c312836b" title=" " alt="" coords="120,437,173,462"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#ae74f6e5b19a4e7f3e72807ee67141819" title=" " alt="" coords="232,94,311,119"/>
<area shape="rect" href="../../d1/db0/string_8c.html#a81b6f58fa9c826f064fb6844dda4c475" title=" " alt="" coords="359,94,428,119"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="1274,295,1333,321"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="1869,599,1928,625"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="1257,246,1349,271"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="1397,1081,1461,1106"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="1397,523,1461,549"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="1509,1081,1601,1106"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="1524,1130,1587,1155"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="1760,1155,1821,1181"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="1649,1181,1712,1206"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="1653,954,1709,979"/>
<area shape="rect" href="../../dc/de6/bio_8c.html#a30b8d2ef2300ed8e3d879a428fe39898" title=" " alt="" coords="366,499,421,525"/>
<area shape="rect" href="../../d1/db0/string_8c.html#a07f97e2ed1ce37955192d52de8f4911f" title=" " alt="" coords="619,398,701,423"/>
<area shape="rect" href="../../dc/de6/bio_8c.html#ab5335aeb503731104314321a78a6d727" title=" " alt="" coords="995,601,1053,626"/>
<area shape="rect" href="../../da/d9b/memide_8c.html#a7f36b008f02088c86f76e98e05b55af5" title=" " alt="" coords="497,550,550,575"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#a6fdbe54cbecd8fc67d74793b27adcf05" title=" " alt="" coords="1115,903,1209,929"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ae70cc0370342e46f6db3bec367232457" title=" " alt="" coords="633,1055,687,1081"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a41af0935f3989aae450cf8988cd9c3a9" title=" " alt="" coords="1271,1511,1336,1537"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad788da91743c333b5bed7c4a0dd12365" title=" " alt="" coords="749,1094,807,1119"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a9fa00b0be5d3c4781048861e2506eb63" title=" " alt="" coords="855,1094,933,1119"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a1d9e7047d3dfb57809a2541d8387705e" title=" " alt="" coords="995,955,1053,981"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a02ca0670bc1fe12e38453082631ff360" title=" " alt="" coords="981,1057,1067,1082"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a87c90f0ab2a1b11c2b55f4e483bb8493" title=" " alt="" coords="981,1106,1067,1131"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#aa997067c2c9bfef15af6fa0a10c20f4a" title=" " alt="" coords="1115,854,1209,879"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a4a34d9f03e436cfa09b88f735f6ee952" title=" " alt="" coords="1270,751,1337,777"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#aaad2d7a86d4859982dd9a132f5128ff2" title=" " alt="" coords="476,1055,571,1081"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a7220afa8e5f4bea540eb95879ea7df6e" title=" " alt="" coords="239,601,303,626"/>
<area shape="rect" href="../../d7/df8/log_8c.html#a7eacb0fbebe5ce4c7d3ddea15908b13d" title=" " alt="" coords="987,347,1061,373"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_ae4ccea0aa02557162963e597737f665a_icgraph.png" border="0" usemap="#ad5/d64/defs_8h_ae4ccea0aa02557162963e597737f665a_icgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_ae4ccea0aa02557162963e597737f665a_icgraph" id="ad5/d64/defs_8h_ae4ccea0aa02557162963e597737f665a_icgraph">
<area shape="rect" title=" " alt="" coords="124,5,180,31"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a759600870314007ac558871239122fb7" title=" " alt="" coords="5,5,76,31"/>
</map>
</div>

</div>
</div>
<a id="aef19d16d1d20d8f7cdcd8ee0d98fc13f" name="aef19d16d1d20d8f7cdcd8ee0d98fc13f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aef19d16d1d20d8f7cdcd8ee0d98fc13f">&#9670;&#160;</a></span>dirlookup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d0/df8/structinode.html">inode</a> * dirlookup </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d0/df8/structinode.html">inode</a> *&#160;</td>
          <td class="paramname"><em>dp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/d49/types_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> *&#160;</td>
          <td class="paramname"><em>poff</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d2/d5a/fs_8c_source.html#l00525">525</a> of file <a class="el" href="../../d2/d5a/fs_8c_source.html">fs.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  526</span>{</div>
<div class="line"><span class="lineno">  527</span>  <a class="code hl_typedef" href="../../d9/d49/types_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> off, inum;</div>
<div class="line"><span class="lineno">  528</span>  <span class="keyword">struct </span><a class="code hl_struct" href="../../d5/de2/structdirent.html">dirent</a> de;</div>
<div class="line"><span class="lineno">  529</span> </div>
<div class="line"><span class="lineno">  530</span>  <span class="keywordflow">if</span>(dp-&gt;<a class="code hl_variable" href="../../d0/df8/structinode.html#a8d74bec2898785c057111c328d23fda2">type</a> != <a class="code hl_define" href="../../d2/d1b/stat_8h.html#a91136bcd71a9f499304f5d7e7e9d6376">T_DIR</a>)</div>
<div class="line"><span class="lineno">  531</span>    <a class="code hl_function" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a">panic</a>(<span class="stringliteral">&quot;dirlookup not DIR&quot;</span>);</div>
<div class="line"><span class="lineno">  532</span> </div>
<div class="line"><span class="lineno">  533</span>  <span class="keywordflow">for</span>(off = 0; off &lt; dp-&gt;<a class="code hl_variable" href="../../d0/df8/structinode.html#a918af769c48a8ca8afac057bf83d12de">size</a>; off += <span class="keyword">sizeof</span>(de)){</div>
<div class="line"><span class="lineno">  534</span>    <span class="keywordflow">if</span>(<a class="code hl_function" href="../../d2/d5a/fs_8c.html#a3aba1fa9f6789d09356aec5b96d91fa8">readi</a>(dp, (<span class="keywordtype">char</span>*)&amp;de, off, <span class="keyword">sizeof</span>(de)) != <span class="keyword">sizeof</span>(de))</div>
<div class="line"><span class="lineno">  535</span>      <a class="code hl_function" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a">panic</a>(<span class="stringliteral">&quot;dirlookup read&quot;</span>);</div>
<div class="line"><span class="lineno">  536</span>    <span class="keywordflow">if</span>(de.inum == 0)</div>
<div class="line"><span class="lineno">  537</span>      <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  538</span>    <span class="keywordflow">if</span>(<a class="code hl_function" href="../../d2/d5a/fs_8c.html#ae74f6e5b19a4e7f3e72807ee67141819">namecmp</a>(<a class="code hl_variable" href="../../de/dc0/usertests_8c.html#aee754febd402311e2a552cb0d6ab6629">name</a>, de.name) == 0){</div>
<div class="line"><span class="lineno">  539</span>      <span class="comment">// entry matches path element</span></div>
<div class="line"><span class="lineno">  540</span>      <span class="keywordflow">if</span>(poff)</div>
<div class="line"><span class="lineno">  541</span>        *poff = off;</div>
<div class="line"><span class="lineno">  542</span>      <a class="code hl_variable" href="../../d5/de2/structdirent.html#a68698c303a46d2a34232a2226629ac79">inum</a> = de.inum;</div>
<div class="line"><span class="lineno">  543</span>      <span class="keywordflow">return</span> iget(dp-&gt;<a class="code hl_variable" href="../../d0/df8/structinode.html#a121742a89c4531f03a7de1613d5be605">dev</a>, <a class="code hl_variable" href="../../d5/de2/structdirent.html#a68698c303a46d2a34232a2226629ac79">inum</a>);</div>
<div class="line"><span class="lineno">  544</span>    }</div>
<div class="line"><span class="lineno">  545</span>  }</div>
<div class="line"><span class="lineno">  546</span> </div>
<div class="line"><span class="lineno">  547</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  548</span>}</div>
<div class="ttc" id="afs_8c_html_ae74f6e5b19a4e7f3e72807ee67141819"><div class="ttname"><a href="../../d2/d5a/fs_8c.html#ae74f6e5b19a4e7f3e72807ee67141819">namecmp</a></div><div class="ttdeci">int namecmp(const char *s, const char *t)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d5a/fs_8c_source.html#l00517">fs.c:517</a></div></div>
<div class="ttc" id="astat_8h_html_a91136bcd71a9f499304f5d7e7e9d6376"><div class="ttname"><a href="../../d2/d1b/stat_8h.html#a91136bcd71a9f499304f5d7e7e9d6376">T_DIR</a></div><div class="ttdeci">#define T_DIR</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d1b/stat_8h_source.html#l00001">stat.h:1</a></div></div>
<div class="ttc" id="astructdirent_html_a68698c303a46d2a34232a2226629ac79"><div class="ttname"><a href="../../d5/de2/structdirent.html#a68698c303a46d2a34232a2226629ac79">dirent::inum</a></div><div class="ttdeci">ushort inum</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d26/fs_8h_source.html#l00054">fs.h:54</a></div></div>
<div class="ttc" id="astructinode_html_a121742a89c4531f03a7de1613d5be605"><div class="ttname"><a href="../../d0/df8/structinode.html#a121742a89c4531f03a7de1613d5be605">inode::dev</a></div><div class="ttdeci">uint dev</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d4d/file_8h_source.html#l00014">file.h:14</a></div></div>
<div class="ttc" id="astructinode_html_a8d74bec2898785c057111c328d23fda2"><div class="ttname"><a href="../../d0/df8/structinode.html#a8d74bec2898785c057111c328d23fda2">inode::type</a></div><div class="ttdeci">short type</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d4d/file_8h_source.html#l00020">file.h:20</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_aef19d16d1d20d8f7cdcd8ee0d98fc13f_cgraph.png" border="0" usemap="#ad5/d64/defs_8h_aef19d16d1d20d8f7cdcd8ee0d98fc13f_cgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_aef19d16d1d20d8f7cdcd8ee0d98fc13f_cgraph" id="ad5/d64/defs_8h_aef19d16d1d20d8f7cdcd8ee0d98fc13f_cgraph">
<area shape="rect" title=" " alt="" coords="5,195,80,221"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#ae74f6e5b19a4e7f3e72807ee67141819" title=" " alt="" coords="128,145,207,170"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="990,423,1043,449"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a3aba1fa9f6789d09356aec5b96d91fa8" title=" " alt="" coords="142,942,193,967"/>
<area shape="rect" href="../../d1/db0/string_8c.html#a81b6f58fa9c826f064fb6844dda4c475" title=" " alt="" coords="255,145,324,170"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="1130,601,1189,626"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="1727,143,1785,169"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="1113,449,1205,474"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="1255,981,1319,1006"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="1255,702,1319,727"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="1367,981,1459,1006"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="1381,677,1444,702"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="1617,295,1679,321"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="1507,550,1569,575"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="1510,334,1566,359"/>
<area shape="rect" href="../../dc/de6/bio_8c.html#a30b8d2ef2300ed8e3d879a428fe39898" title=" " alt="" coords="262,879,317,905"/>
<area shape="rect" href="../../d1/db0/string_8c.html#a07f97e2ed1ce37955192d52de8f4911f" title=" " alt="" coords="473,1183,556,1209"/>
<area shape="rect" href="../../dc/de6/bio_8c.html#ab5335aeb503731104314321a78a6d727" title=" " alt="" coords="850,967,907,993"/>
<area shape="rect" href="../../da/d9b/memide_8c.html#a7f36b008f02088c86f76e98e05b55af5" title=" " alt="" coords="372,803,425,829"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#a6fdbe54cbecd8fc67d74793b27adcf05" title=" " alt="" coords="1112,854,1207,879"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ae70cc0370342e46f6db3bec367232457" title=" " alt="" coords="488,626,541,651"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a41af0935f3989aae450cf8988cd9c3a9" title=" " alt="" coords="1380,246,1445,271"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad788da91743c333b5bed7c4a0dd12365" title=" " alt="" coords="604,550,661,575"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a9fa00b0be5d3c4781048861e2506eb63" title=" " alt="" coords="709,601,788,626"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a1d9e7047d3dfb57809a2541d8387705e" title=" " alt="" coords="850,501,907,526"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a02ca0670bc1fe12e38453082631ff360" title=" " alt="" coords="836,550,921,575"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a87c90f0ab2a1b11c2b55f4e483bb8493" title=" " alt="" coords="836,246,921,271"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#aa997067c2c9bfef15af6fa0a10c20f4a" title=" " alt="" coords="969,994,1064,1019"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a4a34d9f03e436cfa09b88f735f6ee952" title=" " alt="" coords="1126,1006,1193,1031"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_aef19d16d1d20d8f7cdcd8ee0d98fc13f_icgraph.png" border="0" usemap="#ad5/d64/defs_8h_aef19d16d1d20d8f7cdcd8ee0d98fc13f_icgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_aef19d16d1d20d8f7cdcd8ee0d98fc13f_icgraph" id="ad5/d64/defs_8h_aef19d16d1d20d8f7cdcd8ee0d98fc13f_icgraph">
<area shape="rect" title=" " alt="" coords="256,31,331,56"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a69a135a0e8a06d9f306d77ebc0c1f7a0" title=" " alt="" coords="138,5,194,31"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#ae1e58ee11d41f643929520d8c1640da7" title=" " alt="" coords="124,55,208,80"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a759600870314007ac558871239122fb7" title=" " alt="" coords="5,5,76,31"/>
</map>
</div>

</div>
</div>
<a id="a2504e37a109f9bae5ca11fe89e4e8fa1" name="a2504e37a109f9bae5ca11fe89e4e8fa1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2504e37a109f9bae5ca11fe89e4e8fa1">&#9670;&#160;</a></span>end_op()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void end_op </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/df8/log_8c_source.html#l00146">146</a> of file <a class="el" href="../../d7/df8/log_8c_source.html">log.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  147</span>{</div>
<div class="line"><span class="lineno">  148</span>  <span class="keywordtype">int</span> do_commit = 0;</div>
<div class="line"><span class="lineno">  149</span> </div>
<div class="line"><span class="lineno">  150</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#afe4ef8638f1ecb962a6e67fb086ee3b8">acquire</a>(&amp;<a class="code hl_struct" href="../../d0/d4a/structlog.html">log</a>.<a class="code hl_variable" href="../../d0/d4a/structlog.html#a980a1d1aa9c60af7a82f297f8ab54d2e">lock</a>);</div>
<div class="line"><span class="lineno">  151</span>  <a class="code hl_struct" href="../../d0/d4a/structlog.html">log</a>.<a class="code hl_variable" href="../../d0/d4a/structlog.html#addfc1fc09a124978bd7e2a23a19d733d">outstanding</a> -= 1;</div>
<div class="line"><span class="lineno">  152</span>  <span class="keywordflow">if</span>(<a class="code hl_struct" href="../../d0/d4a/structlog.html">log</a>.<a class="code hl_variable" href="../../d0/d4a/structlog.html#afc034b98b98897c179ca8fae8e2ee181">committing</a>)</div>
<div class="line"><span class="lineno">  153</span>    <a class="code hl_function" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a">panic</a>(<span class="stringliteral">&quot;log.committing&quot;</span>);</div>
<div class="line"><span class="lineno">  154</span>  <span class="keywordflow">if</span>(<a class="code hl_struct" href="../../d0/d4a/structlog.html">log</a>.<a class="code hl_variable" href="../../d0/d4a/structlog.html#addfc1fc09a124978bd7e2a23a19d733d">outstanding</a> == 0){</div>
<div class="line"><span class="lineno">  155</span>    do_commit = 1;</div>
<div class="line"><span class="lineno">  156</span>    <a class="code hl_struct" href="../../d0/d4a/structlog.html">log</a>.<a class="code hl_variable" href="../../d0/d4a/structlog.html#afc034b98b98897c179ca8fae8e2ee181">committing</a> = 1;</div>
<div class="line"><span class="lineno">  157</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  158</span>    <span class="comment">// begin_op() may be waiting for log space,</span></div>
<div class="line"><span class="lineno">  159</span>    <span class="comment">// and decrementing log.outstanding has decreased</span></div>
<div class="line"><span class="lineno">  160</span>    <span class="comment">// the amount of reserved space.</span></div>
<div class="line"><span class="lineno">  161</span>    <a class="code hl_function" href="../../d5/d64/defs_8h.html#a245b56417239f499389b2e806bd99254">wakeup</a>(&amp;<a class="code hl_struct" href="../../d0/d4a/structlog.html">log</a>);</div>
<div class="line"><span class="lineno">  162</span>  }</div>
<div class="line"><span class="lineno">  163</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#a4f8616948f3dbce65671f666eed1d669">release</a>(&amp;<a class="code hl_struct" href="../../d0/d4a/structlog.html">log</a>.<a class="code hl_variable" href="../../d0/d4a/structlog.html#a980a1d1aa9c60af7a82f297f8ab54d2e">lock</a>);</div>
<div class="line"><span class="lineno">  164</span> </div>
<div class="line"><span class="lineno">  165</span>  <span class="keywordflow">if</span>(do_commit){</div>
<div class="line"><span class="lineno">  166</span>    <span class="comment">// call commit w/o holding locks, since not allowed</span></div>
<div class="line"><span class="lineno">  167</span>    <span class="comment">// to sleep with locks.</span></div>
<div class="line"><span class="lineno">  168</span>    commit();</div>
<div class="line"><span class="lineno">  169</span>    <a class="code hl_function" href="../../d5/d64/defs_8h.html#afe4ef8638f1ecb962a6e67fb086ee3b8">acquire</a>(&amp;<a class="code hl_struct" href="../../d0/d4a/structlog.html">log</a>.<a class="code hl_variable" href="../../d0/d4a/structlog.html#a980a1d1aa9c60af7a82f297f8ab54d2e">lock</a>);</div>
<div class="line"><span class="lineno">  170</span>    <a class="code hl_struct" href="../../d0/d4a/structlog.html">log</a>.<a class="code hl_variable" href="../../d0/d4a/structlog.html#afc034b98b98897c179ca8fae8e2ee181">committing</a> = 0;</div>
<div class="line"><span class="lineno">  171</span>    <a class="code hl_function" href="../../d5/d64/defs_8h.html#a245b56417239f499389b2e806bd99254">wakeup</a>(&amp;<a class="code hl_struct" href="../../d0/d4a/structlog.html">log</a>);</div>
<div class="line"><span class="lineno">  172</span>    <a class="code hl_function" href="../../d5/d64/defs_8h.html#a4f8616948f3dbce65671f666eed1d669">release</a>(&amp;<a class="code hl_struct" href="../../d0/d4a/structlog.html">log</a>.<a class="code hl_variable" href="../../d0/d4a/structlog.html#a980a1d1aa9c60af7a82f297f8ab54d2e">lock</a>);</div>
<div class="line"><span class="lineno">  173</span>  }</div>
<div class="line"><span class="lineno">  174</span>}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_a2504e37a109f9bae5ca11fe89e4e8fa1_cgraph.png" border="0" usemap="#ad5/d64/defs_8h_a2504e37a109f9bae5ca11fe89e4e8fa1_cgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_a2504e37a109f9bae5ca11fe89e4e8fa1_cgraph" id="ad5/d64/defs_8h_a2504e37a109f9bae5ca11fe89e4e8fa1_cgraph">
<area shape="rect" title=" " alt="" coords="5,69,69,94"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="232,195,296,221"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="704,145,757,170"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="945,246,1009,271"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a4a34d9f03e436cfa09b88f735f6ee952" title=" " alt="" coords="117,195,184,221"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="344,195,436,221"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="359,347,421,373"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="595,246,656,271"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="484,246,547,271"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="1057,347,1113,373"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="822,246,881,271"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="822,95,881,121"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="805,145,897,170"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_a2504e37a109f9bae5ca11fe89e4e8fa1_icgraph.png" border="0" usemap="#ad5/d64/defs_8h_a2504e37a109f9bae5ca11fe89e4e8fa1_icgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_a2504e37a109f9bae5ca11fe89e4e8fa1_icgraph" id="ad5/d64/defs_8h_a2504e37a109f9bae5ca11fe89e4e8fa1_icgraph">
<area shape="rect" title=" " alt="" coords="524,1147,588,1172"/>
<area shape="rect" href="../../df/dc9/exec_8c.html#ace32454ed0d37834dcb1cb4f8b727e6e" title=" " alt="" coords="274,131,325,156"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#aaf98ef7cdde3a0dfb2e49919de3298b1" title=" " alt="" coords="278,1020,321,1045"/>
<area shape="rect" href="../../d6/d13/file_8c.html#ae557c81ab89c24219146144bb6adaa2c" title=" " alt="" coords="396,1020,467,1045"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a74e45efc661ca17c068bc283b3842e6d" title=" " alt="" coords="260,1069,339,1095"/>
<area shape="rect" href="../../d6/d13/file_8c.html#ab8de757a0a9f58dcc6511ea5e46ebb88" title=" " alt="" coords="398,1121,465,1147"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#ad1c5f8693cb35b9605fee09eebdda640" title=" " alt="" coords="392,1171,471,1196"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a759600870314007ac558871239122fb7" title=" " alt="" coords="396,1220,467,1245"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a057e5bce2de7a87ebfd2dc33967bca4a" title=" " alt="" coords="390,1269,473,1295"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a25697aa3d828b5878d38170d724adb27" title=" " alt="" coords="387,1319,476,1344"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#ae1e58ee11d41f643929520d8c1640da7" title=" " alt="" coords="389,1368,473,1393"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#ac5b5d4517586be6396b4f3b37445945a" title=" " alt="" coords="126,156,205,181"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a6f94e3b215d069b5419e87bafe80799a" title=" " alt="" coords="129,205,201,231"/>
<area shape="rect" href="../../d8/d60/init_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title=" " alt="" coords="140,55,191,80"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#aedbeff6afe5d4e22330c7e6b5e6df893" title=" " alt="" coords="5,255,71,280"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#aeaa813ddeb6a5fac3c45714c7351c526" title=" " alt="" coords="126,5,205,31"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a77cc2edce6e78f22dd9eb377462762f2" title=" " alt="" coords="131,1096,200,1121"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#aa0d46fcb43667c805b84ea7e1ff6100a" title=" " alt="" coords="139,1145,192,1171"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a86fe524d99d69c18a335512cf3405b31" title=" " alt="" coords="137,1195,193,1220"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a57e55b2d0161d62bb99765ca3de43e35" title=" " alt="" coords="132,1244,199,1269"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a0b0ff95e564df3c3e8fc977226b75de7" title=" " alt="" coords="133,1293,198,1319"/>
<area shape="rect" href="../../d1/d8f/cat_8c.html#a90a33618884bcf5e892297879bc016ff" title=" " alt="" coords="145,1395,185,1420"/>
<area shape="rect" href="../../d1/d8f/cat_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="13,1369,63,1395"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a5a12affe4fdfaa172d85da9a6adf98d2" title=" " alt="" coords="126,1444,205,1469"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a425a0efe4f459decf4b5ea14517ab3cf" title=" " alt="" coords="119,1493,212,1519"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#aedd6d3f148dd5c99b47900215c1ac43f" title=" " alt="" coords="139,1543,192,1568"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a8db9f9a2634bab29096bab0b8bc6945c" title=" " alt="" coords="136,1592,195,1617"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a8faab06cc4d48335076b368f02709ee2" title=" " alt="" coords="122,1641,209,1667"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a330ed2370fe27045b8bec1eb0bd7818f" title=" " alt="" coords="132,1691,199,1716"/>
<area shape="rect" href="../../d5/de1/forktest_8c.html#a0ef8ccf57bc8c491407ec513b234f83c" title=" " alt="" coords="132,1740,199,1765"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a77a4432bc67dfb513f1c1d698c2c4ea6" title=" " alt="" coords="131,1789,199,1815"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#abf4af50e65630225208fef177e267efb" title=" " alt="" coords="131,1839,200,1864"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#ac9fe56d8f6e4ed1c9677b06cb7b325e6" title=" " alt="" coords="133,1888,198,1913"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a267227083b00d0cc3141b34f5152ae04" title=" " alt="" coords="145,1937,185,1963"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a4eeee588d4689a58fc140a7d5d7b0608" title=" " alt="" coords="133,304,197,329"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a1740f29f4ce6d3060fd79a9312edc315" title=" " alt="" coords="127,353,203,379"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#aa1c6e6e76813ccb29a29bb119dba668a" title=" " alt="" coords="140,403,191,428"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a3208ed001a225f5d9ea3fb37f46810c7" title=" " alt="" coords="119,452,212,477"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#ae7c61791dd2cfb8ad59b4c6e87685c07" title=" " alt="" coords="129,501,201,527"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#ada38fdb2913f040f6eeb6189eeb42d32" title=" " alt="" coords="139,255,192,280"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a16ae754fb9c5622d44d0c3ce62ad7c49" title=" " alt="" coords="139,551,192,576"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a6b22568d42b584ed4b0dc4e2b0677013" title=" " alt="" coords="138,600,193,625"/>
<area shape="rect" href="../../d7/d1f/mkfs_8c.html#a22ea835ad23cd716a962f30e4882ee80" title=" " alt="" coords="140,649,191,675"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a06636ed0cda58c748d68e82d33d1afce" title=" " alt="" coords="131,699,200,724"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a02e1ca3f4db5f4bf8a683a0b7c18cc43" title=" " alt="" coords="129,748,201,773"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a5d39024e15998d6a6865f4cd0f69738b" title=" " alt="" coords="137,797,194,823"/>
<area shape="rect" href="../../dd/d35/sysproc_8c.html#aee72faa31a0c32b410aba558ef1d59f2" title=" " alt="" coords="130,847,201,872"/>
<area shape="rect" href="../../dc/d6f/trap_8c.html#a372d166e36c086c91e5f5d81e5fead3a" title=" " alt="" coords="143,896,187,921"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a6888f9f6d973f81f73091d1530ad212b" title=" " alt="" coords="146,945,185,971"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a3331ced6fb67502a2e5277260d4f5aec" title=" " alt="" coords="125,995,206,1020"/>
</map>
</div>

</div>
</div>
<a id="aa7b4aae4a12acd187e23396214aeca47" name="aa7b4aae4a12acd187e23396214aeca47"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa7b4aae4a12acd187e23396214aeca47">&#9670;&#160;</a></span>exec()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int exec </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>argv</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/dc9/exec_8c_source.html#l00011">11</a> of file <a class="el" href="../../df/dc9/exec_8c_source.html">exec.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   12</span>{</div>
<div class="line"><span class="lineno">   13</span>  <span class="keywordtype">char</span> *s, *last;</div>
<div class="line"><span class="lineno">   14</span>  <span class="keywordtype">int</span> i, off;</div>
<div class="line"><span class="lineno">   15</span>  <a class="code hl_typedef" href="../../d9/d49/types_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> argc, sz, sp, ustack[3+<a class="code hl_define" href="../../d5/d33/param_8h.html#a4c171d1ccc50f0b6ce7ad2f475eeba32">MAXARG</a>+1];</div>
<div class="line"><span class="lineno">   16</span>  <span class="keyword">struct </span><a class="code hl_struct" href="../../d7/da8/structelfhdr.html">elfhdr</a> <a class="code hl_variable" href="../../d7/da8/structelfhdr.html#a22ec6f2383f0488ee18a18673398f201">elf</a>;</div>
<div class="line"><span class="lineno">   17</span>  <span class="keyword">struct </span><a class="code hl_struct" href="../../d0/df8/structinode.html">inode</a> *ip;</div>
<div class="line"><span class="lineno">   18</span>  <span class="keyword">struct </span><a class="code hl_struct" href="../../de/d4f/structproghdr.html">proghdr</a> ph;</div>
<div class="line"><span class="lineno">   19</span>  <a class="code hl_typedef" href="../../d9/d49/types_8h.html#ac131849542282b2c95dfeaf1f26dc010">pde_t</a> *pgdir, *oldpgdir;</div>
<div class="line"><span class="lineno">   20</span>  <span class="keyword">struct </span><a class="code hl_struct" href="../../de/d48/structproc.html">proc</a> *curproc = <a class="code hl_function" href="../../d5/d64/defs_8h.html#a3d2327db1e34643f4a9e6a07c8cc62c6">myproc</a>();</div>
<div class="line"><span class="lineno">   21</span> </div>
<div class="line"><span class="lineno">   22</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#a603ca98212e00d2ffdba7827ef0f1003">begin_op</a>();</div>
<div class="line"><span class="lineno">   23</span> </div>
<div class="line"><span class="lineno">   24</span>  <span class="keywordflow">if</span>((ip = <a class="code hl_function" href="../../d5/d64/defs_8h.html#acde7d3975db286253e584452ba03a54f">namei</a>(path)) == 0){</div>
<div class="line"><span class="lineno">   25</span>    <a class="code hl_function" href="../../d5/d64/defs_8h.html#a2504e37a109f9bae5ca11fe89e4e8fa1">end_op</a>();</div>
<div class="line"><span class="lineno">   26</span>    <a class="code hl_function" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6">cprintf</a>(<span class="stringliteral">&quot;exec: fail\n&quot;</span>);</div>
<div class="line"><span class="lineno">   27</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">   28</span>  }</div>
<div class="line"><span class="lineno">   29</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#a29a4d743d41fe659f74b0a57fdc25012">ilock</a>(ip);</div>
<div class="line"><span class="lineno">   30</span>  <a class="code hl_variable" href="../../de/d48/structproc.html#ad430afc653e9eb6cee33954d5545b79d">pgdir</a> = 0;</div>
<div class="line"><span class="lineno">   31</span> </div>
<div class="line"><span class="lineno">   32</span>  <span class="comment">// Check ELF header</span></div>
<div class="line"><span class="lineno">   33</span>  <span class="keywordflow">if</span>(<a class="code hl_function" href="../../d5/d64/defs_8h.html#a2415273b06f31f0f2587b7325588a7e4">readi</a>(ip, (<span class="keywordtype">char</span>*)&amp;elf, 0, <span class="keyword">sizeof</span>(elf)) != <span class="keyword">sizeof</span>(elf))</div>
<div class="line"><span class="lineno">   34</span>    <span class="keywordflow">goto</span> bad;</div>
<div class="line"><span class="lineno">   35</span>  <span class="keywordflow">if</span>(elf.magic != <a class="code hl_define" href="../../d1/d9e/elf_8h.html#abb1c2e5626667aacc7b3efd269a6c0eb">ELF_MAGIC</a>)</div>
<div class="line"><span class="lineno">   36</span>    <span class="keywordflow">goto</span> bad;</div>
<div class="line"><span class="lineno">   37</span> </div>
<div class="line"><span class="lineno">   38</span>  <span class="keywordflow">if</span>((<a class="code hl_variable" href="../../de/d48/structproc.html#ad430afc653e9eb6cee33954d5545b79d">pgdir</a> = <a class="code hl_function" href="../../d5/d64/defs_8h.html#a1c8a7a02e9391b5cf0984388216695c0">setupkvm</a>()) == 0)</div>
<div class="line"><span class="lineno">   39</span>    <span class="keywordflow">goto</span> bad;</div>
<div class="line"><span class="lineno">   40</span> </div>
<div class="line"><span class="lineno">   41</span>  <span class="comment">// Load program into memory.</span></div>
<div class="line"><span class="lineno">   42</span>  <a class="code hl_variable" href="../../de/d48/structproc.html#a6e67042bb361124ff287af88efc33e00">sz</a> = 0;</div>
<div class="line"><span class="lineno">   43</span>  <span class="keywordflow">for</span>(i=0, off=elf.phoff; i&lt;elf.phnum; i++, off+=<span class="keyword">sizeof</span>(ph)){</div>
<div class="line"><span class="lineno">   44</span>    <span class="keywordflow">if</span>(<a class="code hl_function" href="../../d5/d64/defs_8h.html#a2415273b06f31f0f2587b7325588a7e4">readi</a>(ip, (<span class="keywordtype">char</span>*)&amp;ph, off, <span class="keyword">sizeof</span>(ph)) != <span class="keyword">sizeof</span>(ph))</div>
<div class="line"><span class="lineno">   45</span>      <span class="keywordflow">goto</span> bad;</div>
<div class="line"><span class="lineno">   46</span>    <span class="keywordflow">if</span>(ph.type != <a class="code hl_define" href="../../d1/d9e/elf_8h.html#a6a45c035b7a2930e62ac97a6bd8121e9">ELF_PROG_LOAD</a>)</div>
<div class="line"><span class="lineno">   47</span>      <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">   48</span>    <span class="keywordflow">if</span>(ph.memsz &lt; ph.filesz)</div>
<div class="line"><span class="lineno">   49</span>      <span class="keywordflow">goto</span> bad;</div>
<div class="line"><span class="lineno">   50</span>    <span class="keywordflow">if</span>(ph.vaddr + ph.memsz &lt; ph.vaddr)</div>
<div class="line"><span class="lineno">   51</span>      <span class="keywordflow">goto</span> bad;</div>
<div class="line"><span class="lineno">   52</span>    <span class="keywordflow">if</span>((<a class="code hl_variable" href="../../de/d48/structproc.html#a6e67042bb361124ff287af88efc33e00">sz</a> = <a class="code hl_function" href="../../d5/d64/defs_8h.html#a67f50b6f85756f02b5acdcb084d51b9f">allocuvm</a>(<a class="code hl_variable" href="../../de/d48/structproc.html#ad430afc653e9eb6cee33954d5545b79d">pgdir</a>, <a class="code hl_variable" href="../../de/d48/structproc.html#a6e67042bb361124ff287af88efc33e00">sz</a>, ph.vaddr + ph.memsz)) == 0)</div>
<div class="line"><span class="lineno">   53</span>      <span class="keywordflow">goto</span> bad;</div>
<div class="line"><span class="lineno">   54</span>    <span class="keywordflow">if</span>(ph.vaddr % <a class="code hl_define" href="../../d2/df1/mmu_8h.html#a5f96cb6ae6670e023c407cc2f77e1704">PGSIZE</a> != 0)</div>
<div class="line"><span class="lineno">   55</span>      <span class="keywordflow">goto</span> bad;</div>
<div class="line"><span class="lineno">   56</span>    <span class="keywordflow">if</span>(<a class="code hl_function" href="../../d5/d64/defs_8h.html#a8a149272578e00e0ce70480004640679">loaduvm</a>(<a class="code hl_variable" href="../../de/d48/structproc.html#ad430afc653e9eb6cee33954d5545b79d">pgdir</a>, (<span class="keywordtype">char</span>*)ph.vaddr, ip, ph.off, ph.filesz) &lt; 0)</div>
<div class="line"><span class="lineno">   57</span>      <span class="keywordflow">goto</span> bad;</div>
<div class="line"><span class="lineno">   58</span>  }</div>
<div class="line"><span class="lineno">   59</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#adff5bb5a1eeaf921853ec06479f8c49b">iunlockput</a>(ip);</div>
<div class="line"><span class="lineno">   60</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#a2504e37a109f9bae5ca11fe89e4e8fa1">end_op</a>();</div>
<div class="line"><span class="lineno">   61</span>  ip = 0;</div>
<div class="line"><span class="lineno">   62</span> </div>
<div class="line"><span class="lineno">   63</span>  <span class="comment">// Allocate two pages at the next page boundary.</span></div>
<div class="line"><span class="lineno">   64</span>  <span class="comment">// Make the first inaccessible.  Use the second as the user stack.</span></div>
<div class="line"><span class="lineno">   65</span>  <a class="code hl_variable" href="../../de/d48/structproc.html#a6e67042bb361124ff287af88efc33e00">sz</a> = <a class="code hl_define" href="../../d2/df1/mmu_8h.html#affa8cdfbd1c15dafc9f3af3a7b641f80">PGROUNDUP</a>(<a class="code hl_variable" href="../../de/d48/structproc.html#a6e67042bb361124ff287af88efc33e00">sz</a>);</div>
<div class="line"><span class="lineno">   66</span>  <span class="keywordflow">if</span>((<a class="code hl_variable" href="../../de/d48/structproc.html#a6e67042bb361124ff287af88efc33e00">sz</a> = <a class="code hl_function" href="../../d5/d64/defs_8h.html#a67f50b6f85756f02b5acdcb084d51b9f">allocuvm</a>(<a class="code hl_variable" href="../../de/d48/structproc.html#ad430afc653e9eb6cee33954d5545b79d">pgdir</a>, <a class="code hl_variable" href="../../de/d48/structproc.html#a6e67042bb361124ff287af88efc33e00">sz</a>, <a class="code hl_variable" href="../../de/d48/structproc.html#a6e67042bb361124ff287af88efc33e00">sz</a> + 2*<a class="code hl_define" href="../../d2/df1/mmu_8h.html#a5f96cb6ae6670e023c407cc2f77e1704">PGSIZE</a>)) == 0)</div>
<div class="line"><span class="lineno">   67</span>    <span class="keywordflow">goto</span> bad;</div>
<div class="line"><span class="lineno">   68</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#a795e27a0cb916cfb41411ebbb9669ddf">clearpteu</a>(<a class="code hl_variable" href="../../de/d48/structproc.html#ad430afc653e9eb6cee33954d5545b79d">pgdir</a>, (<span class="keywordtype">char</span>*)(<a class="code hl_variable" href="../../de/d48/structproc.html#a6e67042bb361124ff287af88efc33e00">sz</a> - 2*<a class="code hl_define" href="../../d2/df1/mmu_8h.html#a5f96cb6ae6670e023c407cc2f77e1704">PGSIZE</a>));</div>
<div class="line"><span class="lineno">   69</span>  sp = <a class="code hl_variable" href="../../de/d48/structproc.html#a6e67042bb361124ff287af88efc33e00">sz</a>;</div>
<div class="line"><span class="lineno">   70</span> </div>
<div class="line"><span class="lineno">   71</span>  <span class="comment">// Push argument strings, prepare rest of stack in ustack.</span></div>
<div class="line"><span class="lineno">   72</span>  <span class="keywordflow">for</span>(argc = 0; <a class="code hl_variable" href="../../d8/d60/init_8c.html#abd1a2cf54950f450187ef24c1cdcac0c">argv</a>[argc]; argc++) {</div>
<div class="line"><span class="lineno">   73</span>    <span class="keywordflow">if</span>(argc &gt;= <a class="code hl_define" href="../../d5/d33/param_8h.html#a4c171d1ccc50f0b6ce7ad2f475eeba32">MAXARG</a>)</div>
<div class="line"><span class="lineno">   74</span>      <span class="keywordflow">goto</span> bad;</div>
<div class="line"><span class="lineno">   75</span>    sp = (sp - (<a class="code hl_function" href="../../d5/d64/defs_8h.html#a5e5172aa1be36b8210c6dfd86800b44c">strlen</a>(<a class="code hl_variable" href="../../d8/d60/init_8c.html#abd1a2cf54950f450187ef24c1cdcac0c">argv</a>[argc]) + 1)) &amp; ~3;</div>
<div class="line"><span class="lineno">   76</span>    <span class="keywordflow">if</span>(<a class="code hl_function" href="../../d5/d64/defs_8h.html#a11f5ff2e5bcd16968a88fcbb30db5a10">copyout</a>(<a class="code hl_variable" href="../../de/d48/structproc.html#ad430afc653e9eb6cee33954d5545b79d">pgdir</a>, sp, <a class="code hl_variable" href="../../d8/d60/init_8c.html#abd1a2cf54950f450187ef24c1cdcac0c">argv</a>[argc], <a class="code hl_function" href="../../d5/d64/defs_8h.html#a5e5172aa1be36b8210c6dfd86800b44c">strlen</a>(<a class="code hl_variable" href="../../d8/d60/init_8c.html#abd1a2cf54950f450187ef24c1cdcac0c">argv</a>[argc]) + 1) &lt; 0)</div>
<div class="line"><span class="lineno">   77</span>      <span class="keywordflow">goto</span> bad;</div>
<div class="line"><span class="lineno">   78</span>    ustack[3+argc] = sp;</div>
<div class="line"><span class="lineno">   79</span>  }</div>
<div class="line"><span class="lineno">   80</span>  ustack[3+argc] = 0;</div>
<div class="line"><span class="lineno">   81</span> </div>
<div class="line"><span class="lineno">   82</span>  ustack[0] = 0xffffffff;  <span class="comment">// fake return PC</span></div>
<div class="line"><span class="lineno">   83</span>  ustack[1] = argc;</div>
<div class="line"><span class="lineno">   84</span>  ustack[2] = sp - (argc+1)*4;  <span class="comment">// argv pointer</span></div>
<div class="line"><span class="lineno">   85</span> </div>
<div class="line"><span class="lineno">   86</span>  sp -= (3+argc+1) * 4;</div>
<div class="line"><span class="lineno">   87</span>  <span class="keywordflow">if</span>(<a class="code hl_function" href="../../d5/d64/defs_8h.html#a11f5ff2e5bcd16968a88fcbb30db5a10">copyout</a>(<a class="code hl_variable" href="../../de/d48/structproc.html#ad430afc653e9eb6cee33954d5545b79d">pgdir</a>, sp, ustack, (3+argc+1)*4) &lt; 0)</div>
<div class="line"><span class="lineno">   88</span>    <span class="keywordflow">goto</span> bad;</div>
<div class="line"><span class="lineno">   89</span> </div>
<div class="line"><span class="lineno">   90</span>  <span class="comment">// Save program name for debugging.</span></div>
<div class="line"><span class="lineno">   91</span>  <span class="keywordflow">for</span>(last=s=path; *s; s++)</div>
<div class="line"><span class="lineno">   92</span>    <span class="keywordflow">if</span>(*s == <span class="charliteral">&#39;/&#39;</span>)</div>
<div class="line"><span class="lineno">   93</span>      last = s+1;</div>
<div class="line"><span class="lineno">   94</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#aa406a54805a570dfe266281876dc5d69">safestrcpy</a>(curproc-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#ac04af53e17d24b90c3cbfab56d658d62">name</a>, last, <span class="keyword">sizeof</span>(curproc-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#ac04af53e17d24b90c3cbfab56d658d62">name</a>));</div>
<div class="line"><span class="lineno">   95</span> </div>
<div class="line"><span class="lineno">   96</span>  <span class="comment">// Commit to the user image.</span></div>
<div class="line"><span class="lineno">   97</span>  oldpgdir = curproc-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#ad430afc653e9eb6cee33954d5545b79d">pgdir</a>;</div>
<div class="line"><span class="lineno">   98</span>  curproc-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#ad430afc653e9eb6cee33954d5545b79d">pgdir</a> = <a class="code hl_variable" href="../../de/d48/structproc.html#ad430afc653e9eb6cee33954d5545b79d">pgdir</a>;</div>
<div class="line"><span class="lineno">   99</span>  curproc-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#a6e67042bb361124ff287af88efc33e00">sz</a> = <a class="code hl_variable" href="../../de/d48/structproc.html#a6e67042bb361124ff287af88efc33e00">sz</a>;</div>
<div class="line"><span class="lineno">  100</span>  curproc-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#a56ec07ac1e10ce42adfc8dd2a366071f">tf</a>-&gt;<a class="code hl_variable" href="../../df/d05/structtrapframe.html#a886a5973a537894e3a95435f38767d5c">eip</a> = elf.entry;  <span class="comment">// main</span></div>
<div class="line"><span class="lineno">  101</span>  curproc-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#a56ec07ac1e10ce42adfc8dd2a366071f">tf</a>-&gt;<a class="code hl_variable" href="../../df/d05/structtrapframe.html#acd319e2dbd720d217c10f8fb620d73e2">esp</a> = sp;</div>
<div class="line"><span class="lineno">  102</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#ad43d81fa3edec39a200abd0853bc84b1">switchuvm</a>(curproc);</div>
<div class="line"><span class="lineno">  103</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#af24cf1756e19afd8be8c95d02262cf3a">freevm</a>(oldpgdir);</div>
<div class="line"><span class="lineno">  104</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  105</span> </div>
<div class="line"><span class="lineno">  106</span> bad:</div>
<div class="line"><span class="lineno">  107</span>  <span class="keywordflow">if</span>(<a class="code hl_variable" href="../../de/d48/structproc.html#ad430afc653e9eb6cee33954d5545b79d">pgdir</a>)</div>
<div class="line"><span class="lineno">  108</span>    <a class="code hl_function" href="../../d5/d64/defs_8h.html#af24cf1756e19afd8be8c95d02262cf3a">freevm</a>(<a class="code hl_variable" href="../../de/d48/structproc.html#ad430afc653e9eb6cee33954d5545b79d">pgdir</a>);</div>
<div class="line"><span class="lineno">  109</span>  <span class="keywordflow">if</span>(ip){</div>
<div class="line"><span class="lineno">  110</span>    <a class="code hl_function" href="../../d5/d64/defs_8h.html#adff5bb5a1eeaf921853ec06479f8c49b">iunlockput</a>(ip);</div>
<div class="line"><span class="lineno">  111</span>    <a class="code hl_function" href="../../d5/d64/defs_8h.html#a2504e37a109f9bae5ca11fe89e4e8fa1">end_op</a>();</div>
<div class="line"><span class="lineno">  112</span>  }</div>
<div class="line"><span class="lineno">  113</span>  <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  114</span>}</div>
<div class="ttc" id="adefs_8h_html_a11f5ff2e5bcd16968a88fcbb30db5a10"><div class="ttname"><a href="../../d5/d64/defs_8h.html#a11f5ff2e5bcd16968a88fcbb30db5a10">copyout</a></div><div class="ttdeci">int copyout(pde_t *, uint, void *, uint)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/de9/vm_8c_source.html#l00366">vm.c:366</a></div></div>
<div class="ttc" id="adefs_8h_html_a1c8a7a02e9391b5cf0984388216695c0"><div class="ttname"><a href="../../d5/d64/defs_8h.html#a1c8a7a02e9391b5cf0984388216695c0">setupkvm</a></div><div class="ttdeci">pde_t * setupkvm(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/de9/vm_8c_source.html#l00119">vm.c:119</a></div></div>
<div class="ttc" id="adefs_8h_html_a2415273b06f31f0f2587b7325588a7e4"><div class="ttname"><a href="../../d5/d64/defs_8h.html#a2415273b06f31f0f2587b7325588a7e4">readi</a></div><div class="ttdeci">int readi(struct inode *, char *, uint, uint)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d5a/fs_8c_source.html#l00453">fs.c:453</a></div></div>
<div class="ttc" id="adefs_8h_html_a2504e37a109f9bae5ca11fe89e4e8fa1"><div class="ttname"><a href="../../d5/d64/defs_8h.html#a2504e37a109f9bae5ca11fe89e4e8fa1">end_op</a></div><div class="ttdeci">void end_op()</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/df8/log_8c_source.html#l00146">log.c:146</a></div></div>
<div class="ttc" id="adefs_8h_html_a29a4d743d41fe659f74b0a57fdc25012"><div class="ttname"><a href="../../d5/d64/defs_8h.html#a29a4d743d41fe659f74b0a57fdc25012">ilock</a></div><div class="ttdeci">void ilock(struct inode *)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d5a/fs_8c_source.html#l00288">fs.c:288</a></div></div>
<div class="ttc" id="adefs_8h_html_a5e5172aa1be36b8210c6dfd86800b44c"><div class="ttname"><a href="../../d5/d64/defs_8h.html#a5e5172aa1be36b8210c6dfd86800b44c">strlen</a></div><div class="ttdeci">int strlen(const char *)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/db0/string_8c_source.html#l00097">string.c:97</a></div></div>
<div class="ttc" id="adefs_8h_html_a603ca98212e00d2ffdba7827ef0f1003"><div class="ttname"><a href="../../d5/d64/defs_8h.html#a603ca98212e00d2ffdba7827ef0f1003">begin_op</a></div><div class="ttdeci">void begin_op()</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/df8/log_8c_source.html#l00126">log.c:126</a></div></div>
<div class="ttc" id="adefs_8h_html_a67f50b6f85756f02b5acdcb084d51b9f"><div class="ttname"><a href="../../d5/d64/defs_8h.html#a67f50b6f85756f02b5acdcb084d51b9f">allocuvm</a></div><div class="ttdeci">int allocuvm(pde_t *, uint, uint)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/de9/vm_8c_source.html#l00222">vm.c:222</a></div></div>
<div class="ttc" id="adefs_8h_html_a795e27a0cb916cfb41411ebbb9669ddf"><div class="ttname"><a href="../../d5/d64/defs_8h.html#a795e27a0cb916cfb41411ebbb9669ddf">clearpteu</a></div><div class="ttdeci">void clearpteu(pde_t *pgdir, char *uva)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/de9/vm_8c_source.html#l00303">vm.c:303</a></div></div>
<div class="ttc" id="adefs_8h_html_a8a149272578e00e0ce70480004640679"><div class="ttname"><a href="../../d5/d64/defs_8h.html#a8a149272578e00e0ce70480004640679">loaduvm</a></div><div class="ttdeci">int loaduvm(pde_t *, char *, struct inode *, uint, uint)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/de9/vm_8c_source.html#l00198">vm.c:198</a></div></div>
<div class="ttc" id="adefs_8h_html_aa406a54805a570dfe266281876dc5d69"><div class="ttname"><a href="../../d5/d64/defs_8h.html#aa406a54805a570dfe266281876dc5d69">safestrcpy</a></div><div class="ttdeci">char * safestrcpy(char *, const char *, int)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/db0/string_8c_source.html#l00083">string.c:83</a></div></div>
<div class="ttc" id="adefs_8h_html_acde7d3975db286253e584452ba03a54f"><div class="ttname"><a href="../../d5/d64/defs_8h.html#acde7d3975db286253e584452ba03a54f">namei</a></div><div class="ttdeci">struct inode * namei(char *)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d5a/fs_8c_source.html#l00660">fs.c:660</a></div></div>
<div class="ttc" id="adefs_8h_html_ad43d81fa3edec39a200abd0853bc84b1"><div class="ttname"><a href="../../d5/d64/defs_8h.html#ad43d81fa3edec39a200abd0853bc84b1">switchuvm</a></div><div class="ttdeci">void switchuvm(struct proc *)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/de9/vm_8c_source.html#l00157">vm.c:157</a></div></div>
<div class="ttc" id="adefs_8h_html_adff5bb5a1eeaf921853ec06479f8c49b"><div class="ttname"><a href="../../d5/d64/defs_8h.html#adff5bb5a1eeaf921853ec06479f8c49b">iunlockput</a></div><div class="ttdeci">void iunlockput(struct inode *)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d5a/fs_8c_source.html#l00356">fs.c:356</a></div></div>
<div class="ttc" id="adefs_8h_html_af24cf1756e19afd8be8c95d02262cf3a"><div class="ttname"><a href="../../d5/d64/defs_8h.html#af24cf1756e19afd8be8c95d02262cf3a">freevm</a></div><div class="ttdeci">void freevm(pde_t *)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/de9/vm_8c_source.html#l00284">vm.c:284</a></div></div>
<div class="ttc" id="aelf_8h_html_a6a45c035b7a2930e62ac97a6bd8121e9"><div class="ttname"><a href="../../d1/d9e/elf_8h.html#a6a45c035b7a2930e62ac97a6bd8121e9">ELF_PROG_LOAD</a></div><div class="ttdeci">#define ELF_PROG_LOAD</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d9e/elf_8h_source.html#l00037">elf.h:37</a></div></div>
<div class="ttc" id="aelf_8h_html_abb1c2e5626667aacc7b3efd269a6c0eb"><div class="ttname"><a href="../../d1/d9e/elf_8h.html#abb1c2e5626667aacc7b3efd269a6c0eb">ELF_MAGIC</a></div><div class="ttdeci">#define ELF_MAGIC</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d9e/elf_8h_source.html#l00003">elf.h:3</a></div></div>
<div class="ttc" id="ainit_8c_html_abd1a2cf54950f450187ef24c1cdcac0c"><div class="ttname"><a href="../../d8/d60/init_8c.html#abd1a2cf54950f450187ef24c1cdcac0c">argv</a></div><div class="ttdeci">char * argv[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d60/init_8c_source.html#l00008">init.c:8</a></div></div>
<div class="ttc" id="aparam_8h_html_a4c171d1ccc50f0b6ce7ad2f475eeba32"><div class="ttname"><a href="../../d5/d33/param_8h.html#a4c171d1ccc50f0b6ce7ad2f475eeba32">MAXARG</a></div><div class="ttdeci">#define MAXARG</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d33/param_8h_source.html#l00009">param.h:9</a></div></div>
<div class="ttc" id="astructelfhdr_html"><div class="ttname"><a href="../../d7/da8/structelfhdr.html">elfhdr</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d9e/elf_8h_source.html#l00006">elf.h:6</a></div></div>
<div class="ttc" id="astructelfhdr_html_a22ec6f2383f0488ee18a18673398f201"><div class="ttname"><a href="../../d7/da8/structelfhdr.html#a22ec6f2383f0488ee18a18673398f201">elfhdr::elf</a></div><div class="ttdeci">uchar elf[12]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d9e/elf_8h_source.html#l00008">elf.h:8</a></div></div>
<div class="ttc" id="astructproc_html_a56ec07ac1e10ce42adfc8dd2a366071f"><div class="ttname"><a href="../../de/d48/structproc.html#a56ec07ac1e10ce42adfc8dd2a366071f">proc::tf</a></div><div class="ttdeci">struct trapframe * tf</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d03/proc_8h_source.html#l00045">proc.h:45</a></div></div>
<div class="ttc" id="astructproc_html_ad430afc653e9eb6cee33954d5545b79d"><div class="ttname"><a href="../../de/d48/structproc.html#ad430afc653e9eb6cee33954d5545b79d">proc::pgdir</a></div><div class="ttdeci">pde_t * pgdir</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d03/proc_8h_source.html#l00040">proc.h:40</a></div></div>
<div class="ttc" id="astructproghdr_html"><div class="ttname"><a href="../../de/d4f/structproghdr.html">proghdr</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d9e/elf_8h_source.html#l00025">elf.h:25</a></div></div>
<div class="ttc" id="astructtrapframe_html_a886a5973a537894e3a95435f38767d5c"><div class="ttname"><a href="../../df/d05/structtrapframe.html#a886a5973a537894e3a95435f38767d5c">trapframe::eip</a></div><div class="ttdeci">uint eip</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d39/x86_8h_source.html#l00174">x86.h:174</a></div></div>
<div class="ttc" id="astructtrapframe_html_acd319e2dbd720d217c10f8fb620d73e2"><div class="ttname"><a href="../../df/d05/structtrapframe.html#acd319e2dbd720d217c10f8fb620d73e2">trapframe::esp</a></div><div class="ttdeci">uint esp</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d39/x86_8h_source.html#l00180">x86.h:180</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_aa7b4aae4a12acd187e23396214aeca47_cgraph.png" border="0" usemap="#ad5/d64/defs_8h_aa7b4aae4a12acd187e23396214aeca47_cgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_aa7b4aae4a12acd187e23396214aeca47_cgraph" id="ad5/d64/defs_8h_aa7b4aae4a12acd187e23396214aeca47_cgraph">
<area shape="rect" title=" " alt="" coords="5,1841,56,1866"/>
<area shape="rect" href="../../de/de9/vm_8c.html#afea0f0a82a9f9c7aae26f90b5e0836c6" title=" " alt="" coords="104,395,179,421"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="733,155,792,181"/>
<area shape="rect" href="../../d7/df8/log_8c.html#ac96aa31ffc0500e749c62c4d377c21c9" title=" " alt="" coords="589,1130,663,1155"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a41af0935f3989aae450cf8988cd9c3a9" title=" " alt="" coords="983,902,1048,927"/>
<area shape="rect" href="../../d7/df8/log_8c.html#ac0f12be0ca0de555e60b27b06a57a65b" title=" " alt="" coords="594,1409,658,1434"/>
<area shape="rect" href="../../d1/db0/string_8c.html#aca73516e4b2fdb2663e0d26f855ac3ca" title=" " alt="" coords="721,725,804,750"/>
<area shape="rect" href="../../db/d8a/ulib_8c.html#a59b5e6e6105ef0e97aed266ec6fdfe60" title=" " alt="" coords="472,1941,527,1966"/>
<area shape="rect" href="../../de/de9/vm_8c.html#aa883924e2f068c520b695cdc168e1603" title=" " alt="" coords="468,319,531,345"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a795e27a0cb916cfb41411ebbb9669ddf" title=" " alt="" coords="1220,2294,1295,2319"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a532bc3f3e39942c20a471a11cff1a582" title=" " alt="" coords="107,2093,175,2118"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#aed28187406d84a3aa71f10c6235a03ec" title=" " alt="" coords="475,2042,524,2067"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a207b3008bae35596c55ec7c4fc6875eb" title=" " alt="" coords="339,1841,420,1866"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a201acc8337a2893268b61ea5a1ee0d53" title=" " alt="" coords="344,2245,415,2270"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a3aba1fa9f6789d09356aec5b96d91fa8" title=" " alt="" coords="474,2193,525,2218"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a35c52ecf358097c17dcbbd5594acb41a" title=" " alt="" coords="113,2346,170,2371"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a1c8a7a02e9391b5cf0984388216695c0" title=" " alt="" coords="340,1231,419,1257"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a87c90f0ab2a1b11c2b55f4e483bb8493" title=" " alt="" coords="973,1205,1058,1230"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a6d3019ea15a9bfdc5131ae97f3623c49" title=" " alt="" coords="582,193,670,218"/>
<area shape="rect" href="../../d4/def/kalloc_8c.html#aced59ecf8411235f6dffc065236711a5" title=" " alt="" coords="737,269,788,294"/>
<area shape="rect" href="../../db/d8a/ulib_8c.html#aa9cdc2409c15ccd5ee3b2031576f4093" title=" " alt="" coords="852,421,921,446"/>
<area shape="rect" href="../../d4/def/kalloc_8c.html#a5e965f6365c721b5b23c12d16d45c3dc" title=" " alt="" coords="471,1231,527,1257"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#aa1c6e6e76813ccb29a29bb119dba668a" title=" " alt="" coords="233,395,284,421"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="855,1054,919,1079"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="1343,1231,1396,1257"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="855,1358,919,1383"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="969,1103,1061,1129"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="984,1054,1047,1079"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="1227,1029,1288,1054"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="1109,1003,1172,1029"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="1113,1105,1169,1130"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="1444,1231,1536,1257"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#aaf98ef7cdde3a0dfb2e49919de3298b1" title=" " alt="" coords="358,877,401,902"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#acd2e1ded4bb6fce4500438bf928330f4" title=" " alt="" coords="604,611,648,637"/>
<area shape="rect" href="../../df/d5d/umalloc_8c.html#adebb229f063e66907017098087cbe791" title=" " alt="" coords="357,247,401,273"/>
<area shape="rect" href="../../d8/ddb/user_8h.html#a939cb25a305fe68aad9b365077f1a8c7" title=" " alt="" coords="351,297,408,322"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a650cf0caaaa8b75f653c1c92818d03a4" title=" " alt="" coords="743,1231,782,1257"/>
<area shape="rect" href="../../df/d5d/umalloc_8c.html#ac131c16d1dcb6bea908d0237c82e981d" title=" " alt="" coords="349,346,409,371"/>
<area shape="rect" href="../../d5/de1/forktest_8c.html#a249680925885256274fa9f02dd51cec4" title=" " alt="" coords="354,1890,405,1915"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#af6f31822f7e737b4e414bdac1ccb59a4" title=" " alt="" coords="356,395,403,421"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad788da91743c333b5bed7c4a0dd12365" title=" " alt="" coords="858,890,915,915"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#ab3c447f135c68e4c3c1f8d5866f6e77b" title=" " alt="" coords="478,1637,521,1662"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ae70cc0370342e46f6db3bec367232457" title=" " alt="" coords="736,1079,789,1105"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a4a34d9f03e436cfa09b88f735f6ee952" title=" " alt="" coords="729,1383,796,1409"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#aaad2d7a86d4859982dd9a132f5128ff2" title=" " alt="" coords="579,1687,673,1713"/>
<area shape="rect" href="../../d1/db0/string_8c.html#a07f97e2ed1ce37955192d52de8f4911f" title=" " alt="" coords="585,2142,667,2167"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a3436a3bf222c074c4ed4d985f0c1ecef" title=" " alt="" coords="227,2143,291,2169"/>
<area shape="rect" href="../../dc/de6/bio_8c.html#a30b8d2ef2300ed8e3d879a428fe39898" title=" " alt="" coords="599,2093,653,2118"/>
<area shape="rect" href="../../dc/de6/bio_8c.html#ab5335aeb503731104314321a78a6d727" title=" " alt="" coords="734,2042,791,2067"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#ae4e29916219b9293b37f9c34220694fe" title=" " alt="" coords="1109,1941,1172,1966"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_aa7b4aae4a12acd187e23396214aeca47_icgraph.png" border="0" usemap="#ad5/d64/defs_8h_aa7b4aae4a12acd187e23396214aeca47_icgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_aa7b4aae4a12acd187e23396214aeca47_icgraph" id="ad5/d64/defs_8h_aa7b4aae4a12acd187e23396214aeca47_icgraph">
<area shape="rect" title=" " alt="" coords="231,104,281,129"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#ac5b5d4517586be6396b4f3b37445945a" title=" " alt="" coords="104,5,183,31"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a6f94e3b215d069b5419e87bafe80799a" title=" " alt="" coords="107,55,179,80"/>
<area shape="rect" href="../../d8/d60/init_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title=" " alt="" coords="118,104,169,129"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#aedbeff6afe5d4e22330c7e6b5e6df893" title=" " alt="" coords="111,177,176,203"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#aeaa813ddeb6a5fac3c45714c7351c526" title=" " alt="" coords="104,227,183,252"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="5,31,56,56"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title=" " alt="" coords="5,177,56,203"/>
</map>
</div>

</div>
</div>
<a id="aaf98ef7cdde3a0dfb2e49919de3298b1" name="aaf98ef7cdde3a0dfb2e49919de3298b1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaf98ef7cdde3a0dfb2e49919de3298b1">&#9670;&#160;</a></span>exit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void exit </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/dda/proc_8c_source.html#l00228">228</a> of file <a class="el" href="../../d3/dda/proc_8c_source.html">proc.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  229</span>{</div>
<div class="line"><span class="lineno">  230</span>  <span class="keyword">struct </span><a class="code hl_struct" href="../../de/d48/structproc.html">proc</a> *curproc = <a class="code hl_function" href="../../d3/dda/proc_8c.html#a41af0935f3989aae450cf8988cd9c3a9">myproc</a>();</div>
<div class="line"><span class="lineno">  231</span>  <span class="keyword">struct </span><a class="code hl_struct" href="../../de/d48/structproc.html">proc</a> *p;</div>
<div class="line"><span class="lineno">  232</span>  <span class="keywordtype">int</span> fd;</div>
<div class="line"><span class="lineno">  233</span> </div>
<div class="line"><span class="lineno">  234</span>  <span class="keywordflow">if</span>(curproc == initproc)</div>
<div class="line"><span class="lineno">  235</span>    <a class="code hl_function" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a">panic</a>(<span class="stringliteral">&quot;init exiting&quot;</span>);</div>
<div class="line"><span class="lineno">  236</span> </div>
<div class="line"><span class="lineno">  237</span>  <span class="comment">// Close all open files.</span></div>
<div class="line"><span class="lineno">  238</span>  <span class="keywordflow">for</span>(fd = 0; fd &lt; <a class="code hl_define" href="../../d5/d33/param_8h.html#a80bacbaea8dd6aecf216d85d981bcb21">NOFILE</a>; fd++){</div>
<div class="line"><span class="lineno">  239</span>    <span class="keywordflow">if</span>(curproc-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#a4a9eb0352efe3fc097c91fccfaac50bd">ofile</a>[fd]){</div>
<div class="line"><span class="lineno">  240</span>      <a class="code hl_function" href="../../d5/d64/defs_8h.html#ac865ee0b2d70f753d61d1fefef9de0f6">fileclose</a>(curproc-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#a4a9eb0352efe3fc097c91fccfaac50bd">ofile</a>[fd]);</div>
<div class="line"><span class="lineno">  241</span>      curproc-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#a4a9eb0352efe3fc097c91fccfaac50bd">ofile</a>[fd] = 0;</div>
<div class="line"><span class="lineno">  242</span>    }</div>
<div class="line"><span class="lineno">  243</span>  }</div>
<div class="line"><span class="lineno">  244</span> </div>
<div class="line"><span class="lineno">  245</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#a603ca98212e00d2ffdba7827ef0f1003">begin_op</a>();</div>
<div class="line"><span class="lineno">  246</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#a29530a0afdfe924818d8c70b6724528d">iput</a>(curproc-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#a493bc338ce008a838eef521972a35257">cwd</a>);</div>
<div class="line"><span class="lineno">  247</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#a2504e37a109f9bae5ca11fe89e4e8fa1">end_op</a>();</div>
<div class="line"><span class="lineno">  248</span>  curproc-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#a493bc338ce008a838eef521972a35257">cwd</a> = 0;</div>
<div class="line"><span class="lineno">  249</span> </div>
<div class="line"><span class="lineno">  250</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#afe4ef8638f1ecb962a6e67fb086ee3b8">acquire</a>(&amp;<a class="code hl_variable" href="../../d3/dda/proc_8c.html#addf39d613ca9a58e7e6080a2e454421a">ptable</a>.lock);</div>
<div class="line"><span class="lineno">  251</span> </div>
<div class="line"><span class="lineno">  252</span>  <span class="comment">// Parent might be sleeping in wait().</span></div>
<div class="line"><span class="lineno">  253</span>  wakeup1(curproc-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#a14ea8849701ffafba4d142725de154d4">parent</a>);</div>
<div class="line"><span class="lineno">  254</span> </div>
<div class="line"><span class="lineno">  255</span>  <span class="comment">// Pass abandoned children to init.</span></div>
<div class="line"><span class="lineno">  256</span>  <span class="keywordflow">for</span>(p = <a class="code hl_variable" href="../../d3/dda/proc_8c.html#addf39d613ca9a58e7e6080a2e454421a">ptable</a>.proc; p &lt; &amp;<a class="code hl_variable" href="../../d3/dda/proc_8c.html#addf39d613ca9a58e7e6080a2e454421a">ptable</a>.proc[<a class="code hl_define" href="../../d5/d33/param_8h.html#a810c5b751df5bb30588613ed91095129">NPROC</a>]; p++){</div>
<div class="line"><span class="lineno">  257</span>    <span class="keywordflow">if</span>(p-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#a14ea8849701ffafba4d142725de154d4">parent</a> == curproc){</div>
<div class="line"><span class="lineno">  258</span>      p-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#a14ea8849701ffafba4d142725de154d4">parent</a> = initproc;</div>
<div class="line"><span class="lineno">  259</span>      <span class="keywordflow">if</span>(p-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#a0f2fe91548a1382672ae26e29ca9e736">state</a> == <a class="code hl_enumvalue" href="../../df/d03/proc_8h.html#aa1ced7d2b60040fded3fa873d0c03ba7a5dfb36109b24f39d54d5c3f48f53def8">ZOMBIE</a>)</div>
<div class="line"><span class="lineno">  260</span>        wakeup1(initproc);</div>
<div class="line"><span class="lineno">  261</span>    }</div>
<div class="line"><span class="lineno">  262</span>  }</div>
<div class="line"><span class="lineno">  263</span> </div>
<div class="line"><span class="lineno">  264</span>  <span class="comment">// Jump into the scheduler, never to return.</span></div>
<div class="line"><span class="lineno">  265</span>  curproc-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#a0f2fe91548a1382672ae26e29ca9e736">state</a> = <a class="code hl_enumvalue" href="../../df/d03/proc_8h.html#aa1ced7d2b60040fded3fa873d0c03ba7a5dfb36109b24f39d54d5c3f48f53def8">ZOMBIE</a>;</div>
<div class="line"><span class="lineno">  266</span>  <a class="code hl_function" href="../../d3/dda/proc_8c.html#ad788da91743c333b5bed7c4a0dd12365">sched</a>();</div>
<div class="line"><span class="lineno">  267</span>  <a class="code hl_function" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a">panic</a>(<span class="stringliteral">&quot;zombie exit&quot;</span>);</div>
<div class="line"><span class="lineno">  268</span>}</div>
<div class="ttc" id="adefs_8h_html_a29530a0afdfe924818d8c70b6724528d"><div class="ttname"><a href="../../d5/d64/defs_8h.html#a29530a0afdfe924818d8c70b6724528d">iput</a></div><div class="ttdeci">void iput(struct inode *)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d5a/fs_8c_source.html#l00332">fs.c:332</a></div></div>
<div class="ttc" id="adefs_8h_html_ac865ee0b2d70f753d61d1fefef9de0f6"><div class="ttname"><a href="../../d5/d64/defs_8h.html#ac865ee0b2d70f753d61d1fefef9de0f6">fileclose</a></div><div class="ttdeci">void fileclose(struct file *)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l00057">file.c:57</a></div></div>
<div class="ttc" id="aparam_8h_html_a80bacbaea8dd6aecf216d85d981bcb21"><div class="ttname"><a href="../../d5/d33/param_8h.html#a80bacbaea8dd6aecf216d85d981bcb21">NOFILE</a></div><div class="ttdeci">#define NOFILE</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d33/param_8h_source.html#l00004">param.h:4</a></div></div>
<div class="ttc" id="aproc_8c_html_a41af0935f3989aae450cf8988cd9c3a9"><div class="ttname"><a href="../../d3/dda/proc_8c.html#a41af0935f3989aae450cf8988cd9c3a9">myproc</a></div><div class="ttdeci">struct proc * myproc(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dda/proc_8c_source.html#l00058">proc.c:58</a></div></div>
<div class="ttc" id="aproc_8c_html_ad788da91743c333b5bed7c4a0dd12365"><div class="ttname"><a href="../../d3/dda/proc_8c.html#ad788da91743c333b5bed7c4a0dd12365">sched</a></div><div class="ttdeci">void sched(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dda/proc_8c_source.html#l00366">proc.c:366</a></div></div>
<div class="ttc" id="aproc_8h_html_aa1ced7d2b60040fded3fa873d0c03ba7a5dfb36109b24f39d54d5c3f48f53def8"><div class="ttname"><a href="../../df/d03/proc_8h.html#aa1ced7d2b60040fded3fa873d0c03ba7a5dfb36109b24f39d54d5c3f48f53def8">ZOMBIE</a></div><div class="ttdeci">@ ZOMBIE</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d03/proc_8h_source.html#l00035">proc.h:35</a></div></div>
<div class="ttc" id="astructproc_html_a14ea8849701ffafba4d142725de154d4"><div class="ttname"><a href="../../de/d48/structproc.html#a14ea8849701ffafba4d142725de154d4">proc::parent</a></div><div class="ttdeci">struct proc * parent</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d03/proc_8h_source.html#l00044">proc.h:44</a></div></div>
<div class="ttc" id="astructproc_html_a493bc338ce008a838eef521972a35257"><div class="ttname"><a href="../../de/d48/structproc.html#a493bc338ce008a838eef521972a35257">proc::cwd</a></div><div class="ttdeci">struct inode * cwd</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d03/proc_8h_source.html#l00050">proc.h:50</a></div></div>
<div class="ttc" id="astructproc_html_a4a9eb0352efe3fc097c91fccfaac50bd"><div class="ttname"><a href="../../de/d48/structproc.html#a4a9eb0352efe3fc097c91fccfaac50bd">proc::ofile</a></div><div class="ttdeci">struct file * ofile[NOFILE]</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d03/proc_8h_source.html#l00049">proc.h:49</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_aaf98ef7cdde3a0dfb2e49919de3298b1_cgraph.png" border="0" usemap="#ad5/d64/defs_8h_aaf98ef7cdde3a0dfb2e49919de3298b1_cgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_aaf98ef7cdde3a0dfb2e49919de3298b1_cgraph" id="ad5/d64/defs_8h_aaf98ef7cdde3a0dfb2e49919de3298b1_cgraph">
<area shape="rect" title=" " alt="" coords="5,959,48,984"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="1073,1035,1137,1060"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="1556,1260,1609,1285"/>
<area shape="rect" href="../../d7/df8/log_8c.html#ac96aa31ffc0500e749c62c4d377c21c9" title=" " alt="" coords="530,832,605,857"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a41af0935f3989aae450cf8988cd9c3a9" title=" " alt="" coords="943,325,1008,351"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad788da91743c333b5bed7c4a0dd12365" title=" " alt="" coords="812,477,869,503"/>
<area shape="rect" href="../../d7/df8/log_8c.html#ac0f12be0ca0de555e60b27b06a57a65b" title=" " alt="" coords="809,1592,873,1617"/>
<area shape="rect" href="../../d6/d13/file_8c.html#ae557c81ab89c24219146144bb6adaa2c" title=" " alt="" coords="96,1452,167,1477"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#ab3c447f135c68e4c3c1f8d5866f6e77b" title=" " alt="" coords="215,984,257,1009"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="1196,1085,1288,1111"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="1211,579,1273,604"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="1447,705,1508,731"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="1336,680,1399,705"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="1909,93,1965,119"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="1674,1085,1733,1111"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="1674,1135,1733,1160"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="1657,1184,1749,1209"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="1797,1035,1861,1060"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ae70cc0370342e46f6db3bec367232457" title=" " alt="" coords="677,680,731,705"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a9fa00b0be5d3c4781048861e2506eb63" title=" " alt="" coords="936,427,1015,452"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a1d9e7047d3dfb57809a2541d8387705e" title=" " alt="" coords="1077,427,1134,452"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a02ca0670bc1fe12e38453082631ff360" title=" " alt="" coords="1063,528,1148,553"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a87c90f0ab2a1b11c2b55f4e483bb8493" title=" " alt="" coords="1199,680,1285,705"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a4a34d9f03e436cfa09b88f735f6ee952" title=" " alt="" coords="942,1592,1009,1617"/>
<area shape="rect" href="../../d1/d47/pipe_8c.html#a48642f54734698f6f881ee07723292cb" title=" " alt="" coords="802,1732,879,1757"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#aaad2d7a86d4859982dd9a132f5128ff2" title=" " alt="" coords="520,680,615,705"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a7220afa8e5f4bea540eb95879ea7df6e" title=" " alt="" coords="305,1136,369,1161"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#aa997067c2c9bfef15af6fa0a10c20f4a" title=" " alt="" coords="793,1541,888,1567"/>
<area shape="rect" href="../../dc/de6/bio_8c.html#a30b8d2ef2300ed8e3d879a428fe39898" title=" " alt="" coords="417,1060,472,1085"/>
<area shape="rect" href="../../d1/db0/string_8c.html#a07f97e2ed1ce37955192d52de8f4911f" title=" " alt="" coords="663,1136,745,1161"/>
<area shape="rect" href="../../dc/de6/bio_8c.html#ab5335aeb503731104314321a78a6d727" title=" " alt="" coords="675,1288,733,1313"/>
<area shape="rect" href="../../d7/df8/log_8c.html#a7eacb0fbebe5ce4c7d3ddea15908b13d" title=" " alt="" coords="938,1389,1013,1415"/>
<area shape="rect" href="../../da/d9b/memide_8c.html#a7f36b008f02088c86f76e98e05b55af5" title=" " alt="" coords="541,1035,594,1060"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#a6fdbe54cbecd8fc67d74793b27adcf05" title=" " alt="" coords="793,680,888,705"/>
<area shape="rect" href="../../d4/def/kalloc_8c.html#aced59ecf8411235f6dffc065236711a5" title=" " alt="" coords="950,1744,1001,1769"/>
<area shape="rect" href="../../db/d8a/ulib_8c.html#aa9cdc2409c15ccd5ee3b2031576f4093" title=" " alt="" coords="1071,1795,1140,1820"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_aaf98ef7cdde3a0dfb2e49919de3298b1_icgraph.png" border="0" usemap="#ad5/d64/defs_8h_aaf98ef7cdde3a0dfb2e49919de3298b1_icgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_aaf98ef7cdde3a0dfb2e49919de3298b1_icgraph" id="ad5/d64/defs_8h_aaf98ef7cdde3a0dfb2e49919de3298b1_icgraph">
<area shape="rect" title=" " alt="" coords="393,1020,436,1045"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a77cc2edce6e78f22dd9eb377462762f2" title=" " alt="" coords="264,748,333,773"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#ac5b5d4517586be6396b4f3b37445945a" title=" " alt="" coords="259,797,338,823"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#aa0d46fcb43667c805b84ea7e1ff6100a" title=" " alt="" coords="272,847,325,872"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a86fe524d99d69c18a335512cf3405b31" title=" " alt="" coords="271,896,327,921"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a57e55b2d0161d62bb99765ca3de43e35" title=" " alt="" coords="265,945,332,971"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a0b0ff95e564df3c3e8fc977226b75de7" title=" " alt="" coords="266,995,331,1020"/>
<area shape="rect" href="../../d1/d8f/cat_8c.html#a90a33618884bcf5e892297879bc016ff" title=" " alt="" coords="279,5,319,31"/>
<area shape="rect" href="../../d1/d8f/cat_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="136,31,187,56"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a5a12affe4fdfaa172d85da9a6adf98d2" title=" " alt="" coords="259,1044,338,1069"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a425a0efe4f459decf4b5ea14517ab3cf" title=" " alt="" coords="252,1093,345,1119"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#aedd6d3f148dd5c99b47900215c1ac43f" title=" " alt="" coords="272,1143,325,1168"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a8db9f9a2634bab29096bab0b8bc6945c" title=" " alt="" coords="269,551,328,576"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a6f94e3b215d069b5419e87bafe80799a" title=" " alt="" coords="263,1241,335,1267"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a8faab06cc4d48335076b368f02709ee2" title=" " alt="" coords="255,1291,342,1316"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a330ed2370fe27045b8bec1eb0bd7818f" title=" " alt="" coords="265,1340,332,1365"/>
<area shape="rect" href="../../d5/de1/forktest_8c.html#a0ef8ccf57bc8c491407ec513b234f83c" title=" " alt="" coords="265,107,332,132"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a77a4432bc67dfb513f1c1d698c2c4ea6" title=" " alt="" coords="265,1389,333,1415"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#abf4af50e65630225208fef177e267efb" title=" " alt="" coords="264,1488,333,1513"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#ac9fe56d8f6e4ed1c9677b06cb7b325e6" title=" " alt="" coords="266,1537,331,1563"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a267227083b00d0cc3141b34f5152ae04" title=" " alt="" coords="279,1587,319,1612"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a4eeee588d4689a58fc140a7d5d7b0608" title=" " alt="" coords="267,1735,331,1760"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a1740f29f4ce6d3060fd79a9312edc315" title=" " alt="" coords="261,1784,337,1809"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#aa1c6e6e76813ccb29a29bb119dba668a" title=" " alt="" coords="273,1833,324,1859"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a3208ed001a225f5d9ea3fb37f46810c7" title=" " alt="" coords="252,156,345,181"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#ae7c61791dd2cfb8ad59b4c6e87685c07" title=" " alt="" coords="263,205,335,231"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#ada38fdb2913f040f6eeb6189eeb42d32" title=" " alt="" coords="272,1984,325,2009"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#aedbeff6afe5d4e22330c7e6b5e6df893" title=" " alt="" coords="5,2033,71,2059"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a16ae754fb9c5622d44d0c3ce62ad7c49" title=" " alt="" coords="272,255,325,280"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a6b22568d42b584ed4b0dc4e2b0677013" title=" " alt="" coords="271,304,326,329"/>
<area shape="rect" href="../../d7/d1f/mkfs_8c.html#a22ea835ad23cd716a962f30e4882ee80" title=" " alt="" coords="273,1439,324,1464"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a06636ed0cda58c748d68e82d33d1afce" title=" " alt="" coords="264,353,333,379"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a02e1ca3f4db5f4bf8a683a0b7c18cc43" title=" " alt="" coords="263,403,335,428"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a5d39024e15998d6a6865f4cd0f69738b" title=" " alt="" coords="270,452,327,477"/>
<area shape="rect" href="../../dd/d35/sysproc_8c.html#aee72faa31a0c32b410aba558ef1d59f2" title=" " alt="" coords="263,1636,334,1661"/>
<area shape="rect" href="../../dc/d6f/trap_8c.html#a372d166e36c086c91e5f5d81e5fead3a" title=" " alt="" coords="277,1685,321,1711"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a6888f9f6d973f81f73091d1530ad212b" title=" " alt="" coords="279,501,318,527"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a3331ced6fb67502a2e5277260d4f5aec" title=" " alt="" coords="258,600,339,625"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a98d8496ecb698b9400831f2718d805c3" title=" " alt="" coords="254,649,343,675"/>
<area shape="rect" href="../../d3/d7a/wc_8c.html#a4f21d23f0e3167f510b9f393b185751c" title=" " alt="" coords="279,1883,318,1908"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a3a007a46ea6310b39a233e45d439f11a" title=" " alt="" coords="263,699,335,724"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a48ac3cbd37dcf4c4e08b0572b3a0e9f3" title=" " alt="" coords="259,1192,338,1217"/>
<area shape="rect" href="../../d7/d1f/mkfs_8c.html#ac62d827d836d1807e4d6f365f32348bb" title=" " alt="" coords="270,2033,327,2059"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="136,945,187,971"/>
<area shape="rect" href="../../d5/de1/forktest_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title=" " alt="" coords="136,107,187,132"/>
<area shape="rect" href="../../de/de9/vm_8c.html#afea0f0a82a9f9c7aae26f90b5e0836c6" title=" " alt="" coords="124,1833,199,1859"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a1b57bfa0091c9be3ccc16dbb85ce3acf" title=" " alt="" coords="124,1883,199,1908"/>
<area shape="rect" href="../../de/de9/vm_8c.html#ac96c231d4053eaf4322c27d1f2cd9d49" title=" " alt="" coords="129,1784,193,1809"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#a7ae98824a008ffbc5506060227b6faa0" title=" " alt="" coords="136,2033,187,2059"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#a5bfb2661767bf2cc05982adeb9aaf227" title=" " alt="" coords="119,1984,204,2009"/>
</map>
</div>

</div>
</div>
<a id="ab8c95490fad429ac2701653041f2efcf" name="ab8c95490fad429ac2701653041f2efcf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab8c95490fad429ac2701653041f2efcf">&#9670;&#160;</a></span>fetchint()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int fetchint </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d49/types_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>ip</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/dd8/syscall_8c_source.html#l00018">18</a> of file <a class="el" href="../../db/dd8/syscall_8c_source.html">syscall.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   19</span>{</div>
<div class="line"><span class="lineno">   20</span>  <span class="keyword">struct </span><a class="code hl_struct" href="../../de/d48/structproc.html">proc</a> *curproc = <a class="code hl_function" href="../../d5/d64/defs_8h.html#a3d2327db1e34643f4a9e6a07c8cc62c6">myproc</a>();</div>
<div class="line"><span class="lineno">   21</span> </div>
<div class="line"><span class="lineno">   22</span>  <span class="keywordflow">if</span>(addr &gt;= curproc-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#a6e67042bb361124ff287af88efc33e00">sz</a> || addr+4 &gt; curproc-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#a6e67042bb361124ff287af88efc33e00">sz</a>)</div>
<div class="line"><span class="lineno">   23</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">   24</span>  *ip = *(<span class="keywordtype">int</span>*)(addr);</div>
<div class="line"><span class="lineno">   25</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">   26</span>}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_ab8c95490fad429ac2701653041f2efcf_cgraph.png" border="0" usemap="#ad5/d64/defs_8h_ab8c95490fad429ac2701653041f2efcf_cgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_ab8c95490fad429ac2701653041f2efcf_cgraph" id="ad5/d64/defs_8h_ab8c95490fad429ac2701653041f2efcf_cgraph">
<area shape="rect" title=" " alt="" coords="5,170,71,195"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a41af0935f3989aae450cf8988cd9c3a9" title=" " alt="" coords="119,170,184,195"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="232,170,293,195"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="838,447,894,473"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="835,75,897,101"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="459,195,518,221"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="341,297,395,322"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="459,297,518,322"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="443,346,535,371"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="583,221,647,246"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="583,315,647,341"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="695,209,787,234"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="709,258,772,283"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_ab8c95490fad429ac2701653041f2efcf_icgraph.png" border="0" usemap="#ad5/d64/defs_8h_ab8c95490fad429ac2701653041f2efcf_icgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_ab8c95490fad429ac2701653041f2efcf_icgraph" id="ad5/d64/defs_8h_ab8c95490fad429ac2701653041f2efcf_icgraph">
<area shape="rect" title=" " alt="" coords="385,405,451,431"/>
<area shape="rect" href="../../db/dd8/syscall_8c.html#ade56ef2176f85cd61e7b91b400e7d4d3" title=" " alt="" coords="283,355,337,380"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#aeaa813ddeb6a5fac3c45714c7351c526" title=" " alt="" coords="16,357,95,383"/>
<area shape="rect" href="../../db/dd8/syscall_8c.html#a6ade9205d1f46b759cf93b60513a3421" title=" " alt="" coords="167,101,221,127"/>
<area shape="rect" href="../../dd/d35/sysproc_8c.html#a65e52d7f297b2757ffbf46e4deccf188" title=" " alt="" coords="5,5,105,31"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a54bf714d9e898cbdcbc061b280bbfae0" title=" " alt="" coords="18,153,93,179"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a687d939a9e4792af15db96f2c2f34378" title=" " alt="" coords="16,203,95,228"/>
<area shape="rect" href="../../db/dd8/syscall_8c.html#a662eedd65f3e2165093842b80e3bc024" title=" " alt="" coords="167,505,221,531"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a25697aa3d828b5878d38170d724adb27" title=" " alt="" coords="11,604,100,629"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a74e45efc661ca17c068bc283b3842e6d" title=" " alt="" coords="16,655,95,680"/>
<area shape="rect" href="../../dd/d35/sysproc_8c.html#abc90a5b53d06206904d099c62efc1696" title=" " alt="" coords="157,607,231,632"/>
<area shape="rect" href="../../dd/d35/sysproc_8c.html#ad766b54842470b464a6497bb5c514e59" title=" " alt="" coords="161,253,227,279"/>
<area shape="rect" href="../../dd/d35/sysproc_8c.html#ab21d46be776cf6075a997af525a1a628" title=" " alt="" coords="157,355,231,380"/>
<area shape="rect" href="../../dd/d35/sysproc_8c.html#a59778ec9bfa6b6f2100b43fbba000573" title=" " alt="" coords="153,404,235,429"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#ac243c8f20f5fb2e3e257b5007af2c204" title=" " alt="" coords="17,55,93,80"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a9a70db941def46ec25939e6c2d30e399" title=" " alt="" coords="18,104,93,129"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#ad1c5f8693cb35b9605fee09eebdda640" title=" " alt="" coords="16,407,95,432"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a759600870314007ac558871239122fb7" title=" " alt="" coords="20,456,91,481"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a057e5bce2de7a87ebfd2dc33967bca4a" title=" " alt="" coords="14,505,97,531"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#ae1e58ee11d41f643929520d8c1640da7" title=" " alt="" coords="13,555,97,580"/>
</map>
</div>

</div>
</div>
<a id="a386d969a02c926521cf2e1816069a4dc" name="a386d969a02c926521cf2e1816069a4dc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a386d969a02c926521cf2e1816069a4dc">&#9670;&#160;</a></span>fetchstr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int fetchstr </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d49/types_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>pp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/dd8/syscall_8c_source.html#l00032">32</a> of file <a class="el" href="../../db/dd8/syscall_8c_source.html">syscall.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   33</span>{</div>
<div class="line"><span class="lineno">   34</span>  <span class="keywordtype">char</span> *s, *ep;</div>
<div class="line"><span class="lineno">   35</span>  <span class="keyword">struct </span><a class="code hl_struct" href="../../de/d48/structproc.html">proc</a> *curproc = <a class="code hl_function" href="../../d5/d64/defs_8h.html#a3d2327db1e34643f4a9e6a07c8cc62c6">myproc</a>();</div>
<div class="line"><span class="lineno">   36</span> </div>
<div class="line"><span class="lineno">   37</span>  <span class="keywordflow">if</span>(addr &gt;= curproc-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#a6e67042bb361124ff287af88efc33e00">sz</a>)</div>
<div class="line"><span class="lineno">   38</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">   39</span>  *pp = (<span class="keywordtype">char</span>*)addr;</div>
<div class="line"><span class="lineno">   40</span>  ep = (<span class="keywordtype">char</span>*)curproc-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#a6e67042bb361124ff287af88efc33e00">sz</a>;</div>
<div class="line"><span class="lineno">   41</span>  <span class="keywordflow">for</span>(s = *pp; s &lt; ep; s++){</div>
<div class="line"><span class="lineno">   42</span>    <span class="keywordflow">if</span>(*s == 0)</div>
<div class="line"><span class="lineno">   43</span>      <span class="keywordflow">return</span> s - *pp;</div>
<div class="line"><span class="lineno">   44</span>  }</div>
<div class="line"><span class="lineno">   45</span>  <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">   46</span>}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_a386d969a02c926521cf2e1816069a4dc_cgraph.png" border="0" usemap="#ad5/d64/defs_8h_a386d969a02c926521cf2e1816069a4dc_cgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_a386d969a02c926521cf2e1816069a4dc_cgraph" id="ad5/d64/defs_8h_a386d969a02c926521cf2e1816069a4dc_cgraph">
<area shape="rect" title=" " alt="" coords="5,170,72,195"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a41af0935f3989aae450cf8988cd9c3a9" title=" " alt="" coords="120,170,185,195"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="233,170,295,195"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="839,447,895,473"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="836,75,899,101"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="461,195,519,221"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="343,297,396,322"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="461,297,519,322"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="444,346,536,371"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="584,221,648,246"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="584,315,648,341"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="696,209,788,234"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="711,258,773,283"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_a386d969a02c926521cf2e1816069a4dc_icgraph.png" border="0" usemap="#ad5/d64/defs_8h_a386d969a02c926521cf2e1816069a4dc_icgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_a386d969a02c926521cf2e1816069a4dc_icgraph" id="ad5/d64/defs_8h_a386d969a02c926521cf2e1816069a4dc_icgraph">
<area shape="rect" title=" " alt="" coords="245,104,312,129"/>
<area shape="rect" href="../../db/dd8/syscall_8c.html#a662eedd65f3e2165093842b80e3bc024" title=" " alt="" coords="143,129,197,155"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#aeaa813ddeb6a5fac3c45714c7351c526" title=" " alt="" coords="11,5,89,31"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#ad1c5f8693cb35b9605fee09eebdda640" title=" " alt="" coords="11,55,89,80"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a759600870314007ac558871239122fb7" title=" " alt="" coords="15,104,85,129"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a057e5bce2de7a87ebfd2dc33967bca4a" title=" " alt="" coords="9,153,91,179"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a25697aa3d828b5878d38170d724adb27" title=" " alt="" coords="5,203,95,228"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a74e45efc661ca17c068bc283b3842e6d" title=" " alt="" coords="11,252,89,277"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#ae1e58ee11d41f643929520d8c1640da7" title=" " alt="" coords="8,301,92,327"/>
</map>
</div>

</div>
</div>
<a id="ac56b15561658d0e74ce1c53309b8f97d" name="ac56b15561658d0e74ce1c53309b8f97d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac56b15561658d0e74ce1c53309b8f97d">&#9670;&#160;</a></span>filealloc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d7/d3a/structfile.html">file</a> * filealloc </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/d13/file_8c_source.html#l00027">27</a> of file <a class="el" href="../../d6/d13/file_8c_source.html">file.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   28</span>{</div>
<div class="line"><span class="lineno">   29</span>  <span class="keyword">struct </span><a class="code hl_struct" href="../../d7/d3a/structfile.html">file</a> *f;</div>
<div class="line"><span class="lineno">   30</span> </div>
<div class="line"><span class="lineno">   31</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#afe4ef8638f1ecb962a6e67fb086ee3b8">acquire</a>(&amp;<a class="code hl_variable" href="../../d6/d13/file_8c.html#aa3cdfe534b83322d79f0605488e11ecc">ftable</a>.lock);</div>
<div class="line"><span class="lineno">   32</span>  <span class="keywordflow">for</span>(f = <a class="code hl_variable" href="../../d6/d13/file_8c.html#aa3cdfe534b83322d79f0605488e11ecc">ftable</a>.file; f &lt; <a class="code hl_variable" href="../../d6/d13/file_8c.html#aa3cdfe534b83322d79f0605488e11ecc">ftable</a>.file + <a class="code hl_define" href="../../d5/d33/param_8h.html#a8485f4e81de2537e6a0935626167a775">NFILE</a>; f++){</div>
<div class="line"><span class="lineno">   33</span>    <span class="keywordflow">if</span>(f-&gt;<a class="code hl_variable" href="../../d7/d3a/structfile.html#a41c818f828adea488058bca63e4df23f">ref</a> == 0){</div>
<div class="line"><span class="lineno">   34</span>      f-&gt;<a class="code hl_variable" href="../../d7/d3a/structfile.html#a41c818f828adea488058bca63e4df23f">ref</a> = 1;</div>
<div class="line"><span class="lineno">   35</span>      <a class="code hl_function" href="../../d5/d64/defs_8h.html#a4f8616948f3dbce65671f666eed1d669">release</a>(&amp;<a class="code hl_variable" href="../../d6/d13/file_8c.html#aa3cdfe534b83322d79f0605488e11ecc">ftable</a>.lock);</div>
<div class="line"><span class="lineno">   36</span>      <span class="keywordflow">return</span> f;</div>
<div class="line"><span class="lineno">   37</span>    }</div>
<div class="line"><span class="lineno">   38</span>  }</div>
<div class="line"><span class="lineno">   39</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#a4f8616948f3dbce65671f666eed1d669">release</a>(&amp;<a class="code hl_variable" href="../../d6/d13/file_8c.html#aa3cdfe534b83322d79f0605488e11ecc">ftable</a>.lock);</div>
<div class="line"><span class="lineno">   40</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">   41</span>}</div>
<div class="ttc" id="afile_8c_html_aa3cdfe534b83322d79f0605488e11ecc"><div class="ttname"><a href="../../d6/d13/file_8c.html#aa3cdfe534b83322d79f0605488e11ecc">ftable</a></div><div class="ttdeci">struct @3 ftable</div></div>
<div class="ttc" id="aparam_8h_html_a8485f4e81de2537e6a0935626167a775"><div class="ttname"><a href="../../d5/d33/param_8h.html#a8485f4e81de2537e6a0935626167a775">NFILE</a></div><div class="ttdeci">#define NFILE</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d33/param_8h_source.html#l00005">param.h:5</a></div></div>
<div class="ttc" id="astructfile_html"><div class="ttname"><a href="../../d7/d3a/structfile.html">file</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d4d/file_8h_source.html#l00001">file.h:1</a></div></div>
<div class="ttc" id="astructfile_html_a41c818f828adea488058bca63e4df23f"><div class="ttname"><a href="../../d7/d3a/structfile.html#a41c818f828adea488058bca63e4df23f">file::ref</a></div><div class="ttdeci">int ref</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d4d/file_8h_source.html#l00003">file.h:3</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_ac56b15561658d0e74ce1c53309b8f97d_cgraph.png" border="0" usemap="#ad5/d64/defs_8h_ac56b15561658d0e74ce1c53309b8f97d_cgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_ac56b15561658d0e74ce1c53309b8f97d_cgraph" id="ad5/d64/defs_8h_ac56b15561658d0e74ce1c53309b8f97d_cgraph">
<area shape="rect" title=" " alt="" coords="5,119,72,145"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="120,246,184,271"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="833,94,897,119"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="232,347,324,373"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="247,246,309,271"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="483,347,544,373"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="592,195,645,221"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="372,347,435,373"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="945,270,1001,295"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="710,346,769,371"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="710,94,769,119"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="693,143,785,169"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_ac56b15561658d0e74ce1c53309b8f97d_icgraph.png" border="0" usemap="#ad5/d64/defs_8h_ac56b15561658d0e74ce1c53309b8f97d_icgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_ac56b15561658d0e74ce1c53309b8f97d_icgraph" id="ad5/d64/defs_8h_ac56b15561658d0e74ce1c53309b8f97d_icgraph">
<area shape="rect" title=" " alt="" coords="255,31,321,56"/>
<area shape="rect" href="../../d1/d47/pipe_8c.html#a9d6f0c526148e6002b6776619c7563e6" title=" " alt="" coords="131,5,204,31"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a74e45efc661ca17c068bc283b3842e6d" title=" " alt="" coords="128,55,207,80"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a9a70db941def46ec25939e6c2d30e399" title=" " alt="" coords="5,5,80,31"/>
</map>
</div>

</div>
</div>
<a id="ac865ee0b2d70f753d61d1fefef9de0f6" name="ac865ee0b2d70f753d61d1fefef9de0f6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac865ee0b2d70f753d61d1fefef9de0f6">&#9670;&#160;</a></span>fileclose()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fileclose </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d7/d3a/structfile.html">file</a> *&#160;</td>
          <td class="paramname"><em>f</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/d13/file_8c_source.html#l00057">57</a> of file <a class="el" href="../../d6/d13/file_8c_source.html">file.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   58</span>{</div>
<div class="line"><span class="lineno">   59</span>  <span class="keyword">struct </span><a class="code hl_struct" href="../../d7/d3a/structfile.html">file</a> ff;</div>
<div class="line"><span class="lineno">   60</span> </div>
<div class="line"><span class="lineno">   61</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#afe4ef8638f1ecb962a6e67fb086ee3b8">acquire</a>(&amp;<a class="code hl_variable" href="../../d6/d13/file_8c.html#aa3cdfe534b83322d79f0605488e11ecc">ftable</a>.lock);</div>
<div class="line"><span class="lineno">   62</span>  <span class="keywordflow">if</span>(f-&gt;<a class="code hl_variable" href="../../d7/d3a/structfile.html#a41c818f828adea488058bca63e4df23f">ref</a> &lt; 1)</div>
<div class="line"><span class="lineno">   63</span>    <a class="code hl_function" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a">panic</a>(<span class="stringliteral">&quot;fileclose&quot;</span>);</div>
<div class="line"><span class="lineno">   64</span>  <span class="keywordflow">if</span>(--f-&gt;<a class="code hl_variable" href="../../d7/d3a/structfile.html#a41c818f828adea488058bca63e4df23f">ref</a> &gt; 0){</div>
<div class="line"><span class="lineno">   65</span>    <a class="code hl_function" href="../../d5/d64/defs_8h.html#a4f8616948f3dbce65671f666eed1d669">release</a>(&amp;<a class="code hl_variable" href="../../d6/d13/file_8c.html#aa3cdfe534b83322d79f0605488e11ecc">ftable</a>.lock);</div>
<div class="line"><span class="lineno">   66</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">   67</span>  }</div>
<div class="line"><span class="lineno">   68</span>  ff = *f;</div>
<div class="line"><span class="lineno">   69</span>  f-&gt;<a class="code hl_variable" href="../../d7/d3a/structfile.html#a41c818f828adea488058bca63e4df23f">ref</a> = 0;</div>
<div class="line"><span class="lineno">   70</span>  f-&gt;<a class="code hl_variable" href="../../d7/d3a/structfile.html#a3a28c808a8dcd4acf45087ac30c075e7">type</a> = <a class="code hl_enumvalue" href="../../d7/d3a/structfile.html#a4aeeba6a286e58966d853aa1f510d3d5a224e095442d50a6bd1058fd742fb68c7">FD_NONE</a>;</div>
<div class="line"><span class="lineno">   71</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#a4f8616948f3dbce65671f666eed1d669">release</a>(&amp;<a class="code hl_variable" href="../../d6/d13/file_8c.html#aa3cdfe534b83322d79f0605488e11ecc">ftable</a>.lock);</div>
<div class="line"><span class="lineno">   72</span> </div>
<div class="line"><span class="lineno">   73</span>  <span class="keywordflow">if</span>(ff.type == <a class="code hl_enumvalue" href="../../d7/d3a/structfile.html#a4aeeba6a286e58966d853aa1f510d3d5a59fcf59caf6e70c3cc3cc48291b89752">FD_PIPE</a>)</div>
<div class="line"><span class="lineno">   74</span>    <a class="code hl_function" href="../../d5/d64/defs_8h.html#af6220973e389c74782d76ae641a5e7db">pipeclose</a>(ff.pipe, ff.writable);</div>
<div class="line"><span class="lineno">   75</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span>(ff.type == <a class="code hl_enumvalue" href="../../d7/d3a/structfile.html#a4aeeba6a286e58966d853aa1f510d3d5aa5d8c5e0d95ed88367e96ecebfdf326d">FD_INODE</a>){</div>
<div class="line"><span class="lineno">   76</span>    <a class="code hl_function" href="../../d5/d64/defs_8h.html#a603ca98212e00d2ffdba7827ef0f1003">begin_op</a>();</div>
<div class="line"><span class="lineno">   77</span>    <a class="code hl_function" href="../../d5/d64/defs_8h.html#a29530a0afdfe924818d8c70b6724528d">iput</a>(ff.ip);</div>
<div class="line"><span class="lineno">   78</span>    <a class="code hl_function" href="../../d5/d64/defs_8h.html#a2504e37a109f9bae5ca11fe89e4e8fa1">end_op</a>();</div>
<div class="line"><span class="lineno">   79</span>  }</div>
<div class="line"><span class="lineno">   80</span>}</div>
<div class="ttc" id="adefs_8h_html_af6220973e389c74782d76ae641a5e7db"><div class="ttname"><a href="../../d5/d64/defs_8h.html#af6220973e389c74782d76ae641a5e7db">pipeclose</a></div><div class="ttdeci">void pipeclose(struct pipe *, int)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d47/pipe_8c_source.html#l00060">pipe.c:60</a></div></div>
<div class="ttc" id="astructfile_html_a3a28c808a8dcd4acf45087ac30c075e7"><div class="ttname"><a href="../../d7/d3a/structfile.html#a3a28c808a8dcd4acf45087ac30c075e7">file::type</a></div><div class="ttdeci">enum file::@4 type</div></div>
<div class="ttc" id="astructfile_html_a4aeeba6a286e58966d853aa1f510d3d5a224e095442d50a6bd1058fd742fb68c7"><div class="ttname"><a href="../../d7/d3a/structfile.html#a4aeeba6a286e58966d853aa1f510d3d5a224e095442d50a6bd1058fd742fb68c7">file::FD_NONE</a></div><div class="ttdeci">@ FD_NONE</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d4d/file_8h_source.html#l00002">file.h:2</a></div></div>
<div class="ttc" id="astructfile_html_a4aeeba6a286e58966d853aa1f510d3d5a59fcf59caf6e70c3cc3cc48291b89752"><div class="ttname"><a href="../../d7/d3a/structfile.html#a4aeeba6a286e58966d853aa1f510d3d5a59fcf59caf6e70c3cc3cc48291b89752">file::FD_PIPE</a></div><div class="ttdeci">@ FD_PIPE</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d4d/file_8h_source.html#l00002">file.h:2</a></div></div>
<div class="ttc" id="astructfile_html_a4aeeba6a286e58966d853aa1f510d3d5aa5d8c5e0d95ed88367e96ecebfdf326d"><div class="ttname"><a href="../../d7/d3a/structfile.html#a4aeeba6a286e58966d853aa1f510d3d5aa5d8c5e0d95ed88367e96ecebfdf326d">file::FD_INODE</a></div><div class="ttdeci">@ FD_INODE</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d4d/file_8h_source.html#l00002">file.h:2</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_ac865ee0b2d70f753d61d1fefef9de0f6_cgraph.png" border="0" usemap="#ad5/d64/defs_8h_ac865ee0b2d70f753d61d1fefef9de0f6_cgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_ac865ee0b2d70f753d61d1fefef9de0f6_cgraph" id="ad5/d64/defs_8h_ac865ee0b2d70f753d61d1fefef9de0f6_cgraph">
<area shape="rect" title=" " alt="" coords="5,1713,76,1738"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="983,1107,1047,1133"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="1465,1107,1519,1133"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="1707,1183,1771,1209"/>
<area shape="rect" href="../../d7/df8/log_8c.html#ac96aa31ffc0500e749c62c4d377c21c9" title=" " alt="" coords="439,1105,514,1130"/>
<area shape="rect" href="../../d7/df8/log_8c.html#ac0f12be0ca0de555e60b27b06a57a65b" title=" " alt="" coords="718,1611,782,1637"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#ab3c447f135c68e4c3c1f8d5866f6e77b" title=" " alt="" coords="124,1029,167,1054"/>
<area shape="rect" href="../../d1/d47/pipe_8c.html#a48642f54734698f6f881ee07723292cb" title=" " alt="" coords="711,1865,789,1890"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="1105,1158,1197,1183"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="1120,449,1183,474"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="1356,603,1417,629"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="1245,601,1308,626"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="1819,170,1875,195"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="1583,622,1642,647"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="1583,1183,1642,1209"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="1567,1082,1659,1107"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ae70cc0370342e46f6db3bec367232457" title=" " alt="" coords="587,801,640,826"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a41af0935f3989aae450cf8988cd9c3a9" title=" " alt="" coords="852,297,917,322"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad788da91743c333b5bed7c4a0dd12365" title=" " alt="" coords="721,497,779,522"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a9fa00b0be5d3c4781048861e2506eb63" title=" " alt="" coords="845,547,924,573"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a1d9e7047d3dfb57809a2541d8387705e" title=" " alt="" coords="986,499,1043,525"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a02ca0670bc1fe12e38453082631ff360" title=" " alt="" coords="972,601,1057,626"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a87c90f0ab2a1b11c2b55f4e483bb8493" title=" " alt="" coords="1109,651,1194,677"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a4a34d9f03e436cfa09b88f735f6ee952" title=" " alt="" coords="851,1611,918,1637"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#aaad2d7a86d4859982dd9a132f5128ff2" title=" " alt="" coords="429,649,524,674"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a7220afa8e5f4bea540eb95879ea7df6e" title=" " alt="" coords="215,1003,279,1029"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#aa997067c2c9bfef15af6fa0a10c20f4a" title=" " alt="" coords="703,1358,797,1383"/>
<area shape="rect" href="../../dc/de6/bio_8c.html#a30b8d2ef2300ed8e3d879a428fe39898" title=" " alt="" coords="327,927,381,953"/>
<area shape="rect" href="../../d1/db0/string_8c.html#a07f97e2ed1ce37955192d52de8f4911f" title=" " alt="" coords="572,699,655,725"/>
<area shape="rect" href="../../dc/de6/bio_8c.html#ab5335aeb503731104314321a78a6d727" title=" " alt="" coords="585,1243,642,1269"/>
<area shape="rect" href="../../d7/df8/log_8c.html#a7eacb0fbebe5ce4c7d3ddea15908b13d" title=" " alt="" coords="847,1459,922,1485"/>
<area shape="rect" href="../../da/d9b/memide_8c.html#a7f36b008f02088c86f76e98e05b55af5" title=" " alt="" coords="450,851,503,877"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#a6fdbe54cbecd8fc67d74793b27adcf05" title=" " alt="" coords="703,801,797,826"/>
<area shape="rect" href="../../d4/def/kalloc_8c.html#aced59ecf8411235f6dffc065236711a5" title=" " alt="" coords="859,1865,910,1890"/>
<area shape="rect" href="../../db/d8a/ulib_8c.html#aa9cdc2409c15ccd5ee3b2031576f4093" title=" " alt="" coords="980,1915,1049,1941"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_ac865ee0b2d70f753d61d1fefef9de0f6_icgraph.png" border="0" usemap="#ad5/d64/defs_8h_ac865ee0b2d70f753d61d1fefef9de0f6_icgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_ac865ee0b2d70f753d61d1fefef9de0f6_icgraph" id="ad5/d64/defs_8h_ac865ee0b2d70f753d61d1fefef9de0f6_icgraph">
<area shape="rect" title=" " alt="" coords="389,2083,460,2108"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#aaf98ef7cdde3a0dfb2e49919de3298b1" title=" " alt="" coords="279,1044,322,1069"/>
<area shape="rect" href="../../d1/d47/pipe_8c.html#a9d6f0c526148e6002b6776619c7563e6" title=" " alt="" coords="264,2083,337,2108"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a9a70db941def46ec25939e6c2d30e399" title=" " alt="" coords="128,2083,203,2108"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a32945488fd39bc405757177b37cd2250" title=" " alt="" coords="260,2132,341,2157"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a74e45efc661ca17c068bc283b3842e6d" title=" " alt="" coords="261,2181,340,2207"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a77cc2edce6e78f22dd9eb377462762f2" title=" " alt="" coords="131,797,200,823"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#ac5b5d4517586be6396b4f3b37445945a" title=" " alt="" coords="126,847,205,872"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#aa0d46fcb43667c805b84ea7e1ff6100a" title=" " alt="" coords="139,896,192,921"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a86fe524d99d69c18a335512cf3405b31" title=" " alt="" coords="137,945,193,971"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a57e55b2d0161d62bb99765ca3de43e35" title=" " alt="" coords="132,995,199,1020"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a0b0ff95e564df3c3e8fc977226b75de7" title=" " alt="" coords="133,1044,198,1069"/>
<area shape="rect" href="../../d1/d8f/cat_8c.html#a90a33618884bcf5e892297879bc016ff" title=" " alt="" coords="145,107,185,132"/>
<area shape="rect" href="../../d1/d8f/cat_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="13,81,63,107"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a5a12affe4fdfaa172d85da9a6adf98d2" title=" " alt="" coords="126,1093,205,1119"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a425a0efe4f459decf4b5ea14517ab3cf" title=" " alt="" coords="119,1143,212,1168"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#aedd6d3f148dd5c99b47900215c1ac43f" title=" " alt="" coords="139,1192,192,1217"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a8db9f9a2634bab29096bab0b8bc6945c" title=" " alt="" coords="136,600,195,625"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a6f94e3b215d069b5419e87bafe80799a" title=" " alt="" coords="129,1291,201,1316"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a8faab06cc4d48335076b368f02709ee2" title=" " alt="" coords="122,1340,209,1365"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a330ed2370fe27045b8bec1eb0bd7818f" title=" " alt="" coords="132,1389,199,1415"/>
<area shape="rect" href="../../d5/de1/forktest_8c.html#a0ef8ccf57bc8c491407ec513b234f83c" title=" " alt="" coords="132,156,199,181"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a77a4432bc67dfb513f1c1d698c2c4ea6" title=" " alt="" coords="131,1439,199,1464"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#abf4af50e65630225208fef177e267efb" title=" " alt="" coords="131,1537,200,1563"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#ac9fe56d8f6e4ed1c9677b06cb7b325e6" title=" " alt="" coords="133,1587,198,1612"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a267227083b00d0cc3141b34f5152ae04" title=" " alt="" coords="145,1636,185,1661"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a4eeee588d4689a58fc140a7d5d7b0608" title=" " alt="" coords="133,1784,197,1809"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a1740f29f4ce6d3060fd79a9312edc315" title=" " alt="" coords="127,1833,203,1859"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#aa1c6e6e76813ccb29a29bb119dba668a" title=" " alt="" coords="140,1883,191,1908"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a3208ed001a225f5d9ea3fb37f46810c7" title=" " alt="" coords="119,205,212,231"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#ae7c61791dd2cfb8ad59b4c6e87685c07" title=" " alt="" coords="129,255,201,280"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#ada38fdb2913f040f6eeb6189eeb42d32" title=" " alt="" coords="139,2033,192,2059"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#aedbeff6afe5d4e22330c7e6b5e6df893" title=" " alt="" coords="5,2008,71,2033"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a16ae754fb9c5622d44d0c3ce62ad7c49" title=" " alt="" coords="139,304,192,329"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a6b22568d42b584ed4b0dc4e2b0677013" title=" " alt="" coords="138,353,193,379"/>
<area shape="rect" href="../../d7/d1f/mkfs_8c.html#a22ea835ad23cd716a962f30e4882ee80" title=" " alt="" coords="140,1488,191,1513"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a06636ed0cda58c748d68e82d33d1afce" title=" " alt="" coords="131,403,200,428"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a02e1ca3f4db5f4bf8a683a0b7c18cc43" title=" " alt="" coords="129,452,201,477"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a5d39024e15998d6a6865f4cd0f69738b" title=" " alt="" coords="137,501,194,527"/>
<area shape="rect" href="../../dd/d35/sysproc_8c.html#aee72faa31a0c32b410aba558ef1d59f2" title=" " alt="" coords="130,1685,201,1711"/>
<area shape="rect" href="../../dc/d6f/trap_8c.html#a372d166e36c086c91e5f5d81e5fead3a" title=" " alt="" coords="143,1735,187,1760"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a6888f9f6d973f81f73091d1530ad212b" title=" " alt="" coords="146,551,185,576"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a3331ced6fb67502a2e5277260d4f5aec" title=" " alt="" coords="125,649,206,675"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a98d8496ecb698b9400831f2718d805c3" title=" " alt="" coords="121,699,210,724"/>
<area shape="rect" href="../../d3/d7a/wc_8c.html#a4f21d23f0e3167f510b9f393b185751c" title=" " alt="" coords="146,1932,185,1957"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a3a007a46ea6310b39a233e45d439f11a" title=" " alt="" coords="129,748,201,773"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a48ac3cbd37dcf4c4e08b0572b3a0e9f3" title=" " alt="" coords="126,1241,205,1267"/>
<area shape="rect" href="../../d7/d1f/mkfs_8c.html#ac62d827d836d1807e4d6f365f32348bb" title=" " alt="" coords="137,5,194,31"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="13,995,63,1020"/>
<area shape="rect" href="../../d5/de1/forktest_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title=" " alt="" coords="13,156,63,181"/>
</map>
</div>

</div>
</div>
<a id="a67aac4011147fe1ec585211e23580721" name="a67aac4011147fe1ec585211e23580721"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a67aac4011147fe1ec585211e23580721">&#9670;&#160;</a></span>filedup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d7/d3a/structfile.html">file</a> * filedup </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d7/d3a/structfile.html">file</a> *&#160;</td>
          <td class="paramname"><em>f</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/d13/file_8c_source.html#l00045">45</a> of file <a class="el" href="../../d6/d13/file_8c_source.html">file.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   46</span>{</div>
<div class="line"><span class="lineno">   47</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#afe4ef8638f1ecb962a6e67fb086ee3b8">acquire</a>(&amp;<a class="code hl_variable" href="../../d6/d13/file_8c.html#aa3cdfe534b83322d79f0605488e11ecc">ftable</a>.lock);</div>
<div class="line"><span class="lineno">   48</span>  <span class="keywordflow">if</span>(f-&gt;<a class="code hl_variable" href="../../d7/d3a/structfile.html#a41c818f828adea488058bca63e4df23f">ref</a> &lt; 1)</div>
<div class="line"><span class="lineno">   49</span>    <a class="code hl_function" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a">panic</a>(<span class="stringliteral">&quot;filedup&quot;</span>);</div>
<div class="line"><span class="lineno">   50</span>  f-&gt;<a class="code hl_variable" href="../../d7/d3a/structfile.html#a41c818f828adea488058bca63e4df23f">ref</a>++;</div>
<div class="line"><span class="lineno">   51</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#a4f8616948f3dbce65671f666eed1d669">release</a>(&amp;<a class="code hl_variable" href="../../d6/d13/file_8c.html#aa3cdfe534b83322d79f0605488e11ecc">ftable</a>.lock);</div>
<div class="line"><span class="lineno">   52</span>  <span class="keywordflow">return</span> f;</div>
<div class="line"><span class="lineno">   53</span>}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_a67aac4011147fe1ec585211e23580721_cgraph.png" border="0" usemap="#ad5/d64/defs_8h_a67aac4011147fe1ec585211e23580721_cgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_a67aac4011147fe1ec585211e23580721_cgraph" id="ad5/d64/defs_8h_a67aac4011147fe1ec585211e23580721_cgraph">
<area shape="rect" title=" " alt="" coords="5,43,65,69"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="113,195,177,221"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="585,94,639,119"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="827,143,891,169"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="225,297,317,322"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="240,346,303,371"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="476,234,537,259"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="365,246,428,271"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="939,221,995,246"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="703,194,762,219"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="703,143,762,169"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="687,94,779,119"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_a67aac4011147fe1ec585211e23580721_icgraph.png" border="0" usemap="#ad5/d64/defs_8h_a67aac4011147fe1ec585211e23580721_icgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_a67aac4011147fe1ec585211e23580721_icgraph" id="ad5/d64/defs_8h_a67aac4011147fe1ec585211e23580721_icgraph">
<area shape="rect" title=" " alt="" coords="777,521,837,546"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#acd2e1ded4bb6fce4500438bf928330f4" title=" " alt="" coords="672,496,716,521"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a8f8b9e2d98e8b444f23a39ae8992feff" title=" " alt="" coords="659,545,729,570"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#ac5b5d4517586be6396b4f3b37445945a" title=" " alt="" coords="111,572,190,597"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a5a12affe4fdfaa172d85da9a6adf98d2" title=" " alt="" coords="391,268,469,293"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a425a0efe4f459decf4b5ea14517ab3cf" title=" " alt="" coords="245,318,339,344"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a8faab06cc4d48335076b368f02709ee2" title=" " alt="" coords="387,369,473,394"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a330ed2370fe27045b8bec1eb0bd7818f" title=" " alt="" coords="259,420,325,445"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#a7ae98824a008ffbc5506060227b6faa0" title=" " alt="" coords="267,996,317,1021"/>
<area shape="rect" href="../../d5/de1/forktest_8c.html#a0ef8ccf57bc8c491407ec513b234f83c" title=" " alt="" coords="533,1022,599,1048"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a77a4432bc67dfb513f1c1d698c2c4ea6" title=" " alt="" coords="396,470,464,496"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a1740f29f4ce6d3060fd79a9312edc315" title=" " alt="" coords="254,521,330,546"/>
<area shape="rect" href="../../d0/d87/foo_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="541,1072,591,1097"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#aa1c6e6e76813ccb29a29bb119dba668a" title=" " alt="" coords="541,720,591,745"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a3208ed001a225f5d9ea3fb37f46810c7" title=" " alt="" coords="104,870,197,896"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a16ae754fb9c5622d44d0c3ce62ad7c49" title=" " alt="" coords="403,921,457,946"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a026b8c4ab2cb9af17e1c20d533981604" title=" " alt="" coords="257,14,327,40"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a06636ed0cda58c748d68e82d33d1afce" title=" " alt="" coords="116,65,185,90"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a02e1ca3f4db5f4bf8a683a0b7c18cc43" title=" " alt="" coords="530,116,602,141"/>
<area shape="rect" href="../../dd/d35/sysproc_8c.html#a3b05102e512b34446a54334f916ba5cd" title=" " alt="" coords="530,1121,602,1146"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a6888f9f6d973f81f73091d1530ad212b" title=" " alt="" coords="547,166,585,192"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a98d8496ecb698b9400831f2718d805c3" title=" " alt="" coords="521,217,611,242"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="5,394,56,420"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title=" " alt="" coords="5,1021,56,1046"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#aedbeff6afe5d4e22330c7e6b5e6df893" title=" " alt="" coords="118,996,183,1021"/>
<area shape="rect" href="../../d5/de1/forktest_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title=" " alt="" coords="405,1022,455,1048"/>
<area shape="rect" href="../../de/de9/vm_8c.html#afea0f0a82a9f9c7aae26f90b5e0836c6" title=" " alt="" coords="393,669,467,694"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a1b57bfa0091c9be3ccc16dbb85ce3acf" title=" " alt="" coords="393,820,467,845"/>
<area shape="rect" href="../../de/de9/vm_8c.html#ac96c231d4053eaf4322c27d1f2cd9d49" title=" " alt="" coords="398,770,462,796"/>
<area shape="rect" href="../../df/dc9/exec_8c.html#ace32454ed0d37834dcb1cb4f8b727e6e" title=" " alt="" coords="267,669,317,694"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a9c16214741f4fcd088e5eea468709328" title=" " alt="" coords="255,718,329,744"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a6f94e3b215d069b5419e87bafe80799a" title=" " alt="" coords="115,720,187,745"/>
<area shape="rect" href="../../d8/d60/init_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title=" " alt="" coords="125,621,176,646"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#aeaa813ddeb6a5fac3c45714c7351c526" title=" " alt="" coords="111,670,190,696"/>
<area shape="rect" href="../../dd/d35/sysproc_8c.html#ab21d46be776cf6075a997af525a1a628" title=" " alt="" coords="113,769,188,794"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a81c8a6a0cae413bc81aa223f7f7b7205" title=" " alt="" coords="260,820,324,845"/>
</map>
</div>

</div>
</div>
<a id="a66bb5a4b304ea0f851dd999fc8195fa4" name="a66bb5a4b304ea0f851dd999fc8195fa4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a66bb5a4b304ea0f851dd999fc8195fa4">&#9670;&#160;</a></span>fileinit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fileinit </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/d13/file_8c_source.html#l00020">20</a> of file <a class="el" href="../../d6/d13/file_8c_source.html">file.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   21</span>{</div>
<div class="line"><span class="lineno">   22</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#ab56d728e6966819a0260c358d3ac3419">initlock</a>(&amp;<a class="code hl_variable" href="../../d6/d13/file_8c.html#aa3cdfe534b83322d79f0605488e11ecc">ftable</a>.lock, <span class="stringliteral">&quot;ftable&quot;</span>);</div>
<div class="line"><span class="lineno">   23</span>}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_a66bb5a4b304ea0f851dd999fc8195fa4_cgraph.png" border="0" usemap="#ad5/d64/defs_8h_a66bb5a4b304ea0f851dd999fc8195fa4_cgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_a66bb5a4b304ea0f851dd999fc8195fa4_cgraph" id="ad5/d64/defs_8h_a66bb5a4b304ea0f851dd999fc8195fa4_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,61,31"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#abda07b4a007b2e888d9d783920460b89" title=" " alt="" coords="109,5,172,31"/>
</map>
</div>

</div>
</div>
<a id="a6bd1db179155944c9d1fbc89d8b7b162" name="a6bd1db179155944c9d1fbc89d8b7b162"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6bd1db179155944c9d1fbc89d8b7b162">&#9670;&#160;</a></span>fileread()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int fileread </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d7/d3a/structfile.html">file</a> *&#160;</td>
          <td class="paramname"><em>f</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>n</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/d13/file_8c_source.html#l00097">97</a> of file <a class="el" href="../../d6/d13/file_8c_source.html">file.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   98</span>{</div>
<div class="line"><span class="lineno">   99</span>  <span class="keywordtype">int</span> <a class="code hl_variable" href="../../d0/d56/console_8c.html#af10fa12dd785c91e29528fbdc50cf9af">r</a>;</div>
<div class="line"><span class="lineno">  100</span> </div>
<div class="line"><span class="lineno">  101</span>  <span class="keywordflow">if</span>(f-&gt;<a class="code hl_variable" href="../../d7/d3a/structfile.html#a0c5c8eced8bc562dbbecc8d450a6b646">readable</a> == 0)</div>
<div class="line"><span class="lineno">  102</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  103</span>  <span class="keywordflow">if</span>(f-&gt;<a class="code hl_variable" href="../../d7/d3a/structfile.html#a3a28c808a8dcd4acf45087ac30c075e7">type</a> == FD_PIPE)</div>
<div class="line"><span class="lineno">  104</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="../../d5/d64/defs_8h.html#acd589a0d0d6d34b446baf33755eef519">piperead</a>(f-&gt;<a class="code hl_variable" href="../../d7/d3a/structfile.html#a19d83a8d6cb47902fe8c762d2798c198">pipe</a>, addr, n);</div>
<div class="line"><span class="lineno">  105</span>  <span class="keywordflow">if</span>(f-&gt;<a class="code hl_variable" href="../../d7/d3a/structfile.html#a3a28c808a8dcd4acf45087ac30c075e7">type</a> == FD_INODE){</div>
<div class="line"><span class="lineno">  106</span>    <a class="code hl_function" href="../../d5/d64/defs_8h.html#a29a4d743d41fe659f74b0a57fdc25012">ilock</a>(f-&gt;<a class="code hl_variable" href="../../d7/d3a/structfile.html#a4fd095f927715574dc2a4f243690e508">ip</a>);</div>
<div class="line"><span class="lineno">  107</span>    <span class="keywordflow">if</span>((<a class="code hl_variable" href="../../d0/d56/console_8c.html#af10fa12dd785c91e29528fbdc50cf9af">r</a> = <a class="code hl_function" href="../../d5/d64/defs_8h.html#a2415273b06f31f0f2587b7325588a7e4">readi</a>(f-&gt;<a class="code hl_variable" href="../../d7/d3a/structfile.html#a4fd095f927715574dc2a4f243690e508">ip</a>, addr, f-&gt;<a class="code hl_variable" href="../../d7/d3a/structfile.html#a94a911be6cc1b1326728392d8b40150d">off</a>, n)) &gt; 0)</div>
<div class="line"><span class="lineno">  108</span>      f-&gt;<a class="code hl_variable" href="../../d7/d3a/structfile.html#a94a911be6cc1b1326728392d8b40150d">off</a> += <a class="code hl_variable" href="../../d0/d56/console_8c.html#af10fa12dd785c91e29528fbdc50cf9af">r</a>;</div>
<div class="line"><span class="lineno">  109</span>    <a class="code hl_function" href="../../d5/d64/defs_8h.html#af301c10ad8ced77a5dfb2de3a64c666c">iunlock</a>(f-&gt;<a class="code hl_variable" href="../../d7/d3a/structfile.html#a4fd095f927715574dc2a4f243690e508">ip</a>);</div>
<div class="line"><span class="lineno">  110</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="../../d0/d56/console_8c.html#af10fa12dd785c91e29528fbdc50cf9af">r</a>;</div>
<div class="line"><span class="lineno">  111</span>  }</div>
<div class="line"><span class="lineno">  112</span>  <a class="code hl_function" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a">panic</a>(<span class="stringliteral">&quot;fileread&quot;</span>);</div>
<div class="line"><span class="lineno">  113</span>}</div>
<div class="ttc" id="adefs_8h_html_acd589a0d0d6d34b446baf33755eef519"><div class="ttname"><a href="../../d5/d64/defs_8h.html#acd589a0d0d6d34b446baf33755eef519">piperead</a></div><div class="ttdeci">int piperead(struct pipe *, char *, int)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d47/pipe_8c_source.html#l00101">pipe.c:101</a></div></div>
<div class="ttc" id="adefs_8h_html_af301c10ad8ced77a5dfb2de3a64c666c"><div class="ttname"><a href="../../d5/d64/defs_8h.html#af301c10ad8ced77a5dfb2de3a64c666c">iunlock</a></div><div class="ttdeci">void iunlock(struct inode *)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d5a/fs_8c_source.html#l00316">fs.c:316</a></div></div>
<div class="ttc" id="astructfile_html_a0c5c8eced8bc562dbbecc8d450a6b646"><div class="ttname"><a href="../../d7/d3a/structfile.html#a0c5c8eced8bc562dbbecc8d450a6b646">file::readable</a></div><div class="ttdeci">char readable</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d4d/file_8h_source.html#l00004">file.h:4</a></div></div>
<div class="ttc" id="astructfile_html_a19d83a8d6cb47902fe8c762d2798c198"><div class="ttname"><a href="../../d7/d3a/structfile.html#a19d83a8d6cb47902fe8c762d2798c198">file::pipe</a></div><div class="ttdeci">struct pipe * pipe</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d4d/file_8h_source.html#l00006">file.h:6</a></div></div>
<div class="ttc" id="astructfile_html_a4fd095f927715574dc2a4f243690e508"><div class="ttname"><a href="../../d7/d3a/structfile.html#a4fd095f927715574dc2a4f243690e508">file::ip</a></div><div class="ttdeci">struct inode * ip</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d4d/file_8h_source.html#l00007">file.h:7</a></div></div>
<div class="ttc" id="astructfile_html_a94a911be6cc1b1326728392d8b40150d"><div class="ttname"><a href="../../d7/d3a/structfile.html#a94a911be6cc1b1326728392d8b40150d">file::off</a></div><div class="ttdeci">uint off</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d4d/file_8h_source.html#l00008">file.h:8</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_a6bd1db179155944c9d1fbc89d8b7b162_cgraph.png" border="0" usemap="#ad5/d64/defs_8h_a6bd1db179155944c9d1fbc89d8b7b162_cgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_a6bd1db179155944c9d1fbc89d8b7b162_cgraph" id="ad5/d64/defs_8h_a6bd1db179155944c9d1fbc89d8b7b162_cgraph">
<area shape="rect" title=" " alt="" coords="5,1202,69,1227"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#aed28187406d84a3aa71f10c6235a03ec" title=" " alt="" coords="118,1075,167,1101"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="1355,879,1408,905"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#ae4e29916219b9293b37f9c34220694fe" title=" " alt="" coords="471,1226,534,1251"/>
<area shape="rect" href="../../d1/d47/pipe_8c.html#ad4cce6144039b615d139f8660c60293a" title=" " alt="" coords="331,651,401,677"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a3aba1fa9f6789d09356aec5b96d91fa8" title=" " alt="" coords="117,1202,168,1227"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#aaad2d7a86d4859982dd9a132f5128ff2" title=" " alt="" coords="319,803,413,829"/>
<area shape="rect" href="../../dc/de6/bio_8c.html#a30b8d2ef2300ed8e3d879a428fe39898" title=" " alt="" coords="216,1101,271,1126"/>
<area shape="rect" href="../../d1/db0/string_8c.html#a07f97e2ed1ce37955192d52de8f4911f" title=" " alt="" coords="461,1563,544,1589"/>
<area shape="rect" href="../../dc/de6/bio_8c.html#ab5335aeb503731104314321a78a6d727" title=" " alt="" coords="474,1151,531,1177"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="872,753,936,778"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="1596,954,1660,979"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a41af0935f3989aae450cf8988cd9c3a9" title=" " alt="" coords="741,297,807,322"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ae70cc0370342e46f6db3bec367232457" title=" " alt="" coords="476,702,529,727"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="995,854,1087,879"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="1009,461,1072,486"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="1245,297,1307,322"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="1135,398,1197,423"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="1708,341,1764,366"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="1473,702,1531,727"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="1473,854,1531,879"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="1456,903,1548,929"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad788da91743c333b5bed7c4a0dd12365" title=" " alt="" coords="611,499,668,525"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a9fa00b0be5d3c4781048861e2506eb63" title=" " alt="" coords="735,449,813,474"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a1d9e7047d3dfb57809a2541d8387705e" title=" " alt="" coords="875,550,933,575"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a02ca0670bc1fe12e38453082631ff360" title=" " alt="" coords="861,449,947,474"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a87c90f0ab2a1b11c2b55f4e483bb8493" title=" " alt="" coords="998,297,1083,322"/>
<area shape="rect" href="../../da/d9b/memide_8c.html#a7f36b008f02088c86f76e98e05b55af5" title=" " alt="" coords="339,1101,393,1126"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#a6fdbe54cbecd8fc67d74793b27adcf05" title=" " alt="" coords="592,1063,687,1089"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#aa997067c2c9bfef15af6fa0a10c20f4a" title=" " alt="" coords="592,1158,687,1183"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a4a34d9f03e436cfa09b88f735f6ee952" title=" " alt="" coords="741,1158,807,1183"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_a6bd1db179155944c9d1fbc89d8b7b162_icgraph.png" border="0" usemap="#ad5/d64/defs_8h_a6bd1db179155944c9d1fbc89d8b7b162_icgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_a6bd1db179155944c9d1fbc89d8b7b162_icgraph" id="ad5/d64/defs_8h_a6bd1db179155944c9d1fbc89d8b7b162_icgraph">
<area shape="rect" title=" " alt="" coords="128,5,192,31"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a54bf714d9e898cbdcbc061b280bbfae0" title=" " alt="" coords="5,5,80,31"/>
</map>
</div>

</div>
</div>
<a id="ac4979f97957194db01001985b1bfa84e" name="ac4979f97957194db01001985b1bfa84e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac4979f97957194db01001985b1bfa84e">&#9670;&#160;</a></span>filestat()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int filestat </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d7/d3a/structfile.html">file</a> *&#160;</td>
          <td class="paramname"><em>f</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../da/de7/structstat.html">stat</a> *&#160;</td>
          <td class="paramname"><em>st</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/d13/file_8c_source.html#l00084">84</a> of file <a class="el" href="../../d6/d13/file_8c_source.html">file.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   85</span>{</div>
<div class="line"><span class="lineno">   86</span>  <span class="keywordflow">if</span>(f-&gt;<a class="code hl_variable" href="../../d7/d3a/structfile.html#a3a28c808a8dcd4acf45087ac30c075e7">type</a> == FD_INODE){</div>
<div class="line"><span class="lineno">   87</span>    <a class="code hl_function" href="../../d5/d64/defs_8h.html#a29a4d743d41fe659f74b0a57fdc25012">ilock</a>(f-&gt;<a class="code hl_variable" href="../../d7/d3a/structfile.html#a4fd095f927715574dc2a4f243690e508">ip</a>);</div>
<div class="line"><span class="lineno">   88</span>    <a class="code hl_function" href="../../d5/d64/defs_8h.html#a528f45ea5530504abc7113acc2154348">stati</a>(f-&gt;<a class="code hl_variable" href="../../d7/d3a/structfile.html#a4fd095f927715574dc2a4f243690e508">ip</a>, st);</div>
<div class="line"><span class="lineno">   89</span>    <a class="code hl_function" href="../../d5/d64/defs_8h.html#af301c10ad8ced77a5dfb2de3a64c666c">iunlock</a>(f-&gt;<a class="code hl_variable" href="../../d7/d3a/structfile.html#a4fd095f927715574dc2a4f243690e508">ip</a>);</div>
<div class="line"><span class="lineno">   90</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">   91</span>  }</div>
<div class="line"><span class="lineno">   92</span>  <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">   93</span>}</div>
<div class="ttc" id="adefs_8h_html_a528f45ea5530504abc7113acc2154348"><div class="ttname"><a href="../../d5/d64/defs_8h.html#a528f45ea5530504abc7113acc2154348">stati</a></div><div class="ttdeci">void stati(struct inode *, struct stat *)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d5a/fs_8c_source.html#l00440">fs.c:440</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_ac4979f97957194db01001985b1bfa84e_cgraph.png" border="0" usemap="#ad5/d64/defs_8h_ac4979f97957194db01001985b1bfa84e_cgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_ac4979f97957194db01001985b1bfa84e_cgraph" id="ad5/d64/defs_8h_ac4979f97957194db01001985b1bfa84e_cgraph">
<area shape="rect" title=" " alt="" coords="5,1158,67,1183"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#aed28187406d84a3aa71f10c6235a03ec" title=" " alt="" coords="115,1031,164,1057"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#ae4e29916219b9293b37f9c34220694fe" title=" " alt="" coords="467,1158,530,1183"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a4ccff0bd4d9802e709d0af8d71a59861" title=" " alt="" coords="116,1209,163,1234"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#aaad2d7a86d4859982dd9a132f5128ff2" title=" " alt="" coords="315,626,409,651"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="1351,829,1404,854"/>
<area shape="rect" href="../../dc/de6/bio_8c.html#a30b8d2ef2300ed8e3d879a428fe39898" title=" " alt="" coords="212,955,267,981"/>
<area shape="rect" href="../../d1/db0/string_8c.html#a07f97e2ed1ce37955192d52de8f4911f" title=" " alt="" coords="457,1006,540,1031"/>
<area shape="rect" href="../../dc/de6/bio_8c.html#ab5335aeb503731104314321a78a6d727" title=" " alt="" coords="470,1057,527,1082"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="868,778,932,803"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="1592,854,1656,879"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a41af0935f3989aae450cf8988cd9c3a9" title=" " alt="" coords="737,145,803,170"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ae70cc0370342e46f6db3bec367232457" title=" " alt="" coords="472,626,525,651"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="991,803,1083,829"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="1005,449,1068,474"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="1241,442,1303,467"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="1131,449,1193,474"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="1704,322,1760,347"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="1469,449,1527,474"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="1469,879,1527,905"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="1452,778,1544,803"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad788da91743c333b5bed7c4a0dd12365" title=" " alt="" coords="607,379,664,405"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a9fa00b0be5d3c4781048861e2506eb63" title=" " alt="" coords="731,379,809,405"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a1d9e7047d3dfb57809a2541d8387705e" title=" " alt="" coords="871,246,929,271"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a02ca0670bc1fe12e38453082631ff360" title=" " alt="" coords="857,398,943,423"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a87c90f0ab2a1b11c2b55f4e483bb8493" title=" " alt="" coords="994,246,1079,271"/>
<area shape="rect" href="../../da/d9b/memide_8c.html#a7f36b008f02088c86f76e98e05b55af5" title=" " alt="" coords="335,955,389,981"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#a6fdbe54cbecd8fc67d74793b27adcf05" title=" " alt="" coords="588,955,683,981"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#aa997067c2c9bfef15af6fa0a10c20f4a" title=" " alt="" coords="588,1158,683,1183"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a4a34d9f03e436cfa09b88f735f6ee952" title=" " alt="" coords="737,1209,803,1234"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_ac4979f97957194db01001985b1bfa84e_icgraph.png" border="0" usemap="#ad5/d64/defs_8h_ac4979f97957194db01001985b1bfa84e_icgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_ac4979f97957194db01001985b1bfa84e_icgraph" id="ad5/d64/defs_8h_ac4979f97957194db01001985b1bfa84e_icgraph">
<area shape="rect" title=" " alt="" coords="129,5,191,31"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#ac243c8f20f5fb2e3e257b5007af2c204" title=" " alt="" coords="5,5,81,31"/>
</map>
</div>

</div>
</div>
<a id="a90e8980df48fa900fc33de53448a2e18" name="a90e8980df48fa900fc33de53448a2e18"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a90e8980df48fa900fc33de53448a2e18">&#9670;&#160;</a></span>filewrite()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int filewrite </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d7/d3a/structfile.html">file</a> *&#160;</td>
          <td class="paramname"><em>f</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>n</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/d13/file_8c_source.html#l00118">118</a> of file <a class="el" href="../../d6/d13/file_8c_source.html">file.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  119</span>{</div>
<div class="line"><span class="lineno">  120</span>  <span class="keywordtype">int</span> <a class="code hl_variable" href="../../d0/d56/console_8c.html#af10fa12dd785c91e29528fbdc50cf9af">r</a>;</div>
<div class="line"><span class="lineno">  121</span> </div>
<div class="line"><span class="lineno">  122</span>  <span class="keywordflow">if</span>(f-&gt;<a class="code hl_variable" href="../../d7/d3a/structfile.html#a6e1b641ea1551ac4316a0c11a683df45">writable</a> == 0)</div>
<div class="line"><span class="lineno">  123</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  124</span>  <span class="keywordflow">if</span>(f-&gt;<a class="code hl_variable" href="../../d7/d3a/structfile.html#a3a28c808a8dcd4acf45087ac30c075e7">type</a> == FD_PIPE)</div>
<div class="line"><span class="lineno">  125</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="../../d5/d64/defs_8h.html#ae63b0db4ca2cbb2025b89d977c6535b1">pipewrite</a>(f-&gt;<a class="code hl_variable" href="../../d7/d3a/structfile.html#a19d83a8d6cb47902fe8c762d2798c198">pipe</a>, addr, n);</div>
<div class="line"><span class="lineno">  126</span>  <span class="keywordflow">if</span>(f-&gt;<a class="code hl_variable" href="../../d7/d3a/structfile.html#a3a28c808a8dcd4acf45087ac30c075e7">type</a> == FD_INODE){</div>
<div class="line"><span class="lineno">  127</span>    <span class="comment">// write a few blocks at a time to avoid exceeding</span></div>
<div class="line"><span class="lineno">  128</span>    <span class="comment">// the maximum log transaction size, including</span></div>
<div class="line"><span class="lineno">  129</span>    <span class="comment">// i-node, indirect block, allocation blocks,</span></div>
<div class="line"><span class="lineno">  130</span>    <span class="comment">// and 2 blocks of slop for non-aligned writes.</span></div>
<div class="line"><span class="lineno">  131</span>    <span class="comment">// this really belongs lower down, since writei()</span></div>
<div class="line"><span class="lineno">  132</span>    <span class="comment">// might be writing a device like the console.</span></div>
<div class="line"><span class="lineno">  133</span>    <span class="keywordtype">int</span> max = ((<a class="code hl_define" href="../../d5/d33/param_8h.html#a31cde324007b4e52bbba7079ec5e5f45">MAXOPBLOCKS</a>-1-1-2) / 2) * 512;</div>
<div class="line"><span class="lineno">  134</span>    <span class="keywordtype">int</span> i = 0;</div>
<div class="line"><span class="lineno">  135</span>    <span class="keywordflow">while</span>(i &lt; n){</div>
<div class="line"><span class="lineno">  136</span>      <span class="keywordtype">int</span> n1 = n - i;</div>
<div class="line"><span class="lineno">  137</span>      <span class="keywordflow">if</span>(n1 &gt; max)</div>
<div class="line"><span class="lineno">  138</span>        n1 = max;</div>
<div class="line"><span class="lineno">  139</span> </div>
<div class="line"><span class="lineno">  140</span>      <a class="code hl_function" href="../../d5/d64/defs_8h.html#a603ca98212e00d2ffdba7827ef0f1003">begin_op</a>();</div>
<div class="line"><span class="lineno">  141</span>      <a class="code hl_function" href="../../d5/d64/defs_8h.html#a29a4d743d41fe659f74b0a57fdc25012">ilock</a>(f-&gt;<a class="code hl_variable" href="../../d7/d3a/structfile.html#a4fd095f927715574dc2a4f243690e508">ip</a>);</div>
<div class="line"><span class="lineno">  142</span>      <span class="keywordflow">if</span> ((<a class="code hl_variable" href="../../d0/d56/console_8c.html#af10fa12dd785c91e29528fbdc50cf9af">r</a> = <a class="code hl_function" href="../../d5/d64/defs_8h.html#a515876d4653cefef4732806ef7f2833f">writei</a>(f-&gt;<a class="code hl_variable" href="../../d7/d3a/structfile.html#a4fd095f927715574dc2a4f243690e508">ip</a>, addr + i, f-&gt;<a class="code hl_variable" href="../../d7/d3a/structfile.html#a94a911be6cc1b1326728392d8b40150d">off</a>, n1)) &gt; 0)</div>
<div class="line"><span class="lineno">  143</span>        f-&gt;<a class="code hl_variable" href="../../d7/d3a/structfile.html#a94a911be6cc1b1326728392d8b40150d">off</a> += <a class="code hl_variable" href="../../d0/d56/console_8c.html#af10fa12dd785c91e29528fbdc50cf9af">r</a>;</div>
<div class="line"><span class="lineno">  144</span>      <a class="code hl_function" href="../../d5/d64/defs_8h.html#af301c10ad8ced77a5dfb2de3a64c666c">iunlock</a>(f-&gt;<a class="code hl_variable" href="../../d7/d3a/structfile.html#a4fd095f927715574dc2a4f243690e508">ip</a>);</div>
<div class="line"><span class="lineno">  145</span>      <a class="code hl_function" href="../../d5/d64/defs_8h.html#a2504e37a109f9bae5ca11fe89e4e8fa1">end_op</a>();</div>
<div class="line"><span class="lineno">  146</span> </div>
<div class="line"><span class="lineno">  147</span>      <span class="keywordflow">if</span>(<a class="code hl_variable" href="../../d0/d56/console_8c.html#af10fa12dd785c91e29528fbdc50cf9af">r</a> &lt; 0)</div>
<div class="line"><span class="lineno">  148</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  149</span>      <span class="keywordflow">if</span>(<a class="code hl_variable" href="../../d0/d56/console_8c.html#af10fa12dd785c91e29528fbdc50cf9af">r</a> != n1)</div>
<div class="line"><span class="lineno">  150</span>        <a class="code hl_function" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a">panic</a>(<span class="stringliteral">&quot;short filewrite&quot;</span>);</div>
<div class="line"><span class="lineno">  151</span>      i += <a class="code hl_variable" href="../../d0/d56/console_8c.html#af10fa12dd785c91e29528fbdc50cf9af">r</a>;</div>
<div class="line"><span class="lineno">  152</span>    }</div>
<div class="line"><span class="lineno">  153</span>    <span class="keywordflow">return</span> i == n ? n : -1;</div>
<div class="line"><span class="lineno">  154</span>  }</div>
<div class="line"><span class="lineno">  155</span>  <a class="code hl_function" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a">panic</a>(<span class="stringliteral">&quot;filewrite&quot;</span>);</div>
<div class="line"><span class="lineno">  156</span>}</div>
<div class="ttc" id="adefs_8h_html_a515876d4653cefef4732806ef7f2833f"><div class="ttname"><a href="../../d5/d64/defs_8h.html#a515876d4653cefef4732806ef7f2833f">writei</a></div><div class="ttdeci">int writei(struct inode *, char *, uint, uint)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d5a/fs_8c_source.html#l00482">fs.c:482</a></div></div>
<div class="ttc" id="adefs_8h_html_ae63b0db4ca2cbb2025b89d977c6535b1"><div class="ttname"><a href="../../d5/d64/defs_8h.html#ae63b0db4ca2cbb2025b89d977c6535b1">pipewrite</a></div><div class="ttdeci">int pipewrite(struct pipe *, char *, int)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d47/pipe_8c_source.html#l00079">pipe.c:79</a></div></div>
<div class="ttc" id="astructfile_html_a6e1b641ea1551ac4316a0c11a683df45"><div class="ttname"><a href="../../d7/d3a/structfile.html#a6e1b641ea1551ac4316a0c11a683df45">file::writable</a></div><div class="ttdeci">char writable</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d4d/file_8h_source.html#l00005">file.h:5</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_a90e8980df48fa900fc33de53448a2e18_cgraph.png" border="0" usemap="#ad5/d64/defs_8h_a90e8980df48fa900fc33de53448a2e18_cgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_a90e8980df48fa900fc33de53448a2e18_cgraph" id="ad5/d64/defs_8h_a90e8980df48fa900fc33de53448a2e18_cgraph">
<area shape="rect" title=" " alt="" coords="5,1158,72,1183"/>
<area shape="rect" href="../../d7/df8/log_8c.html#ac96aa31ffc0500e749c62c4d377c21c9" title=" " alt="" coords="446,769,521,794"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="1472,1006,1525,1031"/>
<area shape="rect" href="../../d7/df8/log_8c.html#ac0f12be0ca0de555e60b27b06a57a65b" title=" " alt="" coords="725,1361,789,1386"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#aed28187406d84a3aa71f10c6235a03ec" title=" " alt="" coords="229,1234,278,1259"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#ae4e29916219b9293b37f9c34220694fe" title=" " alt="" coords="589,1399,651,1425"/>
<area shape="rect" href="../../d1/d47/pipe_8c.html#acfca0fab7d2c0c0dcc56359c8febe14a" title=" " alt="" coords="446,706,521,731"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a15858f4d8a4cc1def3d84d03c312836b" title=" " alt="" coords="120,1538,173,1563"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="989,1006,1053,1031"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="1713,1031,1777,1057"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ae70cc0370342e46f6db3bec367232457" title=" " alt="" coords="593,706,647,731"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="1112,1057,1204,1082"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="1127,297,1189,322"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="1363,525,1424,550"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="1252,550,1315,575"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="1825,297,1881,322"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="1590,702,1649,727"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="1590,1057,1649,1082"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="1573,955,1665,981"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a41af0935f3989aae450cf8988cd9c3a9" title=" " alt="" coords="859,550,924,575"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad788da91743c333b5bed7c4a0dd12365" title=" " alt="" coords="728,373,785,398"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a9fa00b0be5d3c4781048861e2506eb63" title=" " alt="" coords="852,373,931,398"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a1d9e7047d3dfb57809a2541d8387705e" title=" " alt="" coords="993,246,1050,271"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a02ca0670bc1fe12e38453082631ff360" title=" " alt="" coords="979,449,1064,474"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a87c90f0ab2a1b11c2b55f4e483bb8493" title=" " alt="" coords="1115,499,1201,525"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a4a34d9f03e436cfa09b88f735f6ee952" title=" " alt="" coords="858,1411,925,1437"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#aaad2d7a86d4859982dd9a132f5128ff2" title=" " alt="" coords="436,655,531,681"/>
<area shape="rect" href="../../dc/de6/bio_8c.html#a30b8d2ef2300ed8e3d879a428fe39898" title=" " alt="" coords="333,1423,388,1449"/>
<area shape="rect" href="../../d1/db0/string_8c.html#a07f97e2ed1ce37955192d52de8f4911f" title=" " alt="" coords="579,1715,661,1741"/>
<area shape="rect" href="../../dc/de6/bio_8c.html#ab5335aeb503731104314321a78a6d727" title=" " alt="" coords="591,1487,649,1513"/>
<area shape="rect" href="../../da/d9b/memide_8c.html#a7f36b008f02088c86f76e98e05b55af5" title=" " alt="" coords="457,1411,510,1437"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#a6fdbe54cbecd8fc67d74793b27adcf05" title=" " alt="" coords="709,1259,804,1285"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#aa997067c2c9bfef15af6fa0a10c20f4a" title=" " alt="" coords="709,1462,804,1487"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a7220afa8e5f4bea540eb95879ea7df6e" title=" " alt="" coords="221,1563,285,1589"/>
<area shape="rect" href="../../d7/df8/log_8c.html#a7eacb0fbebe5ce4c7d3ddea15908b13d" title=" " alt="" coords="854,1665,929,1690"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_a90e8980df48fa900fc33de53448a2e18_icgraph.png" border="0" usemap="#ad5/d64/defs_8h_a90e8980df48fa900fc33de53448a2e18_icgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_a90e8980df48fa900fc33de53448a2e18_icgraph" id="ad5/d64/defs_8h_a90e8980df48fa900fc33de53448a2e18_icgraph">
<area shape="rect" title=" " alt="" coords="132,5,199,31"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a687d939a9e4792af15db96f2c2f34378" title=" " alt="" coords="5,5,84,31"/>
</map>
</div>

</div>
</div>
<a id="acd2e1ded4bb6fce4500438bf928330f4" name="acd2e1ded4bb6fce4500438bf928330f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acd2e1ded4bb6fce4500438bf928330f4">&#9670;&#160;</a></span>fork()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int fork </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/dda/proc_8c_source.html#l00181">181</a> of file <a class="el" href="../../d3/dda/proc_8c_source.html">proc.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  182</span>{</div>
<div class="line"><span class="lineno">  183</span>  <span class="keywordtype">int</span> i, pid;</div>
<div class="line"><span class="lineno">  184</span>  <span class="keyword">struct </span><a class="code hl_struct" href="../../de/d48/structproc.html">proc</a> *np;</div>
<div class="line"><span class="lineno">  185</span>  <span class="keyword">struct </span><a class="code hl_struct" href="../../de/d48/structproc.html">proc</a> *curproc = <a class="code hl_function" href="../../d3/dda/proc_8c.html#a41af0935f3989aae450cf8988cd9c3a9">myproc</a>();</div>
<div class="line"><span class="lineno">  186</span> </div>
<div class="line"><span class="lineno">  187</span>  <span class="comment">// Allocate process.</span></div>
<div class="line"><span class="lineno">  188</span>  <span class="keywordflow">if</span>((np = allocproc()) == 0){</div>
<div class="line"><span class="lineno">  189</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  190</span>  }</div>
<div class="line"><span class="lineno">  191</span> </div>
<div class="line"><span class="lineno">  192</span>  <span class="comment">// Copy process state from proc.</span></div>
<div class="line"><span class="lineno">  193</span>  <span class="keywordflow">if</span>((np-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#ad430afc653e9eb6cee33954d5545b79d">pgdir</a> = <a class="code hl_function" href="../../d5/d64/defs_8h.html#a8caec506ffa8f9386b0434e4cd5aa2b8">copyuvm</a>(curproc-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#ad430afc653e9eb6cee33954d5545b79d">pgdir</a>, curproc-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#a6e67042bb361124ff287af88efc33e00">sz</a>)) == 0){</div>
<div class="line"><span class="lineno">  194</span>    <a class="code hl_function" href="../../d5/d64/defs_8h.html#ae79d6a7d0901b7c081cfded3f916d5bd">kfree</a>(np-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#a9f556df98482bff6c9216013d7581ae4">kstack</a>);</div>
<div class="line"><span class="lineno">  195</span>    np-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#a9f556df98482bff6c9216013d7581ae4">kstack</a> = 0;</div>
<div class="line"><span class="lineno">  196</span>    np-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#a0f2fe91548a1382672ae26e29ca9e736">state</a> = <a class="code hl_enumvalue" href="../../df/d03/proc_8h.html#aa1ced7d2b60040fded3fa873d0c03ba7aa09b651ef326a9d8efcee5cc5b720ab4">UNUSED</a>;</div>
<div class="line"><span class="lineno">  197</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  198</span>  }</div>
<div class="line"><span class="lineno">  199</span>  np-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#a6e67042bb361124ff287af88efc33e00">sz</a> = curproc-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#a6e67042bb361124ff287af88efc33e00">sz</a>;</div>
<div class="line"><span class="lineno">  200</span>  np-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#a14ea8849701ffafba4d142725de154d4">parent</a> = curproc;</div>
<div class="line"><span class="lineno">  201</span>  *np-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#a56ec07ac1e10ce42adfc8dd2a366071f">tf</a> = *curproc-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#a56ec07ac1e10ce42adfc8dd2a366071f">tf</a>;</div>
<div class="line"><span class="lineno">  202</span> </div>
<div class="line"><span class="lineno">  203</span>  <span class="comment">// Clear %eax so that fork returns 0 in the child.</span></div>
<div class="line"><span class="lineno">  204</span>  np-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#a56ec07ac1e10ce42adfc8dd2a366071f">tf</a>-&gt;<a class="code hl_variable" href="../../df/d05/structtrapframe.html#ab1dd3a10936b61129d7395c3a21bc2fe">eax</a> = 0;</div>
<div class="line"><span class="lineno">  205</span> </div>
<div class="line"><span class="lineno">  206</span>  <span class="keywordflow">for</span>(i = 0; i &lt; <a class="code hl_define" href="../../d5/d33/param_8h.html#a80bacbaea8dd6aecf216d85d981bcb21">NOFILE</a>; i++)</div>
<div class="line"><span class="lineno">  207</span>    <span class="keywordflow">if</span>(curproc-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#a4a9eb0352efe3fc097c91fccfaac50bd">ofile</a>[i])</div>
<div class="line"><span class="lineno">  208</span>      np-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#a4a9eb0352efe3fc097c91fccfaac50bd">ofile</a>[i] = <a class="code hl_function" href="../../d5/d64/defs_8h.html#a67aac4011147fe1ec585211e23580721">filedup</a>(curproc-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#a4a9eb0352efe3fc097c91fccfaac50bd">ofile</a>[i]);</div>
<div class="line"><span class="lineno">  209</span>  np-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#a493bc338ce008a838eef521972a35257">cwd</a> = <a class="code hl_function" href="../../d5/d64/defs_8h.html#a02a4eb876d45b936de1adc73bff02ebf">idup</a>(curproc-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#a493bc338ce008a838eef521972a35257">cwd</a>);</div>
<div class="line"><span class="lineno">  210</span> </div>
<div class="line"><span class="lineno">  211</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#aa406a54805a570dfe266281876dc5d69">safestrcpy</a>(np-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#ac04af53e17d24b90c3cbfab56d658d62">name</a>, curproc-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#ac04af53e17d24b90c3cbfab56d658d62">name</a>, <span class="keyword">sizeof</span>(curproc-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#ac04af53e17d24b90c3cbfab56d658d62">name</a>));</div>
<div class="line"><span class="lineno">  212</span> </div>
<div class="line"><span class="lineno">  213</span>  <a class="code hl_variable" href="../../de/d48/structproc.html#acf2bdf54d1f957ccbcdc987007029944">pid</a> = np-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#acf2bdf54d1f957ccbcdc987007029944">pid</a>;</div>
<div class="line"><span class="lineno">  214</span> </div>
<div class="line"><span class="lineno">  215</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#afe4ef8638f1ecb962a6e67fb086ee3b8">acquire</a>(&amp;<a class="code hl_variable" href="../../d3/dda/proc_8c.html#addf39d613ca9a58e7e6080a2e454421a">ptable</a>.lock);</div>
<div class="line"><span class="lineno">  216</span> </div>
<div class="line"><span class="lineno">  217</span>  np-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#a0f2fe91548a1382672ae26e29ca9e736">state</a> = <a class="code hl_enumvalue" href="../../df/d03/proc_8h.html#aa1ced7d2b60040fded3fa873d0c03ba7a269b90433e40460a2c0044a0b3e15694">RUNNABLE</a>;</div>
<div class="line"><span class="lineno">  218</span> </div>
<div class="line"><span class="lineno">  219</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#a4f8616948f3dbce65671f666eed1d669">release</a>(&amp;<a class="code hl_variable" href="../../d3/dda/proc_8c.html#addf39d613ca9a58e7e6080a2e454421a">ptable</a>.lock);</div>
<div class="line"><span class="lineno">  220</span> </div>
<div class="line"><span class="lineno">  221</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="../../de/d48/structproc.html#acf2bdf54d1f957ccbcdc987007029944">pid</a>;</div>
<div class="line"><span class="lineno">  222</span>}</div>
<div class="ttc" id="adefs_8h_html_a02a4eb876d45b936de1adc73bff02ebf"><div class="ttname"><a href="../../d5/d64/defs_8h.html#a02a4eb876d45b936de1adc73bff02ebf">idup</a></div><div class="ttdeci">struct inode * idup(struct inode *)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d5a/fs_8c_source.html#l00277">fs.c:277</a></div></div>
<div class="ttc" id="adefs_8h_html_a67aac4011147fe1ec585211e23580721"><div class="ttname"><a href="../../d5/d64/defs_8h.html#a67aac4011147fe1ec585211e23580721">filedup</a></div><div class="ttdeci">struct file * filedup(struct file *)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l00045">file.c:45</a></div></div>
<div class="ttc" id="adefs_8h_html_a8caec506ffa8f9386b0434e4cd5aa2b8"><div class="ttname"><a href="../../d5/d64/defs_8h.html#a8caec506ffa8f9386b0434e4cd5aa2b8">copyuvm</a></div><div class="ttdeci">pde_t * copyuvm(pde_t *, uint)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/de9/vm_8c_source.html#l00316">vm.c:316</a></div></div>
<div class="ttc" id="aproc_8h_html_aa1ced7d2b60040fded3fa873d0c03ba7aa09b651ef326a9d8efcee5cc5b720ab4"><div class="ttname"><a href="../../df/d03/proc_8h.html#aa1ced7d2b60040fded3fa873d0c03ba7aa09b651ef326a9d8efcee5cc5b720ab4">UNUSED</a></div><div class="ttdeci">@ UNUSED</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d03/proc_8h_source.html#l00035">proc.h:35</a></div></div>
<div class="ttc" id="astructproc_html_a9f556df98482bff6c9216013d7581ae4"><div class="ttname"><a href="../../de/d48/structproc.html#a9f556df98482bff6c9216013d7581ae4">proc::kstack</a></div><div class="ttdeci">char * kstack</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d03/proc_8h_source.html#l00041">proc.h:41</a></div></div>
<div class="ttc" id="astructtrapframe_html_ab1dd3a10936b61129d7395c3a21bc2fe"><div class="ttname"><a href="../../df/d05/structtrapframe.html#ab1dd3a10936b61129d7395c3a21bc2fe">trapframe::eax</a></div><div class="ttdeci">uint eax</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d39/x86_8h_source.html#l00159">x86.h:159</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_acd2e1ded4bb6fce4500438bf928330f4_cgraph.png" border="0" usemap="#ad5/d64/defs_8h_acd2e1ded4bb6fce4500438bf928330f4_cgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_acd2e1ded4bb6fce4500438bf928330f4_cgraph" id="ad5/d64/defs_8h_acd2e1ded4bb6fce4500438bf928330f4_cgraph">
<area shape="rect" title=" " alt="" coords="5,879,49,905"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="1189,1309,1253,1334"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="1905,1815,1969,1841"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a1b57bfa0091c9be3ccc16dbb85ce3acf" title=" " alt="" coords="101,575,176,601"/>
<area shape="rect" href="../../d4/def/kalloc_8c.html#aced59ecf8411235f6dffc065236711a5" title=" " alt="" coords="1074,246,1125,271"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a41af0935f3989aae450cf8988cd9c3a9" title=" " alt="" coords="1067,2271,1132,2297"/>
<area shape="rect" href="../../d6/d13/file_8c.html#a9ef0346d08d8ed79ce2a9c03f9a4b4b2" title=" " alt="" coords="1069,1917,1129,1942"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a24a91383ab80b4b8a1ef1f4df896035c" title=" " alt="" coords="1076,499,1123,525"/>
<area shape="rect" href="../../d1/db0/string_8c.html#aca73516e4b2fdb2663e0d26f855ac3ca" title=" " alt="" coords="97,2525,180,2550"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="1304,1258,1396,1283"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="1319,1765,1381,1790"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="1555,1663,1616,1689"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="1664,1157,1717,1182"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="1444,1613,1507,1638"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="2017,2423,2073,2449"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="1782,1359,1841,1385"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="1782,1207,1841,1233"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="1765,1106,1857,1131"/>
<area shape="rect" href="../../de/de9/vm_8c.html#aa883924e2f068c520b695cdc168e1603" title=" " alt="" coords="797,347,859,373"/>
<area shape="rect" href="../../d4/def/kalloc_8c.html#a5e965f6365c721b5b23c12d16d45c3dc" title=" " alt="" coords="937,474,993,499"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#aa1c6e6e76813ccb29a29bb119dba668a" title=" " alt="" coords="228,879,279,905"/>
<area shape="rect" href="../../d1/db0/string_8c.html#a07f97e2ed1ce37955192d52de8f4911f" title=" " alt="" coords="787,1310,869,1335"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a1c8a7a02e9391b5cf0984388216695c0" title=" " alt="" coords="652,398,731,423"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a6d3019ea15a9bfdc5131ae97f3623c49" title=" " alt="" coords="921,297,1009,322"/>
<area shape="rect" href="../../db/d8a/ulib_8c.html#aa9cdc2409c15ccd5ee3b2031576f4093" title=" " alt="" coords="1187,119,1256,145"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#aaf98ef7cdde3a0dfb2e49919de3298b1" title=" " alt="" coords="335,1614,378,1639"/>
<area shape="rect" href="../../df/d5d/umalloc_8c.html#adebb229f063e66907017098087cbe791" title=" " alt="" coords="335,1002,379,1027"/>
<area shape="rect" href="../../d8/ddb/user_8h.html#a939cb25a305fe68aad9b365077f1a8c7" title=" " alt="" coords="328,854,385,879"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a650cf0caaaa8b75f653c1c92818d03a4" title=" " alt="" coords="1080,702,1119,727"/>
<area shape="rect" href="../../df/d5d/umalloc_8c.html#ac131c16d1dcb6bea908d0237c82e981d" title=" " alt="" coords="327,903,387,929"/>
<area shape="rect" href="../../d5/de1/forktest_8c.html#a249680925885256274fa9f02dd51cec4" title=" " alt="" coords="331,953,382,978"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#af6f31822f7e737b4e414bdac1ccb59a4" title=" " alt="" coords="668,753,715,778"/>
<area shape="rect" href="../../d7/df8/log_8c.html#ac96aa31ffc0500e749c62c4d377c21c9" title=" " alt="" coords="654,1158,729,1183"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad788da91743c333b5bed7c4a0dd12365" title=" " alt="" coords="936,2018,993,2043"/>
<area shape="rect" href="../../d7/df8/log_8c.html#ac0f12be0ca0de555e60b27b06a57a65b" title=" " alt="" coords="933,1614,997,1639"/>
<area shape="rect" href="../../d6/d13/file_8c.html#ae557c81ab89c24219146144bb6adaa2c" title=" " alt="" coords="435,1234,505,1259"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#ab3c447f135c68e4c3c1f8d5866f6e77b" title=" " alt="" coords="553,1665,596,1690"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ae70cc0370342e46f6db3bec367232457" title=" " alt="" coords="801,1209,855,1234"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a9fa00b0be5d3c4781048861e2506eb63" title=" " alt="" coords="1060,2069,1139,2094"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a1d9e7047d3dfb57809a2541d8387705e" title=" " alt="" coords="1193,2069,1250,2094"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a4a34d9f03e436cfa09b88f735f6ee952" title=" " alt="" coords="1066,1613,1133,1638"/>
<area shape="rect" href="../../d1/d47/pipe_8c.html#a48642f54734698f6f881ee07723292cb" title=" " alt="" coords="926,803,1003,829"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#aaad2d7a86d4859982dd9a132f5128ff2" title=" " alt="" coords="644,1715,739,1741"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a7220afa8e5f4bea540eb95879ea7df6e" title=" " alt="" coords="659,1462,723,1487"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#aa997067c2c9bfef15af6fa0a10c20f4a" title=" " alt="" coords="917,1665,1012,1690"/>
<area shape="rect" href="../../dc/de6/bio_8c.html#a30b8d2ef2300ed8e3d879a428fe39898" title=" " alt="" coords="801,1462,855,1487"/>
<area shape="rect" href="../../dc/de6/bio_8c.html#ab5335aeb503731104314321a78a6d727" title=" " alt="" coords="799,1563,857,1589"/>
<area shape="rect" href="../../d7/df8/log_8c.html#a7eacb0fbebe5ce4c7d3ddea15908b13d" title=" " alt="" coords="1062,1563,1137,1589"/>
<area shape="rect" href="../../db/d8a/ulib_8c.html#a59b5e6e6105ef0e97aed266ec6fdfe60" title=" " alt="" coords="443,978,497,1003"/>
<area shape="rect" href="../../d8/ddb/user_8h.html#ae57e95d717eb7386cd8b935a0c136abe" title=" " alt="" coords="445,929,495,954"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_acd2e1ded4bb6fce4500438bf928330f4_icgraph.png" border="0" usemap="#ad5/d64/defs_8h_acd2e1ded4bb6fce4500438bf928330f4_icgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_acd2e1ded4bb6fce4500438bf928330f4_icgraph" id="ad5/d64/defs_8h_acd2e1ded4bb6fce4500438bf928330f4_icgraph">
<area shape="rect" title=" " alt="" coords="659,496,703,522"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#ac5b5d4517586be6396b4f3b37445945a" title=" " alt="" coords="111,572,190,598"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a5a12affe4fdfaa172d85da9a6adf98d2" title=" " alt="" coords="391,268,469,294"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a425a0efe4f459decf4b5ea14517ab3cf" title=" " alt="" coords="245,319,339,344"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a8faab06cc4d48335076b368f02709ee2" title=" " alt="" coords="387,370,473,395"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a330ed2370fe27045b8bec1eb0bd7818f" title=" " alt="" coords="259,420,325,446"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#a7ae98824a008ffbc5506060227b6faa0" title=" " alt="" coords="267,996,317,1022"/>
<area shape="rect" href="../../d5/de1/forktest_8c.html#a0ef8ccf57bc8c491407ec513b234f83c" title=" " alt="" coords="533,1023,599,1048"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a77a4432bc67dfb513f1c1d698c2c4ea6" title=" " alt="" coords="396,471,464,496"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a1740f29f4ce6d3060fd79a9312edc315" title=" " alt="" coords="254,522,330,547"/>
<area shape="rect" href="../../d0/d87/foo_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="541,1072,591,1098"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#aa1c6e6e76813ccb29a29bb119dba668a" title=" " alt="" coords="541,720,591,746"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a3208ed001a225f5d9ea3fb37f46810c7" title=" " alt="" coords="104,871,197,896"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a16ae754fb9c5622d44d0c3ce62ad7c49" title=" " alt="" coords="403,922,457,947"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a026b8c4ab2cb9af17e1c20d533981604" title=" " alt="" coords="257,15,327,40"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a06636ed0cda58c748d68e82d33d1afce" title=" " alt="" coords="116,66,185,91"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a02e1ca3f4db5f4bf8a683a0b7c18cc43" title=" " alt="" coords="530,116,602,142"/>
<area shape="rect" href="../../dd/d35/sysproc_8c.html#a3b05102e512b34446a54334f916ba5cd" title=" " alt="" coords="530,1122,602,1147"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a6888f9f6d973f81f73091d1530ad212b" title=" " alt="" coords="547,167,585,192"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a98d8496ecb698b9400831f2718d805c3" title=" " alt="" coords="521,218,611,243"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="5,395,56,420"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title=" " alt="" coords="5,1022,56,1047"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#aedbeff6afe5d4e22330c7e6b5e6df893" title=" " alt="" coords="118,996,183,1022"/>
<area shape="rect" href="../../d5/de1/forktest_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title=" " alt="" coords="405,1023,455,1048"/>
<area shape="rect" href="../../de/de9/vm_8c.html#afea0f0a82a9f9c7aae26f90b5e0836c6" title=" " alt="" coords="393,670,467,695"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a1b57bfa0091c9be3ccc16dbb85ce3acf" title=" " alt="" coords="393,820,467,846"/>
<area shape="rect" href="../../de/de9/vm_8c.html#ac96c231d4053eaf4322c27d1f2cd9d49" title=" " alt="" coords="398,771,462,796"/>
<area shape="rect" href="../../df/dc9/exec_8c.html#ace32454ed0d37834dcb1cb4f8b727e6e" title=" " alt="" coords="267,670,317,695"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a9c16214741f4fcd088e5eea468709328" title=" " alt="" coords="255,719,329,744"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a6f94e3b215d069b5419e87bafe80799a" title=" " alt="" coords="115,720,187,746"/>
<area shape="rect" href="../../d8/d60/init_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title=" " alt="" coords="125,622,176,647"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#aeaa813ddeb6a5fac3c45714c7351c526" title=" " alt="" coords="111,671,190,696"/>
<area shape="rect" href="../../dd/d35/sysproc_8c.html#ab21d46be776cf6075a997af525a1a628" title=" " alt="" coords="113,770,188,795"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a81c8a6a0cae413bc81aa223f7f7b7205" title=" " alt="" coords="260,820,324,846"/>
</map>
</div>

</div>
</div>
<a id="af24cf1756e19afd8be8c95d02262cf3a" name="af24cf1756e19afd8be8c95d02262cf3a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af24cf1756e19afd8be8c95d02262cf3a">&#9670;&#160;</a></span>freevm()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void freevm </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d49/types_8h.html#ac131849542282b2c95dfeaf1f26dc010">pde_t</a> *&#160;</td>
          <td class="paramname"><em>pgdir</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/de9/vm_8c_source.html#l00284">284</a> of file <a class="el" href="../../de/de9/vm_8c_source.html">vm.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  285</span>{</div>
<div class="line"><span class="lineno">  286</span>  <a class="code hl_typedef" href="../../d9/d49/types_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> i;</div>
<div class="line"><span class="lineno">  287</span> </div>
<div class="line"><span class="lineno">  288</span>  <span class="keywordflow">if</span>(pgdir == 0)</div>
<div class="line"><span class="lineno">  289</span>    <a class="code hl_function" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a">panic</a>(<span class="stringliteral">&quot;freevm: no pgdir&quot;</span>);</div>
<div class="line"><span class="lineno">  290</span>  <a class="code hl_function" href="../../de/de9/vm_8c.html#a6d3019ea15a9bfdc5131ae97f3623c49">deallocuvm</a>(pgdir, <a class="code hl_define" href="../../d8/da9/memlayout_8h.html#a20cbfc19992a40ab9ccf4aa8ab8283d0">KERNBASE</a>, 0);</div>
<div class="line"><span class="lineno">  291</span>  <span class="keywordflow">for</span>(i = 0; i &lt; <a class="code hl_define" href="../../d2/df1/mmu_8h.html#af60ee3ecbf249497d0378c97201edfe8">NPDENTRIES</a>; i++){</div>
<div class="line"><span class="lineno">  292</span>    <span class="keywordflow">if</span>(pgdir[i] &amp; <a class="code hl_define" href="../../d2/df1/mmu_8h.html#a89bd860de64c44cd8ebaca8dc311b5ac">PTE_P</a>){</div>
<div class="line"><span class="lineno">  293</span>      <span class="keywordtype">char</span> * v = <a class="code hl_define" href="../../d8/da9/memlayout_8h.html#aefd5e8b62c49bba2cf20309c7dd174e2">P2V</a>(<a class="code hl_define" href="../../d2/df1/mmu_8h.html#a74b24f9b091875a5313370892e3f37a5">PTE_ADDR</a>(pgdir[i]));</div>
<div class="line"><span class="lineno">  294</span>      <a class="code hl_function" href="../../d5/d64/defs_8h.html#ae79d6a7d0901b7c081cfded3f916d5bd">kfree</a>(v);</div>
<div class="line"><span class="lineno">  295</span>    }</div>
<div class="line"><span class="lineno">  296</span>  }</div>
<div class="line"><span class="lineno">  297</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#ae79d6a7d0901b7c081cfded3f916d5bd">kfree</a>((<span class="keywordtype">char</span>*)pgdir);</div>
<div class="line"><span class="lineno">  298</span>}</div>
<div class="ttc" id="ammu_8h_html_af60ee3ecbf249497d0378c97201edfe8"><div class="ttname"><a href="../../d2/df1/mmu_8h.html#af60ee3ecbf249497d0378c97201edfe8">NPDENTRIES</a></div><div class="ttdeci">#define NPDENTRIES</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/df1/mmu_8h_source.html#l00083">mmu.h:83</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_af24cf1756e19afd8be8c95d02262cf3a_cgraph.png" border="0" usemap="#ad5/d64/defs_8h_af24cf1756e19afd8be8c95d02262cf3a_cgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_af24cf1756e19afd8be8c95d02262cf3a_cgraph" id="ad5/d64/defs_8h_af24cf1756e19afd8be8c95d02262cf3a_cgraph">
<area shape="rect" title=" " alt="" coords="5,442,68,467"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a6d3019ea15a9bfdc5131ae97f3623c49" title=" " alt="" coords="116,442,204,467"/>
<area shape="rect" href="../../d4/def/kalloc_8c.html#aced59ecf8411235f6dffc065236711a5" title=" " alt="" coords="252,354,303,379"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="828,297,881,322"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="353,195,417,221"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="1069,195,1133,221"/>
<area shape="rect" href="../../db/d8a/ulib_8c.html#aa9cdc2409c15ccd5ee3b2031576f4093" title=" " alt="" coords="351,297,420,322"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="468,94,560,119"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="483,45,545,70"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="719,145,780,170"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="608,145,671,170"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="1181,146,1237,171"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="946,146,1005,171"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="946,195,1005,221"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="929,297,1021,322"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_af24cf1756e19afd8be8c95d02262cf3a_icgraph.png" border="0" usemap="#ad5/d64/defs_8h_af24cf1756e19afd8be8c95d02262cf3a_icgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_af24cf1756e19afd8be8c95d02262cf3a_icgraph" id="ad5/d64/defs_8h_af24cf1756e19afd8be8c95d02262cf3a_icgraph">
<area shape="rect" title=" " alt="" coords="961,225,1024,251"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a1b57bfa0091c9be3ccc16dbb85ce3acf" title=" " alt="" coords="712,255,787,280"/>
<area shape="rect" href="../../df/dc9/exec_8c.html#ace32454ed0d37834dcb1cb4f8b727e6e" title=" " alt="" coords="243,91,293,116"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a1c8a7a02e9391b5cf0984388216695c0" title=" " alt="" coords="835,191,913,216"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#af6f31822f7e737b4e414bdac1ccb59a4" title=" " alt="" coords="617,781,664,807"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#acd2e1ded4bb6fce4500438bf928330f4" title=" " alt="" coords="619,633,663,659"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#ac5b5d4517586be6396b4f3b37445945a" title=" " alt="" coords="104,392,183,417"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a5a12affe4fdfaa172d85da9a6adf98d2" title=" " alt="" coords="483,411,562,436"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a425a0efe4f459decf4b5ea14517ab3cf" title=" " alt="" coords="476,460,569,485"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a8faab06cc4d48335076b368f02709ee2" title=" " alt="" coords="479,509,566,535"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a330ed2370fe27045b8bec1eb0bd7818f" title=" " alt="" coords="489,608,556,633"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#a7ae98824a008ffbc5506060227b6faa0" title=" " alt="" coords="243,140,293,165"/>
<area shape="rect" href="../../d5/de1/forktest_8c.html#a0ef8ccf57bc8c491407ec513b234f83c" title=" " alt="" coords="489,559,556,584"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a77a4432bc67dfb513f1c1d698c2c4ea6" title=" " alt="" coords="489,805,557,831"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a1740f29f4ce6d3060fd79a9312edc315" title=" " alt="" coords="485,855,561,880"/>
<area shape="rect" href="../../d0/d87/foo_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="497,707,548,732"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#aa1c6e6e76813ccb29a29bb119dba668a" title=" " alt="" coords="497,260,548,285"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a3208ed001a225f5d9ea3fb37f46810c7" title=" " alt="" coords="476,953,569,979"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a16ae754fb9c5622d44d0c3ce62ad7c49" title=" " alt="" coords="496,1003,549,1028"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a026b8c4ab2cb9af17e1c20d533981604" title=" " alt="" coords="488,1052,557,1077"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a06636ed0cda58c748d68e82d33d1afce" title=" " alt="" coords="488,1101,557,1127"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a02e1ca3f4db5f4bf8a683a0b7c18cc43" title=" " alt="" coords="487,657,559,683"/>
<area shape="rect" href="../../dd/d35/sysproc_8c.html#a3b05102e512b34446a54334f916ba5cd" title=" " alt="" coords="487,309,559,335"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a6888f9f6d973f81f73091d1530ad212b" title=" " alt="" coords="503,756,542,781"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a98d8496ecb698b9400831f2718d805c3" title=" " alt="" coords="478,904,567,929"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="5,721,56,747"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title=" " alt="" coords="5,203,56,228"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#aedbeff6afe5d4e22330c7e6b5e6df893" title=" " alt="" coords="111,177,176,203"/>
<area shape="rect" href="../../d5/de1/forktest_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title=" " alt="" coords="365,595,416,620"/>
<area shape="rect" href="../../de/de9/vm_8c.html#afea0f0a82a9f9c7aae26f90b5e0836c6" title=" " alt="" coords="353,241,428,267"/>
<area shape="rect" href="../../de/de9/vm_8c.html#ac96c231d4053eaf4322c27d1f2cd9d49" title=" " alt="" coords="359,291,423,316"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a9c16214741f4fcd088e5eea468709328" title=" " alt="" coords="231,291,305,316"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a6f94e3b215d069b5419e87bafe80799a" title=" " alt="" coords="107,104,179,129"/>
<area shape="rect" href="../../d8/d60/init_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title=" " alt="" coords="118,55,169,80"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#aeaa813ddeb6a5fac3c45714c7351c526" title=" " alt="" coords="104,5,183,31"/>
<area shape="rect" href="../../dd/d35/sysproc_8c.html#ab21d46be776cf6075a997af525a1a628" title=" " alt="" coords="106,291,181,316"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a81c8a6a0cae413bc81aa223f7f7b7205" title=" " alt="" coords="236,189,300,215"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a893bf6891e427f310b43981bf8e737ea" title=" " alt="" coords="712,140,787,165"/>
<area shape="rect" href="../../dd/d35/sysproc_8c.html#ad202e06addda05ba6fe60f05d3f61913" title=" " alt="" coords="485,1253,560,1279"/>
</map>
</div>

</div>
</div>
<a id="a4105de9e2969515d6c6c795c4386f69f" name="a4105de9e2969515d6c6c795c4386f69f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4105de9e2969515d6c6c795c4386f69f">&#9670;&#160;</a></span>getcallerpcs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void getcallerpcs </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/d49/types_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> *&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_a4105de9e2969515d6c6c795c4386f69f_icgraph.png" border="0" usemap="#ad5/d64/defs_8h_a4105de9e2969515d6c6c795c4386f69f_icgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_a4105de9e2969515d6c6c795c4386f69f_icgraph" id="ad5/d64/defs_8h_a4105de9e2969515d6c6c795c4386f69f_icgraph">
<area shape="rect" title=" " alt="" coords="1251,2575,1343,2601"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="1149,2082,1203,2107"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a7f185044294ebb57521c73f723990164" title=" " alt="" coords="504,2226,583,2251"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="792,1114,856,1139"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#aed28187406d84a3aa71f10c6235a03ec" title=" " alt="" coords="381,506,430,531"/>
<area shape="rect" href="../../d6/d13/file_8c.html#a1dc8c87c7e48bdaaf98e9c7047928f29" title=" " alt="" coords="235,506,299,531"/>
<area shape="rect" href="../../d6/d13/file_8c.html#ab8de757a0a9f58dcc6511ea5e46ebb88" title=" " alt="" coords="234,557,301,582"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#ae1e58ee11d41f643929520d8c1640da7" title=" " alt="" coords="225,405,309,430"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#aaf98ef7cdde3a0dfb2e49919de3298b1" title=" " alt="" coords="246,1266,289,1291"/>
<area shape="rect" href="../../dc/d6f/trap_8c.html#a372d166e36c086c91e5f5d81e5fead3a" title=" " alt="" coords="113,1619,157,1645"/>
<area shape="rect" href="../../d6/d13/file_8c.html#ae557c81ab89c24219146144bb6adaa2c" title=" " alt="" coords="370,1266,441,1291"/>
<area shape="rect" href="../../dc/de6/bio_8c.html#ab5335aeb503731104314321a78a6d727" title=" " alt="" coords="515,582,572,607"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#af95049367381647bc9487af49724b869" title=" " alt="" coords="379,354,431,379"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="657,2125,715,2150"/>
<area shape="rect" href="../../d7/df8/log_8c.html#ac0f12be0ca0de555e60b27b06a57a65b" title=" " alt="" coords="511,810,575,835"/>
<area shape="rect" href="../../d6/d13/file_8c.html#a9ef0346d08d8ed79ce2a9c03f9a4b4b2" title=" " alt="" coords="656,506,716,531"/>
<area shape="rect" href="../../dc/de6/bio_8c.html#a63c899c13b176ddf80064d32225e1298" title=" " alt="" coords="377,1670,434,1695"/>
<area shape="rect" href="../../da/d9b/memide_8c.html#a7f36b008f02088c86f76e98e05b55af5" title=" " alt="" coords="517,1670,570,1695"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#ae4e29916219b9293b37f9c34220694fe" title=" " alt="" coords="374,607,437,633"/>
<area shape="rect" href="../../d4/def/kalloc_8c.html#aced59ecf8411235f6dffc065236711a5" title=" " alt="" coords="661,2581,711,2606"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a1b57bfa0091c9be3ccc16dbb85ce3acf" title=" " alt="" coords="97,2682,172,2707"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a6d3019ea15a9bfdc5131ae97f3623c49" title=" " alt="" coords="499,2733,587,2758"/>
<area shape="rect" href="../../de/de9/vm_8c.html#aa883924e2f068c520b695cdc168e1603" title=" " alt="" coords="374,2733,437,2758"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a1c8a7a02e9391b5cf0984388216695c0" title=" " alt="" coords="228,2834,307,2859"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a81c8a6a0cae413bc81aa223f7f7b7205" title=" " alt="" coords="103,2834,167,2859"/>
<area shape="rect" href="../../d7/df8/log_8c.html#a7eacb0fbebe5ce4c7d3ddea15908b13d" title=" " alt="" coords="649,607,723,633"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ae70cc0370342e46f6db3bec367232457" title=" " alt="" coords="659,1669,713,1694"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a795e27a0cb916cfb41411ebbb9669ddf" title=" " alt="" coords="1027,2482,1101,2507"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a69a135a0e8a06d9f306d77ebc0c1f7a0" title=" " alt="" coords="919,101,975,126"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a5341068f021beac8cf0032b97d231e6f" title=" " alt="" coords="1027,50,1101,75"/>
<area shape="rect" href="../../d7/df8/log_8c.html#ad5e79aaefb91f41b9ef6aeae7ecf4708" title=" " alt="" coords="1036,2634,1092,2659"/>
<area shape="rect" href="../../de/de9/vm_8c.html#ac96c231d4053eaf4322c27d1f2cd9d49" title=" " alt="" coords="915,2986,979,3011"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a201acc8337a2893268b61ea5a1ee0d53" title=" " alt="" coords="1029,2683,1099,2709"/>
<area shape="rect" href="../../dd/d06/mp_8c.html#a2fd0b66a17c5347541448ef906b7b2a2" title=" " alt="" coords="1035,2733,1093,2758"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="1033,1847,1095,1873"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="919,1898,975,1923"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="792,1783,856,1809"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a87c90f0ab2a1b11c2b55f4e483bb8493" title=" " alt="" coords="781,1999,867,2025"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad788da91743c333b5bed7c4a0dd12365" title=" " alt="" coords="795,1898,853,1923"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#aaad2d7a86d4859982dd9a132f5128ff2" title=" " alt="" coords="496,1114,591,1139"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a28ac85a90987662e306ca8efbfe16074" title=" " alt="" coords="221,759,313,785"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a6af7eb39268127d389792cec37785666" title=" " alt="" coords="220,658,315,683"/>
<area shape="rect" href="../../d7/df8/log_8c.html#ac96aa31ffc0500e749c62c4d377c21c9" title=" " alt="" coords="506,1215,581,1241"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a2ca17a3161c80e3e4894ec6a96e0a281" title=" " alt="" coords="663,1317,709,1342"/>
<area shape="rect" href="../../d0/d56/console_8c.html#aad3d6ca39f23bb6d2686d2967e415193" title=" " alt="" coords="363,2074,448,2099"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a45a59a61c8799cb754b4326a32c14dc4" title=" " alt="" coords="522,2023,565,2049"/>
<area shape="rect" href="../../d6/d13/file_8c.html#ac56b15561658d0e74ce1c53309b8f97d" title=" " alt="" coords="653,1366,719,1391"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#acd2e1ded4bb6fce4500438bf928330f4" title=" " alt="" coords="5,2429,49,2454"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#a6fdbe54cbecd8fc67d74793b27adcf05" title=" " alt="" coords="639,1619,733,1645"/>
<area shape="rect" href="../../da/d9b/memide_8c.html#a709693afdb9b89d848e684e7acde1f8f" title=" " alt="" coords="657,1518,715,1543"/>
</map>
</div>

</div>
</div>
<a id="aee260ddc6baeb66dbf14f5efb1b799b2" name="aee260ddc6baeb66dbf14f5efb1b799b2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aee260ddc6baeb66dbf14f5efb1b799b2">&#9670;&#160;</a></span>getprocs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int getprocs </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>max</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/d1f/structuproc.html">uproc</a> *&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_aee260ddc6baeb66dbf14f5efb1b799b2_icgraph.png" border="0" usemap="#ad5/d64/defs_8h_aee260ddc6baeb66dbf14f5efb1b799b2_icgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_aee260ddc6baeb66dbf14f5efb1b799b2_icgraph" id="ad5/d64/defs_8h_aee260ddc6baeb66dbf14f5efb1b799b2_icgraph">
<area shape="rect" title=" " alt="" coords="104,5,176,31"/>
<area shape="rect" href="../../d3/d16/pstree_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="5,5,56,31"/>
</map>
</div>

</div>
</div>
<a id="acb02e9289fb8a1017c3455b137a9bccd" name="acb02e9289fb8a1017c3455b137a9bccd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acb02e9289fb8a1017c3455b137a9bccd">&#9670;&#160;</a></span>growproc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int growproc </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>n</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/dda/proc_8c_source.html#l00159">159</a> of file <a class="el" href="../../d3/dda/proc_8c_source.html">proc.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  160</span>{</div>
<div class="line"><span class="lineno">  161</span>  <a class="code hl_typedef" href="../../d9/d49/types_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> sz;</div>
<div class="line"><span class="lineno">  162</span>  <span class="keyword">struct </span><a class="code hl_struct" href="../../de/d48/structproc.html">proc</a> *curproc = <a class="code hl_function" href="../../d3/dda/proc_8c.html#a41af0935f3989aae450cf8988cd9c3a9">myproc</a>();</div>
<div class="line"><span class="lineno">  163</span> </div>
<div class="line"><span class="lineno">  164</span>  <a class="code hl_variable" href="../../de/d48/structproc.html#a6e67042bb361124ff287af88efc33e00">sz</a> = curproc-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#a6e67042bb361124ff287af88efc33e00">sz</a>;</div>
<div class="line"><span class="lineno">  165</span>  <span class="keywordflow">if</span>(n &gt; 0){</div>
<div class="line"><span class="lineno">  166</span>    <span class="keywordflow">if</span>((<a class="code hl_variable" href="../../de/d48/structproc.html#a6e67042bb361124ff287af88efc33e00">sz</a> = <a class="code hl_function" href="../../d5/d64/defs_8h.html#a67f50b6f85756f02b5acdcb084d51b9f">allocuvm</a>(curproc-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#ad430afc653e9eb6cee33954d5545b79d">pgdir</a>, <a class="code hl_variable" href="../../de/d48/structproc.html#a6e67042bb361124ff287af88efc33e00">sz</a>, <a class="code hl_variable" href="../../de/d48/structproc.html#a6e67042bb361124ff287af88efc33e00">sz</a> + n)) == 0)</div>
<div class="line"><span class="lineno">  167</span>      <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  168</span>  } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(n &lt; 0){</div>
<div class="line"><span class="lineno">  169</span>    <span class="keywordflow">if</span>((<a class="code hl_variable" href="../../de/d48/structproc.html#a6e67042bb361124ff287af88efc33e00">sz</a> = <a class="code hl_function" href="../../d5/d64/defs_8h.html#ac45969a8875b6dc87245e0a642aa2d8d">deallocuvm</a>(curproc-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#ad430afc653e9eb6cee33954d5545b79d">pgdir</a>, <a class="code hl_variable" href="../../de/d48/structproc.html#a6e67042bb361124ff287af88efc33e00">sz</a>, <a class="code hl_variable" href="../../de/d48/structproc.html#a6e67042bb361124ff287af88efc33e00">sz</a> + n)) == 0)</div>
<div class="line"><span class="lineno">  170</span>      <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  171</span>  }</div>
<div class="line"><span class="lineno">  172</span>  curproc-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#a6e67042bb361124ff287af88efc33e00">sz</a> = <a class="code hl_variable" href="../../de/d48/structproc.html#a6e67042bb361124ff287af88efc33e00">sz</a>;</div>
<div class="line"><span class="lineno">  173</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#ad43d81fa3edec39a200abd0853bc84b1">switchuvm</a>(curproc);</div>
<div class="line"><span class="lineno">  174</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  175</span>}</div>
<div class="ttc" id="adefs_8h_html_ac45969a8875b6dc87245e0a642aa2d8d"><div class="ttname"><a href="../../d5/d64/defs_8h.html#ac45969a8875b6dc87245e0a642aa2d8d">deallocuvm</a></div><div class="ttdeci">int deallocuvm(pde_t *, uint, uint)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/de9/vm_8c_source.html#l00256">vm.c:256</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_acb02e9289fb8a1017c3455b137a9bccd_cgraph.png" border="0" usemap="#ad5/d64/defs_8h_acb02e9289fb8a1017c3455b137a9bccd_cgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_acb02e9289fb8a1017c3455b137a9bccd_cgraph" id="ad5/d64/defs_8h_acb02e9289fb8a1017c3455b137a9bccd_cgraph">
<area shape="rect" title=" " alt="" coords="5,1109,80,1134"/>
<area shape="rect" href="../../de/de9/vm_8c.html#afea0f0a82a9f9c7aae26f90b5e0836c6" title=" " alt="" coords="128,1956,203,1981"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a6d3019ea15a9bfdc5131ae97f3623c49" title=" " alt="" coords="983,2412,1071,2437"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a41af0935f3989aae450cf8988cd9c3a9" title=" " alt="" coords="1129,58,1195,84"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a87c90f0ab2a1b11c2b55f4e483bb8493" title=" " alt="" coords="1370,513,1455,538"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="1133,1932,1191,1957"/>
<area shape="rect" href="../../d4/def/kalloc_8c.html#aced59ecf8411235f6dffc065236711a5" title=" " alt="" coords="1137,2006,1187,2032"/>
<area shape="rect" href="../../db/d8a/ulib_8c.html#aa9cdc2409c15ccd5ee3b2031576f4093" title=" " alt="" coords="1249,2361,1319,2386"/>
<area shape="rect" href="../../d4/def/kalloc_8c.html#a5e965f6365c721b5b23c12d16d45c3dc" title=" " alt="" coords="863,1629,919,1654"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#aa1c6e6e76813ccb29a29bb119dba668a" title=" " alt="" coords="251,1601,301,1626"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="1252,818,1316,844"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="1727,1830,1780,1856"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="1252,1374,1316,1400"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="1367,818,1459,844"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="1381,464,1444,489"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="1617,452,1679,477"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="1507,413,1569,438"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="1510,514,1566,540"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="1845,1781,1903,1806"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="1828,1830,1920,1856"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#aaf98ef7cdde3a0dfb2e49919de3298b1" title=" " alt="" coords="358,996,401,1021"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#acd2e1ded4bb6fce4500438bf928330f4" title=" " alt="" coords="471,1726,515,1752"/>
<area shape="rect" href="../../df/d5d/umalloc_8c.html#adebb229f063e66907017098087cbe791" title=" " alt="" coords="357,1577,401,1602"/>
<area shape="rect" href="../../d8/ddb/user_8h.html#a939cb25a305fe68aad9b365077f1a8c7" title=" " alt="" coords="351,1626,408,1652"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a650cf0caaaa8b75f653c1c92818d03a4" title=" " alt="" coords="1143,1325,1181,1350"/>
<area shape="rect" href="../../df/d5d/umalloc_8c.html#ac131c16d1dcb6bea908d0237c82e981d" title=" " alt="" coords="349,1676,409,1701"/>
<area shape="rect" href="../../d5/de1/forktest_8c.html#a249680925885256274fa9f02dd51cec4" title=" " alt="" coords="354,108,405,133"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#af6f31822f7e737b4e414bdac1ccb59a4" title=" " alt="" coords="731,1426,777,1452"/>
<area shape="rect" href="../../d7/df8/log_8c.html#ac96aa31ffc0500e749c62c4d377c21c9" title=" " alt="" coords="717,565,791,590"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad788da91743c333b5bed7c4a0dd12365" title=" " alt="" coords="999,312,1056,337"/>
<area shape="rect" href="../../d7/df8/log_8c.html#ac0f12be0ca0de555e60b27b06a57a65b" title=" " alt="" coords="995,1124,1059,1149"/>
<area shape="rect" href="../../d6/d13/file_8c.html#ae557c81ab89c24219146144bb6adaa2c" title=" " alt="" coords="457,1058,528,1084"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#ab3c447f135c68e4c3c1f8d5866f6e77b" title=" " alt="" coords="596,996,639,1021"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ae70cc0370342e46f6db3bec367232457" title=" " alt="" coords="864,616,917,641"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a9fa00b0be5d3c4781048861e2506eb63" title=" " alt="" coords="1123,261,1201,286"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a1d9e7047d3dfb57809a2541d8387705e" title=" " alt="" coords="1255,261,1313,286"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a4a34d9f03e436cfa09b88f735f6ee952" title=" " alt="" coords="1129,1173,1195,1198"/>
<area shape="rect" href="../../d1/d47/pipe_8c.html#a48642f54734698f6f881ee07723292cb" title=" " alt="" coords="989,1173,1066,1198"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#aaad2d7a86d4859982dd9a132f5128ff2" title=" " alt="" coords="707,666,801,692"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a7220afa8e5f4bea540eb95879ea7df6e" title=" " alt="" coords="722,1369,786,1394"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#aa997067c2c9bfef15af6fa0a10c20f4a" title=" " alt="" coords="980,1048,1075,1073"/>
<area shape="rect" href="../../d1/db0/string_8c.html#a07f97e2ed1ce37955192d52de8f4911f" title=" " alt="" coords="849,1376,932,1401"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a1b57bfa0091c9be3ccc16dbb85ce3acf" title=" " alt="" coords="580,2006,655,2032"/>
<area shape="rect" href="../../d6/d13/file_8c.html#a9ef0346d08d8ed79ce2a9c03f9a4b4b2" title=" " alt="" coords="1132,1729,1192,1754"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a24a91383ab80b4b8a1ef1f4df896035c" title=" " alt="" coords="1139,1374,1185,1400"/>
<area shape="rect" href="../../d1/db0/string_8c.html#aca73516e4b2fdb2663e0d26f855ac3ca" title=" " alt="" coords="576,1854,659,1880"/>
<area shape="rect" href="../../de/de9/vm_8c.html#aa883924e2f068c520b695cdc168e1603" title=" " alt="" coords="859,2260,922,2285"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a1c8a7a02e9391b5cf0984388216695c0" title=" " alt="" coords="715,2209,793,2234"/>
<area shape="rect" href="../../db/d8a/ulib_8c.html#a59b5e6e6105ef0e97aed266ec6fdfe60" title=" " alt="" coords="465,58,520,84"/>
<area shape="rect" href="../../d8/ddb/user_8h.html#ae57e95d717eb7386cd8b935a0c136abe" title=" " alt="" coords="467,108,518,133"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_acb02e9289fb8a1017c3455b137a9bccd_icgraph.png" border="0" usemap="#ad5/d64/defs_8h_acb02e9289fb8a1017c3455b137a9bccd_icgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_acb02e9289fb8a1017c3455b137a9bccd_icgraph" id="ad5/d64/defs_8h_acb02e9289fb8a1017c3455b137a9bccd_icgraph">
<area shape="rect" title=" " alt="" coords="128,5,203,31"/>
<area shape="rect" href="../../dd/d35/sysproc_8c.html#ab21d46be776cf6075a997af525a1a628" title=" " alt="" coords="5,5,80,31"/>
</map>
</div>

</div>
</div>
<a id="ac44b13cc76bf4040e3baf34df75ff230" name="ac44b13cc76bf4040e3baf34df75ff230"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac44b13cc76bf4040e3baf34df75ff230">&#9670;&#160;</a></span>holding()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int holding </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d1/d08/structspinlock.html">spinlock</a> *&#160;</td>
          <td class="paramname"><em>lock</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d2d/spinlock_8c_source.html#l00090">90</a> of file <a class="el" href="../../d3/d2d/spinlock_8c_source.html">spinlock.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   91</span>{</div>
<div class="line"><span class="lineno">   92</span>  <span class="keywordtype">int</span> <a class="code hl_variable" href="../../d0/d56/console_8c.html#af10fa12dd785c91e29528fbdc50cf9af">r</a>;</div>
<div class="line"><span class="lineno">   93</span>  <a class="code hl_function" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c">pushcli</a>();</div>
<div class="line"><span class="lineno">   94</span>  <a class="code hl_variable" href="../../d0/d56/console_8c.html#af10fa12dd785c91e29528fbdc50cf9af">r</a> = <a class="code hl_variable" href="../../dc/de6/bio_8c.html#ab28e82cd5dda7d960095706a3ea20572">lock</a>-&gt;<a class="code hl_variable" href="../../d1/d08/structspinlock.html#a48f3007579f644934d9aba91e5378c03">locked</a> &amp;&amp; <a class="code hl_variable" href="../../dc/de6/bio_8c.html#ab28e82cd5dda7d960095706a3ea20572">lock</a>-&gt;<a class="code hl_variable" href="../../d1/d08/structspinlock.html#a290ae772c8ccb9e8c1580204c31a7f88">cpu</a> == <a class="code hl_function" href="../../d5/d64/defs_8h.html#ad427959ad025dabd8cd393b27ec39160">mycpu</a>();</div>
<div class="line"><span class="lineno">   95</span>  <a class="code hl_function" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb">popcli</a>();</div>
<div class="line"><span class="lineno">   96</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="../../d0/d56/console_8c.html#af10fa12dd785c91e29528fbdc50cf9af">r</a>;</div>
<div class="line"><span class="lineno">   97</span>}</div>
<div class="ttc" id="abio_8c_html_ab28e82cd5dda7d960095706a3ea20572"><div class="ttname"><a href="../../dc/de6/bio_8c.html#ab28e82cd5dda7d960095706a3ea20572">lock</a></div><div class="ttdeci">struct spinlock lock</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/de6/bio_8c_source.html#l00030">bio.c:30</a></div></div>
<div class="ttc" id="aspinlock_8c_html_ae3424f669269fef400ce29c3aeb43fdb"><div class="ttname"><a href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb">popcli</a></div><div class="ttdeci">void popcli(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d2d/spinlock_8c_source.html#l00117">spinlock.c:117</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_ac44b13cc76bf4040e3baf34df75ff230_cgraph.png" border="0" usemap="#ad5/d64/defs_8h_ac44b13cc76bf4040e3baf34df75ff230_cgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_ac44b13cc76bf4040e3baf34df75ff230_cgraph" id="ad5/d64/defs_8h_ac44b13cc76bf4040e3baf34df75ff230_cgraph">
<area shape="rect" title=" " alt="" coords="5,397,68,422"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="116,397,177,422"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="593,498,656,523"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="597,119,653,145"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="343,397,402,422"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="225,270,279,295"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="343,245,402,270"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="327,195,419,221"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="467,447,531,473"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="467,145,531,170"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="579,447,671,473"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_ac44b13cc76bf4040e3baf34df75ff230_icgraph.png" border="0" usemap="#ad5/d64/defs_8h_ac44b13cc76bf4040e3baf34df75ff230_icgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_ac44b13cc76bf4040e3baf34df75ff230_icgraph" id="ad5/d64/defs_8h_ac44b13cc76bf4040e3baf34df75ff230_icgraph">
<area shape="rect" title=" " alt="" coords="1129,1038,1192,1063"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="1017,2219,1081,2245"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad788da91743c333b5bed7c4a0dd12365" title=" " alt="" coords="756,278,813,303"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="1017,1038,1081,1063"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#aaad2d7a86d4859982dd9a132f5128ff2" title=" " alt="" coords="489,786,584,811"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a28ac85a90987662e306ca8efbfe16074" title=" " alt="" coords="225,1227,317,1253"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a6af7eb39268127d389792cec37785666" title=" " alt="" coords="224,2421,319,2446"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#ab3c447f135c68e4c3c1f8d5866f6e77b" title=" " alt="" coords="383,1870,425,1895"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#aaf98ef7cdde3a0dfb2e49919de3298b1" title=" " alt="" coords="115,2270,158,2295"/>
<area shape="rect" href="../../dc/d6f/trap_8c.html#a372d166e36c086c91e5f5d81e5fead3a" title=" " alt="" coords="5,2802,49,2827"/>
<area shape="rect" href="../../d6/d13/file_8c.html#ae557c81ab89c24219146144bb6adaa2c" title=" " alt="" coords="236,2371,307,2397"/>
<area shape="rect" href="../../d7/df8/log_8c.html#ac96aa31ffc0500e749c62c4d377c21c9" title=" " alt="" coords="367,2021,441,2046"/>
<area shape="rect" href="../../dc/de6/bio_8c.html#ab5335aeb503731104314321a78a6d727" title=" " alt="" coords="632,1767,689,1793"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a2ca17a3161c80e3e4894ec6a96e0a281" title=" " alt="" coords="901,1541,948,1566"/>
<area shape="rect" href="../../d0/d56/console_8c.html#aad3d6ca39f23bb6d2686d2967e415193" title=" " alt="" coords="742,1891,827,1917"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="895,2245,954,2270"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a45a59a61c8799cb754b4326a32c14dc4" title=" " alt="" coords="763,2194,806,2219"/>
<area shape="rect" href="../../d7/df8/log_8c.html#ac0f12be0ca0de555e60b27b06a57a65b" title=" " alt="" coords="372,2146,436,2171"/>
<area shape="rect" href="../../d6/d13/file_8c.html#ac56b15561658d0e74ce1c53309b8f97d" title=" " alt="" coords="891,2650,958,2675"/>
<area shape="rect" href="../../d6/d13/file_8c.html#a9ef0346d08d8ed79ce2a9c03f9a4b4b2" title=" " alt="" coords="895,1590,955,1615"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#acd2e1ded4bb6fce4500438bf928330f4" title=" " alt="" coords="763,1590,807,1615"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#a6fdbe54cbecd8fc67d74793b27adcf05" title=" " alt="" coords="737,1379,832,1405"/>
<area shape="rect" href="../../da/d9b/memide_8c.html#a7f36b008f02088c86f76e98e05b55af5" title=" " alt="" coords="510,1363,563,1389"/>
<area shape="rect" href="../../da/d9b/memide_8c.html#a709693afdb9b89d848e684e7acde1f8f" title=" " alt="" coords="756,2145,813,2170"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a24a91383ab80b4b8a1ef1f4df896035c" title=" " alt="" coords="901,1491,948,1517"/>
<area shape="rect" href="../../d4/def/kalloc_8c.html#a5e965f6365c721b5b23c12d16d45c3dc" title=" " alt="" coords="897,1689,953,1714"/>
<area shape="rect" href="../../d4/def/kalloc_8c.html#aced59ecf8411235f6dffc065236711a5" title=" " alt="" coords="899,1890,950,1915"/>
<area shape="rect" href="../../d1/d47/pipe_8c.html#a48642f54734698f6f881ee07723292cb" title=" " alt="" coords="746,1842,823,1867"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#af6f31822f7e737b4e414bdac1ccb59a4" title=" " alt="" coords="513,1110,560,1135"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a650cf0caaaa8b75f653c1c92818d03a4" title=" " alt="" coords="905,1738,944,1763"/>
<area shape="rect" href="../../d7/df8/log_8c.html#a7eacb0fbebe5ce4c7d3ddea15908b13d" title=" " alt="" coords="887,1393,962,1418"/>
<area shape="rect" href="../../d1/d47/pipe_8c.html#ad4cce6144039b615d139f8660c60293a" title=" " alt="" coords="501,1270,572,1295"/>
<area shape="rect" href="../../d1/d47/pipe_8c.html#acfca0fab7d2c0c0dcc56359c8febe14a" title=" " alt="" coords="499,987,574,1013"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#aa997067c2c9bfef15af6fa0a10c20f4a" title=" " alt="" coords="737,1793,832,1818"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a9fa00b0be5d3c4781048861e2506eb63" title=" " alt="" coords="885,1291,964,1317"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ae70cc0370342e46f6db3bec367232457" title=" " alt="" coords="634,810,687,835"/>
<area shape="rect" href="../../dd/d35/sysproc_8c.html#a59778ec9bfa6b6f2100b43fbba000573" title=" " alt="" coords="496,835,577,861"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a7cb51f5c2b5cad3766f19eb69c92793b" title=" " alt="" coords="636,227,685,253"/>
<area shape="rect" href="../../dd/d35/sysproc_8c.html#aaf8553903ba8f2776247679d4db0d121" title=" " alt="" coords="880,1639,969,1665"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a81c8a6a0cae413bc81aa223f7f7b7205" title=" " alt="" coords="893,1442,957,1467"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a4a34d9f03e436cfa09b88f735f6ee952" title=" " alt="" coords="891,2093,958,2118"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#aed28187406d84a3aa71f10c6235a03ec" title=" " alt="" coords="379,1919,429,1945"/>
<area shape="rect" href="../../df/dc9/exec_8c.html#ace32454ed0d37834dcb1cb4f8b727e6e" title=" " alt="" coords="246,2121,297,2146"/>
<area shape="rect" href="../../d6/d13/file_8c.html#ab8de757a0a9f58dcc6511ea5e46ebb88" title=" " alt="" coords="238,2071,305,2097"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#ad1c5f8693cb35b9605fee09eebdda640" title=" " alt="" coords="232,1870,311,1895"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a759600870314007ac558871239122fb7" title=" " alt="" coords="236,1919,307,1945"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a74e45efc661ca17c068bc283b3842e6d" title=" " alt="" coords="97,2321,176,2346"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a057e5bce2de7a87ebfd2dc33967bca4a" title=" " alt="" coords="230,2170,313,2195"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a25697aa3d828b5878d38170d724adb27" title=" " alt="" coords="227,2219,316,2245"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a11c5d62d28e8121e75235d361158156e" title=" " alt="" coords="895,987,954,1013"/>
</map>
</div>

</div>
</div>
<a id="afa76133bc67c6026376d630da9b53b68" name="afa76133bc67c6026376d630da9b53b68"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afa76133bc67c6026376d630da9b53b68">&#9670;&#160;</a></span>holdingsleep()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int holdingsleep </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d9/dd0/structsleeplock.html">sleeplock</a> *&#160;</td>
          <td class="paramname"><em>lk</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d8/dd1/sleeplock_8c_source.html#l00045">45</a> of file <a class="el" href="../../d8/dd1/sleeplock_8c_source.html">sleeplock.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   46</span>{</div>
<div class="line"><span class="lineno">   47</span>  <span class="keywordtype">int</span> <a class="code hl_variable" href="../../d0/d56/console_8c.html#af10fa12dd785c91e29528fbdc50cf9af">r</a>;</div>
<div class="line"><span class="lineno">   48</span>  </div>
<div class="line"><span class="lineno">   49</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#afe4ef8638f1ecb962a6e67fb086ee3b8">acquire</a>(&amp;lk-&gt;<a class="code hl_variable" href="../../d9/dd0/structsleeplock.html#a077241ea0e720d228d853208444c4c9d">lk</a>);</div>
<div class="line"><span class="lineno">   50</span>  <a class="code hl_variable" href="../../d0/d56/console_8c.html#af10fa12dd785c91e29528fbdc50cf9af">r</a> = lk-&gt;<a class="code hl_variable" href="../../d9/dd0/structsleeplock.html#ac5cfe608994a41b24cb1c0fd722910c3">locked</a> &amp;&amp; (lk-&gt;<a class="code hl_variable" href="../../d9/dd0/structsleeplock.html#a99a4c6a784956ab1c391a12af475a55e">pid</a> == <a class="code hl_function" href="../../d5/d64/defs_8h.html#a3d2327db1e34643f4a9e6a07c8cc62c6">myproc</a>()-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#acf2bdf54d1f957ccbcdc987007029944">pid</a>);</div>
<div class="line"><span class="lineno">   51</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#a4f8616948f3dbce65671f666eed1d669">release</a>(&amp;lk-&gt;<a class="code hl_variable" href="../../d9/dd0/structsleeplock.html#a077241ea0e720d228d853208444c4c9d">lk</a>);</div>
<div class="line"><span class="lineno">   52</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="../../d0/d56/console_8c.html#af10fa12dd785c91e29528fbdc50cf9af">r</a>;</div>
<div class="line"><span class="lineno">   53</span>}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_afa76133bc67c6026376d630da9b53b68_cgraph.png" border="0" usemap="#ad5/d64/defs_8h_afa76133bc67c6026376d630da9b53b68_cgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_afa76133bc67c6026376d630da9b53b68_cgraph" id="ad5/d64/defs_8h_afa76133bc67c6026376d630da9b53b68_cgraph">
<area shape="rect" title=" " alt="" coords="5,271,100,297"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="148,271,212,297"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="861,94,925,119"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a41af0935f3989aae450cf8988cd9c3a9" title=" " alt="" coords="273,449,339,474"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="260,295,352,321"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="275,246,337,271"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="511,347,572,373"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="620,195,673,221"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="400,347,463,373"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="973,347,1029,373"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="738,297,797,322"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="738,94,797,119"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="721,195,813,221"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_afa76133bc67c6026376d630da9b53b68_icgraph.png" border="0" usemap="#ad5/d64/defs_8h_afa76133bc67c6026376d630da9b53b68_icgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_afa76133bc67c6026376d630da9b53b68_icgraph" id="ad5/d64/defs_8h_afa76133bc67c6026376d630da9b53b68_icgraph">
<area shape="rect" title=" " alt="" coords="952,516,1047,541"/>
<area shape="rect" href="../../dc/de6/bio_8c.html#ab5335aeb503731104314321a78a6d727" title=" " alt="" coords="745,440,803,465"/>
<area shape="rect" href="../../dc/de6/bio_8c.html#a63c899c13b176ddf80064d32225e1298" title=" " alt="" coords="745,491,803,516"/>
<area shape="rect" href="../../da/d9b/memide_8c.html#a7f36b008f02088c86f76e98e05b55af5" title=" " alt="" coords="851,541,904,567"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#ae4e29916219b9293b37f9c34220694fe" title=" " alt="" coords="517,883,579,908"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#af95049367381647bc9487af49724b869" title=" " alt="" coords="639,439,691,464"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#aed28187406d84a3aa71f10c6235a03ec" title=" " alt="" coords="523,808,573,833"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a7220afa8e5f4bea540eb95879ea7df6e" title=" " alt="" coords="633,225,697,251"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a15858f4d8a4cc1def3d84d03c312836b" title=" " alt="" coords="521,220,575,245"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a3aba1fa9f6789d09356aec5b96d91fa8" title=" " alt="" coords="640,692,691,717"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#aff0080b2133027be2e525ca088b40e78" title=" " alt="" coords="635,540,696,565"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a28ac85a90987662e306ca8efbfe16074" title=" " alt="" coords="369,1060,461,1085"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a6af7eb39268127d389792cec37785666" title=" " alt="" coords="368,1109,463,1135"/>
<area shape="rect" href="../../df/dc9/exec_8c.html#ace32454ed0d37834dcb1cb4f8b727e6e" title=" " alt="" coords="250,1057,301,1083"/>
<area shape="rect" href="../../d6/d13/file_8c.html#a1dc8c87c7e48bdaaf98e9c7047928f29" title=" " alt="" coords="383,1159,447,1184"/>
<area shape="rect" href="../../d6/d13/file_8c.html#afff8e849fa54dea2a5a27dbb97474607" title=" " alt="" coords="385,1011,446,1036"/>
<area shape="rect" href="../../d6/d13/file_8c.html#ab8de757a0a9f58dcc6511ea5e46ebb88" title=" " alt="" coords="382,605,449,631"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#ad1c5f8693cb35b9605fee09eebdda640" title=" " alt="" coords="236,683,315,708"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a759600870314007ac558871239122fb7" title=" " alt="" coords="240,555,311,580"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a74e45efc661ca17c068bc283b3842e6d" title=" " alt="" coords="236,857,315,883"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#ae1e58ee11d41f643929520d8c1640da7" title=" " alt="" coords="233,149,317,175"/>
<area shape="rect" href="../../d0/d56/console_8c.html#ab508ff0f4db26fe35cd25fa648f9ee75" title=" " alt="" coords="233,1008,317,1033"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#ac5b5d4517586be6396b4f3b37445945a" title=" " alt="" coords="104,653,183,679"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a6f94e3b215d069b5419e87bafe80799a" title=" " alt="" coords="107,703,179,728"/>
<area shape="rect" href="../../d8/d60/init_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title=" " alt="" coords="118,1032,169,1057"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#aedbeff6afe5d4e22330c7e6b5e6df893" title=" " alt="" coords="111,841,176,867"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#aeaa813ddeb6a5fac3c45714c7351c526" title=" " alt="" coords="104,1081,183,1107"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="5,555,56,580"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title=" " alt="" coords="5,841,56,867"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a54bf714d9e898cbdcbc061b280bbfae0" title=" " alt="" coords="238,1159,313,1184"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#ac243c8f20f5fb2e3e257b5007af2c204" title=" " alt="" coords="237,959,313,984"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a687d939a9e4792af15db96f2c2f34378" title=" " alt="" coords="236,605,315,631"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#ab3c447f135c68e4c3c1f8d5866f6e77b" title=" " alt="" coords="527,371,569,396"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a69a135a0e8a06d9f306d77ebc0c1f7a0" title=" " alt="" coords="387,200,443,225"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#aaf98ef7cdde3a0dfb2e49919de3298b1" title=" " alt="" coords="254,505,297,531"/>
<area shape="rect" href="../../d6/d13/file_8c.html#ae557c81ab89c24219146144bb6adaa2c" title=" " alt="" coords="380,352,451,377"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a207b3008bae35596c55ec7c4fc6875eb" title=" " alt="" coords="375,808,456,833"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a77cc2edce6e78f22dd9eb377462762f2" title=" " alt="" coords="109,456,178,481"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#aa0d46fcb43667c805b84ea7e1ff6100a" title=" " alt="" coords="117,505,170,531"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a86fe524d99d69c18a335512cf3405b31" title=" " alt="" coords="115,555,171,580"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a57e55b2d0161d62bb99765ca3de43e35" title=" " alt="" coords="110,604,177,629"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a0b0ff95e564df3c3e8fc977226b75de7" title=" " alt="" coords="111,407,176,432"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a057e5bce2de7a87ebfd2dc33967bca4a" title=" " alt="" coords="234,759,317,784"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a25697aa3d828b5878d38170d724adb27" title=" " alt="" coords="231,808,320,833"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a5341068f021beac8cf0032b97d231e6f" title=" " alt="" coords="511,269,585,295"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a201acc8337a2893268b61ea5a1ee0d53" title=" " alt="" coords="513,1260,583,1285"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a301761a27cf266e0bad483272fb31a3c" title=" " alt="" coords="527,549,569,575"/>
<area shape="rect" href="../../d7/df8/log_8c.html#ad5e79aaefb91f41b9ef6aeae7ecf4708" title=" " alt="" coords="520,500,576,525"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a11c5d62d28e8121e75235d361158156e" title=" " alt="" coords="386,504,445,529"/>
<area shape="rect" href="../../dc/de6/bio_8c.html#a30b8d2ef2300ed8e3d879a428fe39898" title=" " alt="" coords="747,540,801,565"/>
</map>
</div>

</div>
</div>
<a id="af71d7632e6d48638682e78de0ad269af" name="af71d7632e6d48638682e78de0ad269af"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af71d7632e6d48638682e78de0ad269af">&#9670;&#160;</a></span>ialloc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d0/df8/structinode.html">inode</a> * ialloc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d49/types_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">short&#160;</td>
          <td class="paramname"><em>type</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d2/d5a/fs_8c_source.html#l00195">195</a> of file <a class="el" href="../../d2/d5a/fs_8c_source.html">fs.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  196</span>{</div>
<div class="line"><span class="lineno">  197</span>  <span class="keywordtype">int</span> inum;</div>
<div class="line"><span class="lineno">  198</span>  <span class="keyword">struct </span><a class="code hl_struct" href="../../d9/dd0/structbuf.html">buf</a> *bp;</div>
<div class="line"><span class="lineno">  199</span>  <span class="keyword">struct </span><a class="code hl_struct" href="../../db/dfa/structdinode.html">dinode</a> *dip;</div>
<div class="line"><span class="lineno">  200</span> </div>
<div class="line"><span class="lineno">  201</span>  <span class="keywordflow">for</span>(inum = 1; inum &lt; <a class="code hl_variable" href="../../d2/d5a/fs_8c.html#a0248d0bac625de5a1415f2f8c91f3343">sb</a>.<a class="code hl_variable" href="../../df/d3d/structsuperblock.html#a355d2a1ebdc51f80820c23e69363cf42">ninodes</a>; inum++){</div>
<div class="line"><span class="lineno">  202</span>    bp = <a class="code hl_function" href="../../dc/de6/bio_8c.html#a30b8d2ef2300ed8e3d879a428fe39898">bread</a>(dev, <a class="code hl_define" href="../../df/d26/fs_8h.html#ac9a5b990015f0f86e5d4c6b21d38ffa0">IBLOCK</a>(inum, <a class="code hl_variable" href="../../d2/d5a/fs_8c.html#a0248d0bac625de5a1415f2f8c91f3343">sb</a>));</div>
<div class="line"><span class="lineno">  203</span>    dip = (<span class="keyword">struct </span><a class="code hl_struct" href="../../db/dfa/structdinode.html">dinode</a>*)bp-&gt;<a class="code hl_variable" href="../../d9/dd0/structbuf.html#ab0ec38784ab94ed35e575cf6d33912d2">data</a> + inum%<a class="code hl_define" href="../../df/d26/fs_8h.html#aadb6c866a6d0a173f5f0a6ed9c7e0228">IPB</a>;</div>
<div class="line"><span class="lineno">  204</span>    <span class="keywordflow">if</span>(dip-&gt;<a class="code hl_variable" href="../../db/dfa/structdinode.html#abf6b2a8476a803284f1c927fb3b82259">type</a> == 0){  <span class="comment">// a free inode</span></div>
<div class="line"><span class="lineno">  205</span>      <a class="code hl_function" href="../../d5/d64/defs_8h.html#a0098886a849eef10803e9f35ceec61b9">memset</a>(dip, 0, <span class="keyword">sizeof</span>(*dip));</div>
<div class="line"><span class="lineno">  206</span>      dip-&gt;<a class="code hl_variable" href="../../db/dfa/structdinode.html#abf6b2a8476a803284f1c927fb3b82259">type</a> = <a class="code hl_variable" href="../../db/dfa/structdinode.html#abf6b2a8476a803284f1c927fb3b82259">type</a>;</div>
<div class="line"><span class="lineno">  207</span>      <a class="code hl_function" href="../../d5/d64/defs_8h.html#a270d0050dc50965f4f851717841ad33c">log_write</a>(bp);   <span class="comment">// mark it allocated on the disk</span></div>
<div class="line"><span class="lineno">  208</span>      <a class="code hl_function" href="../../dc/de6/bio_8c.html#ab5335aeb503731104314321a78a6d727">brelse</a>(bp);</div>
<div class="line"><span class="lineno">  209</span>      <span class="keywordflow">return</span> iget(dev, inum);</div>
<div class="line"><span class="lineno">  210</span>    }</div>
<div class="line"><span class="lineno">  211</span>    <a class="code hl_function" href="../../dc/de6/bio_8c.html#ab5335aeb503731104314321a78a6d727">brelse</a>(bp);</div>
<div class="line"><span class="lineno">  212</span>  }</div>
<div class="line"><span class="lineno">  213</span>  <a class="code hl_function" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a">panic</a>(<span class="stringliteral">&quot;ialloc: no inodes&quot;</span>);</div>
<div class="line"><span class="lineno">  214</span>}</div>
<div class="ttc" id="abio_8c_html_a30b8d2ef2300ed8e3d879a428fe39898"><div class="ttname"><a href="../../dc/de6/bio_8c.html#a30b8d2ef2300ed8e3d879a428fe39898">bread</a></div><div class="ttdeci">struct buf * bread(uint dev, uint blockno)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/de6/bio_8c_source.html#l00097">bio.c:97</a></div></div>
<div class="ttc" id="abio_8c_html_ab5335aeb503731104314321a78a6d727"><div class="ttname"><a href="../../dc/de6/bio_8c.html#ab5335aeb503731104314321a78a6d727">brelse</a></div><div class="ttdeci">void brelse(struct buf *b)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/de6/bio_8c_source.html#l00121">bio.c:121</a></div></div>
<div class="ttc" id="adefs_8h_html_a270d0050dc50965f4f851717841ad33c"><div class="ttname"><a href="../../d5/d64/defs_8h.html#a270d0050dc50965f4f851717841ad33c">log_write</a></div><div class="ttdeci">void log_write(struct buf *)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/df8/log_8c_source.html#l00214">log.c:214</a></div></div>
<div class="ttc" id="afs_8h_html_aadb6c866a6d0a173f5f0a6ed9c7e0228"><div class="ttname"><a href="../../df/d26/fs_8h.html#aadb6c866a6d0a173f5f0a6ed9c7e0228">IPB</a></div><div class="ttdeci">#define IPB</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d26/fs_8h_source.html#l00039">fs.h:39</a></div></div>
<div class="ttc" id="afs_8h_html_ac9a5b990015f0f86e5d4c6b21d38ffa0"><div class="ttname"><a href="../../df/d26/fs_8h.html#ac9a5b990015f0f86e5d4c6b21d38ffa0">IBLOCK</a></div><div class="ttdeci">#define IBLOCK(i, sb)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d26/fs_8h_source.html#l00042">fs.h:42</a></div></div>
<div class="ttc" id="astructbuf_html_ab0ec38784ab94ed35e575cf6d33912d2"><div class="ttname"><a href="../../d9/dd0/structbuf.html#ab0ec38784ab94ed35e575cf6d33912d2">buf::data</a></div><div class="ttdeci">uchar data[BSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d6d/buf_8h_source.html#l00010">buf.h:10</a></div></div>
<div class="ttc" id="astructdinode_html"><div class="ttname"><a href="../../db/dfa/structdinode.html">dinode</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d26/fs_8h_source.html#l00029">fs.h:29</a></div></div>
<div class="ttc" id="astructdinode_html_abf6b2a8476a803284f1c927fb3b82259"><div class="ttname"><a href="../../db/dfa/structdinode.html#abf6b2a8476a803284f1c927fb3b82259">dinode::type</a></div><div class="ttdeci">short type</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d26/fs_8h_source.html#l00030">fs.h:30</a></div></div>
<div class="ttc" id="astructsuperblock_html_a355d2a1ebdc51f80820c23e69363cf42"><div class="ttname"><a href="../../df/d3d/structsuperblock.html#a355d2a1ebdc51f80820c23e69363cf42">superblock::ninodes</a></div><div class="ttdeci">uint ninodes</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d26/fs_8h_source.html#l00017">fs.h:17</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_af71d7632e6d48638682e78de0ad269af_cgraph.png" border="0" usemap="#ad5/d64/defs_8h_af71d7632e6d48638682e78de0ad269af_cgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_af71d7632e6d48638682e78de0ad269af_cgraph" id="ad5/d64/defs_8h_af71d7632e6d48638682e78de0ad269af_cgraph">
<area shape="rect" title=" " alt="" coords="5,326,57,351"/>
<area shape="rect" href="../../dc/de6/bio_8c.html#a30b8d2ef2300ed8e3d879a428fe39898" title=" " alt="" coords="113,326,167,351"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="1233,398,1287,423"/>
<area shape="rect" href="../../dc/de6/bio_8c.html#ab5335aeb503731104314321a78a6d727" title=" " alt="" coords="337,1074,394,1099"/>
<area shape="rect" href="../../d7/df8/log_8c.html#a7eacb0fbebe5ce4c7d3ddea15908b13d" title=" " alt="" coords="607,145,682,170"/>
<area shape="rect" href="../../db/d8a/ulib_8c.html#aa9cdc2409c15ccd5ee3b2031576f4093" title=" " alt="" coords="105,427,175,453"/>
<area shape="rect" href="../../da/d9b/memide_8c.html#a7f36b008f02088c86f76e98e05b55af5" title=" " alt="" coords="223,326,276,351"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="751,854,815,879"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="1475,703,1539,729"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#a6fdbe54cbecd8fc67d74793b27adcf05" title=" " alt="" coords="597,1207,692,1233"/>
<area shape="rect" href="../../d1/db0/string_8c.html#a07f97e2ed1ce37955192d52de8f4911f" title=" " alt="" coords="324,275,407,301"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ae70cc0370342e46f6db3bec367232457" title=" " alt="" coords="339,529,392,554"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="873,855,965,881"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="888,957,951,982"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="1124,807,1185,833"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="1013,905,1076,930"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="1587,1085,1643,1110"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="1351,550,1410,575"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="1351,499,1410,525"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="1335,398,1427,423"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a41af0935f3989aae450cf8988cd9c3a9" title=" " alt="" coords="887,1107,952,1133"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad788da91743c333b5bed7c4a0dd12365" title=" " alt="" coords="473,702,531,727"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a9fa00b0be5d3c4781048861e2506eb63" title=" " alt="" coords="605,702,684,727"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a1d9e7047d3dfb57809a2541d8387705e" title=" " alt="" coords="754,805,811,830"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a02ca0670bc1fe12e38453082631ff360" title=" " alt="" coords="740,653,825,678"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a87c90f0ab2a1b11c2b55f4e483bb8493" title=" " alt="" coords="877,703,962,729"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#aa997067c2c9bfef15af6fa0a10c20f4a" title=" " alt="" coords="455,1101,549,1126"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a4a34d9f03e436cfa09b88f735f6ee952" title=" " alt="" coords="611,1158,678,1183"/>
</map>
</div>

</div>
</div>
<a id="aefb190a6104cb58c0bc1f8fec88d1307" name="aefb190a6104cb58c0bc1f8fec88d1307"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aefb190a6104cb58c0bc1f8fec88d1307">&#9670;&#160;</a></span>ideinit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ideinit </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d2f/ide_8c_source.html#l00051">51</a> of file <a class="el" href="../../d9/d2f/ide_8c_source.html">ide.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   52</span>{</div>
<div class="line"><span class="lineno">   53</span>  <span class="keywordtype">int</span> i;</div>
<div class="line"><span class="lineno">   54</span> </div>
<div class="line"><span class="lineno">   55</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#ab56d728e6966819a0260c358d3ac3419">initlock</a>(&amp;idelock, <span class="stringliteral">&quot;ide&quot;</span>);</div>
<div class="line"><span class="lineno">   56</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#a63da75c0c2f0b051f2c790aea2116b63">ioapicenable</a>(<a class="code hl_define" href="../../d5/d98/traps_8h.html#ae17548e9192fbdecfb02247721aaf2df">IRQ_IDE</a>, <a class="code hl_variable" href="../../dd/d06/mp_8c.html#a6201a0661c3d5b88df5f63529298eb48">ncpu</a> - 1);</div>
<div class="line"><span class="lineno">   57</span>  idewait(0);</div>
<div class="line"><span class="lineno">   58</span> </div>
<div class="line"><span class="lineno">   59</span>  <span class="comment">// Check if disk 1 is present</span></div>
<div class="line"><span class="lineno">   60</span>  outb(0x1f6, 0xe0 | (1&lt;&lt;4));</div>
<div class="line"><span class="lineno">   61</span>  <span class="keywordflow">for</span>(i=0; i&lt;1000; i++){</div>
<div class="line"><span class="lineno">   62</span>    <span class="keywordflow">if</span>(inb(0x1f7) != 0){</div>
<div class="line"><span class="lineno">   63</span>      havedisk1 = 1;</div>
<div class="line"><span class="lineno">   64</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">   65</span>    }</div>
<div class="line"><span class="lineno">   66</span>  }</div>
<div class="line"><span class="lineno">   67</span> </div>
<div class="line"><span class="lineno">   68</span>  <span class="comment">// Switch back to disk 0.</span></div>
<div class="line"><span class="lineno">   69</span>  outb(0x1f6, 0xe0 | (0&lt;&lt;4));</div>
<div class="line"><span class="lineno">   70</span>}</div>
<div class="ttc" id="amp_8c_html_a6201a0661c3d5b88df5f63529298eb48"><div class="ttname"><a href="../../dd/d06/mp_8c.html#a6201a0661c3d5b88df5f63529298eb48">ncpu</a></div><div class="ttdeci">int ncpu</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d06/mp_8c_source.html#l00015">mp.c:15</a></div></div>
<div class="ttc" id="atraps_8h_html_ae17548e9192fbdecfb02247721aaf2df"><div class="ttname"><a href="../../d5/d98/traps_8h.html#ae17548e9192fbdecfb02247721aaf2df">IRQ_IDE</a></div><div class="ttdeci">#define IRQ_IDE</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d98/traps_8h_source.html#l00035">traps.h:35</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_aefb190a6104cb58c0bc1f8fec88d1307_cgraph.png" border="0" usemap="#ad5/d64/defs_8h_aefb190a6104cb58c0bc1f8fec88d1307_cgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_aefb190a6104cb58c0bc1f8fec88d1307_cgraph" id="ad5/d64/defs_8h_aefb190a6104cb58c0bc1f8fec88d1307_cgraph">
<area shape="rect" title=" " alt="" coords="5,31,61,56"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#abda07b4a007b2e888d9d783920460b89" title=" " alt="" coords="125,5,188,31"/>
<area shape="rect" href="../../dd/d61/ioapic_8c.html#a9688537a0879e9e2ac5a90184e2ef987" title=" " alt="" coords="109,55,204,80"/>
</map>
</div>

</div>
</div>
<a id="a709693afdb9b89d848e684e7acde1f8f" name="a709693afdb9b89d848e684e7acde1f8f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a709693afdb9b89d848e684e7acde1f8f">&#9670;&#160;</a></span>ideintr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ideintr </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d2f/ide_8c_source.html#l00104">104</a> of file <a class="el" href="../../d9/d2f/ide_8c_source.html">ide.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  105</span>{</div>
<div class="line"><span class="lineno">  106</span>  <span class="keyword">struct </span><a class="code hl_struct" href="../../d9/dd0/structbuf.html">buf</a> *b;</div>
<div class="line"><span class="lineno">  107</span> </div>
<div class="line"><span class="lineno">  108</span>  <span class="comment">// First queued buffer is the active request.</span></div>
<div class="line"><span class="lineno">  109</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#afe4ef8638f1ecb962a6e67fb086ee3b8">acquire</a>(&amp;idelock);</div>
<div class="line"><span class="lineno">  110</span> </div>
<div class="line"><span class="lineno">  111</span>  <span class="keywordflow">if</span>((b = idequeue) == 0){</div>
<div class="line"><span class="lineno">  112</span>    <a class="code hl_function" href="../../d5/d64/defs_8h.html#a4f8616948f3dbce65671f666eed1d669">release</a>(&amp;idelock);</div>
<div class="line"><span class="lineno">  113</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  114</span>  }</div>
<div class="line"><span class="lineno">  115</span>  idequeue = b-&gt;<a class="code hl_variable" href="../../d9/dd0/structbuf.html#aba5c088c4da07a5ec88edfacdae9b85a">qnext</a>;</div>
<div class="line"><span class="lineno">  116</span> </div>
<div class="line"><span class="lineno">  117</span>  <span class="comment">// Read data if needed.</span></div>
<div class="line"><span class="lineno">  118</span>  <span class="keywordflow">if</span>(!(b-&gt;<a class="code hl_variable" href="../../d9/dd0/structbuf.html#ae7d6b6c34fdeadb38970efd0554aa1a9">flags</a> &amp; <a class="code hl_define" href="../../d6/d6d/buf_8h.html#adc32011df267adb9740bcd0abf0f0663">B_DIRTY</a>) &amp;&amp; idewait(1) &gt;= 0)</div>
<div class="line"><span class="lineno">  119</span>    insl(0x1f0, b-&gt;<a class="code hl_variable" href="../../d9/dd0/structbuf.html#ab0ec38784ab94ed35e575cf6d33912d2">data</a>, <a class="code hl_define" href="../../df/d26/fs_8h.html#a403cf3149c084cea115b85c90721039a">BSIZE</a>/4);</div>
<div class="line"><span class="lineno">  120</span> </div>
<div class="line"><span class="lineno">  121</span>  <span class="comment">// Wake process waiting for this buf.</span></div>
<div class="line"><span class="lineno">  122</span>  b-&gt;<a class="code hl_variable" href="../../d9/dd0/structbuf.html#ae7d6b6c34fdeadb38970efd0554aa1a9">flags</a> |= <a class="code hl_define" href="../../d6/d6d/buf_8h.html#afab4199c0d27da71061f1c0cd5b51520">B_VALID</a>;</div>
<div class="line"><span class="lineno">  123</span>  b-&gt;<a class="code hl_variable" href="../../d9/dd0/structbuf.html#ae7d6b6c34fdeadb38970efd0554aa1a9">flags</a> &amp;= ~B_DIRTY;</div>
<div class="line"><span class="lineno">  124</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#a245b56417239f499389b2e806bd99254">wakeup</a>(b);</div>
<div class="line"><span class="lineno">  125</span> </div>
<div class="line"><span class="lineno">  126</span>  <span class="comment">// Start disk on next buf in queue.</span></div>
<div class="line"><span class="lineno">  127</span>  <span class="keywordflow">if</span>(idequeue != 0)</div>
<div class="line"><span class="lineno">  128</span>    idestart(idequeue);</div>
<div class="line"><span class="lineno">  129</span> </div>
<div class="line"><span class="lineno">  130</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#a4f8616948f3dbce65671f666eed1d669">release</a>(&amp;idelock);</div>
<div class="line"><span class="lineno">  131</span>}</div>
<div class="ttc" id="afs_8h_html_a403cf3149c084cea115b85c90721039a"><div class="ttname"><a href="../../df/d26/fs_8h.html#a403cf3149c084cea115b85c90721039a">BSIZE</a></div><div class="ttdeci">#define BSIZE</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d26/fs_8h_source.html#l00006">fs.h:6</a></div></div>
<div class="ttc" id="astructbuf_html_aba5c088c4da07a5ec88edfacdae9b85a"><div class="ttname"><a href="../../d9/dd0/structbuf.html#aba5c088c4da07a5ec88edfacdae9b85a">buf::qnext</a></div><div class="ttdeci">struct buf * qnext</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d6d/buf_8h_source.html#l00009">buf.h:9</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_a709693afdb9b89d848e684e7acde1f8f_cgraph.png" border="0" usemap="#ad5/d64/defs_8h_a709693afdb9b89d848e684e7acde1f8f_cgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_a709693afdb9b89d848e684e7acde1f8f_cgraph" id="ad5/d64/defs_8h_a709693afdb9b89d848e684e7acde1f8f_cgraph">
<area shape="rect" title=" " alt="" coords="5,380,63,405"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="225,253,289,279"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="939,355,1003,380"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a4a34d9f03e436cfa09b88f735f6ee952" title=" " alt="" coords="111,380,177,405"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="337,279,429,304"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="352,127,415,152"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="588,115,649,140"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="697,228,751,253"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="477,25,540,51"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="1051,127,1107,152"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="815,127,874,152"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="815,329,874,355"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="799,228,891,253"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_a709693afdb9b89d848e684e7acde1f8f_icgraph.png" border="0" usemap="#ad5/d64/defs_8h_a709693afdb9b89d848e684e7acde1f8f_icgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_a709693afdb9b89d848e684e7acde1f8f_icgraph" id="ad5/d64/defs_8h_a709693afdb9b89d848e684e7acde1f8f_icgraph">
<area shape="rect" title=" " alt="" coords="97,5,155,31"/>
<area shape="rect" href="../../dc/d6f/trap_8c.html#a372d166e36c086c91e5f5d81e5fead3a" title=" " alt="" coords="5,5,49,31"/>
</map>
</div>

</div>
</div>
<a id="a70985c3f5b2fb79737457b5c88f5327a" name="a70985c3f5b2fb79737457b5c88f5327a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a70985c3f5b2fb79737457b5c88f5327a">&#9670;&#160;</a></span>iderw()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iderw </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d9/dd0/structbuf.html">buf</a> *&#160;</td>
          <td class="paramname"><em>b</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d2f/ide_8c_source.html#l00138">138</a> of file <a class="el" href="../../d9/d2f/ide_8c_source.html">ide.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  139</span>{</div>
<div class="line"><span class="lineno">  140</span>  <span class="keyword">struct </span><a class="code hl_struct" href="../../d9/dd0/structbuf.html">buf</a> **pp;</div>
<div class="line"><span class="lineno">  141</span> </div>
<div class="line"><span class="lineno">  142</span>  <span class="keywordflow">if</span>(!<a class="code hl_function" href="../../d5/d64/defs_8h.html#afa76133bc67c6026376d630da9b53b68">holdingsleep</a>(&amp;b-&gt;<a class="code hl_variable" href="../../d9/dd0/structbuf.html#a626ad748d91d4bd7f4e65b74c73f2644">lock</a>))</div>
<div class="line"><span class="lineno">  143</span>    <a class="code hl_function" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a">panic</a>(<span class="stringliteral">&quot;iderw: buf not locked&quot;</span>);</div>
<div class="line"><span class="lineno">  144</span>  <span class="keywordflow">if</span>((b-&gt;<a class="code hl_variable" href="../../d9/dd0/structbuf.html#ae7d6b6c34fdeadb38970efd0554aa1a9">flags</a> &amp; (<a class="code hl_define" href="../../d6/d6d/buf_8h.html#afab4199c0d27da71061f1c0cd5b51520">B_VALID</a>|<a class="code hl_define" href="../../d6/d6d/buf_8h.html#adc32011df267adb9740bcd0abf0f0663">B_DIRTY</a>)) == <a class="code hl_define" href="../../d6/d6d/buf_8h.html#afab4199c0d27da71061f1c0cd5b51520">B_VALID</a>)</div>
<div class="line"><span class="lineno">  145</span>    <a class="code hl_function" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a">panic</a>(<span class="stringliteral">&quot;iderw: nothing to do&quot;</span>);</div>
<div class="line"><span class="lineno">  146</span>  <span class="keywordflow">if</span>(b-&gt;<a class="code hl_variable" href="../../d9/dd0/structbuf.html#ac96082c2b5f22133ac7092ef81487227">dev</a> != 0 &amp;&amp; !havedisk1)</div>
<div class="line"><span class="lineno">  147</span>    <a class="code hl_function" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a">panic</a>(<span class="stringliteral">&quot;iderw: ide disk 1 not present&quot;</span>);</div>
<div class="line"><span class="lineno">  148</span> </div>
<div class="line"><span class="lineno">  149</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#afe4ef8638f1ecb962a6e67fb086ee3b8">acquire</a>(&amp;idelock);  <span class="comment">//DOC:acquire-lock</span></div>
<div class="line"><span class="lineno">  150</span> </div>
<div class="line"><span class="lineno">  151</span>  <span class="comment">// Append b to idequeue.</span></div>
<div class="line"><span class="lineno">  152</span>  b-&gt;<a class="code hl_variable" href="../../d9/dd0/structbuf.html#aba5c088c4da07a5ec88edfacdae9b85a">qnext</a> = 0;</div>
<div class="line"><span class="lineno">  153</span>  <span class="keywordflow">for</span>(pp=&amp;idequeue; *pp; pp=&amp;(*pp)-&gt;<a class="code hl_variable" href="../../d9/dd0/structbuf.html#aba5c088c4da07a5ec88edfacdae9b85a">qnext</a>)  <span class="comment">//DOC:insert-queue</span></div>
<div class="line"><span class="lineno">  154</span>    ;</div>
<div class="line"><span class="lineno">  155</span>  *pp = b;</div>
<div class="line"><span class="lineno">  156</span> </div>
<div class="line"><span class="lineno">  157</span>  <span class="comment">// Start disk if necessary.</span></div>
<div class="line"><span class="lineno">  158</span>  <span class="keywordflow">if</span>(idequeue == b)</div>
<div class="line"><span class="lineno">  159</span>    idestart(b);</div>
<div class="line"><span class="lineno">  160</span> </div>
<div class="line"><span class="lineno">  161</span>  <span class="comment">// Wait for request to finish.</span></div>
<div class="line"><span class="lineno">  162</span>  <span class="keywordflow">while</span>((b-&gt;<a class="code hl_variable" href="../../d9/dd0/structbuf.html#ae7d6b6c34fdeadb38970efd0554aa1a9">flags</a> &amp; (<a class="code hl_define" href="../../d6/d6d/buf_8h.html#afab4199c0d27da71061f1c0cd5b51520">B_VALID</a>|<a class="code hl_define" href="../../d6/d6d/buf_8h.html#adc32011df267adb9740bcd0abf0f0663">B_DIRTY</a>)) != <a class="code hl_define" href="../../d6/d6d/buf_8h.html#afab4199c0d27da71061f1c0cd5b51520">B_VALID</a>){</div>
<div class="line"><span class="lineno">  163</span>    <a class="code hl_function" href="../../d5/d64/defs_8h.html#aca4a88f06b3ebbcc04330f7ae06c8507">sleep</a>(b, &amp;idelock);</div>
<div class="line"><span class="lineno">  164</span>  }</div>
<div class="line"><span class="lineno">  165</span> </div>
<div class="line"><span class="lineno">  166</span> </div>
<div class="line"><span class="lineno">  167</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#a4f8616948f3dbce65671f666eed1d669">release</a>(&amp;idelock);</div>
<div class="line"><span class="lineno">  168</span>}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_a70985c3f5b2fb79737457b5c88f5327a_cgraph.png" border="0" usemap="#ad5/d64/defs_8h_a70985c3f5b2fb79737457b5c88f5327a_cgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_a70985c3f5b2fb79737457b5c88f5327a_cgraph" id="ad5/d64/defs_8h_a70985c3f5b2fb79737457b5c88f5327a_cgraph">
<area shape="rect" title=" " alt="" coords="5,365,59,390"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="496,301,560,326"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="979,807,1032,833"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="1220,491,1284,517"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#a6fdbe54cbecd8fc67d74793b27adcf05" title=" " alt="" coords="343,250,437,275"/>
<area shape="rect" href="../../d1/db0/string_8c.html#a07f97e2ed1ce37955192d52de8f4911f" title=" " alt="" coords="107,1061,189,1086"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ae70cc0370342e46f6db3bec367232457" title=" " alt="" coords="121,491,175,517"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="619,149,711,174"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="633,402,696,427"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="869,522,931,547"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="759,453,821,478"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="1332,263,1388,289"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="1097,657,1155,682"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="1097,706,1155,731"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="1080,807,1172,833"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a41af0935f3989aae450cf8988cd9c3a9" title=" " alt="" coords="632,503,697,529"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad788da91743c333b5bed7c4a0dd12365" title=" " alt="" coords="237,554,295,579"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a9fa00b0be5d3c4781048861e2506eb63" title=" " alt="" coords="351,655,429,681"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a1d9e7047d3dfb57809a2541d8387705e" title=" " alt="" coords="499,605,557,630"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a02ca0670bc1fe12e38453082631ff360" title=" " alt="" coords="485,757,571,782"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a87c90f0ab2a1b11c2b55f4e483bb8493" title=" " alt="" coords="622,757,707,782"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_a70985c3f5b2fb79737457b5c88f5327a_icgraph.png" border="0" usemap="#ad5/d64/defs_8h_a70985c3f5b2fb79737457b5c88f5327a_icgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_a70985c3f5b2fb79737457b5c88f5327a_icgraph" id="ad5/d64/defs_8h_a70985c3f5b2fb79737457b5c88f5327a_icgraph">
<area shape="rect" title=" " alt="" coords="857,309,911,335"/>
<area shape="rect" href="../../dc/de6/bio_8c.html#a30b8d2ef2300ed8e3d879a428fe39898" title=" " alt="" coords="753,284,808,309"/>
<area shape="rect" href="../../dc/de6/bio_8c.html#a63c899c13b176ddf80064d32225e1298" title=" " alt="" coords="752,333,809,359"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#af95049367381647bc9487af49724b869" title=" " alt="" coords="646,5,698,31"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#aed28187406d84a3aa71f10c6235a03ec" title=" " alt="" coords="404,157,453,183"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a7220afa8e5f4bea540eb95879ea7df6e" title=" " alt="" coords="640,460,704,485"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a15858f4d8a4cc1def3d84d03c312836b" title=" " alt="" coords="528,309,581,335"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a3aba1fa9f6789d09356aec5b96d91fa8" title=" " alt="" coords="647,259,697,284"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#aff0080b2133027be2e525ca088b40e78" title=" " alt="" coords="641,765,703,791"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a28ac85a90987662e306ca8efbfe16074" title=" " alt="" coords="247,204,339,229"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a6af7eb39268127d389792cec37785666" title=" " alt="" coords="245,155,340,180"/>
<area shape="rect" href="../../df/dc9/exec_8c.html#ace32454ed0d37834dcb1cb4f8b727e6e" title=" " alt="" coords="267,303,318,328"/>
<area shape="rect" href="../../d6/d13/file_8c.html#a1dc8c87c7e48bdaaf98e9c7047928f29" title=" " alt="" coords="261,56,325,81"/>
<area shape="rect" href="../../d6/d13/file_8c.html#afff8e849fa54dea2a5a27dbb97474607" title=" " alt="" coords="262,253,323,279"/>
<area shape="rect" href="../../d6/d13/file_8c.html#ab8de757a0a9f58dcc6511ea5e46ebb88" title=" " alt="" coords="259,105,326,131"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#ad1c5f8693cb35b9605fee09eebdda640" title=" " alt="" coords="253,412,332,437"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a759600870314007ac558871239122fb7" title=" " alt="" coords="257,511,328,536"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a74e45efc661ca17c068bc283b3842e6d" title=" " alt="" coords="253,461,332,487"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#ae1e58ee11d41f643929520d8c1640da7" title=" " alt="" coords="251,360,335,385"/>
<area shape="rect" href="../../d0/d56/console_8c.html#ab508ff0f4db26fe35cd25fa648f9ee75" title=" " alt="" coords="109,155,193,180"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#ac5b5d4517586be6396b4f3b37445945a" title=" " alt="" coords="111,475,190,500"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a6f94e3b215d069b5419e87bafe80799a" title=" " alt="" coords="115,425,187,451"/>
<area shape="rect" href="../../d8/d60/init_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title=" " alt="" coords="125,253,176,279"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#aedbeff6afe5d4e22330c7e6b5e6df893" title=" " alt="" coords="118,376,183,401"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#aeaa813ddeb6a5fac3c45714c7351c526" title=" " alt="" coords="111,303,190,328"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="5,672,56,697"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title=" " alt="" coords="5,376,56,401"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a54bf714d9e898cbdcbc061b280bbfae0" title=" " alt="" coords="113,56,188,81"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#ac243c8f20f5fb2e3e257b5007af2c204" title=" " alt="" coords="113,204,189,229"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a687d939a9e4792af15db96f2c2f34378" title=" " alt="" coords="111,105,190,131"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#ab3c447f135c68e4c3c1f8d5866f6e77b" title=" " alt="" coords="533,561,576,587"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a69a135a0e8a06d9f306d77ebc0c1f7a0" title=" " alt="" coords="401,511,457,536"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#aaf98ef7cdde3a0dfb2e49919de3298b1" title=" " alt="" coords="271,672,314,697"/>
<area shape="rect" href="../../d6/d13/file_8c.html#ae557c81ab89c24219146144bb6adaa2c" title=" " alt="" coords="393,612,464,637"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a207b3008bae35596c55ec7c4fc6875eb" title=" " alt="" coords="388,461,469,487"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a77cc2edce6e78f22dd9eb377462762f2" title=" " alt="" coords="116,573,185,599"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#aa0d46fcb43667c805b84ea7e1ff6100a" title=" " alt="" coords="124,623,177,648"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a86fe524d99d69c18a335512cf3405b31" title=" " alt="" coords="123,721,179,747"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a57e55b2d0161d62bb99765ca3de43e35" title=" " alt="" coords="117,771,184,796"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a0b0ff95e564df3c3e8fc977226b75de7" title=" " alt="" coords="118,820,183,845"/>
<area shape="rect" href="../../d1/d8f/cat_8c.html#a90a33618884bcf5e892297879bc016ff" title=" " alt="" coords="131,968,171,993"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a5a12affe4fdfaa172d85da9a6adf98d2" title=" " alt="" coords="111,869,190,895"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a425a0efe4f459decf4b5ea14517ab3cf" title=" " alt="" coords="104,919,197,944"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#aedd6d3f148dd5c99b47900215c1ac43f" title=" " alt="" coords="124,524,177,549"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a8db9f9a2634bab29096bab0b8bc6945c" title=" " alt="" coords="121,672,180,697"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a5341068f021beac8cf0032b97d231e6f" title=" " alt="" coords="517,359,592,384"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a201acc8337a2893268b61ea5a1ee0d53" title=" " alt="" coords="393,259,464,284"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a301761a27cf266e0bad483272fb31a3c" title=" " alt="" coords="533,765,576,791"/>
<area shape="rect" href="../../d7/df8/log_8c.html#ad5e79aaefb91f41b9ef6aeae7ecf4708" title=" " alt="" coords="527,815,583,840"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a11c5d62d28e8121e75235d361158156e" title=" " alt="" coords="399,815,458,840"/>
</map>
</div>

</div>
</div>
<a id="a9b6e7f6c302700cb54216ad22cbc1591" name="a9b6e7f6c302700cb54216ad22cbc1591"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9b6e7f6c302700cb54216ad22cbc1591">&#9670;&#160;</a></span>idtinit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void idtinit </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d6f/trap_8c_source.html#l00030">30</a> of file <a class="el" href="../../dc/d6f/trap_8c_source.html">trap.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   31</span>{</div>
<div class="line"><span class="lineno">   32</span>  lidt(<a class="code hl_variable" href="../../dc/d6f/trap_8c.html#a3facbc1e1e6618fb238fc124bd9aa827">idt</a>, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="../../dc/d6f/trap_8c.html#a3facbc1e1e6618fb238fc124bd9aa827">idt</a>));</div>
<div class="line"><span class="lineno">   33</span>}</div>
<div class="ttc" id="atrap_8c_html_a3facbc1e1e6618fb238fc124bd9aa827"><div class="ttname"><a href="../../dc/d6f/trap_8c.html#a3facbc1e1e6618fb238fc124bd9aa827">idt</a></div><div class="ttdeci">struct gatedesc idt[256]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d6f/trap_8c_source.html#l00012">trap.c:12</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a02a4eb876d45b936de1adc73bff02ebf" name="a02a4eb876d45b936de1adc73bff02ebf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a02a4eb876d45b936de1adc73bff02ebf">&#9670;&#160;</a></span>idup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d0/df8/structinode.html">inode</a> * idup </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d0/df8/structinode.html">inode</a> *&#160;</td>
          <td class="paramname"><em>ip</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d2/d5a/fs_8c_source.html#l00277">277</a> of file <a class="el" href="../../d2/d5a/fs_8c_source.html">fs.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  278</span>{</div>
<div class="line"><span class="lineno">  279</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#afe4ef8638f1ecb962a6e67fb086ee3b8">acquire</a>(&amp;<a class="code hl_variable" href="../../d2/d5a/fs_8c.html#a5a78db4f7c856337d906f0606b19bff5">icache</a>.lock);</div>
<div class="line"><span class="lineno">  280</span>  ip-&gt;<a class="code hl_variable" href="../../d0/df8/structinode.html#a6a519028ee67f805482b3e1725bf09c5">ref</a>++;</div>
<div class="line"><span class="lineno">  281</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#a4f8616948f3dbce65671f666eed1d669">release</a>(&amp;<a class="code hl_variable" href="../../d2/d5a/fs_8c.html#a5a78db4f7c856337d906f0606b19bff5">icache</a>.lock);</div>
<div class="line"><span class="lineno">  282</span>  <span class="keywordflow">return</span> ip;</div>
<div class="line"><span class="lineno">  283</span>}</div>
<div class="ttc" id="afs_8c_html_a5a78db4f7c856337d906f0606b19bff5"><div class="ttname"><a href="../../d2/d5a/fs_8c.html#a5a78db4f7c856337d906f0606b19bff5">icache</a></div><div class="ttdeci">struct @5 icache</div></div>
<div class="ttc" id="astructinode_html_a6a519028ee67f805482b3e1725bf09c5"><div class="ttname"><a href="../../d0/df8/structinode.html#a6a519028ee67f805482b3e1725bf09c5">inode::ref</a></div><div class="ttdeci">int ref</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d4d/file_8h_source.html#l00016">file.h:16</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_a02a4eb876d45b936de1adc73bff02ebf_cgraph.png" border="0" usemap="#ad5/d64/defs_8h_a02a4eb876d45b936de1adc73bff02ebf_cgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_a02a4eb876d45b936de1adc73bff02ebf_cgraph" id="ad5/d64/defs_8h_a02a4eb876d45b936de1adc73bff02ebf_cgraph">
<area shape="rect" title=" " alt="" coords="5,119,52,145"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="100,246,164,271"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="813,94,877,119"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="212,347,304,373"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="227,246,289,271"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="463,347,524,373"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="572,195,625,221"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="352,347,415,373"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="925,270,981,295"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="690,346,749,371"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="690,94,749,119"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="673,143,765,169"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_a02a4eb876d45b936de1adc73bff02ebf_icgraph.png" border="0" usemap="#ad5/d64/defs_8h_a02a4eb876d45b936de1adc73bff02ebf_icgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_a02a4eb876d45b936de1adc73bff02ebf_icgraph" id="ad5/d64/defs_8h_a02a4eb876d45b936de1adc73bff02ebf_icgraph">
<area shape="rect" title=" " alt="" coords="751,496,797,522"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#acd2e1ded4bb6fce4500438bf928330f4" title=" " alt="" coords="659,496,703,522"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#ac5b5d4517586be6396b4f3b37445945a" title=" " alt="" coords="111,572,190,598"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a5a12affe4fdfaa172d85da9a6adf98d2" title=" " alt="" coords="391,268,469,294"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a425a0efe4f459decf4b5ea14517ab3cf" title=" " alt="" coords="245,319,339,344"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a8faab06cc4d48335076b368f02709ee2" title=" " alt="" coords="387,370,473,395"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a330ed2370fe27045b8bec1eb0bd7818f" title=" " alt="" coords="259,420,325,446"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#a7ae98824a008ffbc5506060227b6faa0" title=" " alt="" coords="267,996,317,1022"/>
<area shape="rect" href="../../d5/de1/forktest_8c.html#a0ef8ccf57bc8c491407ec513b234f83c" title=" " alt="" coords="533,1023,599,1048"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a77a4432bc67dfb513f1c1d698c2c4ea6" title=" " alt="" coords="396,471,464,496"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a1740f29f4ce6d3060fd79a9312edc315" title=" " alt="" coords="254,522,330,547"/>
<area shape="rect" href="../../d0/d87/foo_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="541,1072,591,1098"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#aa1c6e6e76813ccb29a29bb119dba668a" title=" " alt="" coords="541,720,591,746"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a3208ed001a225f5d9ea3fb37f46810c7" title=" " alt="" coords="104,871,197,896"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a16ae754fb9c5622d44d0c3ce62ad7c49" title=" " alt="" coords="403,922,457,947"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a026b8c4ab2cb9af17e1c20d533981604" title=" " alt="" coords="257,15,327,40"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a06636ed0cda58c748d68e82d33d1afce" title=" " alt="" coords="116,66,185,91"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a02e1ca3f4db5f4bf8a683a0b7c18cc43" title=" " alt="" coords="530,116,602,142"/>
<area shape="rect" href="../../dd/d35/sysproc_8c.html#a3b05102e512b34446a54334f916ba5cd" title=" " alt="" coords="530,1122,602,1147"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a6888f9f6d973f81f73091d1530ad212b" title=" " alt="" coords="547,167,585,192"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a98d8496ecb698b9400831f2718d805c3" title=" " alt="" coords="521,218,611,243"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="5,395,56,420"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title=" " alt="" coords="5,1022,56,1047"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#aedbeff6afe5d4e22330c7e6b5e6df893" title=" " alt="" coords="118,996,183,1022"/>
<area shape="rect" href="../../d5/de1/forktest_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title=" " alt="" coords="405,1023,455,1048"/>
<area shape="rect" href="../../de/de9/vm_8c.html#afea0f0a82a9f9c7aae26f90b5e0836c6" title=" " alt="" coords="393,670,467,695"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a1b57bfa0091c9be3ccc16dbb85ce3acf" title=" " alt="" coords="393,820,467,846"/>
<area shape="rect" href="../../de/de9/vm_8c.html#ac96c231d4053eaf4322c27d1f2cd9d49" title=" " alt="" coords="398,771,462,796"/>
<area shape="rect" href="../../df/dc9/exec_8c.html#ace32454ed0d37834dcb1cb4f8b727e6e" title=" " alt="" coords="267,670,317,695"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a9c16214741f4fcd088e5eea468709328" title=" " alt="" coords="255,719,329,744"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a6f94e3b215d069b5419e87bafe80799a" title=" " alt="" coords="115,720,187,746"/>
<area shape="rect" href="../../d8/d60/init_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title=" " alt="" coords="125,622,176,647"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#aeaa813ddeb6a5fac3c45714c7351c526" title=" " alt="" coords="111,671,190,696"/>
<area shape="rect" href="../../dd/d35/sysproc_8c.html#ab21d46be776cf6075a997af525a1a628" title=" " alt="" coords="113,770,188,795"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a81c8a6a0cae413bc81aa223f7f7b7205" title=" " alt="" coords="260,820,324,846"/>
</map>
</div>

</div>
</div>
<a id="a301761a27cf266e0bad483272fb31a3c" name="a301761a27cf266e0bad483272fb31a3c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a301761a27cf266e0bad483272fb31a3c">&#9670;&#160;</a></span>iinit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iinit </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>dev</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d2/d5a/fs_8c_source.html#l00172">172</a> of file <a class="el" href="../../d2/d5a/fs_8c_source.html">fs.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  173</span>{</div>
<div class="line"><span class="lineno">  174</span>  <span class="keywordtype">int</span> i = 0;</div>
<div class="line"><span class="lineno">  175</span>  </div>
<div class="line"><span class="lineno">  176</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#ab56d728e6966819a0260c358d3ac3419">initlock</a>(&amp;<a class="code hl_variable" href="../../d2/d5a/fs_8c.html#a5a78db4f7c856337d906f0606b19bff5">icache</a>.lock, <span class="stringliteral">&quot;icache&quot;</span>);</div>
<div class="line"><span class="lineno">  177</span>  <span class="keywordflow">for</span>(i = 0; i &lt; <a class="code hl_define" href="../../d5/d33/param_8h.html#adabafa10c7951be7c875cd2ee212be85">NINODE</a>; i++) {</div>
<div class="line"><span class="lineno">  178</span>    <a class="code hl_function" href="../../d5/d64/defs_8h.html#af5ca8072e3877a883fb34ce59eff88cb">initsleeplock</a>(&amp;<a class="code hl_variable" href="../../d2/d5a/fs_8c.html#a5a78db4f7c856337d906f0606b19bff5">icache</a>.inode[i].lock, <span class="stringliteral">&quot;inode&quot;</span>);</div>
<div class="line"><span class="lineno">  179</span>  }</div>
<div class="line"><span class="lineno">  180</span> </div>
<div class="line"><span class="lineno">  181</span>  <a class="code hl_function" href="../../d2/d5a/fs_8c.html#aff0080b2133027be2e525ca088b40e78">readsb</a>(dev, &amp;<a class="code hl_variable" href="../../d2/d5a/fs_8c.html#a0248d0bac625de5a1415f2f8c91f3343">sb</a>);</div>
<div class="line"><span class="lineno">  182</span>  <a class="code hl_function" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6">cprintf</a>(<span class="stringliteral">&quot;sb: size %d nblocks %d ninodes %d nlog %d logstart %d\</span></div>
<div class="line"><span class="lineno">  183</span><span class="stringliteral"> inodestart %d bmap start %d\n&quot;</span>, <a class="code hl_variable" href="../../d2/d5a/fs_8c.html#a0248d0bac625de5a1415f2f8c91f3343">sb</a>.<a class="code hl_variable" href="../../df/d3d/structsuperblock.html#a7c6e4d6da139ecee74eb7816d5d44fa6">size</a>, <a class="code hl_variable" href="../../d2/d5a/fs_8c.html#a0248d0bac625de5a1415f2f8c91f3343">sb</a>.<a class="code hl_variable" href="../../df/d3d/structsuperblock.html#a2a27a7cfb54689f0e1dcd1788d049218">nblocks</a>,</div>
<div class="line"><span class="lineno">  184</span>          <a class="code hl_variable" href="../../d2/d5a/fs_8c.html#a0248d0bac625de5a1415f2f8c91f3343">sb</a>.<a class="code hl_variable" href="../../df/d3d/structsuperblock.html#a355d2a1ebdc51f80820c23e69363cf42">ninodes</a>, <a class="code hl_variable" href="../../d2/d5a/fs_8c.html#a0248d0bac625de5a1415f2f8c91f3343">sb</a>.<a class="code hl_variable" href="../../df/d3d/structsuperblock.html#aea92ae872785fd4fb39b903d9157aac5">nlog</a>, <a class="code hl_variable" href="../../d2/d5a/fs_8c.html#a0248d0bac625de5a1415f2f8c91f3343">sb</a>.<a class="code hl_variable" href="../../df/d3d/structsuperblock.html#a460268b28aced19797e8d7b84aa60ebf">logstart</a>, <a class="code hl_variable" href="../../d2/d5a/fs_8c.html#a0248d0bac625de5a1415f2f8c91f3343">sb</a>.<a class="code hl_variable" href="../../df/d3d/structsuperblock.html#adde361528f3905445974301b424611c1">inodestart</a>,</div>
<div class="line"><span class="lineno">  185</span>          <a class="code hl_variable" href="../../d2/d5a/fs_8c.html#a0248d0bac625de5a1415f2f8c91f3343">sb</a>.<a class="code hl_variable" href="../../df/d3d/structsuperblock.html#a3c815dda5be6bda609389e76434171cc">bmapstart</a>);</div>
<div class="line"><span class="lineno">  186</span>}</div>
<div class="ttc" id="afs_8c_html_aff0080b2133027be2e525ca088b40e78"><div class="ttname"><a href="../../d2/d5a/fs_8c.html#aff0080b2133027be2e525ca088b40e78">readsb</a></div><div class="ttdeci">void readsb(int dev, struct superblock *sb)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d5a/fs_8c_source.html#l00032">fs.c:32</a></div></div>
<div class="ttc" id="aparam_8h_html_adabafa10c7951be7c875cd2ee212be85"><div class="ttname"><a href="../../d5/d33/param_8h.html#adabafa10c7951be7c875cd2ee212be85">NINODE</a></div><div class="ttdeci">#define NINODE</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d33/param_8h_source.html#l00006">param.h:6</a></div></div>
<div class="ttc" id="astructsuperblock_html_a2a27a7cfb54689f0e1dcd1788d049218"><div class="ttname"><a href="../../df/d3d/structsuperblock.html#a2a27a7cfb54689f0e1dcd1788d049218">superblock::nblocks</a></div><div class="ttdeci">uint nblocks</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d26/fs_8h_source.html#l00016">fs.h:16</a></div></div>
<div class="ttc" id="astructsuperblock_html_a3c815dda5be6bda609389e76434171cc"><div class="ttname"><a href="../../df/d3d/structsuperblock.html#a3c815dda5be6bda609389e76434171cc">superblock::bmapstart</a></div><div class="ttdeci">uint bmapstart</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d26/fs_8h_source.html#l00021">fs.h:21</a></div></div>
<div class="ttc" id="astructsuperblock_html_a460268b28aced19797e8d7b84aa60ebf"><div class="ttname"><a href="../../df/d3d/structsuperblock.html#a460268b28aced19797e8d7b84aa60ebf">superblock::logstart</a></div><div class="ttdeci">uint logstart</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d26/fs_8h_source.html#l00019">fs.h:19</a></div></div>
<div class="ttc" id="astructsuperblock_html_a7c6e4d6da139ecee74eb7816d5d44fa6"><div class="ttname"><a href="../../df/d3d/structsuperblock.html#a7c6e4d6da139ecee74eb7816d5d44fa6">superblock::size</a></div><div class="ttdeci">uint size</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d26/fs_8h_source.html#l00015">fs.h:15</a></div></div>
<div class="ttc" id="astructsuperblock_html_adde361528f3905445974301b424611c1"><div class="ttname"><a href="../../df/d3d/structsuperblock.html#adde361528f3905445974301b424611c1">superblock::inodestart</a></div><div class="ttdeci">uint inodestart</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d26/fs_8h_source.html#l00020">fs.h:20</a></div></div>
<div class="ttc" id="astructsuperblock_html_aea92ae872785fd4fb39b903d9157aac5"><div class="ttname"><a href="../../df/d3d/structsuperblock.html#aea92ae872785fd4fb39b903d9157aac5">superblock::nlog</a></div><div class="ttdeci">uint nlog</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d26/fs_8h_source.html#l00018">fs.h:18</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_a301761a27cf266e0bad483272fb31a3c_cgraph.png" border="0" usemap="#ad5/d64/defs_8h_a301761a27cf266e0bad483272fb31a3c_cgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_a301761a27cf266e0bad483272fb31a3c_cgraph" id="ad5/d64/defs_8h_a301761a27cf266e0bad483272fb31a3c_cgraph">
<area shape="rect" title=" " alt="" coords="5,1133,48,1158"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="742,905,801,930"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#abda07b4a007b2e888d9d783920460b89" title=" " alt="" coords="239,1183,301,1209"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#aaa5746f0a7ae0071b2916be5fdedf4ab" title=" " alt="" coords="96,1209,191,1234"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#aff0080b2133027be2e525ca088b40e78" title=" " alt="" coords="113,1031,174,1057"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="877,499,941,525"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="1360,726,1413,751"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="877,651,941,677"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="1000,599,1092,625"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="1015,447,1077,473"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="1251,373,1312,398"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="1140,347,1203,373"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="1143,397,1199,422"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="1478,677,1537,702"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="1461,726,1553,751"/>
<area shape="rect" href="../../dc/de6/bio_8c.html#a30b8d2ef2300ed8e3d879a428fe39898" title=" " alt="" coords="243,955,297,981"/>
<area shape="rect" href="../../d1/db0/string_8c.html#a07f97e2ed1ce37955192d52de8f4911f" title=" " alt="" coords="451,1057,533,1082"/>
<area shape="rect" href="../../dc/de6/bio_8c.html#ab5335aeb503731104314321a78a6d727" title=" " alt="" coords="463,727,521,753"/>
<area shape="rect" href="../../da/d9b/memide_8c.html#a7f36b008f02088c86f76e98e05b55af5" title=" " alt="" coords="349,955,403,981"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#a6fdbe54cbecd8fc67d74793b27adcf05" title=" " alt="" coords="724,449,819,474"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ae70cc0370342e46f6db3bec367232457" title=" " alt="" coords="465,423,519,449"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a41af0935f3989aae450cf8988cd9c3a9" title=" " alt="" coords="1013,346,1079,371"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad788da91743c333b5bed7c4a0dd12365" title=" " alt="" coords="600,195,657,221"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a9fa00b0be5d3c4781048861e2506eb63" title=" " alt="" coords="732,195,811,221"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a1d9e7047d3dfb57809a2541d8387705e" title=" " alt="" coords="881,145,938,170"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a02ca0670bc1fe12e38453082631ff360" title=" " alt="" coords="867,246,952,271"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a87c90f0ab2a1b11c2b55f4e483bb8493" title=" " alt="" coords="1003,297,1089,322"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#aa997067c2c9bfef15af6fa0a10c20f4a" title=" " alt="" coords="581,701,676,726"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a4a34d9f03e436cfa09b88f735f6ee952" title=" " alt="" coords="738,601,805,626"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_a301761a27cf266e0bad483272fb31a3c_icgraph.png" border="0" usemap="#ad5/d64/defs_8h_a301761a27cf266e0bad483272fb31a3c_icgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_a301761a27cf266e0bad483272fb31a3c_icgraph" id="ad5/d64/defs_8h_a301761a27cf266e0bad483272fb31a3c_icgraph">
<area shape="rect" title=" " alt="" coords="112,5,155,31"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a11c5d62d28e8121e75235d361158156e" title=" " alt="" coords="5,5,64,31"/>
</map>
</div>

</div>
</div>
<a id="a29a4d743d41fe659f74b0a57fdc25012" name="a29a4d743d41fe659f74b0a57fdc25012"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a29a4d743d41fe659f74b0a57fdc25012">&#9670;&#160;</a></span>ilock()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ilock </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d0/df8/structinode.html">inode</a> *&#160;</td>
          <td class="paramname"><em>ip</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d2/d5a/fs_8c_source.html#l00288">288</a> of file <a class="el" href="../../d2/d5a/fs_8c_source.html">fs.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  289</span>{</div>
<div class="line"><span class="lineno">  290</span>  <span class="keyword">struct </span><a class="code hl_struct" href="../../d9/dd0/structbuf.html">buf</a> *bp;</div>
<div class="line"><span class="lineno">  291</span>  <span class="keyword">struct </span><a class="code hl_struct" href="../../db/dfa/structdinode.html">dinode</a> *dip;</div>
<div class="line"><span class="lineno">  292</span> </div>
<div class="line"><span class="lineno">  293</span>  <span class="keywordflow">if</span>(ip == 0 || ip-&gt;<a class="code hl_variable" href="../../d0/df8/structinode.html#a6a519028ee67f805482b3e1725bf09c5">ref</a> &lt; 1)</div>
<div class="line"><span class="lineno">  294</span>    <a class="code hl_function" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a">panic</a>(<span class="stringliteral">&quot;ilock&quot;</span>);</div>
<div class="line"><span class="lineno">  295</span> </div>
<div class="line"><span class="lineno">  296</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#aecd4639fe2f9aaad8e8cee2b5e0688c3">acquiresleep</a>(&amp;ip-&gt;<a class="code hl_variable" href="../../d0/df8/structinode.html#a46bad0e938fbd348ac02bdef0c8d6215">lock</a>);</div>
<div class="line"><span class="lineno">  297</span> </div>
<div class="line"><span class="lineno">  298</span>  <span class="keywordflow">if</span>(ip-&gt;<a class="code hl_variable" href="../../d0/df8/structinode.html#aad324382ba30eb83daa5304fce7dca08">valid</a> == 0){</div>
<div class="line"><span class="lineno">  299</span>    bp = <a class="code hl_function" href="../../dc/de6/bio_8c.html#a30b8d2ef2300ed8e3d879a428fe39898">bread</a>(ip-&gt;<a class="code hl_variable" href="../../d0/df8/structinode.html#a121742a89c4531f03a7de1613d5be605">dev</a>, <a class="code hl_define" href="../../df/d26/fs_8h.html#ac9a5b990015f0f86e5d4c6b21d38ffa0">IBLOCK</a>(ip-&gt;<a class="code hl_variable" href="../../d0/df8/structinode.html#a8acc2b9df0bfc6856da62925763db7fe">inum</a>, <a class="code hl_variable" href="../../d2/d5a/fs_8c.html#a0248d0bac625de5a1415f2f8c91f3343">sb</a>));</div>
<div class="line"><span class="lineno">  300</span>    dip = (<span class="keyword">struct </span><a class="code hl_struct" href="../../db/dfa/structdinode.html">dinode</a>*)bp-&gt;<a class="code hl_variable" href="../../d9/dd0/structbuf.html#ab0ec38784ab94ed35e575cf6d33912d2">data</a> + ip-&gt;<a class="code hl_variable" href="../../d0/df8/structinode.html#a8acc2b9df0bfc6856da62925763db7fe">inum</a>%<a class="code hl_define" href="../../df/d26/fs_8h.html#aadb6c866a6d0a173f5f0a6ed9c7e0228">IPB</a>;</div>
<div class="line"><span class="lineno">  301</span>    ip-&gt;<a class="code hl_variable" href="../../d0/df8/structinode.html#a8d74bec2898785c057111c328d23fda2">type</a> = dip-&gt;<a class="code hl_variable" href="../../db/dfa/structdinode.html#abf6b2a8476a803284f1c927fb3b82259">type</a>;</div>
<div class="line"><span class="lineno">  302</span>    ip-&gt;<a class="code hl_variable" href="../../d0/df8/structinode.html#a34af7242018a977dace5730683850875">major</a> = dip-&gt;<a class="code hl_variable" href="../../db/dfa/structdinode.html#aca8272002020f48219df175c986db257">major</a>;</div>
<div class="line"><span class="lineno">  303</span>    ip-&gt;<a class="code hl_variable" href="../../d0/df8/structinode.html#a37878866e7905b666db2aa33076076a2">minor</a> = dip-&gt;<a class="code hl_variable" href="../../db/dfa/structdinode.html#ae97965f85e7353313f85035e8fc63495">minor</a>;</div>
<div class="line"><span class="lineno">  304</span>    ip-&gt;<a class="code hl_variable" href="../../d0/df8/structinode.html#af8b88b409bea7ef99c49a55f387538b2">nlink</a> = dip-&gt;<a class="code hl_variable" href="../../db/dfa/structdinode.html#a105562253b461c11413c9a229ef15358">nlink</a>;</div>
<div class="line"><span class="lineno">  305</span>    ip-&gt;<a class="code hl_variable" href="../../d0/df8/structinode.html#a918af769c48a8ca8afac057bf83d12de">size</a> = dip-&gt;<a class="code hl_variable" href="../../db/dfa/structdinode.html#a990ad8ddf5f8c051fbbe95cf550d2164">size</a>;</div>
<div class="line"><span class="lineno">  306</span>    <a class="code hl_function" href="../../d5/d64/defs_8h.html#ac152fff34fe03e497d35b1d4c47f1445">memmove</a>(ip-&gt;<a class="code hl_variable" href="../../d0/df8/structinode.html#a7ba4ab7e52404b80d6d854678715ae30">addrs</a>, dip-&gt;<a class="code hl_variable" href="../../db/dfa/structdinode.html#a705729b3a39c10c0ba6927fc5e4e0563">addrs</a>, <span class="keyword">sizeof</span>(ip-&gt;<a class="code hl_variable" href="../../d0/df8/structinode.html#a7ba4ab7e52404b80d6d854678715ae30">addrs</a>));</div>
<div class="line"><span class="lineno">  307</span>    <a class="code hl_function" href="../../dc/de6/bio_8c.html#ab5335aeb503731104314321a78a6d727">brelse</a>(bp);</div>
<div class="line"><span class="lineno">  308</span>    ip-&gt;<a class="code hl_variable" href="../../d0/df8/structinode.html#aad324382ba30eb83daa5304fce7dca08">valid</a> = 1;</div>
<div class="line"><span class="lineno">  309</span>    <span class="keywordflow">if</span>(ip-&gt;<a class="code hl_variable" href="../../d0/df8/structinode.html#a8d74bec2898785c057111c328d23fda2">type</a> == 0)</div>
<div class="line"><span class="lineno">  310</span>      <a class="code hl_function" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a">panic</a>(<span class="stringliteral">&quot;ilock: no type&quot;</span>);</div>
<div class="line"><span class="lineno">  311</span>  }</div>
<div class="line"><span class="lineno">  312</span>}</div>
<div class="ttc" id="adefs_8h_html_aecd4639fe2f9aaad8e8cee2b5e0688c3"><div class="ttname"><a href="../../d5/d64/defs_8h.html#aecd4639fe2f9aaad8e8cee2b5e0688c3">acquiresleep</a></div><div class="ttdeci">void acquiresleep(struct sleeplock *)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dd1/sleeplock_8c_source.html#l00023">sleeplock.c:23</a></div></div>
<div class="ttc" id="astructdinode_html_a105562253b461c11413c9a229ef15358"><div class="ttname"><a href="../../db/dfa/structdinode.html#a105562253b461c11413c9a229ef15358">dinode::nlink</a></div><div class="ttdeci">short nlink</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d26/fs_8h_source.html#l00033">fs.h:33</a></div></div>
<div class="ttc" id="astructdinode_html_a705729b3a39c10c0ba6927fc5e4e0563"><div class="ttname"><a href="../../db/dfa/structdinode.html#a705729b3a39c10c0ba6927fc5e4e0563">dinode::addrs</a></div><div class="ttdeci">uint addrs[NDIRECT+1]</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d26/fs_8h_source.html#l00035">fs.h:35</a></div></div>
<div class="ttc" id="astructdinode_html_a990ad8ddf5f8c051fbbe95cf550d2164"><div class="ttname"><a href="../../db/dfa/structdinode.html#a990ad8ddf5f8c051fbbe95cf550d2164">dinode::size</a></div><div class="ttdeci">uint size</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d26/fs_8h_source.html#l00034">fs.h:34</a></div></div>
<div class="ttc" id="astructdinode_html_aca8272002020f48219df175c986db257"><div class="ttname"><a href="../../db/dfa/structdinode.html#aca8272002020f48219df175c986db257">dinode::major</a></div><div class="ttdeci">short major</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d26/fs_8h_source.html#l00031">fs.h:31</a></div></div>
<div class="ttc" id="astructdinode_html_ae97965f85e7353313f85035e8fc63495"><div class="ttname"><a href="../../db/dfa/structdinode.html#ae97965f85e7353313f85035e8fc63495">dinode::minor</a></div><div class="ttdeci">short minor</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d26/fs_8h_source.html#l00032">fs.h:32</a></div></div>
<div class="ttc" id="astructinode_html_a34af7242018a977dace5730683850875"><div class="ttname"><a href="../../d0/df8/structinode.html#a34af7242018a977dace5730683850875">inode::major</a></div><div class="ttdeci">short major</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d4d/file_8h_source.html#l00021">file.h:21</a></div></div>
<div class="ttc" id="astructinode_html_a37878866e7905b666db2aa33076076a2"><div class="ttname"><a href="../../d0/df8/structinode.html#a37878866e7905b666db2aa33076076a2">inode::minor</a></div><div class="ttdeci">short minor</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d4d/file_8h_source.html#l00022">file.h:22</a></div></div>
<div class="ttc" id="astructinode_html_a46bad0e938fbd348ac02bdef0c8d6215"><div class="ttname"><a href="../../d0/df8/structinode.html#a46bad0e938fbd348ac02bdef0c8d6215">inode::lock</a></div><div class="ttdeci">struct sleeplock lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d4d/file_8h_source.html#l00017">file.h:17</a></div></div>
<div class="ttc" id="astructinode_html_a7ba4ab7e52404b80d6d854678715ae30"><div class="ttname"><a href="../../d0/df8/structinode.html#a7ba4ab7e52404b80d6d854678715ae30">inode::addrs</a></div><div class="ttdeci">uint addrs[NDIRECT+1]</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d4d/file_8h_source.html#l00025">file.h:25</a></div></div>
<div class="ttc" id="astructinode_html_aad324382ba30eb83daa5304fce7dca08"><div class="ttname"><a href="../../d0/df8/structinode.html#aad324382ba30eb83daa5304fce7dca08">inode::valid</a></div><div class="ttdeci">int valid</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d4d/file_8h_source.html#l00018">file.h:18</a></div></div>
<div class="ttc" id="astructinode_html_af8b88b409bea7ef99c49a55f387538b2"><div class="ttname"><a href="../../d0/df8/structinode.html#af8b88b409bea7ef99c49a55f387538b2">inode::nlink</a></div><div class="ttdeci">short nlink</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d4d/file_8h_source.html#l00023">file.h:23</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_a29a4d743d41fe659f74b0a57fdc25012_cgraph.png" border="0" usemap="#ad5/d64/defs_8h_a29a4d743d41fe659f74b0a57fdc25012_cgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_a29a4d743d41fe659f74b0a57fdc25012_cgraph" id="ad5/d64/defs_8h_a29a4d743d41fe659f74b0a57fdc25012_cgraph">
<area shape="rect" title=" " alt="" coords="5,1006,55,1031"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#aaad2d7a86d4859982dd9a132f5128ff2" title=" " alt="" coords="205,677,300,702"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="1241,803,1295,829"/>
<area shape="rect" href="../../dc/de6/bio_8c.html#a30b8d2ef2300ed8e3d879a428fe39898" title=" " alt="" coords="103,955,157,981"/>
<area shape="rect" href="../../d1/db0/string_8c.html#a07f97e2ed1ce37955192d52de8f4911f" title=" " alt="" coords="348,1006,431,1031"/>
<area shape="rect" href="../../dc/de6/bio_8c.html#ab5335aeb503731104314321a78a6d727" title=" " alt="" coords="361,1197,418,1222"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="759,803,823,829"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="1483,1018,1547,1043"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a41af0935f3989aae450cf8988cd9c3a9" title=" " alt="" coords="628,227,693,253"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ae70cc0370342e46f6db3bec367232457" title=" " alt="" coords="363,677,416,702"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="881,854,973,879"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="896,246,959,271"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="1132,423,1193,449"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="1021,398,1084,423"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="1595,195,1651,221"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="1359,663,1418,689"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="1359,942,1418,967"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="1343,803,1435,829"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad788da91743c333b5bed7c4a0dd12365" title=" " alt="" coords="497,474,555,499"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a9fa00b0be5d3c4781048861e2506eb63" title=" " alt="" coords="621,474,700,499"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a1d9e7047d3dfb57809a2541d8387705e" title=" " alt="" coords="762,347,819,373"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a02ca0670bc1fe12e38453082631ff360" title=" " alt="" coords="748,449,833,474"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a87c90f0ab2a1b11c2b55f4e483bb8493" title=" " alt="" coords="885,449,970,474"/>
<area shape="rect" href="../../da/d9b/memide_8c.html#a7f36b008f02088c86f76e98e05b55af5" title=" " alt="" coords="226,955,279,981"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#a6fdbe54cbecd8fc67d74793b27adcf05" title=" " alt="" coords="479,905,573,930"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#aa997067c2c9bfef15af6fa0a10c20f4a" title=" " alt="" coords="479,1259,573,1285"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a4a34d9f03e436cfa09b88f735f6ee952" title=" " alt="" coords="627,1259,694,1285"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_a29a4d743d41fe659f74b0a57fdc25012_icgraph.png" border="0" usemap="#ad5/d64/defs_8h_a29a4d743d41fe659f74b0a57fdc25012_icgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_a29a4d743d41fe659f74b0a57fdc25012_icgraph" id="ad5/d64/defs_8h_a29a4d743d41fe659f74b0a57fdc25012_icgraph">
<area shape="rect" title=" " alt="" coords="379,356,428,381"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a28ac85a90987662e306ca8efbfe16074" title=" " alt="" coords="237,27,329,52"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a6af7eb39268127d389792cec37785666" title=" " alt="" coords="236,97,331,123"/>
<area shape="rect" href="../../df/dc9/exec_8c.html#ace32454ed0d37834dcb1cb4f8b727e6e" title=" " alt="" coords="258,189,309,215"/>
<area shape="rect" href="../../d6/d13/file_8c.html#a1dc8c87c7e48bdaaf98e9c7047928f29" title=" " alt="" coords="251,281,315,307"/>
<area shape="rect" href="../../d6/d13/file_8c.html#afff8e849fa54dea2a5a27dbb97474607" title=" " alt="" coords="253,331,314,356"/>
<area shape="rect" href="../../d6/d13/file_8c.html#ab8de757a0a9f58dcc6511ea5e46ebb88" title=" " alt="" coords="250,380,317,405"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#ad1c5f8693cb35b9605fee09eebdda640" title=" " alt="" coords="244,429,323,455"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a759600870314007ac558871239122fb7" title=" " alt="" coords="248,479,319,504"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a74e45efc661ca17c068bc283b3842e6d" title=" " alt="" coords="244,528,323,553"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#ae1e58ee11d41f643929520d8c1640da7" title=" " alt="" coords="241,577,325,603"/>
<area shape="rect" href="../../d0/d56/console_8c.html#ab508ff0f4db26fe35cd25fa648f9ee75" title=" " alt="" coords="104,5,188,31"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#ac5b5d4517586be6396b4f3b37445945a" title=" " alt="" coords="107,55,185,80"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a6f94e3b215d069b5419e87bafe80799a" title=" " alt="" coords="110,104,182,129"/>
<area shape="rect" href="../../d8/d60/init_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title=" " alt="" coords="121,153,171,179"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#aedbeff6afe5d4e22330c7e6b5e6df893" title=" " alt="" coords="113,227,179,252"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#aeaa813ddeb6a5fac3c45714c7351c526" title=" " alt="" coords="107,276,185,301"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="5,80,56,105"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title=" " alt="" coords="5,227,56,252"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a54bf714d9e898cbdcbc061b280bbfae0" title=" " alt="" coords="109,325,183,351"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#ac243c8f20f5fb2e3e257b5007af2c204" title=" " alt="" coords="108,375,184,400"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a687d939a9e4792af15db96f2c2f34378" title=" " alt="" coords="107,424,185,449"/>
</map>
</div>

</div>
</div>
<a id="ab56d728e6966819a0260c358d3ac3419" name="ab56d728e6966819a0260c358d3ac3419"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab56d728e6966819a0260c358d3ac3419">&#9670;&#160;</a></span>initlock()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void initlock </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d1/d08/structspinlock.html">spinlock</a> *&#160;</td>
          <td class="paramname"><em>lk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d2d/spinlock_8c_source.html#l00013">13</a> of file <a class="el" href="../../d3/d2d/spinlock_8c_source.html">spinlock.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   14</span>{</div>
<div class="line"><span class="lineno">   15</span>  lk-&gt;<a class="code hl_variable" href="../../d1/d08/structspinlock.html#afbec3274bf8ad9c421695a22f8d9d584">name</a> = <a class="code hl_variable" href="../../de/dc0/usertests_8c.html#aee754febd402311e2a552cb0d6ab6629">name</a>;</div>
<div class="line"><span class="lineno">   16</span>  lk-&gt;<a class="code hl_variable" href="../../d1/d08/structspinlock.html#a48f3007579f644934d9aba91e5378c03">locked</a> = 0;</div>
<div class="line"><span class="lineno">   17</span>  lk-&gt;<a class="code hl_variable" href="../../d1/d08/structspinlock.html#a290ae772c8ccb9e8c1580204c31a7f88">cpu</a> = 0;</div>
<div class="line"><span class="lineno">   18</span>}</div>
<div class="ttc" id="astructspinlock_html_afbec3274bf8ad9c421695a22f8d9d584"><div class="ttname"><a href="../../d1/d08/structspinlock.html#afbec3274bf8ad9c421695a22f8d9d584">spinlock::name</a></div><div class="ttdeci">char * name</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d63/spinlock_8h_source.html#l00006">spinlock.h:6</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_ab56d728e6966819a0260c358d3ac3419_icgraph.png" border="0" usemap="#ad5/d64/defs_8h_ab56d728e6966819a0260c358d3ac3419_icgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_ab56d728e6966819a0260c358d3ac3419_icgraph" id="ad5/d64/defs_8h_ab56d728e6966819a0260c358d3ac3419_icgraph">
<area shape="rect" title=" " alt="" coords="377,232,440,257"/>
<area shape="rect" href="../../dc/de6/bio_8c.html#a53cca0ddc98c5f1de37124eca2575a59" title=" " alt="" coords="126,83,173,108"/>
<area shape="rect" href="../../d0/d56/console_8c.html#ab508ff0f4db26fe35cd25fa648f9ee75" title=" " alt="" coords="240,33,324,59"/>
<area shape="rect" href="../../d6/d13/file_8c.html#a66bb5a4b304ea0f851dd999fc8195fa4" title=" " alt="" coords="254,83,310,108"/>
<area shape="rect" href="../../da/d9b/memide_8c.html#aefb190a6104cb58c0bc1f8fec88d1307" title=" " alt="" coords="254,132,310,157"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a301761a27cf266e0bad483272fb31a3c" title=" " alt="" coords="128,232,171,257"/>
<area shape="rect" href="../../d7/df8/log_8c.html#ad5e79aaefb91f41b9ef6aeae7ecf4708" title=" " alt="" coords="121,283,177,308"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#aaa5746f0a7ae0071b2916be5fdedf4ab" title=" " alt="" coords="235,181,329,207"/>
<area shape="rect" href="../../d4/def/kalloc_8c.html#a596c07f040e83fd8ea1857f36ffab4fb" title=" " alt="" coords="255,333,309,359"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a9d293f913985937ee7a266fe5ddbfc77" title=" " alt="" coords="259,383,305,408"/>
<area shape="rect" href="../../d1/d47/pipe_8c.html#a9d6f0c526148e6002b6776619c7563e6" title=" " alt="" coords="245,432,319,457"/>
<area shape="rect" href="../../dc/d6f/trap_8c.html#a9e7167b8e20e217c4af4e757f612ba6a" title=" " alt="" coords="257,481,307,507"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a11c5d62d28e8121e75235d361158156e" title=" " alt="" coords="5,257,64,283"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a9a70db941def46ec25939e6c2d30e399" title=" " alt="" coords="112,432,187,457"/>
</map>
</div>

</div>
</div>
<a id="ad5e79aaefb91f41b9ef6aeae7ecf4708" name="ad5e79aaefb91f41b9ef6aeae7ecf4708"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad5e79aaefb91f41b9ef6aeae7ecf4708">&#9670;&#160;</a></span>initlog()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void initlog </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>dev</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/df8/log_8c_source.html#l00054">54</a> of file <a class="el" href="../../d7/df8/log_8c_source.html">log.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   55</span>{</div>
<div class="line"><span class="lineno">   56</span>  <span class="keywordflow">if</span> (<span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code hl_struct" href="../../d4/d6c/structlogheader.html">logheader</a>) &gt;= <a class="code hl_define" href="../../df/d26/fs_8h.html#a403cf3149c084cea115b85c90721039a">BSIZE</a>)</div>
<div class="line"><span class="lineno">   57</span>    <a class="code hl_function" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a">panic</a>(<span class="stringliteral">&quot;initlog: too big logheader&quot;</span>);</div>
<div class="line"><span class="lineno">   58</span> </div>
<div class="line"><span class="lineno">   59</span>  <span class="keyword">struct </span><a class="code hl_struct" href="../../df/d3d/structsuperblock.html">superblock</a> <a class="code hl_variable" href="../../d2/d5a/fs_8c.html#a0248d0bac625de5a1415f2f8c91f3343">sb</a>;</div>
<div class="line"><span class="lineno">   60</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#ab56d728e6966819a0260c358d3ac3419">initlock</a>(&amp;<a class="code hl_struct" href="../../d0/d4a/structlog.html">log</a>.<a class="code hl_variable" href="../../d0/d4a/structlog.html#a980a1d1aa9c60af7a82f297f8ab54d2e">lock</a>, <span class="stringliteral">&quot;log&quot;</span>);</div>
<div class="line"><span class="lineno">   61</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#aff0080b2133027be2e525ca088b40e78">readsb</a>(dev, &amp;<a class="code hl_variable" href="../../d2/d5a/fs_8c.html#a0248d0bac625de5a1415f2f8c91f3343">sb</a>);</div>
<div class="line"><span class="lineno">   62</span>  <a class="code hl_struct" href="../../d0/d4a/structlog.html">log</a>.<a class="code hl_variable" href="../../d0/d4a/structlog.html#a28d847dd722497fa3497b14f68267618">start</a> = <a class="code hl_variable" href="../../d2/d5a/fs_8c.html#a0248d0bac625de5a1415f2f8c91f3343">sb</a>.<a class="code hl_variable" href="../../df/d3d/structsuperblock.html#a460268b28aced19797e8d7b84aa60ebf">logstart</a>;</div>
<div class="line"><span class="lineno">   63</span>  <a class="code hl_struct" href="../../d0/d4a/structlog.html">log</a>.<a class="code hl_variable" href="../../d0/d4a/structlog.html#a2257e716d4b77efd0524286cf5772a41">size</a> = <a class="code hl_variable" href="../../d2/d5a/fs_8c.html#a0248d0bac625de5a1415f2f8c91f3343">sb</a>.<a class="code hl_variable" href="../../df/d3d/structsuperblock.html#aea92ae872785fd4fb39b903d9157aac5">nlog</a>;</div>
<div class="line"><span class="lineno">   64</span>  <a class="code hl_struct" href="../../d0/d4a/structlog.html">log</a>.<a class="code hl_variable" href="../../d0/d4a/structlog.html#aebeeb9df7326549fb5d8b7221c9b0aa3">dev</a> = dev;</div>
<div class="line"><span class="lineno">   65</span>  recover_from_log();</div>
<div class="line"><span class="lineno">   66</span>}</div>
<div class="ttc" id="adefs_8h_html_aff0080b2133027be2e525ca088b40e78"><div class="ttname"><a href="../../d5/d64/defs_8h.html#aff0080b2133027be2e525ca088b40e78">readsb</a></div><div class="ttdeci">void readsb(int dev, struct superblock *sb)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d5a/fs_8c_source.html#l00032">fs.c:32</a></div></div>
<div class="ttc" id="astructlog_html_a2257e716d4b77efd0524286cf5772a41"><div class="ttname"><a href="../../d0/d4a/structlog.html#a2257e716d4b77efd0524286cf5772a41">log::size</a></div><div class="ttdeci">int size</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/df8/log_8c_source.html#l00042">log.c:42</a></div></div>
<div class="ttc" id="astructlog_html_a28d847dd722497fa3497b14f68267618"><div class="ttname"><a href="../../d0/d4a/structlog.html#a28d847dd722497fa3497b14f68267618">log::start</a></div><div class="ttdeci">int start</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/df8/log_8c_source.html#l00041">log.c:41</a></div></div>
<div class="ttc" id="astructlog_html_aebeeb9df7326549fb5d8b7221c9b0aa3"><div class="ttname"><a href="../../d0/d4a/structlog.html#aebeeb9df7326549fb5d8b7221c9b0aa3">log::dev</a></div><div class="ttdeci">int dev</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/df8/log_8c_source.html#l00045">log.c:45</a></div></div>
<div class="ttc" id="astructlogheader_html"><div class="ttname"><a href="../../d4/d6c/structlogheader.html">logheader</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/df8/log_8c_source.html#l00034">log.c:34</a></div></div>
<div class="ttc" id="astructsuperblock_html"><div class="ttname"><a href="../../df/d3d/structsuperblock.html">superblock</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d26/fs_8h_source.html#l00014">fs.h:14</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_ad5e79aaefb91f41b9ef6aeae7ecf4708_cgraph.png" border="0" usemap="#ad5/d64/defs_8h_ad5e79aaefb91f41b9ef6aeae7ecf4708_cgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_ad5e79aaefb91f41b9ef6aeae7ecf4708_cgraph" id="ad5/d64/defs_8h_ad5e79aaefb91f41b9ef6aeae7ecf4708_cgraph">
<area shape="rect" title=" " alt="" coords="5,441,61,467"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#abda07b4a007b2e888d9d783920460b89" title=" " alt="" coords="109,392,172,417"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="941,631,994,656"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#aff0080b2133027be2e525ca088b40e78" title=" " alt="" coords="110,441,171,467"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="1081,581,1139,607"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="1677,392,1736,417"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="1064,631,1156,656"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="1205,303,1269,328"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="1205,580,1269,605"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="1317,303,1409,328"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="1332,580,1395,605"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="1568,789,1629,815"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="1457,681,1520,707"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="1461,757,1517,783"/>
<area shape="rect" href="../../dc/de6/bio_8c.html#a30b8d2ef2300ed8e3d879a428fe39898" title=" " alt="" coords="220,467,275,492"/>
<area shape="rect" href="../../d1/db0/string_8c.html#a07f97e2ed1ce37955192d52de8f4911f" title=" " alt="" coords="424,377,507,403"/>
<area shape="rect" href="../../dc/de6/bio_8c.html#ab5335aeb503731104314321a78a6d727" title=" " alt="" coords="801,352,858,377"/>
<area shape="rect" href="../../da/d9b/memide_8c.html#a7f36b008f02088c86f76e98e05b55af5" title=" " alt="" coords="323,479,376,504"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#a6fdbe54cbecd8fc67d74793b27adcf05" title=" " alt="" coords="1063,379,1157,404"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ae70cc0370342e46f6db3bec367232457" title=" " alt="" coords="439,757,492,783"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a41af0935f3989aae450cf8988cd9c3a9" title=" " alt="" coords="1331,833,1396,859"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad788da91743c333b5bed7c4a0dd12365" title=" " alt="" coords="555,960,612,985"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a9fa00b0be5d3c4781048861e2506eb63" title=" " alt="" coords="660,960,739,985"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a1d9e7047d3dfb57809a2541d8387705e" title=" " alt="" coords="801,1087,858,1112"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a02ca0670bc1fe12e38453082631ff360" title=" " alt="" coords="787,884,872,909"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a87c90f0ab2a1b11c2b55f4e483bb8493" title=" " alt="" coords="787,985,872,1011"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#aa997067c2c9bfef15af6fa0a10c20f4a" title=" " alt="" coords="920,327,1015,352"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a4a34d9f03e436cfa09b88f735f6ee952" title=" " alt="" coords="1077,329,1143,355"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_ad5e79aaefb91f41b9ef6aeae7ecf4708_icgraph.png" border="0" usemap="#ad5/d64/defs_8h_ad5e79aaefb91f41b9ef6aeae7ecf4708_icgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_ad5e79aaefb91f41b9ef6aeae7ecf4708_icgraph" id="ad5/d64/defs_8h_ad5e79aaefb91f41b9ef6aeae7ecf4708_icgraph">
<area shape="rect" title=" " alt="" coords="112,5,168,31"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a11c5d62d28e8121e75235d361158156e" title=" " alt="" coords="5,5,64,31"/>
</map>
</div>

</div>
</div>
<a id="af5ca8072e3877a883fb34ce59eff88cb" name="af5ca8072e3877a883fb34ce59eff88cb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af5ca8072e3877a883fb34ce59eff88cb">&#9670;&#160;</a></span>initsleeplock()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void initsleeplock </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d9/dd0/structsleeplock.html">sleeplock</a> *&#160;</td>
          <td class="paramname"><em>lk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d8/dd1/sleeplock_8c_source.html#l00014">14</a> of file <a class="el" href="../../d8/dd1/sleeplock_8c_source.html">sleeplock.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   15</span>{</div>
<div class="line"><span class="lineno">   16</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#ab56d728e6966819a0260c358d3ac3419">initlock</a>(&amp;lk-&gt;<a class="code hl_variable" href="../../d9/dd0/structsleeplock.html#a077241ea0e720d228d853208444c4c9d">lk</a>, <span class="stringliteral">&quot;sleep lock&quot;</span>);</div>
<div class="line"><span class="lineno">   17</span>  lk-&gt;<a class="code hl_variable" href="../../d9/dd0/structsleeplock.html#a40f1db61da688063cd5ac4f72d839590">name</a> = <a class="code hl_variable" href="../../de/dc0/usertests_8c.html#aee754febd402311e2a552cb0d6ab6629">name</a>;</div>
<div class="line"><span class="lineno">   18</span>  lk-&gt;<a class="code hl_variable" href="../../d9/dd0/structsleeplock.html#ac5cfe608994a41b24cb1c0fd722910c3">locked</a> = 0;</div>
<div class="line"><span class="lineno">   19</span>  lk-&gt;<a class="code hl_variable" href="../../d9/dd0/structsleeplock.html#a99a4c6a784956ab1c391a12af475a55e">pid</a> = 0;</div>
<div class="line"><span class="lineno">   20</span>}</div>
<div class="ttc" id="astructsleeplock_html_a40f1db61da688063cd5ac4f72d839590"><div class="ttname"><a href="../../d9/dd0/structsleeplock.html#a40f1db61da688063cd5ac4f72d839590">sleeplock::name</a></div><div class="ttdeci">char * name</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d74/sleeplock_8h_source.html#l00007">sleeplock.h:7</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_af5ca8072e3877a883fb34ce59eff88cb_cgraph.png" border="0" usemap="#ad5/d64/defs_8h_af5ca8072e3877a883fb34ce59eff88cb_cgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_af5ca8072e3877a883fb34ce59eff88cb_cgraph" id="ad5/d64/defs_8h_af5ca8072e3877a883fb34ce59eff88cb_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,100,31"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#abda07b4a007b2e888d9d783920460b89" title=" " alt="" coords="148,5,211,31"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_af5ca8072e3877a883fb34ce59eff88cb_icgraph.png" border="0" usemap="#ad5/d64/defs_8h_af5ca8072e3877a883fb34ce59eff88cb_icgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_af5ca8072e3877a883fb34ce59eff88cb_icgraph" id="ad5/d64/defs_8h_af5ca8072e3877a883fb34ce59eff88cb_icgraph">
<area shape="rect" title=" " alt="" coords="207,31,301,56"/>
<area shape="rect" href="../../dc/de6/bio_8c.html#a53cca0ddc98c5f1de37124eca2575a59" title=" " alt="" coords="112,5,159,31"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a301761a27cf266e0bad483272fb31a3c" title=" " alt="" coords="114,55,157,80"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a11c5d62d28e8121e75235d361158156e" title=" " alt="" coords="5,55,64,80"/>
</map>
</div>

</div>
</div>
<a id="a7b3410bde4005e848e1748f2b0f0a084" name="a7b3410bde4005e848e1748f2b0f0a084"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7b3410bde4005e848e1748f2b0f0a084">&#9670;&#160;</a></span>inituvm()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void inituvm </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d49/types_8h.html#ac131849542282b2c95dfeaf1f26dc010">pde_t</a> *&#160;</td>
          <td class="paramname"><em>pgdir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>init</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/d49/types_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td>
          <td class="paramname"><em>sz</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/de9/vm_8c_source.html#l00183">183</a> of file <a class="el" href="../../de/de9/vm_8c_source.html">vm.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  184</span>{</div>
<div class="line"><span class="lineno">  185</span>  <span class="keywordtype">char</span> *<a class="code hl_function" href="../../de/dc0/usertests_8c.html#aa1c6e6e76813ccb29a29bb119dba668a">mem</a>;</div>
<div class="line"><span class="lineno">  186</span> </div>
<div class="line"><span class="lineno">  187</span>  <span class="keywordflow">if</span>(sz &gt;= <a class="code hl_define" href="../../d2/df1/mmu_8h.html#a5f96cb6ae6670e023c407cc2f77e1704">PGSIZE</a>)</div>
<div class="line"><span class="lineno">  188</span>    <a class="code hl_function" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a">panic</a>(<span class="stringliteral">&quot;inituvm: more than a page&quot;</span>);</div>
<div class="line"><span class="lineno">  189</span>  <a class="code hl_function" href="../../de/dc0/usertests_8c.html#aa1c6e6e76813ccb29a29bb119dba668a">mem</a> = <a class="code hl_function" href="../../d5/d64/defs_8h.html#a5e965f6365c721b5b23c12d16d45c3dc">kalloc</a>();</div>
<div class="line"><span class="lineno">  190</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#a0098886a849eef10803e9f35ceec61b9">memset</a>(<a class="code hl_function" href="../../de/dc0/usertests_8c.html#aa1c6e6e76813ccb29a29bb119dba668a">mem</a>, 0, <a class="code hl_define" href="../../d2/df1/mmu_8h.html#a5f96cb6ae6670e023c407cc2f77e1704">PGSIZE</a>);</div>
<div class="line"><span class="lineno">  191</span>  mappages(pgdir, 0, <a class="code hl_define" href="../../d2/df1/mmu_8h.html#a5f96cb6ae6670e023c407cc2f77e1704">PGSIZE</a>, <a class="code hl_define" href="../../d8/da9/memlayout_8h.html#a5021188bc7da1304f27e913aee183407">V2P</a>(<a class="code hl_function" href="../../de/dc0/usertests_8c.html#aa1c6e6e76813ccb29a29bb119dba668a">mem</a>), <a class="code hl_define" href="../../d2/df1/mmu_8h.html#a058fcbcc3e1eab2c09c68b3e5221c545">PTE_W</a>|<a class="code hl_define" href="../../d2/df1/mmu_8h.html#adced9836a1dc98d72849361e6ab03cda">PTE_U</a>);</div>
<div class="line"><span class="lineno">  192</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#ac152fff34fe03e497d35b1d4c47f1445">memmove</a>(<a class="code hl_function" href="../../de/dc0/usertests_8c.html#aa1c6e6e76813ccb29a29bb119dba668a">mem</a>, init, sz);</div>
<div class="line"><span class="lineno">  193</span>}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_a7b3410bde4005e848e1748f2b0f0a084_cgraph.png" border="0" usemap="#ad5/d64/defs_8h_a7b3410bde4005e848e1748f2b0f0a084_cgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_a7b3410bde4005e848e1748f2b0f0a084_cgraph" id="ad5/d64/defs_8h_a7b3410bde4005e848e1748f2b0f0a084_cgraph">
<area shape="rect" title=" " alt="" coords="5,550,69,575"/>
<area shape="rect" href="../../d4/def/kalloc_8c.html#a5e965f6365c721b5b23c12d16d45c3dc" title=" " alt="" coords="729,601,785,626"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="1593,863,1647,889"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#aa1c6e6e76813ccb29a29bb119dba668a" title=" " alt="" coords="117,550,168,575"/>
<area shape="rect" href="../../d1/db0/string_8c.html#a07f97e2ed1ce37955192d52de8f4911f" title=" " alt="" coords="716,2374,799,2399"/>
<area shape="rect" href="../../db/d8a/ulib_8c.html#aa9cdc2409c15ccd5ee3b2031576f4093" title=" " alt="" coords="1116,94,1185,119"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="1119,1462,1183,1487"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="1835,1639,1899,1665"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="1233,1513,1325,1538"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="1248,1209,1311,1234"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="1484,1107,1545,1133"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="1373,1361,1436,1386"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="1947,550,2003,575"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="1711,1078,1770,1103"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="1711,1318,1770,1343"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="1695,863,1787,889"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#aaf98ef7cdde3a0dfb2e49919de3298b1" title=" " alt="" coords="225,1411,267,1437"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#acd2e1ded4bb6fce4500438bf928330f4" title=" " alt="" coords="337,702,381,727"/>
<area shape="rect" href="../../df/d5d/umalloc_8c.html#adebb229f063e66907017098087cbe791" title=" " alt="" coords="224,401,268,426"/>
<area shape="rect" href="../../d8/ddb/user_8h.html#a939cb25a305fe68aad9b365077f1a8c7" title=" " alt="" coords="217,450,275,475"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a650cf0caaaa8b75f653c1c92818d03a4" title=" " alt="" coords="1009,2374,1048,2399"/>
<area shape="rect" href="../../df/d5d/umalloc_8c.html#ac131c16d1dcb6bea908d0237c82e981d" title=" " alt="" coords="216,499,276,525"/>
<area shape="rect" href="../../d5/de1/forktest_8c.html#a249680925885256274fa9f02dd51cec4" title=" " alt="" coords="221,351,271,377"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#af6f31822f7e737b4e414bdac1ccb59a4" title=" " alt="" coords="597,854,644,879"/>
<area shape="rect" href="../../d7/df8/log_8c.html#ac96aa31ffc0500e749c62c4d377c21c9" title=" " alt="" coords="583,1513,658,1538"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a41af0935f3989aae450cf8988cd9c3a9" title=" " alt="" coords="996,1259,1061,1285"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad788da91743c333b5bed7c4a0dd12365" title=" " alt="" coords="865,955,923,981"/>
<area shape="rect" href="../../d7/df8/log_8c.html#ac0f12be0ca0de555e60b27b06a57a65b" title=" " alt="" coords="862,1943,926,1969"/>
<area shape="rect" href="../../d6/d13/file_8c.html#ae557c81ab89c24219146144bb6adaa2c" title=" " alt="" coords="324,1639,395,1665"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#ab3c447f135c68e4c3c1f8d5866f6e77b" title=" " alt="" coords="463,1918,505,1943"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ae70cc0370342e46f6db3bec367232457" title=" " alt="" coords="731,1271,784,1297"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a9fa00b0be5d3c4781048861e2506eb63" title=" " alt="" coords="989,1107,1068,1133"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a1d9e7047d3dfb57809a2541d8387705e" title=" " alt="" coords="1122,1057,1179,1082"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a4a34d9f03e436cfa09b88f735f6ee952" title=" " alt="" coords="995,1969,1062,1994"/>
<area shape="rect" href="../../d1/d47/pipe_8c.html#a48642f54734698f6f881ee07723292cb" title=" " alt="" coords="855,1715,933,1741"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#aaad2d7a86d4859982dd9a132f5128ff2" title=" " alt="" coords="573,1563,668,1589"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a7220afa8e5f4bea540eb95879ea7df6e" title=" " alt="" coords="589,2249,653,2274"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#aa997067c2c9bfef15af6fa0a10c20f4a" title=" " alt="" coords="847,2070,941,2095"/>
<area shape="rect" href="../../dc/de6/bio_8c.html#a30b8d2ef2300ed8e3d879a428fe39898" title=" " alt="" coords="730,2325,785,2350"/>
<area shape="rect" href="../../dc/de6/bio_8c.html#ab5335aeb503731104314321a78a6d727" title=" " alt="" coords="729,2173,786,2198"/>
<area shape="rect" href="../../d4/def/kalloc_8c.html#aced59ecf8411235f6dffc065236711a5" title=" " alt="" coords="1003,347,1054,373"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a1b57bfa0091c9be3ccc16dbb85ce3acf" title=" " alt="" coords="447,550,521,575"/>
<area shape="rect" href="../../d6/d13/file_8c.html#a9ef0346d08d8ed79ce2a9c03f9a4b4b2" title=" " alt="" coords="999,753,1059,778"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a24a91383ab80b4b8a1ef1f4df896035c" title=" " alt="" coords="1005,651,1052,677"/>
<area shape="rect" href="../../d1/db0/string_8c.html#aca73516e4b2fdb2663e0d26f855ac3ca" title=" " alt="" coords="443,803,525,829"/>
<area shape="rect" href="../../de/de9/vm_8c.html#aa883924e2f068c520b695cdc168e1603" title=" " alt="" coords="726,449,789,474"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a1c8a7a02e9391b5cf0984388216695c0" title=" " alt="" coords="581,550,660,575"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a6d3019ea15a9bfdc5131ae97f3623c49" title=" " alt="" coords="850,449,938,474"/>
<area shape="rect" href="../../db/d8a/ulib_8c.html#a59b5e6e6105ef0e97aed266ec6fdfe60" title=" " alt="" coords="332,326,387,351"/>
<area shape="rect" href="../../d8/ddb/user_8h.html#ae57e95d717eb7386cd8b935a0c136abe" title=" " alt="" coords="334,375,385,401"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_a7b3410bde4005e848e1748f2b0f0a084_icgraph.png" border="0" usemap="#ad5/d64/defs_8h_a7b3410bde4005e848e1748f2b0f0a084_icgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_a7b3410bde4005e848e1748f2b0f0a084_icgraph" id="ad5/d64/defs_8h_a7b3410bde4005e848e1748f2b0f0a084_icgraph">
<area shape="rect" title=" " alt="" coords="117,5,181,31"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a81c8a6a0cae413bc81aa223f7f7b7205" title=" " alt="" coords="5,5,69,31"/>
</map>
</div>

</div>
</div>
<a id="a63da75c0c2f0b051f2c790aea2116b63" name="a63da75c0c2f0b051f2c790aea2116b63"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a63da75c0c2f0b051f2c790aea2116b63">&#9670;&#160;</a></span>ioapicenable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ioapicenable </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>irq</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cpu</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d61/ioapic_8c_source.html#l00068">68</a> of file <a class="el" href="../../dd/d61/ioapic_8c_source.html">ioapic.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   69</span>{</div>
<div class="line"><span class="lineno">   70</span>  <span class="comment">// Mark interrupt edge-triggered, active high,</span></div>
<div class="line"><span class="lineno">   71</span>  <span class="comment">// enabled, and routed to the given cpunum,</span></div>
<div class="line"><span class="lineno">   72</span>  <span class="comment">// which happens to be that cpu&#39;s APIC ID.</span></div>
<div class="line"><span class="lineno">   73</span>  ioapicwrite(<a class="code hl_define" href="../../dd/d61/ioapic_8c.html#ad31b206e97e5e8cc5c70f8713669b27f">REG_TABLE</a>+2*irq, <a class="code hl_define" href="../../d5/d98/traps_8h.html#a17129100154901eb81be6e438843a0e1">T_IRQ0</a> + irq);</div>
<div class="line"><span class="lineno">   74</span>  ioapicwrite(<a class="code hl_define" href="../../dd/d61/ioapic_8c.html#ad31b206e97e5e8cc5c70f8713669b27f">REG_TABLE</a>+2*irq+1, cpunum &lt;&lt; 24);</div>
<div class="line"><span class="lineno">   75</span>}</div>
<div class="ttc" id="aioapic_8c_html_ad31b206e97e5e8cc5c70f8713669b27f"><div class="ttname"><a href="../../dd/d61/ioapic_8c.html#ad31b206e97e5e8cc5c70f8713669b27f">REG_TABLE</a></div><div class="ttdeci">#define REG_TABLE</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d61/ioapic_8c_source.html#l00013">ioapic.c:13</a></div></div>
<div class="ttc" id="atraps_8h_html_a17129100154901eb81be6e438843a0e1"><div class="ttname"><a href="../../d5/d98/traps_8h.html#a17129100154901eb81be6e438843a0e1">T_IRQ0</a></div><div class="ttdeci">#define T_IRQ0</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d98/traps_8h_source.html#l00030">traps.h:30</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_a63da75c0c2f0b051f2c790aea2116b63_icgraph.png" border="0" usemap="#ad5/d64/defs_8h_a63da75c0c2f0b051f2c790aea2116b63_icgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_a63da75c0c2f0b051f2c790aea2116b63_icgraph" id="ad5/d64/defs_8h_a63da75c0c2f0b051f2c790aea2116b63_icgraph">
<area shape="rect" title=" " alt="" coords="137,55,232,80"/>
<area shape="rect" href="../../d0/d56/console_8c.html#ab508ff0f4db26fe35cd25fa648f9ee75" title=" " alt="" coords="5,5,89,31"/>
<area shape="rect" href="../../da/d9b/memide_8c.html#aefb190a6104cb58c0bc1f8fec88d1307" title=" " alt="" coords="19,55,75,80"/>
<area shape="rect" href="../../d1/d87/uart_8c.html#a79fa7b73d0d61fdd15d30768a395437d" title=" " alt="" coords="17,104,78,129"/>
</map>
</div>

</div>
</div>
<a id="abce023b98422f397abdb425b20c8ceec" name="abce023b98422f397abdb425b20c8ceec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abce023b98422f397abdb425b20c8ceec">&#9670;&#160;</a></span>ioapicinit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ioapicinit </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d61/ioapic_8c_source.html#l00049">49</a> of file <a class="el" href="../../dd/d61/ioapic_8c_source.html">ioapic.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   50</span>{</div>
<div class="line"><span class="lineno">   51</span>  <span class="keywordtype">int</span> i, id, maxintr;</div>
<div class="line"><span class="lineno">   52</span> </div>
<div class="line"><span class="lineno">   53</span>  <a class="code hl_struct" href="../../d3/d9b/structioapic.html">ioapic</a> = (<span class="keyword">volatile</span> <span class="keyword">struct </span><a class="code hl_struct" href="../../d3/d9b/structioapic.html">ioapic</a>*)<a class="code hl_define" href="../../dd/d61/ioapic_8c.html#a7d40119d2e49f7d8ae65520ccad99a1e">IOAPIC</a>;</div>
<div class="line"><span class="lineno">   54</span>  maxintr = (ioapicread(<a class="code hl_define" href="../../dd/d61/ioapic_8c.html#ac56cc95ec46071699b119b24d6d808f9">REG_VER</a>) &gt;&gt; 16) &amp; 0xFF;</div>
<div class="line"><span class="lineno">   55</span>  <span class="keywordtype">id</span> = ioapicread(<a class="code hl_define" href="../../dd/d61/ioapic_8c.html#a91339a8293cb53b81407c016bc41e2b1">REG_ID</a>) &gt;&gt; 24;</div>
<div class="line"><span class="lineno">   56</span>  <span class="keywordflow">if</span>(<span class="keywordtype">id</span> != <a class="code hl_variable" href="../../d5/d64/defs_8h.html#a619ae379337e3cb2397ee0b6b4fd8d6b">ioapicid</a>)</div>
<div class="line"><span class="lineno">   57</span>    <a class="code hl_function" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6">cprintf</a>(<span class="stringliteral">&quot;ioapicinit: id isn&#39;t equal to ioapicid; not a MP\n&quot;</span>);</div>
<div class="line"><span class="lineno">   58</span> </div>
<div class="line"><span class="lineno">   59</span>  <span class="comment">// Mark all interrupts edge-triggered, active high, disabled,</span></div>
<div class="line"><span class="lineno">   60</span>  <span class="comment">// and not routed to any CPUs.</span></div>
<div class="line"><span class="lineno">   61</span>  <span class="keywordflow">for</span>(i = 0; i &lt;= maxintr; i++){</div>
<div class="line"><span class="lineno">   62</span>    ioapicwrite(<a class="code hl_define" href="../../dd/d61/ioapic_8c.html#ad31b206e97e5e8cc5c70f8713669b27f">REG_TABLE</a>+2*i, <a class="code hl_define" href="../../dd/d61/ioapic_8c.html#ab26e186261a82b907e024126fafbff1f">INT_DISABLED</a> | (<a class="code hl_define" href="../../d5/d98/traps_8h.html#a17129100154901eb81be6e438843a0e1">T_IRQ0</a> + i));</div>
<div class="line"><span class="lineno">   63</span>    ioapicwrite(<a class="code hl_define" href="../../dd/d61/ioapic_8c.html#ad31b206e97e5e8cc5c70f8713669b27f">REG_TABLE</a>+2*i+1, 0);</div>
<div class="line"><span class="lineno">   64</span>  }</div>
<div class="line"><span class="lineno">   65</span>}</div>
<div class="ttc" id="adefs_8h_html_a619ae379337e3cb2397ee0b6b4fd8d6b"><div class="ttname"><a href="../../d5/d64/defs_8h.html#a619ae379337e3cb2397ee0b6b4fd8d6b">ioapicid</a></div><div class="ttdeci">uchar ioapicid</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d06/mp_8c_source.html#l00016">mp.c:16</a></div></div>
<div class="ttc" id="aioapic_8c_html_a7d40119d2e49f7d8ae65520ccad99a1e"><div class="ttname"><a href="../../dd/d61/ioapic_8c.html#a7d40119d2e49f7d8ae65520ccad99a1e">IOAPIC</a></div><div class="ttdeci">#define IOAPIC</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d61/ioapic_8c_source.html#l00009">ioapic.c:9</a></div></div>
<div class="ttc" id="aioapic_8c_html_a91339a8293cb53b81407c016bc41e2b1"><div class="ttname"><a href="../../dd/d61/ioapic_8c.html#a91339a8293cb53b81407c016bc41e2b1">REG_ID</a></div><div class="ttdeci">#define REG_ID</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d61/ioapic_8c_source.html#l00011">ioapic.c:11</a></div></div>
<div class="ttc" id="aioapic_8c_html_ab26e186261a82b907e024126fafbff1f"><div class="ttname"><a href="../../dd/d61/ioapic_8c.html#ab26e186261a82b907e024126fafbff1f">INT_DISABLED</a></div><div class="ttdeci">#define INT_DISABLED</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d61/ioapic_8c_source.html#l00020">ioapic.c:20</a></div></div>
<div class="ttc" id="aioapic_8c_html_ac56cc95ec46071699b119b24d6d808f9"><div class="ttname"><a href="../../dd/d61/ioapic_8c.html#ac56cc95ec46071699b119b24d6d808f9">REG_VER</a></div><div class="ttdeci">#define REG_VER</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d61/ioapic_8c_source.html#l00012">ioapic.c:12</a></div></div>
<div class="ttc" id="astructioapic_html"><div class="ttname"><a href="../../d3/d9b/structioapic.html">ioapic</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d61/ioapic_8c_source.html#l00028">ioapic.c:28</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_abce023b98422f397abdb425b20c8ceec_cgraph.png" border="0" usemap="#ad5/d64/defs_8h_abce023b98422f397abdb425b20c8ceec_cgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_abce023b98422f397abdb425b20c8ceec_cgraph" id="ad5/d64/defs_8h_abce023b98422f397abdb425b20c8ceec_cgraph">
<area shape="rect" title=" " alt="" coords="5,341,79,367"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="127,341,185,367"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="233,132,297,157"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="705,259,759,284"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="233,284,297,309"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="345,5,437,31"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="360,208,423,233"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="596,208,657,233"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="485,157,548,183"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="489,259,545,284"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="823,209,882,235"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="807,259,899,284"/>
</map>
</div>

</div>
</div>
<a id="a29530a0afdfe924818d8c70b6724528d" name="a29530a0afdfe924818d8c70b6724528d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a29530a0afdfe924818d8c70b6724528d">&#9670;&#160;</a></span>iput()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iput </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d0/df8/structinode.html">inode</a> *&#160;</td>
          <td class="paramname"><em>ip</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d2/d5a/fs_8c_source.html#l00332">332</a> of file <a class="el" href="../../d2/d5a/fs_8c_source.html">fs.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  333</span>{</div>
<div class="line"><span class="lineno">  334</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#aecd4639fe2f9aaad8e8cee2b5e0688c3">acquiresleep</a>(&amp;ip-&gt;<a class="code hl_variable" href="../../d0/df8/structinode.html#a46bad0e938fbd348ac02bdef0c8d6215">lock</a>);</div>
<div class="line"><span class="lineno">  335</span>  <span class="keywordflow">if</span>(ip-&gt;<a class="code hl_variable" href="../../d0/df8/structinode.html#aad324382ba30eb83daa5304fce7dca08">valid</a> &amp;&amp; ip-&gt;<a class="code hl_variable" href="../../d0/df8/structinode.html#af8b88b409bea7ef99c49a55f387538b2">nlink</a> == 0){</div>
<div class="line"><span class="lineno">  336</span>    <a class="code hl_function" href="../../d5/d64/defs_8h.html#afe4ef8638f1ecb962a6e67fb086ee3b8">acquire</a>(&amp;<a class="code hl_variable" href="../../d2/d5a/fs_8c.html#a5a78db4f7c856337d906f0606b19bff5">icache</a>.lock);</div>
<div class="line"><span class="lineno">  337</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="../../d0/d56/console_8c.html#af10fa12dd785c91e29528fbdc50cf9af">r</a> = ip-&gt;<a class="code hl_variable" href="../../d0/df8/structinode.html#a6a519028ee67f805482b3e1725bf09c5">ref</a>;</div>
<div class="line"><span class="lineno">  338</span>    <a class="code hl_function" href="../../d5/d64/defs_8h.html#a4f8616948f3dbce65671f666eed1d669">release</a>(&amp;<a class="code hl_variable" href="../../d2/d5a/fs_8c.html#a5a78db4f7c856337d906f0606b19bff5">icache</a>.lock);</div>
<div class="line"><span class="lineno">  339</span>    <span class="keywordflow">if</span>(<a class="code hl_variable" href="../../d0/d56/console_8c.html#af10fa12dd785c91e29528fbdc50cf9af">r</a> == 1){</div>
<div class="line"><span class="lineno">  340</span>      <span class="comment">// inode has no links and no other references: truncate and free.</span></div>
<div class="line"><span class="lineno">  341</span>      itrunc(ip);</div>
<div class="line"><span class="lineno">  342</span>      ip-&gt;<a class="code hl_variable" href="../../d0/df8/structinode.html#a8d74bec2898785c057111c328d23fda2">type</a> = 0;</div>
<div class="line"><span class="lineno">  343</span>      <a class="code hl_function" href="../../d2/d5a/fs_8c.html#a7220afa8e5f4bea540eb95879ea7df6e">iupdate</a>(ip);</div>
<div class="line"><span class="lineno">  344</span>      ip-&gt;<a class="code hl_variable" href="../../d0/df8/structinode.html#aad324382ba30eb83daa5304fce7dca08">valid</a> = 0;</div>
<div class="line"><span class="lineno">  345</span>    }</div>
<div class="line"><span class="lineno">  346</span>  }</div>
<div class="line"><span class="lineno">  347</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#a840b479c87b1c047d7142f58e0ad0b27">releasesleep</a>(&amp;ip-&gt;<a class="code hl_variable" href="../../d0/df8/structinode.html#a46bad0e938fbd348ac02bdef0c8d6215">lock</a>);</div>
<div class="line"><span class="lineno">  348</span> </div>
<div class="line"><span class="lineno">  349</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#afe4ef8638f1ecb962a6e67fb086ee3b8">acquire</a>(&amp;<a class="code hl_variable" href="../../d2/d5a/fs_8c.html#a5a78db4f7c856337d906f0606b19bff5">icache</a>.lock);</div>
<div class="line"><span class="lineno">  350</span>  ip-&gt;<a class="code hl_variable" href="../../d0/df8/structinode.html#a6a519028ee67f805482b3e1725bf09c5">ref</a>--;</div>
<div class="line"><span class="lineno">  351</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#a4f8616948f3dbce65671f666eed1d669">release</a>(&amp;<a class="code hl_variable" href="../../d2/d5a/fs_8c.html#a5a78db4f7c856337d906f0606b19bff5">icache</a>.lock);</div>
<div class="line"><span class="lineno">  352</span>}</div>
<div class="ttc" id="afs_8c_html_a7220afa8e5f4bea540eb95879ea7df6e"><div class="ttname"><a href="../../d2/d5a/fs_8c.html#a7220afa8e5f4bea540eb95879ea7df6e">iupdate</a></div><div class="ttdeci">void iupdate(struct inode *ip)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d5a/fs_8c_source.html#l00221">fs.c:221</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_a29530a0afdfe924818d8c70b6724528d_cgraph.png" border="0" usemap="#ad5/d64/defs_8h_a29530a0afdfe924818d8c70b6724528d_cgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_a29530a0afdfe924818d8c70b6724528d_cgraph" id="ad5/d64/defs_8h_a29530a0afdfe924818d8c70b6724528d_cgraph">
<area shape="rect" title=" " alt="" coords="5,1089,48,1114"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="864,854,928,879"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="1588,1133,1652,1158"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#aaad2d7a86d4859982dd9a132f5128ff2" title=" " alt="" coords="311,626,405,651"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a7220afa8e5f4bea540eb95879ea7df6e" title=" " alt="" coords="96,1089,160,1114"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#aa997067c2c9bfef15af6fa0a10c20f4a" title=" " alt="" coords="584,1259,679,1285"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="987,905,1079,930"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="1001,246,1064,271"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="1237,458,1299,483"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="1347,854,1400,879"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="1127,347,1189,373"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="1700,170,1756,195"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="1465,553,1523,578"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="1465,1031,1523,1057"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="1448,854,1540,879"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a41af0935f3989aae450cf8988cd9c3a9" title=" " alt="" coords="733,177,799,202"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ae70cc0370342e46f6db3bec367232457" title=" " alt="" coords="468,626,521,651"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad788da91743c333b5bed7c4a0dd12365" title=" " alt="" coords="603,423,660,449"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a9fa00b0be5d3c4781048861e2506eb63" title=" " alt="" coords="727,423,805,449"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a1d9e7047d3dfb57809a2541d8387705e" title=" " alt="" coords="867,297,925,322"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a02ca0670bc1fe12e38453082631ff360" title=" " alt="" coords="853,449,939,474"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a87c90f0ab2a1b11c2b55f4e483bb8493" title=" " alt="" coords="990,398,1075,423"/>
<area shape="rect" href="../../dc/de6/bio_8c.html#a30b8d2ef2300ed8e3d879a428fe39898" title=" " alt="" coords="208,955,263,981"/>
<area shape="rect" href="../../d1/db0/string_8c.html#a07f97e2ed1ce37955192d52de8f4911f" title=" " alt="" coords="453,1006,536,1031"/>
<area shape="rect" href="../../dc/de6/bio_8c.html#ab5335aeb503731104314321a78a6d727" title=" " alt="" coords="466,1197,523,1222"/>
<area shape="rect" href="../../d7/df8/log_8c.html#a7eacb0fbebe5ce4c7d3ddea15908b13d" title=" " alt="" coords="729,1158,803,1183"/>
<area shape="rect" href="../../da/d9b/memide_8c.html#a7f36b008f02088c86f76e98e05b55af5" title=" " alt="" coords="331,955,385,981"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#a6fdbe54cbecd8fc67d74793b27adcf05" title=" " alt="" coords="584,905,679,930"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a4a34d9f03e436cfa09b88f735f6ee952" title=" " alt="" coords="733,1259,799,1285"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_a29530a0afdfe924818d8c70b6724528d_icgraph.png" border="0" usemap="#ad5/d64/defs_8h_a29530a0afdfe924818d8c70b6724528d_icgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_a29530a0afdfe924818d8c70b6724528d_icgraph" id="ad5/d64/defs_8h_a29530a0afdfe924818d8c70b6724528d_icgraph">
<area shape="rect" title=" " alt="" coords="516,944,559,969"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a69a135a0e8a06d9f306d77ebc0c1f7a0" title=" " alt="" coords="399,817,455,843"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a759600870314007ac558871239122fb7" title=" " alt="" coords="264,868,335,893"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#aaf98ef7cdde3a0dfb2e49919de3298b1" title=" " alt="" coords="278,1020,321,1045"/>
<area shape="rect" href="../../d6/d13/file_8c.html#ae557c81ab89c24219146144bb6adaa2c" title=" " alt="" coords="392,1071,463,1096"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a207b3008bae35596c55ec7c4fc6875eb" title=" " alt="" coords="387,919,468,944"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#ad1c5f8693cb35b9605fee09eebdda640" title=" " alt="" coords="260,944,339,969"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a77cc2edce6e78f22dd9eb377462762f2" title=" " alt="" coords="131,5,200,31"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#ac5b5d4517586be6396b4f3b37445945a" title=" " alt="" coords="126,55,205,80"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#aa0d46fcb43667c805b84ea7e1ff6100a" title=" " alt="" coords="139,104,192,129"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a86fe524d99d69c18a335512cf3405b31" title=" " alt="" coords="137,153,193,179"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a57e55b2d0161d62bb99765ca3de43e35" title=" " alt="" coords="132,203,199,228"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a0b0ff95e564df3c3e8fc977226b75de7" title=" " alt="" coords="133,252,198,277"/>
<area shape="rect" href="../../d1/d8f/cat_8c.html#a90a33618884bcf5e892297879bc016ff" title=" " alt="" coords="145,301,185,327"/>
<area shape="rect" href="../../d1/d8f/cat_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="13,327,63,352"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a5a12affe4fdfaa172d85da9a6adf98d2" title=" " alt="" coords="126,403,205,428"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a425a0efe4f459decf4b5ea14517ab3cf" title=" " alt="" coords="119,452,212,477"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#aedd6d3f148dd5c99b47900215c1ac43f" title=" " alt="" coords="139,501,192,527"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a8db9f9a2634bab29096bab0b8bc6945c" title=" " alt="" coords="136,551,195,576"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a6f94e3b215d069b5419e87bafe80799a" title=" " alt="" coords="129,600,201,625"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a8faab06cc4d48335076b368f02709ee2" title=" " alt="" coords="122,649,209,675"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a330ed2370fe27045b8bec1eb0bd7818f" title=" " alt="" coords="132,699,199,724"/>
<area shape="rect" href="../../d5/de1/forktest_8c.html#a0ef8ccf57bc8c491407ec513b234f83c" title=" " alt="" coords="132,748,199,773"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a77a4432bc67dfb513f1c1d698c2c4ea6" title=" " alt="" coords="131,797,199,823"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#abf4af50e65630225208fef177e267efb" title=" " alt="" coords="131,847,200,872"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#ac9fe56d8f6e4ed1c9677b06cb7b325e6" title=" " alt="" coords="133,896,198,921"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a267227083b00d0cc3141b34f5152ae04" title=" " alt="" coords="145,945,185,971"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a4eeee588d4689a58fc140a7d5d7b0608" title=" " alt="" coords="133,995,197,1020"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a1740f29f4ce6d3060fd79a9312edc315" title=" " alt="" coords="127,1044,203,1069"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#aa1c6e6e76813ccb29a29bb119dba668a" title=" " alt="" coords="140,1093,191,1119"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a3208ed001a225f5d9ea3fb37f46810c7" title=" " alt="" coords="119,1143,212,1168"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#ae7c61791dd2cfb8ad59b4c6e87685c07" title=" " alt="" coords="129,1192,201,1217"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#ada38fdb2913f040f6eeb6189eeb42d32" title=" " alt="" coords="139,1241,192,1267"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#aedbeff6afe5d4e22330c7e6b5e6df893" title=" " alt="" coords="5,1267,71,1292"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a16ae754fb9c5622d44d0c3ce62ad7c49" title=" " alt="" coords="139,1343,192,1368"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a6b22568d42b584ed4b0dc4e2b0677013" title=" " alt="" coords="138,1392,193,1417"/>
<area shape="rect" href="../../d7/d1f/mkfs_8c.html#a22ea835ad23cd716a962f30e4882ee80" title=" " alt="" coords="140,1441,191,1467"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a06636ed0cda58c748d68e82d33d1afce" title=" " alt="" coords="131,1491,200,1516"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a02e1ca3f4db5f4bf8a683a0b7c18cc43" title=" " alt="" coords="129,1540,201,1565"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a5d39024e15998d6a6865f4cd0f69738b" title=" " alt="" coords="137,1589,194,1615"/>
<area shape="rect" href="../../dd/d35/sysproc_8c.html#aee72faa31a0c32b410aba558ef1d59f2" title=" " alt="" coords="130,1639,201,1664"/>
<area shape="rect" href="../../dc/d6f/trap_8c.html#a372d166e36c086c91e5f5d81e5fead3a" title=" " alt="" coords="143,1688,187,1713"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a6888f9f6d973f81f73091d1530ad212b" title=" " alt="" coords="146,1737,185,1763"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a3331ced6fb67502a2e5277260d4f5aec" title=" " alt="" coords="125,1787,206,1812"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a98d8496ecb698b9400831f2718d805c3" title=" " alt="" coords="121,1836,210,1861"/>
<area shape="rect" href="../../d3/d7a/wc_8c.html#a4f21d23f0e3167f510b9f393b185751c" title=" " alt="" coords="146,1885,185,1911"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a3a007a46ea6310b39a233e45d439f11a" title=" " alt="" coords="129,1935,201,1960"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a48ac3cbd37dcf4c4e08b0572b3a0e9f3" title=" " alt="" coords="126,1984,205,2009"/>
<area shape="rect" href="../../d7/d1f/mkfs_8c.html#ac62d827d836d1807e4d6f365f32348bb" title=" " alt="" coords="137,2033,194,2059"/>
<area shape="rect" href="../../d1/d47/pipe_8c.html#a9d6f0c526148e6002b6776619c7563e6" title=" " alt="" coords="263,1071,336,1096"/>
</map>
</div>

</div>
</div>
<a id="af301c10ad8ced77a5dfb2de3a64c666c" name="af301c10ad8ced77a5dfb2de3a64c666c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af301c10ad8ced77a5dfb2de3a64c666c">&#9670;&#160;</a></span>iunlock()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iunlock </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d0/df8/structinode.html">inode</a> *&#160;</td>
          <td class="paramname"><em>ip</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d2/d5a/fs_8c_source.html#l00316">316</a> of file <a class="el" href="../../d2/d5a/fs_8c_source.html">fs.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  317</span>{</div>
<div class="line"><span class="lineno">  318</span>  <span class="keywordflow">if</span>(ip == 0 || !<a class="code hl_function" href="../../d5/d64/defs_8h.html#afa76133bc67c6026376d630da9b53b68">holdingsleep</a>(&amp;ip-&gt;<a class="code hl_variable" href="../../d0/df8/structinode.html#a46bad0e938fbd348ac02bdef0c8d6215">lock</a>) || ip-&gt;<a class="code hl_variable" href="../../d0/df8/structinode.html#a6a519028ee67f805482b3e1725bf09c5">ref</a> &lt; 1)</div>
<div class="line"><span class="lineno">  319</span>    <a class="code hl_function" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a">panic</a>(<span class="stringliteral">&quot;iunlock&quot;</span>);</div>
<div class="line"><span class="lineno">  320</span> </div>
<div class="line"><span class="lineno">  321</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#a840b479c87b1c047d7142f58e0ad0b27">releasesleep</a>(&amp;ip-&gt;<a class="code hl_variable" href="../../d0/df8/structinode.html#a46bad0e938fbd348ac02bdef0c8d6215">lock</a>);</div>
<div class="line"><span class="lineno">  322</span>}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_af301c10ad8ced77a5dfb2de3a64c666c_cgraph.png" border="0" usemap="#ad5/d64/defs_8h_af301c10ad8ced77a5dfb2de3a64c666c_cgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_af301c10ad8ced77a5dfb2de3a64c666c_cgraph" id="ad5/d64/defs_8h_af301c10ad8ced77a5dfb2de3a64c666c_cgraph">
<area shape="rect" title=" " alt="" coords="5,512,68,537"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#a6fdbe54cbecd8fc67d74793b27adcf05" title=" " alt="" coords="259,309,353,335"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="873,411,927,436"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#aa997067c2c9bfef15af6fa0a10c20f4a" title=" " alt="" coords="116,512,211,537"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="401,360,465,385"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="1115,461,1179,487"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a41af0935f3989aae450cf8988cd9c3a9" title=" " alt="" coords="527,5,592,31"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="513,360,605,385"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="528,259,591,284"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="764,259,825,284"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="653,157,716,183"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="1227,208,1283,233"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="991,259,1050,284"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="991,512,1050,537"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="975,411,1067,436"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a4a34d9f03e436cfa09b88f735f6ee952" title=" " alt="" coords="273,512,339,537"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_af301c10ad8ced77a5dfb2de3a64c666c_icgraph.png" border="0" usemap="#ad5/d64/defs_8h_af301c10ad8ced77a5dfb2de3a64c666c_icgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_af301c10ad8ced77a5dfb2de3a64c666c_icgraph" id="ad5/d64/defs_8h_af301c10ad8ced77a5dfb2de3a64c666c_icgraph">
<area shape="rect" title=" " alt="" coords="511,203,573,228"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a28ac85a90987662e306ca8efbfe16074" title=" " alt="" coords="369,55,461,80"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a6af7eb39268127d389792cec37785666" title=" " alt="" coords="368,5,463,31"/>
<area shape="rect" href="../../d6/d13/file_8c.html#a1dc8c87c7e48bdaaf98e9c7047928f29" title=" " alt="" coords="383,104,447,129"/>
<area shape="rect" href="../../d6/d13/file_8c.html#afff8e849fa54dea2a5a27dbb97474607" title=" " alt="" coords="385,153,446,179"/>
<area shape="rect" href="../../d6/d13/file_8c.html#ab8de757a0a9f58dcc6511ea5e46ebb88" title=" " alt="" coords="382,203,449,228"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a207b3008bae35596c55ec7c4fc6875eb" title=" " alt="" coords="375,376,456,401"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#ad1c5f8693cb35b9605fee09eebdda640" title=" " alt="" coords="236,252,315,277"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a759600870314007ac558871239122fb7" title=" " alt="" coords="240,499,311,524"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a74e45efc661ca17c068bc283b3842e6d" title=" " alt="" coords="236,548,315,573"/>
<area shape="rect" href="../../d0/d56/console_8c.html#ab508ff0f4db26fe35cd25fa648f9ee75" title=" " alt="" coords="233,29,317,55"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a54bf714d9e898cbdcbc061b280bbfae0" title=" " alt="" coords="238,104,313,129"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#ac243c8f20f5fb2e3e257b5007af2c204" title=" " alt="" coords="237,153,313,179"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a687d939a9e4792af15db96f2c2f34378" title=" " alt="" coords="236,203,315,228"/>
<area shape="rect" href="../../df/dc9/exec_8c.html#ace32454ed0d37834dcb1cb4f8b727e6e" title=" " alt="" coords="250,351,301,376"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a057e5bce2de7a87ebfd2dc33967bca4a" title=" " alt="" coords="234,400,317,425"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a25697aa3d828b5878d38170d724adb27" title=" " alt="" coords="231,449,320,475"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#ae1e58ee11d41f643929520d8c1640da7" title=" " alt="" coords="233,301,317,327"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#ac5b5d4517586be6396b4f3b37445945a" title=" " alt="" coords="104,301,183,327"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a6f94e3b215d069b5419e87bafe80799a" title=" " alt="" coords="107,252,179,277"/>
<area shape="rect" href="../../d8/d60/init_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title=" " alt="" coords="118,351,169,376"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#aedbeff6afe5d4e22330c7e6b5e6df893" title=" " alt="" coords="111,424,176,449"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#aeaa813ddeb6a5fac3c45714c7351c526" title=" " alt="" coords="104,473,183,499"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="5,277,56,303"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title=" " alt="" coords="5,424,56,449"/>
</map>
</div>

</div>
</div>
<a id="adff5bb5a1eeaf921853ec06479f8c49b" name="adff5bb5a1eeaf921853ec06479f8c49b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adff5bb5a1eeaf921853ec06479f8c49b">&#9670;&#160;</a></span>iunlockput()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iunlockput </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d0/df8/structinode.html">inode</a> *&#160;</td>
          <td class="paramname"><em>ip</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d2/d5a/fs_8c_source.html#l00356">356</a> of file <a class="el" href="../../d2/d5a/fs_8c_source.html">fs.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  357</span>{</div>
<div class="line"><span class="lineno">  358</span>  <a class="code hl_function" href="../../d2/d5a/fs_8c.html#ae4e29916219b9293b37f9c34220694fe">iunlock</a>(ip);</div>
<div class="line"><span class="lineno">  359</span>  <a class="code hl_function" href="../../d2/d5a/fs_8c.html#ab3c447f135c68e4c3c1f8d5866f6e77b">iput</a>(ip);</div>
<div class="line"><span class="lineno">  360</span>}</div>
<div class="ttc" id="afs_8c_html_ae4e29916219b9293b37f9c34220694fe"><div class="ttname"><a href="../../d2/d5a/fs_8c.html#ae4e29916219b9293b37f9c34220694fe">iunlock</a></div><div class="ttdeci">void iunlock(struct inode *ip)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d5a/fs_8c_source.html#l00316">fs.c:316</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_adff5bb5a1eeaf921853ec06479f8c49b_cgraph.png" border="0" usemap="#ad5/d64/defs_8h_adff5bb5a1eeaf921853ec06479f8c49b_cgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_adff5bb5a1eeaf921853ec06479f8c49b_cgraph" id="ad5/d64/defs_8h_adff5bb5a1eeaf921853ec06479f8c49b_cgraph">
<area shape="rect" title=" " alt="" coords="5,1462,87,1487"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#ab3c447f135c68e4c3c1f8d5866f6e77b" title=" " alt="" coords="135,1209,177,1234"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#ae4e29916219b9293b37f9c34220694fe" title=" " alt="" coords="593,1462,655,1487"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="993,879,1057,905"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="1717,1145,1781,1170"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#aaad2d7a86d4859982dd9a132f5128ff2" title=" " alt="" coords="440,677,535,702"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a7220afa8e5f4bea540eb95879ea7df6e" title=" " alt="" coords="225,1107,289,1133"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#aa997067c2c9bfef15af6fa0a10c20f4a" title=" " alt="" coords="713,1411,808,1437"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="1116,905,1208,930"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="1131,398,1193,423"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="1367,474,1428,499"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="1476,866,1529,891"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="1256,499,1319,525"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="1829,246,1885,271"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="1594,601,1653,626"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="1594,1043,1653,1069"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="1577,866,1669,891"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a41af0935f3989aae450cf8988cd9c3a9" title=" " alt="" coords="863,297,928,322"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ae70cc0370342e46f6db3bec367232457" title=" " alt="" coords="597,677,651,702"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad788da91743c333b5bed7c4a0dd12365" title=" " alt="" coords="732,499,789,525"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a9fa00b0be5d3c4781048861e2506eb63" title=" " alt="" coords="856,499,935,525"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a1d9e7047d3dfb57809a2541d8387705e" title=" " alt="" coords="997,599,1054,625"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a02ca0670bc1fe12e38453082631ff360" title=" " alt="" coords="983,550,1068,575"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a87c90f0ab2a1b11c2b55f4e483bb8493" title=" " alt="" coords="1119,550,1205,575"/>
<area shape="rect" href="../../dc/de6/bio_8c.html#a30b8d2ef2300ed8e3d879a428fe39898" title=" " alt="" coords="337,1006,392,1031"/>
<area shape="rect" href="../../d1/db0/string_8c.html#a07f97e2ed1ce37955192d52de8f4911f" title=" " alt="" coords="583,1057,665,1082"/>
<area shape="rect" href="../../dc/de6/bio_8c.html#ab5335aeb503731104314321a78a6d727" title=" " alt="" coords="595,1209,653,1234"/>
<area shape="rect" href="../../d7/df8/log_8c.html#a7eacb0fbebe5ce4c7d3ddea15908b13d" title=" " alt="" coords="858,1158,933,1183"/>
<area shape="rect" href="../../da/d9b/memide_8c.html#a7f36b008f02088c86f76e98e05b55af5" title=" " alt="" coords="461,1006,514,1031"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#a6fdbe54cbecd8fc67d74793b27adcf05" title=" " alt="" coords="713,1031,808,1057"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a4a34d9f03e436cfa09b88f735f6ee952" title=" " alt="" coords="862,1310,929,1335"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_adff5bb5a1eeaf921853ec06479f8c49b_icgraph.png" border="0" usemap="#ad5/d64/defs_8h_adff5bb5a1eeaf921853ec06479f8c49b_icgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_adff5bb5a1eeaf921853ec06479f8c49b_icgraph" id="ad5/d64/defs_8h_adff5bb5a1eeaf921853ec06479f8c49b_icgraph">
<area shape="rect" title=" " alt="" coords="368,252,449,277"/>
<area shape="rect" href="../../df/dc9/exec_8c.html#ace32454ed0d37834dcb1cb4f8b727e6e" title=" " alt="" coords="250,104,301,129"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#ad1c5f8693cb35b9605fee09eebdda640" title=" " alt="" coords="236,153,315,179"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a759600870314007ac558871239122fb7" title=" " alt="" coords="240,203,311,228"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a057e5bce2de7a87ebfd2dc33967bca4a" title=" " alt="" coords="234,252,317,277"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a25697aa3d828b5878d38170d724adb27" title=" " alt="" coords="231,301,320,327"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a74e45efc661ca17c068bc283b3842e6d" title=" " alt="" coords="236,351,315,376"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#ae1e58ee11d41f643929520d8c1640da7" title=" " alt="" coords="233,400,317,425"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#ac5b5d4517586be6396b4f3b37445945a" title=" " alt="" coords="104,5,183,31"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a6f94e3b215d069b5419e87bafe80799a" title=" " alt="" coords="107,55,179,80"/>
<area shape="rect" href="../../d8/d60/init_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title=" " alt="" coords="118,104,169,129"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#aedbeff6afe5d4e22330c7e6b5e6df893" title=" " alt="" coords="111,177,176,203"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#aeaa813ddeb6a5fac3c45714c7351c526" title=" " alt="" coords="104,227,183,252"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="5,31,56,56"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title=" " alt="" coords="5,177,56,203"/>
</map>
</div>

</div>
</div>
<a id="a2ee6784c123b2a2656d88b5b357f2253" name="a2ee6784c123b2a2656d88b5b357f2253"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2ee6784c123b2a2656d88b5b357f2253">&#9670;&#160;</a></span>iupdate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iupdate </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d0/df8/structinode.html">inode</a> *&#160;</td>
          <td class="paramname"><em>ip</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d2/d5a/fs_8c_source.html#l00221">221</a> of file <a class="el" href="../../d2/d5a/fs_8c_source.html">fs.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  222</span>{</div>
<div class="line"><span class="lineno">  223</span>  <span class="keyword">struct </span><a class="code hl_struct" href="../../d9/dd0/structbuf.html">buf</a> *bp;</div>
<div class="line"><span class="lineno">  224</span>  <span class="keyword">struct </span><a class="code hl_struct" href="../../db/dfa/structdinode.html">dinode</a> *dip;</div>
<div class="line"><span class="lineno">  225</span> </div>
<div class="line"><span class="lineno">  226</span>  bp = <a class="code hl_function" href="../../dc/de6/bio_8c.html#a30b8d2ef2300ed8e3d879a428fe39898">bread</a>(ip-&gt;<a class="code hl_variable" href="../../d0/df8/structinode.html#a121742a89c4531f03a7de1613d5be605">dev</a>, <a class="code hl_define" href="../../df/d26/fs_8h.html#ac9a5b990015f0f86e5d4c6b21d38ffa0">IBLOCK</a>(ip-&gt;<a class="code hl_variable" href="../../d0/df8/structinode.html#a8acc2b9df0bfc6856da62925763db7fe">inum</a>, <a class="code hl_variable" href="../../d2/d5a/fs_8c.html#a0248d0bac625de5a1415f2f8c91f3343">sb</a>));</div>
<div class="line"><span class="lineno">  227</span>  dip = (<span class="keyword">struct </span><a class="code hl_struct" href="../../db/dfa/structdinode.html">dinode</a>*)bp-&gt;<a class="code hl_variable" href="../../d9/dd0/structbuf.html#ab0ec38784ab94ed35e575cf6d33912d2">data</a> + ip-&gt;<a class="code hl_variable" href="../../d0/df8/structinode.html#a8acc2b9df0bfc6856da62925763db7fe">inum</a>%<a class="code hl_define" href="../../df/d26/fs_8h.html#aadb6c866a6d0a173f5f0a6ed9c7e0228">IPB</a>;</div>
<div class="line"><span class="lineno">  228</span>  dip-&gt;<a class="code hl_variable" href="../../db/dfa/structdinode.html#abf6b2a8476a803284f1c927fb3b82259">type</a> = ip-&gt;<a class="code hl_variable" href="../../d0/df8/structinode.html#a8d74bec2898785c057111c328d23fda2">type</a>;</div>
<div class="line"><span class="lineno">  229</span>  dip-&gt;<a class="code hl_variable" href="../../db/dfa/structdinode.html#aca8272002020f48219df175c986db257">major</a> = ip-&gt;<a class="code hl_variable" href="../../d0/df8/structinode.html#a34af7242018a977dace5730683850875">major</a>;</div>
<div class="line"><span class="lineno">  230</span>  dip-&gt;<a class="code hl_variable" href="../../db/dfa/structdinode.html#ae97965f85e7353313f85035e8fc63495">minor</a> = ip-&gt;<a class="code hl_variable" href="../../d0/df8/structinode.html#a37878866e7905b666db2aa33076076a2">minor</a>;</div>
<div class="line"><span class="lineno">  231</span>  dip-&gt;<a class="code hl_variable" href="../../db/dfa/structdinode.html#a105562253b461c11413c9a229ef15358">nlink</a> = ip-&gt;<a class="code hl_variable" href="../../d0/df8/structinode.html#af8b88b409bea7ef99c49a55f387538b2">nlink</a>;</div>
<div class="line"><span class="lineno">  232</span>  dip-&gt;<a class="code hl_variable" href="../../db/dfa/structdinode.html#a990ad8ddf5f8c051fbbe95cf550d2164">size</a> = ip-&gt;<a class="code hl_variable" href="../../d0/df8/structinode.html#a918af769c48a8ca8afac057bf83d12de">size</a>;</div>
<div class="line"><span class="lineno">  233</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#ac152fff34fe03e497d35b1d4c47f1445">memmove</a>(dip-&gt;<a class="code hl_variable" href="../../db/dfa/structdinode.html#a705729b3a39c10c0ba6927fc5e4e0563">addrs</a>, ip-&gt;<a class="code hl_variable" href="../../d0/df8/structinode.html#a7ba4ab7e52404b80d6d854678715ae30">addrs</a>, <span class="keyword">sizeof</span>(ip-&gt;<a class="code hl_variable" href="../../d0/df8/structinode.html#a7ba4ab7e52404b80d6d854678715ae30">addrs</a>));</div>
<div class="line"><span class="lineno">  234</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#a270d0050dc50965f4f851717841ad33c">log_write</a>(bp);</div>
<div class="line"><span class="lineno">  235</span>  <a class="code hl_function" href="../../dc/de6/bio_8c.html#ab5335aeb503731104314321a78a6d727">brelse</a>(bp);</div>
<div class="line"><span class="lineno">  236</span>}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_a2ee6784c123b2a2656d88b5b357f2253_cgraph.png" border="0" usemap="#ad5/d64/defs_8h_a2ee6784c123b2a2656d88b5b357f2253_cgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_a2ee6784c123b2a2656d88b5b357f2253_cgraph" id="ad5/d64/defs_8h_a2ee6784c123b2a2656d88b5b357f2253_cgraph">
<area shape="rect" title=" " alt="" coords="5,347,69,373"/>
<area shape="rect" href="../../dc/de6/bio_8c.html#a30b8d2ef2300ed8e3d879a428fe39898" title=" " alt="" coords="117,449,172,474"/>
<area shape="rect" href="../../d1/db0/string_8c.html#a07f97e2ed1ce37955192d52de8f4911f" title=" " alt="" coords="321,675,404,701"/>
<area shape="rect" href="../../dc/de6/bio_8c.html#ab5335aeb503731104314321a78a6d727" title=" " alt="" coords="334,246,391,271"/>
<area shape="rect" href="../../d7/df8/log_8c.html#a7eacb0fbebe5ce4c7d3ddea15908b13d" title=" " alt="" coords="605,297,679,322"/>
<area shape="rect" href="../../da/d9b/memide_8c.html#a7f36b008f02088c86f76e98e05b55af5" title=" " alt="" coords="220,499,273,525"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="748,525,812,550"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="1231,499,1284,525"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="1472,285,1536,310"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#a6fdbe54cbecd8fc67d74793b27adcf05" title=" " alt="" coords="595,499,689,525"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ae70cc0370342e46f6db3bec367232457" title=" " alt="" coords="336,626,389,651"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="871,499,963,525"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="885,867,948,893"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="1121,1003,1183,1029"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="1011,1006,1073,1031"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="1584,902,1640,927"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="1349,917,1407,942"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="1349,322,1407,347"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="1332,499,1424,525"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a41af0935f3989aae450cf8988cd9c3a9" title=" " alt="" coords="884,1158,949,1183"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad788da91743c333b5bed7c4a0dd12365" title=" " alt="" coords="471,981,528,1006"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a9fa00b0be5d3c4781048861e2506eb63" title=" " alt="" coords="603,981,681,1006"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a1d9e7047d3dfb57809a2541d8387705e" title=" " alt="" coords="751,1107,809,1133"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a02ca0670bc1fe12e38453082631ff360" title=" " alt="" coords="737,955,823,981"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a87c90f0ab2a1b11c2b55f4e483bb8493" title=" " alt="" coords="874,1057,959,1082"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#aa997067c2c9bfef15af6fa0a10c20f4a" title=" " alt="" coords="452,246,547,271"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a4a34d9f03e436cfa09b88f735f6ee952" title=" " alt="" coords="609,246,675,271"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_a2ee6784c123b2a2656d88b5b357f2253_icgraph.png" border="0" usemap="#ad5/d64/defs_8h_a2ee6784c123b2a2656d88b5b357f2253_icgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_a2ee6784c123b2a2656d88b5b357f2253_icgraph" id="ad5/d64/defs_8h_a2ee6784c123b2a2656d88b5b357f2253_icgraph">
<area shape="rect" title=" " alt="" coords="623,1224,687,1249"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#ab3c447f135c68e4c3c1f8d5866f6e77b" title=" " alt="" coords="527,1072,569,1097"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a759600870314007ac558871239122fb7" title=" " alt="" coords="267,1173,337,1199"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#ae1e58ee11d41f643929520d8c1640da7" title=" " alt="" coords="260,1275,344,1300"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a15858f4d8a4cc1def3d84d03c312836b" title=" " alt="" coords="521,1325,575,1351"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a69a135a0e8a06d9f306d77ebc0c1f7a0" title=" " alt="" coords="405,1224,461,1249"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#aaf98ef7cdde3a0dfb2e49919de3298b1" title=" " alt="" coords="281,945,323,971"/>
<area shape="rect" href="../../d6/d13/file_8c.html#ae557c81ab89c24219146144bb6adaa2c" title=" " alt="" coords="397,971,468,996"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a207b3008bae35596c55ec7c4fc6875eb" title=" " alt="" coords="392,1123,473,1148"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#ad1c5f8693cb35b9605fee09eebdda640" title=" " alt="" coords="263,1072,341,1097"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a77cc2edce6e78f22dd9eb377462762f2" title=" " alt="" coords="131,5,200,31"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#ac5b5d4517586be6396b4f3b37445945a" title=" " alt="" coords="126,55,205,80"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#aa0d46fcb43667c805b84ea7e1ff6100a" title=" " alt="" coords="139,104,192,129"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a86fe524d99d69c18a335512cf3405b31" title=" " alt="" coords="137,153,193,179"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a57e55b2d0161d62bb99765ca3de43e35" title=" " alt="" coords="132,203,199,228"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a0b0ff95e564df3c3e8fc977226b75de7" title=" " alt="" coords="133,252,198,277"/>
<area shape="rect" href="../../d1/d8f/cat_8c.html#a90a33618884bcf5e892297879bc016ff" title=" " alt="" coords="145,353,185,379"/>
<area shape="rect" href="../../d1/d8f/cat_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="13,328,63,353"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a5a12affe4fdfaa172d85da9a6adf98d2" title=" " alt="" coords="126,403,205,428"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a425a0efe4f459decf4b5ea14517ab3cf" title=" " alt="" coords="119,452,212,477"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#aedd6d3f148dd5c99b47900215c1ac43f" title=" " alt="" coords="139,501,192,527"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a8db9f9a2634bab29096bab0b8bc6945c" title=" " alt="" coords="136,551,195,576"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a6f94e3b215d069b5419e87bafe80799a" title=" " alt="" coords="129,600,201,625"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a8faab06cc4d48335076b368f02709ee2" title=" " alt="" coords="122,649,209,675"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a330ed2370fe27045b8bec1eb0bd7818f" title=" " alt="" coords="132,699,199,724"/>
<area shape="rect" href="../../d5/de1/forktest_8c.html#a0ef8ccf57bc8c491407ec513b234f83c" title=" " alt="" coords="132,748,199,773"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a77a4432bc67dfb513f1c1d698c2c4ea6" title=" " alt="" coords="131,797,199,823"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#abf4af50e65630225208fef177e267efb" title=" " alt="" coords="131,847,200,872"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#ac9fe56d8f6e4ed1c9677b06cb7b325e6" title=" " alt="" coords="133,896,198,921"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a267227083b00d0cc3141b34f5152ae04" title=" " alt="" coords="145,945,185,971"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a4eeee588d4689a58fc140a7d5d7b0608" title=" " alt="" coords="133,995,197,1020"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a1740f29f4ce6d3060fd79a9312edc315" title=" " alt="" coords="127,1044,203,1069"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#aa1c6e6e76813ccb29a29bb119dba668a" title=" " alt="" coords="140,1093,191,1119"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a3208ed001a225f5d9ea3fb37f46810c7" title=" " alt="" coords="119,1143,212,1168"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#ae7c61791dd2cfb8ad59b4c6e87685c07" title=" " alt="" coords="129,1192,201,1217"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#ada38fdb2913f040f6eeb6189eeb42d32" title=" " alt="" coords="139,1293,192,1319"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#aedbeff6afe5d4e22330c7e6b5e6df893" title=" " alt="" coords="5,1268,71,1293"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a16ae754fb9c5622d44d0c3ce62ad7c49" title=" " alt="" coords="139,1343,192,1368"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a6b22568d42b584ed4b0dc4e2b0677013" title=" " alt="" coords="138,1392,193,1417"/>
<area shape="rect" href="../../d7/d1f/mkfs_8c.html#a22ea835ad23cd716a962f30e4882ee80" title=" " alt="" coords="140,1441,191,1467"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a06636ed0cda58c748d68e82d33d1afce" title=" " alt="" coords="131,1491,200,1516"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a02e1ca3f4db5f4bf8a683a0b7c18cc43" title=" " alt="" coords="129,1540,201,1565"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a5d39024e15998d6a6865f4cd0f69738b" title=" " alt="" coords="137,1589,194,1615"/>
<area shape="rect" href="../../dd/d35/sysproc_8c.html#aee72faa31a0c32b410aba558ef1d59f2" title=" " alt="" coords="130,1639,201,1664"/>
<area shape="rect" href="../../dc/d6f/trap_8c.html#a372d166e36c086c91e5f5d81e5fead3a" title=" " alt="" coords="143,1688,187,1713"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a6888f9f6d973f81f73091d1530ad212b" title=" " alt="" coords="146,1737,185,1763"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a3331ced6fb67502a2e5277260d4f5aec" title=" " alt="" coords="125,1787,206,1812"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a98d8496ecb698b9400831f2718d805c3" title=" " alt="" coords="121,1836,210,1861"/>
<area shape="rect" href="../../d3/d7a/wc_8c.html#a4f21d23f0e3167f510b9f393b185751c" title=" " alt="" coords="146,1885,185,1911"/>
<area shape="rect" href="../../d6/d13/file_8c.html#ab8de757a0a9f58dcc6511ea5e46ebb88" title=" " alt="" coords="399,1376,466,1401"/>
</map>
</div>

</div>
</div>
<a id="a5e965f6365c721b5b23c12d16d45c3dc" name="a5e965f6365c721b5b23c12d16d45c3dc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5e965f6365c721b5b23c12d16d45c3dc">&#9670;&#160;</a></span>kalloc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char * kalloc </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/def/kalloc_8c_source.html#l00083">83</a> of file <a class="el" href="../../d4/def/kalloc_8c_source.html">kalloc.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   84</span>{</div>
<div class="line"><span class="lineno">   85</span>  <span class="keyword">struct </span><a class="code hl_struct" href="../../d0/d60/structrun.html">run</a> *<a class="code hl_variable" href="../../d0/d56/console_8c.html#af10fa12dd785c91e29528fbdc50cf9af">r</a>;</div>
<div class="line"><span class="lineno">   86</span> </div>
<div class="line"><span class="lineno">   87</span>  <span class="keywordflow">if</span>(<a class="code hl_variable" href="../../d4/def/kalloc_8c.html#a1580ee3446c9d9d159d9b57ec68b66c5">kmem</a>.use_lock)</div>
<div class="line"><span class="lineno">   88</span>    <a class="code hl_function" href="../../d5/d64/defs_8h.html#afe4ef8638f1ecb962a6e67fb086ee3b8">acquire</a>(&amp;<a class="code hl_variable" href="../../d4/def/kalloc_8c.html#a1580ee3446c9d9d159d9b57ec68b66c5">kmem</a>.lock);</div>
<div class="line"><span class="lineno">   89</span>  <a class="code hl_variable" href="../../d0/d56/console_8c.html#af10fa12dd785c91e29528fbdc50cf9af">r</a> = <a class="code hl_variable" href="../../d4/def/kalloc_8c.html#a1580ee3446c9d9d159d9b57ec68b66c5">kmem</a>.freelist;</div>
<div class="line"><span class="lineno">   90</span>  <span class="keywordflow">if</span>(<a class="code hl_variable" href="../../d0/d56/console_8c.html#af10fa12dd785c91e29528fbdc50cf9af">r</a>)</div>
<div class="line"><span class="lineno">   91</span>    <a class="code hl_variable" href="../../d4/def/kalloc_8c.html#a1580ee3446c9d9d159d9b57ec68b66c5">kmem</a>.freelist = <a class="code hl_variable" href="../../d0/d56/console_8c.html#af10fa12dd785c91e29528fbdc50cf9af">r</a>-&gt;next;</div>
<div class="line"><span class="lineno">   92</span>  <span class="keywordflow">if</span>(<a class="code hl_variable" href="../../d4/def/kalloc_8c.html#a1580ee3446c9d9d159d9b57ec68b66c5">kmem</a>.use_lock)</div>
<div class="line"><span class="lineno">   93</span>    <a class="code hl_function" href="../../d5/d64/defs_8h.html#a4f8616948f3dbce65671f666eed1d669">release</a>(&amp;<a class="code hl_variable" href="../../d4/def/kalloc_8c.html#a1580ee3446c9d9d159d9b57ec68b66c5">kmem</a>.lock);</div>
<div class="line"><span class="lineno">   94</span>  <span class="keywordflow">return</span> (<span class="keywordtype">char</span>*)<a class="code hl_variable" href="../../d0/d56/console_8c.html#af10fa12dd785c91e29528fbdc50cf9af">r</a>;</div>
<div class="line"><span class="lineno">   95</span>}</div>
<div class="ttc" id="akalloc_8c_html_a1580ee3446c9d9d159d9b57ec68b66c5"><div class="ttname"><a href="../../d4/def/kalloc_8c.html#a1580ee3446c9d9d159d9b57ec68b66c5">kmem</a></div><div class="ttdeci">struct @6 kmem</div></div>
<div class="ttc" id="astructrun_html"><div class="ttname"><a href="../../d0/d60/structrun.html">run</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/def/kalloc_8c_source.html#l00016">kalloc.c:16</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_a5e965f6365c721b5b23c12d16d45c3dc_cgraph.png" border="0" usemap="#ad5/d64/defs_8h_a5e965f6365c721b5b23c12d16d45c3dc_cgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_a5e965f6365c721b5b23c12d16d45c3dc_cgraph" id="ad5/d64/defs_8h_a5e965f6365c721b5b23c12d16d45c3dc_cgraph">
<area shape="rect" title=" " alt="" coords="5,119,61,145"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="109,246,173,271"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="823,94,887,119"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="221,347,313,373"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="236,246,299,271"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="472,347,533,373"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="581,195,635,221"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="361,347,424,373"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="935,270,991,295"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="699,346,758,371"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="699,94,758,119"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="683,143,775,169"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_a5e965f6365c721b5b23c12d16d45c3dc_icgraph.png" border="0" usemap="#ad5/d64/defs_8h_a5e965f6365c721b5b23c12d16d45c3dc_icgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_a5e965f6365c721b5b23c12d16d45c3dc_icgraph" id="ad5/d64/defs_8h_a5e965f6365c721b5b23c12d16d45c3dc_icgraph">
<area shape="rect" title=" " alt="" coords="992,1031,1048,1057"/>
<area shape="rect" href="../../de/de9/vm_8c.html#afea0f0a82a9f9c7aae26f90b5e0836c6" title=" " alt="" coords="381,806,456,831"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a1b57bfa0091c9be3ccc16dbb85ce3acf" title=" " alt="" coords="743,803,817,829"/>
<area shape="rect" href="../../de/de9/vm_8c.html#ac96c231d4053eaf4322c27d1f2cd9d49" title=" " alt="" coords="387,1107,451,1133"/>
<area shape="rect" href="../../d1/d47/pipe_8c.html#a9d6f0c526148e6002b6776619c7563e6" title=" " alt="" coords="868,1209,941,1234"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a1c8a7a02e9391b5cf0984388216695c0" title=" " alt="" coords="865,1031,944,1057"/>
<area shape="rect" href="../../df/dc9/exec_8c.html#ace32454ed0d37834dcb1cb4f8b727e6e" title=" " alt="" coords="252,806,303,831"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a9c16214741f4fcd088e5eea468709328" title=" " alt="" coords="240,757,315,782"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#ac5b5d4517586be6396b4f3b37445945a" title=" " alt="" coords="104,707,183,733"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a6f94e3b215d069b5419e87bafe80799a" title=" " alt="" coords="107,855,179,881"/>
<area shape="rect" href="../../d8/d60/init_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title=" " alt="" coords="118,757,169,782"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#aedbeff6afe5d4e22330c7e6b5e6df893" title=" " alt="" coords="111,47,176,73"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#aeaa813ddeb6a5fac3c45714c7351c526" title=" " alt="" coords="104,806,183,831"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="5,478,56,503"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title=" " alt="" coords="5,10,56,35"/>
<area shape="rect" href="../../dd/d35/sysproc_8c.html#ab21d46be776cf6075a997af525a1a628" title=" " alt="" coords="106,658,181,683"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#acd2e1ded4bb6fce4500438bf928330f4" title=" " alt="" coords="651,529,695,554"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a5a12affe4fdfaa172d85da9a6adf98d2" title=" " alt="" coords="379,402,458,427"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a425a0efe4f459decf4b5ea14517ab3cf" title=" " alt="" coords="372,453,465,478"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a8faab06cc4d48335076b368f02709ee2" title=" " alt="" coords="234,199,321,225"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a330ed2370fe27045b8bec1eb0bd7818f" title=" " alt="" coords="385,250,452,275"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#a7ae98824a008ffbc5506060227b6faa0" title=" " alt="" coords="252,47,303,73"/>
<area shape="rect" href="../../d5/de1/forktest_8c.html#a0ef8ccf57bc8c491407ec513b234f83c" title=" " alt="" coords="525,705,591,730"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a77a4432bc67dfb513f1c1d698c2c4ea6" title=" " alt="" coords="243,301,311,326"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a1740f29f4ce6d3060fd79a9312edc315" title=" " alt="" coords="381,351,457,377"/>
<area shape="rect" href="../../d0/d87/foo_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="533,754,583,779"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#aa1c6e6e76813ccb29a29bb119dba668a" title=" " alt="" coords="533,803,583,829"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a3208ed001a225f5d9ea3fb37f46810c7" title=" " alt="" coords="231,579,324,605"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a16ae754fb9c5622d44d0c3ce62ad7c49" title=" " alt="" coords="117,905,170,930"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a026b8c4ab2cb9af17e1c20d533981604" title=" " alt="" coords="384,1006,453,1031"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a06636ed0cda58c748d68e82d33d1afce" title=" " alt="" coords="243,1050,312,1075"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a02e1ca3f4db5f4bf8a683a0b7c18cc43" title=" " alt="" coords="522,98,594,123"/>
<area shape="rect" href="../../dd/d35/sysproc_8c.html#a3b05102e512b34446a54334f916ba5cd" title=" " alt="" coords="522,553,594,578"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a6888f9f6d973f81f73091d1530ad212b" title=" " alt="" coords="539,149,577,174"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a98d8496ecb698b9400831f2718d805c3" title=" " alt="" coords="513,503,603,529"/>
<area shape="rect" href="../../d5/de1/forktest_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title=" " alt="" coords="393,705,444,730"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a81c8a6a0cae413bc81aa223f7f7b7205" title=" " alt="" coords="245,1133,309,1158"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a9a70db941def46ec25939e6c2d30e399" title=" " alt="" coords="743,1209,817,1234"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a893bf6891e427f310b43981bf8e737ea" title=" " alt="" coords="743,1107,817,1133"/>
</map>
</div>

</div>
</div>
<a id="af3d6113fa152781400e1e0e728c55e54" name="af3d6113fa152781400e1e0e728c55e54"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af3d6113fa152781400e1e0e728c55e54">&#9670;&#160;</a></span>kbdintr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void kbdintr </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/da9/kbd_8c_source.html#l00047">47</a> of file <a class="el" href="../../dc/da9/kbd_8c_source.html">kbd.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   48</span>{</div>
<div class="line"><span class="lineno">   49</span>  <a class="code hl_function" href="../../d0/d56/console_8c.html#aad3d6ca39f23bb6d2686d2967e415193">consoleintr</a>(<a class="code hl_function" href="../../dc/da9/kbd_8c.html#ae0e5224d52563340db794138daec14ca">kbdgetc</a>);</div>
<div class="line"><span class="lineno">   50</span>}</div>
<div class="ttc" id="aconsole_8c_html_aad3d6ca39f23bb6d2686d2967e415193"><div class="ttname"><a href="../../d0/d56/console_8c.html#aad3d6ca39f23bb6d2686d2967e415193">consoleintr</a></div><div class="ttdeci">void consoleintr(int(*getc)(void))</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d56/console_8c_source.html#l00192">console.c:192</a></div></div>
<div class="ttc" id="akbd_8c_html_ae0e5224d52563340db794138daec14ca"><div class="ttname"><a href="../../dc/da9/kbd_8c.html#ae0e5224d52563340db794138daec14ca">kbdgetc</a></div><div class="ttdeci">int kbdgetc(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da9/kbd_8c_source.html#l00007">kbd.c:7</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_af3d6113fa152781400e1e0e728c55e54_cgraph.png" border="0" usemap="#ad5/d64/defs_8h_af3d6113fa152781400e1e0e728c55e54_cgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_af3d6113fa152781400e1e0e728c55e54_cgraph" id="ad5/d64/defs_8h_af3d6113fa152781400e1e0e728c55e54_cgraph">
<area shape="rect" title=" " alt="" coords="5,94,67,120"/>
<area shape="rect" href="../../d0/d56/console_8c.html#aad3d6ca39f23bb6d2686d2967e415193" title=" " alt="" coords="115,69,200,94"/>
<area shape="rect" href="../../dc/da9/kbd_8c.html#ae0e5224d52563340db794138daec14ca" title=" " alt="" coords="123,118,191,144"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="363,221,427,246"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="1101,170,1165,196"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a7f185044294ebb57521c73f723990164" title=" " alt="" coords="835,94,913,120"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a4a34d9f03e436cfa09b88f735f6ee952" title=" " alt="" coords="248,94,315,120"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="475,196,567,221"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="489,398,552,424"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="725,334,787,360"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="847,221,901,246"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="615,348,677,373"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="1213,322,1269,348"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="978,297,1037,322"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="978,145,1037,170"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="961,96,1053,121"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_af3d6113fa152781400e1e0e728c55e54_icgraph.png" border="0" usemap="#ad5/d64/defs_8h_af3d6113fa152781400e1e0e728c55e54_icgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_af3d6113fa152781400e1e0e728c55e54_icgraph" id="ad5/d64/defs_8h_af3d6113fa152781400e1e0e728c55e54_icgraph">
<area shape="rect" title=" " alt="" coords="97,5,159,31"/>
<area shape="rect" href="../../dc/d6f/trap_8c.html#a372d166e36c086c91e5f5d81e5fead3a" title=" " alt="" coords="5,5,49,31"/>
</map>
</div>

</div>
</div>
<a id="ae79d6a7d0901b7c081cfded3f916d5bd" name="ae79d6a7d0901b7c081cfded3f916d5bd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae79d6a7d0901b7c081cfded3f916d5bd">&#9670;&#160;</a></span>kfree()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void kfree </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>v</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/def/kalloc_8c_source.html#l00060">60</a> of file <a class="el" href="../../d4/def/kalloc_8c_source.html">kalloc.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   61</span>{</div>
<div class="line"><span class="lineno">   62</span>  <span class="keyword">struct </span><a class="code hl_struct" href="../../d0/d60/structrun.html">run</a> *<a class="code hl_variable" href="../../d0/d56/console_8c.html#af10fa12dd785c91e29528fbdc50cf9af">r</a>;</div>
<div class="line"><span class="lineno">   63</span> </div>
<div class="line"><span class="lineno">   64</span>  <span class="keywordflow">if</span>((<a class="code hl_typedef" href="../../d9/d49/types_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>)v % <a class="code hl_define" href="../../d2/df1/mmu_8h.html#a5f96cb6ae6670e023c407cc2f77e1704">PGSIZE</a> || v &lt; <a class="code hl_variable" href="../../d4/def/kalloc_8c.html#af4f810c521bcfd87215d3007005a8325">end</a> || <a class="code hl_define" href="../../d8/da9/memlayout_8h.html#a5021188bc7da1304f27e913aee183407">V2P</a>(v) &gt;= <a class="code hl_define" href="../../d8/da9/memlayout_8h.html#ad3c557a115f7d82d9ef849846779531c">PHYSTOP</a>)</div>
<div class="line"><span class="lineno">   65</span>    <a class="code hl_function" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a">panic</a>(<span class="stringliteral">&quot;kfree&quot;</span>);</div>
<div class="line"><span class="lineno">   66</span> </div>
<div class="line"><span class="lineno">   67</span>  <span class="comment">// Fill with junk to catch dangling refs.</span></div>
<div class="line"><span class="lineno">   68</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#a0098886a849eef10803e9f35ceec61b9">memset</a>(v, 1, <a class="code hl_define" href="../../d2/df1/mmu_8h.html#a5f96cb6ae6670e023c407cc2f77e1704">PGSIZE</a>);</div>
<div class="line"><span class="lineno">   69</span> </div>
<div class="line"><span class="lineno">   70</span>  <span class="keywordflow">if</span>(<a class="code hl_variable" href="../../d4/def/kalloc_8c.html#a1580ee3446c9d9d159d9b57ec68b66c5">kmem</a>.use_lock)</div>
<div class="line"><span class="lineno">   71</span>    <a class="code hl_function" href="../../d5/d64/defs_8h.html#afe4ef8638f1ecb962a6e67fb086ee3b8">acquire</a>(&amp;<a class="code hl_variable" href="../../d4/def/kalloc_8c.html#a1580ee3446c9d9d159d9b57ec68b66c5">kmem</a>.lock);</div>
<div class="line"><span class="lineno">   72</span>  <a class="code hl_variable" href="../../d0/d56/console_8c.html#af10fa12dd785c91e29528fbdc50cf9af">r</a> = (<span class="keyword">struct </span><a class="code hl_struct" href="../../d0/d60/structrun.html">run</a>*)v;</div>
<div class="line"><span class="lineno">   73</span>  <a class="code hl_variable" href="../../d0/d56/console_8c.html#af10fa12dd785c91e29528fbdc50cf9af">r</a>-&gt;next = <a class="code hl_variable" href="../../d4/def/kalloc_8c.html#a1580ee3446c9d9d159d9b57ec68b66c5">kmem</a>.freelist;</div>
<div class="line"><span class="lineno">   74</span>  <a class="code hl_variable" href="../../d4/def/kalloc_8c.html#a1580ee3446c9d9d159d9b57ec68b66c5">kmem</a>.freelist = <a class="code hl_variable" href="../../d0/d56/console_8c.html#af10fa12dd785c91e29528fbdc50cf9af">r</a>;</div>
<div class="line"><span class="lineno">   75</span>  <span class="keywordflow">if</span>(<a class="code hl_variable" href="../../d4/def/kalloc_8c.html#a1580ee3446c9d9d159d9b57ec68b66c5">kmem</a>.use_lock)</div>
<div class="line"><span class="lineno">   76</span>    <a class="code hl_function" href="../../d5/d64/defs_8h.html#a4f8616948f3dbce65671f666eed1d669">release</a>(&amp;<a class="code hl_variable" href="../../d4/def/kalloc_8c.html#a1580ee3446c9d9d159d9b57ec68b66c5">kmem</a>.lock);</div>
<div class="line"><span class="lineno">   77</span>}</div>
<div class="ttc" id="akalloc_8c_html_af4f810c521bcfd87215d3007005a8325"><div class="ttname"><a href="../../d4/def/kalloc_8c.html#af4f810c521bcfd87215d3007005a8325">end</a></div><div class="ttdeci">char end[]</div></div>
<div class="ttc" id="amemlayout_8h_html_ad3c557a115f7d82d9ef849846779531c"><div class="ttname"><a href="../../d8/da9/memlayout_8h.html#ad3c557a115f7d82d9ef849846779531c">PHYSTOP</a></div><div class="ttdeci">#define PHYSTOP</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/da9/memlayout_8h_source.html#l00004">memlayout.h:4</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_ae79d6a7d0901b7c081cfded3f916d5bd_cgraph.png" border="0" usemap="#ad5/d64/defs_8h_ae79d6a7d0901b7c081cfded3f916d5bd_cgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_ae79d6a7d0901b7c081cfded3f916d5bd_cgraph" id="ad5/d64/defs_8h_ae79d6a7d0901b7c081cfded3f916d5bd_cgraph">
<area shape="rect" title=" " alt="" coords="5,94,56,119"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="107,170,171,195"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="581,94,635,119"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="823,143,887,169"/>
<area shape="rect" href="../../db/d8a/ulib_8c.html#aa9cdc2409c15ccd5ee3b2031576f4093" title=" " alt="" coords="104,219,173,245"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="221,297,313,322"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="236,346,299,371"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="472,234,533,259"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="361,246,424,271"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="935,221,991,246"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="699,194,758,219"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="699,143,758,169"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="683,94,775,119"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_ae79d6a7d0901b7c081cfded3f916d5bd_icgraph.png" border="0" usemap="#ad5/d64/defs_8h_ae79d6a7d0901b7c081cfded3f916d5bd_icgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_ae79d6a7d0901b7c081cfded3f916d5bd_icgraph" id="ad5/d64/defs_8h_ae79d6a7d0901b7c081cfded3f916d5bd_icgraph">
<area shape="rect" title=" " alt="" coords="1219,493,1269,518"/>
<area shape="rect" href="../../de/de9/vm_8c.html#afea0f0a82a9f9c7aae26f90b5e0836c6" title=" " alt="" coords="353,94,428,119"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a1b57bfa0091c9be3ccc16dbb85ce3acf" title=" " alt="" coords="712,417,787,442"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#acd2e1ded4bb6fce4500438bf928330f4" title=" " alt="" coords="619,798,663,823"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a6d3019ea15a9bfdc5131ae97f3623c49" title=" " alt="" coords="1083,187,1171,213"/>
<area shape="rect" href="../../de/de9/vm_8c.html#aa883924e2f068c520b695cdc168e1603" title=" " alt="" coords="968,353,1031,378"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#af6f31822f7e737b4e414bdac1ccb59a4" title=" " alt="" coords="617,847,664,873"/>
<area shape="rect" href="../../d4/def/kalloc_8c.html#adeb1e621acdd949dffd5a054a43d1d89" title=" " alt="" coords="1089,645,1165,670"/>
<area shape="rect" href="../../d1/d47/pipe_8c.html#a9d6f0c526148e6002b6776619c7563e6" title=" " alt="" coords="839,819,912,845"/>
<area shape="rect" href="../../d1/d47/pipe_8c.html#a48642f54734698f6f881ee07723292cb" title=" " alt="" coords="1088,718,1165,743"/>
<area shape="rect" href="../../df/dc9/exec_8c.html#ace32454ed0d37834dcb1cb4f8b727e6e" title=" " alt="" coords="243,251,293,277"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a9c16214741f4fcd088e5eea468709328" title=" " alt="" coords="231,43,305,69"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#ac5b5d4517586be6396b4f3b37445945a" title=" " alt="" coords="104,465,183,490"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a6f94e3b215d069b5419e87bafe80799a" title=" " alt="" coords="107,514,179,539"/>
<area shape="rect" href="../../d8/d60/init_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title=" " alt="" coords="118,290,169,315"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#aedbeff6afe5d4e22330c7e6b5e6df893" title=" " alt="" coords="111,363,176,389"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#aeaa813ddeb6a5fac3c45714c7351c526" title=" " alt="" coords="104,241,183,266"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="5,877,56,902"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title=" " alt="" coords="5,277,56,302"/>
<area shape="rect" href="../../dd/d35/sysproc_8c.html#ab21d46be776cf6075a997af525a1a628" title=" " alt="" coords="106,43,181,69"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a5a12affe4fdfaa172d85da9a6adf98d2" title=" " alt="" coords="483,1341,562,1366"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a425a0efe4f459decf4b5ea14517ab3cf" title=" " alt="" coords="476,699,569,725"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a8faab06cc4d48335076b368f02709ee2" title=" " alt="" coords="479,749,566,774"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a330ed2370fe27045b8bec1eb0bd7818f" title=" " alt="" coords="489,798,556,823"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#a7ae98824a008ffbc5506060227b6faa0" title=" " alt="" coords="243,195,293,221"/>
<area shape="rect" href="../../d5/de1/forktest_8c.html#a0ef8ccf57bc8c491407ec513b234f83c" title=" " alt="" coords="489,946,556,971"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a77a4432bc67dfb513f1c1d698c2c4ea6" title=" " alt="" coords="489,847,557,873"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a1740f29f4ce6d3060fd79a9312edc315" title=" " alt="" coords="485,897,561,922"/>
<area shape="rect" href="../../d0/d87/foo_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="497,547,548,573"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#aa1c6e6e76813ccb29a29bb119dba668a" title=" " alt="" coords="497,397,548,422"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a3208ed001a225f5d9ea3fb37f46810c7" title=" " alt="" coords="476,995,569,1021"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a16ae754fb9c5622d44d0c3ce62ad7c49" title=" " alt="" coords="496,1045,549,1070"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a026b8c4ab2cb9af17e1c20d533981604" title=" " alt="" coords="488,498,557,523"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a06636ed0cda58c748d68e82d33d1afce" title=" " alt="" coords="488,1143,557,1169"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a02e1ca3f4db5f4bf8a683a0b7c18cc43" title=" " alt="" coords="487,1193,559,1218"/>
<area shape="rect" href="../../dd/d35/sysproc_8c.html#a3b05102e512b34446a54334f916ba5cd" title=" " alt="" coords="487,347,559,373"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a6888f9f6d973f81f73091d1530ad212b" title=" " alt="" coords="503,1242,542,1267"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a98d8496ecb698b9400831f2718d805c3" title=" " alt="" coords="478,1291,567,1317"/>
<area shape="rect" href="../../d5/de1/forktest_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title=" " alt="" coords="365,953,416,978"/>
<area shape="rect" href="../../de/de9/vm_8c.html#ac96c231d4053eaf4322c27d1f2cd9d49" title=" " alt="" coords="359,358,423,383"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a81c8a6a0cae413bc81aa223f7f7b7205" title=" " alt="" coords="236,307,300,333"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a1c8a7a02e9391b5cf0984388216695c0" title=" " alt="" coords="836,341,915,366"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a893bf6891e427f310b43981bf8e737ea" title=" " alt="" coords="712,315,787,341"/>
<area shape="rect" href="../../dd/d35/sysproc_8c.html#ad202e06addda05ba6fe60f05d3f61913" title=" " alt="" coords="485,1094,560,1119"/>
<area shape="rect" href="../../d4/def/kalloc_8c.html#a596c07f040e83fd8ea1857f36ffab4fb" title=" " alt="" coords="973,694,1026,719"/>
<area shape="rect" href="../../d4/def/kalloc_8c.html#a8efe9094969255a41fbdaaee820bd478" title=" " alt="" coords="973,645,1026,670"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a9a70db941def46ec25939e6c2d30e399" title=" " alt="" coords="712,769,787,794"/>
<area shape="rect" href="../../d6/d13/file_8c.html#ae557c81ab89c24219146144bb6adaa2c" title=" " alt="" coords="964,743,1035,769"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#aaf98ef7cdde3a0dfb2e49919de3298b1" title=" " alt="" coords="619,1021,662,1046"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a32945488fd39bc405757177b37cd2250" title=" " alt="" coords="835,770,916,795"/>
</map>
</div>

</div>
</div>
<a id="ab893e9671d6bfe2b2604002a50639f21" name="ab893e9671d6bfe2b2604002a50639f21"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab893e9671d6bfe2b2604002a50639f21">&#9670;&#160;</a></span>kill()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int kill </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>pid</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/dda/proc_8c_source.html#l00480">480</a> of file <a class="el" href="../../d3/dda/proc_8c_source.html">proc.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  481</span>{</div>
<div class="line"><span class="lineno">  482</span>  <span class="keyword">struct </span><a class="code hl_struct" href="../../de/d48/structproc.html">proc</a> *p;</div>
<div class="line"><span class="lineno">  483</span> </div>
<div class="line"><span class="lineno">  484</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#afe4ef8638f1ecb962a6e67fb086ee3b8">acquire</a>(&amp;<a class="code hl_variable" href="../../d3/dda/proc_8c.html#addf39d613ca9a58e7e6080a2e454421a">ptable</a>.lock);</div>
<div class="line"><span class="lineno">  485</span>  <span class="keywordflow">for</span>(p = <a class="code hl_variable" href="../../d3/dda/proc_8c.html#addf39d613ca9a58e7e6080a2e454421a">ptable</a>.proc; p &lt; &amp;<a class="code hl_variable" href="../../d3/dda/proc_8c.html#addf39d613ca9a58e7e6080a2e454421a">ptable</a>.proc[<a class="code hl_define" href="../../d5/d33/param_8h.html#a810c5b751df5bb30588613ed91095129">NPROC</a>]; p++){</div>
<div class="line"><span class="lineno">  486</span>    <span class="keywordflow">if</span>(p-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#acf2bdf54d1f957ccbcdc987007029944">pid</a> == <a class="code hl_variable" href="../../de/d48/structproc.html#acf2bdf54d1f957ccbcdc987007029944">pid</a>){</div>
<div class="line"><span class="lineno">  487</span>      p-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#afb4f94a3f4df9a835dbb41b0c26660a4">killed</a> = 1;</div>
<div class="line"><span class="lineno">  488</span>      <span class="comment">// Wake process from sleep if necessary.</span></div>
<div class="line"><span class="lineno">  489</span>      <span class="keywordflow">if</span>(p-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#a0f2fe91548a1382672ae26e29ca9e736">state</a> == <a class="code hl_enumvalue" href="../../df/d03/proc_8h.html#aa1ced7d2b60040fded3fa873d0c03ba7a488282601451a751e0f0e770b15d4235">SLEEPING</a>)</div>
<div class="line"><span class="lineno">  490</span>        p-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#a0f2fe91548a1382672ae26e29ca9e736">state</a> = <a class="code hl_enumvalue" href="../../df/d03/proc_8h.html#aa1ced7d2b60040fded3fa873d0c03ba7a269b90433e40460a2c0044a0b3e15694">RUNNABLE</a>;</div>
<div class="line"><span class="lineno">  491</span>      <a class="code hl_function" href="../../d5/d64/defs_8h.html#a4f8616948f3dbce65671f666eed1d669">release</a>(&amp;<a class="code hl_variable" href="../../d3/dda/proc_8c.html#addf39d613ca9a58e7e6080a2e454421a">ptable</a>.lock);</div>
<div class="line"><span class="lineno">  492</span>      <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  493</span>    }</div>
<div class="line"><span class="lineno">  494</span>  }</div>
<div class="line"><span class="lineno">  495</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#a4f8616948f3dbce65671f666eed1d669">release</a>(&amp;<a class="code hl_variable" href="../../d3/dda/proc_8c.html#addf39d613ca9a58e7e6080a2e454421a">ptable</a>.lock);</div>
<div class="line"><span class="lineno">  496</span>  <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  497</span>}</div>
<div class="ttc" id="astructproc_html_afb4f94a3f4df9a835dbb41b0c26660a4"><div class="ttname"><a href="../../de/d48/structproc.html#afb4f94a3f4df9a835dbb41b0c26660a4">proc::killed</a></div><div class="ttdeci">int killed</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d03/proc_8h_source.html#l00048">proc.h:48</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_ab893e9671d6bfe2b2604002a50639f21_cgraph.png" border="0" usemap="#ad5/d64/defs_8h_ab893e9671d6bfe2b2604002a50639f21_cgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_ab893e9671d6bfe2b2604002a50639f21_cgraph" id="ad5/d64/defs_8h_ab893e9671d6bfe2b2604002a50639f21_cgraph">
<area shape="rect" title=" " alt="" coords="5,119,44,145"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="92,246,156,271"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="805,94,869,119"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="204,347,296,373"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="219,246,281,271"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="455,347,516,373"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="564,195,617,221"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="344,347,407,373"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="917,270,973,295"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="682,346,741,371"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="682,94,741,119"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="665,143,757,169"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_ab893e9671d6bfe2b2604002a50639f21_icgraph.png" border="0" usemap="#ad5/d64/defs_8h_ab893e9671d6bfe2b2604002a50639f21_icgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_ab893e9671d6bfe2b2604002a50639f21_icgraph" id="ad5/d64/defs_8h_ab893e9671d6bfe2b2604002a50639f21_icgraph">
<area shape="rect" title=" " alt="" coords="719,157,757,183"/>
<area shape="rect" href="../../d2/d1d/kill_8c.html#a3c04138a5bfe5d72780bb7e82a18e627" title=" " alt="" coords="612,5,663,31"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#aa1c6e6e76813ccb29a29bb119dba668a" title=" " alt="" coords="612,427,663,452"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a026b8c4ab2cb9af17e1c20d533981604" title=" " alt="" coords="229,208,299,233"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a06636ed0cda58c748d68e82d33d1afce" title=" " alt="" coords="229,57,299,83"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a98d8496ecb698b9400831f2718d805c3" title=" " alt="" coords="219,107,309,132"/>
<area shape="rect" href="../../dd/d35/sysproc_8c.html#ad766b54842470b464a6497bb5c514e59" title=" " alt="" coords="604,476,671,501"/>
<area shape="rect" href="../../de/de9/vm_8c.html#afea0f0a82a9f9c7aae26f90b5e0836c6" title=" " alt="" coords="481,1047,556,1072"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="111,480,162,505"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a1b57bfa0091c9be3ccc16dbb85ce3acf" title=" " alt="" coords="481,427,556,452"/>
<area shape="rect" href="../../de/de9/vm_8c.html#ac96c231d4053eaf4322c27d1f2cd9d49" title=" " alt="" coords="487,528,551,553"/>
<area shape="rect" href="../../df/dc9/exec_8c.html#ace32454ed0d37834dcb1cb4f8b727e6e" title=" " alt="" coords="371,1047,421,1072"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a9c16214741f4fcd088e5eea468709328" title=" " alt="" coords="359,1147,433,1172"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#ac5b5d4517586be6396b4f3b37445945a" title=" " alt="" coords="225,899,303,924"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a6f94e3b215d069b5419e87bafe80799a" title=" " alt="" coords="228,948,300,973"/>
<area shape="rect" href="../../d8/d60/init_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title=" " alt="" coords="239,1047,289,1072"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#aedbeff6afe5d4e22330c7e6b5e6df893" title=" " alt="" coords="104,1072,169,1097"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#aeaa813ddeb6a5fac3c45714c7351c526" title=" " alt="" coords="225,1096,303,1121"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title=" " alt="" coords="5,1035,56,1060"/>
<area shape="rect" href="../../dd/d35/sysproc_8c.html#ab21d46be776cf6075a997af525a1a628" title=" " alt="" coords="227,1197,301,1223"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#acd2e1ded4bb6fce4500438bf928330f4" title=" " alt="" coords="374,479,418,504"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a5a12affe4fdfaa172d85da9a6adf98d2" title=" " alt="" coords="225,603,303,628"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a425a0efe4f459decf4b5ea14517ab3cf" title=" " alt="" coords="217,701,311,727"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a8faab06cc4d48335076b368f02709ee2" title=" " alt="" coords="221,751,307,776"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a330ed2370fe27045b8bec1eb0bd7818f" title=" " alt="" coords="231,800,297,825"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#a7ae98824a008ffbc5506060227b6faa0" title=" " alt="" coords="239,997,289,1023"/>
<area shape="rect" href="../../d5/de1/forktest_8c.html#a0ef8ccf57bc8c491407ec513b234f83c" title=" " alt="" coords="231,849,297,875"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a77a4432bc67dfb513f1c1d698c2c4ea6" title=" " alt="" coords="230,257,298,283"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a1740f29f4ce6d3060fd79a9312edc315" title=" " alt="" coords="226,356,302,381"/>
<area shape="rect" href="../../d0/d87/foo_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="239,652,289,677"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a3208ed001a225f5d9ea3fb37f46810c7" title=" " alt="" coords="217,405,311,431"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a16ae754fb9c5622d44d0c3ce62ad7c49" title=" " alt="" coords="237,455,291,480"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a02e1ca3f4db5f4bf8a683a0b7c18cc43" title=" " alt="" coords="228,504,300,529"/>
<area shape="rect" href="../../dd/d35/sysproc_8c.html#a3b05102e512b34446a54334f916ba5cd" title=" " alt="" coords="228,307,300,332"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a6888f9f6d973f81f73091d1530ad212b" title=" " alt="" coords="245,553,283,579"/>
<area shape="rect" href="../../d5/de1/forktest_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title=" " alt="" coords="111,849,162,875"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a81c8a6a0cae413bc81aa223f7f7b7205" title=" " alt="" coords="364,528,428,553"/>
</map>
</div>

</div>
</div>
<a id="abc7a6a8cb3bcde83697a0c9a61d22d4d" name="abc7a6a8cb3bcde83697a0c9a61d22d4d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abc7a6a8cb3bcde83697a0c9a61d22d4d">&#9670;&#160;</a></span>kinit1()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void kinit1 </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>vstart</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>vend</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/def/kalloc_8c_source.html#l00032">32</a> of file <a class="el" href="../../d4/def/kalloc_8c_source.html">kalloc.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   33</span>{</div>
<div class="line"><span class="lineno">   34</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#ab56d728e6966819a0260c358d3ac3419">initlock</a>(&amp;<a class="code hl_variable" href="../../d4/def/kalloc_8c.html#a1580ee3446c9d9d159d9b57ec68b66c5">kmem</a>.lock, <span class="stringliteral">&quot;kmem&quot;</span>);</div>
<div class="line"><span class="lineno">   35</span>  <a class="code hl_variable" href="../../d4/def/kalloc_8c.html#a1580ee3446c9d9d159d9b57ec68b66c5">kmem</a>.use_lock = 0;</div>
<div class="line"><span class="lineno">   36</span>  <a class="code hl_function" href="../../d4/def/kalloc_8c.html#adeb1e621acdd949dffd5a054a43d1d89">freerange</a>(vstart, vend);</div>
<div class="line"><span class="lineno">   37</span>}</div>
<div class="ttc" id="akalloc_8c_html_adeb1e621acdd949dffd5a054a43d1d89"><div class="ttname"><a href="../../d4/def/kalloc_8c.html#adeb1e621acdd949dffd5a054a43d1d89">freerange</a></div><div class="ttdeci">void freerange(void *vstart, void *vend)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/def/kalloc_8c_source.html#l00047">kalloc.c:47</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_abc7a6a8cb3bcde83697a0c9a61d22d4d_cgraph.png" border="0" usemap="#ad5/d64/defs_8h_abc7a6a8cb3bcde83697a0c9a61d22d4d_cgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_abc7a6a8cb3bcde83697a0c9a61d22d4d_cgraph" id="ad5/d64/defs_8h_abc7a6a8cb3bcde83697a0c9a61d22d4d_cgraph">
<area shape="rect" title=" " alt="" coords="5,119,59,145"/>
<area shape="rect" href="../../d4/def/kalloc_8c.html#adeb1e621acdd949dffd5a054a43d1d89" title=" " alt="" coords="107,94,183,119"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#abda07b4a007b2e888d9d783920460b89" title=" " alt="" coords="113,143,176,169"/>
<area shape="rect" href="../../d4/def/kalloc_8c.html#aced59ecf8411235f6dffc065236711a5" title=" " alt="" coords="231,94,281,119"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="332,170,396,195"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="807,94,860,119"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="1048,143,1112,169"/>
<area shape="rect" href="../../db/d8a/ulib_8c.html#aa9cdc2409c15ccd5ee3b2031576f4093" title=" " alt="" coords="329,219,399,245"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="447,297,539,322"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="461,346,524,371"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="697,234,759,259"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="587,246,649,271"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="1160,221,1216,246"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="925,194,983,219"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="925,143,983,169"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="908,94,1000,119"/>
</map>
</div>

</div>
</div>
<a id="aeb265df0f4968b40d175d9e3030d737c" name="aeb265df0f4968b40d175d9e3030d737c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeb265df0f4968b40d175d9e3030d737c">&#9670;&#160;</a></span>kinit2()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void kinit2 </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>vstart</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>vend</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/def/kalloc_8c_source.html#l00040">40</a> of file <a class="el" href="../../d4/def/kalloc_8c_source.html">kalloc.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   41</span>{</div>
<div class="line"><span class="lineno">   42</span>  <a class="code hl_function" href="../../d4/def/kalloc_8c.html#adeb1e621acdd949dffd5a054a43d1d89">freerange</a>(vstart, vend);</div>
<div class="line"><span class="lineno">   43</span>  <a class="code hl_variable" href="../../d4/def/kalloc_8c.html#a1580ee3446c9d9d159d9b57ec68b66c5">kmem</a>.use_lock = 1;</div>
<div class="line"><span class="lineno">   44</span>}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_aeb265df0f4968b40d175d9e3030d737c_cgraph.png" border="0" usemap="#ad5/d64/defs_8h_aeb265df0f4968b40d175d9e3030d737c_cgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_aeb265df0f4968b40d175d9e3030d737c_cgraph" id="ad5/d64/defs_8h_aeb265df0f4968b40d175d9e3030d737c_cgraph">
<area shape="rect" title=" " alt="" coords="5,94,59,119"/>
<area shape="rect" href="../../d4/def/kalloc_8c.html#adeb1e621acdd949dffd5a054a43d1d89" title=" " alt="" coords="107,94,183,119"/>
<area shape="rect" href="../../d4/def/kalloc_8c.html#aced59ecf8411235f6dffc065236711a5" title=" " alt="" coords="231,94,281,119"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="332,170,396,195"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="807,94,860,119"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="1048,143,1112,169"/>
<area shape="rect" href="../../db/d8a/ulib_8c.html#aa9cdc2409c15ccd5ee3b2031576f4093" title=" " alt="" coords="329,219,399,245"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="447,297,539,322"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="461,346,524,371"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="697,234,759,259"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="587,246,649,271"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="1160,221,1216,246"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="925,194,983,219"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="925,143,983,169"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="908,94,1000,119"/>
</map>
</div>

</div>
</div>
<a id="a893bf6891e427f310b43981bf8e737ea" name="a893bf6891e427f310b43981bf8e737ea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a893bf6891e427f310b43981bf8e737ea">&#9670;&#160;</a></span>kvmalloc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void kvmalloc </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/de9/vm_8c_source.html#l00141">141</a> of file <a class="el" href="../../de/de9/vm_8c_source.html">vm.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  142</span>{</div>
<div class="line"><span class="lineno">  143</span>  <a class="code hl_variable" href="../../de/de9/vm_8c.html#aff01f9f000432fd4171b7edee6c85855">kpgdir</a> = <a class="code hl_function" href="../../de/de9/vm_8c.html#a1c8a7a02e9391b5cf0984388216695c0">setupkvm</a>();</div>
<div class="line"><span class="lineno">  144</span>  <a class="code hl_function" href="../../de/de9/vm_8c.html#a02ca0670bc1fe12e38453082631ff360">switchkvm</a>();</div>
<div class="line"><span class="lineno">  145</span>}</div>
<div class="ttc" id="avm_8c_html_a02ca0670bc1fe12e38453082631ff360"><div class="ttname"><a href="../../de/de9/vm_8c.html#a02ca0670bc1fe12e38453082631ff360">switchkvm</a></div><div class="ttdeci">void switchkvm(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/de9/vm_8c_source.html#l00150">vm.c:150</a></div></div>
<div class="ttc" id="avm_8c_html_aff01f9f000432fd4171b7edee6c85855"><div class="ttname"><a href="../../de/de9/vm_8c.html#aff01f9f000432fd4171b7edee6c85855">kpgdir</a></div><div class="ttdeci">pde_t * kpgdir</div><div class="ttdef"><b>Definition:</b> <a href="../../de/de9/vm_8c_source.html#l00011">vm.c:11</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_a893bf6891e427f310b43981bf8e737ea_cgraph.png" border="0" usemap="#ad5/d64/defs_8h_a893bf6891e427f310b43981bf8e737ea_cgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_a893bf6891e427f310b43981bf8e737ea_cgraph" id="ad5/d64/defs_8h_a893bf6891e427f310b43981bf8e737ea_cgraph">
<area shape="rect" title=" " alt="" coords="5,270,80,295"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a1c8a7a02e9391b5cf0984388216695c0" title=" " alt="" coords="131,245,210,270"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a02ca0670bc1fe12e38453082631ff360" title=" " alt="" coords="128,294,213,319"/>
<area shape="rect" href="../../de/de9/vm_8c.html#aa883924e2f068c520b695cdc168e1603" title=" " alt="" coords="261,119,324,145"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="1089,246,1143,271"/>
<area shape="rect" href="../../db/d8a/ulib_8c.html#aa9cdc2409c15ccd5ee3b2031576f4093" title=" " alt="" coords="612,346,681,371"/>
<area shape="rect" href="../../d4/def/kalloc_8c.html#a5e965f6365c721b5b23c12d16d45c3dc" title=" " alt="" coords="508,295,564,321"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a6d3019ea15a9bfdc5131ae97f3623c49" title=" " alt="" coords="372,94,460,119"/>
<area shape="rect" href="../../d4/def/kalloc_8c.html#aced59ecf8411235f6dffc065236711a5" title=" " alt="" coords="511,145,561,170"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="615,297,679,322"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="1331,423,1395,449"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="729,297,821,322"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="744,499,807,525"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="980,435,1041,461"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="869,449,932,474"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="1443,550,1499,575"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="1207,397,1266,422"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="1207,347,1266,373"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="1191,298,1283,323"/>
</map>
</div>

</div>
</div>
<a id="a42fdd0783bbeb7cdc646d360191cdcac" name="a42fdd0783bbeb7cdc646d360191cdcac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a42fdd0783bbeb7cdc646d360191cdcac">&#9670;&#160;</a></span>lapiceoi()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lapiceoi </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/df6/lapic_8c_source.html#l00110">110</a> of file <a class="el" href="../../dc/df6/lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  111</span>{</div>
<div class="line"><span class="lineno">  112</span>  <span class="keywordflow">if</span>(<a class="code hl_variable" href="../../dc/df6/lapic_8c.html#a4029f3e2439d5912f93543b8addd10ec">lapic</a>)</div>
<div class="line"><span class="lineno">  113</span>    lapicw(<a class="code hl_define" href="../../dc/df6/lapic_8c.html#a04c9015da7e7ea45f3b80793809e2d7b">EOI</a>, 0);</div>
<div class="line"><span class="lineno">  114</span>}</div>
<div class="ttc" id="alapic_8c_html_a04c9015da7e7ea45f3b80793809e2d7b"><div class="ttname"><a href="../../dc/df6/lapic_8c.html#a04c9015da7e7ea45f3b80793809e2d7b">EOI</a></div><div class="ttdeci">#define EOI</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df6/lapic_8c_source.html#l00017">lapic.c:17</a></div></div>
<div class="ttc" id="alapic_8c_html_a4029f3e2439d5912f93543b8addd10ec"><div class="ttname"><a href="../../dc/df6/lapic_8c.html#a4029f3e2439d5912f93543b8addd10ec">lapic</a></div><div class="ttdeci">volatile uint * lapic</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df6/lapic_8c_source.html#l00044">lapic.c:44</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_a42fdd0783bbeb7cdc646d360191cdcac_icgraph.png" border="0" usemap="#ad5/d64/defs_8h_a42fdd0783bbeb7cdc646d360191cdcac_icgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_a42fdd0783bbeb7cdc646d360191cdcac_icgraph" id="ad5/d64/defs_8h_a42fdd0783bbeb7cdc646d360191cdcac_icgraph">
<area shape="rect" title=" " alt="" coords="97,5,164,31"/>
<area shape="rect" href="../../dc/d6f/trap_8c.html#a372d166e36c086c91e5f5d81e5fead3a" title=" " alt="" coords="5,5,49,31"/>
</map>
</div>

</div>
</div>
<a id="a627f7996b64f99d885244a5102c85164" name="a627f7996b64f99d885244a5102c85164"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a627f7996b64f99d885244a5102c85164">&#9670;&#160;</a></span>lapicid()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lapicid </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/df6/lapic_8c_source.html#l00101">101</a> of file <a class="el" href="../../dc/df6/lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  102</span>{</div>
<div class="line"><span class="lineno">  103</span>  <span class="keywordflow">if</span> (!<a class="code hl_variable" href="../../dc/df6/lapic_8c.html#a4029f3e2439d5912f93543b8addd10ec">lapic</a>)</div>
<div class="line"><span class="lineno">  104</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  105</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="../../dc/df6/lapic_8c.html#a4029f3e2439d5912f93543b8addd10ec">lapic</a>[<a class="code hl_define" href="../../dc/df6/lapic_8c.html#a77ceac8d6af195fe72f95f6afd87c45e">ID</a>] &gt;&gt; 24;</div>
<div class="line"><span class="lineno">  106</span>}</div>
<div class="ttc" id="alapic_8c_html_a77ceac8d6af195fe72f95f6afd87c45e"><div class="ttname"><a href="../../dc/df6/lapic_8c.html#a77ceac8d6af195fe72f95f6afd87c45e">ID</a></div><div class="ttdeci">#define ID</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df6/lapic_8c_source.html#l00014">lapic.c:14</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_a627f7996b64f99d885244a5102c85164_icgraph.png" border="0" usemap="#ad5/d64/defs_8h_a627f7996b64f99d885244a5102c85164_icgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_a627f7996b64f99d885244a5102c85164_icgraph" id="ad5/d64/defs_8h_a627f7996b64f99d885244a5102c85164_icgraph">
<area shape="rect" title=" " alt="" coords="1793,1841,1852,1866"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="1684,398,1745,423"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="1253,2295,1307,2321"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="1461,1030,1525,1055"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="1140,499,1196,525"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="1009,398,1071,423"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a9fa00b0be5d3c4781048861e2506eb63" title=" " alt="" coords="755,297,834,322"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad788da91743c333b5bed7c4a0dd12365" title=" " alt="" coords="631,398,689,423"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a41af0935f3989aae450cf8988cd9c3a9" title=" " alt="" coords="762,499,827,525"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a87c90f0ab2a1b11c2b55f4e483bb8493" title=" " alt="" coords="997,195,1083,221"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a414dda255ed3c1e43e7922d10f9d2c6d" title=" " alt="" coords="1467,2522,1520,2547"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="1573,347,1636,373"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#aaad2d7a86d4859982dd9a132f5128ff2" title=" " alt="" coords="363,1462,457,1487"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a28ac85a90987662e306ca8efbfe16074" title=" " alt="" coords="99,1335,191,1361"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a6af7eb39268127d389792cec37785666" title=" " alt="" coords="97,1489,192,1514"/>
<area shape="rect" href="../../d7/df8/log_8c.html#ac96aa31ffc0500e749c62c4d377c21c9" title=" " alt="" coords="373,1259,447,1285"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#aaf98ef7cdde3a0dfb2e49919de3298b1" title=" " alt="" coords="123,981,166,1006"/>
<area shape="rect" href="../../dc/d6f/trap_8c.html#a372d166e36c086c91e5f5d81e5fead3a" title=" " alt="" coords="5,1107,49,1133"/>
<area shape="rect" href="../../d6/d13/file_8c.html#ae557c81ab89c24219146144bb6adaa2c" title=" " alt="" coords="242,955,313,981"/>
<area shape="rect" href="../../dc/de6/bio_8c.html#ab5335aeb503731104314321a78a6d727" title=" " alt="" coords="766,1814,823,1839"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a2ca17a3161c80e3e4894ec6a96e0a281" title=" " alt="" coords="771,1562,818,1587"/>
<area shape="rect" href="../../d0/d56/console_8c.html#aad3d6ca39f23bb6d2686d2967e415193" title=" " alt="" coords="752,1513,837,1538"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="1355,1738,1413,1763"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a45a59a61c8799cb754b4326a32c14dc4" title=" " alt="" coords="773,1663,816,1689"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a81c8a6a0cae413bc81aa223f7f7b7205" title=" " alt="" coords="245,3130,309,3155"/>
<area shape="rect" href="../../d7/df8/log_8c.html#ac0f12be0ca0de555e60b27b06a57a65b" title=" " alt="" coords="378,1057,442,1082"/>
<area shape="rect" href="../../d6/d13/file_8c.html#a9ef0346d08d8ed79ce2a9c03f9a4b4b2" title=" " alt="" coords="765,955,825,981"/>
<area shape="rect" href="../../da/d9b/memide_8c.html#a7f36b008f02088c86f76e98e05b55af5" title=" " alt="" coords="383,2067,437,2093"/>
<area shape="rect" href="../../d4/def/kalloc_8c.html#aced59ecf8411235f6dffc065236711a5" title=" " alt="" coords="769,2978,820,3003"/>
<area shape="rect" href="../../d7/df8/log_8c.html#a7eacb0fbebe5ce4c7d3ddea15908b13d" title=" " alt="" coords="757,1713,832,1738"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ae70cc0370342e46f6db3bec367232457" title=" " alt="" coords="510,1361,563,1386"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#aed28187406d84a3aa71f10c6235a03ec" title=" " alt="" coords="253,1613,302,1638"/>
<area shape="rect" href="../../d6/d13/file_8c.html#a1dc8c87c7e48bdaaf98e9c7047928f29" title=" " alt="" coords="113,1613,177,1638"/>
<area shape="rect" href="../../d6/d13/file_8c.html#ab8de757a0a9f58dcc6511ea5e46ebb88" title=" " alt="" coords="111,1563,178,1589"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#ae1e58ee11d41f643929520d8c1640da7" title=" " alt="" coords="103,2219,187,2245"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#af95049367381647bc9487af49724b869" title=" " alt="" coords="634,1689,686,1714"/>
<area shape="rect" href="../../dc/de6/bio_8c.html#a63c899c13b176ddf80064d32225e1298" title=" " alt="" coords="249,2270,306,2295"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a795e27a0cb916cfb41411ebbb9669ddf" title=" " alt="" coords="1131,2623,1205,2649"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a1b57bfa0091c9be3ccc16dbb85ce3acf" title=" " alt="" coords="240,2953,315,2978"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a6d3019ea15a9bfdc5131ae97f3623c49" title=" " alt="" coords="616,2927,704,2953"/>
<area shape="rect" href="../../de/de9/vm_8c.html#aa883924e2f068c520b695cdc168e1603" title=" " alt="" coords="505,2927,568,2953"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a1c8a7a02e9391b5cf0984388216695c0" title=" " alt="" coords="371,3079,449,3105"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a69a135a0e8a06d9f306d77ebc0c1f7a0" title=" " alt="" coords="1012,2637,1068,2662"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a5341068f021beac8cf0032b97d231e6f" title=" " alt="" coords="1131,2725,1205,2750"/>
<area shape="rect" href="../../d7/df8/log_8c.html#ad5e79aaefb91f41b9ef6aeae7ecf4708" title=" " alt="" coords="1140,2270,1196,2295"/>
<area shape="rect" href="../../de/de9/vm_8c.html#ac96c231d4053eaf4322c27d1f2cd9d49" title=" " alt="" coords="885,3181,949,3206"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#ae4e29916219b9293b37f9c34220694fe" title=" " alt="" coords="246,1563,309,1589"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a201acc8337a2893268b61ea5a1ee0d53" title=" " alt="" coords="1133,2422,1203,2447"/>
<area shape="rect" href="../../dd/d06/mp_8c.html#a2fd0b66a17c5347541448ef906b7b2a2" title=" " alt="" coords="1139,2471,1197,2497"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="885,1207,949,1233"/>
</map>
</div>

</div>
</div>
<a id="a6b48a1e50acc73cb3e70a65774c87392" name="a6b48a1e50acc73cb3e70a65774c87392"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6b48a1e50acc73cb3e70a65774c87392">&#9670;&#160;</a></span>lapicinit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lapicinit </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/df6/lapic_8c_source.html#l00055">55</a> of file <a class="el" href="../../dc/df6/lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   56</span>{</div>
<div class="line"><span class="lineno">   57</span>  <span class="keywordflow">if</span>(!<a class="code hl_variable" href="../../dc/df6/lapic_8c.html#a4029f3e2439d5912f93543b8addd10ec">lapic</a>)</div>
<div class="line"><span class="lineno">   58</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">   59</span> </div>
<div class="line"><span class="lineno">   60</span>  <span class="comment">// Enable local APIC; set spurious interrupt vector.</span></div>
<div class="line"><span class="lineno">   61</span>  lapicw(<a class="code hl_define" href="../../dc/df6/lapic_8c.html#a062fc16f4eacb723c76e2c87c8495412">SVR</a>, <a class="code hl_define" href="../../dc/df6/lapic_8c.html#a514ad415fb6125ba296793df7d1a468a">ENABLE</a> | (<a class="code hl_define" href="../../d5/d98/traps_8h.html#a17129100154901eb81be6e438843a0e1">T_IRQ0</a> + <a class="code hl_define" href="../../d5/d98/traps_8h.html#a0e95f09d5e5653670eede10844d73875">IRQ_SPURIOUS</a>));</div>
<div class="line"><span class="lineno">   62</span> </div>
<div class="line"><span class="lineno">   63</span>  <span class="comment">// The timer repeatedly counts down at bus frequency</span></div>
<div class="line"><span class="lineno">   64</span>  <span class="comment">// from lapic[TICR] and then issues an interrupt.</span></div>
<div class="line"><span class="lineno">   65</span>  <span class="comment">// If xv6 cared more about precise timekeeping,</span></div>
<div class="line"><span class="lineno">   66</span>  <span class="comment">// TICR would be calibrated using an external time source.</span></div>
<div class="line"><span class="lineno">   67</span>  lapicw(<a class="code hl_define" href="../../dc/df6/lapic_8c.html#a11b0b699f28c2043fcd6da289fff7375">TDCR</a>, <a class="code hl_define" href="../../dc/df6/lapic_8c.html#a1964818ccd90a6173ea48cecb652feeb">X1</a>);</div>
<div class="line"><span class="lineno">   68</span>  lapicw(<a class="code hl_define" href="../../dc/df6/lapic_8c.html#a599217205dc3092c26567a2bd868ef3a">TIMER</a>, <a class="code hl_define" href="../../dc/df6/lapic_8c.html#af36821ad7b93ab31dcfaaa25e134fdf0">PERIODIC</a> | (<a class="code hl_define" href="../../d5/d98/traps_8h.html#a17129100154901eb81be6e438843a0e1">T_IRQ0</a> + <a class="code hl_define" href="../../d5/d98/traps_8h.html#a85fc66e3edd4ed6a4db6e455feaba8ca">IRQ_TIMER</a>));</div>
<div class="line"><span class="lineno">   69</span>  lapicw(<a class="code hl_define" href="../../dc/df6/lapic_8c.html#af1d7a14061b402e4718eff6d9ef7ada4">TICR</a>, 10000000);</div>
<div class="line"><span class="lineno">   70</span> </div>
<div class="line"><span class="lineno">   71</span>  <span class="comment">// Disable logical interrupt lines.</span></div>
<div class="line"><span class="lineno">   72</span>  lapicw(<a class="code hl_define" href="../../dc/df6/lapic_8c.html#acec8cff36b5e5b2b4bda262480db2af2">LINT0</a>, <a class="code hl_define" href="../../dc/df6/lapic_8c.html#a8fe9c058dcb81f528134d37e741182a3">MASKED</a>);</div>
<div class="line"><span class="lineno">   73</span>  lapicw(<a class="code hl_define" href="../../dc/df6/lapic_8c.html#a19035d504c49cf257ef4dc27cd3eb668">LINT1</a>, <a class="code hl_define" href="../../dc/df6/lapic_8c.html#a8fe9c058dcb81f528134d37e741182a3">MASKED</a>);</div>
<div class="line"><span class="lineno">   74</span> </div>
<div class="line"><span class="lineno">   75</span>  <span class="comment">// Disable performance counter overflow interrupts</span></div>
<div class="line"><span class="lineno">   76</span>  <span class="comment">// on machines that provide that interrupt entry.</span></div>
<div class="line"><span class="lineno">   77</span>  <span class="keywordflow">if</span>(((<a class="code hl_variable" href="../../dc/df6/lapic_8c.html#a4029f3e2439d5912f93543b8addd10ec">lapic</a>[<a class="code hl_define" href="../../dc/df6/lapic_8c.html#a98ed931f97fef7e06e3ea441d0326c67">VER</a>]&gt;&gt;16) &amp; 0xFF) &gt;= 4)</div>
<div class="line"><span class="lineno">   78</span>    lapicw(<a class="code hl_define" href="../../dc/df6/lapic_8c.html#a5c989e3931132d4a4aca9cacfcb8b075">PCINT</a>, <a class="code hl_define" href="../../dc/df6/lapic_8c.html#a8fe9c058dcb81f528134d37e741182a3">MASKED</a>);</div>
<div class="line"><span class="lineno">   79</span> </div>
<div class="line"><span class="lineno">   80</span>  <span class="comment">// Map error interrupt to IRQ_ERROR.</span></div>
<div class="line"><span class="lineno">   81</span>  lapicw(<a class="code hl_define" href="../../dc/df6/lapic_8c.html#a8fe83ac76edc595f6b98cd4a4127aed5">ERROR</a>, <a class="code hl_define" href="../../d5/d98/traps_8h.html#a17129100154901eb81be6e438843a0e1">T_IRQ0</a> + <a class="code hl_define" href="../../d5/d98/traps_8h.html#a7546e682900c4558b1f8c4f0633bc7b9">IRQ_ERROR</a>);</div>
<div class="line"><span class="lineno">   82</span> </div>
<div class="line"><span class="lineno">   83</span>  <span class="comment">// Clear error status register (requires back-to-back writes).</span></div>
<div class="line"><span class="lineno">   84</span>  lapicw(<a class="code hl_define" href="../../dc/df6/lapic_8c.html#ae4ad5e3805ffa2cbe03b65421edd8f99">ESR</a>, 0);</div>
<div class="line"><span class="lineno">   85</span>  lapicw(<a class="code hl_define" href="../../dc/df6/lapic_8c.html#ae4ad5e3805ffa2cbe03b65421edd8f99">ESR</a>, 0);</div>
<div class="line"><span class="lineno">   86</span> </div>
<div class="line"><span class="lineno">   87</span>  <span class="comment">// Ack any outstanding interrupts.</span></div>
<div class="line"><span class="lineno">   88</span>  lapicw(<a class="code hl_define" href="../../dc/df6/lapic_8c.html#a04c9015da7e7ea45f3b80793809e2d7b">EOI</a>, 0);</div>
<div class="line"><span class="lineno">   89</span> </div>
<div class="line"><span class="lineno">   90</span>  <span class="comment">// Send an Init Level De-Assert to synchronise arbitration ID&#39;s.</span></div>
<div class="line"><span class="lineno">   91</span>  lapicw(<a class="code hl_define" href="../../dc/df6/lapic_8c.html#a9382474befd66e12c502eb221e4f9a0d">ICRHI</a>, 0);</div>
<div class="line"><span class="lineno">   92</span>  lapicw(<a class="code hl_define" href="../../dc/df6/lapic_8c.html#ae6db3be23c343c0823604670010635f7">ICRLO</a>, <a class="code hl_define" href="../../dc/df6/lapic_8c.html#adc4a14c073a7427003796cbd9d435758">BCAST</a> | <a class="code hl_define" href="../../dc/df6/lapic_8c.html#ab5889105dcd019008c9448dff61323f6">INIT</a> | <a class="code hl_define" href="../../dc/df6/lapic_8c.html#a73f717b7aae31163c2a85f67883bf0ed">LEVEL</a>);</div>
<div class="line"><span class="lineno">   93</span>  <span class="keywordflow">while</span>(<a class="code hl_variable" href="../../dc/df6/lapic_8c.html#a4029f3e2439d5912f93543b8addd10ec">lapic</a>[<a class="code hl_define" href="../../dc/df6/lapic_8c.html#ae6db3be23c343c0823604670010635f7">ICRLO</a>] &amp; <a class="code hl_define" href="../../dc/df6/lapic_8c.html#a5f0b856b460d14d6fac161e35cfdb9d1">DELIVS</a>)</div>
<div class="line"><span class="lineno">   94</span>    ;</div>
<div class="line"><span class="lineno">   95</span> </div>
<div class="line"><span class="lineno">   96</span>  <span class="comment">// Enable interrupts on the APIC (but not on the processor).</span></div>
<div class="line"><span class="lineno">   97</span>  lapicw(<a class="code hl_define" href="../../dc/df6/lapic_8c.html#a0d378efcaaff1100c96bff8856bfc036">TPR</a>, 0);</div>
<div class="line"><span class="lineno">   98</span>}</div>
<div class="ttc" id="alapic_8c_html_a062fc16f4eacb723c76e2c87c8495412"><div class="ttname"><a href="../../dc/df6/lapic_8c.html#a062fc16f4eacb723c76e2c87c8495412">SVR</a></div><div class="ttdeci">#define SVR</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df6/lapic_8c_source.html#l00018">lapic.c:18</a></div></div>
<div class="ttc" id="alapic_8c_html_a0d378efcaaff1100c96bff8856bfc036"><div class="ttname"><a href="../../dc/df6/lapic_8c.html#a0d378efcaaff1100c96bff8856bfc036">TPR</a></div><div class="ttdeci">#define TPR</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df6/lapic_8c_source.html#l00016">lapic.c:16</a></div></div>
<div class="ttc" id="alapic_8c_html_a11b0b699f28c2043fcd6da289fff7375"><div class="ttname"><a href="../../dc/df6/lapic_8c.html#a11b0b699f28c2043fcd6da289fff7375">TDCR</a></div><div class="ttdeci">#define TDCR</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df6/lapic_8c_source.html#l00042">lapic.c:42</a></div></div>
<div class="ttc" id="alapic_8c_html_a19035d504c49cf257ef4dc27cd3eb668"><div class="ttname"><a href="../../dc/df6/lapic_8c.html#a19035d504c49cf257ef4dc27cd3eb668">LINT1</a></div><div class="ttdeci">#define LINT1</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df6/lapic_8c_source.html#l00037">lapic.c:37</a></div></div>
<div class="ttc" id="alapic_8c_html_a1964818ccd90a6173ea48cecb652feeb"><div class="ttname"><a href="../../dc/df6/lapic_8c.html#a1964818ccd90a6173ea48cecb652feeb">X1</a></div><div class="ttdeci">#define X1</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df6/lapic_8c_source.html#l00033">lapic.c:33</a></div></div>
<div class="ttc" id="alapic_8c_html_a514ad415fb6125ba296793df7d1a468a"><div class="ttname"><a href="../../dc/df6/lapic_8c.html#a514ad415fb6125ba296793df7d1a468a">ENABLE</a></div><div class="ttdeci">#define ENABLE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df6/lapic_8c_source.html#l00019">lapic.c:19</a></div></div>
<div class="ttc" id="alapic_8c_html_a599217205dc3092c26567a2bd868ef3a"><div class="ttname"><a href="../../dc/df6/lapic_8c.html#a599217205dc3092c26567a2bd868ef3a">TIMER</a></div><div class="ttdeci">#define TIMER</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df6/lapic_8c_source.html#l00032">lapic.c:32</a></div></div>
<div class="ttc" id="alapic_8c_html_a5c989e3931132d4a4aca9cacfcb8b075"><div class="ttname"><a href="../../dc/df6/lapic_8c.html#a5c989e3931132d4a4aca9cacfcb8b075">PCINT</a></div><div class="ttdeci">#define PCINT</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df6/lapic_8c_source.html#l00035">lapic.c:35</a></div></div>
<div class="ttc" id="alapic_8c_html_a5f0b856b460d14d6fac161e35cfdb9d1"><div class="ttname"><a href="../../dc/df6/lapic_8c.html#a5f0b856b460d14d6fac161e35cfdb9d1">DELIVS</a></div><div class="ttdeci">#define DELIVS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df6/lapic_8c_source.html#l00024">lapic.c:24</a></div></div>
<div class="ttc" id="alapic_8c_html_a73f717b7aae31163c2a85f67883bf0ed"><div class="ttname"><a href="../../dc/df6/lapic_8c.html#a73f717b7aae31163c2a85f67883bf0ed">LEVEL</a></div><div class="ttdeci">#define LEVEL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df6/lapic_8c_source.html#l00027">lapic.c:27</a></div></div>
<div class="ttc" id="alapic_8c_html_a8fe83ac76edc595f6b98cd4a4127aed5"><div class="ttname"><a href="../../dc/df6/lapic_8c.html#a8fe83ac76edc595f6b98cd4a4127aed5">ERROR</a></div><div class="ttdeci">#define ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df6/lapic_8c_source.html#l00038">lapic.c:38</a></div></div>
<div class="ttc" id="alapic_8c_html_a8fe9c058dcb81f528134d37e741182a3"><div class="ttname"><a href="../../dc/df6/lapic_8c.html#a8fe9c058dcb81f528134d37e741182a3">MASKED</a></div><div class="ttdeci">#define MASKED</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df6/lapic_8c_source.html#l00039">lapic.c:39</a></div></div>
<div class="ttc" id="alapic_8c_html_a9382474befd66e12c502eb221e4f9a0d"><div class="ttname"><a href="../../dc/df6/lapic_8c.html#a9382474befd66e12c502eb221e4f9a0d">ICRHI</a></div><div class="ttdeci">#define ICRHI</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df6/lapic_8c_source.html#l00031">lapic.c:31</a></div></div>
<div class="ttc" id="alapic_8c_html_a98ed931f97fef7e06e3ea441d0326c67"><div class="ttname"><a href="../../dc/df6/lapic_8c.html#a98ed931f97fef7e06e3ea441d0326c67">VER</a></div><div class="ttdeci">#define VER</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df6/lapic_8c_source.html#l00015">lapic.c:15</a></div></div>
<div class="ttc" id="alapic_8c_html_ab5889105dcd019008c9448dff61323f6"><div class="ttname"><a href="../../dc/df6/lapic_8c.html#ab5889105dcd019008c9448dff61323f6">INIT</a></div><div class="ttdeci">#define INIT</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df6/lapic_8c_source.html#l00022">lapic.c:22</a></div></div>
<div class="ttc" id="alapic_8c_html_acec8cff36b5e5b2b4bda262480db2af2"><div class="ttname"><a href="../../dc/df6/lapic_8c.html#acec8cff36b5e5b2b4bda262480db2af2">LINT0</a></div><div class="ttdeci">#define LINT0</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df6/lapic_8c_source.html#l00036">lapic.c:36</a></div></div>
<div class="ttc" id="alapic_8c_html_adc4a14c073a7427003796cbd9d435758"><div class="ttname"><a href="../../dc/df6/lapic_8c.html#adc4a14c073a7427003796cbd9d435758">BCAST</a></div><div class="ttdeci">#define BCAST</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df6/lapic_8c_source.html#l00028">lapic.c:28</a></div></div>
<div class="ttc" id="alapic_8c_html_ae4ad5e3805ffa2cbe03b65421edd8f99"><div class="ttname"><a href="../../dc/df6/lapic_8c.html#ae4ad5e3805ffa2cbe03b65421edd8f99">ESR</a></div><div class="ttdeci">#define ESR</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df6/lapic_8c_source.html#l00020">lapic.c:20</a></div></div>
<div class="ttc" id="alapic_8c_html_ae6db3be23c343c0823604670010635f7"><div class="ttname"><a href="../../dc/df6/lapic_8c.html#ae6db3be23c343c0823604670010635f7">ICRLO</a></div><div class="ttdeci">#define ICRLO</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df6/lapic_8c_source.html#l00021">lapic.c:21</a></div></div>
<div class="ttc" id="alapic_8c_html_af1d7a14061b402e4718eff6d9ef7ada4"><div class="ttname"><a href="../../dc/df6/lapic_8c.html#af1d7a14061b402e4718eff6d9ef7ada4">TICR</a></div><div class="ttdeci">#define TICR</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df6/lapic_8c_source.html#l00040">lapic.c:40</a></div></div>
<div class="ttc" id="alapic_8c_html_af36821ad7b93ab31dcfaaa25e134fdf0"><div class="ttname"><a href="../../dc/df6/lapic_8c.html#af36821ad7b93ab31dcfaaa25e134fdf0">PERIODIC</a></div><div class="ttdeci">#define PERIODIC</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df6/lapic_8c_source.html#l00034">lapic.c:34</a></div></div>
<div class="ttc" id="atraps_8h_html_a0e95f09d5e5653670eede10844d73875"><div class="ttname"><a href="../../d5/d98/traps_8h.html#a0e95f09d5e5653670eede10844d73875">IRQ_SPURIOUS</a></div><div class="ttdeci">#define IRQ_SPURIOUS</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d98/traps_8h_source.html#l00037">traps.h:37</a></div></div>
<div class="ttc" id="atraps_8h_html_a7546e682900c4558b1f8c4f0633bc7b9"><div class="ttname"><a href="../../d5/d98/traps_8h.html#a7546e682900c4558b1f8c4f0633bc7b9">IRQ_ERROR</a></div><div class="ttdeci">#define IRQ_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d98/traps_8h_source.html#l00036">traps.h:36</a></div></div>
<div class="ttc" id="atraps_8h_html_a85fc66e3edd4ed6a4db6e455feaba8ca"><div class="ttname"><a href="../../d5/d98/traps_8h.html#a85fc66e3edd4ed6a4db6e455feaba8ca">IRQ_TIMER</a></div><div class="ttdeci">#define IRQ_TIMER</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d98/traps_8h_source.html#l00032">traps.h:32</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae46b07b96e4429fa85738ac2fe1768a0" name="ae46b07b96e4429fa85738ac2fe1768a0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae46b07b96e4429fa85738ac2fe1768a0">&#9670;&#160;</a></span>lapicstartap()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lapicstartap </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d49/types_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a>&#160;</td>
          <td class="paramname"><em>apicid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/d49/types_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td>
          <td class="paramname"><em>addr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/df6/lapic_8c_source.html#l00129">129</a> of file <a class="el" href="../../dc/df6/lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  130</span>{</div>
<div class="line"><span class="lineno">  131</span>  <span class="keywordtype">int</span> i;</div>
<div class="line"><span class="lineno">  132</span>  <a class="code hl_typedef" href="../../d9/d49/types_8h.html#ab95f123a6c9bcfee6a343170ef8c5f69">ushort</a> *wrv;</div>
<div class="line"><span class="lineno">  133</span> </div>
<div class="line"><span class="lineno">  134</span>  <span class="comment">// &quot;The BSP must initialize CMOS shutdown code to 0AH</span></div>
<div class="line"><span class="lineno">  135</span>  <span class="comment">// and the warm reset vector (DWORD based at 40:67) to point at</span></div>
<div class="line"><span class="lineno">  136</span>  <span class="comment">// the AP startup code prior to the [universal startup algorithm].&quot;</span></div>
<div class="line"><span class="lineno">  137</span>  outb(<a class="code hl_define" href="../../dc/df6/lapic_8c.html#a6ef3cdae7f581dab8f55d73dfa7a49bb">CMOS_PORT</a>, 0xF);  <span class="comment">// offset 0xF is shutdown code</span></div>
<div class="line"><span class="lineno">  138</span>  outb(<a class="code hl_define" href="../../dc/df6/lapic_8c.html#a6ef3cdae7f581dab8f55d73dfa7a49bb">CMOS_PORT</a>+1, 0x0A);</div>
<div class="line"><span class="lineno">  139</span>  wrv = (<a class="code hl_typedef" href="../../d9/d49/types_8h.html#ab95f123a6c9bcfee6a343170ef8c5f69">ushort</a>*)<a class="code hl_define" href="../../d8/da9/memlayout_8h.html#aefd5e8b62c49bba2cf20309c7dd174e2">P2V</a>((0x40&lt;&lt;4 | 0x67));  <span class="comment">// Warm reset vector</span></div>
<div class="line"><span class="lineno">  140</span>  wrv[0] = 0;</div>
<div class="line"><span class="lineno">  141</span>  wrv[1] = addr &gt;&gt; 4;</div>
<div class="line"><span class="lineno">  142</span> </div>
<div class="line"><span class="lineno">  143</span>  <span class="comment">// &quot;Universal startup algorithm.&quot;</span></div>
<div class="line"><span class="lineno">  144</span>  <span class="comment">// Send INIT (level-triggered) interrupt to reset other CPU.</span></div>
<div class="line"><span class="lineno">  145</span>  lapicw(<a class="code hl_define" href="../../dc/df6/lapic_8c.html#a9382474befd66e12c502eb221e4f9a0d">ICRHI</a>, apicid&lt;&lt;24);</div>
<div class="line"><span class="lineno">  146</span>  lapicw(<a class="code hl_define" href="../../dc/df6/lapic_8c.html#ae6db3be23c343c0823604670010635f7">ICRLO</a>, <a class="code hl_define" href="../../dc/df6/lapic_8c.html#ab5889105dcd019008c9448dff61323f6">INIT</a> | <a class="code hl_define" href="../../dc/df6/lapic_8c.html#a73f717b7aae31163c2a85f67883bf0ed">LEVEL</a> | <a class="code hl_define" href="../../dc/df6/lapic_8c.html#af343b20373ba49a92fce523e948f2ab3">ASSERT</a>);</div>
<div class="line"><span class="lineno">  147</span>  <a class="code hl_function" href="../../dc/df6/lapic_8c.html#ae0ac6441d1d76d8ef821cdbbc6b6fc2f">microdelay</a>(200);</div>
<div class="line"><span class="lineno">  148</span>  lapicw(<a class="code hl_define" href="../../dc/df6/lapic_8c.html#ae6db3be23c343c0823604670010635f7">ICRLO</a>, <a class="code hl_define" href="../../dc/df6/lapic_8c.html#ab5889105dcd019008c9448dff61323f6">INIT</a> | <a class="code hl_define" href="../../dc/df6/lapic_8c.html#a73f717b7aae31163c2a85f67883bf0ed">LEVEL</a>);</div>
<div class="line"><span class="lineno">  149</span>  <a class="code hl_function" href="../../dc/df6/lapic_8c.html#ae0ac6441d1d76d8ef821cdbbc6b6fc2f">microdelay</a>(100);    <span class="comment">// should be 10ms, but too slow in Bochs!</span></div>
<div class="line"><span class="lineno">  150</span> </div>
<div class="line"><span class="lineno">  151</span>  <span class="comment">// Send startup IPI (twice!) to enter code.</span></div>
<div class="line"><span class="lineno">  152</span>  <span class="comment">// Regular hardware is supposed to only accept a STARTUP</span></div>
<div class="line"><span class="lineno">  153</span>  <span class="comment">// when it is in the halted state due to an INIT.  So the second</span></div>
<div class="line"><span class="lineno">  154</span>  <span class="comment">// should be ignored, but it is part of the official Intel algorithm.</span></div>
<div class="line"><span class="lineno">  155</span>  <span class="comment">// Bochs complains about the second one.  Too bad for Bochs.</span></div>
<div class="line"><span class="lineno">  156</span>  <span class="keywordflow">for</span>(i = 0; i &lt; 2; i++){</div>
<div class="line"><span class="lineno">  157</span>    lapicw(<a class="code hl_define" href="../../dc/df6/lapic_8c.html#a9382474befd66e12c502eb221e4f9a0d">ICRHI</a>, apicid&lt;&lt;24);</div>
<div class="line"><span class="lineno">  158</span>    lapicw(<a class="code hl_define" href="../../dc/df6/lapic_8c.html#ae6db3be23c343c0823604670010635f7">ICRLO</a>, <a class="code hl_define" href="../../dc/df6/lapic_8c.html#ad0dd8aa1d9d769cf15609ca108af4af9">STARTUP</a> | (addr&gt;&gt;12));</div>
<div class="line"><span class="lineno">  159</span>    <a class="code hl_function" href="../../dc/df6/lapic_8c.html#ae0ac6441d1d76d8ef821cdbbc6b6fc2f">microdelay</a>(200);</div>
<div class="line"><span class="lineno">  160</span>  }</div>
<div class="line"><span class="lineno">  161</span>}</div>
<div class="ttc" id="alapic_8c_html_a6ef3cdae7f581dab8f55d73dfa7a49bb"><div class="ttname"><a href="../../dc/df6/lapic_8c.html#a6ef3cdae7f581dab8f55d73dfa7a49bb">CMOS_PORT</a></div><div class="ttdeci">#define CMOS_PORT</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df6/lapic_8c_source.html#l00123">lapic.c:123</a></div></div>
<div class="ttc" id="alapic_8c_html_ad0dd8aa1d9d769cf15609ca108af4af9"><div class="ttname"><a href="../../dc/df6/lapic_8c.html#ad0dd8aa1d9d769cf15609ca108af4af9">STARTUP</a></div><div class="ttdeci">#define STARTUP</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df6/lapic_8c_source.html#l00023">lapic.c:23</a></div></div>
<div class="ttc" id="alapic_8c_html_ae0ac6441d1d76d8ef821cdbbc6b6fc2f"><div class="ttname"><a href="../../dc/df6/lapic_8c.html#ae0ac6441d1d76d8ef821cdbbc6b6fc2f">microdelay</a></div><div class="ttdeci">void microdelay(int us)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df6/lapic_8c_source.html#l00119">lapic.c:119</a></div></div>
<div class="ttc" id="alapic_8c_html_af343b20373ba49a92fce523e948f2ab3"><div class="ttname"><a href="../../dc/df6/lapic_8c.html#af343b20373ba49a92fce523e948f2ab3">ASSERT</a></div><div class="ttdeci">#define ASSERT</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df6/lapic_8c_source.html#l00025">lapic.c:25</a></div></div>
<div class="ttc" id="atypes_8h_html_ab95f123a6c9bcfee6a343170ef8c5f69"><div class="ttname"><a href="../../d9/d49/types_8h.html#ab95f123a6c9bcfee6a343170ef8c5f69">ushort</a></div><div class="ttdeci">unsigned short ushort</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d49/types_8h_source.html#l00002">types.h:2</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_ae46b07b96e4429fa85738ac2fe1768a0_cgraph.png" border="0" usemap="#ad5/d64/defs_8h_ae46b07b96e4429fa85738ac2fe1768a0_cgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_ae46b07b96e4429fa85738ac2fe1768a0_cgraph" id="ad5/d64/defs_8h_ae46b07b96e4429fa85738ac2fe1768a0_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,95,31"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#ae0ac6441d1d76d8ef821cdbbc6b6fc2f" title=" " alt="" coords="143,5,228,31"/>
</map>
</div>

</div>
</div>
<a id="a8a149272578e00e0ce70480004640679" name="a8a149272578e00e0ce70480004640679"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8a149272578e00e0ce70480004640679">&#9670;&#160;</a></span>loaduvm()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int loaduvm </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d49/types_8h.html#ac131849542282b2c95dfeaf1f26dc010">pde_t</a> *&#160;</td>
          <td class="paramname"><em>pgdir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d0/df8/structinode.html">inode</a> *&#160;</td>
          <td class="paramname"><em>ip</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/d49/types_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/d49/types_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td>
          <td class="paramname"><em>sz</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/de9/vm_8c_source.html#l00198">198</a> of file <a class="el" href="../../de/de9/vm_8c_source.html">vm.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  199</span>{</div>
<div class="line"><span class="lineno">  200</span>  <a class="code hl_typedef" href="../../d9/d49/types_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> i, pa, n;</div>
<div class="line"><span class="lineno">  201</span>  <a class="code hl_typedef" href="../../d2/df1/mmu_8h.html#ab23e75f764f8314a83eaff23508c2ae5">pte_t</a> *pte;</div>
<div class="line"><span class="lineno">  202</span> </div>
<div class="line"><span class="lineno">  203</span>  <span class="keywordflow">if</span>((<a class="code hl_typedef" href="../../d9/d49/types_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>) addr % <a class="code hl_define" href="../../d2/df1/mmu_8h.html#a5f96cb6ae6670e023c407cc2f77e1704">PGSIZE</a> != 0)</div>
<div class="line"><span class="lineno">  204</span>    <a class="code hl_function" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a">panic</a>(<span class="stringliteral">&quot;loaduvm: addr must be page aligned&quot;</span>);</div>
<div class="line"><span class="lineno">  205</span>  <span class="keywordflow">for</span>(i = 0; i &lt; sz; i += <a class="code hl_define" href="../../d2/df1/mmu_8h.html#a5f96cb6ae6670e023c407cc2f77e1704">PGSIZE</a>){</div>
<div class="line"><span class="lineno">  206</span>    <span class="keywordflow">if</span>((pte = walkpgdir(pgdir, addr+i, 0)) == 0)</div>
<div class="line"><span class="lineno">  207</span>      <a class="code hl_function" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a">panic</a>(<span class="stringliteral">&quot;loaduvm: address should exist&quot;</span>);</div>
<div class="line"><span class="lineno">  208</span>    pa = <a class="code hl_define" href="../../d2/df1/mmu_8h.html#a74b24f9b091875a5313370892e3f37a5">PTE_ADDR</a>(*pte);</div>
<div class="line"><span class="lineno">  209</span>    <span class="keywordflow">if</span>(sz - i &lt; <a class="code hl_define" href="../../d2/df1/mmu_8h.html#a5f96cb6ae6670e023c407cc2f77e1704">PGSIZE</a>)</div>
<div class="line"><span class="lineno">  210</span>      n = sz - i;</div>
<div class="line"><span class="lineno">  211</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  212</span>      n = <a class="code hl_define" href="../../d2/df1/mmu_8h.html#a5f96cb6ae6670e023c407cc2f77e1704">PGSIZE</a>;</div>
<div class="line"><span class="lineno">  213</span>    <span class="keywordflow">if</span>(<a class="code hl_function" href="../../d5/d64/defs_8h.html#a2415273b06f31f0f2587b7325588a7e4">readi</a>(ip, <a class="code hl_define" href="../../d8/da9/memlayout_8h.html#aefd5e8b62c49bba2cf20309c7dd174e2">P2V</a>(pa), offset+i, n) != n)</div>
<div class="line"><span class="lineno">  214</span>      <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  215</span>  }</div>
<div class="line"><span class="lineno">  216</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  217</span>}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_a8a149272578e00e0ce70480004640679_cgraph.png" border="0" usemap="#ad5/d64/defs_8h_a8a149272578e00e0ce70480004640679_cgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_a8a149272578e00e0ce70480004640679_cgraph" id="ad5/d64/defs_8h_a8a149272578e00e0ce70480004640679_cgraph">
<area shape="rect" title=" " alt="" coords="5,555,76,580"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="943,631,997,656"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a3aba1fa9f6789d09356aec5b96d91fa8" title=" " alt="" coords="124,428,175,454"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="1083,582,1142,607"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="1680,423,1739,448"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="1067,631,1159,656"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="1208,304,1272,330"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="1208,580,1272,606"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="1320,304,1412,330"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="1335,580,1397,606"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="1571,788,1632,814"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="1460,682,1523,707"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="1463,758,1519,783"/>
<area shape="rect" href="../../dc/de6/bio_8c.html#a30b8d2ef2300ed8e3d879a428fe39898" title=" " alt="" coords="223,454,277,479"/>
<area shape="rect" href="../../d1/db0/string_8c.html#a07f97e2ed1ce37955192d52de8f4911f" title=" " alt="" coords="427,378,509,403"/>
<area shape="rect" href="../../dc/de6/bio_8c.html#ab5335aeb503731104314321a78a6d727" title=" " alt="" coords="803,352,861,378"/>
<area shape="rect" href="../../da/d9b/memide_8c.html#a7f36b008f02088c86f76e98e05b55af5" title=" " alt="" coords="325,479,379,504"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#a6fdbe54cbecd8fc67d74793b27adcf05" title=" " alt="" coords="1065,379,1160,404"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ae70cc0370342e46f6db3bec367232457" title=" " alt="" coords="441,758,495,783"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a41af0935f3989aae450cf8988cd9c3a9" title=" " alt="" coords="1333,834,1399,859"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad788da91743c333b5bed7c4a0dd12365" title=" " alt="" coords="557,960,615,986"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a9fa00b0be5d3c4781048861e2506eb63" title=" " alt="" coords="663,960,741,986"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a1d9e7047d3dfb57809a2541d8387705e" title=" " alt="" coords="803,1087,861,1112"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a02ca0670bc1fe12e38453082631ff360" title=" " alt="" coords="789,884,875,910"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a87c90f0ab2a1b11c2b55f4e483bb8493" title=" " alt="" coords="789,986,875,1011"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#aa997067c2c9bfef15af6fa0a10c20f4a" title=" " alt="" coords="923,327,1017,352"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a4a34d9f03e436cfa09b88f735f6ee952" title=" " alt="" coords="1079,330,1146,355"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_a8a149272578e00e0ce70480004640679_icgraph.png" border="0" usemap="#ad5/d64/defs_8h_a8a149272578e00e0ce70480004640679_icgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_a8a149272578e00e0ce70480004640679_icgraph" id="ad5/d64/defs_8h_a8a149272578e00e0ce70480004640679_icgraph">
<area shape="rect" title=" " alt="" coords="329,104,400,129"/>
<area shape="rect" href="../../df/dc9/exec_8c.html#ace32454ed0d37834dcb1cb4f8b727e6e" title=" " alt="" coords="231,104,281,129"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#ac5b5d4517586be6396b4f3b37445945a" title=" " alt="" coords="104,5,183,31"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a6f94e3b215d069b5419e87bafe80799a" title=" " alt="" coords="107,55,179,80"/>
<area shape="rect" href="../../d8/d60/init_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title=" " alt="" coords="118,104,169,129"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#aedbeff6afe5d4e22330c7e6b5e6df893" title=" " alt="" coords="111,177,176,203"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#aeaa813ddeb6a5fac3c45714c7351c526" title=" " alt="" coords="104,227,183,252"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="5,31,56,56"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title=" " alt="" coords="5,177,56,203"/>
</map>
</div>

</div>
</div>
<a id="a270d0050dc50965f4f851717841ad33c" name="a270d0050dc50965f4f851717841ad33c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a270d0050dc50965f4f851717841ad33c">&#9670;&#160;</a></span>log_write()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void log_write </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d9/dd0/structbuf.html">buf</a> *&#160;</td>
          <td class="paramname"><em>b</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/df8/log_8c_source.html#l00214">214</a> of file <a class="el" href="../../d7/df8/log_8c_source.html">log.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  215</span>{</div>
<div class="line"><span class="lineno">  216</span>  <span class="keywordtype">int</span> i;</div>
<div class="line"><span class="lineno">  217</span> </div>
<div class="line"><span class="lineno">  218</span>  <span class="keywordflow">if</span> (<a class="code hl_struct" href="../../d0/d4a/structlog.html">log</a>.<a class="code hl_variable" href="../../d0/d4a/structlog.html#a7808516ed2f708dcb13912b1e8fc20d9">lh</a>.<a class="code hl_variable" href="../../d4/d6c/structlogheader.html#a50b276b70d44ae77497ef1d71d182875">n</a> &gt;= <a class="code hl_define" href="../../d5/d33/param_8h.html#acc7694167c7840a913939a1b90808b4c">LOGSIZE</a> || <a class="code hl_struct" href="../../d0/d4a/structlog.html">log</a>.<a class="code hl_variable" href="../../d0/d4a/structlog.html#a7808516ed2f708dcb13912b1e8fc20d9">lh</a>.<a class="code hl_variable" href="../../d4/d6c/structlogheader.html#a50b276b70d44ae77497ef1d71d182875">n</a> &gt;= <a class="code hl_struct" href="../../d0/d4a/structlog.html">log</a>.<a class="code hl_variable" href="../../d0/d4a/structlog.html#a2257e716d4b77efd0524286cf5772a41">size</a> - 1)</div>
<div class="line"><span class="lineno">  219</span>    <a class="code hl_function" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a">panic</a>(<span class="stringliteral">&quot;too big a transaction&quot;</span>);</div>
<div class="line"><span class="lineno">  220</span>  <span class="keywordflow">if</span> (<a class="code hl_struct" href="../../d0/d4a/structlog.html">log</a>.<a class="code hl_variable" href="../../d0/d4a/structlog.html#addfc1fc09a124978bd7e2a23a19d733d">outstanding</a> &lt; 1)</div>
<div class="line"><span class="lineno">  221</span>    <a class="code hl_function" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a">panic</a>(<span class="stringliteral">&quot;log_write outside of trans&quot;</span>);</div>
<div class="line"><span class="lineno">  222</span> </div>
<div class="line"><span class="lineno">  223</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#afe4ef8638f1ecb962a6e67fb086ee3b8">acquire</a>(&amp;<a class="code hl_struct" href="../../d0/d4a/structlog.html">log</a>.<a class="code hl_variable" href="../../d0/d4a/structlog.html#a980a1d1aa9c60af7a82f297f8ab54d2e">lock</a>);</div>
<div class="line"><span class="lineno">  224</span>  <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code hl_struct" href="../../d0/d4a/structlog.html">log</a>.<a class="code hl_variable" href="../../d0/d4a/structlog.html#a7808516ed2f708dcb13912b1e8fc20d9">lh</a>.<a class="code hl_variable" href="../../d4/d6c/structlogheader.html#a50b276b70d44ae77497ef1d71d182875">n</a>; i++) {</div>
<div class="line"><span class="lineno">  225</span>    <span class="keywordflow">if</span> (<a class="code hl_struct" href="../../d0/d4a/structlog.html">log</a>.<a class="code hl_variable" href="../../d0/d4a/structlog.html#a7808516ed2f708dcb13912b1e8fc20d9">lh</a>.<a class="code hl_variable" href="../../d4/d6c/structlogheader.html#a020db7fe04c7ce6b8f4aee2092576c2c">block</a>[i] == b-&gt;<a class="code hl_variable" href="../../d9/dd0/structbuf.html#a756b2bcc88008bef7f21d688aa4a7a48">blockno</a>)   <span class="comment">// log absorbtion</span></div>
<div class="line"><span class="lineno">  226</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  227</span>  }</div>
<div class="line"><span class="lineno">  228</span>  <a class="code hl_struct" href="../../d0/d4a/structlog.html">log</a>.<a class="code hl_variable" href="../../d0/d4a/structlog.html#a7808516ed2f708dcb13912b1e8fc20d9">lh</a>.<a class="code hl_variable" href="../../d4/d6c/structlogheader.html#a020db7fe04c7ce6b8f4aee2092576c2c">block</a>[i] = b-&gt;<a class="code hl_variable" href="../../d9/dd0/structbuf.html#a756b2bcc88008bef7f21d688aa4a7a48">blockno</a>;</div>
<div class="line"><span class="lineno">  229</span>  <span class="keywordflow">if</span> (i == <a class="code hl_struct" href="../../d0/d4a/structlog.html">log</a>.<a class="code hl_variable" href="../../d0/d4a/structlog.html#a7808516ed2f708dcb13912b1e8fc20d9">lh</a>.<a class="code hl_variable" href="../../d4/d6c/structlogheader.html#a50b276b70d44ae77497ef1d71d182875">n</a>)</div>
<div class="line"><span class="lineno">  230</span>    <a class="code hl_struct" href="../../d0/d4a/structlog.html">log</a>.<a class="code hl_variable" href="../../d0/d4a/structlog.html#a7808516ed2f708dcb13912b1e8fc20d9">lh</a>.<a class="code hl_variable" href="../../d4/d6c/structlogheader.html#a50b276b70d44ae77497ef1d71d182875">n</a>++;</div>
<div class="line"><span class="lineno">  231</span>  b-&gt;<a class="code hl_variable" href="../../d9/dd0/structbuf.html#ae7d6b6c34fdeadb38970efd0554aa1a9">flags</a> |= <a class="code hl_define" href="../../d6/d6d/buf_8h.html#adc32011df267adb9740bcd0abf0f0663">B_DIRTY</a>; <span class="comment">// prevent eviction</span></div>
<div class="line"><span class="lineno">  232</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#a4f8616948f3dbce65671f666eed1d669">release</a>(&amp;<a class="code hl_struct" href="../../d0/d4a/structlog.html">log</a>.<a class="code hl_variable" href="../../d0/d4a/structlog.html#a980a1d1aa9c60af7a82f297f8ab54d2e">lock</a>);</div>
<div class="line"><span class="lineno">  233</span>}</div>
<div class="ttc" id="astructlogheader_html_a020db7fe04c7ce6b8f4aee2092576c2c"><div class="ttname"><a href="../../d4/d6c/structlogheader.html#a020db7fe04c7ce6b8f4aee2092576c2c">logheader::block</a></div><div class="ttdeci">int block[LOGSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/df8/log_8c_source.html#l00036">log.c:36</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_a270d0050dc50965f4f851717841ad33c_cgraph.png" border="0" usemap="#ad5/d64/defs_8h_a270d0050dc50965f4f851717841ad33c_cgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_a270d0050dc50965f4f851717841ad33c_cgraph" id="ad5/d64/defs_8h_a270d0050dc50965f4f851717841ad33c_cgraph">
<area shape="rect" title=" " alt="" coords="5,43,80,69"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="128,195,192,221"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="600,94,653,119"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="841,143,905,169"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="240,297,332,322"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="255,346,317,371"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="491,234,552,259"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="380,246,443,271"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="953,221,1009,246"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="718,194,777,219"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="718,143,777,169"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="701,94,793,119"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_a270d0050dc50965f4f851717841ad33c_icgraph.png" border="0" usemap="#ad5/d64/defs_8h_a270d0050dc50965f4f851717841ad33c_icgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_a270d0050dc50965f4f851717841ad33c_icgraph" id="ad5/d64/defs_8h_a270d0050dc50965f4f851717841ad33c_icgraph">
<area shape="rect" title=" " alt="" coords="735,492,809,517"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#af95049367381647bc9487af49724b869" title=" " alt="" coords="629,441,681,467"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a7220afa8e5f4bea540eb95879ea7df6e" title=" " alt="" coords="623,543,687,568"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a15858f4d8a4cc1def3d84d03c312836b" title=" " alt="" coords="521,492,575,517"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#ab3c447f135c68e4c3c1f8d5866f6e77b" title=" " alt="" coords="527,745,569,771"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a759600870314007ac558871239122fb7" title=" " alt="" coords="267,669,337,695"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#ae1e58ee11d41f643929520d8c1640da7" title=" " alt="" coords="260,543,344,568"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a69a135a0e8a06d9f306d77ebc0c1f7a0" title=" " alt="" coords="405,593,461,619"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#aaf98ef7cdde3a0dfb2e49919de3298b1" title=" " alt="" coords="281,872,323,897"/>
<area shape="rect" href="../../d6/d13/file_8c.html#ae557c81ab89c24219146144bb6adaa2c" title=" " alt="" coords="397,897,468,923"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a207b3008bae35596c55ec7c4fc6875eb" title=" " alt="" coords="392,745,473,771"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#ad1c5f8693cb35b9605fee09eebdda640" title=" " alt="" coords="263,771,341,796"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a77cc2edce6e78f22dd9eb377462762f2" title=" " alt="" coords="131,5,200,31"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#ac5b5d4517586be6396b4f3b37445945a" title=" " alt="" coords="126,55,205,80"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#aa0d46fcb43667c805b84ea7e1ff6100a" title=" " alt="" coords="139,104,192,129"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a86fe524d99d69c18a335512cf3405b31" title=" " alt="" coords="137,153,193,179"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a57e55b2d0161d62bb99765ca3de43e35" title=" " alt="" coords="132,203,199,228"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a0b0ff95e564df3c3e8fc977226b75de7" title=" " alt="" coords="133,252,198,277"/>
<area shape="rect" href="../../d1/d8f/cat_8c.html#a90a33618884bcf5e892297879bc016ff" title=" " alt="" coords="145,353,185,379"/>
<area shape="rect" href="../../d1/d8f/cat_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="13,328,63,353"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a5a12affe4fdfaa172d85da9a6adf98d2" title=" " alt="" coords="126,403,205,428"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a425a0efe4f459decf4b5ea14517ab3cf" title=" " alt="" coords="119,452,212,477"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#aedd6d3f148dd5c99b47900215c1ac43f" title=" " alt="" coords="139,501,192,527"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a8db9f9a2634bab29096bab0b8bc6945c" title=" " alt="" coords="136,551,195,576"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a6f94e3b215d069b5419e87bafe80799a" title=" " alt="" coords="129,600,201,625"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a8faab06cc4d48335076b368f02709ee2" title=" " alt="" coords="122,649,209,675"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a330ed2370fe27045b8bec1eb0bd7818f" title=" " alt="" coords="132,699,199,724"/>
<area shape="rect" href="../../d5/de1/forktest_8c.html#a0ef8ccf57bc8c491407ec513b234f83c" title=" " alt="" coords="132,748,199,773"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a77a4432bc67dfb513f1c1d698c2c4ea6" title=" " alt="" coords="131,797,199,823"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#abf4af50e65630225208fef177e267efb" title=" " alt="" coords="131,847,200,872"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#ac9fe56d8f6e4ed1c9677b06cb7b325e6" title=" " alt="" coords="133,896,198,921"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a267227083b00d0cc3141b34f5152ae04" title=" " alt="" coords="145,945,185,971"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a4eeee588d4689a58fc140a7d5d7b0608" title=" " alt="" coords="133,995,197,1020"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a1740f29f4ce6d3060fd79a9312edc315" title=" " alt="" coords="127,1044,203,1069"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#aa1c6e6e76813ccb29a29bb119dba668a" title=" " alt="" coords="140,1093,191,1119"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a3208ed001a225f5d9ea3fb37f46810c7" title=" " alt="" coords="119,1143,212,1168"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#ae7c61791dd2cfb8ad59b4c6e87685c07" title=" " alt="" coords="129,1192,201,1217"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#ada38fdb2913f040f6eeb6189eeb42d32" title=" " alt="" coords="139,1293,192,1319"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#aedbeff6afe5d4e22330c7e6b5e6df893" title=" " alt="" coords="5,1268,71,1293"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a16ae754fb9c5622d44d0c3ce62ad7c49" title=" " alt="" coords="139,1343,192,1368"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a6b22568d42b584ed4b0dc4e2b0677013" title=" " alt="" coords="138,1392,193,1417"/>
<area shape="rect" href="../../d7/d1f/mkfs_8c.html#a22ea835ad23cd716a962f30e4882ee80" title=" " alt="" coords="140,1441,191,1467"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a06636ed0cda58c748d68e82d33d1afce" title=" " alt="" coords="131,1491,200,1516"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a02e1ca3f4db5f4bf8a683a0b7c18cc43" title=" " alt="" coords="129,1540,201,1565"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a5d39024e15998d6a6865f4cd0f69738b" title=" " alt="" coords="137,1589,194,1615"/>
<area shape="rect" href="../../dd/d35/sysproc_8c.html#aee72faa31a0c32b410aba558ef1d59f2" title=" " alt="" coords="130,1639,201,1664"/>
<area shape="rect" href="../../dc/d6f/trap_8c.html#a372d166e36c086c91e5f5d81e5fead3a" title=" " alt="" coords="143,1688,187,1713"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a6888f9f6d973f81f73091d1530ad212b" title=" " alt="" coords="146,1737,185,1763"/>
<area shape="rect" href="../../d6/d13/file_8c.html#ab8de757a0a9f58dcc6511ea5e46ebb88" title=" " alt="" coords="399,441,466,467"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a687d939a9e4792af15db96f2c2f34378" title=" " alt="" coords="263,441,341,467"/>
</map>
</div>

</div>
</div>
<a id="acdb4d3f48d2fb0a834722b1107d2b284" name="acdb4d3f48d2fb0a834722b1107d2b284"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acdb4d3f48d2fb0a834722b1107d2b284">&#9670;&#160;</a></span>memcmp()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int memcmp </td>
          <td>(</td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>v1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>v2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/d49/types_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td>
          <td class="paramname"><em>n</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/db0/string_8c_source.html#l00016">16</a> of file <a class="el" href="../../d1/db0/string_8c_source.html">string.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   17</span>{</div>
<div class="line"><span class="lineno">   18</span>  <span class="keyword">const</span> <a class="code hl_typedef" href="../../d9/d49/types_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a> *s1, *s2;</div>
<div class="line"><span class="lineno">   19</span> </div>
<div class="line"><span class="lineno">   20</span>  s1 = v1;</div>
<div class="line"><span class="lineno">   21</span>  s2 = v2;</div>
<div class="line"><span class="lineno">   22</span>  <span class="keywordflow">while</span>(n-- &gt; 0){</div>
<div class="line"><span class="lineno">   23</span>    <span class="keywordflow">if</span>(*s1 != *s2)</div>
<div class="line"><span class="lineno">   24</span>      <span class="keywordflow">return</span> *s1 - *s2;</div>
<div class="line"><span class="lineno">   25</span>    s1++, s2++;</div>
<div class="line"><span class="lineno">   26</span>  }</div>
<div class="line"><span class="lineno">   27</span> </div>
<div class="line"><span class="lineno">   28</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">   29</span>}</div>
<div class="ttc" id="atypes_8h_html_a65f85814a8290f9797005d3b28e7e5fc"><div class="ttname"><a href="../../d9/d49/types_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a></div><div class="ttdeci">unsigned char uchar</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d49/types_8h_source.html#l00003">types.h:3</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_acdb4d3f48d2fb0a834722b1107d2b284_icgraph.png" border="0" usemap="#ad5/d64/defs_8h_acdb4d3f48d2fb0a834722b1107d2b284_icgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_acdb4d3f48d2fb0a834722b1107d2b284_icgraph" id="ad5/d64/defs_8h_acdb4d3f48d2fb0a834722b1107d2b284_icgraph">
<area shape="rect" title=" " alt="" coords="132,5,208,31"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a7247ece9501e31d62cffad46ec33d7af" title=" " alt="" coords="5,5,84,31"/>
</map>
</div>

</div>
</div>
<a id="ac152fff34fe03e497d35b1d4c47f1445" name="ac152fff34fe03e497d35b1d4c47f1445"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac152fff34fe03e497d35b1d4c47f1445">&#9670;&#160;</a></span>memmove()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void * memmove </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>dst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/d49/types_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td>
          <td class="paramname"><em>n</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/db0/string_8c_source.html#l00032">32</a> of file <a class="el" href="../../d1/db0/string_8c_source.html">string.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   33</span>{</div>
<div class="line"><span class="lineno">   34</span>  <span class="keyword">const</span> <span class="keywordtype">char</span> *s;</div>
<div class="line"><span class="lineno">   35</span>  <span class="keywordtype">char</span> *d;</div>
<div class="line"><span class="lineno">   36</span> </div>
<div class="line"><span class="lineno">   37</span>  s = src;</div>
<div class="line"><span class="lineno">   38</span>  d = dst;</div>
<div class="line"><span class="lineno">   39</span>  <span class="keywordflow">if</span>(s &lt; d &amp;&amp; s + n &gt; d){</div>
<div class="line"><span class="lineno">   40</span>    s += n;</div>
<div class="line"><span class="lineno">   41</span>    d += n;</div>
<div class="line"><span class="lineno">   42</span>    <span class="keywordflow">while</span>(n-- &gt; 0)</div>
<div class="line"><span class="lineno">   43</span>      *--d = *--s;</div>
<div class="line"><span class="lineno">   44</span>  } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">   45</span>    <span class="keywordflow">while</span>(n-- &gt; 0)</div>
<div class="line"><span class="lineno">   46</span>      *d++ = *s++;</div>
<div class="line"><span class="lineno">   47</span> </div>
<div class="line"><span class="lineno">   48</span>  <span class="keywordflow">return</span> dst;</div>
<div class="line"><span class="lineno">   49</span>}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_ac152fff34fe03e497d35b1d4c47f1445_icgraph.png" border="0" usemap="#ad5/d64/defs_8h_ac152fff34fe03e497d35b1d4c47f1445_icgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_ac152fff34fe03e497d35b1d4c47f1445_icgraph" id="ad5/d64/defs_8h_ac152fff34fe03e497d35b1d4c47f1445_icgraph">
<area shape="rect" title=" " alt="" coords="757,725,840,751"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a532bc3f3e39942c20a471a11cff1a582" title=" " alt="" coords="520,447,588,472"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a1b57bfa0091c9be3ccc16dbb85ce3acf" title=" " alt="" coords="397,395,472,420"/>
<area shape="rect" href="../../de/d77/ls_8c.html#a15512ff8353c0ce78158e6c9cdf2a24c" title=" " alt="" coords="636,497,709,523"/>
<area shape="rect" href="../../de/d77/ls_8c.html#a0dd2caa6531a27dcd755c46e814b63af" title=" " alt="" coords="535,524,573,549"/>
<area shape="rect" href="../../d5/dcb/grep_8c.html#aefb6587871b683544f860d4e2b518718" title=" " alt="" coords="649,599,696,624"/>
<area shape="rect" href="../../da/d9b/memide_8c.html#a7f36b008f02088c86f76e98e05b55af5" title=" " alt="" coords="646,751,699,776"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#aed28187406d84a3aa71f10c6235a03ec" title=" " alt="" coords="287,699,337,724"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a7220afa8e5f4bea540eb95879ea7df6e" title=" " alt="" coords="403,901,467,927"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a15858f4d8a4cc1def3d84d03c312836b" title=" " alt="" coords="285,849,339,875"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a3aba1fa9f6789d09356aec5b96d91fa8" title=" " alt="" coords="409,648,460,673"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#aff0080b2133027be2e525ca088b40e78" title=" " alt="" coords="404,1027,465,1052"/>
<area shape="rect" href="../../de/de9/vm_8c.html#ac96c231d4053eaf4322c27d1f2cd9d49" title=" " alt="" coords="641,1003,705,1028"/>
<area shape="rect" href="../../d7/d1f/mkfs_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="647,1052,698,1077"/>
<area shape="rect" href="../../d1/db0/string_8c.html#abe8c241a3db904f06adffc49a96f6fc7" title=" " alt="" coords="637,1101,709,1127"/>
<area shape="rect" href="../../df/dc9/exec_8c.html#ace32454ed0d37834dcb1cb4f8b727e6e" title=" " alt="" coords="154,452,205,477"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#ac5b5d4517586be6396b4f3b37445945a" title=" " alt="" coords="5,243,84,268"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a6f94e3b215d069b5419e87bafe80799a" title=" " alt="" coords="9,551,81,576"/>
<area shape="rect" href="../../d8/d60/init_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title=" " alt="" coords="19,452,70,477"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#aedbeff6afe5d4e22330c7e6b5e6df893" title=" " alt="" coords="12,403,77,428"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#aeaa813ddeb6a5fac3c45714c7351c526" title=" " alt="" coords="5,501,84,527"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#acd2e1ded4bb6fce4500438bf928330f4" title=" " alt="" coords="290,231,334,256"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a5a12affe4fdfaa172d85da9a6adf98d2" title=" " alt="" coords="140,205,219,231"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a425a0efe4f459decf4b5ea14517ab3cf" title=" " alt="" coords="133,255,226,280"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a8faab06cc4d48335076b368f02709ee2" title=" " alt="" coords="136,304,223,329"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a330ed2370fe27045b8bec1eb0bd7818f" title=" " alt="" coords="146,353,213,379"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#a7ae98824a008ffbc5506060227b6faa0" title=" " alt="" coords="154,403,205,428"/>
<area shape="rect" href="../../d5/de1/forktest_8c.html#a0ef8ccf57bc8c491407ec513b234f83c" title=" " alt="" coords="146,5,213,31"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a77a4432bc67dfb513f1c1d698c2c4ea6" title=" " alt="" coords="145,55,213,80"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a1740f29f4ce6d3060fd79a9312edc315" title=" " alt="" coords="141,104,217,129"/>
<area shape="rect" href="../../de/d77/ls_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="409,524,460,549"/>
<area shape="rect" href="../../d5/dcb/grep_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="529,599,579,624"/>
<area shape="rect" href="../../dc/de6/bio_8c.html#a30b8d2ef2300ed8e3d879a428fe39898" title=" " alt="" coords="527,800,581,825"/>
<area shape="rect" href="../../dc/de6/bio_8c.html#a63c899c13b176ddf80064d32225e1298" title=" " alt="" coords="525,751,583,776"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a28ac85a90987662e306ca8efbfe16074" title=" " alt="" coords="133,600,225,625"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a6af7eb39268127d389792cec37785666" title=" " alt="" coords="132,649,227,675"/>
<area shape="rect" href="../../d6/d13/file_8c.html#a1dc8c87c7e48bdaaf98e9c7047928f29" title=" " alt="" coords="147,501,211,527"/>
<area shape="rect" href="../../d6/d13/file_8c.html#afff8e849fa54dea2a5a27dbb97474607" title=" " alt="" coords="149,699,210,724"/>
<area shape="rect" href="../../d6/d13/file_8c.html#ab8de757a0a9f58dcc6511ea5e46ebb88" title=" " alt="" coords="146,800,213,825"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#ad1c5f8693cb35b9605fee09eebdda640" title=" " alt="" coords="140,899,219,924"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a759600870314007ac558871239122fb7" title=" " alt="" coords="9,973,80,999"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a74e45efc661ca17c068bc283b3842e6d" title=" " alt="" coords="140,551,219,576"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#ae1e58ee11d41f643929520d8c1640da7" title=" " alt="" coords="137,849,221,875"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#ab3c447f135c68e4c3c1f8d5866f6e77b" title=" " alt="" coords="291,951,333,976"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a69a135a0e8a06d9f306d77ebc0c1f7a0" title=" " alt="" coords="151,948,207,973"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a5341068f021beac8cf0032b97d231e6f" title=" " alt="" coords="275,748,349,773"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a201acc8337a2893268b61ea5a1ee0d53" title=" " alt="" coords="277,568,347,593"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a301761a27cf266e0bad483272fb31a3c" title=" " alt="" coords="291,1100,333,1125"/>
<area shape="rect" href="../../d7/df8/log_8c.html#ad5e79aaefb91f41b9ef6aeae7ecf4708" title=" " alt="" coords="284,1149,340,1175"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a81c8a6a0cae413bc81aa223f7f7b7205" title=" " alt="" coords="522,1003,586,1028"/>
</map>
</div>

</div>
</div>
<a id="a0098886a849eef10803e9f35ceec61b9" name="a0098886a849eef10803e9f35ceec61b9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0098886a849eef10803e9f35ceec61b9">&#9670;&#160;</a></span>memset()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void * memset </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>dst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/d49/types_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td>
          <td class="paramname"><em>n</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/db0/string_8c_source.html#l00005">5</a> of file <a class="el" href="../../d1/db0/string_8c_source.html">string.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">    6</span>{</div>
<div class="line"><span class="lineno">    7</span>  <span class="keywordflow">if</span> ((<span class="keywordtype">int</span>)dst%4 == 0 &amp;&amp; n%4 == 0){</div>
<div class="line"><span class="lineno">    8</span>    c &amp;= 0xFF;</div>
<div class="line"><span class="lineno">    9</span>    stosl(dst, (c&lt;&lt;24)|(c&lt;&lt;16)|(c&lt;&lt;8)|c, n/4);</div>
<div class="line"><span class="lineno">   10</span>  } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">   11</span>    stosb(dst, c, n);</div>
<div class="line"><span class="lineno">   12</span>  <span class="keywordflow">return</span> dst;</div>
<div class="line"><span class="lineno">   13</span>}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_a0098886a849eef10803e9f35ceec61b9_icgraph.png" border="0" usemap="#ad5/d64/defs_8h_a0098886a849eef10803e9f35ceec61b9_icgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_a0098886a849eef10803e9f35ceec61b9_icgraph" id="ad5/d64/defs_8h_a0098886a849eef10803e9f35ceec61b9_icgraph">
<area shape="rect" title=" " alt="" coords="1343,848,1412,873"/>
<area shape="rect" href="../../de/de9/vm_8c.html#afea0f0a82a9f9c7aae26f90b5e0836c6" title=" " alt="" coords="353,345,428,371"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#aeaa813ddeb6a5fac3c45714c7351c526" title=" " alt="" coords="104,400,183,425"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#a35f9169f2feb5b3752e1e9c839520166" title=" " alt="" coords="1215,117,1290,143"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a86fe524d99d69c18a335512cf3405b31" title=" " alt="" coords="846,1252,902,1277"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a5a12affe4fdfaa172d85da9a6adf98d2" title=" " alt="" coords="483,1273,562,1299"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#a2d41b4e10301b6da6504cb0cc0940eae" title=" " alt="" coords="1215,269,1290,295"/>
<area shape="rect" href="../../de/d77/ls_8c.html#a15512ff8353c0ce78158e6c9cdf2a24c" title=" " alt="" coords="1216,68,1289,93"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a77a4432bc67dfb513f1c1d698c2c4ea6" title=" " alt="" coords="489,1323,557,1348"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#a0ee5a9418fea2f92036f5367a4101fe8" title=" " alt="" coords="961,17,1027,43"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#af95049367381647bc9487af49724b869" title=" " alt="" coords="1227,823,1279,848"/>
<area shape="rect" href="../../de/de9/vm_8c.html#ac96c231d4053eaf4322c27d1f2cd9d49" title=" " alt="" coords="359,472,423,497"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a81c8a6a0cae413bc81aa223f7f7b7205" title=" " alt="" coords="236,421,300,447"/>
<area shape="rect" href="../../d4/def/kalloc_8c.html#aced59ecf8411235f6dffc065236711a5" title=" " alt="" coords="1227,696,1278,721"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a02e1ca3f4db5f4bf8a683a0b7c18cc43" title=" " alt="" coords="487,1224,559,1249"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a1c8a7a02e9391b5cf0984388216695c0" title=" " alt="" coords="835,675,913,700"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#ab7f6ee47c6aa12d1222cd2626afd3af6" title=" " alt="" coords="1221,1177,1285,1203"/>
<area shape="rect" href="../../d7/d1f/mkfs_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="1227,1227,1278,1252"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#a15cd1cb35cba711dc240d28dac0e8d0c" title=" " alt="" coords="1217,1276,1288,1301"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#ab60825940b584b5de3adbbebb268b9ac" title=" " alt="" coords="1217,1325,1289,1351"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#ae1e58ee11d41f643929520d8c1640da7" title=" " alt="" coords="1211,1375,1295,1400"/>
<area shape="rect" href="../../df/dc9/exec_8c.html#ace32454ed0d37834dcb1cb4f8b727e6e" title=" " alt="" coords="243,569,293,595"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a9c16214741f4fcd088e5eea468709328" title=" " alt="" coords="231,256,305,281"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#ac5b5d4517586be6396b4f3b37445945a" title=" " alt="" coords="104,819,183,844"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a6f94e3b215d069b5419e87bafe80799a" title=" " alt="" coords="107,593,179,619"/>
<area shape="rect" href="../../d8/d60/init_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title=" " alt="" coords="118,544,169,569"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#aedbeff6afe5d4e22330c7e6b5e6df893" title=" " alt="" coords="111,667,176,692"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="5,1072,56,1097"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title=" " alt="" coords="5,667,56,692"/>
<area shape="rect" href="../../dd/d35/sysproc_8c.html#ab21d46be776cf6075a997af525a1a628" title=" " alt="" coords="106,256,181,281"/>
<area shape="rect" href="../../de/d77/ls_8c.html#a0dd2caa6531a27dcd755c46e814b63af" title=" " alt="" coords="1099,68,1138,93"/>
<area shape="rect" href="../../de/d77/ls_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="969,68,1019,93"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a1b57bfa0091c9be3ccc16dbb85ce3acf" title=" " alt="" coords="712,573,787,599"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#acd2e1ded4bb6fce4500438bf928330f4" title=" " alt="" coords="619,924,663,949"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a6d3019ea15a9bfdc5131ae97f3623c49" title=" " alt="" coords="1075,496,1163,521"/>
<area shape="rect" href="../../de/de9/vm_8c.html#aa883924e2f068c520b695cdc168e1603" title=" " alt="" coords="963,649,1025,675"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#af6f31822f7e737b4e414bdac1ccb59a4" title=" " alt="" coords="617,875,664,900"/>
<area shape="rect" href="../../d4/def/kalloc_8c.html#adeb1e621acdd949dffd5a054a43d1d89" title=" " alt="" coords="1081,823,1157,848"/>
<area shape="rect" href="../../d1/d47/pipe_8c.html#a9d6f0c526148e6002b6776619c7563e6" title=" " alt="" coords="1082,621,1155,647"/>
<area shape="rect" href="../../d1/d47/pipe_8c.html#a48642f54734698f6f881ee07723292cb" title=" " alt="" coords="1080,671,1157,696"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a425a0efe4f459decf4b5ea14517ab3cf" title=" " alt="" coords="476,825,569,851"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a8faab06cc4d48335076b368f02709ee2" title=" " alt="" coords="479,875,566,900"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a330ed2370fe27045b8bec1eb0bd7818f" title=" " alt="" coords="489,1125,556,1151"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#a7ae98824a008ffbc5506060227b6faa0" title=" " alt="" coords="243,717,293,743"/>
<area shape="rect" href="../../d5/de1/forktest_8c.html#a0ef8ccf57bc8c491407ec513b234f83c" title=" " alt="" coords="489,924,556,949"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a1740f29f4ce6d3060fd79a9312edc315" title=" " alt="" coords="485,776,561,801"/>
<area shape="rect" href="../../d0/d87/foo_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="497,973,548,999"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#aa1c6e6e76813ccb29a29bb119dba668a" title=" " alt="" coords="497,573,548,599"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a3208ed001a225f5d9ea3fb37f46810c7" title=" " alt="" coords="476,1175,569,1200"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a893bf6891e427f310b43981bf8e737ea" title=" " alt="" coords="712,725,787,751"/>
</map>
</div>

</div>
</div>
<a id="ada0e72e8d0a1a48090829fd03a0b76ba" name="ada0e72e8d0a1a48090829fd03a0b76ba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ada0e72e8d0a1a48090829fd03a0b76ba">&#9670;&#160;</a></span>microdelay()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void microdelay </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>us</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/df6/lapic_8c_source.html#l00119">119</a> of file <a class="el" href="../../dc/df6/lapic_8c_source.html">lapic.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  120</span>{</div>
<div class="line"><span class="lineno">  121</span>}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_ada0e72e8d0a1a48090829fd03a0b76ba_icgraph.png" border="0" usemap="#ad5/d64/defs_8h_ada0e72e8d0a1a48090829fd03a0b76ba_icgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_ada0e72e8d0a1a48090829fd03a0b76ba_icgraph" id="ad5/d64/defs_8h_ada0e72e8d0a1a48090829fd03a0b76ba_icgraph">
<area shape="rect" title=" " alt="" coords="252,31,337,56"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a54df00c792282426648d2876835958fa" title=" " alt="" coords="115,5,204,31"/>
<area shape="rect" href="../../d1/d87/uart_8c.html#a55840fa098ac21df6535d6ac91956d07" title=" " alt="" coords="125,55,194,80"/>
<area shape="rect" href="../../d1/d87/uart_8c.html#a79fa7b73d0d61fdd15d30768a395437d" title=" " alt="" coords="5,55,67,80"/>
</map>
</div>

</div>
</div>
<a id="a2fd0b66a17c5347541448ef906b7b2a2" name="a2fd0b66a17c5347541448ef906b7b2a2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2fd0b66a17c5347541448ef906b7b2a2">&#9670;&#160;</a></span>mpinit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mpinit </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d06/mp_8c_source.html#l00092">92</a> of file <a class="el" href="../../dd/d06/mp_8c_source.html">mp.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   93</span>{</div>
<div class="line"><span class="lineno">   94</span>  <a class="code hl_typedef" href="../../d9/d49/types_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a> *p, *<a class="code hl_variable" href="../../d0/d56/console_8c.html#ab56fa7c992b725d84916b987c3d532ea">e</a>;</div>
<div class="line"><span class="lineno">   95</span>  <span class="keywordtype">int</span> <a class="code hl_variable" href="../../d5/d64/defs_8h.html#a46b52bd30030451d1b65291b77ba05d5">ismp</a>;</div>
<div class="line"><span class="lineno">   96</span>  <span class="keyword">struct </span><a class="code hl_struct" href="../../d8/d11/structmp.html">mp</a> *<a class="code hl_struct" href="../../d8/d11/structmp.html">mp</a>;</div>
<div class="line"><span class="lineno">   97</span>  <span class="keyword">struct </span><a class="code hl_struct" href="../../d8/d01/structmpconf.html">mpconf</a> *conf;</div>
<div class="line"><span class="lineno">   98</span>  <span class="keyword">struct </span><a class="code hl_struct" href="../../d4/d22/structmpproc.html">mpproc</a> *<a class="code hl_struct" href="../../de/d48/structproc.html">proc</a>;</div>
<div class="line"><span class="lineno">   99</span>  <span class="keyword">struct </span><a class="code hl_struct" href="../../d6/d9b/structmpioapic.html">mpioapic</a> *<a class="code hl_struct" href="../../d3/d9b/structioapic.html">ioapic</a>;</div>
<div class="line"><span class="lineno">  100</span> </div>
<div class="line"><span class="lineno">  101</span>  <span class="keywordflow">if</span>((conf = mpconfig(&amp;<a class="code hl_struct" href="../../d8/d11/structmp.html">mp</a>)) == 0)</div>
<div class="line"><span class="lineno">  102</span>    <a class="code hl_function" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a">panic</a>(<span class="stringliteral">&quot;Expect to run on an SMP&quot;</span>);</div>
<div class="line"><span class="lineno">  103</span>  <a class="code hl_variable" href="../../d5/d64/defs_8h.html#a46b52bd30030451d1b65291b77ba05d5">ismp</a> = 1;</div>
<div class="line"><span class="lineno">  104</span>  <a class="code hl_variable" href="../../d5/d64/defs_8h.html#a4029f3e2439d5912f93543b8addd10ec">lapic</a> = (<a class="code hl_typedef" href="../../d9/d49/types_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>*)conf-&gt;<a class="code hl_variable" href="../../d8/d01/structmpconf.html#a087fac7e9dc4ca1fdfe142b3adf96c99">lapicaddr</a>;</div>
<div class="line"><span class="lineno">  105</span>  <span class="keywordflow">for</span>(p=(<a class="code hl_typedef" href="../../d9/d49/types_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a>*)(conf+1), <a class="code hl_variable" href="../../d0/d56/console_8c.html#ab56fa7c992b725d84916b987c3d532ea">e</a>=(<a class="code hl_typedef" href="../../d9/d49/types_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a>*)conf+conf-&gt;<a class="code hl_variable" href="../../d8/d01/structmpconf.html#a6b7583180c78b6a2e490d6c72779d8dd">length</a>; p&lt;<a class="code hl_variable" href="../../d0/d56/console_8c.html#ab56fa7c992b725d84916b987c3d532ea">e</a>; ){</div>
<div class="line"><span class="lineno">  106</span>    <span class="keywordflow">switch</span>(*p){</div>
<div class="line"><span class="lineno">  107</span>    <span class="keywordflow">case</span> <a class="code hl_define" href="../../dc/d0c/mp_8h.html#a0dd89a9c5a25d2d9f9a7fe57beb69597">MPPROC</a>:</div>
<div class="line"><span class="lineno">  108</span>      <a class="code hl_struct" href="../../de/d48/structproc.html">proc</a> = (<span class="keyword">struct </span><a class="code hl_struct" href="../../d4/d22/structmpproc.html">mpproc</a>*)p;</div>
<div class="line"><span class="lineno">  109</span>      <span class="keywordflow">if</span>(<a class="code hl_variable" href="../../dd/d06/mp_8c.html#a6201a0661c3d5b88df5f63529298eb48">ncpu</a> &lt; <a class="code hl_define" href="../../d5/d33/param_8h.html#a2c4561c4c17cde39101c4e7a40d4492a">NCPU</a>) {</div>
<div class="line"><span class="lineno">  110</span>        <a class="code hl_variable" href="../../dd/d06/mp_8c.html#a6d2633e73724907b582dfe6938ed7bb9">cpus</a>[<a class="code hl_variable" href="../../dd/d06/mp_8c.html#a6201a0661c3d5b88df5f63529298eb48">ncpu</a>].<a class="code hl_variable" href="../../db/d62/structcpu.html#ad08a3478ec15fc8bec1d9b6b5a0431db">apicid</a> = <a class="code hl_struct" href="../../de/d48/structproc.html">proc</a>-&gt;apicid;  <span class="comment">// apicid may differ from ncpu</span></div>
<div class="line"><span class="lineno">  111</span>        <a class="code hl_variable" href="../../dd/d06/mp_8c.html#a6201a0661c3d5b88df5f63529298eb48">ncpu</a>++;</div>
<div class="line"><span class="lineno">  112</span>      }</div>
<div class="line"><span class="lineno">  113</span>      p += <span class="keyword">sizeof</span>(<span class="keyword">struct </span><a class="code hl_struct" href="../../d4/d22/structmpproc.html">mpproc</a>);</div>
<div class="line"><span class="lineno">  114</span>      <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  115</span>    <span class="keywordflow">case</span> <a class="code hl_define" href="../../dc/d0c/mp_8h.html#a6d6b1d8666df6dc57974e608dda01edc">MPIOAPIC</a>:</div>
<div class="line"><span class="lineno">  116</span>      <a class="code hl_struct" href="../../d3/d9b/structioapic.html">ioapic</a> = (<span class="keyword">struct </span><a class="code hl_struct" href="../../d6/d9b/structmpioapic.html">mpioapic</a>*)p;</div>
<div class="line"><span class="lineno">  117</span>      <a class="code hl_variable" href="../../dd/d06/mp_8c.html#a619ae379337e3cb2397ee0b6b4fd8d6b">ioapicid</a> = <a class="code hl_struct" href="../../d3/d9b/structioapic.html">ioapic</a>-&gt;apicno;</div>
<div class="line"><span class="lineno">  118</span>      p += <span class="keyword">sizeof</span>(<span class="keyword">struct </span><a class="code hl_struct" href="../../d6/d9b/structmpioapic.html">mpioapic</a>);</div>
<div class="line"><span class="lineno">  119</span>      <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  120</span>    <span class="keywordflow">case</span> <a class="code hl_define" href="../../dc/d0c/mp_8h.html#a10d8190eb1ea465310862131da282a09">MPBUS</a>:</div>
<div class="line"><span class="lineno">  121</span>    <span class="keywordflow">case</span> <a class="code hl_define" href="../../dc/d0c/mp_8h.html#a613c0cd2bca1e5a30eb1ffc7857d4d61">MPIOINTR</a>:</div>
<div class="line"><span class="lineno">  122</span>    <span class="keywordflow">case</span> <a class="code hl_define" href="../../dc/d0c/mp_8h.html#a993af198877b836f019baaa9f12c7c30">MPLINTR</a>:</div>
<div class="line"><span class="lineno">  123</span>      p += 8;</div>
<div class="line"><span class="lineno">  124</span>      <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  125</span>    <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno">  126</span>      <a class="code hl_variable" href="../../d5/d64/defs_8h.html#a46b52bd30030451d1b65291b77ba05d5">ismp</a> = 0;</div>
<div class="line"><span class="lineno">  127</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  128</span>    }</div>
<div class="line"><span class="lineno">  129</span>  }</div>
<div class="line"><span class="lineno">  130</span>  <span class="keywordflow">if</span>(!<a class="code hl_variable" href="../../d5/d64/defs_8h.html#a46b52bd30030451d1b65291b77ba05d5">ismp</a>)</div>
<div class="line"><span class="lineno">  131</span>    <a class="code hl_function" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a">panic</a>(<span class="stringliteral">&quot;Didn&#39;t find a suitable machine&quot;</span>);</div>
<div class="line"><span class="lineno">  132</span> </div>
<div class="line"><span class="lineno">  133</span>  <span class="keywordflow">if</span>(<a class="code hl_struct" href="../../d8/d11/structmp.html">mp</a>-&gt;<a class="code hl_variable" href="../../d8/d11/structmp.html#ae2157bc407a7423c57bdb078b70cd6e5">imcrp</a>){</div>
<div class="line"><span class="lineno">  134</span>    <span class="comment">// Bochs doesn&#39;t support IMCR, so this doesn&#39;t run on Bochs.</span></div>
<div class="line"><span class="lineno">  135</span>    <span class="comment">// But it would on real hardware.</span></div>
<div class="line"><span class="lineno">  136</span>    outb(0x22, 0x70);   <span class="comment">// Select IMCR</span></div>
<div class="line"><span class="lineno">  137</span>    outb(0x23, inb(0x23) | 1);  <span class="comment">// Mask external interrupts.</span></div>
<div class="line"><span class="lineno">  138</span>  }</div>
<div class="line"><span class="lineno">  139</span>}</div>
<div class="ttc" id="adefs_8h_html_a4029f3e2439d5912f93543b8addd10ec"><div class="ttname"><a href="../../d5/d64/defs_8h.html#a4029f3e2439d5912f93543b8addd10ec">lapic</a></div><div class="ttdeci">volatile uint * lapic</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df6/lapic_8c_source.html#l00044">lapic.c:44</a></div></div>
<div class="ttc" id="adefs_8h_html_a46b52bd30030451d1b65291b77ba05d5"><div class="ttname"><a href="../../d5/d64/defs_8h.html#a46b52bd30030451d1b65291b77ba05d5">ismp</a></div><div class="ttdeci">int ismp</div></div>
<div class="ttc" id="amp_8c_html_a619ae379337e3cb2397ee0b6b4fd8d6b"><div class="ttname"><a href="../../dd/d06/mp_8c.html#a619ae379337e3cb2397ee0b6b4fd8d6b">ioapicid</a></div><div class="ttdeci">uchar ioapicid</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d06/mp_8c_source.html#l00016">mp.c:16</a></div></div>
<div class="ttc" id="amp_8h_html_a0dd89a9c5a25d2d9f9a7fe57beb69597"><div class="ttname"><a href="../../dc/d0c/mp_8h.html#a0dd89a9c5a25d2d9f9a7fe57beb69597">MPPROC</a></div><div class="ttdeci">#define MPPROC</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d0c/mp_8h_source.html#l00049">mp.h:49</a></div></div>
<div class="ttc" id="amp_8h_html_a10d8190eb1ea465310862131da282a09"><div class="ttname"><a href="../../dc/d0c/mp_8h.html#a10d8190eb1ea465310862131da282a09">MPBUS</a></div><div class="ttdeci">#define MPBUS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d0c/mp_8h_source.html#l00050">mp.h:50</a></div></div>
<div class="ttc" id="amp_8h_html_a613c0cd2bca1e5a30eb1ffc7857d4d61"><div class="ttname"><a href="../../dc/d0c/mp_8h.html#a613c0cd2bca1e5a30eb1ffc7857d4d61">MPIOINTR</a></div><div class="ttdeci">#define MPIOINTR</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d0c/mp_8h_source.html#l00052">mp.h:52</a></div></div>
<div class="ttc" id="amp_8h_html_a6d6b1d8666df6dc57974e608dda01edc"><div class="ttname"><a href="../../dc/d0c/mp_8h.html#a6d6b1d8666df6dc57974e608dda01edc">MPIOAPIC</a></div><div class="ttdeci">#define MPIOAPIC</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d0c/mp_8h_source.html#l00051">mp.h:51</a></div></div>
<div class="ttc" id="amp_8h_html_a993af198877b836f019baaa9f12c7c30"><div class="ttname"><a href="../../dc/d0c/mp_8h.html#a993af198877b836f019baaa9f12c7c30">MPLINTR</a></div><div class="ttdeci">#define MPLINTR</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d0c/mp_8h_source.html#l00053">mp.h:53</a></div></div>
<div class="ttc" id="aparam_8h_html_a2c4561c4c17cde39101c4e7a40d4492a"><div class="ttname"><a href="../../d5/d33/param_8h.html#a2c4561c4c17cde39101c4e7a40d4492a">NCPU</a></div><div class="ttdeci">#define NCPU</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d33/param_8h_source.html#l00003">param.h:3</a></div></div>
<div class="ttc" id="astructcpu_html_ad08a3478ec15fc8bec1d9b6b5a0431db"><div class="ttname"><a href="../../db/d62/structcpu.html#ad08a3478ec15fc8bec1d9b6b5a0431db">cpu::apicid</a></div><div class="ttdeci">uchar apicid</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d03/proc_8h_source.html#l00003">proc.h:3</a></div></div>
<div class="ttc" id="astructmp_html"><div class="ttname"><a href="../../d8/d11/structmp.html">mp</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d0c/mp_8h_source.html#l00003">mp.h:3</a></div></div>
<div class="ttc" id="astructmp_html_ae2157bc407a7423c57bdb078b70cd6e5"><div class="ttname"><a href="../../d8/d11/structmp.html#ae2157bc407a7423c57bdb078b70cd6e5">mp::imcrp</a></div><div class="ttdeci">uchar imcrp</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d0c/mp_8h_source.html#l00010">mp.h:10</a></div></div>
<div class="ttc" id="astructmpconf_html"><div class="ttname"><a href="../../d8/d01/structmpconf.html">mpconf</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d0c/mp_8h_source.html#l00014">mp.h:14</a></div></div>
<div class="ttc" id="astructmpconf_html_a087fac7e9dc4ca1fdfe142b3adf96c99"><div class="ttname"><a href="../../d8/d01/structmpconf.html#a087fac7e9dc4ca1fdfe142b3adf96c99">mpconf::lapicaddr</a></div><div class="ttdeci">uint * lapicaddr</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d0c/mp_8h_source.html#l00023">mp.h:23</a></div></div>
<div class="ttc" id="astructmpconf_html_a6b7583180c78b6a2e490d6c72779d8dd"><div class="ttname"><a href="../../d8/d01/structmpconf.html#a6b7583180c78b6a2e490d6c72779d8dd">mpconf::length</a></div><div class="ttdeci">ushort length</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d0c/mp_8h_source.html#l00016">mp.h:16</a></div></div>
<div class="ttc" id="astructmpioapic_html"><div class="ttname"><a href="../../d6/d9b/structmpioapic.html">mpioapic</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d0c/mp_8h_source.html#l00040">mp.h:40</a></div></div>
<div class="ttc" id="astructmpproc_html"><div class="ttname"><a href="../../d4/d22/structmpproc.html">mpproc</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d0c/mp_8h_source.html#l00029">mp.h:29</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_a2fd0b66a17c5347541448ef906b7b2a2_cgraph.png" border="0" usemap="#ad5/d64/defs_8h_a2fd0b66a17c5347541448ef906b7b2a2_cgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_a2fd0b66a17c5347541448ef906b7b2a2_cgraph" id="ad5/d64/defs_8h_a2fd0b66a17c5347541448ef906b7b2a2_cgraph">
<area shape="rect" title=" " alt="" coords="5,170,63,196"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="111,170,164,196"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="229,196,287,221"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="824,82,883,108"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="212,94,304,120"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="352,170,416,196"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="352,246,416,272"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="464,94,556,120"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="479,246,541,272"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="715,170,776,196"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="604,196,667,221"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="607,297,663,322"/>
</map>
</div>

</div>
</div>
<a id="ad427959ad025dabd8cd393b27ec39160" name="ad427959ad025dabd8cd393b27ec39160"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad427959ad025dabd8cd393b27ec39160">&#9670;&#160;</a></span>mycpu()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../db/d62/structcpu.html">cpu</a> * mycpu </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/dda/proc_8c_source.html#l00038">38</a> of file <a class="el" href="../../d3/dda/proc_8c_source.html">proc.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   39</span>{</div>
<div class="line"><span class="lineno">   40</span>  <span class="keywordtype">int</span> apicid, i;</div>
<div class="line"><span class="lineno">   41</span>  </div>
<div class="line"><span class="lineno">   42</span>  <span class="keywordflow">if</span>(readeflags()&amp;<a class="code hl_define" href="../../d2/df1/mmu_8h.html#ab481068357bb42797aafe91864a2d085">FL_IF</a>)</div>
<div class="line"><span class="lineno">   43</span>    <a class="code hl_function" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a">panic</a>(<span class="stringliteral">&quot;mycpu called with interrupts enabled\n&quot;</span>);</div>
<div class="line"><span class="lineno">   44</span>  </div>
<div class="line"><span class="lineno">   45</span>  apicid = <a class="code hl_function" href="../../d5/d64/defs_8h.html#a627f7996b64f99d885244a5102c85164">lapicid</a>();</div>
<div class="line"><span class="lineno">   46</span>  <span class="comment">// APIC IDs are not guaranteed to be contiguous. Maybe we should have</span></div>
<div class="line"><span class="lineno">   47</span>  <span class="comment">// a reverse map, or reserve a register to store &amp;cpus[i].</span></div>
<div class="line"><span class="lineno">   48</span>  <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code hl_variable" href="../../dd/d06/mp_8c.html#a6201a0661c3d5b88df5f63529298eb48">ncpu</a>; ++i) {</div>
<div class="line"><span class="lineno">   49</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../dd/d06/mp_8c.html#a6d2633e73724907b582dfe6938ed7bb9">cpus</a>[i].apicid == apicid)</div>
<div class="line"><span class="lineno">   50</span>      <span class="keywordflow">return</span> &amp;<a class="code hl_variable" href="../../dd/d06/mp_8c.html#a6d2633e73724907b582dfe6938ed7bb9">cpus</a>[i];</div>
<div class="line"><span class="lineno">   51</span>  }</div>
<div class="line"><span class="lineno">   52</span>  <a class="code hl_function" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a">panic</a>(<span class="stringliteral">&quot;unknown apicid\n&quot;</span>);</div>
<div class="line"><span class="lineno">   53</span>}</div>
<div class="ttc" id="adefs_8h_html_a627f7996b64f99d885244a5102c85164"><div class="ttname"><a href="../../d5/d64/defs_8h.html#a627f7996b64f99d885244a5102c85164">lapicid</a></div><div class="ttdeci">int lapicid(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df6/lapic_8c_source.html#l00101">lapic.c:101</a></div></div>
<div class="ttc" id="ammu_8h_html_ab481068357bb42797aafe91864a2d085"><div class="ttname"><a href="../../d2/df1/mmu_8h.html#ab481068357bb42797aafe91864a2d085">FL_IF</a></div><div class="ttdeci">#define FL_IF</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/df1/mmu_8h_source.html#l00005">mmu.h:5</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_ad427959ad025dabd8cd393b27ec39160_cgraph.png" border="0" usemap="#ad5/d64/defs_8h_ad427959ad025dabd8cd393b27ec39160_cgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_ad427959ad025dabd8cd393b27ec39160_cgraph" id="ad5/d64/defs_8h_ad427959ad025dabd8cd393b27ec39160_cgraph">
<area shape="rect" title=" " alt="" coords="5,119,67,145"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="233,145,291,170"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="115,246,168,271"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="233,246,291,271"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="216,295,308,321"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="356,195,420,221"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="356,283,420,309"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="468,195,560,221"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="483,245,545,270"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="608,145,671,170"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="611,358,667,383"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_ad427959ad025dabd8cd393b27ec39160_icgraph.png" border="0" usemap="#ad5/d64/defs_8h_ad427959ad025dabd8cd393b27ec39160_icgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_ad427959ad025dabd8cd393b27ec39160_icgraph" id="ad5/d64/defs_8h_ad427959ad025dabd8cd393b27ec39160_icgraph">
<area shape="rect" title=" " alt="" coords="1287,640,1348,665"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="931,2630,995,2656"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a9fa00b0be5d3c4781048861e2506eb63" title=" " alt="" coords="796,640,875,665"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad788da91743c333b5bed7c4a0dd12365" title=" " alt="" coords="664,690,721,716"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a414dda255ed3c1e43e7922d10f9d2c6d" title=" " alt="" coords="1181,260,1234,285"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="1054,817,1117,842"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a41af0935f3989aae450cf8988cd9c3a9" title=" " alt="" coords="803,462,868,488"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="1179,690,1235,716"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a87c90f0ab2a1b11c2b55f4e483bb8493" title=" " alt="" coords="1043,665,1128,690"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="1176,766,1239,792"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#aaad2d7a86d4859982dd9a132f5128ff2" title=" " alt="" coords="397,1045,492,1070"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#ab3c447f135c68e4c3c1f8d5866f6e77b" title=" " alt="" coords="307,1298,349,1324"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#aaf98ef7cdde3a0dfb2e49919de3298b1" title=" " alt="" coords="97,2757,140,2782"/>
<area shape="rect" href="../../dc/d6f/trap_8c.html#a372d166e36c086c91e5f5d81e5fead3a" title=" " alt="" coords="5,2757,49,2782"/>
<area shape="rect" href="../../d6/d13/file_8c.html#ae557c81ab89c24219146144bb6adaa2c" title=" " alt="" coords="188,2808,259,2833"/>
<area shape="rect" href="../../d7/df8/log_8c.html#ac96aa31ffc0500e749c62c4d377c21c9" title=" " alt="" coords="407,2808,482,2833"/>
<area shape="rect" href="../../dc/de6/bio_8c.html#ab5335aeb503731104314321a78a6d727" title=" " alt="" coords="540,2312,597,2337"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a2ca17a3161c80e3e4894ec6a96e0a281" title=" " alt="" coords="812,1956,859,1981"/>
<area shape="rect" href="../../d0/d56/console_8c.html#aad3d6ca39f23bb6d2686d2967e415193" title=" " alt="" coords="650,2709,735,2734"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a28ac85a90987662e306ca8efbfe16074" title=" " alt="" coords="399,969,491,994"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a6af7eb39268127d389792cec37785666" title=" " alt="" coords="788,2005,883,2030"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="806,2757,865,2782"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a45a59a61c8799cb754b4326a32c14dc4" title=" " alt="" coords="671,2758,714,2784"/>
<area shape="rect" href="../../d7/df8/log_8c.html#ac0f12be0ca0de555e60b27b06a57a65b" title=" " alt="" coords="661,2608,725,2633"/>
<area shape="rect" href="../../d6/d13/file_8c.html#ac56b15561658d0e74ce1c53309b8f97d" title=" " alt="" coords="802,2104,869,2129"/>
<area shape="rect" href="../../d6/d13/file_8c.html#a9ef0346d08d8ed79ce2a9c03f9a4b4b2" title=" " alt="" coords="805,1805,865,1830"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#acd2e1ded4bb6fce4500438bf928330f4" title=" " alt="" coords="671,1929,715,1954"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#a6fdbe54cbecd8fc67d74793b27adcf05" title=" " alt="" coords="645,1146,740,1172"/>
<area shape="rect" href="../../da/d9b/memide_8c.html#a7f36b008f02088c86f76e98e05b55af5" title=" " alt="" coords="418,1121,471,1146"/>
<area shape="rect" href="../../da/d9b/memide_8c.html#a709693afdb9b89d848e684e7acde1f8f" title=" " alt="" coords="664,2808,721,2833"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a24a91383ab80b4b8a1ef1f4df896035c" title=" " alt="" coords="812,2054,859,2080"/>
<area shape="rect" href="../../d4/def/kalloc_8c.html#a5e965f6365c721b5b23c12d16d45c3dc" title=" " alt="" coords="807,2153,863,2178"/>
<area shape="rect" href="../../d4/def/kalloc_8c.html#aced59ecf8411235f6dffc065236711a5" title=" " alt="" coords="810,2453,861,2478"/>
<area shape="rect" href="../../d1/d47/pipe_8c.html#a48642f54734698f6f881ee07723292cb" title=" " alt="" coords="654,2454,731,2480"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#af6f31822f7e737b4e414bdac1ccb59a4" title=" " alt="" coords="421,1197,468,1222"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a650cf0caaaa8b75f653c1c92818d03a4" title=" " alt="" coords="816,2202,855,2228"/>
<area shape="rect" href="../../d7/df8/log_8c.html#a7eacb0fbebe5ce4c7d3ddea15908b13d" title=" " alt="" coords="798,2252,873,2277"/>
<area shape="rect" href="../../d1/d47/pipe_8c.html#ad4cce6144039b615d139f8660c60293a" title=" " alt="" coords="409,1248,480,1273"/>
<area shape="rect" href="../../d1/d47/pipe_8c.html#acfca0fab7d2c0c0dcc56359c8febe14a" title=" " alt="" coords="407,1298,482,1324"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#aa997067c2c9bfef15af6fa0a10c20f4a" title=" " alt="" coords="645,2405,740,2430"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ae70cc0370342e46f6db3bec367232457" title=" " alt="" coords="542,1045,595,1070"/>
<area shape="rect" href="../../dd/d35/sysproc_8c.html#a59778ec9bfa6b6f2100b43fbba000573" title=" " alt="" coords="404,792,485,817"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a7cb51f5c2b5cad3766f19eb69c92793b" title=" " alt="" coords="544,741,593,766"/>
<area shape="rect" href="../../dd/d35/sysproc_8c.html#aaf8553903ba8f2776247679d4db0d121" title=" " alt="" coords="791,2301,880,2326"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a81c8a6a0cae413bc81aa223f7f7b7205" title=" " alt="" coords="803,1906,867,1932"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a4a34d9f03e436cfa09b88f735f6ee952" title=" " alt="" coords="802,2605,869,2630"/>
<area shape="rect" href="../../de/de9/vm_8c.html#aaf5b2814a1dbf3ef0803dff58e0a76dc" title=" " alt="" coords="1055,260,1115,285"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="931,1526,995,1552"/>
<area shape="rect" href="../../db/dd8/syscall_8c.html#ade56ef2176f85cd61e7b91b400e7d4d3" title=" " alt="" coords="665,285,720,310"/>
<area shape="rect" href="../../db/dd8/syscall_8c.html#a6ade9205d1f46b759cf93b60513a3421" title=" " alt="" coords="541,234,596,260"/>
</map>
</div>

</div>
</div>
<a id="a3d2327db1e34643f4a9e6a07c8cc62c6" name="a3d2327db1e34643f4a9e6a07c8cc62c6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3d2327db1e34643f4a9e6a07c8cc62c6">&#9670;&#160;</a></span>myproc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../de/d48/structproc.html">proc</a> * myproc </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/dda/proc_8c_source.html#l00058">58</a> of file <a class="el" href="../../d3/dda/proc_8c_source.html">proc.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   58</span>             {</div>
<div class="line"><span class="lineno">   59</span>  <span class="keyword">struct </span><a class="code hl_struct" href="../../db/d62/structcpu.html">cpu</a> *c;</div>
<div class="line"><span class="lineno">   60</span>  <span class="keyword">struct </span><a class="code hl_struct" href="../../de/d48/structproc.html">proc</a> *p;</div>
<div class="line"><span class="lineno">   61</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#a206b749d1b7768dadce61cbcde7e0f1c">pushcli</a>();</div>
<div class="line"><span class="lineno">   62</span>  c = <a class="code hl_function" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160">mycpu</a>();</div>
<div class="line"><span class="lineno">   63</span>  p = c-&gt;<a class="code hl_variable" href="../../db/d62/structcpu.html#a9e71a6265904fd644875a9ea5a413c89">proc</a>;</div>
<div class="line"><span class="lineno">   64</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#ae3424f669269fef400ce29c3aeb43fdb">popcli</a>();</div>
<div class="line"><span class="lineno">   65</span>  <span class="keywordflow">return</span> p;</div>
<div class="line"><span class="lineno">   66</span>}</div>
<div class="ttc" id="adefs_8h_html_a206b749d1b7768dadce61cbcde7e0f1c"><div class="ttname"><a href="../../d5/d64/defs_8h.html#a206b749d1b7768dadce61cbcde7e0f1c">pushcli</a></div><div class="ttdeci">void pushcli(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d2d/spinlock_8c_source.html#l00105">spinlock.c:105</a></div></div>
<div class="ttc" id="adefs_8h_html_ae3424f669269fef400ce29c3aeb43fdb"><div class="ttname"><a href="../../d5/d64/defs_8h.html#ae3424f669269fef400ce29c3aeb43fdb">popcli</a></div><div class="ttdeci">void popcli(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d2d/spinlock_8c_source.html#l00117">spinlock.c:117</a></div></div>
<div class="ttc" id="astructcpu_html"><div class="ttname"><a href="../../db/d62/structcpu.html">cpu</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d03/proc_8h_source.html#l00002">proc.h:2</a></div></div>
<div class="ttc" id="astructcpu_html_a9e71a6265904fd644875a9ea5a413c89"><div class="ttname"><a href="../../db/d62/structcpu.html#a9e71a6265904fd644875a9ea5a413c89">cpu::proc</a></div><div class="ttdeci">struct proc * proc</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d03/proc_8h_source.html#l00010">proc.h:10</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_a3d2327db1e34643f4a9e6a07c8cc62c6_cgraph.png" border="0" usemap="#ad5/d64/defs_8h_a3d2327db1e34643f4a9e6a07c8cc62c6_cgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_a3d2327db1e34643f4a9e6a07c8cc62c6_cgraph" id="ad5/d64/defs_8h_a3d2327db1e34643f4a9e6a07c8cc62c6_cgraph">
<area shape="rect" title=" " alt="" coords="5,170,71,195"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="119,170,180,195"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="725,447,781,473"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="721,75,784,101"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="346,195,405,221"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="228,297,281,322"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="346,297,405,322"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="329,346,421,371"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="469,221,533,246"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="469,315,533,341"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="581,209,673,234"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="596,258,659,283"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_a3d2327db1e34643f4a9e6a07c8cc62c6_icgraph.png" border="0" usemap="#ad5/d64/defs_8h_a3d2327db1e34643f4a9e6a07c8cc62c6_icgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_a3d2327db1e34643f4a9e6a07c8cc62c6_icgraph" id="ad5/d64/defs_8h_a3d2327db1e34643f4a9e6a07c8cc62c6_icgraph">
<area shape="rect" title=" " alt="" coords="833,1055,899,1081"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#aaad2d7a86d4859982dd9a132f5128ff2" title=" " alt="" coords="425,954,520,979"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a28ac85a90987662e306ca8efbfe16074" title=" " alt="" coords="137,753,229,778"/>
<area shape="rect" href="../../df/dc9/exec_8c.html#ace32454ed0d37834dcb1cb4f8b727e6e" title=" " alt="" coords="158,914,209,939"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#ad1c5f8693cb35b9605fee09eebdda640" title=" " alt="" coords="144,675,223,701"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#aaf98ef7cdde3a0dfb2e49919de3298b1" title=" " alt="" coords="162,1185,205,1210"/>
<area shape="rect" href="../../dc/d6f/trap_8c.html#a372d166e36c086c91e5f5d81e5fead3a" title=" " alt="" coords="25,1407,69,1433"/>
<area shape="rect" href="../../db/dd8/syscall_8c.html#ade56ef2176f85cd61e7b91b400e7d4d3" title=" " alt="" coords="578,398,633,423"/>
<area shape="rect" href="../../db/dd8/syscall_8c.html#a6ade9205d1f46b759cf93b60513a3421" title=" " alt="" coords="445,550,500,575"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a9a70db941def46ec25939e6c2d30e399" title=" " alt="" coords="290,598,365,623"/>
<area shape="rect" href="../../dd/d35/sysproc_8c.html#ab21d46be776cf6075a997af525a1a628" title=" " alt="" coords="435,1461,510,1486"/>
<area shape="rect" href="../../dd/d35/sysproc_8c.html#a59778ec9bfa6b6f2100b43fbba000573" title=" " alt="" coords="432,651,513,677"/>
<area shape="rect" href="../../db/dd8/syscall_8c.html#a918cadc6c55aa7ac38982659c27a3a75" title=" " alt="" coords="705,398,771,423"/>
<area shape="rect" href="../../db/dd8/syscall_8c.html#ace37b4584713ab6bda44a282a298961f" title=" " alt="" coords="439,43,506,69"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#acd2e1ded4bb6fce4500438bf928330f4" title=" " alt="" coords="161,1062,205,1087"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a9c16214741f4fcd088e5eea468709328" title=" " alt="" coords="568,1511,643,1537"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#a6fdbe54cbecd8fc67d74793b27adcf05" title=" " alt="" coords="691,1562,785,1587"/>
<area shape="rect" href="../../d1/d47/pipe_8c.html#ad4cce6144039b615d139f8660c60293a" title=" " alt="" coords="437,803,508,829"/>
<area shape="rect" href="../../d1/d47/pipe_8c.html#acfca0fab7d2c0c0dcc56359c8febe14a" title=" " alt="" coords="435,853,510,878"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad788da91743c333b5bed7c4a0dd12365" title=" " alt="" coords="709,1207,767,1233"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ae70cc0370342e46f6db3bec367232457" title=" " alt="" coords="579,931,632,957"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#af6f31822f7e737b4e414bdac1ccb59a4" title=" " alt="" coords="160,1013,207,1038"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a7cb51f5c2b5cad3766f19eb69c92793b" title=" " alt="" coords="581,1309,630,1334"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a32945488fd39bc405757177b37cd2250" title=" " alt="" coords="697,1611,779,1637"/>
<area shape="rect" href="../../dd/d35/sysproc_8c.html#ac81965412a0725574b8c72afda11243e" title=" " alt="" coords="695,1661,781,1686"/>
<area shape="rect" href="../../db/dd8/syscall_8c.html#acd6bcafe6626fe8e7d00cacdbc3cc4f1" title=" " alt="" coords="574,1359,637,1385"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#aed28187406d84a3aa71f10c6235a03ec" title=" " alt="" coords="303,702,352,727"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#ab3c447f135c68e4c3c1f8d5866f6e77b" title=" " alt="" coords="306,954,349,979"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a74e45efc661ca17c068bc283b3842e6d" title=" " alt="" coords="144,347,223,373"/>
<area shape="rect" href="../../d0/d56/console_8c.html#ab508ff0f4db26fe35cd25fa648f9ee75" title=" " alt="" coords="5,753,89,778"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#ac5b5d4517586be6396b4f3b37445945a" title=" " alt="" coords="8,1013,87,1038"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a6f94e3b215d069b5419e87bafe80799a" title=" " alt="" coords="11,963,83,989"/>
<area shape="rect" href="../../d8/d60/init_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title=" " alt="" coords="22,841,73,866"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#aedbeff6afe5d4e22330c7e6b5e6df893" title=" " alt="" coords="15,914,80,939"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#aeaa813ddeb6a5fac3c45714c7351c526" title=" " alt="" coords="8,94,87,119"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a77cc2edce6e78f22dd9eb377462762f2" title=" " alt="" coords="13,1309,82,1334"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#aa0d46fcb43667c805b84ea7e1ff6100a" title=" " alt="" coords="21,1358,74,1383"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a86fe524d99d69c18a335512cf3405b31" title=" " alt="" coords="19,1111,75,1137"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a57e55b2d0161d62bb99765ca3de43e35" title=" " alt="" coords="14,1161,81,1186"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a0b0ff95e564df3c3e8fc977226b75de7" title=" " alt="" coords="15,1210,80,1235"/>
<area shape="rect" href="../../d1/d8f/cat_8c.html#a90a33618884bcf5e892297879bc016ff" title=" " alt="" coords="27,1259,67,1285"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a5a12affe4fdfaa172d85da9a6adf98d2" title=" " alt="" coords="8,1062,87,1087"/>
<area shape="rect" href="../../dd/d35/sysproc_8c.html#a65e52d7f297b2757ffbf46e4deccf188" title=" " alt="" coords="277,499,377,525"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a54bf714d9e898cbdcbc061b280bbfae0" title=" " alt="" coords="290,399,365,425"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a687d939a9e4792af15db96f2c2f34378" title=" " alt="" coords="288,450,367,475"/>
<area shape="rect" href="../../db/dd8/syscall_8c.html#a662eedd65f3e2165093842b80e3bc024" title=" " alt="" coords="300,239,355,265"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a25697aa3d828b5878d38170d724adb27" title=" " alt="" coords="139,170,228,195"/>
<area shape="rect" href="../../dd/d35/sysproc_8c.html#abc90a5b53d06206904d099c62efc1696" title=" " alt="" coords="435,195,510,221"/>
<area shape="rect" href="../../dd/d35/sysproc_8c.html#ad766b54842470b464a6497bb5c514e59" title=" " alt="" coords="439,297,506,322"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#ac243c8f20f5fb2e3e257b5007af2c204" title=" " alt="" coords="289,549,365,574"/>
</map>
</div>

</div>
</div>
<a id="a0206c4090dc4bdfd8481e38057d5b2af" name="a0206c4090dc4bdfd8481e38057d5b2af"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0206c4090dc4bdfd8481e38057d5b2af">&#9670;&#160;</a></span>namecmp()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int namecmp </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>t</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d2/d5a/fs_8c_source.html#l00517">517</a> of file <a class="el" href="../../d2/d5a/fs_8c_source.html">fs.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  518</span>{</div>
<div class="line"><span class="lineno">  519</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="../../d5/d64/defs_8h.html#a27e878168063a98eae64b4273dcf33cc">strncmp</a>(s, t, <a class="code hl_define" href="../../df/d26/fs_8h.html#a48246fb9e5cb7f6a71ebc9ebc2f06562">DIRSIZ</a>);</div>
<div class="line"><span class="lineno">  520</span>}</div>
<div class="ttc" id="adefs_8h_html_a27e878168063a98eae64b4273dcf33cc"><div class="ttname"><a href="../../d5/d64/defs_8h.html#a27e878168063a98eae64b4273dcf33cc">strncmp</a></div><div class="ttdeci">int strncmp(const char *, const char *, uint)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/db0/string_8c_source.html#l00059">string.c:59</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_a0206c4090dc4bdfd8481e38057d5b2af_cgraph.png" border="0" usemap="#ad5/d64/defs_8h_a0206c4090dc4bdfd8481e38057d5b2af_cgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_a0206c4090dc4bdfd8481e38057d5b2af_cgraph" id="ad5/d64/defs_8h_a0206c4090dc4bdfd8481e38057d5b2af_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,84,31"/>
<area shape="rect" href="../../d1/db0/string_8c.html#a81b6f58fa9c826f064fb6844dda4c475" title=" " alt="" coords="132,5,201,31"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_a0206c4090dc4bdfd8481e38057d5b2af_icgraph.png" border="0" usemap="#ad5/d64/defs_8h_a0206c4090dc4bdfd8481e38057d5b2af_icgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_a0206c4090dc4bdfd8481e38057d5b2af_icgraph" id="ad5/d64/defs_8h_a0206c4090dc4bdfd8481e38057d5b2af_icgraph">
<area shape="rect" title=" " alt="" coords="379,31,457,56"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a5341068f021beac8cf0032b97d231e6f" title=" " alt="" coords="256,5,331,31"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#ae1e58ee11d41f643929520d8c1640da7" title=" " alt="" coords="124,55,208,80"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a69a135a0e8a06d9f306d77ebc0c1f7a0" title=" " alt="" coords="138,5,194,31"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a759600870314007ac558871239122fb7" title=" " alt="" coords="5,5,76,31"/>
</map>
</div>

</div>
</div>
<a id="acde7d3975db286253e584452ba03a54f" name="acde7d3975db286253e584452ba03a54f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acde7d3975db286253e584452ba03a54f">&#9670;&#160;</a></span>namei()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d0/df8/structinode.html">inode</a> * namei </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d2/d5a/fs_8c_source.html#l00660">660</a> of file <a class="el" href="../../d2/d5a/fs_8c_source.html">fs.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  661</span>{</div>
<div class="line"><span class="lineno">  662</span>  <span class="keywordtype">char</span> <a class="code hl_variable" href="../../de/dc0/usertests_8c.html#aee754febd402311e2a552cb0d6ab6629">name</a>[<a class="code hl_define" href="../../df/d26/fs_8h.html#a48246fb9e5cb7f6a71ebc9ebc2f06562">DIRSIZ</a>];</div>
<div class="line"><span class="lineno">  663</span>  <span class="keywordflow">return</span> namex(path, 0, <a class="code hl_variable" href="../../de/dc0/usertests_8c.html#aee754febd402311e2a552cb0d6ab6629">name</a>);</div>
<div class="line"><span class="lineno">  664</span>}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_acde7d3975db286253e584452ba03a54f_icgraph.png" border="0" usemap="#ad5/d64/defs_8h_acde7d3975db286253e584452ba03a54f_icgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_acde7d3975db286253e584452ba03a54f_icgraph" id="ad5/d64/defs_8h_acde7d3975db286253e584452ba03a54f_icgraph">
<area shape="rect" title=" " alt="" coords="357,203,415,228"/>
<area shape="rect" href="../../df/dc9/exec_8c.html#ace32454ed0d37834dcb1cb4f8b727e6e" title=" " alt="" coords="245,104,295,129"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#ad1c5f8693cb35b9605fee09eebdda640" title=" " alt="" coords="231,153,309,179"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a759600870314007ac558871239122fb7" title=" " alt="" coords="235,203,305,228"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a74e45efc661ca17c068bc283b3842e6d" title=" " alt="" coords="231,252,309,277"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a81c8a6a0cae413bc81aa223f7f7b7205" title=" " alt="" coords="238,301,302,327"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#ac5b5d4517586be6396b4f3b37445945a" title=" " alt="" coords="104,5,183,31"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a6f94e3b215d069b5419e87bafe80799a" title=" " alt="" coords="107,55,179,80"/>
<area shape="rect" href="../../d8/d60/init_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title=" " alt="" coords="118,104,169,129"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#aedbeff6afe5d4e22330c7e6b5e6df893" title=" " alt="" coords="111,177,176,203"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#aeaa813ddeb6a5fac3c45714c7351c526" title=" " alt="" coords="104,227,183,252"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="5,31,56,56"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title=" " alt="" coords="5,177,56,203"/>
</map>
</div>

</div>
</div>
<a id="a699674601988291ebcc47d902f18bee8" name="a699674601988291ebcc47d902f18bee8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a699674601988291ebcc47d902f18bee8">&#9670;&#160;</a></span>nameiparent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d0/df8/structinode.html">inode</a> * nameiparent </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d2/d5a/fs_8c_source.html#l00667">667</a> of file <a class="el" href="../../d2/d5a/fs_8c_source.html">fs.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  668</span>{</div>
<div class="line"><span class="lineno">  669</span>  <span class="keywordflow">return</span> namex(path, 1, <a class="code hl_variable" href="../../de/dc0/usertests_8c.html#aee754febd402311e2a552cb0d6ab6629">name</a>);</div>
<div class="line"><span class="lineno">  670</span>}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_a699674601988291ebcc47d902f18bee8_icgraph.png" border="0" usemap="#ad5/d64/defs_8h_a699674601988291ebcc47d902f18bee8_icgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_a699674601988291ebcc47d902f18bee8_icgraph" id="ad5/d64/defs_8h_a699674601988291ebcc47d902f18bee8_icgraph">
<area shape="rect" title=" " alt="" coords="137,31,231,56"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a759600870314007ac558871239122fb7" title=" " alt="" coords="12,5,83,31"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#ae1e58ee11d41f643929520d8c1640da7" title=" " alt="" coords="5,55,89,80"/>
</map>
</div>

</div>
</div>
<a id="a45323e3f295a0d9b90929cc30a24e2aa" name="a45323e3f295a0d9b90929cc30a24e2aa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a45323e3f295a0d9b90929cc30a24e2aa">&#9670;&#160;</a></span>panic()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void panic </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>s</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d56/console_8c_source.html#l00107">107</a> of file <a class="el" href="../../d0/d56/console_8c_source.html">console.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  108</span>{</div>
<div class="line"><span class="lineno">  109</span>  <span class="keywordtype">int</span> i;</div>
<div class="line"><span class="lineno">  110</span>  <a class="code hl_typedef" href="../../d9/d49/types_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> pcs[10];</div>
<div class="line"><span class="lineno">  111</span> </div>
<div class="line"><span class="lineno">  112</span>  cli();</div>
<div class="line"><span class="lineno">  113</span>  cons.locking = 0;</div>
<div class="line"><span class="lineno">  114</span>  <span class="comment">// use lapiccpunum so that we can call panic from mycpu()</span></div>
<div class="line"><span class="lineno">  115</span>  <a class="code hl_function" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6">cprintf</a>(<span class="stringliteral">&quot;lapicid %d: panic: &quot;</span>, <a class="code hl_function" href="../../d5/d64/defs_8h.html#a627f7996b64f99d885244a5102c85164">lapicid</a>());</div>
<div class="line"><span class="lineno">  116</span>  <a class="code hl_function" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6">cprintf</a>(s);</div>
<div class="line"><span class="lineno">  117</span>  <a class="code hl_function" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6">cprintf</a>(<span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><span class="lineno">  118</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f">getcallerpcs</a>(&amp;s, pcs);</div>
<div class="line"><span class="lineno">  119</span>  <span class="keywordflow">for</span>(i=0; i&lt;10; i++)</div>
<div class="line"><span class="lineno">  120</span>    <a class="code hl_function" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6">cprintf</a>(<span class="stringliteral">&quot; %p&quot;</span>, pcs[i]);</div>
<div class="line"><span class="lineno">  121</span>  panicked = 1; <span class="comment">// freeze other CPU</span></div>
<div class="line"><span class="lineno">  122</span>  <span class="keywordflow">for</span>(;;)</div>
<div class="line"><span class="lineno">  123</span>    ;</div>
<div class="line"><span class="lineno">  124</span>}</div>
<div class="ttc" id="adefs_8h_html_a4105de9e2969515d6c6c795c4386f69f"><div class="ttname"><a href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f">getcallerpcs</a></div><div class="ttdeci">void getcallerpcs(void *, uint *)</div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_a45323e3f295a0d9b90929cc30a24e2aa_cgraph.png" border="0" usemap="#ad5/d64/defs_8h_a45323e3f295a0d9b90929cc30a24e2aa_cgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_a45323e3f295a0d9b90929cc30a24e2aa_cgraph" id="ad5/d64/defs_8h_a45323e3f295a0d9b90929cc30a24e2aa_cgraph">
<area shape="rect" title=" " alt="" coords="5,2070,59,2095"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="1055,1867,1114,1893"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="1783,297,1842,322"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="1767,1766,1859,1791"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#aaf98ef7cdde3a0dfb2e49919de3298b1" title=" " alt="" coords="111,1043,153,1069"/>
<area shape="rect" href="../../d5/de1/forktest_8c.html#a249680925885256274fa9f02dd51cec4" title=" " alt="" coords="107,2171,157,2197"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="1183,803,1247,829"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="1665,1550,1719,1575"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="1183,1411,1247,1437"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="1305,803,1397,829"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="1320,449,1383,474"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="1556,297,1617,322"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="1445,246,1508,271"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="1449,398,1505,423"/>
<area shape="rect" href="../../d7/df8/log_8c.html#ac96aa31ffc0500e749c62c4d377c21c9" title=" " alt="" coords="639,689,714,714"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a41af0935f3989aae450cf8988cd9c3a9" title=" " alt="" coords="1052,195,1117,221"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad788da91743c333b5bed7c4a0dd12365" title=" " alt="" coords="921,347,979,373"/>
<area shape="rect" href="../../d7/df8/log_8c.html#ac0f12be0ca0de555e60b27b06a57a65b" title=" " alt="" coords="918,1715,982,1741"/>
<area shape="rect" href="../../d6/d13/file_8c.html#ae557c81ab89c24219146144bb6adaa2c" title=" " alt="" coords="205,1449,276,1474"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#ab3c447f135c68e4c3c1f8d5866f6e77b" title=" " alt="" coords="324,1043,367,1069"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ae70cc0370342e46f6db3bec367232457" title=" " alt="" coords="787,651,840,677"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a9fa00b0be5d3c4781048861e2506eb63" title=" " alt="" coords="1045,297,1124,322"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a1d9e7047d3dfb57809a2541d8387705e" title=" " alt="" coords="1186,246,1243,271"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a02ca0670bc1fe12e38453082631ff360" title=" " alt="" coords="1172,347,1257,373"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a87c90f0ab2a1b11c2b55f4e483bb8493" title=" " alt="" coords="1309,297,1394,322"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a4a34d9f03e436cfa09b88f735f6ee952" title=" " alt="" coords="1051,1361,1118,1386"/>
<area shape="rect" href="../../d1/d47/pipe_8c.html#a48642f54734698f6f881ee07723292cb" title=" " alt="" coords="911,1462,989,1487"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#aaad2d7a86d4859982dd9a132f5128ff2" title=" " alt="" coords="629,639,724,665"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a7220afa8e5f4bea540eb95879ea7df6e" title=" " alt="" coords="415,1361,479,1386"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#aa997067c2c9bfef15af6fa0a10c20f4a" title=" " alt="" coords="903,1310,997,1335"/>
<area shape="rect" href="../../dc/de6/bio_8c.html#a30b8d2ef2300ed8e3d879a428fe39898" title=" " alt="" coords="527,1310,581,1335"/>
<area shape="rect" href="../../d1/db0/string_8c.html#a07f97e2ed1ce37955192d52de8f4911f" title=" " alt="" coords="772,1513,855,1538"/>
<area shape="rect" href="../../dc/de6/bio_8c.html#ab5335aeb503731104314321a78a6d727" title=" " alt="" coords="785,1310,842,1335"/>
<area shape="rect" href="../../d7/df8/log_8c.html#a7eacb0fbebe5ce4c7d3ddea15908b13d" title=" " alt="" coords="1047,1107,1122,1133"/>
<area shape="rect" href="../../da/d9b/memide_8c.html#a7f36b008f02088c86f76e98e05b55af5" title=" " alt="" coords="650,1310,703,1335"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#a6fdbe54cbecd8fc67d74793b27adcf05" title=" " alt="" coords="903,854,997,879"/>
<area shape="rect" href="../../d4/def/kalloc_8c.html#aced59ecf8411235f6dffc065236711a5" title=" " alt="" coords="1059,1614,1110,1639"/>
<area shape="rect" href="../../db/d8a/ulib_8c.html#aa9cdc2409c15ccd5ee3b2031576f4093" title=" " alt="" coords="1180,1563,1249,1589"/>
<area shape="rect" href="../../db/d8a/ulib_8c.html#a59b5e6e6105ef0e97aed266ec6fdfe60" title=" " alt="" coords="213,2221,268,2246"/>
<area shape="rect" href="../../d8/ddb/user_8h.html#ae57e95d717eb7386cd8b935a0c136abe" title=" " alt="" coords="215,2171,266,2197"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_a45323e3f295a0d9b90929cc30a24e2aa_icgraph.png" border="0" usemap="#ad5/d64/defs_8h_a45323e3f295a0d9b90929cc30a24e2aa_icgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_a45323e3f295a0d9b90929cc30a24e2aa_icgraph" id="ad5/d64/defs_8h_a45323e3f295a0d9b90929cc30a24e2aa_icgraph">
<area shape="rect" title=" " alt="" coords="1067,1749,1120,1775"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="676,1041,740,1067"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#aed28187406d84a3aa71f10c6235a03ec" title=" " alt="" coords="281,1747,331,1772"/>
<area shape="rect" href="../../d6/d13/file_8c.html#a1dc8c87c7e48bdaaf98e9c7047928f29" title=" " alt="" coords="143,1949,207,1975"/>
<area shape="rect" href="../../d6/d13/file_8c.html#ab8de757a0a9f58dcc6511ea5e46ebb88" title=" " alt="" coords="142,1747,209,1772"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#ae1e58ee11d41f643929520d8c1640da7" title=" " alt="" coords="133,1493,217,1519"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#aaf98ef7cdde3a0dfb2e49919de3298b1" title=" " alt="" coords="154,283,197,308"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#aedbeff6afe5d4e22330c7e6b5e6df893" title=" " alt="" coords="10,56,75,81"/>
<area shape="rect" href="../../dc/d6f/trap_8c.html#a372d166e36c086c91e5f5d81e5fead3a" title=" " alt="" coords="21,535,65,560"/>
<area shape="rect" href="../../d6/d13/file_8c.html#ae557c81ab89c24219146144bb6adaa2c" title=" " alt="" coords="271,687,341,712"/>
<area shape="rect" href="../../dc/de6/bio_8c.html#ab5335aeb503731104314321a78a6d727" title=" " alt="" coords="546,687,603,712"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#af95049367381647bc9487af49724b869" title=" " alt="" coords="411,636,463,661"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="545,889,604,915"/>
<area shape="rect" href="../../d7/df8/log_8c.html#ac0f12be0ca0de555e60b27b06a57a65b" title=" " alt="" coords="405,737,469,763"/>
<area shape="rect" href="../../d6/d13/file_8c.html#a9ef0346d08d8ed79ce2a9c03f9a4b4b2" title=" " alt="" coords="545,1392,605,1417"/>
<area shape="rect" href="../../da/d9b/memide_8c.html#a7f36b008f02088c86f76e98e05b55af5" title=" " alt="" coords="410,839,463,864"/>
<area shape="rect" href="../../dc/de6/bio_8c.html#a63c899c13b176ddf80064d32225e1298" title=" " alt="" coords="277,585,335,611"/>
<area shape="rect" href="../../d4/def/kalloc_8c.html#aced59ecf8411235f6dffc065236711a5" title=" " alt="" coords="549,2203,600,2228"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a1b57bfa0091c9be3ccc16dbb85ce3acf" title=" " alt="" coords="5,2343,80,2368"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a6d3019ea15a9bfdc5131ae97f3623c49" title=" " alt="" coords="393,2304,481,2329"/>
<area shape="rect" href="../../de/de9/vm_8c.html#aa883924e2f068c520b695cdc168e1603" title=" " alt="" coords="275,2317,337,2343"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a1c8a7a02e9391b5cf0984388216695c0" title=" " alt="" coords="136,2469,215,2495"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a81c8a6a0cae413bc81aa223f7f7b7205" title=" " alt="" coords="11,2469,75,2495"/>
<area shape="rect" href="../../d7/df8/log_8c.html#a7eacb0fbebe5ce4c7d3ddea15908b13d" title=" " alt="" coords="537,637,612,663"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ae70cc0370342e46f6db3bec367232457" title=" " alt="" coords="548,1343,601,1368"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a795e27a0cb916cfb41411ebbb9669ddf" title=" " alt="" coords="938,1951,1013,1976"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a69a135a0e8a06d9f306d77ebc0c1f7a0" title=" " alt="" coords="813,2001,869,2027"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a5341068f021beac8cf0032b97d231e6f" title=" " alt="" coords="938,1901,1013,1927"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#a7ae98824a008ffbc5506060227b6faa0" title=" " alt="" coords="816,5,867,31"/>
<area shape="rect" href="../../d7/df8/log_8c.html#ad5e79aaefb91f41b9ef6aeae7ecf4708" title=" " alt="" coords="947,2153,1003,2179"/>
<area shape="rect" href="../../de/de9/vm_8c.html#ac96c231d4053eaf4322c27d1f2cd9d49" title=" " alt="" coords="676,2608,740,2633"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#ae4e29916219b9293b37f9c34220694fe" title=" " alt="" coords="275,1949,337,1975"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a201acc8337a2893268b61ea5a1ee0d53" title=" " alt="" coords="940,2305,1011,2331"/>
<area shape="rect" href="../../dd/d06/mp_8c.html#a2fd0b66a17c5347541448ef906b7b2a2" title=" " alt="" coords="947,2355,1004,2380"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="945,1368,1006,1393"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="813,1419,869,1444"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="676,1621,740,1647"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a87c90f0ab2a1b11c2b55f4e483bb8493" title=" " alt="" coords="665,1419,751,1444"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad788da91743c333b5bed7c4a0dd12365" title=" " alt="" coords="813,1267,870,1292"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#a5bfb2661767bf2cc05982adeb9aaf227" title=" " alt="" coords="799,2683,884,2708"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#add82543cc6953d0173086d06bfcf76c7" title=" " alt="" coords="667,2733,749,2759"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#ab08793db282d79295235e593dc4cac82" title=" " alt="" coords="936,2759,1015,2784"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#a234ef6b6053ff23ff31ea66a611f92d6" title=" " alt="" coords="932,2709,1019,2735"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#aaad2d7a86d4859982dd9a132f5128ff2" title=" " alt="" coords="389,1645,484,1671"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a28ac85a90987662e306ca8efbfe16074" title=" " alt="" coords="129,1595,221,1620"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a6af7eb39268127d389792cec37785666" title=" " alt="" coords="128,1823,223,1848"/>
<area shape="rect" href="../../d7/df8/log_8c.html#ac96aa31ffc0500e749c62c4d377c21c9" title=" " alt="" coords="399,1143,474,1168"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a2ca17a3161c80e3e4894ec6a96e0a281" title=" " alt="" coords="551,1244,598,1269"/>
<area shape="rect" href="../../d0/d56/console_8c.html#aad3d6ca39f23bb6d2686d2967e415193" title=" " alt="" coords="532,1293,617,1319"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a45a59a61c8799cb754b4326a32c14dc4" title=" " alt="" coords="415,940,458,965"/>
</map>
</div>

</div>
</div>
<a id="a71fd35cd05f30866ae0ba1486415e786" name="a71fd35cd05f30866ae0ba1486415e786"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a71fd35cd05f30866ae0ba1486415e786">&#9670;&#160;</a></span>picenable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void picenable </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a8f19f54755d7fdec01e537228b10fbf6" name="a8f19f54755d7fdec01e537228b10fbf6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8f19f54755d7fdec01e537228b10fbf6">&#9670;&#160;</a></span>picinit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void picinit </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/da8/picirq_8c_source.html#l00011">11</a> of file <a class="el" href="../../d5/da8/picirq_8c_source.html">picirq.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   12</span>{</div>
<div class="line"><span class="lineno">   13</span>  <span class="comment">// mask all interrupts</span></div>
<div class="line"><span class="lineno">   14</span>  outb(<a class="code hl_define" href="../../d5/da8/picirq_8c.html#ad24a6214d0f5bb9bf67a8ac744907aa0">IO_PIC1</a>+1, 0xFF);</div>
<div class="line"><span class="lineno">   15</span>  outb(<a class="code hl_define" href="../../d5/da8/picirq_8c.html#ab858a4b80bd8950398355e678c578d7d">IO_PIC2</a>+1, 0xFF);</div>
<div class="line"><span class="lineno">   16</span>}</div>
<div class="ttc" id="apicirq_8c_html_ab858a4b80bd8950398355e678c578d7d"><div class="ttname"><a href="../../d5/da8/picirq_8c.html#ab858a4b80bd8950398355e678c578d7d">IO_PIC2</a></div><div class="ttdeci">#define IO_PIC2</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da8/picirq_8c_source.html#l00007">picirq.c:7</a></div></div>
<div class="ttc" id="apicirq_8c_html_ad24a6214d0f5bb9bf67a8ac744907aa0"><div class="ttname"><a href="../../d5/da8/picirq_8c.html#ad24a6214d0f5bb9bf67a8ac744907aa0">IO_PIC1</a></div><div class="ttdeci">#define IO_PIC1</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da8/picirq_8c_source.html#l00006">picirq.c:6</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9d293f913985937ee7a266fe5ddbfc77" name="a9d293f913985937ee7a266fe5ddbfc77"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9d293f913985937ee7a266fe5ddbfc77">&#9670;&#160;</a></span>pinit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pinit </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/dda/proc_8c_source.html#l00024">24</a> of file <a class="el" href="../../d3/dda/proc_8c_source.html">proc.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   25</span>{</div>
<div class="line"><span class="lineno">   26</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#ab56d728e6966819a0260c358d3ac3419">initlock</a>(&amp;<a class="code hl_variable" href="../../d3/dda/proc_8c.html#addf39d613ca9a58e7e6080a2e454421a">ptable</a>.lock, <span class="stringliteral">&quot;ptable&quot;</span>);</div>
<div class="line"><span class="lineno">   27</span>}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_a9d293f913985937ee7a266fe5ddbfc77_cgraph.png" border="0" usemap="#ad5/d64/defs_8h_a9d293f913985937ee7a266fe5ddbfc77_cgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_a9d293f913985937ee7a266fe5ddbfc77_cgraph" id="ad5/d64/defs_8h_a9d293f913985937ee7a266fe5ddbfc77_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,52,31"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#abda07b4a007b2e888d9d783920460b89" title=" " alt="" coords="100,5,163,31"/>
</map>
</div>

</div>
</div>
<a id="a3de41eab56ff42bea4d1ae78bbd1e472" name="a3de41eab56ff42bea4d1ae78bbd1e472"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3de41eab56ff42bea4d1ae78bbd1e472">&#9670;&#160;</a></span>pipealloc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int pipealloc </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d7/d3a/structfile.html">file</a> **&#160;</td>
          <td class="paramname"><em>f0</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d7/d3a/structfile.html">file</a> **&#160;</td>
          <td class="paramname"><em>f1</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/d47/pipe_8c_source.html#l00023">23</a> of file <a class="el" href="../../d1/d47/pipe_8c_source.html">pipe.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   24</span>{</div>
<div class="line"><span class="lineno">   25</span>  <span class="keyword">struct </span><a class="code hl_struct" href="../../d8/d53/structpipe.html">pipe</a> *p;</div>
<div class="line"><span class="lineno">   26</span> </div>
<div class="line"><span class="lineno">   27</span>  p = 0;</div>
<div class="line"><span class="lineno">   28</span>  *f0 = *f1 = 0;</div>
<div class="line"><span class="lineno">   29</span>  <span class="keywordflow">if</span>((*f0 = <a class="code hl_function" href="../../d5/d64/defs_8h.html#ac56b15561658d0e74ce1c53309b8f97d">filealloc</a>()) == 0 || (*f1 = <a class="code hl_function" href="../../d5/d64/defs_8h.html#ac56b15561658d0e74ce1c53309b8f97d">filealloc</a>()) == 0)</div>
<div class="line"><span class="lineno">   30</span>    <span class="keywordflow">goto</span> bad;</div>
<div class="line"><span class="lineno">   31</span>  <span class="keywordflow">if</span>((p = (<span class="keyword">struct</span> <a class="code hl_struct" href="../../d8/d53/structpipe.html">pipe</a>*)<a class="code hl_function" href="../../d5/d64/defs_8h.html#a5e965f6365c721b5b23c12d16d45c3dc">kalloc</a>()) == 0)</div>
<div class="line"><span class="lineno">   32</span>    <span class="keywordflow">goto</span> bad;</div>
<div class="line"><span class="lineno">   33</span>  p-&gt;<a class="code hl_variable" href="../../d8/d53/structpipe.html#a7bdc57b39ef97dda61e468ad9e8dbfba">readopen</a> = 1;</div>
<div class="line"><span class="lineno">   34</span>  p-&gt;<a class="code hl_variable" href="../../d8/d53/structpipe.html#a9538da698ddd63615c991a318094663b">writeopen</a> = 1;</div>
<div class="line"><span class="lineno">   35</span>  p-&gt;<a class="code hl_variable" href="../../d8/d53/structpipe.html#a419b6fc2780013358de51c91371dac66">nwrite</a> = 0;</div>
<div class="line"><span class="lineno">   36</span>  p-&gt;<a class="code hl_variable" href="../../d8/d53/structpipe.html#ad71eb56c445f9178dac07ae47f352fd1">nread</a> = 0;</div>
<div class="line"><span class="lineno">   37</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#ab56d728e6966819a0260c358d3ac3419">initlock</a>(&amp;p-&gt;<a class="code hl_variable" href="../../d8/d53/structpipe.html#a0ce399a2ba316d11cb8e678069bfd5b4">lock</a>, <span class="stringliteral">&quot;pipe&quot;</span>);</div>
<div class="line"><span class="lineno">   38</span>  (*f0)-&gt;type = FD_PIPE;</div>
<div class="line"><span class="lineno">   39</span>  (*f0)-&gt;readable = 1;</div>
<div class="line"><span class="lineno">   40</span>  (*f0)-&gt;writable = 0;</div>
<div class="line"><span class="lineno">   41</span>  (*f0)-&gt;pipe = p;</div>
<div class="line"><span class="lineno">   42</span>  (*f1)-&gt;type = FD_PIPE;</div>
<div class="line"><span class="lineno">   43</span>  (*f1)-&gt;readable = 0;</div>
<div class="line"><span class="lineno">   44</span>  (*f1)-&gt;writable = 1;</div>
<div class="line"><span class="lineno">   45</span>  (*f1)-&gt;pipe = p;</div>
<div class="line"><span class="lineno">   46</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">   47</span> </div>
<div class="line"><span class="lineno">   48</span><span class="comment">//PAGEBREAK: 20</span></div>
<div class="line"><span class="lineno">   49</span> bad:</div>
<div class="line"><span class="lineno">   50</span>  <span class="keywordflow">if</span>(p)</div>
<div class="line"><span class="lineno">   51</span>    <a class="code hl_function" href="../../d5/d64/defs_8h.html#ae79d6a7d0901b7c081cfded3f916d5bd">kfree</a>((<span class="keywordtype">char</span>*)p);</div>
<div class="line"><span class="lineno">   52</span>  <span class="keywordflow">if</span>(*f0)</div>
<div class="line"><span class="lineno">   53</span>    <a class="code hl_function" href="../../d5/d64/defs_8h.html#ac865ee0b2d70f753d61d1fefef9de0f6">fileclose</a>(*f0);</div>
<div class="line"><span class="lineno">   54</span>  <span class="keywordflow">if</span>(*f1)</div>
<div class="line"><span class="lineno">   55</span>    <a class="code hl_function" href="../../d5/d64/defs_8h.html#ac865ee0b2d70f753d61d1fefef9de0f6">fileclose</a>(*f1);</div>
<div class="line"><span class="lineno">   56</span>  <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">   57</span>}</div>
<div class="ttc" id="adefs_8h_html_ac56b15561658d0e74ce1c53309b8f97d"><div class="ttname"><a href="../../d5/d64/defs_8h.html#ac56b15561658d0e74ce1c53309b8f97d">filealloc</a></div><div class="ttdeci">struct file * filealloc(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l00027">file.c:27</a></div></div>
<div class="ttc" id="astructpipe_html"><div class="ttname"><a href="../../d8/d53/structpipe.html">pipe</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d47/pipe_8c_source.html#l00013">pipe.c:13</a></div></div>
<div class="ttc" id="astructpipe_html_a0ce399a2ba316d11cb8e678069bfd5b4"><div class="ttname"><a href="../../d8/d53/structpipe.html#a0ce399a2ba316d11cb8e678069bfd5b4">pipe::lock</a></div><div class="ttdeci">struct spinlock lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d47/pipe_8c_source.html#l00014">pipe.c:14</a></div></div>
<div class="ttc" id="astructpipe_html_a419b6fc2780013358de51c91371dac66"><div class="ttname"><a href="../../d8/d53/structpipe.html#a419b6fc2780013358de51c91371dac66">pipe::nwrite</a></div><div class="ttdeci">uint nwrite</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d47/pipe_8c_source.html#l00017">pipe.c:17</a></div></div>
<div class="ttc" id="astructpipe_html_a7bdc57b39ef97dda61e468ad9e8dbfba"><div class="ttname"><a href="../../d8/d53/structpipe.html#a7bdc57b39ef97dda61e468ad9e8dbfba">pipe::readopen</a></div><div class="ttdeci">int readopen</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d47/pipe_8c_source.html#l00018">pipe.c:18</a></div></div>
<div class="ttc" id="astructpipe_html_a9538da698ddd63615c991a318094663b"><div class="ttname"><a href="../../d8/d53/structpipe.html#a9538da698ddd63615c991a318094663b">pipe::writeopen</a></div><div class="ttdeci">int writeopen</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d47/pipe_8c_source.html#l00019">pipe.c:19</a></div></div>
<div class="ttc" id="astructpipe_html_ad71eb56c445f9178dac07ae47f352fd1"><div class="ttname"><a href="../../d8/d53/structpipe.html#ad71eb56c445f9178dac07ae47f352fd1">pipe::nread</a></div><div class="ttdeci">uint nread</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d47/pipe_8c_source.html#l00016">pipe.c:16</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_a3de41eab56ff42bea4d1ae78bbd1e472_cgraph.png" border="0" usemap="#ad5/d64/defs_8h_a3de41eab56ff42bea4d1ae78bbd1e472_cgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_a3de41eab56ff42bea4d1ae78bbd1e472_cgraph" id="ad5/d64/defs_8h_a3de41eab56ff42bea4d1ae78bbd1e472_cgraph">
<area shape="rect" title=" " alt="" coords="5,753,79,778"/>
<area shape="rect" href="../../d6/d13/file_8c.html#ac56b15561658d0e74ce1c53309b8f97d" title=" " alt="" coords="973,43,1039,69"/>
<area shape="rect" href="../../d6/d13/file_8c.html#ae557c81ab89c24219146144bb6adaa2c" title=" " alt="" coords="127,753,197,778"/>
<area shape="rect" href="../../d4/def/kalloc_8c.html#aced59ecf8411235f6dffc065236711a5" title=" " alt="" coords="981,854,1031,879"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#abda07b4a007b2e888d9d783920460b89" title=" " alt="" coords="131,1487,193,1513"/>
<area shape="rect" href="../../d4/def/kalloc_8c.html#a5e965f6365c721b5b23c12d16d45c3dc" title=" " alt="" coords="978,145,1034,170"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="1104,1107,1168,1133"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="1828,550,1892,575"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="1227,1057,1319,1082"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="1241,1535,1304,1561"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="1477,1614,1539,1639"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="1587,1069,1640,1094"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="1367,1614,1429,1639"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="1940,1589,1996,1614"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="1705,1462,1763,1487"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="1705,930,1763,955"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="1688,1018,1780,1043"/>
<area shape="rect" href="../../d7/df8/log_8c.html#ac96aa31ffc0500e749c62c4d377c21c9" title=" " alt="" coords="561,1449,635,1474"/>
<area shape="rect" href="../../d7/df8/log_8c.html#ac0f12be0ca0de555e60b27b06a57a65b" title=" " alt="" coords="839,449,903,474"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#ab3c447f135c68e4c3c1f8d5866f6e77b" title=" " alt="" coords="245,753,288,778"/>
<area shape="rect" href="../../d1/d47/pipe_8c.html#a48642f54734698f6f881ee07723292cb" title=" " alt="" coords="833,550,910,575"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ae70cc0370342e46f6db3bec367232457" title=" " alt="" coords="708,1487,761,1513"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a41af0935f3989aae450cf8988cd9c3a9" title=" " alt="" coords="973,1867,1039,1893"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad788da91743c333b5bed7c4a0dd12365" title=" " alt="" coords="843,1665,900,1690"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a9fa00b0be5d3c4781048861e2506eb63" title=" " alt="" coords="967,1665,1045,1690"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a1d9e7047d3dfb57809a2541d8387705e" title=" " alt="" coords="1107,1463,1165,1489"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a02ca0670bc1fe12e38453082631ff360" title=" " alt="" coords="1093,1513,1179,1538"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a87c90f0ab2a1b11c2b55f4e483bb8493" title=" " alt="" coords="1230,1766,1315,1791"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a4a34d9f03e436cfa09b88f735f6ee952" title=" " alt="" coords="973,550,1039,575"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#aaad2d7a86d4859982dd9a132f5128ff2" title=" " alt="" coords="551,1259,645,1285"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a7220afa8e5f4bea540eb95879ea7df6e" title=" " alt="" coords="336,753,400,778"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#aa997067c2c9bfef15af6fa0a10c20f4a" title=" " alt="" coords="824,601,919,626"/>
<area shape="rect" href="../../dc/de6/bio_8c.html#a30b8d2ef2300ed8e3d879a428fe39898" title=" " alt="" coords="448,829,503,854"/>
<area shape="rect" href="../../d1/db0/string_8c.html#a07f97e2ed1ce37955192d52de8f4911f" title=" " alt="" coords="693,778,776,803"/>
<area shape="rect" href="../../dc/de6/bio_8c.html#ab5335aeb503731104314321a78a6d727" title=" " alt="" coords="706,658,763,683"/>
<area shape="rect" href="../../d7/df8/log_8c.html#a7eacb0fbebe5ce4c7d3ddea15908b13d" title=" " alt="" coords="969,753,1043,778"/>
<area shape="rect" href="../../da/d9b/memide_8c.html#a7f36b008f02088c86f76e98e05b55af5" title=" " alt="" coords="571,829,625,854"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#a6fdbe54cbecd8fc67d74793b27adcf05" title=" " alt="" coords="824,879,919,905"/>
<area shape="rect" href="../../db/d8a/ulib_8c.html#aa9cdc2409c15ccd5ee3b2031576f4093" title=" " alt="" coords="1101,1057,1171,1082"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_a3de41eab56ff42bea4d1ae78bbd1e472_icgraph.png" border="0" usemap="#ad5/d64/defs_8h_a3de41eab56ff42bea4d1ae78bbd1e472_icgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_a3de41eab56ff42bea4d1ae78bbd1e472_icgraph" id="ad5/d64/defs_8h_a3de41eab56ff42bea4d1ae78bbd1e472_icgraph">
<area shape="rect" title=" " alt="" coords="128,5,201,31"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a9a70db941def46ec25939e6c2d30e399" title=" " alt="" coords="5,5,80,31"/>
</map>
</div>

</div>
</div>
<a id="af6220973e389c74782d76ae641a5e7db" name="af6220973e389c74782d76ae641a5e7db"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af6220973e389c74782d76ae641a5e7db">&#9670;&#160;</a></span>pipeclose()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pipeclose </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d53/structpipe.html">pipe</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>writable</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/d47/pipe_8c_source.html#l00060">60</a> of file <a class="el" href="../../d1/d47/pipe_8c_source.html">pipe.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   61</span>{</div>
<div class="line"><span class="lineno">   62</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#afe4ef8638f1ecb962a6e67fb086ee3b8">acquire</a>(&amp;p-&gt;<a class="code hl_variable" href="../../d8/d53/structpipe.html#a0ce399a2ba316d11cb8e678069bfd5b4">lock</a>);</div>
<div class="line"><span class="lineno">   63</span>  <span class="keywordflow">if</span>(writable){</div>
<div class="line"><span class="lineno">   64</span>    p-&gt;<a class="code hl_variable" href="../../d8/d53/structpipe.html#a9538da698ddd63615c991a318094663b">writeopen</a> = 0;</div>
<div class="line"><span class="lineno">   65</span>    <a class="code hl_function" href="../../d5/d64/defs_8h.html#a245b56417239f499389b2e806bd99254">wakeup</a>(&amp;p-&gt;<a class="code hl_variable" href="../../d8/d53/structpipe.html#ad71eb56c445f9178dac07ae47f352fd1">nread</a>);</div>
<div class="line"><span class="lineno">   66</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">   67</span>    p-&gt;<a class="code hl_variable" href="../../d8/d53/structpipe.html#a7bdc57b39ef97dda61e468ad9e8dbfba">readopen</a> = 0;</div>
<div class="line"><span class="lineno">   68</span>    <a class="code hl_function" href="../../d5/d64/defs_8h.html#a245b56417239f499389b2e806bd99254">wakeup</a>(&amp;p-&gt;<a class="code hl_variable" href="../../d8/d53/structpipe.html#a419b6fc2780013358de51c91371dac66">nwrite</a>);</div>
<div class="line"><span class="lineno">   69</span>  }</div>
<div class="line"><span class="lineno">   70</span>  <span class="keywordflow">if</span>(p-&gt;<a class="code hl_variable" href="../../d8/d53/structpipe.html#a7bdc57b39ef97dda61e468ad9e8dbfba">readopen</a> == 0 &amp;&amp; p-&gt;<a class="code hl_variable" href="../../d8/d53/structpipe.html#a9538da698ddd63615c991a318094663b">writeopen</a> == 0){</div>
<div class="line"><span class="lineno">   71</span>    <a class="code hl_function" href="../../d5/d64/defs_8h.html#a4f8616948f3dbce65671f666eed1d669">release</a>(&amp;p-&gt;<a class="code hl_variable" href="../../d8/d53/structpipe.html#a0ce399a2ba316d11cb8e678069bfd5b4">lock</a>);</div>
<div class="line"><span class="lineno">   72</span>    <a class="code hl_function" href="../../d5/d64/defs_8h.html#ae79d6a7d0901b7c081cfded3f916d5bd">kfree</a>((<span class="keywordtype">char</span>*)p);</div>
<div class="line"><span class="lineno">   73</span>  } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">   74</span>    <a class="code hl_function" href="../../d5/d64/defs_8h.html#a4f8616948f3dbce65671f666eed1d669">release</a>(&amp;p-&gt;<a class="code hl_variable" href="../../d8/d53/structpipe.html#a0ce399a2ba316d11cb8e678069bfd5b4">lock</a>);</div>
<div class="line"><span class="lineno">   75</span>}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_af6220973e389c74782d76ae641a5e7db_cgraph.png" border="0" usemap="#ad5/d64/defs_8h_af6220973e389c74782d76ae641a5e7db_cgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_af6220973e389c74782d76ae641a5e7db_cgraph" id="ad5/d64/defs_8h_af6220973e389c74782d76ae641a5e7db_cgraph">
<area shape="rect" title=" " alt="" coords="5,422,83,447"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="248,295,312,321"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="964,346,1028,371"/>
<area shape="rect" href="../../d4/def/kalloc_8c.html#aced59ecf8411235f6dffc065236711a5" title=" " alt="" coords="139,447,189,473"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a4a34d9f03e436cfa09b88f735f6ee952" title=" " alt="" coords="131,397,197,422"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="363,245,455,270"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="377,93,440,118"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="613,145,675,170"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="723,295,776,321"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="503,145,565,170"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="1076,119,1132,145"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="841,145,899,170"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="841,346,899,371"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="824,297,916,322"/>
<area shape="rect" href="../../db/d8a/ulib_8c.html#aa9cdc2409c15ccd5ee3b2031576f4093" title=" " alt="" coords="245,498,315,523"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_af6220973e389c74782d76ae641a5e7db_icgraph.png" border="0" usemap="#ad5/d64/defs_8h_af6220973e389c74782d76ae641a5e7db_icgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_af6220973e389c74782d76ae641a5e7db_icgraph" id="ad5/d64/defs_8h_af6220973e389c74782d76ae641a5e7db_icgraph">
<area shape="rect" title=" " alt="" coords="508,2083,585,2108"/>
<area shape="rect" href="../../d6/d13/file_8c.html#ae557c81ab89c24219146144bb6adaa2c" title=" " alt="" coords="389,2083,460,2108"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#aaf98ef7cdde3a0dfb2e49919de3298b1" title=" " alt="" coords="279,1044,322,1069"/>
<area shape="rect" href="../../d1/d47/pipe_8c.html#a9d6f0c526148e6002b6776619c7563e6" title=" " alt="" coords="264,2083,337,2108"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a9a70db941def46ec25939e6c2d30e399" title=" " alt="" coords="128,2083,203,2108"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a32945488fd39bc405757177b37cd2250" title=" " alt="" coords="260,2132,341,2157"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a74e45efc661ca17c068bc283b3842e6d" title=" " alt="" coords="261,2181,340,2207"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a77cc2edce6e78f22dd9eb377462762f2" title=" " alt="" coords="131,847,200,872"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#ac5b5d4517586be6396b4f3b37445945a" title=" " alt="" coords="126,896,205,921"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#aa0d46fcb43667c805b84ea7e1ff6100a" title=" " alt="" coords="139,945,192,971"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a86fe524d99d69c18a335512cf3405b31" title=" " alt="" coords="137,995,193,1020"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a57e55b2d0161d62bb99765ca3de43e35" title=" " alt="" coords="132,1044,199,1069"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a0b0ff95e564df3c3e8fc977226b75de7" title=" " alt="" coords="133,1093,198,1119"/>
<area shape="rect" href="../../d1/d8f/cat_8c.html#a90a33618884bcf5e892297879bc016ff" title=" " alt="" coords="145,107,185,132"/>
<area shape="rect" href="../../d1/d8f/cat_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="13,81,63,107"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a5a12affe4fdfaa172d85da9a6adf98d2" title=" " alt="" coords="126,1143,205,1168"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a425a0efe4f459decf4b5ea14517ab3cf" title=" " alt="" coords="119,1192,212,1217"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#aedd6d3f148dd5c99b47900215c1ac43f" title=" " alt="" coords="139,1241,192,1267"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a8db9f9a2634bab29096bab0b8bc6945c" title=" " alt="" coords="136,600,195,625"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a6f94e3b215d069b5419e87bafe80799a" title=" " alt="" coords="129,1291,201,1316"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a8faab06cc4d48335076b368f02709ee2" title=" " alt="" coords="122,1340,209,1365"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a330ed2370fe27045b8bec1eb0bd7818f" title=" " alt="" coords="132,1389,199,1415"/>
<area shape="rect" href="../../d5/de1/forktest_8c.html#a0ef8ccf57bc8c491407ec513b234f83c" title=" " alt="" coords="132,797,199,823"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a77a4432bc67dfb513f1c1d698c2c4ea6" title=" " alt="" coords="131,1439,199,1464"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#abf4af50e65630225208fef177e267efb" title=" " alt="" coords="131,1537,200,1563"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#ac9fe56d8f6e4ed1c9677b06cb7b325e6" title=" " alt="" coords="133,1587,198,1612"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a267227083b00d0cc3141b34f5152ae04" title=" " alt="" coords="145,1636,185,1661"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a4eeee588d4689a58fc140a7d5d7b0608" title=" " alt="" coords="133,1784,197,1809"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a1740f29f4ce6d3060fd79a9312edc315" title=" " alt="" coords="127,1833,203,1859"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#aa1c6e6e76813ccb29a29bb119dba668a" title=" " alt="" coords="140,1883,191,1908"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a3208ed001a225f5d9ea3fb37f46810c7" title=" " alt="" coords="119,156,212,181"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#ae7c61791dd2cfb8ad59b4c6e87685c07" title=" " alt="" coords="129,205,201,231"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#ada38fdb2913f040f6eeb6189eeb42d32" title=" " alt="" coords="139,2033,192,2059"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#aedbeff6afe5d4e22330c7e6b5e6df893" title=" " alt="" coords="5,2008,71,2033"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a16ae754fb9c5622d44d0c3ce62ad7c49" title=" " alt="" coords="139,255,192,280"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a6b22568d42b584ed4b0dc4e2b0677013" title=" " alt="" coords="138,304,193,329"/>
<area shape="rect" href="../../d7/d1f/mkfs_8c.html#a22ea835ad23cd716a962f30e4882ee80" title=" " alt="" coords="140,1488,191,1513"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a06636ed0cda58c748d68e82d33d1afce" title=" " alt="" coords="131,353,200,379"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a02e1ca3f4db5f4bf8a683a0b7c18cc43" title=" " alt="" coords="129,403,201,428"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a5d39024e15998d6a6865f4cd0f69738b" title=" " alt="" coords="137,452,194,477"/>
<area shape="rect" href="../../dd/d35/sysproc_8c.html#aee72faa31a0c32b410aba558ef1d59f2" title=" " alt="" coords="130,1685,201,1711"/>
<area shape="rect" href="../../dc/d6f/trap_8c.html#a372d166e36c086c91e5f5d81e5fead3a" title=" " alt="" coords="143,1735,187,1760"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a6888f9f6d973f81f73091d1530ad212b" title=" " alt="" coords="146,501,185,527"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a3331ced6fb67502a2e5277260d4f5aec" title=" " alt="" coords="125,551,206,576"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a98d8496ecb698b9400831f2718d805c3" title=" " alt="" coords="121,649,210,675"/>
<area shape="rect" href="../../d3/d7a/wc_8c.html#a4f21d23f0e3167f510b9f393b185751c" title=" " alt="" coords="146,1932,185,1957"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a3a007a46ea6310b39a233e45d439f11a" title=" " alt="" coords="129,699,201,724"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a48ac3cbd37dcf4c4e08b0572b3a0e9f3" title=" " alt="" coords="126,748,205,773"/>
<area shape="rect" href="../../d7/d1f/mkfs_8c.html#ac62d827d836d1807e4d6f365f32348bb" title=" " alt="" coords="137,5,194,31"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="13,995,63,1020"/>
</map>
</div>

</div>
</div>
<a id="acd589a0d0d6d34b446baf33755eef519" name="acd589a0d0d6d34b446baf33755eef519"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acd589a0d0d6d34b446baf33755eef519">&#9670;&#160;</a></span>piperead()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int piperead </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d53/structpipe.html">pipe</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>n</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/d47/pipe_8c_source.html#l00101">101</a> of file <a class="el" href="../../d1/d47/pipe_8c_source.html">pipe.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  102</span>{</div>
<div class="line"><span class="lineno">  103</span>  <span class="keywordtype">int</span> i;</div>
<div class="line"><span class="lineno">  104</span> </div>
<div class="line"><span class="lineno">  105</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#afe4ef8638f1ecb962a6e67fb086ee3b8">acquire</a>(&amp;p-&gt;<a class="code hl_variable" href="../../d8/d53/structpipe.html#a0ce399a2ba316d11cb8e678069bfd5b4">lock</a>);</div>
<div class="line"><span class="lineno">  106</span>  <span class="keywordflow">while</span>(p-&gt;<a class="code hl_variable" href="../../d8/d53/structpipe.html#ad71eb56c445f9178dac07ae47f352fd1">nread</a> == p-&gt;<a class="code hl_variable" href="../../d8/d53/structpipe.html#a419b6fc2780013358de51c91371dac66">nwrite</a> &amp;&amp; p-&gt;<a class="code hl_variable" href="../../d8/d53/structpipe.html#a9538da698ddd63615c991a318094663b">writeopen</a>){  <span class="comment">//DOC: pipe-empty</span></div>
<div class="line"><span class="lineno">  107</span>    <span class="keywordflow">if</span>(<a class="code hl_function" href="../../d5/d64/defs_8h.html#a3d2327db1e34643f4a9e6a07c8cc62c6">myproc</a>()-&gt;killed){</div>
<div class="line"><span class="lineno">  108</span>      <a class="code hl_function" href="../../d5/d64/defs_8h.html#a4f8616948f3dbce65671f666eed1d669">release</a>(&amp;p-&gt;<a class="code hl_variable" href="../../d8/d53/structpipe.html#a0ce399a2ba316d11cb8e678069bfd5b4">lock</a>);</div>
<div class="line"><span class="lineno">  109</span>      <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  110</span>    }</div>
<div class="line"><span class="lineno">  111</span>    <a class="code hl_function" href="../../d5/d64/defs_8h.html#aca4a88f06b3ebbcc04330f7ae06c8507">sleep</a>(&amp;p-&gt;<a class="code hl_variable" href="../../d8/d53/structpipe.html#ad71eb56c445f9178dac07ae47f352fd1">nread</a>, &amp;p-&gt;<a class="code hl_variable" href="../../d8/d53/structpipe.html#a0ce399a2ba316d11cb8e678069bfd5b4">lock</a>); <span class="comment">//DOC: piperead-sleep</span></div>
<div class="line"><span class="lineno">  112</span>  }</div>
<div class="line"><span class="lineno">  113</span>  <span class="keywordflow">for</span>(i = 0; i &lt; n; i++){  <span class="comment">//DOC: piperead-copy</span></div>
<div class="line"><span class="lineno">  114</span>    <span class="keywordflow">if</span>(p-&gt;<a class="code hl_variable" href="../../d8/d53/structpipe.html#ad71eb56c445f9178dac07ae47f352fd1">nread</a> == p-&gt;<a class="code hl_variable" href="../../d8/d53/structpipe.html#a419b6fc2780013358de51c91371dac66">nwrite</a>)</div>
<div class="line"><span class="lineno">  115</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  116</span>    addr[i] = p-&gt;<a class="code hl_variable" href="../../d8/d53/structpipe.html#ab02ae9fa0b8b092512c28c7c080f0c7b">data</a>[p-&gt;<a class="code hl_variable" href="../../d8/d53/structpipe.html#ad71eb56c445f9178dac07ae47f352fd1">nread</a>++ % <a class="code hl_define" href="../../d1/d47/pipe_8c.html#ad3dc9214a710d7a6c516cbaa2a12a1de">PIPESIZE</a>];</div>
<div class="line"><span class="lineno">  117</span>  }</div>
<div class="line"><span class="lineno">  118</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#a245b56417239f499389b2e806bd99254">wakeup</a>(&amp;p-&gt;<a class="code hl_variable" href="../../d8/d53/structpipe.html#a419b6fc2780013358de51c91371dac66">nwrite</a>);  <span class="comment">//DOC: piperead-wakeup</span></div>
<div class="line"><span class="lineno">  119</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#a4f8616948f3dbce65671f666eed1d669">release</a>(&amp;p-&gt;<a class="code hl_variable" href="../../d8/d53/structpipe.html#a0ce399a2ba316d11cb8e678069bfd5b4">lock</a>);</div>
<div class="line"><span class="lineno">  120</span>  <span class="keywordflow">return</span> i;</div>
<div class="line"><span class="lineno">  121</span>}</div>
<div class="ttc" id="apipe_8c_html_ad3dc9214a710d7a6c516cbaa2a12a1de"><div class="ttname"><a href="../../d1/d47/pipe_8c.html#ad3dc9214a710d7a6c516cbaa2a12a1de">PIPESIZE</a></div><div class="ttdeci">#define PIPESIZE</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d47/pipe_8c_source.html#l00011">pipe.c:11</a></div></div>
<div class="ttc" id="astructpipe_html_ab02ae9fa0b8b092512c28c7c080f0c7b"><div class="ttname"><a href="../../d8/d53/structpipe.html#ab02ae9fa0b8b092512c28c7c080f0c7b">pipe::data</a></div><div class="ttdeci">char data[PIPESIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d47/pipe_8c_source.html#l00015">pipe.c:15</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_acd589a0d0d6d34b446baf33755eef519_cgraph.png" border="0" usemap="#ad5/d64/defs_8h_acd589a0d0d6d34b446baf33755eef519_cgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_acd589a0d0d6d34b446baf33755eef519_cgraph" id="ad5/d64/defs_8h_acd589a0d0d6d34b446baf33755eef519_cgraph">
<area shape="rect" title=" " alt="" coords="5,905,76,930"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="468,727,532,753"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="1192,677,1256,702"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a41af0935f3989aae450cf8988cd9c3a9" title=" " alt="" coords="337,246,403,271"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ae70cc0370342e46f6db3bec367232457" title=" " alt="" coords="124,778,177,803"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a4a34d9f03e436cfa09b88f735f6ee952" title=" " alt="" coords="337,955,403,981"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="591,753,683,778"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="605,195,668,221"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="841,377,903,402"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="951,651,1004,677"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="731,347,793,373"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="1304,278,1360,303"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="1069,411,1127,437"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="1069,702,1127,727"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="1052,601,1144,626"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad788da91743c333b5bed7c4a0dd12365" title=" " alt="" coords="225,525,283,550"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a9fa00b0be5d3c4781048861e2506eb63" title=" " alt="" coords="331,525,409,550"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a1d9e7047d3dfb57809a2541d8387705e" title=" " alt="" coords="471,601,529,626"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a02ca0670bc1fe12e38453082631ff360" title=" " alt="" coords="457,499,543,525"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a87c90f0ab2a1b11c2b55f4e483bb8493" title=" " alt="" coords="594,398,679,423"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_acd589a0d0d6d34b446baf33755eef519_icgraph.png" border="0" usemap="#ad5/d64/defs_8h_acd589a0d0d6d34b446baf33755eef519_icgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_acd589a0d0d6d34b446baf33755eef519_icgraph" id="ad5/d64/defs_8h_acd589a0d0d6d34b446baf33755eef519_icgraph">
<area shape="rect" title=" " alt="" coords="240,5,311,31"/>
<area shape="rect" href="../../d6/d13/file_8c.html#a1dc8c87c7e48bdaaf98e9c7047928f29" title=" " alt="" coords="128,5,192,31"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a54bf714d9e898cbdcbc061b280bbfae0" title=" " alt="" coords="5,5,80,31"/>
</map>
</div>

</div>
</div>
<a id="ae63b0db4ca2cbb2025b89d977c6535b1" name="ae63b0db4ca2cbb2025b89d977c6535b1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae63b0db4ca2cbb2025b89d977c6535b1">&#9670;&#160;</a></span>pipewrite()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int pipewrite </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d53/structpipe.html">pipe</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>n</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/d47/pipe_8c_source.html#l00079">79</a> of file <a class="el" href="../../d1/d47/pipe_8c_source.html">pipe.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   80</span>{</div>
<div class="line"><span class="lineno">   81</span>  <span class="keywordtype">int</span> i;</div>
<div class="line"><span class="lineno">   82</span> </div>
<div class="line"><span class="lineno">   83</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#afe4ef8638f1ecb962a6e67fb086ee3b8">acquire</a>(&amp;p-&gt;<a class="code hl_variable" href="../../d8/d53/structpipe.html#a0ce399a2ba316d11cb8e678069bfd5b4">lock</a>);</div>
<div class="line"><span class="lineno">   84</span>  <span class="keywordflow">for</span>(i = 0; i &lt; n; i++){</div>
<div class="line"><span class="lineno">   85</span>    <span class="keywordflow">while</span>(p-&gt;<a class="code hl_variable" href="../../d8/d53/structpipe.html#a419b6fc2780013358de51c91371dac66">nwrite</a> == p-&gt;<a class="code hl_variable" href="../../d8/d53/structpipe.html#ad71eb56c445f9178dac07ae47f352fd1">nread</a> + <a class="code hl_define" href="../../d1/d47/pipe_8c.html#ad3dc9214a710d7a6c516cbaa2a12a1de">PIPESIZE</a>){  <span class="comment">//DOC: pipewrite-full</span></div>
<div class="line"><span class="lineno">   86</span>      <span class="keywordflow">if</span>(p-&gt;<a class="code hl_variable" href="../../d8/d53/structpipe.html#a7bdc57b39ef97dda61e468ad9e8dbfba">readopen</a> == 0 || <a class="code hl_function" href="../../d5/d64/defs_8h.html#a3d2327db1e34643f4a9e6a07c8cc62c6">myproc</a>()-&gt;killed){</div>
<div class="line"><span class="lineno">   87</span>        <a class="code hl_function" href="../../d5/d64/defs_8h.html#a4f8616948f3dbce65671f666eed1d669">release</a>(&amp;p-&gt;<a class="code hl_variable" href="../../d8/d53/structpipe.html#a0ce399a2ba316d11cb8e678069bfd5b4">lock</a>);</div>
<div class="line"><span class="lineno">   88</span>        <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">   89</span>      }</div>
<div class="line"><span class="lineno">   90</span>      <a class="code hl_function" href="../../d5/d64/defs_8h.html#a245b56417239f499389b2e806bd99254">wakeup</a>(&amp;p-&gt;<a class="code hl_variable" href="../../d8/d53/structpipe.html#ad71eb56c445f9178dac07ae47f352fd1">nread</a>);</div>
<div class="line"><span class="lineno">   91</span>      <a class="code hl_function" href="../../d5/d64/defs_8h.html#aca4a88f06b3ebbcc04330f7ae06c8507">sleep</a>(&amp;p-&gt;<a class="code hl_variable" href="../../d8/d53/structpipe.html#a419b6fc2780013358de51c91371dac66">nwrite</a>, &amp;p-&gt;<a class="code hl_variable" href="../../d8/d53/structpipe.html#a0ce399a2ba316d11cb8e678069bfd5b4">lock</a>);  <span class="comment">//DOC: pipewrite-sleep</span></div>
<div class="line"><span class="lineno">   92</span>    }</div>
<div class="line"><span class="lineno">   93</span>    p-&gt;<a class="code hl_variable" href="../../d8/d53/structpipe.html#ab02ae9fa0b8b092512c28c7c080f0c7b">data</a>[p-&gt;<a class="code hl_variable" href="../../d8/d53/structpipe.html#a419b6fc2780013358de51c91371dac66">nwrite</a>++ % <a class="code hl_define" href="../../d1/d47/pipe_8c.html#ad3dc9214a710d7a6c516cbaa2a12a1de">PIPESIZE</a>] = addr[i];</div>
<div class="line"><span class="lineno">   94</span>  }</div>
<div class="line"><span class="lineno">   95</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#a245b56417239f499389b2e806bd99254">wakeup</a>(&amp;p-&gt;<a class="code hl_variable" href="../../d8/d53/structpipe.html#ad71eb56c445f9178dac07ae47f352fd1">nread</a>);  <span class="comment">//DOC: pipewrite-wakeup1</span></div>
<div class="line"><span class="lineno">   96</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#a4f8616948f3dbce65671f666eed1d669">release</a>(&amp;p-&gt;<a class="code hl_variable" href="../../d8/d53/structpipe.html#a0ce399a2ba316d11cb8e678069bfd5b4">lock</a>);</div>
<div class="line"><span class="lineno">   97</span>  <span class="keywordflow">return</span> n;</div>
<div class="line"><span class="lineno">   98</span>}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_ae63b0db4ca2cbb2025b89d977c6535b1_cgraph.png" border="0" usemap="#ad5/d64/defs_8h_ae63b0db4ca2cbb2025b89d977c6535b1_cgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_ae63b0db4ca2cbb2025b89d977c6535b1_cgraph" id="ad5/d64/defs_8h_ae63b0db4ca2cbb2025b89d977c6535b1_cgraph">
<area shape="rect" title=" " alt="" coords="5,905,80,930"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="472,727,536,753"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="1196,677,1260,702"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a41af0935f3989aae450cf8988cd9c3a9" title=" " alt="" coords="341,246,407,271"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ae70cc0370342e46f6db3bec367232457" title=" " alt="" coords="128,778,181,803"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a4a34d9f03e436cfa09b88f735f6ee952" title=" " alt="" coords="341,955,407,981"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="595,753,687,778"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="609,195,672,221"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="845,377,907,402"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="955,651,1008,677"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="735,347,797,373"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="1308,278,1364,303"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="1073,411,1131,437"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="1073,702,1131,727"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="1056,601,1148,626"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad788da91743c333b5bed7c4a0dd12365" title=" " alt="" coords="229,525,287,550"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a9fa00b0be5d3c4781048861e2506eb63" title=" " alt="" coords="335,525,413,550"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a1d9e7047d3dfb57809a2541d8387705e" title=" " alt="" coords="475,601,533,626"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a02ca0670bc1fe12e38453082631ff360" title=" " alt="" coords="461,499,547,525"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a87c90f0ab2a1b11c2b55f4e483bb8493" title=" " alt="" coords="598,398,683,423"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_ae63b0db4ca2cbb2025b89d977c6535b1_icgraph.png" border="0" usemap="#ad5/d64/defs_8h_ae63b0db4ca2cbb2025b89d977c6535b1_icgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_ae63b0db4ca2cbb2025b89d977c6535b1_icgraph" id="ad5/d64/defs_8h_ae63b0db4ca2cbb2025b89d977c6535b1_icgraph">
<area shape="rect" title=" " alt="" coords="247,5,321,31"/>
<area shape="rect" href="../../d6/d13/file_8c.html#ab8de757a0a9f58dcc6511ea5e46ebb88" title=" " alt="" coords="132,5,199,31"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a687d939a9e4792af15db96f2c2f34378" title=" " alt="" coords="5,5,84,31"/>
</map>
</div>

</div>
</div>
<a id="ae3424f669269fef400ce29c3aeb43fdb" name="ae3424f669269fef400ce29c3aeb43fdb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae3424f669269fef400ce29c3aeb43fdb">&#9670;&#160;</a></span>popcli()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void popcli </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d2d/spinlock_8c_source.html#l00117">117</a> of file <a class="el" href="../../d3/d2d/spinlock_8c_source.html">spinlock.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  118</span>{</div>
<div class="line"><span class="lineno">  119</span>  <span class="keywordflow">if</span>(readeflags()&amp;<a class="code hl_define" href="../../d2/df1/mmu_8h.html#ab481068357bb42797aafe91864a2d085">FL_IF</a>)</div>
<div class="line"><span class="lineno">  120</span>    <a class="code hl_function" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a">panic</a>(<span class="stringliteral">&quot;popcli - interruptible&quot;</span>);</div>
<div class="line"><span class="lineno">  121</span>  <span class="keywordflow">if</span>(--<a class="code hl_function" href="../../d5/d64/defs_8h.html#ad427959ad025dabd8cd393b27ec39160">mycpu</a>()-&gt;ncli &lt; 0)</div>
<div class="line"><span class="lineno">  122</span>    <a class="code hl_function" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a">panic</a>(<span class="stringliteral">&quot;popcli&quot;</span>);</div>
<div class="line"><span class="lineno">  123</span>  <span class="keywordflow">if</span>(<a class="code hl_function" href="../../d5/d64/defs_8h.html#ad427959ad025dabd8cd393b27ec39160">mycpu</a>()-&gt;ncli == 0 &amp;&amp; <a class="code hl_function" href="../../d5/d64/defs_8h.html#ad427959ad025dabd8cd393b27ec39160">mycpu</a>()-&gt;intena)</div>
<div class="line"><span class="lineno">  124</span>    sti();</div>
<div class="line"><span class="lineno">  125</span>}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_ae3424f669269fef400ce29c3aeb43fdb_cgraph.png" border="0" usemap="#ad5/d64/defs_8h_ae3424f669269fef400ce29c3aeb43fdb_cgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_ae3424f669269fef400ce29c3aeb43fdb_cgraph" id="ad5/d64/defs_8h_ae3424f669269fef400ce29c3aeb43fdb_cgraph">
<area shape="rect" title=" " alt="" coords="5,324,61,350"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="109,122,171,147"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="219,272,272,298"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="337,147,395,172"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="337,298,395,323"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="320,248,412,274"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="460,46,524,71"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="460,323,524,348"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="572,46,664,71"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="587,147,649,172"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="712,96,775,122"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_ae3424f669269fef400ce29c3aeb43fdb_icgraph.png" border="0" usemap="#ad5/d64/defs_8h_ae3424f669269fef400ce29c3aeb43fdb_icgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_ae3424f669269fef400ce29c3aeb43fdb_icgraph" id="ad5/d64/defs_8h_ae3424f669269fef400ce29c3aeb43fdb_icgraph">
<area shape="rect" title=" " alt="" coords="1004,2494,1060,2519"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="882,1987,945,2013"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="748,1581,812,1606"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a41af0935f3989aae450cf8988cd9c3a9" title=" " alt="" coords="881,2594,946,2619"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a87c90f0ab2a1b11c2b55f4e483bb8493" title=" " alt="" coords="871,3227,956,3253"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="748,1005,812,1030"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad788da91743c333b5bed7c4a0dd12365" title=" " alt="" coords="751,2369,809,2394"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#aaad2d7a86d4859982dd9a132f5128ff2" title=" " alt="" coords="452,1859,547,1885"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#ab3c447f135c68e4c3c1f8d5866f6e77b" title=" " alt="" coords="357,751,400,777"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#aaf98ef7cdde3a0dfb2e49919de3298b1" title=" " alt="" coords="117,777,159,802"/>
<area shape="rect" href="../../dc/d6f/trap_8c.html#a372d166e36c086c91e5f5d81e5fead3a" title=" " alt="" coords="5,1661,49,1686"/>
<area shape="rect" href="../../d6/d13/file_8c.html#ae557c81ab89c24219146144bb6adaa2c" title=" " alt="" coords="231,802,301,827"/>
<area shape="rect" href="../../d7/df8/log_8c.html#ac96aa31ffc0500e749c62c4d377c21c9" title=" " alt="" coords="462,525,537,550"/>
<area shape="rect" href="../../dc/de6/bio_8c.html#ab5335aeb503731104314321a78a6d727" title=" " alt="" coords="471,1606,528,1631"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a2ca17a3161c80e3e4894ec6a96e0a281" title=" " alt="" coords="619,1306,665,1331"/>
<area shape="rect" href="../../d0/d56/console_8c.html#aad3d6ca39f23bb6d2686d2967e415193" title=" " alt="" coords="599,1355,685,1381"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a28ac85a90987662e306ca8efbfe16074" title=" " alt="" coords="453,2062,545,2087"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a6af7eb39268127d389792cec37785666" title=" " alt="" coords="595,1405,689,1430"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="613,449,671,474"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a45a59a61c8799cb754b4326a32c14dc4" title=" " alt="" coords="478,449,521,474"/>
<area shape="rect" href="../../d7/df8/log_8c.html#ac0f12be0ca0de555e60b27b06a57a65b" title=" " alt="" coords="467,373,531,398"/>
<area shape="rect" href="../../d6/d13/file_8c.html#ac56b15561658d0e74ce1c53309b8f97d" title=" " alt="" coords="609,1207,675,1233"/>
<area shape="rect" href="../../d6/d13/file_8c.html#a9ef0346d08d8ed79ce2a9c03f9a4b4b2" title=" " alt="" coords="612,802,672,827"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#acd2e1ded4bb6fce4500438bf928330f4" title=" " alt="" coords="477,790,521,815"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#a6fdbe54cbecd8fc67d74793b27adcf05" title=" " alt="" coords="595,1657,689,1682"/>
<area shape="rect" href="../../da/d9b/memide_8c.html#a7f36b008f02088c86f76e98e05b55af5" title=" " alt="" coords="473,1682,526,1707"/>
<area shape="rect" href="../../da/d9b/memide_8c.html#a709693afdb9b89d848e684e7acde1f8f" title=" " alt="" coords="613,297,671,322"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a24a91383ab80b4b8a1ef1f4df896035c" title=" " alt="" coords="619,753,665,778"/>
<area shape="rect" href="../../d4/def/kalloc_8c.html#a5e965f6365c721b5b23c12d16d45c3dc" title=" " alt="" coords="614,1454,670,1479"/>
<area shape="rect" href="../../d4/def/kalloc_8c.html#aced59ecf8411235f6dffc065236711a5" title=" " alt="" coords="617,1005,667,1030"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#af6f31822f7e737b4e414bdac1ccb59a4" title=" " alt="" coords="476,1758,523,1783"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a650cf0caaaa8b75f653c1c92818d03a4" title=" " alt="" coords="623,1257,661,1282"/>
<area shape="rect" href="../../d1/d47/pipe_8c.html#ad4cce6144039b615d139f8660c60293a" title=" " alt="" coords="464,2111,535,2137"/>
<area shape="rect" href="../../d1/d47/pipe_8c.html#acfca0fab7d2c0c0dcc56359c8febe14a" title=" " alt="" coords="462,2213,537,2238"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ae70cc0370342e46f6db3bec367232457" title=" " alt="" coords="615,1961,669,1986"/>
<area shape="rect" href="../../dd/d35/sysproc_8c.html#a59778ec9bfa6b6f2100b43fbba000573" title=" " alt="" coords="459,2366,540,2391"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a7cb51f5c2b5cad3766f19eb69c92793b" title=" " alt="" coords="617,2518,667,2543"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#ad1c5f8693cb35b9605fee09eebdda640" title=" " alt="" coords="227,474,305,499"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a32945488fd39bc405757177b37cd2250" title=" " alt="" coords="97,1634,179,1659"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a9a70db941def46ec25939e6c2d30e399" title=" " alt="" coords="101,3177,175,3202"/>
<area shape="rect" href="../../df/dc9/exec_8c.html#ace32454ed0d37834dcb1cb4f8b727e6e" title=" " alt="" coords="353,702,404,727"/>
<area shape="rect" href="../../db/dd8/syscall_8c.html#acd6bcafe6626fe8e7d00cacdbc3cc4f1" title=" " alt="" coords="468,2923,531,2949"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a11c5d62d28e8121e75235d361158156e" title=" " alt="" coords="613,2113,671,2138"/>
<area shape="rect" href="../../db/dd8/syscall_8c.html#ade56ef2176f85cd61e7b91b400e7d4d3" title=" " alt="" coords="615,3025,669,3050"/>
<area shape="rect" href="../../db/dd8/syscall_8c.html#a6ade9205d1f46b759cf93b60513a3421" title=" " alt="" coords="472,3177,527,3202"/>
<area shape="rect" href="../../dd/d35/sysproc_8c.html#ab21d46be776cf6075a997af525a1a628" title=" " alt="" coords="462,3025,537,3050"/>
<area shape="rect" href="../../db/dd8/syscall_8c.html#a918cadc6c55aa7ac38982659c27a3a75" title=" " alt="" coords="747,3075,813,3101"/>
<area shape="rect" href="../../db/dd8/syscall_8c.html#ace37b4584713ab6bda44a282a298961f" title=" " alt="" coords="747,2418,813,2443"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a9c16214741f4fcd088e5eea468709328" title=" " alt="" coords="743,3227,817,3253"/>
<area shape="rect" href="../../dd/d35/sysproc_8c.html#ac81965412a0725574b8c72afda11243e" title=" " alt="" coords="737,2467,823,2493"/>
</map>
</div>

</div>
</div>
<a id="a7f185044294ebb57521c73f723990164" name="a7f185044294ebb57521c73f723990164"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7f185044294ebb57521c73f723990164">&#9670;&#160;</a></span>procdump()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void procdump </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/dda/proc_8c_source.html#l00504">504</a> of file <a class="el" href="../../d3/dda/proc_8c_source.html">proc.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  505</span>{</div>
<div class="line"><span class="lineno">  506</span>  <span class="keyword">static</span> <span class="keywordtype">char</span> *states[] = {</div>
<div class="line"><span class="lineno">  507</span>  [<a class="code hl_enumvalue" href="../../df/d03/proc_8h.html#aa1ced7d2b60040fded3fa873d0c03ba7aa09b651ef326a9d8efcee5cc5b720ab4">UNUSED</a>]    <span class="stringliteral">&quot;unused&quot;</span>,</div>
<div class="line"><span class="lineno">  508</span>  [<a class="code hl_enumvalue" href="../../df/d03/proc_8h.html#aa1ced7d2b60040fded3fa873d0c03ba7aaed0f3d976d25b54cb7c895ce591febb">EMBRYO</a>]    <span class="stringliteral">&quot;embryo&quot;</span>,</div>
<div class="line"><span class="lineno">  509</span>  [<a class="code hl_enumvalue" href="../../df/d03/proc_8h.html#aa1ced7d2b60040fded3fa873d0c03ba7a488282601451a751e0f0e770b15d4235">SLEEPING</a>]  <span class="stringliteral">&quot;sleep &quot;</span>,</div>
<div class="line"><span class="lineno">  510</span>  [<a class="code hl_enumvalue" href="../../df/d03/proc_8h.html#aa1ced7d2b60040fded3fa873d0c03ba7a269b90433e40460a2c0044a0b3e15694">RUNNABLE</a>]  <span class="stringliteral">&quot;runble&quot;</span>,</div>
<div class="line"><span class="lineno">  511</span>  [<a class="code hl_enumvalue" href="../../df/d03/proc_8h.html#aa1ced7d2b60040fded3fa873d0c03ba7a1061be6c3fb88d32829cba6f6b2be304">RUNNING</a>]   <span class="stringliteral">&quot;run   &quot;</span>,</div>
<div class="line"><span class="lineno">  512</span>  [<a class="code hl_enumvalue" href="../../df/d03/proc_8h.html#aa1ced7d2b60040fded3fa873d0c03ba7a5dfb36109b24f39d54d5c3f48f53def8">ZOMBIE</a>]    <span class="stringliteral">&quot;zombie&quot;</span></div>
<div class="line"><span class="lineno">  513</span>  };</div>
<div class="line"><span class="lineno">  514</span>  <span class="keywordtype">int</span> i;</div>
<div class="line"><span class="lineno">  515</span>  <span class="keyword">struct </span><a class="code hl_struct" href="../../de/d48/structproc.html">proc</a> *p;</div>
<div class="line"><span class="lineno">  516</span>  <span class="keywordtype">char</span> *<a class="code hl_variable" href="../../de/d48/structproc.html#a0f2fe91548a1382672ae26e29ca9e736">state</a>;</div>
<div class="line"><span class="lineno">  517</span>  <a class="code hl_typedef" href="../../d9/d49/types_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> pc[10];</div>
<div class="line"><span class="lineno">  518</span> </div>
<div class="line"><span class="lineno">  519</span>  <span class="keywordflow">for</span>(p = <a class="code hl_variable" href="../../d3/dda/proc_8c.html#addf39d613ca9a58e7e6080a2e454421a">ptable</a>.proc; p &lt; &amp;<a class="code hl_variable" href="../../d3/dda/proc_8c.html#addf39d613ca9a58e7e6080a2e454421a">ptable</a>.proc[<a class="code hl_define" href="../../d5/d33/param_8h.html#a810c5b751df5bb30588613ed91095129">NPROC</a>]; p++){</div>
<div class="line"><span class="lineno">  520</span>    <span class="keywordflow">if</span>(p-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#a0f2fe91548a1382672ae26e29ca9e736">state</a> == <a class="code hl_enumvalue" href="../../df/d03/proc_8h.html#aa1ced7d2b60040fded3fa873d0c03ba7aa09b651ef326a9d8efcee5cc5b720ab4">UNUSED</a>)</div>
<div class="line"><span class="lineno">  521</span>      <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  522</span>    <span class="keywordflow">if</span>(p-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#a0f2fe91548a1382672ae26e29ca9e736">state</a> &gt;= 0 &amp;&amp; p-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#a0f2fe91548a1382672ae26e29ca9e736">state</a> &lt; <a class="code hl_define" href="../../d5/d64/defs_8h.html#afacd331296c10f360da7640e0d68429f">NELEM</a>(states) &amp;&amp; states[p-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#a0f2fe91548a1382672ae26e29ca9e736">state</a>])</div>
<div class="line"><span class="lineno">  523</span>      <a class="code hl_variable" href="../../de/d48/structproc.html#a0f2fe91548a1382672ae26e29ca9e736">state</a> = states[p-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#a0f2fe91548a1382672ae26e29ca9e736">state</a>];</div>
<div class="line"><span class="lineno">  524</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  525</span>      <a class="code hl_variable" href="../../de/d48/structproc.html#a0f2fe91548a1382672ae26e29ca9e736">state</a> = <span class="stringliteral">&quot;???&quot;</span>;</div>
<div class="line"><span class="lineno">  526</span>    <a class="code hl_function" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6">cprintf</a>(<span class="stringliteral">&quot;%d %s %s&quot;</span>, p-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#acf2bdf54d1f957ccbcdc987007029944">pid</a>, <a class="code hl_variable" href="../../de/d48/structproc.html#a0f2fe91548a1382672ae26e29ca9e736">state</a>, p-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#ac04af53e17d24b90c3cbfab56d658d62">name</a>);</div>
<div class="line"><span class="lineno">  527</span>    <span class="keywordflow">if</span>(p-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#a0f2fe91548a1382672ae26e29ca9e736">state</a> == <a class="code hl_enumvalue" href="../../df/d03/proc_8h.html#aa1ced7d2b60040fded3fa873d0c03ba7a488282601451a751e0f0e770b15d4235">SLEEPING</a>){</div>
<div class="line"><span class="lineno">  528</span>      <a class="code hl_function" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f">getcallerpcs</a>((<a class="code hl_typedef" href="../../d9/d49/types_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>*)p-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#ae0d9bffe1ad1c7d60dd2733be0a2333c">context</a>-&gt;<a class="code hl_variable" href="../../d7/dfe/structcontext.html#ac9640ddc2e90e4213ba9847bbe1b0e57">ebp</a>+2, pc);</div>
<div class="line"><span class="lineno">  529</span>      <span class="keywordflow">for</span>(i=0; i&lt;10 &amp;&amp; pc[i] != 0; i++)</div>
<div class="line"><span class="lineno">  530</span>        <a class="code hl_function" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6">cprintf</a>(<span class="stringliteral">&quot; %p&quot;</span>, pc[i]);</div>
<div class="line"><span class="lineno">  531</span>    }</div>
<div class="line"><span class="lineno">  532</span>    <a class="code hl_function" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6">cprintf</a>(<span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><span class="lineno">  533</span>  }</div>
<div class="line"><span class="lineno">  534</span>}</div>
<div class="ttc" id="adefs_8h_html_afacd331296c10f360da7640e0d68429f"><div class="ttname"><a href="../../d5/d64/defs_8h.html#afacd331296c10f360da7640e0d68429f">NELEM</a></div><div class="ttdeci">#define NELEM(x)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d64/defs_8h_source.html#l00195">defs.h:195</a></div></div>
<div class="ttc" id="aproc_8h_html_aa1ced7d2b60040fded3fa873d0c03ba7aaed0f3d976d25b54cb7c895ce591febb"><div class="ttname"><a href="../../df/d03/proc_8h.html#aa1ced7d2b60040fded3fa873d0c03ba7aaed0f3d976d25b54cb7c895ce591febb">EMBRYO</a></div><div class="ttdeci">@ EMBRYO</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d03/proc_8h_source.html#l00035">proc.h:35</a></div></div>
<div class="ttc" id="astructcontext_html_ac9640ddc2e90e4213ba9847bbe1b0e57"><div class="ttname"><a href="../../d7/dfe/structcontext.html#ac9640ddc2e90e4213ba9847bbe1b0e57">context::ebp</a></div><div class="ttdeci">uint ebp</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d03/proc_8h_source.html#l00031">proc.h:31</a></div></div>
<div class="ttc" id="astructproc_html_ae0d9bffe1ad1c7d60dd2733be0a2333c"><div class="ttname"><a href="../../de/d48/structproc.html#ae0d9bffe1ad1c7d60dd2733be0a2333c">proc::context</a></div><div class="ttdeci">struct context * context</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d03/proc_8h_source.html#l00046">proc.h:46</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_a7f185044294ebb57521c73f723990164_cgraph.png" border="0" usemap="#ad5/d64/defs_8h_a7f185044294ebb57521c73f723990164_cgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_a7f185044294ebb57521c73f723990164_cgraph" id="ad5/d64/defs_8h_a7f185044294ebb57521c73f723990164_cgraph">
<area shape="rect" title=" " alt="" coords="5,365,84,390"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="132,333,191,358"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="812,289,904,314"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="239,94,303,119"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="711,245,764,270"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="239,245,303,270"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="351,69,443,94"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="365,118,428,143"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="601,93,663,118"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="491,42,553,67"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="494,143,550,169"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="829,202,887,227"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_a7f185044294ebb57521c73f723990164_icgraph.png" border="0" usemap="#ad5/d64/defs_8h_a7f185044294ebb57521c73f723990164_icgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_a7f185044294ebb57521c73f723990164_icgraph" id="ad5/d64/defs_8h_a7f185044294ebb57521c73f723990164_icgraph">
<area shape="rect" title=" " alt="" coords="341,31,420,56"/>
<area shape="rect" href="../../d0/d56/console_8c.html#aad3d6ca39f23bb6d2686d2967e415193" title=" " alt="" coords="208,31,293,56"/>
<area shape="rect" href="../../dc/da9/kbd_8c.html#af3d6113fa152781400e1e0e728c55e54" title=" " alt="" coords="98,5,159,31"/>
<area shape="rect" href="../../d1/d87/uart_8c.html#aa64047002b0e84e2611ebf7dc46b7c99" title=" " alt="" coords="97,55,160,80"/>
<area shape="rect" href="../../dc/d6f/trap_8c.html#a372d166e36c086c91e5f5d81e5fead3a" title=" " alt="" coords="5,31,49,56"/>
</map>
</div>

</div>
</div>
<a id="a206b749d1b7768dadce61cbcde7e0f1c" name="a206b749d1b7768dadce61cbcde7e0f1c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a206b749d1b7768dadce61cbcde7e0f1c">&#9670;&#160;</a></span>pushcli()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pushcli </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d2d/spinlock_8c_source.html#l00105">105</a> of file <a class="el" href="../../d3/d2d/spinlock_8c_source.html">spinlock.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  106</span>{</div>
<div class="line"><span class="lineno">  107</span>  <span class="keywordtype">int</span> eflags;</div>
<div class="line"><span class="lineno">  108</span> </div>
<div class="line"><span class="lineno">  109</span>  eflags = readeflags();</div>
<div class="line"><span class="lineno">  110</span>  cli();</div>
<div class="line"><span class="lineno">  111</span>  <span class="keywordflow">if</span>(<a class="code hl_function" href="../../d5/d64/defs_8h.html#ad427959ad025dabd8cd393b27ec39160">mycpu</a>()-&gt;ncli == 0)</div>
<div class="line"><span class="lineno">  112</span>    <a class="code hl_function" href="../../d5/d64/defs_8h.html#ad427959ad025dabd8cd393b27ec39160">mycpu</a>()-&gt;<a class="code hl_variable" href="../../db/d62/structcpu.html#a26fc271fea8af30d67fc2ae22ef0a82f">intena</a> = eflags &amp; <a class="code hl_define" href="../../d2/df1/mmu_8h.html#ab481068357bb42797aafe91864a2d085">FL_IF</a>;</div>
<div class="line"><span class="lineno">  113</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#ad427959ad025dabd8cd393b27ec39160">mycpu</a>()-&gt;<a class="code hl_variable" href="../../db/d62/structcpu.html#a9ccad8ae031c295f86e96de26df24805">ncli</a> += 1;</div>
<div class="line"><span class="lineno">  114</span>}</div>
<div class="ttc" id="astructcpu_html_a26fc271fea8af30d67fc2ae22ef0a82f"><div class="ttname"><a href="../../db/d62/structcpu.html#a26fc271fea8af30d67fc2ae22ef0a82f">cpu::intena</a></div><div class="ttdeci">int intena</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d03/proc_8h_source.html#l00009">proc.h:9</a></div></div>
<div class="ttc" id="astructcpu_html_a9ccad8ae031c295f86e96de26df24805"><div class="ttname"><a href="../../db/d62/structcpu.html#a9ccad8ae031c295f86e96de26df24805">cpu::ncli</a></div><div class="ttdeci">int ncli</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d03/proc_8h_source.html#l00008">proc.h:8</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_a206b749d1b7768dadce61cbcde7e0f1c_cgraph.png" border="0" usemap="#ad5/d64/defs_8h_a206b749d1b7768dadce61cbcde7e0f1c_cgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_a206b749d1b7768dadce61cbcde7e0f1c_cgraph" id="ad5/d64/defs_8h_a206b749d1b7768dadce61cbcde7e0f1c_cgraph">
<area shape="rect" title=" " alt="" coords="5,447,68,473"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="116,321,177,346"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="343,295,402,321"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="225,170,279,195"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="343,145,402,170"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="327,246,419,271"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="467,234,531,259"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="467,119,531,145"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="579,209,671,234"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="593,258,656,283"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="719,57,775,82"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_a206b749d1b7768dadce61cbcde7e0f1c_icgraph.png" border="0" usemap="#ad5/d64/defs_8h_a206b749d1b7768dadce61cbcde7e0f1c_icgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_a206b749d1b7768dadce61cbcde7e0f1c_icgraph" id="ad5/d64/defs_8h_a206b749d1b7768dadce61cbcde7e0f1c_icgraph">
<area shape="rect" title=" " alt="" coords="1189,3149,1252,3174"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="956,1006,1020,1031"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="1079,3022,1141,3047"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a41af0935f3989aae450cf8988cd9c3a9" title=" " alt="" coords="817,3301,883,3326"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a87c90f0ab2a1b11c2b55f4e483bb8493" title=" " alt="" coords="945,3478,1031,3503"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#aaad2d7a86d4859982dd9a132f5128ff2" title=" " alt="" coords="405,2651,500,2677"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#ab3c447f135c68e4c3c1f8d5866f6e77b" title=" " alt="" coords="311,1131,353,1157"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#aaf98ef7cdde3a0dfb2e49919de3298b1" title=" " alt="" coords="97,1069,140,1094"/>
<area shape="rect" href="../../dc/d6f/trap_8c.html#a372d166e36c086c91e5f5d81e5fead3a" title=" " alt="" coords="5,739,49,765"/>
<area shape="rect" href="../../d6/d13/file_8c.html#ae557c81ab89c24219146144bb6adaa2c" title=" " alt="" coords="188,1030,259,1055"/>
<area shape="rect" href="../../d7/df8/log_8c.html#ac96aa31ffc0500e749c62c4d377c21c9" title=" " alt="" coords="415,1157,490,1182"/>
<area shape="rect" href="../../dc/de6/bio_8c.html#ab5335aeb503731104314321a78a6d727" title=" " alt="" coords="551,1582,609,1607"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a2ca17a3161c80e3e4894ec6a96e0a281" title=" " alt="" coords="827,1557,873,1582"/>
<area shape="rect" href="../../d0/d56/console_8c.html#aad3d6ca39f23bb6d2686d2967e415193" title=" " alt="" coords="665,1207,750,1233"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a28ac85a90987662e306ca8efbfe16074" title=" " alt="" coords="407,2602,499,2627"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a6af7eb39268127d389792cec37785666" title=" " alt="" coords="803,1606,897,1631"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="821,753,879,778"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a45a59a61c8799cb754b4326a32c14dc4" title=" " alt="" coords="686,803,729,829"/>
<area shape="rect" href="../../d7/df8/log_8c.html#ac0f12be0ca0de555e60b27b06a57a65b" title=" " alt="" coords="548,523,612,549"/>
<area shape="rect" href="../../d6/d13/file_8c.html#ac56b15561658d0e74ce1c53309b8f97d" title=" " alt="" coords="817,1359,883,1385"/>
<area shape="rect" href="../../d6/d13/file_8c.html#a9ef0346d08d8ed79ce2a9c03f9a4b4b2" title=" " alt="" coords="820,2059,880,2085"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#acd2e1ded4bb6fce4500438bf928330f4" title=" " alt="" coords="685,2034,729,2059"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#a6fdbe54cbecd8fc67d74793b27adcf05" title=" " alt="" coords="660,2515,755,2541"/>
<area shape="rect" href="../../da/d9b/memide_8c.html#a7f36b008f02088c86f76e98e05b55af5" title=" " alt="" coords="426,2490,479,2515"/>
<area shape="rect" href="../../da/d9b/memide_8c.html#a709693afdb9b89d848e684e7acde1f8f" title=" " alt="" coords="679,853,736,878"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a24a91383ab80b4b8a1ef1f4df896035c" title=" " alt="" coords="827,2010,873,2035"/>
<area shape="rect" href="../../d4/def/kalloc_8c.html#a5e965f6365c721b5b23c12d16d45c3dc" title=" " alt="" coords="822,1655,878,1681"/>
<area shape="rect" href="../../d4/def/kalloc_8c.html#aced59ecf8411235f6dffc065236711a5" title=" " alt="" coords="825,1909,875,1934"/>
<area shape="rect" href="../../d1/d47/pipe_8c.html#a48642f54734698f6f881ee07723292cb" title=" " alt="" coords="669,1257,746,1282"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#af6f31822f7e737b4e414bdac1ccb59a4" title=" " alt="" coords="429,2414,476,2439"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a650cf0caaaa8b75f653c1c92818d03a4" title=" " alt="" coords="831,1409,869,1434"/>
<area shape="rect" href="../../d7/df8/log_8c.html#a7eacb0fbebe5ce4c7d3ddea15908b13d" title=" " alt="" coords="813,1458,887,1483"/>
<area shape="rect" href="../../d1/d47/pipe_8c.html#ad4cce6144039b615d139f8660c60293a" title=" " alt="" coords="417,2363,488,2389"/>
<area shape="rect" href="../../d1/d47/pipe_8c.html#acfca0fab7d2c0c0dcc56359c8febe14a" title=" " alt="" coords="415,2553,490,2578"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#aa997067c2c9bfef15af6fa0a10c20f4a" title=" " alt="" coords="660,1306,755,1331"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a9fa00b0be5d3c4781048861e2506eb63" title=" " alt="" coords="811,3022,889,3047"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ae70cc0370342e46f6db3bec367232457" title=" " alt="" coords="553,2566,607,2591"/>
<area shape="rect" href="../../dd/d35/sysproc_8c.html#a59778ec9bfa6b6f2100b43fbba000573" title=" " alt="" coords="412,2819,493,2845"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a7cb51f5c2b5cad3766f19eb69c92793b" title=" " alt="" coords="555,2971,605,2997"/>
<area shape="rect" href="../../dd/d35/sysproc_8c.html#aaf8553903ba8f2776247679d4db0d121" title=" " alt="" coords="805,1507,895,1533"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a81c8a6a0cae413bc81aa223f7f7b7205" title=" " alt="" coords="818,1310,882,1335"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a4a34d9f03e436cfa09b88f735f6ee952" title=" " alt="" coords="817,905,883,930"/>
<area shape="rect" href="../../df/dc9/exec_8c.html#ace32454ed0d37834dcb1cb4f8b727e6e" title=" " alt="" coords="307,1258,357,1283"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad788da91743c333b5bed7c4a0dd12365" title=" " alt="" coords="679,3022,736,3047"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="956,2110,1020,2135"/>
<area shape="rect" href="../../db/dd8/syscall_8c.html#ade56ef2176f85cd61e7b91b400e7d4d3" title=" " alt="" coords="553,3554,607,3579"/>
<area shape="rect" href="../../db/dd8/syscall_8c.html#a6ade9205d1f46b759cf93b60513a3421" title=" " alt="" coords="425,3579,480,3605"/>
<area shape="rect" href="../../db/dd8/syscall_8c.html#a918cadc6c55aa7ac38982659c27a3a75" title=" " alt="" coords="675,3529,740,3554"/>
<area shape="rect" href="../../db/dd8/syscall_8c.html#ace37b4584713ab6bda44a282a298961f" title=" " alt="" coords="674,3681,741,3706"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a9c16214741f4fcd088e5eea468709328" title=" " alt="" coords="670,3782,745,3807"/>
</map>
</div>

</div>
</div>
<a id="a2415273b06f31f0f2587b7325588a7e4" name="a2415273b06f31f0f2587b7325588a7e4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2415273b06f31f0f2587b7325588a7e4">&#9670;&#160;</a></span>readi()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int readi </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d0/df8/structinode.html">inode</a> *&#160;</td>
          <td class="paramname"><em>ip</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>dst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/d49/types_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td>
          <td class="paramname"><em>off</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/d49/types_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td>
          <td class="paramname"><em>n</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d2/d5a/fs_8c_source.html#l00453">453</a> of file <a class="el" href="../../d2/d5a/fs_8c_source.html">fs.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  454</span>{</div>
<div class="line"><span class="lineno">  455</span>  <a class="code hl_typedef" href="../../d9/d49/types_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> tot, m;</div>
<div class="line"><span class="lineno">  456</span>  <span class="keyword">struct </span><a class="code hl_struct" href="../../d9/dd0/structbuf.html">buf</a> *bp;</div>
<div class="line"><span class="lineno">  457</span> </div>
<div class="line"><span class="lineno">  458</span>  <span class="keywordflow">if</span>(ip-&gt;<a class="code hl_variable" href="../../d0/df8/structinode.html#a8d74bec2898785c057111c328d23fda2">type</a> == <a class="code hl_define" href="../../d2/d1b/stat_8h.html#a62b045a3e4fdf204bdddda0f3fc3d8c4">T_DEV</a>){</div>
<div class="line"><span class="lineno">  459</span>    <span class="keywordflow">if</span>(ip-&gt;<a class="code hl_variable" href="../../d0/df8/structinode.html#a34af7242018a977dace5730683850875">major</a> &lt; 0 || ip-&gt;<a class="code hl_variable" href="../../d0/df8/structinode.html#a34af7242018a977dace5730683850875">major</a> &gt;= <a class="code hl_define" href="../../d5/d33/param_8h.html#aa564a41c8409694da49b0badf2bb2853">NDEV</a> || !<a class="code hl_struct" href="../../de/d6a/structdevsw.html">devsw</a>[ip-&gt;<a class="code hl_variable" href="../../d0/df8/structinode.html#a34af7242018a977dace5730683850875">major</a>].<a class="code hl_variable" href="../../de/d6a/structdevsw.html#a4efbe00d0031a1c9005ef2186947ea37">read</a>)</div>
<div class="line"><span class="lineno">  460</span>      <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  461</span>    <span class="keywordflow">return</span> <a class="code hl_struct" href="../../de/d6a/structdevsw.html">devsw</a>[ip-&gt;<a class="code hl_variable" href="../../d0/df8/structinode.html#a34af7242018a977dace5730683850875">major</a>].<a class="code hl_variable" href="../../de/d6a/structdevsw.html#a4efbe00d0031a1c9005ef2186947ea37">read</a>(ip, dst, n);</div>
<div class="line"><span class="lineno">  462</span>  }</div>
<div class="line"><span class="lineno">  463</span> </div>
<div class="line"><span class="lineno">  464</span>  <span class="keywordflow">if</span>(off &gt; ip-&gt;<a class="code hl_variable" href="../../d0/df8/structinode.html#a918af769c48a8ca8afac057bf83d12de">size</a> || off + n &lt; off)</div>
<div class="line"><span class="lineno">  465</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  466</span>  <span class="keywordflow">if</span>(off + n &gt; ip-&gt;<a class="code hl_variable" href="../../d0/df8/structinode.html#a918af769c48a8ca8afac057bf83d12de">size</a>)</div>
<div class="line"><span class="lineno">  467</span>    n = ip-&gt;<a class="code hl_variable" href="../../d0/df8/structinode.html#a918af769c48a8ca8afac057bf83d12de">size</a> - off;</div>
<div class="line"><span class="lineno">  468</span> </div>
<div class="line"><span class="lineno">  469</span>  <span class="keywordflow">for</span>(tot=0; tot&lt;n; tot+=m, off+=m, dst+=m){</div>
<div class="line"><span class="lineno">  470</span>    bp = <a class="code hl_function" href="../../dc/de6/bio_8c.html#a30b8d2ef2300ed8e3d879a428fe39898">bread</a>(ip-&gt;<a class="code hl_variable" href="../../d0/df8/structinode.html#a121742a89c4531f03a7de1613d5be605">dev</a>, bmap(ip, off/<a class="code hl_define" href="../../df/d26/fs_8h.html#a403cf3149c084cea115b85c90721039a">BSIZE</a>));</div>
<div class="line"><span class="lineno">  471</span>    m = <a class="code hl_define" href="../../d2/d5a/fs_8c.html#ac6afabdc09a49a433ee19d8a9486056d">min</a>(n - tot, <a class="code hl_define" href="../../df/d26/fs_8h.html#a403cf3149c084cea115b85c90721039a">BSIZE</a> - off%<a class="code hl_define" href="../../df/d26/fs_8h.html#a403cf3149c084cea115b85c90721039a">BSIZE</a>);</div>
<div class="line"><span class="lineno">  472</span>    <a class="code hl_function" href="../../d5/d64/defs_8h.html#ac152fff34fe03e497d35b1d4c47f1445">memmove</a>(dst, bp-&gt;<a class="code hl_variable" href="../../d9/dd0/structbuf.html#ab0ec38784ab94ed35e575cf6d33912d2">data</a> + off%<a class="code hl_define" href="../../df/d26/fs_8h.html#a403cf3149c084cea115b85c90721039a">BSIZE</a>, m);</div>
<div class="line"><span class="lineno">  473</span>    <a class="code hl_function" href="../../dc/de6/bio_8c.html#ab5335aeb503731104314321a78a6d727">brelse</a>(bp);</div>
<div class="line"><span class="lineno">  474</span>  }</div>
<div class="line"><span class="lineno">  475</span>  <span class="keywordflow">return</span> n;</div>
<div class="line"><span class="lineno">  476</span>}</div>
<div class="ttc" id="afs_8c_html_ac6afabdc09a49a433ee19d8a9486056d"><div class="ttname"><a href="../../d2/d5a/fs_8c.html#ac6afabdc09a49a433ee19d8a9486056d">min</a></div><div class="ttdeci">#define min(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d5a/fs_8c_source.html#l00024">fs.c:24</a></div></div>
<div class="ttc" id="aparam_8h_html_aa564a41c8409694da49b0badf2bb2853"><div class="ttname"><a href="../../d5/d33/param_8h.html#aa564a41c8409694da49b0badf2bb2853">NDEV</a></div><div class="ttdeci">#define NDEV</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d33/param_8h_source.html#l00007">param.h:7</a></div></div>
<div class="ttc" id="astat_8h_html_a62b045a3e4fdf204bdddda0f3fc3d8c4"><div class="ttname"><a href="../../d2/d1b/stat_8h.html#a62b045a3e4fdf204bdddda0f3fc3d8c4">T_DEV</a></div><div class="ttdeci">#define T_DEV</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d1b/stat_8h_source.html#l00003">stat.h:3</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_a2415273b06f31f0f2587b7325588a7e4_cgraph.png" border="0" usemap="#ad5/d64/defs_8h_a2415273b06f31f0f2587b7325588a7e4_cgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_a2415273b06f31f0f2587b7325588a7e4_cgraph" id="ad5/d64/defs_8h_a2415273b06f31f0f2587b7325588a7e4_cgraph">
<area shape="rect" title=" " alt="" coords="5,1057,56,1082"/>
<area shape="rect" href="../../dc/de6/bio_8c.html#a30b8d2ef2300ed8e3d879a428fe39898" title=" " alt="" coords="104,930,159,955"/>
<area shape="rect" href="../../d1/db0/string_8c.html#a07f97e2ed1ce37955192d52de8f4911f" title=" " alt="" coords="308,1310,391,1335"/>
<area shape="rect" href="../../dc/de6/bio_8c.html#ab5335aeb503731104314321a78a6d727" title=" " alt="" coords="321,1057,378,1082"/>
<area shape="rect" href="../../da/d9b/memide_8c.html#a7f36b008f02088c86f76e98e05b55af5" title=" " alt="" coords="207,854,260,879"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="735,753,799,778"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="1217,727,1271,753"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="1459,955,1523,981"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#a6fdbe54cbecd8fc67d74793b27adcf05" title=" " alt="" coords="581,803,676,829"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ae70cc0370342e46f6db3bec367232457" title=" " alt="" coords="323,677,376,702"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="857,803,949,829"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="872,474,935,499"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="1108,347,1169,373"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="997,246,1060,271"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="1571,373,1627,398"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="1335,449,1394,474"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="1335,867,1394,893"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="1319,727,1411,753"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a41af0935f3989aae450cf8988cd9c3a9" title=" " alt="" coords="871,119,936,145"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad788da91743c333b5bed7c4a0dd12365" title=" " alt="" coords="457,449,515,474"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a9fa00b0be5d3c4781048861e2506eb63" title=" " alt="" coords="589,398,668,423"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a1d9e7047d3dfb57809a2541d8387705e" title=" " alt="" coords="738,449,795,474"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a02ca0670bc1fe12e38453082631ff360" title=" " alt="" coords="724,347,809,373"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a87c90f0ab2a1b11c2b55f4e483bb8493" title=" " alt="" coords="861,195,946,221"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#aa997067c2c9bfef15af6fa0a10c20f4a" title=" " alt="" coords="439,1107,533,1133"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a4a34d9f03e436cfa09b88f735f6ee952" title=" " alt="" coords="595,1107,662,1133"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_a2415273b06f31f0f2587b7325588a7e4_icgraph.png" border="0" usemap="#ad5/d64/defs_8h_a2415273b06f31f0f2587b7325588a7e4_icgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_a2415273b06f31f0f2587b7325588a7e4_icgraph" id="ad5/d64/defs_8h_a2415273b06f31f0f2587b7325588a7e4_icgraph">
<area shape="rect" title=" " alt="" coords="485,105,536,131"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a69a135a0e8a06d9f306d77ebc0c1f7a0" title=" " alt="" coords="245,5,301,31"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a5341068f021beac8cf0032b97d231e6f" title=" " alt="" coords="363,55,437,80"/>
<area shape="rect" href="../../df/dc9/exec_8c.html#ace32454ed0d37834dcb1cb4f8b727e6e" title=" " alt="" coords="247,155,298,180"/>
<area shape="rect" href="../../d6/d13/file_8c.html#a1dc8c87c7e48bdaaf98e9c7047928f29" title=" " alt="" coords="368,205,432,231"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a201acc8337a2893268b61ea5a1ee0d53" title=" " alt="" coords="365,156,435,181"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a759600870314007ac558871239122fb7" title=" " alt="" coords="108,5,179,31"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#ae1e58ee11d41f643929520d8c1640da7" title=" " alt="" coords="231,55,315,80"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#ac5b5d4517586be6396b4f3b37445945a" title=" " alt="" coords="104,56,183,81"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a6f94e3b215d069b5419e87bafe80799a" title=" " alt="" coords="107,105,179,131"/>
<area shape="rect" href="../../d8/d60/init_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title=" " alt="" coords="118,155,169,180"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#aedbeff6afe5d4e22330c7e6b5e6df893" title=" " alt="" coords="111,228,176,253"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#aeaa813ddeb6a5fac3c45714c7351c526" title=" " alt="" coords="104,277,183,303"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="5,81,56,107"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title=" " alt="" coords="5,228,56,253"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a54bf714d9e898cbdcbc061b280bbfae0" title=" " alt="" coords="235,205,310,231"/>
</map>
</div>

</div>
</div>
<a id="aff0080b2133027be2e525ca088b40e78" name="aff0080b2133027be2e525ca088b40e78"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aff0080b2133027be2e525ca088b40e78">&#9670;&#160;</a></span>readsb()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void readsb </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/d3d/structsuperblock.html">superblock</a> *&#160;</td>
          <td class="paramname"><em>sb</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d2/d5a/fs_8c_source.html#l00032">32</a> of file <a class="el" href="../../d2/d5a/fs_8c_source.html">fs.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   33</span>{</div>
<div class="line"><span class="lineno">   34</span>  <span class="keyword">struct </span><a class="code hl_struct" href="../../d9/dd0/structbuf.html">buf</a> *bp;</div>
<div class="line"><span class="lineno">   35</span> </div>
<div class="line"><span class="lineno">   36</span>  bp = <a class="code hl_function" href="../../dc/de6/bio_8c.html#a30b8d2ef2300ed8e3d879a428fe39898">bread</a>(<a class="code hl_variable" href="../../d9/dd0/structbuf.html#ac96082c2b5f22133ac7092ef81487227">dev</a>, 1);</div>
<div class="line"><span class="lineno">   37</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#ac152fff34fe03e497d35b1d4c47f1445">memmove</a>(<a class="code hl_variable" href="../../d2/d5a/fs_8c.html#a0248d0bac625de5a1415f2f8c91f3343">sb</a>, bp-&gt;<a class="code hl_variable" href="../../d9/dd0/structbuf.html#ab0ec38784ab94ed35e575cf6d33912d2">data</a>, <span class="keyword">sizeof</span>(*<a class="code hl_variable" href="../../d2/d5a/fs_8c.html#a0248d0bac625de5a1415f2f8c91f3343">sb</a>));</div>
<div class="line"><span class="lineno">   38</span>  <a class="code hl_function" href="../../dc/de6/bio_8c.html#ab5335aeb503731104314321a78a6d727">brelse</a>(bp);</div>
<div class="line"><span class="lineno">   39</span>}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_aff0080b2133027be2e525ca088b40e78_cgraph.png" border="0" usemap="#ad5/d64/defs_8h_aff0080b2133027be2e525ca088b40e78_cgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_aff0080b2133027be2e525ca088b40e78_cgraph" id="ad5/d64/defs_8h_aff0080b2133027be2e525ca088b40e78_cgraph">
<area shape="rect" title=" " alt="" coords="5,1057,67,1082"/>
<area shape="rect" href="../../dc/de6/bio_8c.html#a30b8d2ef2300ed8e3d879a428fe39898" title=" " alt="" coords="115,930,169,955"/>
<area shape="rect" href="../../d1/db0/string_8c.html#a07f97e2ed1ce37955192d52de8f4911f" title=" " alt="" coords="319,1310,401,1335"/>
<area shape="rect" href="../../dc/de6/bio_8c.html#ab5335aeb503731104314321a78a6d727" title=" " alt="" coords="331,1057,389,1082"/>
<area shape="rect" href="../../da/d9b/memide_8c.html#a7f36b008f02088c86f76e98e05b55af5" title=" " alt="" coords="217,854,271,879"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="745,753,809,778"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="1228,727,1281,753"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="1469,955,1533,981"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#a6fdbe54cbecd8fc67d74793b27adcf05" title=" " alt="" coords="592,803,687,829"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ae70cc0370342e46f6db3bec367232457" title=" " alt="" coords="333,677,387,702"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="868,803,960,829"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="883,474,945,499"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="1119,347,1180,373"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="1008,246,1071,271"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="1581,373,1637,398"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="1346,449,1405,474"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="1346,867,1405,893"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="1329,727,1421,753"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a41af0935f3989aae450cf8988cd9c3a9" title=" " alt="" coords="881,119,947,145"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad788da91743c333b5bed7c4a0dd12365" title=" " alt="" coords="468,449,525,474"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a9fa00b0be5d3c4781048861e2506eb63" title=" " alt="" coords="600,398,679,423"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a1d9e7047d3dfb57809a2541d8387705e" title=" " alt="" coords="749,449,806,474"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a02ca0670bc1fe12e38453082631ff360" title=" " alt="" coords="735,347,820,373"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a87c90f0ab2a1b11c2b55f4e483bb8493" title=" " alt="" coords="871,195,957,221"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#aa997067c2c9bfef15af6fa0a10c20f4a" title=" " alt="" coords="449,1107,544,1133"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a4a34d9f03e436cfa09b88f735f6ee952" title=" " alt="" coords="606,1107,673,1133"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_aff0080b2133027be2e525ca088b40e78_icgraph.png" border="0" usemap="#ad5/d64/defs_8h_aff0080b2133027be2e525ca088b40e78_icgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_aff0080b2133027be2e525ca088b40e78_icgraph" id="ad5/d64/defs_8h_aff0080b2133027be2e525ca088b40e78_icgraph">
<area shape="rect" title=" " alt="" coords="216,31,277,56"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a301761a27cf266e0bad483272fb31a3c" title=" " alt="" coords="119,5,161,31"/>
<area shape="rect" href="../../d7/df8/log_8c.html#ad5e79aaefb91f41b9ef6aeae7ecf4708" title=" " alt="" coords="112,55,168,80"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a11c5d62d28e8121e75235d361158156e" title=" " alt="" coords="5,31,64,56"/>
</map>
</div>

</div>
</div>
<a id="a4f8616948f3dbce65671f666eed1d669" name="a4f8616948f3dbce65671f666eed1d669"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4f8616948f3dbce65671f666eed1d669">&#9670;&#160;</a></span>release()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void release </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d1/d08/structspinlock.html">spinlock</a> *&#160;</td>
          <td class="paramname"><em>lk</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d2d/spinlock_8c_source.html#l00047">47</a> of file <a class="el" href="../../d3/d2d/spinlock_8c_source.html">spinlock.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   48</span>{</div>
<div class="line"><span class="lineno">   49</span>  <span class="keywordflow">if</span>(!<a class="code hl_function" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9">holding</a>(lk))</div>
<div class="line"><span class="lineno">   50</span>    <a class="code hl_function" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a">panic</a>(<span class="stringliteral">&quot;release&quot;</span>);</div>
<div class="line"><span class="lineno">   51</span> </div>
<div class="line"><span class="lineno">   52</span>  lk-&gt;<a class="code hl_variable" href="../../d1/d08/structspinlock.html#ac9ef3f16f664094198af0b9063e23fe0">pcs</a>[0] = 0;</div>
<div class="line"><span class="lineno">   53</span>  lk-&gt;<a class="code hl_variable" href="../../d1/d08/structspinlock.html#a290ae772c8ccb9e8c1580204c31a7f88">cpu</a> = 0;</div>
<div class="line"><span class="lineno">   54</span> </div>
<div class="line"><span class="lineno">   55</span>  <span class="comment">// Tell the C compiler and the processor to not move loads or stores</span></div>
<div class="line"><span class="lineno">   56</span>  <span class="comment">// past this point, to ensure that all the stores in the critical</span></div>
<div class="line"><span class="lineno">   57</span>  <span class="comment">// section are visible to other cores before the lock is released.</span></div>
<div class="line"><span class="lineno">   58</span>  <span class="comment">// Both the C compiler and the hardware may re-order loads and</span></div>
<div class="line"><span class="lineno">   59</span>  <span class="comment">// stores; __sync_synchronize() tells them both not to.</span></div>
<div class="line"><span class="lineno">   60</span>  __sync_synchronize();</div>
<div class="line"><span class="lineno">   61</span> </div>
<div class="line"><span class="lineno">   62</span>  <span class="comment">// Release the lock, equivalent to lk-&gt;locked = 0.</span></div>
<div class="line"><span class="lineno">   63</span>  <span class="comment">// This code can&#39;t use a C assignment, since it might</span></div>
<div class="line"><span class="lineno">   64</span>  <span class="comment">// not be atomic. A real OS would use C atomics here.</span></div>
<div class="line"><span class="lineno">   65</span>  <span class="keyword">asm</span> <span class="keyword">volatile</span>(<span class="stringliteral">&quot;movl $0, %0&quot;</span> : <span class="stringliteral">&quot;+m&quot;</span> (lk-&gt;<a class="code hl_variable" href="../../d1/d08/structspinlock.html#a48f3007579f644934d9aba91e5378c03">locked</a>) : );</div>
<div class="line"><span class="lineno">   66</span> </div>
<div class="line"><span class="lineno">   67</span>  <a class="code hl_function" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb">popcli</a>();</div>
<div class="line"><span class="lineno">   68</span>}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_a4f8616948f3dbce65671f666eed1d669_cgraph.png" border="0" usemap="#ad5/d64/defs_8h_a4f8616948f3dbce65671f666eed1d669_cgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_a4f8616948f3dbce65671f666eed1d669_cgraph" id="ad5/d64/defs_8h_a4f8616948f3dbce65671f666eed1d669_cgraph">
<area shape="rect" title=" " alt="" coords="5,131,69,156"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="117,207,180,232"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="441,105,495,131"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="228,156,284,181"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="332,207,393,232"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="809,308,872,333"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="559,156,618,181"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="559,5,618,31"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="543,55,635,80"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="683,207,747,232"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="795,207,887,232"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_a4f8616948f3dbce65671f666eed1d669_icgraph.png" border="0" usemap="#ad5/d64/defs_8h_a4f8616948f3dbce65671f666eed1d669_icgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_a4f8616948f3dbce65671f666eed1d669_icgraph" id="ad5/d64/defs_8h_a4f8616948f3dbce65671f666eed1d669_icgraph">
<area shape="rect" title=" " alt="" coords="1029,994,1093,1020"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#aaad2d7a86d4859982dd9a132f5128ff2" title=" " alt="" coords="601,1172,696,1197"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a28ac85a90987662e306ca8efbfe16074" title=" " alt="" coords="225,644,317,669"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a6af7eb39268127d389792cec37785666" title=" " alt="" coords="224,466,319,492"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#ab3c447f135c68e4c3c1f8d5866f6e77b" title=" " alt="" coords="383,1272,425,1297"/>
<area shape="rect" href="../../dc/d6f/trap_8c.html#a372d166e36c086c91e5f5d81e5fead3a" title=" " alt="" coords="5,690,49,716"/>
<area shape="rect" href="../../d6/d13/file_8c.html#ae557c81ab89c24219146144bb6adaa2c" title=" " alt="" coords="236,1296,307,1321"/>
<area shape="rect" href="../../d7/df8/log_8c.html#ac96aa31ffc0500e749c62c4d377c21c9" title=" " alt="" coords="367,1070,441,1096"/>
<area shape="rect" href="../../dc/de6/bio_8c.html#ab5335aeb503731104314321a78a6d727" title=" " alt="" coords="620,842,677,868"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a2ca17a3161c80e3e4894ec6a96e0a281" title=" " alt="" coords="911,489,957,514"/>
<area shape="rect" href="../../d0/d56/console_8c.html#aad3d6ca39f23bb6d2686d2967e415193" title=" " alt="" coords="749,1602,834,1628"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="905,186,963,212"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a45a59a61c8799cb754b4326a32c14dc4" title=" " alt="" coords="770,237,813,262"/>
<area shape="rect" href="../../d7/df8/log_8c.html#ac0f12be0ca0de555e60b27b06a57a65b" title=" " alt="" coords="372,996,436,1021"/>
<area shape="rect" href="../../d6/d13/file_8c.html#ac56b15561658d0e74ce1c53309b8f97d" title=" " alt="" coords="615,288,682,313"/>
<area shape="rect" href="../../d6/d13/file_8c.html#a9ef0346d08d8ed79ce2a9c03f9a4b4b2" title=" " alt="" coords="904,440,964,465"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#acd2e1ded4bb6fce4500438bf928330f4" title=" " alt="" coords="769,565,813,590"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a11c5d62d28e8121e75235d361158156e" title=" " alt="" coords="905,893,963,918"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#a6fdbe54cbecd8fc67d74793b27adcf05" title=" " alt="" coords="887,741,981,766"/>
<area shape="rect" href="../../da/d9b/memide_8c.html#a7f36b008f02088c86f76e98e05b55af5" title=" " alt="" coords="765,792,818,817"/>
<area shape="rect" href="../../da/d9b/memide_8c.html#a709693afdb9b89d848e684e7acde1f8f" title=" " alt="" coords="763,1905,820,1930"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a24a91383ab80b4b8a1ef1f4df896035c" title=" " alt="" coords="911,590,957,616"/>
<area shape="rect" href="../../d4/def/kalloc_8c.html#a5e965f6365c721b5b23c12d16d45c3dc" title=" " alt="" coords="906,1146,962,1172"/>
<area shape="rect" href="../../d4/def/kalloc_8c.html#aced59ecf8411235f6dffc065236711a5" title=" " alt="" coords="909,692,959,717"/>
<area shape="rect" href="../../d1/d47/pipe_8c.html#a48642f54734698f6f881ee07723292cb" title=" " alt="" coords="753,1501,830,1526"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#af6f31822f7e737b4e414bdac1ccb59a4" title=" " alt="" coords="768,690,815,716"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a650cf0caaaa8b75f653c1c92818d03a4" title=" " alt="" coords="915,1349,953,1374"/>
<area shape="rect" href="../../d7/df8/log_8c.html#a7eacb0fbebe5ce4c7d3ddea15908b13d" title=" " alt="" coords="611,894,686,920"/>
<area shape="rect" href="../../d1/d47/pipe_8c.html#ad4cce6144039b615d139f8660c60293a" title=" " alt="" coords="756,1197,827,1222"/>
<area shape="rect" href="../../d1/d47/pipe_8c.html#acfca0fab7d2c0c0dcc56359c8febe14a" title=" " alt="" coords="754,1400,829,1425"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#aa997067c2c9bfef15af6fa0a10c20f4a" title=" " alt="" coords="744,1298,839,1324"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a9fa00b0be5d3c4781048861e2506eb63" title=" " alt="" coords="895,1602,973,1628"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ae70cc0370342e46f6db3bec367232457" title=" " alt="" coords="907,1045,961,1070"/>
<area shape="rect" href="../../dd/d35/sysproc_8c.html#a59778ec9bfa6b6f2100b43fbba000573" title=" " alt="" coords="751,1148,832,1173"/>
<area shape="rect" href="../../dd/d35/sysproc_8c.html#aaf8553903ba8f2776247679d4db0d121" title=" " alt="" coords="889,1754,979,1780"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a81c8a6a0cae413bc81aa223f7f7b7205" title=" " alt="" coords="902,1804,966,1829"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a4a34d9f03e436cfa09b88f735f6ee952" title=" " alt="" coords="901,1501,967,1526"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a7cb51f5c2b5cad3766f19eb69c92793b" title=" " alt="" coords="497,34,546,60"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#aed28187406d84a3aa71f10c6235a03ec" title=" " alt="" coords="379,794,429,820"/>
<area shape="rect" href="../../df/dc9/exec_8c.html#ace32454ed0d37834dcb1cb4f8b727e6e" title=" " alt="" coords="246,745,297,770"/>
<area shape="rect" href="../../d6/d13/file_8c.html#ab8de757a0a9f58dcc6511ea5e46ebb88" title=" " alt="" coords="238,1144,305,1169"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#ad1c5f8693cb35b9605fee09eebdda640" title=" " alt="" coords="232,996,311,1021"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a759600870314007ac558871239122fb7" title=" " alt="" coords="236,946,307,972"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a74e45efc661ca17c068bc283b3842e6d" title=" " alt="" coords="97,845,176,870"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#ae1e58ee11d41f643929520d8c1640da7" title=" " alt="" coords="229,794,313,820"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#aaf98ef7cdde3a0dfb2e49919de3298b1" title=" " alt="" coords="115,1245,158,1270"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a057e5bce2de7a87ebfd2dc33967bca4a" title=" " alt="" coords="230,1094,313,1120"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a25697aa3d828b5878d38170d724adb27" title=" " alt="" coords="227,1045,316,1070"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#af95049367381647bc9487af49724b869" title=" " alt="" coords="495,844,547,869"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a7220afa8e5f4bea540eb95879ea7df6e" title=" " alt="" coords="489,945,553,970"/>
</map>
</div>

</div>
</div>
<a id="a840b479c87b1c047d7142f58e0ad0b27" name="a840b479c87b1c047d7142f58e0ad0b27"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a840b479c87b1c047d7142f58e0ad0b27">&#9670;&#160;</a></span>releasesleep()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void releasesleep </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d9/dd0/structsleeplock.html">sleeplock</a> *&#160;</td>
          <td class="paramname"><em>lk</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d8/dd1/sleeplock_8c_source.html#l00035">35</a> of file <a class="el" href="../../d8/dd1/sleeplock_8c_source.html">sleeplock.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   36</span>{</div>
<div class="line"><span class="lineno">   37</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#afe4ef8638f1ecb962a6e67fb086ee3b8">acquire</a>(&amp;lk-&gt;<a class="code hl_variable" href="../../d9/dd0/structsleeplock.html#a077241ea0e720d228d853208444c4c9d">lk</a>);</div>
<div class="line"><span class="lineno">   38</span>  lk-&gt;<a class="code hl_variable" href="../../d9/dd0/structsleeplock.html#ac5cfe608994a41b24cb1c0fd722910c3">locked</a> = 0;</div>
<div class="line"><span class="lineno">   39</span>  lk-&gt;<a class="code hl_variable" href="../../d9/dd0/structsleeplock.html#a99a4c6a784956ab1c391a12af475a55e">pid</a> = 0;</div>
<div class="line"><span class="lineno">   40</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#a245b56417239f499389b2e806bd99254">wakeup</a>(lk);</div>
<div class="line"><span class="lineno">   41</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#a4f8616948f3dbce65671f666eed1d669">release</a>(&amp;lk-&gt;<a class="code hl_variable" href="../../d9/dd0/structsleeplock.html#a077241ea0e720d228d853208444c4c9d">lk</a>);</div>
<div class="line"><span class="lineno">   42</span>}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_a840b479c87b1c047d7142f58e0ad0b27_cgraph.png" border="0" usemap="#ad5/d64/defs_8h_a840b479c87b1c047d7142f58e0ad0b27_cgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_a840b479c87b1c047d7142f58e0ad0b27_cgraph" id="ad5/d64/defs_8h_a840b479c87b1c047d7142f58e0ad0b27_cgraph">
<area shape="rect" title=" " alt="" coords="5,380,100,405"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="263,253,327,279"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="976,355,1040,380"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a4a34d9f03e436cfa09b88f735f6ee952" title=" " alt="" coords="148,380,215,405"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="375,279,467,304"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="389,127,452,152"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="625,115,687,140"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="735,228,788,253"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="515,25,577,51"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="1088,127,1144,152"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="853,127,911,152"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="853,329,911,355"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="836,228,928,253"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_a840b479c87b1c047d7142f58e0ad0b27_icgraph.png" border="0" usemap="#ad5/d64/defs_8h_a840b479c87b1c047d7142f58e0ad0b27_icgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_a840b479c87b1c047d7142f58e0ad0b27_icgraph" id="ad5/d64/defs_8h_a840b479c87b1c047d7142f58e0ad0b27_icgraph">
<area shape="rect" title=" " alt="" coords="860,634,955,659"/>
<area shape="rect" href="../../dc/de6/bio_8c.html#ab5335aeb503731104314321a78a6d727" title=" " alt="" coords="755,634,812,659"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#ab3c447f135c68e4c3c1f8d5866f6e77b" title=" " alt="" coords="536,796,579,822"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#ae4e29916219b9293b37f9c34220694fe" title=" " alt="" coords="526,256,589,282"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#af95049367381647bc9487af49724b869" title=" " alt="" coords="649,658,701,683"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#aed28187406d84a3aa71f10c6235a03ec" title=" " alt="" coords="533,431,582,456"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a7220afa8e5f4bea540eb95879ea7df6e" title=" " alt="" coords="643,810,707,835"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a15858f4d8a4cc1def3d84d03c312836b" title=" " alt="" coords="531,734,584,759"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a3aba1fa9f6789d09356aec5b96d91fa8" title=" " alt="" coords="649,458,700,483"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#aff0080b2133027be2e525ca088b40e78" title=" " alt="" coords="644,608,705,634"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a28ac85a90987662e306ca8efbfe16074" title=" " alt="" coords="379,330,471,355"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a6af7eb39268127d389792cec37785666" title=" " alt="" coords="377,280,472,306"/>
<area shape="rect" href="../../df/dc9/exec_8c.html#ace32454ed0d37834dcb1cb4f8b727e6e" title=" " alt="" coords="262,383,313,408"/>
<area shape="rect" href="../../d6/d13/file_8c.html#a1dc8c87c7e48bdaaf98e9c7047928f29" title=" " alt="" coords="393,130,457,155"/>
<area shape="rect" href="../../d6/d13/file_8c.html#afff8e849fa54dea2a5a27dbb97474607" title=" " alt="" coords="394,231,455,256"/>
<area shape="rect" href="../../d6/d13/file_8c.html#ab8de757a0a9f58dcc6511ea5e46ebb88" title=" " alt="" coords="391,532,458,558"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#ad1c5f8693cb35b9605fee09eebdda640" title=" " alt="" coords="248,478,327,503"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a759600870314007ac558871239122fb7" title=" " alt="" coords="252,683,323,708"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a74e45efc661ca17c068bc283b3842e6d" title=" " alt="" coords="248,555,327,580"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#ae1e58ee11d41f643929520d8c1640da7" title=" " alt="" coords="245,886,329,911"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#ac5b5d4517586be6396b4f3b37445945a" title=" " alt="" coords="111,444,190,470"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a6f94e3b215d069b5419e87bafe80799a" title=" " alt="" coords="115,386,187,411"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a69a135a0e8a06d9f306d77ebc0c1f7a0" title=" " alt="" coords="397,734,453,759"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#aaf98ef7cdde3a0dfb2e49919de3298b1" title=" " alt="" coords="266,962,309,987"/>
<area shape="rect" href="../../d6/d13/file_8c.html#ae557c81ab89c24219146144bb6adaa2c" title=" " alt="" coords="389,987,460,1012"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a207b3008bae35596c55ec7c4fc6875eb" title=" " alt="" coords="384,582,465,607"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a77cc2edce6e78f22dd9eb377462762f2" title=" " alt="" coords="116,808,185,834"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#aa0d46fcb43667c805b84ea7e1ff6100a" title=" " alt="" coords="124,858,177,883"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a86fe524d99d69c18a335512cf3405b31" title=" " alt="" coords="123,907,179,932"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a57e55b2d0161d62bb99765ca3de43e35" title=" " alt="" coords="117,956,184,982"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a0b0ff95e564df3c3e8fc977226b75de7" title=" " alt="" coords="118,1006,183,1031"/>
<area shape="rect" href="../../d1/d8f/cat_8c.html#a90a33618884bcf5e892297879bc016ff" title=" " alt="" coords="131,1107,171,1132"/>
<area shape="rect" href="../../d1/d8f/cat_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="5,1082,56,1107"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a5a12affe4fdfaa172d85da9a6adf98d2" title=" " alt="" coords="111,1156,190,1182"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a425a0efe4f459decf4b5ea14517ab3cf" title=" " alt="" coords="104,1206,197,1231"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#aedd6d3f148dd5c99b47900215c1ac43f" title=" " alt="" coords="124,1255,177,1280"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a8db9f9a2634bab29096bab0b8bc6945c" title=" " alt="" coords="121,1304,180,1330"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a8faab06cc4d48335076b368f02709ee2" title=" " alt="" coords="107,1354,194,1379"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a330ed2370fe27045b8bec1eb0bd7818f" title=" " alt="" coords="117,1403,184,1428"/>
<area shape="rect" href="../../d5/de1/forktest_8c.html#a0ef8ccf57bc8c491407ec513b234f83c" title=" " alt="" coords="117,1452,184,1478"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a77a4432bc67dfb513f1c1d698c2c4ea6" title=" " alt="" coords="117,512,185,538"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#abf4af50e65630225208fef177e267efb" title=" " alt="" coords="116,562,185,587"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#ac9fe56d8f6e4ed1c9677b06cb7b325e6" title=" " alt="" coords="118,611,183,636"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a267227083b00d0cc3141b34f5152ae04" title=" " alt="" coords="131,660,171,686"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a4eeee588d4689a58fc140a7d5d7b0608" title=" " alt="" coords="119,710,183,735"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a1740f29f4ce6d3060fd79a9312edc315" title=" " alt="" coords="113,759,189,784"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a5341068f021beac8cf0032b97d231e6f" title=" " alt="" coords="520,507,595,532"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a201acc8337a2893268b61ea5a1ee0d53" title=" " alt="" coords="522,52,593,78"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a301761a27cf266e0bad483272fb31a3c" title=" " alt="" coords="536,658,579,683"/>
<area shape="rect" href="../../d7/df8/log_8c.html#ad5e79aaefb91f41b9ef6aeae7ecf4708" title=" " alt="" coords="529,608,585,634"/>
</map>
</div>

</div>
</div>
<a id="aa406a54805a570dfe266281876dc5d69" name="aa406a54805a570dfe266281876dc5d69"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa406a54805a570dfe266281876dc5d69">&#9670;&#160;</a></span>safestrcpy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char * safestrcpy </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>n</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/db0/string_8c_source.html#l00083">83</a> of file <a class="el" href="../../d1/db0/string_8c_source.html">string.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   84</span>{</div>
<div class="line"><span class="lineno">   85</span>  <span class="keywordtype">char</span> *os;</div>
<div class="line"><span class="lineno">   86</span> </div>
<div class="line"><span class="lineno">   87</span>  os = s;</div>
<div class="line"><span class="lineno">   88</span>  <span class="keywordflow">if</span>(n &lt;= 0)</div>
<div class="line"><span class="lineno">   89</span>    <span class="keywordflow">return</span> os;</div>
<div class="line"><span class="lineno">   90</span>  <span class="keywordflow">while</span>(--n &gt; 0 &amp;&amp; (*s++ = *t++) != 0)</div>
<div class="line"><span class="lineno">   91</span>    ;</div>
<div class="line"><span class="lineno">   92</span>  *s = 0;</div>
<div class="line"><span class="lineno">   93</span>  <span class="keywordflow">return</span> os;</div>
<div class="line"><span class="lineno">   94</span>}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_aa406a54805a570dfe266281876dc5d69_icgraph.png" border="0" usemap="#ad5/d64/defs_8h_aa406a54805a570dfe266281876dc5d69_icgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_aa406a54805a570dfe266281876dc5d69_icgraph" id="ad5/d64/defs_8h_aa406a54805a570dfe266281876dc5d69_icgraph">
<area shape="rect" title=" " alt="" coords="751,208,833,233"/>
<area shape="rect" href="../../df/dc9/exec_8c.html#ace32454ed0d37834dcb1cb4f8b727e6e" title=" " alt="" coords="267,308,317,333"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#acd2e1ded4bb6fce4500438bf928330f4" title=" " alt="" coords="659,613,703,639"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a81c8a6a0cae413bc81aa223f7f7b7205" title=" " alt="" coords="260,208,324,233"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#ac5b5d4517586be6396b4f3b37445945a" title=" " alt="" coords="111,407,190,432"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a6f94e3b215d069b5419e87bafe80799a" title=" " alt="" coords="115,357,187,383"/>
<area shape="rect" href="../../d8/d60/init_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title=" " alt="" coords="125,259,176,284"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#aedbeff6afe5d4e22330c7e6b5e6df893" title=" " alt="" coords="118,56,183,81"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#aeaa813ddeb6a5fac3c45714c7351c526" title=" " alt="" coords="111,308,190,333"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="5,639,56,664"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title=" " alt="" coords="5,19,56,44"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a5a12affe4fdfaa172d85da9a6adf98d2" title=" " alt="" coords="391,1064,469,1089"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a425a0efe4f459decf4b5ea14517ab3cf" title=" " alt="" coords="245,1068,339,1093"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a8faab06cc4d48335076b368f02709ee2" title=" " alt="" coords="387,56,473,81"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a330ed2370fe27045b8bec1eb0bd7818f" title=" " alt="" coords="259,257,325,283"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#a7ae98824a008ffbc5506060227b6faa0" title=" " alt="" coords="267,5,317,31"/>
<area shape="rect" href="../../d5/de1/forktest_8c.html#a0ef8ccf57bc8c491407ec513b234f83c" title=" " alt="" coords="533,1015,599,1040"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a77a4432bc67dfb513f1c1d698c2c4ea6" title=" " alt="" coords="396,664,464,689"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a1740f29f4ce6d3060fd79a9312edc315" title=" " alt="" coords="254,435,330,460"/>
<area shape="rect" href="../../d0/d87/foo_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="541,965,591,991"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#aa1c6e6e76813ccb29a29bb119dba668a" title=" " alt="" coords="541,512,591,537"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a3208ed001a225f5d9ea3fb37f46810c7" title=" " alt="" coords="104,715,197,740"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a16ae754fb9c5622d44d0c3ce62ad7c49" title=" " alt="" coords="403,765,457,791"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a026b8c4ab2cb9af17e1c20d533981604" title=" " alt="" coords="257,816,327,841"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a06636ed0cda58c748d68e82d33d1afce" title=" " alt="" coords="116,157,185,183"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a02e1ca3f4db5f4bf8a683a0b7c18cc43" title=" " alt="" coords="530,613,602,639"/>
<area shape="rect" href="../../dd/d35/sysproc_8c.html#a3b05102e512b34446a54334f916ba5cd" title=" " alt="" coords="530,463,602,488"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a6888f9f6d973f81f73091d1530ad212b" title=" " alt="" coords="547,867,585,892"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a98d8496ecb698b9400831f2718d805c3" title=" " alt="" coords="521,916,611,941"/>
<area shape="rect" href="../../d5/de1/forktest_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title=" " alt="" coords="405,1015,455,1040"/>
<area shape="rect" href="../../de/de9/vm_8c.html#afea0f0a82a9f9c7aae26f90b5e0836c6" title=" " alt="" coords="393,461,467,487"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a1b57bfa0091c9be3ccc16dbb85ce3acf" title=" " alt="" coords="393,563,467,588"/>
<area shape="rect" href="../../de/de9/vm_8c.html#ac96c231d4053eaf4322c27d1f2cd9d49" title=" " alt="" coords="398,259,462,284"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a9c16214741f4fcd088e5eea468709328" title=" " alt="" coords="255,484,329,509"/>
<area shape="rect" href="../../dd/d35/sysproc_8c.html#ab21d46be776cf6075a997af525a1a628" title=" " alt="" coords="113,508,188,533"/>
</map>
</div>

</div>
</div>
<a id="ad788da91743c333b5bed7c4a0dd12365" name="ad788da91743c333b5bed7c4a0dd12365"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad788da91743c333b5bed7c4a0dd12365">&#9670;&#160;</a></span>sched()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sched </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/dda/proc_8c_source.html#l00366">366</a> of file <a class="el" href="../../d3/dda/proc_8c_source.html">proc.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  367</span>{</div>
<div class="line"><span class="lineno">  368</span>  <span class="keywordtype">int</span> intena;</div>
<div class="line"><span class="lineno">  369</span>  <span class="keyword">struct </span><a class="code hl_struct" href="../../de/d48/structproc.html">proc</a> *p = <a class="code hl_function" href="../../d3/dda/proc_8c.html#a41af0935f3989aae450cf8988cd9c3a9">myproc</a>();</div>
<div class="line"><span class="lineno">  370</span> </div>
<div class="line"><span class="lineno">  371</span>  <span class="keywordflow">if</span>(!<a class="code hl_function" href="../../d5/d64/defs_8h.html#ac44b13cc76bf4040e3baf34df75ff230">holding</a>(&amp;<a class="code hl_variable" href="../../d3/dda/proc_8c.html#addf39d613ca9a58e7e6080a2e454421a">ptable</a>.lock))</div>
<div class="line"><span class="lineno">  372</span>    <a class="code hl_function" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a">panic</a>(<span class="stringliteral">&quot;sched ptable.lock&quot;</span>);</div>
<div class="line"><span class="lineno">  373</span>  <span class="keywordflow">if</span>(<a class="code hl_function" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160">mycpu</a>()-&gt;ncli != 1)</div>
<div class="line"><span class="lineno">  374</span>    <a class="code hl_function" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a">panic</a>(<span class="stringliteral">&quot;sched locks&quot;</span>);</div>
<div class="line"><span class="lineno">  375</span>  <span class="keywordflow">if</span>(p-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#a0f2fe91548a1382672ae26e29ca9e736">state</a> == <a class="code hl_enumvalue" href="../../df/d03/proc_8h.html#aa1ced7d2b60040fded3fa873d0c03ba7a1061be6c3fb88d32829cba6f6b2be304">RUNNING</a>)</div>
<div class="line"><span class="lineno">  376</span>    <a class="code hl_function" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a">panic</a>(<span class="stringliteral">&quot;sched running&quot;</span>);</div>
<div class="line"><span class="lineno">  377</span>  <span class="keywordflow">if</span>(readeflags()&amp;<a class="code hl_define" href="../../d2/df1/mmu_8h.html#ab481068357bb42797aafe91864a2d085">FL_IF</a>)</div>
<div class="line"><span class="lineno">  378</span>    <a class="code hl_function" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a">panic</a>(<span class="stringliteral">&quot;sched interruptible&quot;</span>);</div>
<div class="line"><span class="lineno">  379</span>  intena = <a class="code hl_function" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160">mycpu</a>()-&gt;<a class="code hl_variable" href="../../db/d62/structcpu.html#a26fc271fea8af30d67fc2ae22ef0a82f">intena</a>;</div>
<div class="line"><span class="lineno">  380</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#a1d9e7047d3dfb57809a2541d8387705e">swtch</a>(&amp;p-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#ae0d9bffe1ad1c7d60dd2733be0a2333c">context</a>, <a class="code hl_function" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160">mycpu</a>()-&gt;<a class="code hl_function" href="../../d3/dda/proc_8c.html#a9fa00b0be5d3c4781048861e2506eb63">scheduler</a>);</div>
<div class="line"><span class="lineno">  381</span>  <a class="code hl_function" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160">mycpu</a>()-&gt;<a class="code hl_variable" href="../../db/d62/structcpu.html#a26fc271fea8af30d67fc2ae22ef0a82f">intena</a> = intena;</div>
<div class="line"><span class="lineno">  382</span>}</div>
<div class="ttc" id="adefs_8h_html_a1d9e7047d3dfb57809a2541d8387705e"><div class="ttname"><a href="../../d5/d64/defs_8h.html#a1d9e7047d3dfb57809a2541d8387705e">swtch</a></div><div class="ttdeci">void swtch(struct context **, struct context *)</div></div>
<div class="ttc" id="adefs_8h_html_ac44b13cc76bf4040e3baf34df75ff230"><div class="ttname"><a href="../../d5/d64/defs_8h.html#ac44b13cc76bf4040e3baf34df75ff230">holding</a></div><div class="ttdeci">int holding(struct spinlock *)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d2d/spinlock_8c_source.html#l00090">spinlock.c:90</a></div></div>
<div class="ttc" id="aproc_8c_html_a9fa00b0be5d3c4781048861e2506eb63"><div class="ttname"><a href="../../d3/dda/proc_8c.html#a9fa00b0be5d3c4781048861e2506eb63">scheduler</a></div><div class="ttdeci">void scheduler(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dda/proc_8c_source.html#l00323">proc.c:323</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_ad788da91743c333b5bed7c4a0dd12365_cgraph.png" border="0" usemap="#ad5/d64/defs_8h_ad788da91743c333b5bed7c4a0dd12365_cgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_ad788da91743c333b5bed7c4a0dd12365_cgraph" id="ad5/d64/defs_8h_ad788da91743c333b5bed7c4a0dd12365_cgraph">
<area shape="rect" title=" " alt="" coords="5,578,63,603"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="249,174,311,199"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="371,603,432,629"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="480,451,533,477"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a41af0935f3989aae450cf8988cd9c3a9" title=" " alt="" coords="247,855,313,881"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a9fa00b0be5d3c4781048861e2506eb63" title=" " alt="" coords="111,654,189,679"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a1d9e7047d3dfb57809a2541d8387705e" title=" " alt="" coords="251,805,309,830"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="848,755,911,781"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="851,326,907,351"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="598,553,657,578"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="598,402,657,427"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="581,451,673,477"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="721,654,785,679"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="721,301,785,326"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="833,654,925,679"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a02ca0670bc1fe12e38453082631ff360" title=" " alt="" coords="237,755,323,781"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a87c90f0ab2a1b11c2b55f4e483bb8493" title=" " alt="" coords="237,603,323,629"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_ad788da91743c333b5bed7c4a0dd12365_icgraph.png" border="0" usemap="#ad5/d64/defs_8h_ad788da91743c333b5bed7c4a0dd12365_icgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_ad788da91743c333b5bed7c4a0dd12365_icgraph" id="ad5/d64/defs_8h_ad788da91743c333b5bed7c4a0dd12365_icgraph">
<area shape="rect" title=" " alt="" coords="601,1045,659,1071"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#aaf98ef7cdde3a0dfb2e49919de3298b1" title=" " alt="" coords="263,1045,306,1071"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ae70cc0370342e46f6db3bec367232457" title=" " alt="" coords="500,183,553,208"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a7cb51f5c2b5cad3766f19eb69c92793b" title=" " alt="" coords="260,1591,309,1616"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a77cc2edce6e78f22dd9eb377462762f2" title=" " alt="" coords="131,648,200,673"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#ac5b5d4517586be6396b4f3b37445945a" title=" " alt="" coords="126,697,205,723"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#aa0d46fcb43667c805b84ea7e1ff6100a" title=" " alt="" coords="139,747,192,772"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a86fe524d99d69c18a335512cf3405b31" title=" " alt="" coords="137,796,193,821"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a57e55b2d0161d62bb99765ca3de43e35" title=" " alt="" coords="132,845,199,871"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a0b0ff95e564df3c3e8fc977226b75de7" title=" " alt="" coords="133,895,198,920"/>
<area shape="rect" href="../../d1/d8f/cat_8c.html#a90a33618884bcf5e892297879bc016ff" title=" " alt="" coords="145,944,185,969"/>
<area shape="rect" href="../../d1/d8f/cat_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="13,969,63,995"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a5a12affe4fdfaa172d85da9a6adf98d2" title=" " alt="" coords="126,1045,205,1071"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a425a0efe4f459decf4b5ea14517ab3cf" title=" " alt="" coords="119,1095,212,1120"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#aedd6d3f148dd5c99b47900215c1ac43f" title=" " alt="" coords="139,1144,192,1169"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a8db9f9a2634bab29096bab0b8bc6945c" title=" " alt="" coords="136,1193,195,1219"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a6f94e3b215d069b5419e87bafe80799a" title=" " alt="" coords="129,1243,201,1268"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a8faab06cc4d48335076b368f02709ee2" title=" " alt="" coords="122,1292,209,1317"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a330ed2370fe27045b8bec1eb0bd7818f" title=" " alt="" coords="132,1341,199,1367"/>
<area shape="rect" href="../../d5/de1/forktest_8c.html#a0ef8ccf57bc8c491407ec513b234f83c" title=" " alt="" coords="132,1391,199,1416"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a77a4432bc67dfb513f1c1d698c2c4ea6" title=" " alt="" coords="131,1440,199,1465"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#abf4af50e65630225208fef177e267efb" title=" " alt="" coords="131,1489,200,1515"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#ac9fe56d8f6e4ed1c9677b06cb7b325e6" title=" " alt="" coords="133,1539,198,1564"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a267227083b00d0cc3141b34f5152ae04" title=" " alt="" coords="145,1588,185,1613"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a4eeee588d4689a58fc140a7d5d7b0608" title=" " alt="" coords="133,1637,197,1663"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a1740f29f4ce6d3060fd79a9312edc315" title=" " alt="" coords="127,1687,203,1712"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#aa1c6e6e76813ccb29a29bb119dba668a" title=" " alt="" coords="140,1736,191,1761"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a3208ed001a225f5d9ea3fb37f46810c7" title=" " alt="" coords="119,155,212,180"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#ae7c61791dd2cfb8ad59b4c6e87685c07" title=" " alt="" coords="129,1785,201,1811"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#ada38fdb2913f040f6eeb6189eeb42d32" title=" " alt="" coords="139,1835,192,1860"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#aedbeff6afe5d4e22330c7e6b5e6df893" title=" " alt="" coords="5,1860,71,1885"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a16ae754fb9c5622d44d0c3ce62ad7c49" title=" " alt="" coords="139,1936,192,1961"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a6b22568d42b584ed4b0dc4e2b0677013" title=" " alt="" coords="138,1985,193,2011"/>
<area shape="rect" href="../../d7/d1f/mkfs_8c.html#a22ea835ad23cd716a962f30e4882ee80" title=" " alt="" coords="140,2035,191,2060"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a06636ed0cda58c748d68e82d33d1afce" title=" " alt="" coords="131,56,200,81"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a02e1ca3f4db5f4bf8a683a0b7c18cc43" title=" " alt="" coords="129,204,201,229"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a5d39024e15998d6a6865f4cd0f69738b" title=" " alt="" coords="137,253,194,279"/>
<area shape="rect" href="../../dd/d35/sysproc_8c.html#aee72faa31a0c32b410aba558ef1d59f2" title=" " alt="" coords="130,303,201,328"/>
<area shape="rect" href="../../dc/d6f/trap_8c.html#a372d166e36c086c91e5f5d81e5fead3a" title=" " alt="" coords="143,2084,187,2109"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a6888f9f6d973f81f73091d1530ad212b" title=" " alt="" coords="146,352,185,377"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a3331ced6fb67502a2e5277260d4f5aec" title=" " alt="" coords="125,401,206,427"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a98d8496ecb698b9400831f2718d805c3" title=" " alt="" coords="121,105,210,131"/>
<area shape="rect" href="../../d3/d7a/wc_8c.html#a4f21d23f0e3167f510b9f393b185751c" title=" " alt="" coords="146,451,185,476"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a3a007a46ea6310b39a233e45d439f11a" title=" " alt="" coords="129,500,201,525"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a48ac3cbd37dcf4c4e08b0572b3a0e9f3" title=" " alt="" coords="126,549,205,575"/>
<area shape="rect" href="../../d7/d1f/mkfs_8c.html#ac62d827d836d1807e4d6f365f32348bb" title=" " alt="" coords="137,599,194,624"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#aaad2d7a86d4859982dd9a132f5128ff2" title=" " alt="" coords="357,157,452,183"/>
<area shape="rect" href="../../d7/df8/log_8c.html#ac96aa31ffc0500e749c62c4d377c21c9" title=" " alt="" coords="367,651,442,676"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a28ac85a90987662e306ca8efbfe16074" title=" " alt="" coords="359,259,451,284"/>
<area shape="rect" href="../../da/d9b/memide_8c.html#a7f36b008f02088c86f76e98e05b55af5" title=" " alt="" coords="378,5,431,31"/>
</map>
</div>

</div>
</div>
<a id="a9596021487afc9231319f22b71e4cb42" name="a9596021487afc9231319f22b71e4cb42"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9596021487afc9231319f22b71e4cb42">&#9670;&#160;</a></span>scheduler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void scheduler </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/dda/proc_8c_source.html#l00323">323</a> of file <a class="el" href="../../d3/dda/proc_8c_source.html">proc.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  324</span>{</div>
<div class="line"><span class="lineno">  325</span>  <span class="keyword">struct </span><a class="code hl_struct" href="../../de/d48/structproc.html">proc</a> *p;</div>
<div class="line"><span class="lineno">  326</span>  <span class="keyword">struct </span><a class="code hl_struct" href="../../db/d62/structcpu.html">cpu</a> *c = <a class="code hl_function" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160">mycpu</a>();</div>
<div class="line"><span class="lineno">  327</span>  c-&gt;<a class="code hl_variable" href="../../db/d62/structcpu.html#a9e71a6265904fd644875a9ea5a413c89">proc</a> = 0;</div>
<div class="line"><span class="lineno">  328</span>  </div>
<div class="line"><span class="lineno">  329</span>  <span class="keywordflow">for</span>(;;){</div>
<div class="line"><span class="lineno">  330</span>    <span class="comment">// Enable interrupts on this processor.</span></div>
<div class="line"><span class="lineno">  331</span>    sti();</div>
<div class="line"><span class="lineno">  332</span> </div>
<div class="line"><span class="lineno">  333</span>    <span class="comment">// Loop over process table looking for process to run.</span></div>
<div class="line"><span class="lineno">  334</span>    <a class="code hl_function" href="../../d5/d64/defs_8h.html#afe4ef8638f1ecb962a6e67fb086ee3b8">acquire</a>(&amp;<a class="code hl_variable" href="../../d3/dda/proc_8c.html#addf39d613ca9a58e7e6080a2e454421a">ptable</a>.lock);</div>
<div class="line"><span class="lineno">  335</span>    <span class="keywordflow">for</span>(p = <a class="code hl_variable" href="../../d3/dda/proc_8c.html#addf39d613ca9a58e7e6080a2e454421a">ptable</a>.proc; p &lt; &amp;<a class="code hl_variable" href="../../d3/dda/proc_8c.html#addf39d613ca9a58e7e6080a2e454421a">ptable</a>.proc[<a class="code hl_define" href="../../d5/d33/param_8h.html#a810c5b751df5bb30588613ed91095129">NPROC</a>]; p++){</div>
<div class="line"><span class="lineno">  336</span>      <span class="keywordflow">if</span>(p-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#a0f2fe91548a1382672ae26e29ca9e736">state</a> != <a class="code hl_enumvalue" href="../../df/d03/proc_8h.html#aa1ced7d2b60040fded3fa873d0c03ba7a269b90433e40460a2c0044a0b3e15694">RUNNABLE</a>)</div>
<div class="line"><span class="lineno">  337</span>        <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  338</span> </div>
<div class="line"><span class="lineno">  339</span>      <span class="comment">// Switch to chosen process.  It is the process&#39;s job</span></div>
<div class="line"><span class="lineno">  340</span>      <span class="comment">// to release ptable.lock and then reacquire it</span></div>
<div class="line"><span class="lineno">  341</span>      <span class="comment">// before jumping back to us.</span></div>
<div class="line"><span class="lineno">  342</span>      c-&gt;<a class="code hl_variable" href="../../db/d62/structcpu.html#a9e71a6265904fd644875a9ea5a413c89">proc</a> = p;</div>
<div class="line"><span class="lineno">  343</span>      <a class="code hl_function" href="../../d5/d64/defs_8h.html#ad43d81fa3edec39a200abd0853bc84b1">switchuvm</a>(p);</div>
<div class="line"><span class="lineno">  344</span>      p-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#a0f2fe91548a1382672ae26e29ca9e736">state</a> = <a class="code hl_enumvalue" href="../../df/d03/proc_8h.html#aa1ced7d2b60040fded3fa873d0c03ba7a1061be6c3fb88d32829cba6f6b2be304">RUNNING</a>;</div>
<div class="line"><span class="lineno">  345</span> </div>
<div class="line"><span class="lineno">  346</span>      <a class="code hl_function" href="../../d5/d64/defs_8h.html#a1d9e7047d3dfb57809a2541d8387705e">swtch</a>(&amp;(c-&gt;<a class="code hl_variable" href="../../db/d62/structcpu.html#aaa1510fdf8a2230c033d04e13e4fdd9e">scheduler</a>), p-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#ae0d9bffe1ad1c7d60dd2733be0a2333c">context</a>);</div>
<div class="line"><span class="lineno">  347</span>      <a class="code hl_function" href="../../d5/d64/defs_8h.html#a02ca0670bc1fe12e38453082631ff360">switchkvm</a>();</div>
<div class="line"><span class="lineno">  348</span> </div>
<div class="line"><span class="lineno">  349</span>      <span class="comment">// Process is done running for now.</span></div>
<div class="line"><span class="lineno">  350</span>      <span class="comment">// It should have changed its p-&gt;state before coming back.</span></div>
<div class="line"><span class="lineno">  351</span>      c-&gt;<a class="code hl_variable" href="../../db/d62/structcpu.html#a9e71a6265904fd644875a9ea5a413c89">proc</a> = 0;</div>
<div class="line"><span class="lineno">  352</span>    }</div>
<div class="line"><span class="lineno">  353</span>    <a class="code hl_function" href="../../d5/d64/defs_8h.html#a4f8616948f3dbce65671f666eed1d669">release</a>(&amp;<a class="code hl_variable" href="../../d3/dda/proc_8c.html#addf39d613ca9a58e7e6080a2e454421a">ptable</a>.lock);</div>
<div class="line"><span class="lineno">  354</span> </div>
<div class="line"><span class="lineno">  355</span>  }</div>
<div class="line"><span class="lineno">  356</span>}</div>
<div class="ttc" id="adefs_8h_html_a02ca0670bc1fe12e38453082631ff360"><div class="ttname"><a href="../../d5/d64/defs_8h.html#a02ca0670bc1fe12e38453082631ff360">switchkvm</a></div><div class="ttdeci">void switchkvm(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/de9/vm_8c_source.html#l00150">vm.c:150</a></div></div>
<div class="ttc" id="astructcpu_html_aaa1510fdf8a2230c033d04e13e4fdd9e"><div class="ttname"><a href="../../db/d62/structcpu.html#aaa1510fdf8a2230c033d04e13e4fdd9e">cpu::scheduler</a></div><div class="ttdeci">struct context * scheduler</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d03/proc_8h_source.html#l00004">proc.h:4</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_a9596021487afc9231319f22b71e4cb42_cgraph.png" border="0" usemap="#ad5/d64/defs_8h_a9596021487afc9231319f22b71e4cb42_cgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_a9596021487afc9231319f22b71e4cb42_cgraph" id="ad5/d64/defs_8h_a9596021487afc9231319f22b71e4cb42_cgraph">
<area shape="rect" title=" " alt="" coords="5,474,84,499"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="143,297,207,322"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="516,373,577,398"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="867,94,931,119"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a02ca0670bc1fe12e38453082631ff360" title=" " alt="" coords="132,550,217,575"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a87c90f0ab2a1b11c2b55f4e483bb8493" title=" " alt="" coords="269,499,354,525"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a1d9e7047d3dfb57809a2541d8387705e" title=" " alt="" coords="146,599,203,625"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="265,398,357,423"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="280,195,343,221"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="625,246,679,271"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="405,347,468,373"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="979,297,1035,322"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="743,347,802,373"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="743,94,802,119"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="727,246,819,271"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_a9596021487afc9231319f22b71e4cb42_icgraph.png" border="0" usemap="#ad5/d64/defs_8h_a9596021487afc9231319f22b71e4cb42_icgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_a9596021487afc9231319f22b71e4cb42_icgraph" id="ad5/d64/defs_8h_a9596021487afc9231319f22b71e4cb42_icgraph">
<area shape="rect" title=" " alt="" coords="707,996,785,1021"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad788da91743c333b5bed7c4a0dd12365" title=" " alt="" coords="601,996,659,1021"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#aaf98ef7cdde3a0dfb2e49919de3298b1" title=" " alt="" coords="263,1020,306,1045"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ae70cc0370342e46f6db3bec367232457" title=" " alt="" coords="500,996,553,1021"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a7cb51f5c2b5cad3766f19eb69c92793b" title=" " alt="" coords="260,1787,309,1812"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a77cc2edce6e78f22dd9eb377462762f2" title=" " alt="" coords="131,400,200,425"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#ac5b5d4517586be6396b4f3b37445945a" title=" " alt="" coords="126,449,205,475"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#aa0d46fcb43667c805b84ea7e1ff6100a" title=" " alt="" coords="139,499,192,524"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a86fe524d99d69c18a335512cf3405b31" title=" " alt="" coords="137,548,193,573"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a57e55b2d0161d62bb99765ca3de43e35" title=" " alt="" coords="132,597,199,623"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a0b0ff95e564df3c3e8fc977226b75de7" title=" " alt="" coords="133,647,198,672"/>
<area shape="rect" href="../../d1/d8f/cat_8c.html#a90a33618884bcf5e892297879bc016ff" title=" " alt="" coords="145,748,185,773"/>
<area shape="rect" href="../../d1/d8f/cat_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="13,723,63,748"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a5a12affe4fdfaa172d85da9a6adf98d2" title=" " alt="" coords="126,797,205,823"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a425a0efe4f459decf4b5ea14517ab3cf" title=" " alt="" coords="119,847,212,872"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#aedd6d3f148dd5c99b47900215c1ac43f" title=" " alt="" coords="139,896,192,921"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a8db9f9a2634bab29096bab0b8bc6945c" title=" " alt="" coords="136,945,195,971"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a6f94e3b215d069b5419e87bafe80799a" title=" " alt="" coords="129,995,201,1020"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a8faab06cc4d48335076b368f02709ee2" title=" " alt="" coords="122,1044,209,1069"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a330ed2370fe27045b8bec1eb0bd7818f" title=" " alt="" coords="132,1093,199,1119"/>
<area shape="rect" href="../../d5/de1/forktest_8c.html#a0ef8ccf57bc8c491407ec513b234f83c" title=" " alt="" coords="132,1143,199,1168"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a77a4432bc67dfb513f1c1d698c2c4ea6" title=" " alt="" coords="131,1192,199,1217"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#abf4af50e65630225208fef177e267efb" title=" " alt="" coords="131,1241,200,1267"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#ac9fe56d8f6e4ed1c9677b06cb7b325e6" title=" " alt="" coords="133,1291,198,1316"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a267227083b00d0cc3141b34f5152ae04" title=" " alt="" coords="145,1340,185,1365"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a4eeee588d4689a58fc140a7d5d7b0608" title=" " alt="" coords="133,1389,197,1415"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a1740f29f4ce6d3060fd79a9312edc315" title=" " alt="" coords="127,1439,203,1464"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#aa1c6e6e76813ccb29a29bb119dba668a" title=" " alt="" coords="140,1488,191,1513"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a3208ed001a225f5d9ea3fb37f46810c7" title=" " alt="" coords="119,1984,212,2009"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#ae7c61791dd2cfb8ad59b4c6e87685c07" title=" " alt="" coords="129,1537,201,1563"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#ada38fdb2913f040f6eeb6189eeb42d32" title=" " alt="" coords="139,1639,192,1664"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#aedbeff6afe5d4e22330c7e6b5e6df893" title=" " alt="" coords="5,1613,71,1639"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a16ae754fb9c5622d44d0c3ce62ad7c49" title=" " alt="" coords="139,1688,192,1713"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a6b22568d42b584ed4b0dc4e2b0677013" title=" " alt="" coords="138,1737,193,1763"/>
<area shape="rect" href="../../d7/d1f/mkfs_8c.html#a22ea835ad23cd716a962f30e4882ee80" title=" " alt="" coords="140,1787,191,1812"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a06636ed0cda58c748d68e82d33d1afce" title=" " alt="" coords="131,5,200,31"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a02e1ca3f4db5f4bf8a683a0b7c18cc43" title=" " alt="" coords="129,1836,201,1861"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a5d39024e15998d6a6865f4cd0f69738b" title=" " alt="" coords="137,1885,194,1911"/>
<area shape="rect" href="../../dd/d35/sysproc_8c.html#aee72faa31a0c32b410aba558ef1d59f2" title=" " alt="" coords="130,1935,201,1960"/>
<area shape="rect" href="../../dc/d6f/trap_8c.html#a372d166e36c086c91e5f5d81e5fead3a" title=" " alt="" coords="143,2033,187,2059"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a6888f9f6d973f81f73091d1530ad212b" title=" " alt="" coords="146,104,185,129"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a3331ced6fb67502a2e5277260d4f5aec" title=" " alt="" coords="125,153,206,179"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a98d8496ecb698b9400831f2718d805c3" title=" " alt="" coords="121,55,210,80"/>
<area shape="rect" href="../../d3/d7a/wc_8c.html#a4f21d23f0e3167f510b9f393b185751c" title=" " alt="" coords="146,203,185,228"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a3a007a46ea6310b39a233e45d439f11a" title=" " alt="" coords="129,252,201,277"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a48ac3cbd37dcf4c4e08b0572b3a0e9f3" title=" " alt="" coords="126,301,205,327"/>
<area shape="rect" href="../../d7/d1f/mkfs_8c.html#ac62d827d836d1807e4d6f365f32348bb" title=" " alt="" coords="137,351,194,376"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#aaad2d7a86d4859982dd9a132f5128ff2" title=" " alt="" coords="357,971,452,996"/>
<area shape="rect" href="../../d7/df8/log_8c.html#ac96aa31ffc0500e749c62c4d377c21c9" title=" " alt="" coords="367,1069,442,1095"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a28ac85a90987662e306ca8efbfe16074" title=" " alt="" coords="359,1020,451,1045"/>
</map>
</div>

</div>
</div>
<a id="aaf5b2814a1dbf3ef0803dff58e0a76dc" name="aaf5b2814a1dbf3ef0803dff58e0a76dc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaf5b2814a1dbf3ef0803dff58e0a76dc">&#9670;&#160;</a></span>seginit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void seginit </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/de9/vm_8c_source.html#l00016">16</a> of file <a class="el" href="../../de/de9/vm_8c_source.html">vm.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   17</span>{</div>
<div class="line"><span class="lineno">   18</span>  <span class="keyword">struct </span><a class="code hl_struct" href="../../db/d62/structcpu.html">cpu</a> *c;</div>
<div class="line"><span class="lineno">   19</span> </div>
<div class="line"><span class="lineno">   20</span>  <span class="comment">// Map &quot;logical&quot; addresses to virtual addresses using identity map.</span></div>
<div class="line"><span class="lineno">   21</span>  <span class="comment">// Cannot share a CODE descriptor for both kernel and user</span></div>
<div class="line"><span class="lineno">   22</span>  <span class="comment">// because it would have to have DPL_USR, but the CPU forbids</span></div>
<div class="line"><span class="lineno">   23</span>  <span class="comment">// an interrupt from CPL=0 to DPL=3.</span></div>
<div class="line"><span class="lineno">   24</span>  c = &amp;<a class="code hl_variable" href="../../dd/d06/mp_8c.html#a6d2633e73724907b582dfe6938ed7bb9">cpus</a>[<a class="code hl_function" href="../../d5/d64/defs_8h.html#a1444de2903d3d2624a50de058d19c635">cpuid</a>()];</div>
<div class="line"><span class="lineno">   25</span>  c-&gt;<a class="code hl_variable" href="../../db/d62/structcpu.html#aee38fb8832f8e728538b2cee877d1c09">gdt</a>[<a class="code hl_define" href="../../d2/df1/mmu_8h.html#a0d4e0c4c738af60d6092941469642429">SEG_KCODE</a>] = <a class="code hl_define" href="../../d2/df1/mmu_8h.html#a1594ac4688d9f212e835fd38ff63e83f">SEG</a>(<a class="code hl_define" href="../../de/d21/asm_8h.html#af30c683a434e0712fd83781307239cb9">STA_X</a>|<a class="code hl_define" href="../../de/d21/asm_8h.html#a6545a48f34a3fae1b04cf265f13bc8f3">STA_R</a>, 0, 0xffffffff, 0);</div>
<div class="line"><span class="lineno">   26</span>  c-&gt;<a class="code hl_variable" href="../../db/d62/structcpu.html#aee38fb8832f8e728538b2cee877d1c09">gdt</a>[<a class="code hl_define" href="../../d2/df1/mmu_8h.html#ad523d10217ef0ff5e75b7831f251d2b1">SEG_KDATA</a>] = <a class="code hl_define" href="../../d2/df1/mmu_8h.html#a1594ac4688d9f212e835fd38ff63e83f">SEG</a>(<a class="code hl_define" href="../../de/d21/asm_8h.html#a9321b5b232838b8b230c6b681be9a882">STA_W</a>, 0, 0xffffffff, 0);</div>
<div class="line"><span class="lineno">   27</span>  c-&gt;<a class="code hl_variable" href="../../db/d62/structcpu.html#aee38fb8832f8e728538b2cee877d1c09">gdt</a>[<a class="code hl_define" href="../../d2/df1/mmu_8h.html#a85b694d969eb01e547197c21db219f4b">SEG_UCODE</a>] = <a class="code hl_define" href="../../d2/df1/mmu_8h.html#a1594ac4688d9f212e835fd38ff63e83f">SEG</a>(<a class="code hl_define" href="../../de/d21/asm_8h.html#af30c683a434e0712fd83781307239cb9">STA_X</a>|<a class="code hl_define" href="../../de/d21/asm_8h.html#a6545a48f34a3fae1b04cf265f13bc8f3">STA_R</a>, 0, 0xffffffff, <a class="code hl_define" href="../../d2/df1/mmu_8h.html#a060d4d4e32af81cab881fe77e58d7b78">DPL_USER</a>);</div>
<div class="line"><span class="lineno">   28</span>  c-&gt;<a class="code hl_variable" href="../../db/d62/structcpu.html#aee38fb8832f8e728538b2cee877d1c09">gdt</a>[<a class="code hl_define" href="../../d2/df1/mmu_8h.html#aba0495696b4c656fda31704782648461">SEG_UDATA</a>] = <a class="code hl_define" href="../../d2/df1/mmu_8h.html#a1594ac4688d9f212e835fd38ff63e83f">SEG</a>(<a class="code hl_define" href="../../de/d21/asm_8h.html#a9321b5b232838b8b230c6b681be9a882">STA_W</a>, 0, 0xffffffff, <a class="code hl_define" href="../../d2/df1/mmu_8h.html#a060d4d4e32af81cab881fe77e58d7b78">DPL_USER</a>);</div>
<div class="line"><span class="lineno">   29</span>  lgdt(c-&gt;<a class="code hl_variable" href="../../db/d62/structcpu.html#aee38fb8832f8e728538b2cee877d1c09">gdt</a>, <span class="keyword">sizeof</span>(c-&gt;<a class="code hl_variable" href="../../db/d62/structcpu.html#aee38fb8832f8e728538b2cee877d1c09">gdt</a>));</div>
<div class="line"><span class="lineno">   30</span>}</div>
<div class="ttc" id="aasm_8h_html_a6545a48f34a3fae1b04cf265f13bc8f3"><div class="ttname"><a href="../../de/d21/asm_8h.html#a6545a48f34a3fae1b04cf265f13bc8f3">STA_R</a></div><div class="ttdeci">#define STA_R</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d21/asm_8h_source.html#l00018">asm.h:18</a></div></div>
<div class="ttc" id="aasm_8h_html_a9321b5b232838b8b230c6b681be9a882"><div class="ttname"><a href="../../de/d21/asm_8h.html#a9321b5b232838b8b230c6b681be9a882">STA_W</a></div><div class="ttdeci">#define STA_W</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d21/asm_8h_source.html#l00017">asm.h:17</a></div></div>
<div class="ttc" id="aasm_8h_html_af30c683a434e0712fd83781307239cb9"><div class="ttname"><a href="../../de/d21/asm_8h.html#af30c683a434e0712fd83781307239cb9">STA_X</a></div><div class="ttdeci">#define STA_X</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d21/asm_8h_source.html#l00016">asm.h:16</a></div></div>
<div class="ttc" id="adefs_8h_html_a1444de2903d3d2624a50de058d19c635"><div class="ttname"><a href="../../d5/d64/defs_8h.html#a1444de2903d3d2624a50de058d19c635">cpuid</a></div><div class="ttdeci">int cpuid(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dda/proc_8c_source.html#l00031">proc.c:31</a></div></div>
<div class="ttc" id="ammu_8h_html_a060d4d4e32af81cab881fe77e58d7b78"><div class="ttname"><a href="../../d2/df1/mmu_8h.html#a060d4d4e32af81cab881fe77e58d7b78">DPL_USER</a></div><div class="ttdeci">#define DPL_USER</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/df1/mmu_8h_source.html#l00053">mmu.h:53</a></div></div>
<div class="ttc" id="ammu_8h_html_a0d4e0c4c738af60d6092941469642429"><div class="ttname"><a href="../../d2/df1/mmu_8h.html#a0d4e0c4c738af60d6092941469642429">SEG_KCODE</a></div><div class="ttdeci">#define SEG_KCODE</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/df1/mmu_8h_source.html#l00015">mmu.h:15</a></div></div>
<div class="ttc" id="ammu_8h_html_a1594ac4688d9f212e835fd38ff63e83f"><div class="ttname"><a href="../../d2/df1/mmu_8h.html#a1594ac4688d9f212e835fd38ff63e83f">SEG</a></div><div class="ttdeci">#define SEG(type, base, lim, dpl)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/df1/mmu_8h_source.html#l00043">mmu.h:43</a></div></div>
<div class="ttc" id="ammu_8h_html_a85b694d969eb01e547197c21db219f4b"><div class="ttname"><a href="../../d2/df1/mmu_8h.html#a85b694d969eb01e547197c21db219f4b">SEG_UCODE</a></div><div class="ttdeci">#define SEG_UCODE</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/df1/mmu_8h_source.html#l00017">mmu.h:17</a></div></div>
<div class="ttc" id="ammu_8h_html_aba0495696b4c656fda31704782648461"><div class="ttname"><a href="../../d2/df1/mmu_8h.html#aba0495696b4c656fda31704782648461">SEG_UDATA</a></div><div class="ttdeci">#define SEG_UDATA</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/df1/mmu_8h_source.html#l00018">mmu.h:18</a></div></div>
<div class="ttc" id="ammu_8h_html_ad523d10217ef0ff5e75b7831f251d2b1"><div class="ttname"><a href="../../d2/df1/mmu_8h.html#ad523d10217ef0ff5e75b7831f251d2b1">SEG_KDATA</a></div><div class="ttdeci">#define SEG_KDATA</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/df1/mmu_8h_source.html#l00016">mmu.h:16</a></div></div>
<div class="ttc" id="astructcpu_html_aee38fb8832f8e728538b2cee877d1c09"><div class="ttname"><a href="../../db/d62/structcpu.html#aee38fb8832f8e728538b2cee877d1c09">cpu::gdt</a></div><div class="ttdeci">struct segdesc gdt[NSEGS]</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d03/proc_8h_source.html#l00006">proc.h:6</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_aaf5b2814a1dbf3ef0803dff58e0a76dc_cgraph.png" border="0" usemap="#ad5/d64/defs_8h_aaf5b2814a1dbf3ef0803dff58e0a76dc_cgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_aaf5b2814a1dbf3ef0803dff58e0a76dc_cgraph" id="ad5/d64/defs_8h_aaf5b2814a1dbf3ef0803dff58e0a76dc_cgraph">
<area shape="rect" title=" " alt="" coords="5,119,65,145"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a414dda255ed3c1e43e7922d10f9d2c6d" title=" " alt="" coords="113,119,167,145"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="215,119,276,145"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="442,145,501,170"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="324,246,377,271"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="442,246,501,271"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="425,295,517,321"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="565,195,629,221"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="565,283,629,309"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="677,195,769,221"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="692,245,755,270"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="817,145,880,170"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="821,358,877,383"/>
</map>
</div>

</div>
</div>
<a id="a5eefc01dac276f3d74b253c86ef43e24" name="a5eefc01dac276f3d74b253c86ef43e24"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5eefc01dac276f3d74b253c86ef43e24">&#9670;&#160;</a></span>setproc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setproc </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../de/d48/structproc.html">proc</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a1c8a7a02e9391b5cf0984388216695c0" name="a1c8a7a02e9391b5cf0984388216695c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1c8a7a02e9391b5cf0984388216695c0">&#9670;&#160;</a></span>setupkvm()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/d49/types_8h.html#ac131849542282b2c95dfeaf1f26dc010">pde_t</a> * setupkvm </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/de9/vm_8c_source.html#l00119">119</a> of file <a class="el" href="../../de/de9/vm_8c_source.html">vm.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  120</span>{</div>
<div class="line"><span class="lineno">  121</span>  <a class="code hl_typedef" href="../../d9/d49/types_8h.html#ac131849542282b2c95dfeaf1f26dc010">pde_t</a> *pgdir;</div>
<div class="line"><span class="lineno">  122</span>  <span class="keyword">struct </span>kmap *k;</div>
<div class="line"><span class="lineno">  123</span> </div>
<div class="line"><span class="lineno">  124</span>  <span class="keywordflow">if</span>((pgdir = (<a class="code hl_typedef" href="../../d9/d49/types_8h.html#ac131849542282b2c95dfeaf1f26dc010">pde_t</a>*)<a class="code hl_function" href="../../d5/d64/defs_8h.html#a5e965f6365c721b5b23c12d16d45c3dc">kalloc</a>()) == 0)</div>
<div class="line"><span class="lineno">  125</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  126</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#a0098886a849eef10803e9f35ceec61b9">memset</a>(pgdir, 0, <a class="code hl_define" href="../../d2/df1/mmu_8h.html#a5f96cb6ae6670e023c407cc2f77e1704">PGSIZE</a>);</div>
<div class="line"><span class="lineno">  127</span>  <span class="keywordflow">if</span> (<a class="code hl_define" href="../../d8/da9/memlayout_8h.html#aefd5e8b62c49bba2cf20309c7dd174e2">P2V</a>(<a class="code hl_define" href="../../d8/da9/memlayout_8h.html#ad3c557a115f7d82d9ef849846779531c">PHYSTOP</a>) &gt; (<span class="keywordtype">void</span>*)<a class="code hl_define" href="../../d8/da9/memlayout_8h.html#a643ab4c8a98a6f7bfde12c8f52f6aafa">DEVSPACE</a>)</div>
<div class="line"><span class="lineno">  128</span>    <a class="code hl_function" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a">panic</a>(<span class="stringliteral">&quot;PHYSTOP too high&quot;</span>);</div>
<div class="line"><span class="lineno">  129</span>  <span class="keywordflow">for</span>(k = kmap; k &lt; &amp;kmap[<a class="code hl_define" href="../../d5/d64/defs_8h.html#afacd331296c10f360da7640e0d68429f">NELEM</a>(kmap)]; k++)</div>
<div class="line"><span class="lineno">  130</span>    <span class="keywordflow">if</span>(mappages(pgdir, k-&gt;virt, k-&gt;phys_end - k-&gt;phys_start,</div>
<div class="line"><span class="lineno">  131</span>                (<a class="code hl_typedef" href="../../d9/d49/types_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>)k-&gt;phys_start, k-&gt;perm) &lt; 0) {</div>
<div class="line"><span class="lineno">  132</span>      <a class="code hl_function" href="../../de/de9/vm_8c.html#aa883924e2f068c520b695cdc168e1603">freevm</a>(pgdir);</div>
<div class="line"><span class="lineno">  133</span>      <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  134</span>    }</div>
<div class="line"><span class="lineno">  135</span>  <span class="keywordflow">return</span> pgdir;</div>
<div class="line"><span class="lineno">  136</span>}</div>
<div class="ttc" id="amemlayout_8h_html_a643ab4c8a98a6f7bfde12c8f52f6aafa"><div class="ttname"><a href="../../d8/da9/memlayout_8h.html#a643ab4c8a98a6f7bfde12c8f52f6aafa">DEVSPACE</a></div><div class="ttdeci">#define DEVSPACE</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/da9/memlayout_8h_source.html#l00005">memlayout.h:5</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_a1c8a7a02e9391b5cf0984388216695c0_cgraph.png" border="0" usemap="#ad5/d64/defs_8h_a1c8a7a02e9391b5cf0984388216695c0_cgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_a1c8a7a02e9391b5cf0984388216695c0_cgraph" id="ad5/d64/defs_8h_a1c8a7a02e9391b5cf0984388216695c0_cgraph">
<area shape="rect" title=" " alt="" coords="5,245,84,270"/>
<area shape="rect" href="../../de/de9/vm_8c.html#aa883924e2f068c520b695cdc168e1603" title=" " alt="" coords="132,119,195,145"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="960,246,1013,271"/>
<area shape="rect" href="../../db/d8a/ulib_8c.html#aa9cdc2409c15ccd5ee3b2031576f4093" title=" " alt="" coords="483,346,552,371"/>
<area shape="rect" href="../../d4/def/kalloc_8c.html#a5e965f6365c721b5b23c12d16d45c3dc" title=" " alt="" coords="379,295,435,321"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a6d3019ea15a9bfdc5131ae97f3623c49" title=" " alt="" coords="243,94,331,119"/>
<area shape="rect" href="../../d4/def/kalloc_8c.html#aced59ecf8411235f6dffc065236711a5" title=" " alt="" coords="381,145,432,170"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="485,297,549,322"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="1201,423,1265,449"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="600,297,692,322"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="615,499,677,525"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="851,435,912,461"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="740,449,803,474"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="1313,550,1369,575"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="1078,397,1137,422"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="1078,347,1137,373"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="1061,298,1153,323"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_a1c8a7a02e9391b5cf0984388216695c0_icgraph.png" border="0" usemap="#ad5/d64/defs_8h_a1c8a7a02e9391b5cf0984388216695c0_icgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_a1c8a7a02e9391b5cf0984388216695c0_icgraph" id="ad5/d64/defs_8h_a1c8a7a02e9391b5cf0984388216695c0_icgraph">
<area shape="rect" title=" " alt="" coords="865,1067,944,1092"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a1b57bfa0091c9be3ccc16dbb85ce3acf" title=" " alt="" coords="743,940,817,965"/>
<area shape="rect" href="../../df/dc9/exec_8c.html#ace32454ed0d37834dcb1cb4f8b727e6e" title=" " alt="" coords="252,1016,303,1041"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a81c8a6a0cae413bc81aa223f7f7b7205" title=" " alt="" coords="245,1092,309,1117"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a893bf6891e427f310b43981bf8e737ea" title=" " alt="" coords="743,1168,817,1193"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#acd2e1ded4bb6fce4500438bf928330f4" title=" " alt="" coords="651,484,695,509"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#ac5b5d4517586be6396b4f3b37445945a" title=" " alt="" coords="104,813,183,839"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a5a12affe4fdfaa172d85da9a6adf98d2" title=" " alt="" coords="379,309,458,335"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a425a0efe4f459decf4b5ea14517ab3cf" title=" " alt="" coords="372,359,465,384"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a8faab06cc4d48335076b368f02709ee2" title=" " alt="" coords="234,459,321,484"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a330ed2370fe27045b8bec1eb0bd7818f" title=" " alt="" coords="385,509,452,535"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#a7ae98824a008ffbc5506060227b6faa0" title=" " alt="" coords="252,913,303,939"/>
<area shape="rect" href="../../d5/de1/forktest_8c.html#a0ef8ccf57bc8c491407ec513b234f83c" title=" " alt="" coords="525,408,591,433"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a77a4432bc67dfb513f1c1d698c2c4ea6" title=" " alt="" coords="243,560,311,585"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a1740f29f4ce6d3060fd79a9312edc315" title=" " alt="" coords="381,636,457,661"/>
<area shape="rect" href="../../d0/d87/foo_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="533,611,583,636"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#aa1c6e6e76813ccb29a29bb119dba668a" title=" " alt="" coords="533,940,583,965"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a3208ed001a225f5d9ea3fb37f46810c7" title=" " alt="" coords="231,661,324,687"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a16ae754fb9c5622d44d0c3ce62ad7c49" title=" " alt="" coords="117,712,170,737"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a026b8c4ab2cb9af17e1c20d533981604" title=" " alt="" coords="384,56,453,81"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a06636ed0cda58c748d68e82d33d1afce" title=" " alt="" coords="243,107,312,132"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a02e1ca3f4db5f4bf8a683a0b7c18cc43" title=" " alt="" coords="522,157,594,183"/>
<area shape="rect" href="../../dd/d35/sysproc_8c.html#a3b05102e512b34446a54334f916ba5cd" title=" " alt="" coords="522,5,594,31"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a6888f9f6d973f81f73091d1530ad212b" title=" " alt="" coords="539,207,577,232"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a98d8496ecb698b9400831f2718d805c3" title=" " alt="" coords="513,256,603,281"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="5,484,56,509"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title=" " alt="" coords="5,975,56,1000"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#aedbeff6afe5d4e22330c7e6b5e6df893" title=" " alt="" coords="111,1037,176,1063"/>
<area shape="rect" href="../../d5/de1/forktest_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title=" " alt="" coords="393,408,444,433"/>
<area shape="rect" href="../../de/de9/vm_8c.html#afea0f0a82a9f9c7aae26f90b5e0836c6" title=" " alt="" coords="381,965,456,991"/>
<area shape="rect" href="../../de/de9/vm_8c.html#ac96c231d4053eaf4322c27d1f2cd9d49" title=" " alt="" coords="387,1067,451,1092"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a9c16214741f4fcd088e5eea468709328" title=" " alt="" coords="240,864,315,889"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a6f94e3b215d069b5419e87bafe80799a" title=" " alt="" coords="107,964,179,989"/>
<area shape="rect" href="../../d8/d60/init_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title=" " alt="" coords="118,1136,169,1161"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#aeaa813ddeb6a5fac3c45714c7351c526" title=" " alt="" coords="104,1087,183,1112"/>
<area shape="rect" href="../../dd/d35/sysproc_8c.html#ab21d46be776cf6075a997af525a1a628" title=" " alt="" coords="106,863,181,888"/>
</map>
</div>

</div>
</div>
<a id="aca4a88f06b3ebbcc04330f7ae06c8507" name="aca4a88f06b3ebbcc04330f7ae06c8507"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aca4a88f06b3ebbcc04330f7ae06c8507">&#9670;&#160;</a></span>sleep()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sleep </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d1/d08/structspinlock.html">spinlock</a> *&#160;</td>
          <td class="paramname"><em>lk</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/dda/proc_8c_source.html#l00418">418</a> of file <a class="el" href="../../d3/dda/proc_8c_source.html">proc.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  419</span>{</div>
<div class="line"><span class="lineno">  420</span>  <span class="keyword">struct </span><a class="code hl_struct" href="../../de/d48/structproc.html">proc</a> *p = <a class="code hl_function" href="../../d3/dda/proc_8c.html#a41af0935f3989aae450cf8988cd9c3a9">myproc</a>();</div>
<div class="line"><span class="lineno">  421</span>  </div>
<div class="line"><span class="lineno">  422</span>  <span class="keywordflow">if</span>(p == 0)</div>
<div class="line"><span class="lineno">  423</span>    <a class="code hl_function" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a">panic</a>(<span class="stringliteral">&quot;sleep&quot;</span>);</div>
<div class="line"><span class="lineno">  424</span> </div>
<div class="line"><span class="lineno">  425</span>  <span class="keywordflow">if</span>(lk == 0)</div>
<div class="line"><span class="lineno">  426</span>    <a class="code hl_function" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a">panic</a>(<span class="stringliteral">&quot;sleep without lk&quot;</span>);</div>
<div class="line"><span class="lineno">  427</span> </div>
<div class="line"><span class="lineno">  428</span>  <span class="comment">// Must acquire ptable.lock in order to</span></div>
<div class="line"><span class="lineno">  429</span>  <span class="comment">// change p-&gt;state and then call sched.</span></div>
<div class="line"><span class="lineno">  430</span>  <span class="comment">// Once we hold ptable.lock, we can be</span></div>
<div class="line"><span class="lineno">  431</span>  <span class="comment">// guaranteed that we won&#39;t miss any wakeup</span></div>
<div class="line"><span class="lineno">  432</span>  <span class="comment">// (wakeup runs with ptable.lock locked),</span></div>
<div class="line"><span class="lineno">  433</span>  <span class="comment">// so it&#39;s okay to release lk.</span></div>
<div class="line"><span class="lineno">  434</span>  <span class="keywordflow">if</span>(lk != &amp;<a class="code hl_variable" href="../../d3/dda/proc_8c.html#addf39d613ca9a58e7e6080a2e454421a">ptable</a>.lock){  <span class="comment">//DOC: sleeplock0</span></div>
<div class="line"><span class="lineno">  435</span>    <a class="code hl_function" href="../../d5/d64/defs_8h.html#afe4ef8638f1ecb962a6e67fb086ee3b8">acquire</a>(&amp;<a class="code hl_variable" href="../../d3/dda/proc_8c.html#addf39d613ca9a58e7e6080a2e454421a">ptable</a>.lock);  <span class="comment">//DOC: sleeplock1</span></div>
<div class="line"><span class="lineno">  436</span>    <a class="code hl_function" href="../../d5/d64/defs_8h.html#a4f8616948f3dbce65671f666eed1d669">release</a>(lk);</div>
<div class="line"><span class="lineno">  437</span>  }</div>
<div class="line"><span class="lineno">  438</span>  <span class="comment">// Go to sleep.</span></div>
<div class="line"><span class="lineno">  439</span>  p-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#a03048a49756c2243576208ba4ec5fbd4">chan</a> = <a class="code hl_variable" href="../../de/d48/structproc.html#a03048a49756c2243576208ba4ec5fbd4">chan</a>;</div>
<div class="line"><span class="lineno">  440</span>  p-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#a0f2fe91548a1382672ae26e29ca9e736">state</a> = <a class="code hl_enumvalue" href="../../df/d03/proc_8h.html#aa1ced7d2b60040fded3fa873d0c03ba7a488282601451a751e0f0e770b15d4235">SLEEPING</a>;</div>
<div class="line"><span class="lineno">  441</span> </div>
<div class="line"><span class="lineno">  442</span>  <a class="code hl_function" href="../../d3/dda/proc_8c.html#ad788da91743c333b5bed7c4a0dd12365">sched</a>();</div>
<div class="line"><span class="lineno">  443</span> </div>
<div class="line"><span class="lineno">  444</span>  <span class="comment">// Tidy up.</span></div>
<div class="line"><span class="lineno">  445</span>  p-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#a03048a49756c2243576208ba4ec5fbd4">chan</a> = 0;</div>
<div class="line"><span class="lineno">  446</span> </div>
<div class="line"><span class="lineno">  447</span>  <span class="comment">// Reacquire original lock.</span></div>
<div class="line"><span class="lineno">  448</span>  <span class="keywordflow">if</span>(lk != &amp;<a class="code hl_variable" href="../../d3/dda/proc_8c.html#addf39d613ca9a58e7e6080a2e454421a">ptable</a>.lock){  <span class="comment">//DOC: sleeplock2</span></div>
<div class="line"><span class="lineno">  449</span>    <a class="code hl_function" href="../../d5/d64/defs_8h.html#a4f8616948f3dbce65671f666eed1d669">release</a>(&amp;<a class="code hl_variable" href="../../d3/dda/proc_8c.html#addf39d613ca9a58e7e6080a2e454421a">ptable</a>.lock);</div>
<div class="line"><span class="lineno">  450</span>    <a class="code hl_function" href="../../d5/d64/defs_8h.html#afe4ef8638f1ecb962a6e67fb086ee3b8">acquire</a>(lk);</div>
<div class="line"><span class="lineno">  451</span>  }</div>
<div class="line"><span class="lineno">  452</span>}</div>
<div class="ttc" id="astructproc_html_a03048a49756c2243576208ba4ec5fbd4"><div class="ttname"><a href="../../de/d48/structproc.html#a03048a49756c2243576208ba4ec5fbd4">proc::chan</a></div><div class="ttdeci">void * chan</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d03/proc_8h_source.html#l00047">proc.h:47</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_aca4a88f06b3ebbcc04330f7ae06c8507_cgraph.png" border="0" usemap="#ad5/d64/defs_8h_aca4a88f06b3ebbcc04330f7ae06c8507_cgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_aca4a88f06b3ebbcc04330f7ae06c8507_cgraph" id="ad5/d64/defs_8h_aca4a88f06b3ebbcc04330f7ae06c8507_cgraph">
<area shape="rect" title=" " alt="" coords="5,94,59,119"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="349,246,413,271"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="832,195,885,221"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="1073,246,1137,271"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a41af0935f3989aae450cf8988cd9c3a9" title=" " alt="" coords="485,803,551,829"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad788da91743c333b5bed7c4a0dd12365" title=" " alt="" coords="107,550,164,575"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="472,195,564,221"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="487,601,549,626"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="723,525,784,550"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="612,550,675,575"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="1185,525,1241,550"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="950,398,1009,423"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="950,145,1009,170"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="933,246,1025,271"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a9fa00b0be5d3c4781048861e2506eb63" title=" " alt="" coords="212,449,291,474"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a1d9e7047d3dfb57809a2541d8387705e" title=" " alt="" coords="353,550,410,575"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a02ca0670bc1fe12e38453082631ff360" title=" " alt="" coords="339,449,424,474"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a87c90f0ab2a1b11c2b55f4e483bb8493" title=" " alt="" coords="475,398,561,423"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_aca4a88f06b3ebbcc04330f7ae06c8507_icgraph.png" border="0" usemap="#ad5/d64/defs_8h_aca4a88f06b3ebbcc04330f7ae06c8507_icgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_aca4a88f06b3ebbcc04330f7ae06c8507_icgraph" id="ad5/d64/defs_8h_aca4a88f06b3ebbcc04330f7ae06c8507_icgraph">
<area shape="rect" title=" " alt="" coords="783,866,836,891"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#aaad2d7a86d4859982dd9a132f5128ff2" title=" " alt="" coords="640,354,735,379"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a28ac85a90987662e306ca8efbfe16074" title=" " alt="" coords="247,134,339,159"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a3208ed001a225f5d9ea3fb37f46810c7" title=" " alt="" coords="104,530,197,555"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a06636ed0cda58c748d68e82d33d1afce" title=" " alt="" coords="116,1270,185,1295"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a98d8496ecb698b9400831f2718d805c3" title=" " alt="" coords="106,1319,195,1345"/>
<area shape="rect" href="../../d7/df8/log_8c.html#ac96aa31ffc0500e749c62c4d377c21c9" title=" " alt="" coords="517,537,592,562"/>
<area shape="rect" href="../../da/d9b/memide_8c.html#a7f36b008f02088c86f76e98e05b55af5" title=" " alt="" coords="661,479,714,505"/>
<area shape="rect" href="../../dd/da4/zombie_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title=" " alt="" coords="662,1145,713,1170"/>
<area shape="rect" href="../../d1/d47/pipe_8c.html#ad4cce6144039b615d139f8660c60293a" title=" " alt="" coords="393,841,464,866"/>
<area shape="rect" href="../../d1/d47/pipe_8c.html#acfca0fab7d2c0c0dcc56359c8febe14a" title=" " alt="" coords="517,917,592,942"/>
<area shape="rect" href="../../dd/d35/sysproc_8c.html#a59778ec9bfa6b6f2100b43fbba000573" title=" " alt="" coords="647,1194,728,1219"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#af6f31822f7e737b4e414bdac1ccb59a4" title=" " alt="" coords="269,925,316,950"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#aed28187406d84a3aa71f10c6235a03ec" title=" " alt="" coords="404,283,453,309"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#ab3c447f135c68e4c3c1f8d5866f6e77b" title=" " alt="" coords="533,354,576,379"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a6af7eb39268127d389792cec37785666" title=" " alt="" coords="245,282,340,307"/>
<area shape="rect" href="../../df/dc9/exec_8c.html#ace32454ed0d37834dcb1cb4f8b727e6e" title=" " alt="" coords="267,431,318,457"/>
<area shape="rect" href="../../d6/d13/file_8c.html#a1dc8c87c7e48bdaaf98e9c7047928f29" title=" " alt="" coords="261,753,325,778"/>
<area shape="rect" href="../../d6/d13/file_8c.html#afff8e849fa54dea2a5a27dbb97474607" title=" " alt="" coords="262,331,323,357"/>
<area shape="rect" href="../../d6/d13/file_8c.html#ab8de757a0a9f58dcc6511ea5e46ebb88" title=" " alt="" coords="259,875,326,901"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#ad1c5f8693cb35b9605fee09eebdda640" title=" " alt="" coords="253,233,332,258"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a759600870314007ac558871239122fb7" title=" " alt="" coords="257,183,328,209"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a74e45efc661ca17c068bc283b3842e6d" title=" " alt="" coords="253,483,332,509"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#ae1e58ee11d41f643929520d8c1640da7" title=" " alt="" coords="251,381,335,406"/>
<area shape="rect" href="../../d0/d56/console_8c.html#ab508ff0f4db26fe35cd25fa648f9ee75" title=" " alt="" coords="109,207,193,233"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#ac5b5d4517586be6396b4f3b37445945a" title=" " alt="" coords="111,481,190,506"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#aedbeff6afe5d4e22330c7e6b5e6df893" title=" " alt="" coords="118,431,183,457"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="5,826,56,851"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a69a135a0e8a06d9f306d77ebc0c1f7a0" title=" " alt="" coords="401,30,457,55"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#aaf98ef7cdde3a0dfb2e49919de3298b1" title=" " alt="" coords="271,802,314,827"/>
<area shape="rect" href="../../d6/d13/file_8c.html#ae557c81ab89c24219146144bb6adaa2c" title=" " alt="" coords="393,486,464,511"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a207b3008bae35596c55ec7c4fc6875eb" title=" " alt="" coords="388,385,469,410"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a5a12affe4fdfaa172d85da9a6adf98d2" title=" " alt="" coords="111,777,190,802"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a425a0efe4f459decf4b5ea14517ab3cf" title=" " alt="" coords="104,826,197,851"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a8faab06cc4d48335076b368f02709ee2" title=" " alt="" coords="107,875,194,901"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a330ed2370fe27045b8bec1eb0bd7818f" title=" " alt="" coords="117,974,184,999"/>
<area shape="rect" href="../../d5/de1/forktest_8c.html#a0ef8ccf57bc8c491407ec513b234f83c" title=" " alt="" coords="117,1073,184,1098"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a77a4432bc67dfb513f1c1d698c2c4ea6" title=" " alt="" coords="117,1023,185,1049"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a1740f29f4ce6d3060fd79a9312edc315" title=" " alt="" coords="113,579,189,605"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#aa1c6e6e76813ccb29a29bb119dba668a" title=" " alt="" coords="125,629,176,654"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a16ae754fb9c5622d44d0c3ce62ad7c49" title=" " alt="" coords="124,678,177,703"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a02e1ca3f4db5f4bf8a683a0b7c18cc43" title=" " alt="" coords="115,727,187,753"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a6888f9f6d973f81f73091d1530ad212b" title=" " alt="" coords="131,925,170,950"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a057e5bce2de7a87ebfd2dc33967bca4a" title=" " alt="" coords="251,635,334,661"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a25697aa3d828b5878d38170d724adb27" title=" " alt="" coords="248,550,337,575"/>
<area shape="rect" href="../../dc/de6/bio_8c.html#a30b8d2ef2300ed8e3d879a428fe39898" title=" " alt="" coords="527,479,582,505"/>
<area shape="rect" href="../../dc/de6/bio_8c.html#a63c899c13b176ddf80064d32225e1298" title=" " alt="" coords="526,430,583,455"/>
<area shape="rect" href="../../d0/d87/foo_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="125,1122,176,1147"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a026b8c4ab2cb9af17e1c20d533981604" title=" " alt="" coords="116,1221,185,1246"/>
<area shape="rect" href="../../dd/d35/sysproc_8c.html#ad202e06addda05ba6fe60f05d3f61913" title=" " alt="" coords="113,1171,188,1197"/>
</map>
</div>

</div>
</div>
<a id="a528f45ea5530504abc7113acc2154348" name="a528f45ea5530504abc7113acc2154348"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a528f45ea5530504abc7113acc2154348">&#9670;&#160;</a></span>stati()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void stati </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d0/df8/structinode.html">inode</a> *&#160;</td>
          <td class="paramname"><em>ip</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../da/de7/structstat.html">stat</a> *&#160;</td>
          <td class="paramname"><em>st</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d2/d5a/fs_8c_source.html#l00440">440</a> of file <a class="el" href="../../d2/d5a/fs_8c_source.html">fs.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  441</span>{</div>
<div class="line"><span class="lineno">  442</span>  st-&gt;<a class="code hl_variable" href="../../da/de7/structstat.html#a14ef4f85e6fb86bf296360361d0f393b">dev</a> = ip-&gt;<a class="code hl_variable" href="../../d0/df8/structinode.html#a121742a89c4531f03a7de1613d5be605">dev</a>;</div>
<div class="line"><span class="lineno">  443</span>  st-&gt;<a class="code hl_variable" href="../../da/de7/structstat.html#abf15624517ed5d79d0fa2a5553a68e25">ino</a> = ip-&gt;<a class="code hl_variable" href="../../d0/df8/structinode.html#a8acc2b9df0bfc6856da62925763db7fe">inum</a>;</div>
<div class="line"><span class="lineno">  444</span>  st-&gt;<a class="code hl_variable" href="../../da/de7/structstat.html#a01f1b4cd7627d192a7875c9a188e0699">type</a> = ip-&gt;<a class="code hl_variable" href="../../d0/df8/structinode.html#a8d74bec2898785c057111c328d23fda2">type</a>;</div>
<div class="line"><span class="lineno">  445</span>  st-&gt;<a class="code hl_variable" href="../../da/de7/structstat.html#a99ca3487fd2f4799337eb4281f8871e4">nlink</a> = ip-&gt;<a class="code hl_variable" href="../../d0/df8/structinode.html#af8b88b409bea7ef99c49a55f387538b2">nlink</a>;</div>
<div class="line"><span class="lineno">  446</span>  st-&gt;<a class="code hl_variable" href="../../da/de7/structstat.html#a4ac15b64dd4d787c59a8a687d79adb35">size</a> = ip-&gt;<a class="code hl_variable" href="../../d0/df8/structinode.html#a918af769c48a8ca8afac057bf83d12de">size</a>;</div>
<div class="line"><span class="lineno">  447</span>}</div>
<div class="ttc" id="astructstat_html_a01f1b4cd7627d192a7875c9a188e0699"><div class="ttname"><a href="../../da/de7/structstat.html#a01f1b4cd7627d192a7875c9a188e0699">stat::type</a></div><div class="ttdeci">short type</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d1b/stat_8h_source.html#l00006">stat.h:6</a></div></div>
<div class="ttc" id="astructstat_html_a14ef4f85e6fb86bf296360361d0f393b"><div class="ttname"><a href="../../da/de7/structstat.html#a14ef4f85e6fb86bf296360361d0f393b">stat::dev</a></div><div class="ttdeci">int dev</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d1b/stat_8h_source.html#l00007">stat.h:7</a></div></div>
<div class="ttc" id="astructstat_html_a4ac15b64dd4d787c59a8a687d79adb35"><div class="ttname"><a href="../../da/de7/structstat.html#a4ac15b64dd4d787c59a8a687d79adb35">stat::size</a></div><div class="ttdeci">uint size</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d1b/stat_8h_source.html#l00010">stat.h:10</a></div></div>
<div class="ttc" id="astructstat_html_a99ca3487fd2f4799337eb4281f8871e4"><div class="ttname"><a href="../../da/de7/structstat.html#a99ca3487fd2f4799337eb4281f8871e4">stat::nlink</a></div><div class="ttdeci">short nlink</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d1b/stat_8h_source.html#l00009">stat.h:9</a></div></div>
<div class="ttc" id="astructstat_html_abf15624517ed5d79d0fa2a5553a68e25"><div class="ttname"><a href="../../da/de7/structstat.html#abf15624517ed5d79d0fa2a5553a68e25">stat::ino</a></div><div class="ttdeci">uint ino</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d1b/stat_8h_source.html#l00008">stat.h:8</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_a528f45ea5530504abc7113acc2154348_icgraph.png" border="0" usemap="#ad5/d64/defs_8h_a528f45ea5530504abc7113acc2154348_icgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_a528f45ea5530504abc7113acc2154348_icgraph" id="ad5/d64/defs_8h_a528f45ea5530504abc7113acc2154348_icgraph">
<area shape="rect" title=" " alt="" coords="239,5,285,31"/>
<area shape="rect" href="../../d6/d13/file_8c.html#afff8e849fa54dea2a5a27dbb97474607" title=" " alt="" coords="129,5,191,31"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#ac243c8f20f5fb2e3e257b5007af2c204" title=" " alt="" coords="5,5,81,31"/>
</map>
</div>

</div>
</div>
<a id="a5e5172aa1be36b8210c6dfd86800b44c" name="a5e5172aa1be36b8210c6dfd86800b44c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5e5172aa1be36b8210c6dfd86800b44c">&#9670;&#160;</a></span>strlen()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int strlen </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>s</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/db0/string_8c_source.html#l00097">97</a> of file <a class="el" href="../../d1/db0/string_8c_source.html">string.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   98</span>{</div>
<div class="line"><span class="lineno">   99</span>  <span class="keywordtype">int</span> n;</div>
<div class="line"><span class="lineno">  100</span> </div>
<div class="line"><span class="lineno">  101</span>  <span class="keywordflow">for</span>(n = 0; s[n]; n++)</div>
<div class="line"><span class="lineno">  102</span>    ;</div>
<div class="line"><span class="lineno">  103</span>  <span class="keywordflow">return</span> n;</div>
<div class="line"><span class="lineno">  104</span>}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_a5e5172aa1be36b8210c6dfd86800b44c_icgraph.png" border="0" usemap="#ad5/d64/defs_8h_a5e5172aa1be36b8210c6dfd86800b44c_icgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_a5e5172aa1be36b8210c6dfd86800b44c_icgraph" id="ad5/d64/defs_8h_a5e5172aa1be36b8210c6dfd86800b44c_icgraph">
<area shape="rect" title=" " alt="" coords="493,105,548,130"/>
<area shape="rect" href="../../df/dc9/exec_8c.html#ace32454ed0d37834dcb1cb4f8b727e6e" title=" " alt="" coords="383,257,434,282"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title=" " alt="" coords="5,853,56,878"/>
<area shape="rect" href="../../de/d77/ls_8c.html#a15512ff8353c0ce78158e6c9cdf2a24c" title=" " alt="" coords="372,29,445,54"/>
<area shape="rect" href="../../de/d77/ls_8c.html#a0dd2caa6531a27dcd755c46e814b63af" title=" " alt="" coords="258,29,297,54"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#ab08793db282d79295235e593dc4cac82" title=" " alt="" coords="104,816,183,841"/>
<area shape="rect" href="../../d5/de1/forktest_8c.html#a249680925885256274fa9f02dd51cec4" title=" " alt="" coords="383,1274,434,1300"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#ac5b5d4517586be6396b4f3b37445945a" title=" " alt="" coords="238,332,317,357"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a6f94e3b215d069b5419e87bafe80799a" title=" " alt="" coords="241,381,313,406"/>
<area shape="rect" href="../../d8/d60/init_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title=" " alt="" coords="252,282,303,308"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#aedbeff6afe5d4e22330c7e6b5e6df893" title=" " alt="" coords="111,889,176,914"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#aeaa813ddeb6a5fac3c45714c7351c526" title=" " alt="" coords="238,181,317,206"/>
<area shape="rect" href="../../de/d77/ls_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="118,29,169,54"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a77cc2edce6e78f22dd9eb377462762f2" title=" " alt="" coords="243,1425,312,1450"/>
<area shape="rect" href="../../d7/d1f/mkfs_8c.html#a327cdfc7a74165d8922ec6c8ba256906" title=" " alt="" coords="249,1474,305,1500"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#aa0d46fcb43667c805b84ea7e1ff6100a" title=" " alt="" coords="251,1524,304,1549"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a86fe524d99d69c18a335512cf3405b31" title=" " alt="" coords="249,1573,305,1598"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a57e55b2d0161d62bb99765ca3de43e35" title=" " alt="" coords="244,1622,311,1648"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a0b0ff95e564df3c3e8fc977226b75de7" title=" " alt="" coords="245,1672,310,1697"/>
<area shape="rect" href="../../d1/d8f/cat_8c.html#a90a33618884bcf5e892297879bc016ff" title=" " alt="" coords="257,1721,297,1746"/>
<area shape="rect" href="../../d1/d8f/cat_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="118,1746,169,1772"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a5a12affe4fdfaa172d85da9a6adf98d2" title=" " alt="" coords="238,1822,317,1848"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a425a0efe4f459decf4b5ea14517ab3cf" title=" " alt="" coords="231,1872,324,1897"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a6773439702f38f3835fb6195f77e001c" title=" " alt="" coords="237,1921,317,1946"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#aedd6d3f148dd5c99b47900215c1ac43f" title=" " alt="" coords="251,1970,304,1996"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a8db9f9a2634bab29096bab0b8bc6945c" title=" " alt="" coords="248,2020,307,2045"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a8faab06cc4d48335076b368f02709ee2" title=" " alt="" coords="234,2069,321,2094"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a330ed2370fe27045b8bec1eb0bd7818f" title=" " alt="" coords="244,2118,311,2144"/>
<area shape="rect" href="../../d5/de1/forktest_8c.html#a0ef8ccf57bc8c491407ec513b234f83c" title=" " alt="" coords="244,2168,311,2193"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a77a4432bc67dfb513f1c1d698c2c4ea6" title=" " alt="" coords="243,2217,311,2242"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#abf4af50e65630225208fef177e267efb" title=" " alt="" coords="243,2266,312,2292"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a37568127a326729b0576444a4a4509e1" title=" " alt="" coords="252,2316,303,2341"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#a0ee5a9418fea2f92036f5367a4101fe8" title=" " alt="" coords="111,1150,176,1176"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#ac9fe56d8f6e4ed1c9677b06cb7b325e6" title=" " alt="" coords="245,430,310,456"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a267227083b00d0cc3141b34f5152ae04" title=" " alt="" coords="257,480,297,505"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a4eeee588d4689a58fc140a7d5d7b0608" title=" " alt="" coords="245,529,309,554"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a1740f29f4ce6d3060fd79a9312edc315" title=" " alt="" coords="239,578,315,604"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#aa1c6e6e76813ccb29a29bb119dba668a" title=" " alt="" coords="252,628,303,653"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a3208ed001a225f5d9ea3fb37f46810c7" title=" " alt="" coords="231,677,324,702"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#ae7c61791dd2cfb8ad59b4c6e87685c07" title=" " alt="" coords="241,726,313,752"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#ada38fdb2913f040f6eeb6189eeb42d32" title=" " alt="" coords="251,877,304,902"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a16ae754fb9c5622d44d0c3ce62ad7c49" title=" " alt="" coords="251,776,304,801"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a026b8c4ab2cb9af17e1c20d533981604" title=" " alt="" coords="243,926,312,952"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a6b22568d42b584ed4b0dc4e2b0677013" title=" " alt="" coords="250,976,305,1001"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a06636ed0cda58c748d68e82d33d1afce" title=" " alt="" coords="243,1025,312,1050"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a02e1ca3f4db5f4bf8a683a0b7c18cc43" title=" " alt="" coords="241,1074,313,1100"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a5d39024e15998d6a6865f4cd0f69738b" title=" " alt="" coords="249,1124,306,1149"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a6888f9f6d973f81f73091d1530ad212b" title=" " alt="" coords="258,1173,297,1198"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a3331ced6fb67502a2e5277260d4f5aec" title=" " alt="" coords="237,1274,318,1300"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a98d8496ecb698b9400831f2718d805c3" title=" " alt="" coords="233,1324,322,1349"/>
</map>
</div>

</div>
</div>
<a id="a27e878168063a98eae64b4273dcf33cc" name="a27e878168063a98eae64b4273dcf33cc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a27e878168063a98eae64b4273dcf33cc">&#9670;&#160;</a></span>strncmp()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int strncmp </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>q</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/d49/types_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td>
          <td class="paramname"><em>n</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/db0/string_8c_source.html#l00059">59</a> of file <a class="el" href="../../d1/db0/string_8c_source.html">string.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   60</span>{</div>
<div class="line"><span class="lineno">   61</span>  <span class="keywordflow">while</span>(n &gt; 0 &amp;&amp; *p &amp;&amp; *p == *q)</div>
<div class="line"><span class="lineno">   62</span>    n--, p++, q++;</div>
<div class="line"><span class="lineno">   63</span>  <span class="keywordflow">if</span>(n == 0)</div>
<div class="line"><span class="lineno">   64</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">   65</span>  <span class="keywordflow">return</span> (<a class="code hl_typedef" href="../../d9/d49/types_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a>)*p - (<a class="code hl_typedef" href="../../d9/d49/types_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a>)*q;</div>
<div class="line"><span class="lineno">   66</span>}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_a27e878168063a98eae64b4273dcf33cc_icgraph.png" border="0" usemap="#ad5/d64/defs_8h_a27e878168063a98eae64b4273dcf33cc_icgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_a27e878168063a98eae64b4273dcf33cc_icgraph" id="ad5/d64/defs_8h_a27e878168063a98eae64b4273dcf33cc_icgraph">
<area shape="rect" title=" " alt="" coords="505,31,575,56"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#ae74f6e5b19a4e7f3e72807ee67141819" title=" " alt="" coords="379,31,457,56"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a5341068f021beac8cf0032b97d231e6f" title=" " alt="" coords="256,5,331,31"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#ae1e58ee11d41f643929520d8c1640da7" title=" " alt="" coords="124,55,208,80"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a69a135a0e8a06d9f306d77ebc0c1f7a0" title=" " alt="" coords="138,5,194,31"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a759600870314007ac558871239122fb7" title=" " alt="" coords="5,5,76,31"/>
</map>
</div>

</div>
</div>
<a id="a66107cd2364627727a36cef6c773b39c" name="a66107cd2364627727a36cef6c773b39c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a66107cd2364627727a36cef6c773b39c">&#9670;&#160;</a></span>strncpy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char * strncpy </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>n</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/db0/string_8c_source.html#l00069">69</a> of file <a class="el" href="../../d1/db0/string_8c_source.html">string.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   70</span>{</div>
<div class="line"><span class="lineno">   71</span>  <span class="keywordtype">char</span> *os;</div>
<div class="line"><span class="lineno">   72</span> </div>
<div class="line"><span class="lineno">   73</span>  os = s;</div>
<div class="line"><span class="lineno">   74</span>  <span class="keywordflow">while</span>(n-- &gt; 0 &amp;&amp; (*s++ = *t++) != 0)</div>
<div class="line"><span class="lineno">   75</span>    ;</div>
<div class="line"><span class="lineno">   76</span>  <span class="keywordflow">while</span>(n-- &gt; 0)</div>
<div class="line"><span class="lineno">   77</span>    *s++ = 0;</div>
<div class="line"><span class="lineno">   78</span>  <span class="keywordflow">return</span> os;</div>
<div class="line"><span class="lineno">   79</span>}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_a66107cd2364627727a36cef6c773b39c_icgraph.png" border="0" usemap="#ad5/d64/defs_8h_a66107cd2364627727a36cef6c773b39c_icgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_a66107cd2364627727a36cef6c773b39c_icgraph" id="ad5/d64/defs_8h_a66107cd2364627727a36cef6c773b39c_icgraph">
<area shape="rect" title=" " alt="" coords="272,55,337,80"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a69a135a0e8a06d9f306d77ebc0c1f7a0" title=" " alt="" coords="146,5,202,31"/>
<area shape="rect" href="../../d7/d1f/mkfs_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="149,55,199,80"/>
<area shape="rect" href="../../dd/d35/sysproc_8c.html#a65e52d7f297b2757ffbf46e4deccf188" title=" " alt="" coords="124,104,224,129"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a759600870314007ac558871239122fb7" title=" " alt="" coords="5,5,76,31"/>
</map>
</div>

</div>
</div>
<a id="a02ca0670bc1fe12e38453082631ff360" name="a02ca0670bc1fe12e38453082631ff360"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a02ca0670bc1fe12e38453082631ff360">&#9670;&#160;</a></span>switchkvm()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void switchkvm </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/de9/vm_8c_source.html#l00150">150</a> of file <a class="el" href="../../de/de9/vm_8c_source.html">vm.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  151</span>{</div>
<div class="line"><span class="lineno">  152</span>  lcr3(<a class="code hl_define" href="../../d8/da9/memlayout_8h.html#a5021188bc7da1304f27e913aee183407">V2P</a>(<a class="code hl_variable" href="../../de/de9/vm_8c.html#aff01f9f000432fd4171b7edee6c85855">kpgdir</a>));   <span class="comment">// switch to the kernel page table</span></div>
<div class="line"><span class="lineno">  153</span>}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_a02ca0670bc1fe12e38453082631ff360_icgraph.png" border="0" usemap="#ad5/d64/defs_8h_a02ca0670bc1fe12e38453082631ff360_icgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_a02ca0670bc1fe12e38453082631ff360_icgraph" id="ad5/d64/defs_8h_a02ca0670bc1fe12e38453082631ff360_icgraph">
<area shape="rect" title=" " alt="" coords="595,1936,680,1961"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a893bf6891e427f310b43981bf8e737ea" title=" " alt="" coords="470,1911,545,1936"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a9fa00b0be5d3c4781048861e2506eb63" title=" " alt="" coords="468,1960,547,1985"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad788da91743c333b5bed7c4a0dd12365" title=" " alt="" coords="363,1960,420,1985"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#aaf98ef7cdde3a0dfb2e49919de3298b1" title=" " alt="" coords="267,1044,309,1069"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ae70cc0370342e46f6db3bec367232457" title=" " alt="" coords="261,1960,315,1985"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a7cb51f5c2b5cad3766f19eb69c92793b" title=" " alt="" coords="263,2009,313,2035"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a77cc2edce6e78f22dd9eb377462762f2" title=" " alt="" coords="131,748,201,773"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#ac5b5d4517586be6396b4f3b37445945a" title=" " alt="" coords="127,797,205,823"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#aa0d46fcb43667c805b84ea7e1ff6100a" title=" " alt="" coords="139,847,193,872"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a86fe524d99d69c18a335512cf3405b31" title=" " alt="" coords="138,896,194,921"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a57e55b2d0161d62bb99765ca3de43e35" title=" " alt="" coords="133,945,199,971"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a0b0ff95e564df3c3e8fc977226b75de7" title=" " alt="" coords="133,995,199,1020"/>
<area shape="rect" href="../../d1/d8f/cat_8c.html#a90a33618884bcf5e892297879bc016ff" title=" " alt="" coords="146,1044,186,1069"/>
<area shape="rect" href="../../d1/d8f/cat_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="13,1069,63,1095"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a5a12affe4fdfaa172d85da9a6adf98d2" title=" " alt="" coords="127,1145,205,1171"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a425a0efe4f459decf4b5ea14517ab3cf" title=" " alt="" coords="119,1195,213,1220"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#aedd6d3f148dd5c99b47900215c1ac43f" title=" " alt="" coords="139,1244,193,1269"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a8db9f9a2634bab29096bab0b8bc6945c" title=" " alt="" coords="137,1293,195,1319"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a6f94e3b215d069b5419e87bafe80799a" title=" " alt="" coords="130,1343,202,1368"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a8faab06cc4d48335076b368f02709ee2" title=" " alt="" coords="123,1392,209,1417"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a330ed2370fe27045b8bec1eb0bd7818f" title=" " alt="" coords="133,1441,199,1467"/>
<area shape="rect" href="../../d5/de1/forktest_8c.html#a0ef8ccf57bc8c491407ec513b234f83c" title=" " alt="" coords="133,1491,199,1516"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a77a4432bc67dfb513f1c1d698c2c4ea6" title=" " alt="" coords="132,1540,200,1565"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#abf4af50e65630225208fef177e267efb" title=" " alt="" coords="131,1589,201,1615"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#ac9fe56d8f6e4ed1c9677b06cb7b325e6" title=" " alt="" coords="133,1639,199,1664"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a267227083b00d0cc3141b34f5152ae04" title=" " alt="" coords="146,1688,186,1713"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a4eeee588d4689a58fc140a7d5d7b0608" title=" " alt="" coords="134,1737,198,1763"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a1740f29f4ce6d3060fd79a9312edc315" title=" " alt="" coords="128,1787,204,1812"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#aa1c6e6e76813ccb29a29bb119dba668a" title=" " alt="" coords="141,1836,191,1861"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a3208ed001a225f5d9ea3fb37f46810c7" title=" " alt="" coords="119,1885,213,1911"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#ae7c61791dd2cfb8ad59b4c6e87685c07" title=" " alt="" coords="130,5,202,31"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#ada38fdb2913f040f6eeb6189eeb42d32" title=" " alt="" coords="139,55,193,80"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#aedbeff6afe5d4e22330c7e6b5e6df893" title=" " alt="" coords="5,80,71,105"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a16ae754fb9c5622d44d0c3ce62ad7c49" title=" " alt="" coords="139,156,193,181"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a6b22568d42b584ed4b0dc4e2b0677013" title=" " alt="" coords="139,205,193,231"/>
<area shape="rect" href="../../d7/d1f/mkfs_8c.html#a22ea835ad23cd716a962f30e4882ee80" title=" " alt="" coords="141,255,191,280"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a06636ed0cda58c748d68e82d33d1afce" title=" " alt="" coords="131,1935,201,1960"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a02e1ca3f4db5f4bf8a683a0b7c18cc43" title=" " alt="" coords="130,304,202,329"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a5d39024e15998d6a6865f4cd0f69738b" title=" " alt="" coords="137,353,195,379"/>
<area shape="rect" href="../../dd/d35/sysproc_8c.html#aee72faa31a0c32b410aba558ef1d59f2" title=" " alt="" coords="131,403,201,428"/>
<area shape="rect" href="../../dc/d6f/trap_8c.html#a372d166e36c086c91e5f5d81e5fead3a" title=" " alt="" coords="144,2033,188,2059"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a6888f9f6d973f81f73091d1530ad212b" title=" " alt="" coords="147,452,185,477"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a3331ced6fb67502a2e5277260d4f5aec" title=" " alt="" coords="125,501,207,527"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a98d8496ecb698b9400831f2718d805c3" title=" " alt="" coords="121,1984,211,2009"/>
<area shape="rect" href="../../d3/d7a/wc_8c.html#a4f21d23f0e3167f510b9f393b185751c" title=" " alt="" coords="147,551,185,576"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a3a007a46ea6310b39a233e45d439f11a" title=" " alt="" coords="130,600,202,625"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a48ac3cbd37dcf4c4e08b0572b3a0e9f3" title=" " alt="" coords="127,649,205,675"/>
<area shape="rect" href="../../d7/d1f/mkfs_8c.html#ac62d827d836d1807e4d6f365f32348bb" title=" " alt="" coords="137,699,195,724"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#aaad2d7a86d4859982dd9a132f5128ff2" title=" " alt="" coords="119,2083,213,2108"/>
</map>
</div>

</div>
</div>
<a id="ad43d81fa3edec39a200abd0853bc84b1" name="ad43d81fa3edec39a200abd0853bc84b1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad43d81fa3edec39a200abd0853bc84b1">&#9670;&#160;</a></span>switchuvm()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void switchuvm </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../de/d48/structproc.html">proc</a> *&#160;</td>
          <td class="paramname"><em>p</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/de9/vm_8c_source.html#l00157">157</a> of file <a class="el" href="../../de/de9/vm_8c_source.html">vm.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  158</span>{</div>
<div class="line"><span class="lineno">  159</span>  <span class="keywordflow">if</span>(p == 0)</div>
<div class="line"><span class="lineno">  160</span>    <a class="code hl_function" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a">panic</a>(<span class="stringliteral">&quot;switchuvm: no process&quot;</span>);</div>
<div class="line"><span class="lineno">  161</span>  <span class="keywordflow">if</span>(p-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#a9f556df98482bff6c9216013d7581ae4">kstack</a> == 0)</div>
<div class="line"><span class="lineno">  162</span>    <a class="code hl_function" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a">panic</a>(<span class="stringliteral">&quot;switchuvm: no kstack&quot;</span>);</div>
<div class="line"><span class="lineno">  163</span>  <span class="keywordflow">if</span>(p-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#ad430afc653e9eb6cee33954d5545b79d">pgdir</a> == 0)</div>
<div class="line"><span class="lineno">  164</span>    <a class="code hl_function" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a">panic</a>(<span class="stringliteral">&quot;switchuvm: no pgdir&quot;</span>);</div>
<div class="line"><span class="lineno">  165</span> </div>
<div class="line"><span class="lineno">  166</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#a206b749d1b7768dadce61cbcde7e0f1c">pushcli</a>();</div>
<div class="line"><span class="lineno">  167</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#ad427959ad025dabd8cd393b27ec39160">mycpu</a>()-&gt;<a class="code hl_variable" href="../../db/d62/structcpu.html#aee38fb8832f8e728538b2cee877d1c09">gdt</a>[<a class="code hl_define" href="../../d2/df1/mmu_8h.html#a51332450caa8201ecc42fce428288e6f">SEG_TSS</a>] = <a class="code hl_define" href="../../d2/df1/mmu_8h.html#abe69a1dd6290e2be017d58309495adb7">SEG16</a>(<a class="code hl_define" href="../../d2/df1/mmu_8h.html#a1b27d53cef04c198f3b048345d28016c">STS_T32A</a>, &amp;<a class="code hl_function" href="../../d5/d64/defs_8h.html#ad427959ad025dabd8cd393b27ec39160">mycpu</a>()-&gt;ts,</div>
<div class="line"><span class="lineno">  168</span>                                <span class="keyword">sizeof</span>(<a class="code hl_function" href="../../d5/d64/defs_8h.html#ad427959ad025dabd8cd393b27ec39160">mycpu</a>()-&gt;ts)-1, 0);</div>
<div class="line"><span class="lineno">  169</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#ad427959ad025dabd8cd393b27ec39160">mycpu</a>()-&gt;<a class="code hl_variable" href="../../db/d62/structcpu.html#aee38fb8832f8e728538b2cee877d1c09">gdt</a>[<a class="code hl_define" href="../../d2/df1/mmu_8h.html#a51332450caa8201ecc42fce428288e6f">SEG_TSS</a>].<a class="code hl_variable" href="../../d8/d3e/structsegdesc.html#aacc67bb0857f0c77c1f8a5c9b8a1ac09">s</a> = 0;</div>
<div class="line"><span class="lineno">  170</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#ad427959ad025dabd8cd393b27ec39160">mycpu</a>()-&gt;<a class="code hl_variable" href="../../db/d62/structcpu.html#a32e7b5aa877171c943d47038e818a159">ts</a>.<a class="code hl_variable" href="../../dc/dd1/structtaskstate.html#a574e97ea3fd87f314da88afec3c6f574">ss0</a> = <a class="code hl_define" href="../../d2/df1/mmu_8h.html#ad523d10217ef0ff5e75b7831f251d2b1">SEG_KDATA</a> &lt;&lt; 3;</div>
<div class="line"><span class="lineno">  171</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#ad427959ad025dabd8cd393b27ec39160">mycpu</a>()-&gt;<a class="code hl_variable" href="../../db/d62/structcpu.html#a32e7b5aa877171c943d47038e818a159">ts</a>.<a class="code hl_variable" href="../../dc/dd1/structtaskstate.html#a41b3e1d46a5068485eb6714974a979d6">esp0</a> = (<a class="code hl_typedef" href="../../d9/d49/types_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>)p-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#a9f556df98482bff6c9216013d7581ae4">kstack</a> + <a class="code hl_define" href="../../d5/d33/param_8h.html#a7735dc19a8cdc3fcafd4241184be4b41">KSTACKSIZE</a>;</div>
<div class="line"><span class="lineno">  172</span>  <span class="comment">// setting IOPL=0 in eflags *and* iomb beyond the tss segment limit</span></div>
<div class="line"><span class="lineno">  173</span>  <span class="comment">// forbids I/O instructions (e.g., inb and outb) from user space</span></div>
<div class="line"><span class="lineno">  174</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#ad427959ad025dabd8cd393b27ec39160">mycpu</a>()-&gt;<a class="code hl_variable" href="../../db/d62/structcpu.html#a32e7b5aa877171c943d47038e818a159">ts</a>.<a class="code hl_variable" href="../../dc/dd1/structtaskstate.html#a5ee57b190324239a5d88f7c02039901f">iomb</a> = (<a class="code hl_typedef" href="../../d9/d49/types_8h.html#ab95f123a6c9bcfee6a343170ef8c5f69">ushort</a>) 0xFFFF;</div>
<div class="line"><span class="lineno">  175</span>  ltr(<a class="code hl_define" href="../../d2/df1/mmu_8h.html#a51332450caa8201ecc42fce428288e6f">SEG_TSS</a> &lt;&lt; 3);</div>
<div class="line"><span class="lineno">  176</span>  lcr3(<a class="code hl_define" href="../../d8/da9/memlayout_8h.html#a5021188bc7da1304f27e913aee183407">V2P</a>(p-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#ad430afc653e9eb6cee33954d5545b79d">pgdir</a>));  <span class="comment">// switch to process&#39;s address space</span></div>
<div class="line"><span class="lineno">  177</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#ae3424f669269fef400ce29c3aeb43fdb">popcli</a>();</div>
<div class="line"><span class="lineno">  178</span>}</div>
<div class="ttc" id="ammu_8h_html_a1b27d53cef04c198f3b048345d28016c"><div class="ttname"><a href="../../d2/df1/mmu_8h.html#a1b27d53cef04c198f3b048345d28016c">STS_T32A</a></div><div class="ttdeci">#define STS_T32A</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/df1/mmu_8h_source.html#l00061">mmu.h:61</a></div></div>
<div class="ttc" id="ammu_8h_html_a51332450caa8201ecc42fce428288e6f"><div class="ttname"><a href="../../d2/df1/mmu_8h.html#a51332450caa8201ecc42fce428288e6f">SEG_TSS</a></div><div class="ttdeci">#define SEG_TSS</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/df1/mmu_8h_source.html#l00019">mmu.h:19</a></div></div>
<div class="ttc" id="ammu_8h_html_abe69a1dd6290e2be017d58309495adb7"><div class="ttname"><a href="../../d2/df1/mmu_8h.html#abe69a1dd6290e2be017d58309495adb7">SEG16</a></div><div class="ttdeci">#define SEG16(type, base, lim, dpl)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/df1/mmu_8h_source.html#l00047">mmu.h:47</a></div></div>
<div class="ttc" id="aparam_8h_html_a7735dc19a8cdc3fcafd4241184be4b41"><div class="ttname"><a href="../../d5/d33/param_8h.html#a7735dc19a8cdc3fcafd4241184be4b41">KSTACKSIZE</a></div><div class="ttdeci">#define KSTACKSIZE</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d33/param_8h_source.html#l00002">param.h:2</a></div></div>
<div class="ttc" id="astructcpu_html_a32e7b5aa877171c943d47038e818a159"><div class="ttname"><a href="../../db/d62/structcpu.html#a32e7b5aa877171c943d47038e818a159">cpu::ts</a></div><div class="ttdeci">struct taskstate ts</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d03/proc_8h_source.html#l00005">proc.h:5</a></div></div>
<div class="ttc" id="astructsegdesc_html_aacc67bb0857f0c77c1f8a5c9b8a1ac09"><div class="ttname"><a href="../../d8/d3e/structsegdesc.html#aacc67bb0857f0c77c1f8a5c9b8a1ac09">segdesc::s</a></div><div class="ttdeci">uint s</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/df1/mmu_8h_source.html#l00031">mmu.h:31</a></div></div>
<div class="ttc" id="astructtaskstate_html_a41b3e1d46a5068485eb6714974a979d6"><div class="ttname"><a href="../../dc/dd1/structtaskstate.html#a41b3e1d46a5068485eb6714974a979d6">taskstate::esp0</a></div><div class="ttdeci">uint esp0</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/df1/mmu_8h_source.html#l00109">mmu.h:109</a></div></div>
<div class="ttc" id="astructtaskstate_html_a574e97ea3fd87f314da88afec3c6f574"><div class="ttname"><a href="../../dc/dd1/structtaskstate.html#a574e97ea3fd87f314da88afec3c6f574">taskstate::ss0</a></div><div class="ttdeci">ushort ss0</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/df1/mmu_8h_source.html#l00110">mmu.h:110</a></div></div>
<div class="ttc" id="astructtaskstate_html_a5ee57b190324239a5d88f7c02039901f"><div class="ttname"><a href="../../dc/dd1/structtaskstate.html#a5ee57b190324239a5d88f7c02039901f">taskstate::iomb</a></div><div class="ttdeci">ushort iomb</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/df1/mmu_8h_source.html#l00144">mmu.h:144</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_ad43d81fa3edec39a200abd0853bc84b1_cgraph.png" border="0" usemap="#ad5/d64/defs_8h_ad43d81fa3edec39a200abd0853bc84b1_cgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_ad43d81fa3edec39a200abd0853bc84b1_cgraph" id="ad5/d64/defs_8h_ad43d81fa3edec39a200abd0853bc84b1_cgraph">
<area shape="rect" title=" " alt="" coords="5,297,91,322"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="139,347,200,373"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="248,246,301,271"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="745,145,801,170"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="741,489,804,514"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="366,347,425,373"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="366,246,425,271"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="349,94,441,119"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="489,315,553,341"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="489,221,553,246"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="601,275,693,301"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="616,325,679,350"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_ad43d81fa3edec39a200abd0853bc84b1_icgraph.png" border="0" usemap="#ad5/d64/defs_8h_ad43d81fa3edec39a200abd0853bc84b1_icgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_ad43d81fa3edec39a200abd0853bc84b1_icgraph" id="ad5/d64/defs_8h_ad43d81fa3edec39a200abd0853bc84b1_icgraph">
<area shape="rect" title=" " alt="" coords="709,381,795,407"/>
<area shape="rect" href="../../df/dc9/exec_8c.html#ace32454ed0d37834dcb1cb4f8b727e6e" title=" " alt="" coords="360,131,411,156"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a9c16214741f4fcd088e5eea468709328" title=" " alt="" coords="585,381,659,407"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a9fa00b0be5d3c4781048861e2506eb63" title=" " alt="" coords="583,431,661,456"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#ac5b5d4517586be6396b4f3b37445945a" title=" " alt="" coords="225,205,303,231"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a6f94e3b215d069b5419e87bafe80799a" title=" " alt="" coords="228,156,300,181"/>
<area shape="rect" href="../../d8/d60/init_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title=" " alt="" coords="239,55,289,80"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#aedbeff6afe5d4e22330c7e6b5e6df893" title=" " alt="" coords="104,304,169,329"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#aeaa813ddeb6a5fac3c45714c7351c526" title=" " alt="" coords="225,5,303,31"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="111,1171,162,1196"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title=" " alt="" coords="5,304,56,329"/>
<area shape="rect" href="../../dd/d35/sysproc_8c.html#ab21d46be776cf6075a997af525a1a628" title=" " alt="" coords="460,381,535,407"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad788da91743c333b5bed7c4a0dd12365" title=" " alt="" coords="469,628,526,653"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#aaf98ef7cdde3a0dfb2e49919de3298b1" title=" " alt="" coords="364,1024,407,1049"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ae70cc0370342e46f6db3bec367232457" title=" " alt="" coords="359,1887,412,1912"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a7cb51f5c2b5cad3766f19eb69c92793b" title=" " alt="" coords="361,453,410,479"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a77cc2edce6e78f22dd9eb377462762f2" title=" " alt="" coords="229,555,299,580"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#aa0d46fcb43667c805b84ea7e1ff6100a" title=" " alt="" coords="237,604,291,629"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a86fe524d99d69c18a335512cf3405b31" title=" " alt="" coords="236,653,292,679"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a57e55b2d0161d62bb99765ca3de43e35" title=" " alt="" coords="231,703,297,728"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a0b0ff95e564df3c3e8fc977226b75de7" title=" " alt="" coords="231,752,297,777"/>
<area shape="rect" href="../../d1/d8f/cat_8c.html#a90a33618884bcf5e892297879bc016ff" title=" " alt="" coords="244,456,284,481"/>
<area shape="rect" href="../../d1/d8f/cat_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="111,431,162,456"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a5a12affe4fdfaa172d85da9a6adf98d2" title=" " alt="" coords="225,801,303,827"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a425a0efe4f459decf4b5ea14517ab3cf" title=" " alt="" coords="217,851,311,876"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#aedd6d3f148dd5c99b47900215c1ac43f" title=" " alt="" coords="237,900,291,925"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a8db9f9a2634bab29096bab0b8bc6945c" title=" " alt="" coords="235,1689,293,1715"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a8faab06cc4d48335076b368f02709ee2" title=" " alt="" coords="221,949,307,975"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a330ed2370fe27045b8bec1eb0bd7818f" title=" " alt="" coords="231,999,297,1024"/>
<area shape="rect" href="../../d5/de1/forktest_8c.html#a0ef8ccf57bc8c491407ec513b234f83c" title=" " alt="" coords="231,505,297,531"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a77a4432bc67dfb513f1c1d698c2c4ea6" title=" " alt="" coords="230,1048,298,1073"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#abf4af50e65630225208fef177e267efb" title=" " alt="" coords="229,1097,299,1123"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#ac9fe56d8f6e4ed1c9677b06cb7b325e6" title=" " alt="" coords="231,1245,297,1271"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a267227083b00d0cc3141b34f5152ae04" title=" " alt="" coords="244,1295,284,1320"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a4eeee588d4689a58fc140a7d5d7b0608" title=" " alt="" coords="232,1344,296,1369"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a1740f29f4ce6d3060fd79a9312edc315" title=" " alt="" coords="226,1393,302,1419"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#aa1c6e6e76813ccb29a29bb119dba668a" title=" " alt="" coords="239,1443,289,1468"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a3208ed001a225f5d9ea3fb37f46810c7" title=" " alt="" coords="217,1887,311,1912"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#ae7c61791dd2cfb8ad59b4c6e87685c07" title=" " alt="" coords="228,1640,300,1665"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#ada38fdb2913f040f6eeb6189eeb42d32" title=" " alt="" coords="237,304,291,329"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a16ae754fb9c5622d44d0c3ce62ad7c49" title=" " alt="" coords="237,1739,291,1764"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a6b22568d42b584ed4b0dc4e2b0677013" title=" " alt="" coords="237,1492,291,1517"/>
<area shape="rect" href="../../d7/d1f/mkfs_8c.html#a22ea835ad23cd716a962f30e4882ee80" title=" " alt="" coords="239,1147,289,1172"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a06636ed0cda58c748d68e82d33d1afce" title=" " alt="" coords="229,1936,299,1961"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a02e1ca3f4db5f4bf8a683a0b7c18cc43" title=" " alt="" coords="228,1541,300,1567"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a5d39024e15998d6a6865f4cd0f69738b" title=" " alt="" coords="235,1591,293,1616"/>
<area shape="rect" href="../../dd/d35/sysproc_8c.html#aee72faa31a0c32b410aba558ef1d59f2" title=" " alt="" coords="229,1196,299,1221"/>
<area shape="rect" href="../../dc/d6f/trap_8c.html#a372d166e36c086c91e5f5d81e5fead3a" title=" " alt="" coords="242,255,286,280"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a6888f9f6d973f81f73091d1530ad212b" title=" " alt="" coords="245,1788,283,1813"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a3331ced6fb67502a2e5277260d4f5aec" title=" " alt="" coords="223,1837,305,1863"/>
</map>
</div>

</div>
</div>
<a id="a1d9e7047d3dfb57809a2541d8387705e" name="a1d9e7047d3dfb57809a2541d8387705e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1d9e7047d3dfb57809a2541d8387705e">&#9670;&#160;</a></span>swtch()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void swtch </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d7/dfe/structcontext.html">context</a> **&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d7/dfe/structcontext.html">context</a> *&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_a1d9e7047d3dfb57809a2541d8387705e_icgraph.png" border="0" usemap="#ad5/d64/defs_8h_a1d9e7047d3dfb57809a2541d8387705e_icgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_a1d9e7047d3dfb57809a2541d8387705e_icgraph" id="ad5/d64/defs_8h_a1d9e7047d3dfb57809a2541d8387705e_icgraph">
<area shape="rect" title=" " alt="" coords="833,1044,891,1069"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad788da91743c333b5bed7c4a0dd12365" title=" " alt="" coords="601,1044,659,1069"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a9fa00b0be5d3c4781048861e2506eb63" title=" " alt="" coords="707,1069,785,1095"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#aaf98ef7cdde3a0dfb2e49919de3298b1" title=" " alt="" coords="263,1019,306,1044"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ae70cc0370342e46f6db3bec367232457" title=" " alt="" coords="500,969,553,995"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a7cb51f5c2b5cad3766f19eb69c92793b" title=" " alt="" coords="260,1773,309,1799"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a77cc2edce6e78f22dd9eb377462762f2" title=" " alt="" coords="131,696,200,721"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#ac5b5d4517586be6396b4f3b37445945a" title=" " alt="" coords="126,745,205,771"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#aa0d46fcb43667c805b84ea7e1ff6100a" title=" " alt="" coords="139,795,192,820"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a86fe524d99d69c18a335512cf3405b31" title=" " alt="" coords="137,844,193,869"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a57e55b2d0161d62bb99765ca3de43e35" title=" " alt="" coords="132,893,199,919"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a0b0ff95e564df3c3e8fc977226b75de7" title=" " alt="" coords="133,943,198,968"/>
<area shape="rect" href="../../d1/d8f/cat_8c.html#a90a33618884bcf5e892297879bc016ff" title=" " alt="" coords="145,1044,185,1069"/>
<area shape="rect" href="../../d1/d8f/cat_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="13,1019,63,1044"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a5a12affe4fdfaa172d85da9a6adf98d2" title=" " alt="" coords="126,1093,205,1119"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a425a0efe4f459decf4b5ea14517ab3cf" title=" " alt="" coords="119,1143,212,1168"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#aedd6d3f148dd5c99b47900215c1ac43f" title=" " alt="" coords="139,1192,192,1217"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a8db9f9a2634bab29096bab0b8bc6945c" title=" " alt="" coords="136,1241,195,1267"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a6f94e3b215d069b5419e87bafe80799a" title=" " alt="" coords="129,1291,201,1316"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a8faab06cc4d48335076b368f02709ee2" title=" " alt="" coords="122,1340,209,1365"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a330ed2370fe27045b8bec1eb0bd7818f" title=" " alt="" coords="132,1389,199,1415"/>
<area shape="rect" href="../../d5/de1/forktest_8c.html#a0ef8ccf57bc8c491407ec513b234f83c" title=" " alt="" coords="132,1439,199,1464"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a77a4432bc67dfb513f1c1d698c2c4ea6" title=" " alt="" coords="131,1488,199,1513"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#abf4af50e65630225208fef177e267efb" title=" " alt="" coords="131,1537,200,1563"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#ac9fe56d8f6e4ed1c9677b06cb7b325e6" title=" " alt="" coords="133,1587,198,1612"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a267227083b00d0cc3141b34f5152ae04" title=" " alt="" coords="145,1636,185,1661"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a4eeee588d4689a58fc140a7d5d7b0608" title=" " alt="" coords="133,1685,197,1711"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a1740f29f4ce6d3060fd79a9312edc315" title=" " alt="" coords="127,1735,203,1760"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#aa1c6e6e76813ccb29a29bb119dba668a" title=" " alt="" coords="140,1784,191,1809"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a3208ed001a225f5d9ea3fb37f46810c7" title=" " alt="" coords="119,1984,212,2009"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#ae7c61791dd2cfb8ad59b4c6e87685c07" title=" " alt="" coords="129,1833,201,1859"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#ada38fdb2913f040f6eeb6189eeb42d32" title=" " alt="" coords="139,1935,192,1960"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#aedbeff6afe5d4e22330c7e6b5e6df893" title=" " alt="" coords="5,1909,71,1935"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a16ae754fb9c5622d44d0c3ce62ad7c49" title=" " alt="" coords="139,104,192,129"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a6b22568d42b584ed4b0dc4e2b0677013" title=" " alt="" coords="138,153,193,179"/>
<area shape="rect" href="../../d7/d1f/mkfs_8c.html#a22ea835ad23cd716a962f30e4882ee80" title=" " alt="" coords="140,203,191,228"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a06636ed0cda58c748d68e82d33d1afce" title=" " alt="" coords="131,5,200,31"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a02e1ca3f4db5f4bf8a683a0b7c18cc43" title=" " alt="" coords="129,252,201,277"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a5d39024e15998d6a6865f4cd0f69738b" title=" " alt="" coords="137,301,194,327"/>
<area shape="rect" href="../../dd/d35/sysproc_8c.html#aee72faa31a0c32b410aba558ef1d59f2" title=" " alt="" coords="130,351,201,376"/>
<area shape="rect" href="../../dc/d6f/trap_8c.html#a372d166e36c086c91e5f5d81e5fead3a" title=" " alt="" coords="143,2033,187,2059"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a6888f9f6d973f81f73091d1530ad212b" title=" " alt="" coords="146,400,185,425"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a3331ced6fb67502a2e5277260d4f5aec" title=" " alt="" coords="125,449,206,475"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a98d8496ecb698b9400831f2718d805c3" title=" " alt="" coords="121,55,210,80"/>
<area shape="rect" href="../../d3/d7a/wc_8c.html#a4f21d23f0e3167f510b9f393b185751c" title=" " alt="" coords="146,499,185,524"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a3a007a46ea6310b39a233e45d439f11a" title=" " alt="" coords="129,548,201,573"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a48ac3cbd37dcf4c4e08b0572b3a0e9f3" title=" " alt="" coords="126,597,205,623"/>
<area shape="rect" href="../../d7/d1f/mkfs_8c.html#ac62d827d836d1807e4d6f365f32348bb" title=" " alt="" coords="137,647,194,672"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#aaad2d7a86d4859982dd9a132f5128ff2" title=" " alt="" coords="357,944,452,969"/>
<area shape="rect" href="../../d7/df8/log_8c.html#ac96aa31ffc0500e749c62c4d377c21c9" title=" " alt="" coords="367,993,442,1019"/>
</map>
</div>

</div>
</div>
<a id="acd6bcafe6626fe8e7d00cacdbc3cc4f1" name="acd6bcafe6626fe8e7d00cacdbc3cc4f1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acd6bcafe6626fe8e7d00cacdbc3cc4f1">&#9670;&#160;</a></span>syscall()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void syscall </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/dd8/syscall_8c_source.html#l00140">140</a> of file <a class="el" href="../../db/dd8/syscall_8c_source.html">syscall.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  141</span>{</div>
<div class="line"><span class="lineno">  142</span>  <span class="keywordtype">int</span> num;</div>
<div class="line"><span class="lineno">  143</span>  <span class="keyword">struct </span><a class="code hl_struct" href="../../de/d48/structproc.html">proc</a> *curproc = <a class="code hl_function" href="../../d5/d64/defs_8h.html#a3d2327db1e34643f4a9e6a07c8cc62c6">myproc</a>();</div>
<div class="line"><span class="lineno">  144</span> </div>
<div class="line"><span class="lineno">  145</span>  num = curproc-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#a56ec07ac1e10ce42adfc8dd2a366071f">tf</a>-&gt;<a class="code hl_variable" href="../../df/d05/structtrapframe.html#ab1dd3a10936b61129d7395c3a21bc2fe">eax</a>;</div>
<div class="line"><span class="lineno">  146</span>  <span class="keywordflow">if</span>(num &gt; 0 &amp;&amp; num &lt; <a class="code hl_define" href="../../d5/d64/defs_8h.html#afacd331296c10f360da7640e0d68429f">NELEM</a>(syscalls) &amp;&amp; syscalls[num]) {</div>
<div class="line"><span class="lineno">  147</span>    curproc-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#a56ec07ac1e10ce42adfc8dd2a366071f">tf</a>-&gt;<a class="code hl_variable" href="../../df/d05/structtrapframe.html#ab1dd3a10936b61129d7395c3a21bc2fe">eax</a> = syscalls[num]();</div>
<div class="line"><span class="lineno">  148</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  149</span>    <a class="code hl_function" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6">cprintf</a>(<span class="stringliteral">&quot;%d %s: unknown sys call %d\n&quot;</span>,</div>
<div class="line"><span class="lineno">  150</span>            curproc-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#acf2bdf54d1f957ccbcdc987007029944">pid</a>, curproc-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#ac04af53e17d24b90c3cbfab56d658d62">name</a>, num);</div>
<div class="line"><span class="lineno">  151</span>    curproc-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#a56ec07ac1e10ce42adfc8dd2a366071f">tf</a>-&gt;<a class="code hl_variable" href="../../df/d05/structtrapframe.html#ab1dd3a10936b61129d7395c3a21bc2fe">eax</a> = -1;</div>
<div class="line"><span class="lineno">  152</span>  }</div>
<div class="line"><span class="lineno">  153</span>}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_acd6bcafe6626fe8e7d00cacdbc3cc4f1_cgraph.png" border="0" usemap="#ad5/d64/defs_8h_acd6bcafe6626fe8e7d00cacdbc3cc4f1_cgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_acd6bcafe6626fe8e7d00cacdbc3cc4f1_cgraph" id="ad5/d64/defs_8h_acd6bcafe6626fe8e7d00cacdbc3cc4f1_cgraph">
<area shape="rect" title=" " alt="" coords="5,221,68,246"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="116,297,175,322"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a41af0935f3989aae450cf8988cd9c3a9" title=" " alt="" coords="348,45,413,70"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="223,170,287,195"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="695,247,748,273"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="223,297,287,322"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="335,94,427,119"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="349,195,412,221"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="585,146,647,171"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="475,95,537,121"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="478,197,534,222"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="813,198,871,223"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="796,247,888,273"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_acd6bcafe6626fe8e7d00cacdbc3cc4f1_icgraph.png" border="0" usemap="#ad5/d64/defs_8h_acd6bcafe6626fe8e7d00cacdbc3cc4f1_icgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_acd6bcafe6626fe8e7d00cacdbc3cc4f1_icgraph" id="ad5/d64/defs_8h_acd6bcafe6626fe8e7d00cacdbc3cc4f1_icgraph">
<area shape="rect" title=" " alt="" coords="97,5,160,31"/>
<area shape="rect" href="../../dc/d6f/trap_8c.html#a372d166e36c086c91e5f5d81e5fead3a" title=" " alt="" coords="5,5,49,31"/>
</map>
</div>

</div>
</div>
<a id="a49af4bce992b520d5032364d0a4eb8ee" name="a49af4bce992b520d5032364d0a4eb8ee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a49af4bce992b520d5032364d0a4eb8ee">&#9670;&#160;</a></span>timerinit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void timerinit </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a9e7167b8e20e217c4af4e757f612ba6a" name="a9e7167b8e20e217c4af4e757f612ba6a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9e7167b8e20e217c4af4e757f612ba6a">&#9670;&#160;</a></span>tvinit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tvinit </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d6f/trap_8c_source.html#l00018">18</a> of file <a class="el" href="../../dc/d6f/trap_8c_source.html">trap.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   19</span>{</div>
<div class="line"><span class="lineno">   20</span>  <span class="keywordtype">int</span> i;</div>
<div class="line"><span class="lineno">   21</span> </div>
<div class="line"><span class="lineno">   22</span>  <span class="keywordflow">for</span>(i = 0; i &lt; 256; i++)</div>
<div class="line"><span class="lineno">   23</span>    <a class="code hl_define" href="../../d2/df1/mmu_8h.html#a23e7ddf0a414b66cf9badd182edf1eca">SETGATE</a>(<a class="code hl_variable" href="../../dc/d6f/trap_8c.html#a3facbc1e1e6618fb238fc124bd9aa827">idt</a>[i], 0, <a class="code hl_define" href="../../d2/df1/mmu_8h.html#a0d4e0c4c738af60d6092941469642429">SEG_KCODE</a>&lt;&lt;3, <a class="code hl_variable" href="../../dc/d6f/trap_8c.html#a3e6e0e8b5ba8014e09de2d9aa3740486">vectors</a>[i], 0);</div>
<div class="line"><span class="lineno">   24</span>  <a class="code hl_define" href="../../d2/df1/mmu_8h.html#a23e7ddf0a414b66cf9badd182edf1eca">SETGATE</a>(<a class="code hl_variable" href="../../dc/d6f/trap_8c.html#a3facbc1e1e6618fb238fc124bd9aa827">idt</a>[<a class="code hl_define" href="../../d5/d98/traps_8h.html#a6914c7173b6fe6d04e78d0876e39d95e">T_SYSCALL</a>], 1, <a class="code hl_define" href="../../d2/df1/mmu_8h.html#a0d4e0c4c738af60d6092941469642429">SEG_KCODE</a>&lt;&lt;3, <a class="code hl_variable" href="../../dc/d6f/trap_8c.html#a3e6e0e8b5ba8014e09de2d9aa3740486">vectors</a>[<a class="code hl_define" href="../../d5/d98/traps_8h.html#a6914c7173b6fe6d04e78d0876e39d95e">T_SYSCALL</a>], <a class="code hl_define" href="../../d2/df1/mmu_8h.html#a060d4d4e32af81cab881fe77e58d7b78">DPL_USER</a>);</div>
<div class="line"><span class="lineno">   25</span> </div>
<div class="line"><span class="lineno">   26</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#ab56d728e6966819a0260c358d3ac3419">initlock</a>(&amp;<a class="code hl_variable" href="../../dc/d6f/trap_8c.html#a094a4703b62095e2fa469fab3ffea5c7">tickslock</a>, <span class="stringliteral">&quot;time&quot;</span>);</div>
<div class="line"><span class="lineno">   27</span>}</div>
<div class="ttc" id="ammu_8h_html_a23e7ddf0a414b66cf9badd182edf1eca"><div class="ttname"><a href="../../d2/df1/mmu_8h.html#a23e7ddf0a414b66cf9badd182edf1eca">SETGATE</a></div><div class="ttdeci">#define SETGATE(gate, istrap, sel, off, d)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/df1/mmu_8h_source.html#l00168">mmu.h:168</a></div></div>
<div class="ttc" id="atrap_8c_html_a094a4703b62095e2fa469fab3ffea5c7"><div class="ttname"><a href="../../dc/d6f/trap_8c.html#a094a4703b62095e2fa469fab3ffea5c7">tickslock</a></div><div class="ttdeci">struct spinlock tickslock</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d6f/trap_8c_source.html#l00014">trap.c:14</a></div></div>
<div class="ttc" id="atrap_8c_html_a3e6e0e8b5ba8014e09de2d9aa3740486"><div class="ttname"><a href="../../dc/d6f/trap_8c.html#a3e6e0e8b5ba8014e09de2d9aa3740486">vectors</a></div><div class="ttdeci">uint vectors[]</div></div>
<div class="ttc" id="atraps_8h_html_a6914c7173b6fe6d04e78d0876e39d95e"><div class="ttname"><a href="../../d5/d98/traps_8h.html#a6914c7173b6fe6d04e78d0876e39d95e">T_SYSCALL</a></div><div class="ttdeci">#define T_SYSCALL</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d98/traps_8h_source.html#l00027">traps.h:27</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_a9e7167b8e20e217c4af4e757f612ba6a_cgraph.png" border="0" usemap="#ad5/d64/defs_8h_a9e7167b8e20e217c4af4e757f612ba6a_cgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_a9e7167b8e20e217c4af4e757f612ba6a_cgraph" id="ad5/d64/defs_8h_a9e7167b8e20e217c4af4e757f612ba6a_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,56,31"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#abda07b4a007b2e888d9d783920460b89" title=" " alt="" coords="104,5,167,31"/>
</map>
</div>

</div>
</div>
<a id="a79fa7b73d0d61fdd15d30768a395437d" name="a79fa7b73d0d61fdd15d30768a395437d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a79fa7b73d0d61fdd15d30768a395437d">&#9670;&#160;</a></span>uartinit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void uartinit </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/d87/uart_8c_source.html#l00020">20</a> of file <a class="el" href="../../d1/d87/uart_8c_source.html">uart.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   21</span>{</div>
<div class="line"><span class="lineno">   22</span>  <span class="keywordtype">char</span> *p;</div>
<div class="line"><span class="lineno">   23</span> </div>
<div class="line"><span class="lineno">   24</span>  <span class="comment">// Turn off the FIFO</span></div>
<div class="line"><span class="lineno">   25</span>  outb(<a class="code hl_define" href="../../d1/d87/uart_8c.html#a00dbb3ab1c59e14699be9393693e2248">COM1</a>+2, 0);</div>
<div class="line"><span class="lineno">   26</span> </div>
<div class="line"><span class="lineno">   27</span>  <span class="comment">// 9600 baud, 8 data bits, 1 stop bit, parity off.</span></div>
<div class="line"><span class="lineno">   28</span>  outb(<a class="code hl_define" href="../../d1/d87/uart_8c.html#a00dbb3ab1c59e14699be9393693e2248">COM1</a>+3, 0x80);    <span class="comment">// Unlock divisor</span></div>
<div class="line"><span class="lineno">   29</span>  outb(<a class="code hl_define" href="../../d1/d87/uart_8c.html#a00dbb3ab1c59e14699be9393693e2248">COM1</a>+0, 115200/9600);</div>
<div class="line"><span class="lineno">   30</span>  outb(<a class="code hl_define" href="../../d1/d87/uart_8c.html#a00dbb3ab1c59e14699be9393693e2248">COM1</a>+1, 0);</div>
<div class="line"><span class="lineno">   31</span>  outb(<a class="code hl_define" href="../../d1/d87/uart_8c.html#a00dbb3ab1c59e14699be9393693e2248">COM1</a>+3, 0x03);    <span class="comment">// Lock divisor, 8 data bits.</span></div>
<div class="line"><span class="lineno">   32</span>  outb(<a class="code hl_define" href="../../d1/d87/uart_8c.html#a00dbb3ab1c59e14699be9393693e2248">COM1</a>+4, 0);</div>
<div class="line"><span class="lineno">   33</span>  outb(<a class="code hl_define" href="../../d1/d87/uart_8c.html#a00dbb3ab1c59e14699be9393693e2248">COM1</a>+1, 0x01);    <span class="comment">// Enable receive interrupts.</span></div>
<div class="line"><span class="lineno">   34</span> </div>
<div class="line"><span class="lineno">   35</span>  <span class="comment">// If status is 0xFF, no serial port.</span></div>
<div class="line"><span class="lineno">   36</span>  <span class="keywordflow">if</span>(inb(<a class="code hl_define" href="../../d1/d87/uart_8c.html#a00dbb3ab1c59e14699be9393693e2248">COM1</a>+5) == 0xFF)</div>
<div class="line"><span class="lineno">   37</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">   38</span>  uart = 1;</div>
<div class="line"><span class="lineno">   39</span> </div>
<div class="line"><span class="lineno">   40</span>  <span class="comment">// Acknowledge pre-existing interrupt conditions;</span></div>
<div class="line"><span class="lineno">   41</span>  <span class="comment">// enable interrupts.</span></div>
<div class="line"><span class="lineno">   42</span>  inb(<a class="code hl_define" href="../../d1/d87/uart_8c.html#a00dbb3ab1c59e14699be9393693e2248">COM1</a>+2);</div>
<div class="line"><span class="lineno">   43</span>  inb(<a class="code hl_define" href="../../d1/d87/uart_8c.html#a00dbb3ab1c59e14699be9393693e2248">COM1</a>+0);</div>
<div class="line"><span class="lineno">   44</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#a63da75c0c2f0b051f2c790aea2116b63">ioapicenable</a>(<a class="code hl_define" href="../../d5/d98/traps_8h.html#a603b478f70a928f442e33fefba73494a">IRQ_COM1</a>, 0);</div>
<div class="line"><span class="lineno">   45</span> </div>
<div class="line"><span class="lineno">   46</span>  <span class="comment">// Announce that we&#39;re here.</span></div>
<div class="line"><span class="lineno">   47</span>  <span class="keywordflow">for</span>(p=<span class="stringliteral">&quot;xv6...\n&quot;</span>; *p; p++)</div>
<div class="line"><span class="lineno">   48</span>    <a class="code hl_function" href="../../d1/d87/uart_8c.html#a55840fa098ac21df6535d6ac91956d07">uartputc</a>(*p);</div>
<div class="line"><span class="lineno">   49</span>}</div>
<div class="ttc" id="atraps_8h_html_a603b478f70a928f442e33fefba73494a"><div class="ttname"><a href="../../d5/d98/traps_8h.html#a603b478f70a928f442e33fefba73494a">IRQ_COM1</a></div><div class="ttdeci">#define IRQ_COM1</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d98/traps_8h_source.html#l00034">traps.h:34</a></div></div>
<div class="ttc" id="auart_8c_html_a00dbb3ab1c59e14699be9393693e2248"><div class="ttname"><a href="../../d1/d87/uart_8c.html#a00dbb3ab1c59e14699be9393693e2248">COM1</a></div><div class="ttdeci">#define COM1</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d87/uart_8c_source.html#l00015">uart.c:15</a></div></div>
<div class="ttc" id="auart_8c_html_a55840fa098ac21df6535d6ac91956d07"><div class="ttname"><a href="../../d1/d87/uart_8c.html#a55840fa098ac21df6535d6ac91956d07">uartputc</a></div><div class="ttdeci">void uartputc(int c)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d87/uart_8c_source.html#l00052">uart.c:52</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_a79fa7b73d0d61fdd15d30768a395437d_cgraph.png" border="0" usemap="#ad5/d64/defs_8h_a79fa7b73d0d61fdd15d30768a395437d_cgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_a79fa7b73d0d61fdd15d30768a395437d_cgraph" id="ad5/d64/defs_8h_a79fa7b73d0d61fdd15d30768a395437d_cgraph">
<area shape="rect" title=" " alt="" coords="5,31,67,56"/>
<area shape="rect" href="../../dd/d61/ioapic_8c.html#a9688537a0879e9e2ac5a90184e2ef987" title=" " alt="" coords="115,5,209,31"/>
<area shape="rect" href="../../d1/d87/uart_8c.html#a55840fa098ac21df6535d6ac91956d07" title=" " alt="" coords="127,55,197,80"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#ae0ac6441d1d76d8ef821cdbbc6b6fc2f" title=" " alt="" coords="257,55,343,80"/>
</map>
</div>

</div>
</div>
<a id="aa64047002b0e84e2611ebf7dc46b7c99" name="aa64047002b0e84e2611ebf7dc46b7c99"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa64047002b0e84e2611ebf7dc46b7c99">&#9670;&#160;</a></span>uartintr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void uartintr </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/d87/uart_8c_source.html#l00074">74</a> of file <a class="el" href="../../d1/d87/uart_8c_source.html">uart.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   75</span>{</div>
<div class="line"><span class="lineno">   76</span>  <a class="code hl_function" href="../../d0/d56/console_8c.html#aad3d6ca39f23bb6d2686d2967e415193">consoleintr</a>(uartgetc);</div>
<div class="line"><span class="lineno">   77</span>}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_aa64047002b0e84e2611ebf7dc46b7c99_cgraph.png" border="0" usemap="#ad5/d64/defs_8h_aa64047002b0e84e2611ebf7dc46b7c99_cgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_aa64047002b0e84e2611ebf7dc46b7c99_cgraph" id="ad5/d64/defs_8h_aa64047002b0e84e2611ebf7dc46b7c99_cgraph">
<area shape="rect" title=" " alt="" coords="5,69,68,94"/>
<area shape="rect" href="../../d0/d56/console_8c.html#aad3d6ca39f23bb6d2686d2967e415193" title=" " alt="" coords="116,69,201,94"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="364,221,428,246"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="1103,170,1167,196"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a7f185044294ebb57521c73f723990164" title=" " alt="" coords="836,94,915,120"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a4a34d9f03e436cfa09b88f735f6ee952" title=" " alt="" coords="249,94,316,120"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="476,196,568,221"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="491,398,553,424"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="727,334,788,360"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="849,221,902,246"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="616,348,679,373"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="1215,322,1271,348"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="979,297,1038,322"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="979,145,1038,170"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="963,96,1055,121"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_aa64047002b0e84e2611ebf7dc46b7c99_icgraph.png" border="0" usemap="#ad5/d64/defs_8h_aa64047002b0e84e2611ebf7dc46b7c99_icgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_aa64047002b0e84e2611ebf7dc46b7c99_icgraph" id="ad5/d64/defs_8h_aa64047002b0e84e2611ebf7dc46b7c99_icgraph">
<area shape="rect" title=" " alt="" coords="97,5,160,31"/>
<area shape="rect" href="../../dc/d6f/trap_8c.html#a372d166e36c086c91e5f5d81e5fead3a" title=" " alt="" coords="5,5,49,31"/>
</map>
</div>

</div>
</div>
<a id="a571626618a1f05ff6854802e936845d6" name="a571626618a1f05ff6854802e936845d6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a571626618a1f05ff6854802e936845d6">&#9670;&#160;</a></span>uartputc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void uartputc </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>c</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/d87/uart_8c_source.html#l00052">52</a> of file <a class="el" href="../../d1/d87/uart_8c_source.html">uart.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   53</span>{</div>
<div class="line"><span class="lineno">   54</span>  <span class="keywordtype">int</span> i;</div>
<div class="line"><span class="lineno">   55</span> </div>
<div class="line"><span class="lineno">   56</span>  <span class="keywordflow">if</span>(!uart)</div>
<div class="line"><span class="lineno">   57</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">   58</span>  <span class="keywordflow">for</span>(i = 0; i &lt; 128 &amp;&amp; !(inb(<a class="code hl_define" href="../../d1/d87/uart_8c.html#a00dbb3ab1c59e14699be9393693e2248">COM1</a>+5) &amp; 0x20); i++)</div>
<div class="line"><span class="lineno">   59</span>    <a class="code hl_function" href="../../d5/d64/defs_8h.html#ada0e72e8d0a1a48090829fd03a0b76ba">microdelay</a>(10);</div>
<div class="line"><span class="lineno">   60</span>  outb(<a class="code hl_define" href="../../d1/d87/uart_8c.html#a00dbb3ab1c59e14699be9393693e2248">COM1</a>+0, c);</div>
<div class="line"><span class="lineno">   61</span>}</div>
<div class="ttc" id="adefs_8h_html_ada0e72e8d0a1a48090829fd03a0b76ba"><div class="ttname"><a href="../../d5/d64/defs_8h.html#ada0e72e8d0a1a48090829fd03a0b76ba">microdelay</a></div><div class="ttdeci">void microdelay(int)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df6/lapic_8c_source.html#l00119">lapic.c:119</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_a571626618a1f05ff6854802e936845d6_cgraph.png" border="0" usemap="#ad5/d64/defs_8h_a571626618a1f05ff6854802e936845d6_cgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_a571626618a1f05ff6854802e936845d6_cgraph" id="ad5/d64/defs_8h_a571626618a1f05ff6854802e936845d6_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,75,31"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#ae0ac6441d1d76d8ef821cdbbc6b6fc2f" title=" " alt="" coords="123,5,208,31"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_a571626618a1f05ff6854802e936845d6_icgraph.png" border="0" usemap="#ad5/d64/defs_8h_a571626618a1f05ff6854802e936845d6_icgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_a571626618a1f05ff6854802e936845d6_icgraph" id="ad5/d64/defs_8h_a571626618a1f05ff6854802e936845d6_icgraph">
<area shape="rect" title=" " alt="" coords="115,5,184,31"/>
<area shape="rect" href="../../d1/d87/uart_8c.html#a79fa7b73d0d61fdd15d30768a395437d" title=" " alt="" coords="5,5,67,31"/>
</map>
</div>

</div>
</div>
<a id="a81c8a6a0cae413bc81aa223f7f7b7205" name="a81c8a6a0cae413bc81aa223f7f7b7205"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a81c8a6a0cae413bc81aa223f7f7b7205">&#9670;&#160;</a></span>userinit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void userinit </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/dda/proc_8c_source.html#l00121">121</a> of file <a class="el" href="../../d3/dda/proc_8c_source.html">proc.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  122</span>{</div>
<div class="line"><span class="lineno">  123</span>  <span class="keyword">struct </span><a class="code hl_struct" href="../../de/d48/structproc.html">proc</a> *p;</div>
<div class="line"><span class="lineno">  124</span>  <span class="keyword">extern</span> <span class="keywordtype">char</span> _binary_initcode_start[], _binary_initcode_size[];</div>
<div class="line"><span class="lineno">  125</span> </div>
<div class="line"><span class="lineno">  126</span>  p = allocproc();</div>
<div class="line"><span class="lineno">  127</span>  </div>
<div class="line"><span class="lineno">  128</span>  initproc = p;</div>
<div class="line"><span class="lineno">  129</span>  <span class="keywordflow">if</span>((p-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#ad430afc653e9eb6cee33954d5545b79d">pgdir</a> = <a class="code hl_function" href="../../d5/d64/defs_8h.html#a1c8a7a02e9391b5cf0984388216695c0">setupkvm</a>()) == 0)</div>
<div class="line"><span class="lineno">  130</span>    <a class="code hl_function" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a">panic</a>(<span class="stringliteral">&quot;userinit: out of memory?&quot;</span>);</div>
<div class="line"><span class="lineno">  131</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#a7b3410bde4005e848e1748f2b0f0a084">inituvm</a>(p-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#ad430afc653e9eb6cee33954d5545b79d">pgdir</a>, _binary_initcode_start, (<span class="keywordtype">int</span>)_binary_initcode_size);</div>
<div class="line"><span class="lineno">  132</span>  p-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#a6e67042bb361124ff287af88efc33e00">sz</a> = <a class="code hl_define" href="../../d2/df1/mmu_8h.html#a5f96cb6ae6670e023c407cc2f77e1704">PGSIZE</a>;</div>
<div class="line"><span class="lineno">  133</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#a0098886a849eef10803e9f35ceec61b9">memset</a>(p-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#a56ec07ac1e10ce42adfc8dd2a366071f">tf</a>, 0, <span class="keyword">sizeof</span>(*p-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#a56ec07ac1e10ce42adfc8dd2a366071f">tf</a>));</div>
<div class="line"><span class="lineno">  134</span>  p-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#a56ec07ac1e10ce42adfc8dd2a366071f">tf</a>-&gt;<a class="code hl_variable" href="../../df/d05/structtrapframe.html#a61261f63223a73e25be79fcc8c625265">cs</a> = (<a class="code hl_define" href="../../d2/df1/mmu_8h.html#a85b694d969eb01e547197c21db219f4b">SEG_UCODE</a> &lt;&lt; 3) | <a class="code hl_define" href="../../d2/df1/mmu_8h.html#a060d4d4e32af81cab881fe77e58d7b78">DPL_USER</a>;</div>
<div class="line"><span class="lineno">  135</span>  p-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#a56ec07ac1e10ce42adfc8dd2a366071f">tf</a>-&gt;<a class="code hl_variable" href="../../df/d05/structtrapframe.html#a421be1ec9ad2a55f1d1adeac9b0b89c3">ds</a> = (<a class="code hl_define" href="../../d2/df1/mmu_8h.html#aba0495696b4c656fda31704782648461">SEG_UDATA</a> &lt;&lt; 3) | <a class="code hl_define" href="../../d2/df1/mmu_8h.html#a060d4d4e32af81cab881fe77e58d7b78">DPL_USER</a>;</div>
<div class="line"><span class="lineno">  136</span>  p-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#a56ec07ac1e10ce42adfc8dd2a366071f">tf</a>-&gt;<a class="code hl_variable" href="../../df/d05/structtrapframe.html#ab974b358098da0aaa5897c32827a038d">es</a> = p-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#a56ec07ac1e10ce42adfc8dd2a366071f">tf</a>-&gt;<a class="code hl_variable" href="../../df/d05/structtrapframe.html#a421be1ec9ad2a55f1d1adeac9b0b89c3">ds</a>;</div>
<div class="line"><span class="lineno">  137</span>  p-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#a56ec07ac1e10ce42adfc8dd2a366071f">tf</a>-&gt;<a class="code hl_variable" href="../../df/d05/structtrapframe.html#aa9c9b52b242d4f42fe4252e26b655bf6">ss</a> = p-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#a56ec07ac1e10ce42adfc8dd2a366071f">tf</a>-&gt;<a class="code hl_variable" href="../../df/d05/structtrapframe.html#a421be1ec9ad2a55f1d1adeac9b0b89c3">ds</a>;</div>
<div class="line"><span class="lineno">  138</span>  p-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#a56ec07ac1e10ce42adfc8dd2a366071f">tf</a>-&gt;<a class="code hl_variable" href="../../df/d05/structtrapframe.html#ae6b3005ad34416546603ab18dbb4a644">eflags</a> = <a class="code hl_define" href="../../d2/df1/mmu_8h.html#ab481068357bb42797aafe91864a2d085">FL_IF</a>;</div>
<div class="line"><span class="lineno">  139</span>  p-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#a56ec07ac1e10ce42adfc8dd2a366071f">tf</a>-&gt;<a class="code hl_variable" href="../../df/d05/structtrapframe.html#acd319e2dbd720d217c10f8fb620d73e2">esp</a> = <a class="code hl_define" href="../../d2/df1/mmu_8h.html#a5f96cb6ae6670e023c407cc2f77e1704">PGSIZE</a>;</div>
<div class="line"><span class="lineno">  140</span>  p-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#a56ec07ac1e10ce42adfc8dd2a366071f">tf</a>-&gt;<a class="code hl_variable" href="../../df/d05/structtrapframe.html#a886a5973a537894e3a95435f38767d5c">eip</a> = 0;  <span class="comment">// beginning of initcode.S</span></div>
<div class="line"><span class="lineno">  141</span> </div>
<div class="line"><span class="lineno">  142</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#aa406a54805a570dfe266281876dc5d69">safestrcpy</a>(p-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#ac04af53e17d24b90c3cbfab56d658d62">name</a>, <span class="stringliteral">&quot;initcode&quot;</span>, <span class="keyword">sizeof</span>(p-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#ac04af53e17d24b90c3cbfab56d658d62">name</a>));</div>
<div class="line"><span class="lineno">  143</span>  p-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#a493bc338ce008a838eef521972a35257">cwd</a> = <a class="code hl_function" href="../../d5/d64/defs_8h.html#acde7d3975db286253e584452ba03a54f">namei</a>(<span class="stringliteral">&quot;/&quot;</span>);</div>
<div class="line"><span class="lineno">  144</span> </div>
<div class="line"><span class="lineno">  145</span>  <span class="comment">// this assignment to p-&gt;state lets other cores</span></div>
<div class="line"><span class="lineno">  146</span>  <span class="comment">// run this process. the acquire forces the above</span></div>
<div class="line"><span class="lineno">  147</span>  <span class="comment">// writes to be visible, and the lock is also needed</span></div>
<div class="line"><span class="lineno">  148</span>  <span class="comment">// because the assignment might not be atomic.</span></div>
<div class="line"><span class="lineno">  149</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#afe4ef8638f1ecb962a6e67fb086ee3b8">acquire</a>(&amp;<a class="code hl_variable" href="../../d3/dda/proc_8c.html#addf39d613ca9a58e7e6080a2e454421a">ptable</a>.lock);</div>
<div class="line"><span class="lineno">  150</span> </div>
<div class="line"><span class="lineno">  151</span>  p-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#a0f2fe91548a1382672ae26e29ca9e736">state</a> = <a class="code hl_enumvalue" href="../../df/d03/proc_8h.html#aa1ced7d2b60040fded3fa873d0c03ba7a269b90433e40460a2c0044a0b3e15694">RUNNABLE</a>;</div>
<div class="line"><span class="lineno">  152</span> </div>
<div class="line"><span class="lineno">  153</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#a4f8616948f3dbce65671f666eed1d669">release</a>(&amp;<a class="code hl_variable" href="../../d3/dda/proc_8c.html#addf39d613ca9a58e7e6080a2e454421a">ptable</a>.lock);</div>
<div class="line"><span class="lineno">  154</span>}</div>
<div class="ttc" id="adefs_8h_html_a7b3410bde4005e848e1748f2b0f0a084"><div class="ttname"><a href="../../d5/d64/defs_8h.html#a7b3410bde4005e848e1748f2b0f0a084">inituvm</a></div><div class="ttdeci">void inituvm(pde_t *, char *, uint)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/de9/vm_8c_source.html#l00183">vm.c:183</a></div></div>
<div class="ttc" id="astructtrapframe_html_a421be1ec9ad2a55f1d1adeac9b0b89c3"><div class="ttname"><a href="../../df/d05/structtrapframe.html#a421be1ec9ad2a55f1d1adeac9b0b89c3">trapframe::ds</a></div><div class="ttdeci">ushort ds</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d39/x86_8h_source.html#l00168">x86.h:168</a></div></div>
<div class="ttc" id="astructtrapframe_html_a61261f63223a73e25be79fcc8c625265"><div class="ttname"><a href="../../df/d05/structtrapframe.html#a61261f63223a73e25be79fcc8c625265">trapframe::cs</a></div><div class="ttdeci">ushort cs</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d39/x86_8h_source.html#l00175">x86.h:175</a></div></div>
<div class="ttc" id="astructtrapframe_html_aa9c9b52b242d4f42fe4252e26b655bf6"><div class="ttname"><a href="../../df/d05/structtrapframe.html#aa9c9b52b242d4f42fe4252e26b655bf6">trapframe::ss</a></div><div class="ttdeci">ushort ss</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d39/x86_8h_source.html#l00181">x86.h:181</a></div></div>
<div class="ttc" id="astructtrapframe_html_ab974b358098da0aaa5897c32827a038d"><div class="ttname"><a href="../../df/d05/structtrapframe.html#ab974b358098da0aaa5897c32827a038d">trapframe::es</a></div><div class="ttdeci">ushort es</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d39/x86_8h_source.html#l00166">x86.h:166</a></div></div>
<div class="ttc" id="astructtrapframe_html_ae6b3005ad34416546603ab18dbb4a644"><div class="ttname"><a href="../../df/d05/structtrapframe.html#ae6b3005ad34416546603ab18dbb4a644">trapframe::eflags</a></div><div class="ttdeci">uint eflags</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d39/x86_8h_source.html#l00177">x86.h:177</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_a81c8a6a0cae413bc81aa223f7f7b7205_cgraph.png" border="0" usemap="#ad5/d64/defs_8h_a81c8a6a0cae413bc81aa223f7f7b7205_cgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_a81c8a6a0cae413bc81aa223f7f7b7205_cgraph" id="ad5/d64/defs_8h_a81c8a6a0cae413bc81aa223f7f7b7205_cgraph">
<area shape="rect" title=" " alt="" coords="5,553,69,578"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="1231,1734,1295,1760"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="1705,1121,1759,1146"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="1947,1468,2011,1493"/>
<area shape="rect" href="../../de/de9/vm_8c.html#ac96c231d4053eaf4322c27d1f2cd9d49" title=" " alt="" coords="117,782,181,808"/>
<area shape="rect" href="../../db/d8a/ulib_8c.html#aa9cdc2409c15ccd5ee3b2031576f4093" title=" " alt="" coords="1228,285,1297,310"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a1c8a7a02e9391b5cf0984388216695c0" title=" " alt="" coords="693,513,772,538"/>
<area shape="rect" href="../../d1/db0/string_8c.html#aca73516e4b2fdb2663e0d26f855ac3ca" title=" " alt="" coords="555,1070,637,1096"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a35c52ecf358097c17dcbbd5594acb41a" title=" " alt="" coords="121,2210,178,2236"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="1345,1734,1437,1760"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="1360,1886,1423,1912"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="1596,1836,1657,1861"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="1485,1785,1548,1810"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="2059,1468,2115,1493"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="1823,1316,1882,1341"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="1823,1266,1882,1292"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="1807,1165,1899,1190"/>
<area shape="rect" href="../../d4/def/kalloc_8c.html#a5e965f6365c721b5b23c12d16d45c3dc" title=" " alt="" coords="841,513,897,538"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#aa1c6e6e76813ccb29a29bb119dba668a" title=" " alt="" coords="229,897,280,922"/>
<area shape="rect" href="../../d1/db0/string_8c.html#a07f97e2ed1ce37955192d52de8f4911f" title=" " alt="" coords="828,1121,911,1146"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#aaf98ef7cdde3a0dfb2e49919de3298b1" title=" " alt="" coords="337,1526,379,1552"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#acd2e1ded4bb6fce4500438bf928330f4" title=" " alt="" coords="449,770,493,796"/>
<area shape="rect" href="../../df/d5d/umalloc_8c.html#adebb229f063e66907017098087cbe791" title=" " alt="" coords="336,921,380,946"/>
<area shape="rect" href="../../d8/ddb/user_8h.html#a939cb25a305fe68aad9b365077f1a8c7" title=" " alt="" coords="329,970,387,996"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a650cf0caaaa8b75f653c1c92818d03a4" title=" " alt="" coords="1121,2388,1160,2413"/>
<area shape="rect" href="../../df/d5d/umalloc_8c.html#ac131c16d1dcb6bea908d0237c82e981d" title=" " alt="" coords="328,1020,388,1045"/>
<area shape="rect" href="../../d5/de1/forktest_8c.html#a249680925885256274fa9f02dd51cec4" title=" " alt="" coords="333,872,383,897"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#af6f31822f7e737b4e414bdac1ccb59a4" title=" " alt="" coords="709,918,756,944"/>
<area shape="rect" href="../../d7/df8/log_8c.html#ac96aa31ffc0500e749c62c4d377c21c9" title=" " alt="" coords="695,1830,770,1856"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a41af0935f3989aae450cf8988cd9c3a9" title=" " alt="" coords="1108,1324,1173,1349"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad788da91743c333b5bed7c4a0dd12365" title=" " alt="" coords="977,2110,1035,2136"/>
<area shape="rect" href="../../d7/df8/log_8c.html#ac0f12be0ca0de555e60b27b06a57a65b" title=" " alt="" coords="974,1374,1038,1400"/>
<area shape="rect" href="../../d6/d13/file_8c.html#ae557c81ab89c24219146144bb6adaa2c" title=" " alt="" coords="436,1704,507,1729"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#ab3c447f135c68e4c3c1f8d5866f6e77b" title=" " alt="" coords="575,1881,617,1906"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ae70cc0370342e46f6db3bec367232457" title=" " alt="" coords="843,1830,896,1856"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a9fa00b0be5d3c4781048861e2506eb63" title=" " alt="" coords="1101,2236,1180,2261"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a1d9e7047d3dfb57809a2541d8387705e" title=" " alt="" coords="1234,2286,1291,2312"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a4a34d9f03e436cfa09b88f735f6ee952" title=" " alt="" coords="1107,2033,1174,2058"/>
<area shape="rect" href="../../d1/d47/pipe_8c.html#a48642f54734698f6f881ee07723292cb" title=" " alt="" coords="967,1628,1045,1653"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#aaad2d7a86d4859982dd9a132f5128ff2" title=" " alt="" coords="685,1881,780,1906"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a7220afa8e5f4bea540eb95879ea7df6e" title=" " alt="" coords="701,1476,765,1501"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#aa997067c2c9bfef15af6fa0a10c20f4a" title=" " alt="" coords="959,2172,1053,2197"/>
<area shape="rect" href="../../d4/def/kalloc_8c.html#aced59ecf8411235f6dffc065236711a5" title=" " alt="" coords="1115,564,1166,589"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a1b57bfa0091c9be3ccc16dbb85ce3acf" title=" " alt="" coords="559,717,633,742"/>
<area shape="rect" href="../../d6/d13/file_8c.html#a9ef0346d08d8ed79ce2a9c03f9a4b4b2" title=" " alt="" coords="1111,817,1171,842"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a24a91383ab80b4b8a1ef1f4df896035c" title=" " alt="" coords="1117,918,1164,944"/>
<area shape="rect" href="../../de/de9/vm_8c.html#aa883924e2f068c520b695cdc168e1603" title=" " alt="" coords="838,690,901,716"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a6d3019ea15a9bfdc5131ae97f3623c49" title=" " alt="" coords="962,665,1050,690"/>
<area shape="rect" href="../../db/d8a/ulib_8c.html#a59b5e6e6105ef0e97aed266ec6fdfe60" title=" " alt="" coords="444,872,499,897"/>
<area shape="rect" href="../../d8/ddb/user_8h.html#ae57e95d717eb7386cd8b935a0c136abe" title=" " alt="" coords="446,921,497,946"/>
</map>
</div>

</div>
</div>
<a id="a082f50617d3c87d732157c60daed00ce" name="a082f50617d3c87d732157c60daed00ce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a082f50617d3c87d732157c60daed00ce">&#9670;&#160;</a></span>uva2ka()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char * uva2ka </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d49/types_8h.html#ac131849542282b2c95dfeaf1f26dc010">pde_t</a> *&#160;</td>
          <td class="paramname"><em>pgdir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>uva</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/de9/vm_8c_source.html#l00350">350</a> of file <a class="el" href="../../de/de9/vm_8c_source.html">vm.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  351</span>{</div>
<div class="line"><span class="lineno">  352</span>  <a class="code hl_typedef" href="../../d2/df1/mmu_8h.html#ab23e75f764f8314a83eaff23508c2ae5">pte_t</a> *pte;</div>
<div class="line"><span class="lineno">  353</span> </div>
<div class="line"><span class="lineno">  354</span>  pte = walkpgdir(pgdir, uva, 0);</div>
<div class="line"><span class="lineno">  355</span>  <span class="keywordflow">if</span>((*pte &amp; <a class="code hl_define" href="../../d2/df1/mmu_8h.html#a89bd860de64c44cd8ebaca8dc311b5ac">PTE_P</a>) == 0)</div>
<div class="line"><span class="lineno">  356</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  357</span>  <span class="keywordflow">if</span>((*pte &amp; <a class="code hl_define" href="../../d2/df1/mmu_8h.html#adced9836a1dc98d72849361e6ab03cda">PTE_U</a>) == 0)</div>
<div class="line"><span class="lineno">  358</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  359</span>  <span class="keywordflow">return</span> (<span class="keywordtype">char</span>*)<a class="code hl_define" href="../../d8/da9/memlayout_8h.html#aefd5e8b62c49bba2cf20309c7dd174e2">P2V</a>(<a class="code hl_define" href="../../d2/df1/mmu_8h.html#a74b24f9b091875a5313370892e3f37a5">PTE_ADDR</a>(*pte));</div>
<div class="line"><span class="lineno">  360</span>}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_a082f50617d3c87d732157c60daed00ce_icgraph.png" border="0" usemap="#ad5/d64/defs_8h_a082f50617d3c87d732157c60daed00ce_icgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_a082f50617d3c87d732157c60daed00ce_icgraph" id="ad5/d64/defs_8h_a082f50617d3c87d732157c60daed00ce_icgraph">
<area shape="rect" title=" " alt="" coords="445,104,509,129"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a532bc3f3e39942c20a471a11cff1a582" title=" " alt="" coords="329,104,397,129"/>
<area shape="rect" href="../../df/dc9/exec_8c.html#ace32454ed0d37834dcb1cb4f8b727e6e" title=" " alt="" coords="231,104,281,129"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#ac5b5d4517586be6396b4f3b37445945a" title=" " alt="" coords="104,5,183,31"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a6f94e3b215d069b5419e87bafe80799a" title=" " alt="" coords="107,55,179,80"/>
<area shape="rect" href="../../d8/d60/init_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title=" " alt="" coords="118,104,169,129"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#aedbeff6afe5d4e22330c7e6b5e6df893" title=" " alt="" coords="111,177,176,203"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#aeaa813ddeb6a5fac3c45714c7351c526" title=" " alt="" coords="104,227,183,252"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="5,31,56,56"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title=" " alt="" coords="5,177,56,203"/>
</map>
</div>

</div>
</div>
<a id="af6f31822f7e737b4e414bdac1ccb59a4" name="af6f31822f7e737b4e414bdac1ccb59a4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af6f31822f7e737b4e414bdac1ccb59a4">&#9670;&#160;</a></span>wait()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int wait </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/dda/proc_8c_source.html#l00273">273</a> of file <a class="el" href="../../d3/dda/proc_8c_source.html">proc.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  274</span>{</div>
<div class="line"><span class="lineno">  275</span>  <span class="keyword">struct </span><a class="code hl_struct" href="../../de/d48/structproc.html">proc</a> *p;</div>
<div class="line"><span class="lineno">  276</span>  <span class="keywordtype">int</span> havekids, <a class="code hl_variable" href="../../de/d48/structproc.html#acf2bdf54d1f957ccbcdc987007029944">pid</a>;</div>
<div class="line"><span class="lineno">  277</span>  <span class="keyword">struct </span><a class="code hl_struct" href="../../de/d48/structproc.html">proc</a> *curproc = <a class="code hl_function" href="../../d3/dda/proc_8c.html#a41af0935f3989aae450cf8988cd9c3a9">myproc</a>();</div>
<div class="line"><span class="lineno">  278</span>  </div>
<div class="line"><span class="lineno">  279</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#afe4ef8638f1ecb962a6e67fb086ee3b8">acquire</a>(&amp;<a class="code hl_variable" href="../../d3/dda/proc_8c.html#addf39d613ca9a58e7e6080a2e454421a">ptable</a>.lock);</div>
<div class="line"><span class="lineno">  280</span>  <span class="keywordflow">for</span>(;;){</div>
<div class="line"><span class="lineno">  281</span>    <span class="comment">// Scan through table looking for exited children.</span></div>
<div class="line"><span class="lineno">  282</span>    havekids = 0;</div>
<div class="line"><span class="lineno">  283</span>    <span class="keywordflow">for</span>(p = <a class="code hl_variable" href="../../d3/dda/proc_8c.html#addf39d613ca9a58e7e6080a2e454421a">ptable</a>.proc; p &lt; &amp;<a class="code hl_variable" href="../../d3/dda/proc_8c.html#addf39d613ca9a58e7e6080a2e454421a">ptable</a>.proc[<a class="code hl_define" href="../../d5/d33/param_8h.html#a810c5b751df5bb30588613ed91095129">NPROC</a>]; p++){</div>
<div class="line"><span class="lineno">  284</span>      <span class="keywordflow">if</span>(p-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#a14ea8849701ffafba4d142725de154d4">parent</a> != curproc)</div>
<div class="line"><span class="lineno">  285</span>        <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  286</span>      havekids = 1;</div>
<div class="line"><span class="lineno">  287</span>      <span class="keywordflow">if</span>(p-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#a0f2fe91548a1382672ae26e29ca9e736">state</a> == <a class="code hl_enumvalue" href="../../df/d03/proc_8h.html#aa1ced7d2b60040fded3fa873d0c03ba7a5dfb36109b24f39d54d5c3f48f53def8">ZOMBIE</a>){</div>
<div class="line"><span class="lineno">  288</span>        <span class="comment">// Found one.</span></div>
<div class="line"><span class="lineno">  289</span>        <a class="code hl_variable" href="../../de/d48/structproc.html#acf2bdf54d1f957ccbcdc987007029944">pid</a> = p-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#acf2bdf54d1f957ccbcdc987007029944">pid</a>;</div>
<div class="line"><span class="lineno">  290</span>        <a class="code hl_function" href="../../d5/d64/defs_8h.html#ae79d6a7d0901b7c081cfded3f916d5bd">kfree</a>(p-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#a9f556df98482bff6c9216013d7581ae4">kstack</a>);</div>
<div class="line"><span class="lineno">  291</span>        p-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#a9f556df98482bff6c9216013d7581ae4">kstack</a> = 0;</div>
<div class="line"><span class="lineno">  292</span>        <a class="code hl_function" href="../../d5/d64/defs_8h.html#af24cf1756e19afd8be8c95d02262cf3a">freevm</a>(p-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#ad430afc653e9eb6cee33954d5545b79d">pgdir</a>);</div>
<div class="line"><span class="lineno">  293</span>        p-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#acf2bdf54d1f957ccbcdc987007029944">pid</a> = 0;</div>
<div class="line"><span class="lineno">  294</span>        p-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#a14ea8849701ffafba4d142725de154d4">parent</a> = 0;</div>
<div class="line"><span class="lineno">  295</span>        p-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#ac04af53e17d24b90c3cbfab56d658d62">name</a>[0] = 0;</div>
<div class="line"><span class="lineno">  296</span>        p-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#afb4f94a3f4df9a835dbb41b0c26660a4">killed</a> = 0;</div>
<div class="line"><span class="lineno">  297</span>        p-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#a0f2fe91548a1382672ae26e29ca9e736">state</a> = <a class="code hl_enumvalue" href="../../df/d03/proc_8h.html#aa1ced7d2b60040fded3fa873d0c03ba7aa09b651ef326a9d8efcee5cc5b720ab4">UNUSED</a>;</div>
<div class="line"><span class="lineno">  298</span>        <a class="code hl_function" href="../../d5/d64/defs_8h.html#a4f8616948f3dbce65671f666eed1d669">release</a>(&amp;<a class="code hl_variable" href="../../d3/dda/proc_8c.html#addf39d613ca9a58e7e6080a2e454421a">ptable</a>.lock);</div>
<div class="line"><span class="lineno">  299</span>        <span class="keywordflow">return</span> <a class="code hl_variable" href="../../de/d48/structproc.html#acf2bdf54d1f957ccbcdc987007029944">pid</a>;</div>
<div class="line"><span class="lineno">  300</span>      }</div>
<div class="line"><span class="lineno">  301</span>    }</div>
<div class="line"><span class="lineno">  302</span> </div>
<div class="line"><span class="lineno">  303</span>    <span class="comment">// No point waiting if we don&#39;t have any children.</span></div>
<div class="line"><span class="lineno">  304</span>    <span class="keywordflow">if</span>(!havekids || curproc-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#afb4f94a3f4df9a835dbb41b0c26660a4">killed</a>){</div>
<div class="line"><span class="lineno">  305</span>      <a class="code hl_function" href="../../d5/d64/defs_8h.html#a4f8616948f3dbce65671f666eed1d669">release</a>(&amp;<a class="code hl_variable" href="../../d3/dda/proc_8c.html#addf39d613ca9a58e7e6080a2e454421a">ptable</a>.lock);</div>
<div class="line"><span class="lineno">  306</span>      <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  307</span>    }</div>
<div class="line"><span class="lineno">  308</span> </div>
<div class="line"><span class="lineno">  309</span>    <span class="comment">// Wait for children to exit.  (See wakeup1 call in proc_exit.)</span></div>
<div class="line"><span class="lineno">  310</span>    <a class="code hl_function" href="../../d3/dda/proc_8c.html#ae70cc0370342e46f6db3bec367232457">sleep</a>(curproc, &amp;<a class="code hl_variable" href="../../d3/dda/proc_8c.html#addf39d613ca9a58e7e6080a2e454421a">ptable</a>.lock);  <span class="comment">//DOC: wait-sleep</span></div>
<div class="line"><span class="lineno">  311</span>  }</div>
<div class="line"><span class="lineno">  312</span>}</div>
<div class="ttc" id="aproc_8c_html_ae70cc0370342e46f6db3bec367232457"><div class="ttname"><a href="../../d3/dda/proc_8c.html#ae70cc0370342e46f6db3bec367232457">sleep</a></div><div class="ttdeci">void sleep(void *chan, struct spinlock *lk)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dda/proc_8c_source.html#l00418">proc.c:418</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_af6f31822f7e737b4e414bdac1ccb59a4_cgraph.png" border="0" usemap="#ad5/d64/defs_8h_af6f31822f7e737b4e414bdac1ccb59a4_cgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_af6f31822f7e737b4e414bdac1ccb59a4_cgraph" id="ad5/d64/defs_8h_af6f31822f7e737b4e414bdac1ccb59a4_cgraph">
<area shape="rect" title=" " alt="" coords="5,246,52,271"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="484,449,548,474"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="1208,423,1272,449"/>
<area shape="rect" href="../../de/de9/vm_8c.html#aa883924e2f068c520b695cdc168e1603" title=" " alt="" coords="100,170,163,195"/>
<area shape="rect" href="../../d4/def/kalloc_8c.html#aced59ecf8411235f6dffc065236711a5" title=" " alt="" coords="361,145,411,170"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a41af0935f3989aae450cf8988cd9c3a9" title=" " alt="" coords="353,1006,419,1031"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ae70cc0370342e46f6db3bec367232457" title=" " alt="" coords="105,373,158,398"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="607,398,699,423"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="621,715,684,741"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="857,803,919,829"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="967,449,1020,474"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="747,803,809,829"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="1320,753,1376,778"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="1085,753,1143,778"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="1085,398,1143,423"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="1068,499,1160,525"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a6d3019ea15a9bfdc5131ae97f3623c49" title=" " alt="" coords="211,195,299,221"/>
<area shape="rect" href="../../db/d8a/ulib_8c.html#aa9cdc2409c15ccd5ee3b2031576f4093" title=" " alt="" coords="481,145,551,170"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad788da91743c333b5bed7c4a0dd12365" title=" " alt="" coords="226,854,283,879"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a9fa00b0be5d3c4781048861e2506eb63" title=" " alt="" coords="347,753,425,778"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a1d9e7047d3dfb57809a2541d8387705e" title=" " alt="" coords="487,854,545,879"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a02ca0670bc1fe12e38453082631ff360" title=" " alt="" coords="473,702,559,727"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a87c90f0ab2a1b11c2b55f4e483bb8493" title=" " alt="" coords="610,905,695,930"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_af6f31822f7e737b4e414bdac1ccb59a4_icgraph.png" border="0" usemap="#ad5/d64/defs_8h_af6f31822f7e737b4e414bdac1ccb59a4_icgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_af6f31822f7e737b4e414bdac1ccb59a4_icgraph" id="ad5/d64/defs_8h_af6f31822f7e737b4e414bdac1ccb59a4_icgraph">
<area shape="rect" title=" " alt="" coords="727,785,773,810"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#ac5b5d4517586be6396b4f3b37445945a" title=" " alt="" coords="225,393,303,418"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a5a12affe4fdfaa172d85da9a6adf98d2" title=" " alt="" coords="225,886,303,911"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a425a0efe4f459decf4b5ea14517ab3cf" title=" " alt="" coords="217,935,311,961"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a8faab06cc4d48335076b368f02709ee2" title=" " alt="" coords="221,985,307,1010"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a330ed2370fe27045b8bec1eb0bd7818f" title=" " alt="" coords="231,1034,297,1059"/>
<area shape="rect" href="../../d5/de1/forktest_8c.html#a0ef8ccf57bc8c491407ec513b234f83c" title=" " alt="" coords="231,1187,297,1213"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a77a4432bc67dfb513f1c1d698c2c4ea6" title=" " alt="" coords="230,1083,298,1109"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a1740f29f4ce6d3060fd79a9312edc315" title=" " alt="" coords="226,442,302,467"/>
<area shape="rect" href="../../d0/d87/foo_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="239,1134,289,1159"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#aa1c6e6e76813ccb29a29bb119dba668a" title=" " alt="" coords="616,557,667,582"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#aedbeff6afe5d4e22330c7e6b5e6df893" title=" " alt="" coords="104,69,169,94"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a3208ed001a225f5d9ea3fb37f46810c7" title=" " alt="" coords="217,491,311,517"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a16ae754fb9c5622d44d0c3ce62ad7c49" title=" " alt="" coords="237,541,291,566"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a026b8c4ab2cb9af17e1c20d533981604" title=" " alt="" coords="229,590,299,615"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a06636ed0cda58c748d68e82d33d1afce" title=" " alt="" coords="229,639,299,665"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a02e1ca3f4db5f4bf8a683a0b7c18cc43" title=" " alt="" coords="228,689,300,714"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a6888f9f6d973f81f73091d1530ad212b" title=" " alt="" coords="245,787,283,813"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a98d8496ecb698b9400831f2718d805c3" title=" " alt="" coords="219,837,309,862"/>
<area shape="rect" href="../../dd/d35/sysproc_8c.html#ad202e06addda05ba6fe60f05d3f61913" title=" " alt="" coords="604,1241,679,1266"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="111,665,162,690"/>
<area shape="rect" href="../../d5/de1/forktest_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title=" " alt="" coords="111,1187,162,1213"/>
<area shape="rect" href="../../de/de9/vm_8c.html#afea0f0a82a9f9c7aae26f90b5e0836c6" title=" " alt="" coords="481,177,556,202"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a1b57bfa0091c9be3ccc16dbb85ce3acf" title=" " alt="" coords="481,582,556,607"/>
<area shape="rect" href="../../de/de9/vm_8c.html#ac96c231d4053eaf4322c27d1f2cd9d49" title=" " alt="" coords="487,481,551,506"/>
<area shape="rect" href="../../df/dc9/exec_8c.html#ace32454ed0d37834dcb1cb4f8b727e6e" title=" " alt="" coords="371,127,421,153"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a9c16214741f4fcd088e5eea468709328" title=" " alt="" coords="359,177,433,202"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a6f94e3b215d069b5419e87bafe80799a" title=" " alt="" coords="228,242,300,267"/>
<area shape="rect" href="../../d8/d60/init_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title=" " alt="" coords="239,143,289,169"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#aeaa813ddeb6a5fac3c45714c7351c526" title=" " alt="" coords="225,94,303,119"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title=" " alt="" coords="5,143,56,169"/>
<area shape="rect" href="../../dd/d35/sysproc_8c.html#ab21d46be776cf6075a997af525a1a628" title=" " alt="" coords="227,291,301,317"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#acd2e1ded4bb6fce4500438bf928330f4" title=" " alt="" coords="374,734,418,759"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#a7ae98824a008ffbc5506060227b6faa0" title=" " alt="" coords="239,193,289,218"/>
<area shape="rect" href="../../dd/d35/sysproc_8c.html#a3b05102e512b34446a54334f916ba5cd" title=" " alt="" coords="228,738,300,763"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a81c8a6a0cae413bc81aa223f7f7b7205" title=" " alt="" coords="364,481,428,506"/>
</map>
</div>

</div>
</div>
<a id="a245b56417239f499389b2e806bd99254" name="a245b56417239f499389b2e806bd99254"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a245b56417239f499389b2e806bd99254">&#9670;&#160;</a></span>wakeup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void wakeup </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>chan</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/dda/proc_8c_source.html#l00469">469</a> of file <a class="el" href="../../d3/dda/proc_8c_source.html">proc.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  470</span>{</div>
<div class="line"><span class="lineno">  471</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#afe4ef8638f1ecb962a6e67fb086ee3b8">acquire</a>(&amp;<a class="code hl_variable" href="../../d3/dda/proc_8c.html#addf39d613ca9a58e7e6080a2e454421a">ptable</a>.lock);</div>
<div class="line"><span class="lineno">  472</span>  wakeup1(chan);</div>
<div class="line"><span class="lineno">  473</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#a4f8616948f3dbce65671f666eed1d669">release</a>(&amp;<a class="code hl_variable" href="../../d3/dda/proc_8c.html#addf39d613ca9a58e7e6080a2e454421a">ptable</a>.lock);</div>
<div class="line"><span class="lineno">  474</span>}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_a245b56417239f499389b2e806bd99254_cgraph.png" border="0" usemap="#ad5/d64/defs_8h_a245b56417239f499389b2e806bd99254_cgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_a245b56417239f499389b2e806bd99254_cgraph" id="ad5/d64/defs_8h_a245b56417239f499389b2e806bd99254_cgraph">
<area shape="rect" title=" " alt="" coords="5,119,72,145"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="120,246,184,271"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="833,94,897,119"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="232,347,324,373"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="247,246,309,271"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="483,347,544,373"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="592,195,645,221"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="372,347,435,373"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="945,270,1001,295"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="710,346,769,371"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="710,94,769,119"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="693,143,785,169"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_a245b56417239f499389b2e806bd99254_icgraph.png" border="0" usemap="#ad5/d64/defs_8h_a245b56417239f499389b2e806bd99254_icgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_a245b56417239f499389b2e806bd99254_icgraph" id="ad5/d64/defs_8h_a245b56417239f499389b2e806bd99254_icgraph">
<area shape="rect" title=" " alt="" coords="775,492,841,517"/>
<area shape="rect" href="../../d0/d56/console_8c.html#aad3d6ca39f23bb6d2686d2967e415193" title=" " alt="" coords="374,55,459,80"/>
<area shape="rect" href="../../dc/d6f/trap_8c.html#a372d166e36c086c91e5f5d81e5fead3a" title=" " alt="" coords="129,9,173,35"/>
<area shape="rect" href="../../d7/df8/log_8c.html#ac0f12be0ca0de555e60b27b06a57a65b" title=" " alt="" coords="515,467,579,492"/>
<area shape="rect" href="../../da/d9b/memide_8c.html#a709693afdb9b89d848e684e7acde1f8f" title=" " alt="" coords="651,281,708,307"/>
<area shape="rect" href="../../d1/d47/pipe_8c.html#a48642f54734698f6f881ee07723292cb" title=" " alt="" coords="641,517,718,543"/>
<area shape="rect" href="../../d1/d47/pipe_8c.html#ad4cce6144039b615d139f8660c60293a" title=" " alt="" coords="644,804,715,829"/>
<area shape="rect" href="../../d1/d47/pipe_8c.html#acfca0fab7d2c0c0dcc56359c8febe14a" title=" " alt="" coords="509,767,584,792"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#aa997067c2c9bfef15af6fa0a10c20f4a" title=" " alt="" coords="632,629,727,655"/>
<area shape="rect" href="../../dc/da9/kbd_8c.html#af3d6113fa152781400e1e0e728c55e54" title=" " alt="" coords="254,5,315,31"/>
<area shape="rect" href="../../d1/d87/uart_8c.html#aa64047002b0e84e2611ebf7dc46b7c99" title=" " alt="" coords="253,55,316,80"/>
<area shape="rect" href="../../df/dc9/exec_8c.html#ace32454ed0d37834dcb1cb4f8b727e6e" title=" " alt="" coords="259,207,310,232"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#aaf98ef7cdde3a0dfb2e49919de3298b1" title=" " alt="" coords="263,623,306,648"/>
<area shape="rect" href="../../d6/d13/file_8c.html#ae557c81ab89c24219146144bb6adaa2c" title=" " alt="" coords="381,517,452,543"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a74e45efc661ca17c068bc283b3842e6d" title=" " alt="" coords="245,672,324,697"/>
<area shape="rect" href="../../d6/d13/file_8c.html#ab8de757a0a9f58dcc6511ea5e46ebb88" title=" " alt="" coords="383,769,450,795"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#ad1c5f8693cb35b9605fee09eebdda640" title=" " alt="" coords="377,668,456,693"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a759600870314007ac558871239122fb7" title=" " alt="" coords="381,567,452,592"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a057e5bce2de7a87ebfd2dc33967bca4a" title=" " alt="" coords="375,216,458,241"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a25697aa3d828b5878d38170d724adb27" title=" " alt="" coords="372,265,461,291"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#ae1e58ee11d41f643929520d8c1640da7" title=" " alt="" coords="375,315,459,340"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#ac5b5d4517586be6396b4f3b37445945a" title=" " alt="" coords="111,157,190,183"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a6f94e3b215d069b5419e87bafe80799a" title=" " alt="" coords="115,207,187,232"/>
<area shape="rect" href="../../d8/d60/init_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title=" " alt="" coords="125,59,176,84"/>
<area shape="rect" href="../../dd/da3/sh_8c.html#aedbeff6afe5d4e22330c7e6b5e6df893" title=" " alt="" coords="118,280,183,305"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#aeaa813ddeb6a5fac3c45714c7351c526" title=" " alt="" coords="111,108,190,133"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a77cc2edce6e78f22dd9eb377462762f2" title=" " alt="" coords="116,1220,185,1245"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#aa0d46fcb43667c805b84ea7e1ff6100a" title=" " alt="" coords="124,1269,177,1295"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a86fe524d99d69c18a335512cf3405b31" title=" " alt="" coords="123,329,179,355"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a57e55b2d0161d62bb99765ca3de43e35" title=" " alt="" coords="117,379,184,404"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a0b0ff95e564df3c3e8fc977226b75de7" title=" " alt="" coords="118,428,183,453"/>
<area shape="rect" href="../../d1/d8f/cat_8c.html#a90a33618884bcf5e892297879bc016ff" title=" " alt="" coords="131,529,171,555"/>
<area shape="rect" href="../../d1/d8f/cat_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="5,504,56,529"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a5a12affe4fdfaa172d85da9a6adf98d2" title=" " alt="" coords="111,579,190,604"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a425a0efe4f459decf4b5ea14517ab3cf" title=" " alt="" coords="104,628,197,653"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#aedd6d3f148dd5c99b47900215c1ac43f" title=" " alt="" coords="124,677,177,703"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a8db9f9a2634bab29096bab0b8bc6945c" title=" " alt="" coords="121,727,180,752"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a8faab06cc4d48335076b368f02709ee2" title=" " alt="" coords="107,776,194,801"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a330ed2370fe27045b8bec1eb0bd7818f" title=" " alt="" coords="117,825,184,851"/>
<area shape="rect" href="../../d5/de1/forktest_8c.html#a0ef8ccf57bc8c491407ec513b234f83c" title=" " alt="" coords="117,875,184,900"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a77a4432bc67dfb513f1c1d698c2c4ea6" title=" " alt="" coords="117,924,185,949"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#abf4af50e65630225208fef177e267efb" title=" " alt="" coords="116,973,185,999"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#ac9fe56d8f6e4ed1c9677b06cb7b325e6" title=" " alt="" coords="118,1023,183,1048"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a267227083b00d0cc3141b34f5152ae04" title=" " alt="" coords="131,1072,171,1097"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a4eeee588d4689a58fc140a7d5d7b0608" title=" " alt="" coords="119,1121,183,1147"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#a1740f29f4ce6d3060fd79a9312edc315" title=" " alt="" coords="113,1171,189,1196"/>
<area shape="rect" href="../../d6/d13/file_8c.html#a1dc8c87c7e48bdaaf98e9c7047928f29" title=" " alt="" coords="385,819,449,844"/>
<area shape="rect" href="../../dc/de6/bio_8c.html#ab5335aeb503731104314321a78a6d727" title=" " alt="" coords="518,717,575,743"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#ab3c447f135c68e4c3c1f8d5866f6e77b" title=" " alt="" coords="525,617,568,643"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#ae4e29916219b9293b37f9c34220694fe" title=" " alt="" coords="515,668,578,693"/>
</map>
</div>

</div>
</div>
<a id="a515876d4653cefef4732806ef7f2833f" name="a515876d4653cefef4732806ef7f2833f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a515876d4653cefef4732806ef7f2833f">&#9670;&#160;</a></span>writei()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int writei </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d0/df8/structinode.html">inode</a> *&#160;</td>
          <td class="paramname"><em>ip</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/d49/types_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td>
          <td class="paramname"><em>off</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/d49/types_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td>
          <td class="paramname"><em>n</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d2/d5a/fs_8c_source.html#l00482">482</a> of file <a class="el" href="../../d2/d5a/fs_8c_source.html">fs.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  483</span>{</div>
<div class="line"><span class="lineno">  484</span>  <a class="code hl_typedef" href="../../d9/d49/types_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> tot, m;</div>
<div class="line"><span class="lineno">  485</span>  <span class="keyword">struct </span><a class="code hl_struct" href="../../d9/dd0/structbuf.html">buf</a> *bp;</div>
<div class="line"><span class="lineno">  486</span> </div>
<div class="line"><span class="lineno">  487</span>  <span class="keywordflow">if</span>(ip-&gt;<a class="code hl_variable" href="../../d0/df8/structinode.html#a8d74bec2898785c057111c328d23fda2">type</a> == <a class="code hl_define" href="../../d2/d1b/stat_8h.html#a62b045a3e4fdf204bdddda0f3fc3d8c4">T_DEV</a>){</div>
<div class="line"><span class="lineno">  488</span>    <span class="keywordflow">if</span>(ip-&gt;<a class="code hl_variable" href="../../d0/df8/structinode.html#a34af7242018a977dace5730683850875">major</a> &lt; 0 || ip-&gt;<a class="code hl_variable" href="../../d0/df8/structinode.html#a34af7242018a977dace5730683850875">major</a> &gt;= <a class="code hl_define" href="../../d5/d33/param_8h.html#aa564a41c8409694da49b0badf2bb2853">NDEV</a> || !<a class="code hl_struct" href="../../de/d6a/structdevsw.html">devsw</a>[ip-&gt;<a class="code hl_variable" href="../../d0/df8/structinode.html#a34af7242018a977dace5730683850875">major</a>].<a class="code hl_variable" href="../../de/d6a/structdevsw.html#a87fd7af6c9a6fb8663fc206be7a233d4">write</a>)</div>
<div class="line"><span class="lineno">  489</span>      <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  490</span>    <span class="keywordflow">return</span> <a class="code hl_struct" href="../../de/d6a/structdevsw.html">devsw</a>[ip-&gt;<a class="code hl_variable" href="../../d0/df8/structinode.html#a34af7242018a977dace5730683850875">major</a>].<a class="code hl_variable" href="../../de/d6a/structdevsw.html#a87fd7af6c9a6fb8663fc206be7a233d4">write</a>(ip, src, n);</div>
<div class="line"><span class="lineno">  491</span>  }</div>
<div class="line"><span class="lineno">  492</span> </div>
<div class="line"><span class="lineno">  493</span>  <span class="keywordflow">if</span>(off &gt; ip-&gt;<a class="code hl_variable" href="../../d0/df8/structinode.html#a918af769c48a8ca8afac057bf83d12de">size</a> || off + n &lt; off)</div>
<div class="line"><span class="lineno">  494</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  495</span>  <span class="keywordflow">if</span>(off + n &gt; <a class="code hl_define" href="../../df/d26/fs_8h.html#a714b2485a6dd312e37226e1f833728a9">MAXFILE</a>*<a class="code hl_define" href="../../df/d26/fs_8h.html#a403cf3149c084cea115b85c90721039a">BSIZE</a>)</div>
<div class="line"><span class="lineno">  496</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  497</span> </div>
<div class="line"><span class="lineno">  498</span>  <span class="keywordflow">for</span>(tot=0; tot&lt;n; tot+=m, off+=m, src+=m){</div>
<div class="line"><span class="lineno">  499</span>    bp = <a class="code hl_function" href="../../dc/de6/bio_8c.html#a30b8d2ef2300ed8e3d879a428fe39898">bread</a>(ip-&gt;<a class="code hl_variable" href="../../d0/df8/structinode.html#a121742a89c4531f03a7de1613d5be605">dev</a>, bmap(ip, off/<a class="code hl_define" href="../../df/d26/fs_8h.html#a403cf3149c084cea115b85c90721039a">BSIZE</a>));</div>
<div class="line"><span class="lineno">  500</span>    m = <a class="code hl_define" href="../../d2/d5a/fs_8c.html#ac6afabdc09a49a433ee19d8a9486056d">min</a>(n - tot, <a class="code hl_define" href="../../df/d26/fs_8h.html#a403cf3149c084cea115b85c90721039a">BSIZE</a> - off%<a class="code hl_define" href="../../df/d26/fs_8h.html#a403cf3149c084cea115b85c90721039a">BSIZE</a>);</div>
<div class="line"><span class="lineno">  501</span>    <a class="code hl_function" href="../../d5/d64/defs_8h.html#ac152fff34fe03e497d35b1d4c47f1445">memmove</a>(bp-&gt;<a class="code hl_variable" href="../../d9/dd0/structbuf.html#ab0ec38784ab94ed35e575cf6d33912d2">data</a> + off%<a class="code hl_define" href="../../df/d26/fs_8h.html#a403cf3149c084cea115b85c90721039a">BSIZE</a>, src, m);</div>
<div class="line"><span class="lineno">  502</span>    <a class="code hl_function" href="../../d5/d64/defs_8h.html#a270d0050dc50965f4f851717841ad33c">log_write</a>(bp);</div>
<div class="line"><span class="lineno">  503</span>    <a class="code hl_function" href="../../dc/de6/bio_8c.html#ab5335aeb503731104314321a78a6d727">brelse</a>(bp);</div>
<div class="line"><span class="lineno">  504</span>  }</div>
<div class="line"><span class="lineno">  505</span> </div>
<div class="line"><span class="lineno">  506</span>  <span class="keywordflow">if</span>(n &gt; 0 &amp;&amp; off &gt; ip-&gt;<a class="code hl_variable" href="../../d0/df8/structinode.html#a918af769c48a8ca8afac057bf83d12de">size</a>){</div>
<div class="line"><span class="lineno">  507</span>    ip-&gt;<a class="code hl_variable" href="../../d0/df8/structinode.html#a918af769c48a8ca8afac057bf83d12de">size</a> = off;</div>
<div class="line"><span class="lineno">  508</span>    <a class="code hl_function" href="../../d2/d5a/fs_8c.html#a7220afa8e5f4bea540eb95879ea7df6e">iupdate</a>(ip);</div>
<div class="line"><span class="lineno">  509</span>  }</div>
<div class="line"><span class="lineno">  510</span>  <span class="keywordflow">return</span> n;</div>
<div class="line"><span class="lineno">  511</span>}</div>
<div class="ttc" id="afs_8h_html_a714b2485a6dd312e37226e1f833728a9"><div class="ttname"><a href="../../df/d26/fs_8h.html#a714b2485a6dd312e37226e1f833728a9">MAXFILE</a></div><div class="ttdeci">#define MAXFILE</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d26/fs_8h_source.html#l00026">fs.h:26</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_a515876d4653cefef4732806ef7f2833f_cgraph.png" border="0" usemap="#ad5/d64/defs_8h_a515876d4653cefef4732806ef7f2833f_cgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_a515876d4653cefef4732806ef7f2833f_cgraph" id="ad5/d64/defs_8h_a515876d4653cefef4732806ef7f2833f_cgraph">
<area shape="rect" title=" " alt="" coords="5,1082,59,1107"/>
<area shape="rect" href="../../dc/de6/bio_8c.html#a30b8d2ef2300ed8e3d879a428fe39898" title=" " alt="" coords="219,955,273,981"/>
<area shape="rect" href="../../d1/db0/string_8c.html#a07f97e2ed1ce37955192d52de8f4911f" title=" " alt="" coords="423,1209,505,1234"/>
<area shape="rect" href="../../dc/de6/bio_8c.html#ab5335aeb503731104314321a78a6d727" title=" " alt="" coords="435,1057,493,1082"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a7220afa8e5f4bea540eb95879ea7df6e" title=" " alt="" coords="107,1082,171,1107"/>
<area shape="rect" href="../../d7/df8/log_8c.html#a7eacb0fbebe5ce4c7d3ddea15908b13d" title=" " alt="" coords="706,1207,781,1233"/>
<area shape="rect" href="../../da/d9b/memide_8c.html#a7f36b008f02088c86f76e98e05b55af5" title=" " alt="" coords="321,905,375,930"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="849,778,913,803"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="1332,753,1385,778"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="1573,1006,1637,1031"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#a6fdbe54cbecd8fc67d74793b27adcf05" title=" " alt="" coords="696,803,791,829"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ae70cc0370342e46f6db3bec367232457" title=" " alt="" coords="437,677,491,702"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="972,854,1064,879"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="987,474,1049,499"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="1223,386,1284,411"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="1112,297,1175,322"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="1685,322,1741,347"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="1450,398,1509,423"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="1450,854,1509,879"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="1433,753,1525,778"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a41af0935f3989aae450cf8988cd9c3a9" title=" " alt="" coords="985,119,1051,145"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad788da91743c333b5bed7c4a0dd12365" title=" " alt="" coords="572,398,629,423"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a9fa00b0be5d3c4781048861e2506eb63" title=" " alt="" coords="704,347,783,373"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a1d9e7047d3dfb57809a2541d8387705e" title=" " alt="" coords="853,195,910,221"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a02ca0670bc1fe12e38453082631ff360" title=" " alt="" coords="839,347,924,373"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a87c90f0ab2a1b11c2b55f4e483bb8493" title=" " alt="" coords="975,246,1061,271"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#aa997067c2c9bfef15af6fa0a10c20f4a" title=" " alt="" coords="553,1107,648,1133"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a4a34d9f03e436cfa09b88f735f6ee952" title=" " alt="" coords="710,1158,777,1183"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_a515876d4653cefef4732806ef7f2833f_icgraph.png" border="0" usemap="#ad5/d64/defs_8h_a515876d4653cefef4732806ef7f2833f_icgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_a515876d4653cefef4732806ef7f2833f_icgraph" id="ad5/d64/defs_8h_a515876d4653cefef4732806ef7f2833f_icgraph">
<area shape="rect" title=" " alt="" coords="264,55,317,80"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a69a135a0e8a06d9f306d77ebc0c1f7a0" title=" " alt="" coords="146,5,202,31"/>
<area shape="rect" href="../../d6/d13/file_8c.html#ab8de757a0a9f58dcc6511ea5e46ebb88" title=" " alt="" coords="141,55,207,80"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#ae1e58ee11d41f643929520d8c1640da7" title=" " alt="" coords="132,104,216,129"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a759600870314007ac558871239122fb7" title=" " alt="" coords="9,5,80,31"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a687d939a9e4792af15db96f2c2f34378" title=" " alt="" coords="5,55,84,80"/>
</map>
</div>

</div>
</div>
<a id="a7cb51f5c2b5cad3766f19eb69c92793b" name="a7cb51f5c2b5cad3766f19eb69c92793b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7cb51f5c2b5cad3766f19eb69c92793b">&#9670;&#160;</a></span>yield()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void yield </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/dda/proc_8c_source.html#l00386">386</a> of file <a class="el" href="../../d3/dda/proc_8c_source.html">proc.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  387</span>{</div>
<div class="line"><span class="lineno">  388</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#afe4ef8638f1ecb962a6e67fb086ee3b8">acquire</a>(&amp;<a class="code hl_variable" href="../../d3/dda/proc_8c.html#addf39d613ca9a58e7e6080a2e454421a">ptable</a>.lock);  <span class="comment">//DOC: yieldlock</span></div>
<div class="line"><span class="lineno">  389</span>  <a class="code hl_function" href="../../d3/dda/proc_8c.html#a41af0935f3989aae450cf8988cd9c3a9">myproc</a>()-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#a0f2fe91548a1382672ae26e29ca9e736">state</a> = <a class="code hl_enumvalue" href="../../df/d03/proc_8h.html#aa1ced7d2b60040fded3fa873d0c03ba7a269b90433e40460a2c0044a0b3e15694">RUNNABLE</a>;</div>
<div class="line"><span class="lineno">  390</span>  <a class="code hl_function" href="../../d3/dda/proc_8c.html#ad788da91743c333b5bed7c4a0dd12365">sched</a>();</div>
<div class="line"><span class="lineno">  391</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#a4f8616948f3dbce65671f666eed1d669">release</a>(&amp;<a class="code hl_variable" href="../../d3/dda/proc_8c.html#addf39d613ca9a58e7e6080a2e454421a">ptable</a>.lock);</div>
<div class="line"><span class="lineno">  392</span>}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_a7cb51f5c2b5cad3766f19eb69c92793b_cgraph.png" border="0" usemap="#ad5/d64/defs_8h_a7cb51f5c2b5cad3766f19eb69c92793b_cgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_a7cb51f5c2b5cad3766f19eb69c92793b_cgraph" id="ad5/d64/defs_8h_a7cb51f5c2b5cad3766f19eb69c92793b_cgraph">
<area shape="rect" title=" " alt="" coords="5,423,55,449"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="345,323,409,349"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="1069,474,1133,499"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a41af0935f3989aae450cf8988cd9c3a9" title=" " alt="" coords="481,145,547,170"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad788da91743c333b5bed7c4a0dd12365" title=" " alt="" coords="103,474,160,499"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="468,297,560,322"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="483,95,545,121"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="719,297,780,322"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="828,499,881,525"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="608,246,671,271"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="1181,347,1237,373"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="946,347,1005,373"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="946,449,1005,474"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="929,550,1021,575"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a9fa00b0be5d3c4781048861e2506eb63" title=" " alt="" coords="208,474,287,499"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a1d9e7047d3dfb57809a2541d8387705e" title=" " alt="" coords="349,601,406,626"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a02ca0670bc1fe12e38453082631ff360" title=" " alt="" coords="335,449,420,474"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a87c90f0ab2a1b11c2b55f4e483bb8493" title=" " alt="" coords="471,499,557,525"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d64/defs_8h_a7cb51f5c2b5cad3766f19eb69c92793b_icgraph.png" border="0" usemap="#ad5/d64/defs_8h_a7cb51f5c2b5cad3766f19eb69c92793b_icgraph" alt=""/></div>
<map name="ad5/d64/defs_8h_a7cb51f5c2b5cad3766f19eb69c92793b_icgraph" id="ad5/d64/defs_8h_a7cb51f5c2b5cad3766f19eb69c92793b_icgraph">
<area shape="rect" title=" " alt="" coords="97,5,147,31"/>
<area shape="rect" href="../../dc/d6f/trap_8c.html#a372d166e36c086c91e5f5d81e5fead3a" title=" " alt="" coords="5,5,49,31"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a619ae379337e3cb2397ee0b6b4fd8d6b" name="a619ae379337e3cb2397ee0b6b4fd8d6b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a619ae379337e3cb2397ee0b6b4fd8d6b">&#9670;&#160;</a></span>ioapicid</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/d49/types_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a> ioapicid</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d06/mp_8c_source.html#l00016">16</a> of file <a class="el" href="../../dd/d06/mp_8c_source.html">mp.c</a>.</p>

</div>
</div>
<a id="a46b52bd30030451d1b65291b77ba05d5" name="a46b52bd30030451d1b65291b77ba05d5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a46b52bd30030451d1b65291b77ba05d5">&#9670;&#160;</a></span>ismp</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int ismp</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a4029f3e2439d5912f93543b8addd10ec" name="a4029f3e2439d5912f93543b8addd10ec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4029f3e2439d5912f93543b8addd10ec">&#9670;&#160;</a></span>lapic</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">volatile <a class="el" href="../../d9/d49/types_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>* lapic</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/df6/lapic_8c_source.html#l00044">44</a> of file <a class="el" href="../../dc/df6/lapic_8c_source.html">lapic.c</a>.</p>

</div>
</div>
<a id="a7fcd6915876e066781399d7b00f1b1f0" name="a7fcd6915876e066781399d7b00f1b1f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7fcd6915876e066781399d7b00f1b1f0">&#9670;&#160;</a></span>ticks</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/d49/types_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> ticks</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d6f/trap_8c_source.html#l00015">15</a> of file <a class="el" href="../../dc/d6f/trap_8c_source.html">trap.c</a>.</p>

</div>
</div>
<a id="a094a4703b62095e2fa469fab3ffea5c7" name="a094a4703b62095e2fa469fab3ffea5c7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a094a4703b62095e2fa469fab3ffea5c7">&#9670;&#160;</a></span>tickslock</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d1/d08/structspinlock.html">spinlock</a> tickslock</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d6f/trap_8c_source.html#l00014">14</a> of file <a class="el" href="../../dc/d6f/trap_8c_source.html">trap.c</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6
</small></address>
</body>
</html>
