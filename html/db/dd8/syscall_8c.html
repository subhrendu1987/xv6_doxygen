<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>xv6: syscall.c File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">xv6
   </div>
   <div id="projectbrief">Doxygen documentation for the xv6-public operating system</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">syscall.c File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="../../d9/d49/types_8h_source.html">types.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d64/defs_8h_source.html">defs.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d33/param_8h_source.html">param.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d8/da9/memlayout_8h_source.html">memlayout.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d2/df1/mmu_8h_source.html">mmu.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../df/d03/proc_8h_source.html">proc.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d39/x86_8h_source.html">x86.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../de/ddf/syscall_8h_source.html">syscall.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for syscall.c:</div>
<div class="dyncontent">
<div class="center"><img src="../../db/ddf/syscall_8c__incl.png" border="0" usemap="#asyscall_8c" alt=""/></div>
<map name="asyscall_8c" id="asyscall_8c">
<area shape="rect" title=" " alt="" coords="335,5,410,31"/>
<area shape="rect" href="../../d9/d49/types_8h.html" title=" " alt="" coords="5,79,71,104"/>
<area shape="rect" href="../../d5/d64/defs_8h.html" title=" " alt="" coords="95,79,154,104"/>
<area shape="rect" href="../../d5/d33/param_8h.html" title=" " alt="" coords="178,79,247,104"/>
<area shape="rect" href="../../d8/da9/memlayout_8h.html" title=" " alt="" coords="272,79,369,104"/>
<area shape="rect" href="../../d2/df1/mmu_8h.html" title=" " alt="" coords="393,79,456,104"/>
<area shape="rect" href="../../df/d03/proc_8h.html" title=" " alt="" coords="481,79,539,104"/>
<area shape="rect" href="../../d5/d39/x86_8h.html" title=" " alt="" coords="564,79,619,104"/>
<area shape="rect" href="../../de/ddf/syscall_8h.html" title=" " alt="" coords="643,79,718,104"/>
</map>
</div>
</div>
<p><a href="../../db/dd8/syscall_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a918cadc6c55aa7ac38982659c27a3a75"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/dd8/syscall_8c.html#a918cadc6c55aa7ac38982659c27a3a75">fetchint</a> (<a class="el" href="../../d9/d49/types_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> addr, int *ip)</td></tr>
<tr class="separator:a918cadc6c55aa7ac38982659c27a3a75"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace37b4584713ab6bda44a282a298961f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/dd8/syscall_8c.html#ace37b4584713ab6bda44a282a298961f">fetchstr</a> (<a class="el" href="../../d9/d49/types_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> addr, char **pp)</td></tr>
<tr class="separator:ace37b4584713ab6bda44a282a298961f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade56ef2176f85cd61e7b91b400e7d4d3"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/dd8/syscall_8c.html#ade56ef2176f85cd61e7b91b400e7d4d3">argint</a> (int n, int *ip)</td></tr>
<tr class="separator:ade56ef2176f85cd61e7b91b400e7d4d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ade9205d1f46b759cf93b60513a3421"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/dd8/syscall_8c.html#a6ade9205d1f46b759cf93b60513a3421">argptr</a> (int n, char **pp, int size)</td></tr>
<tr class="separator:a6ade9205d1f46b759cf93b60513a3421"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a662eedd65f3e2165093842b80e3bc024"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/dd8/syscall_8c.html#a662eedd65f3e2165093842b80e3bc024">argstr</a> (int n, char **pp)</td></tr>
<tr class="separator:a662eedd65f3e2165093842b80e3bc024"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1c5f8693cb35b9605fee09eebdda640"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/dd8/syscall_8c.html#ad1c5f8693cb35b9605fee09eebdda640">sys_chdir</a> (void)</td></tr>
<tr class="separator:ad1c5f8693cb35b9605fee09eebdda640"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a32945488fd39bc405757177b37cd2250"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/dd8/syscall_8c.html#a32945488fd39bc405757177b37cd2250">sys_close</a> (void)</td></tr>
<tr class="separator:a32945488fd39bc405757177b37cd2250"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f8b9e2d98e8b444f23a39ae8992feff"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/dd8/syscall_8c.html#a8f8b9e2d98e8b444f23a39ae8992feff">sys_dup</a> (void)</td></tr>
<tr class="separator:a8f8b9e2d98e8b444f23a39ae8992feff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeaa813ddeb6a5fac3c45714c7351c526"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/dd8/syscall_8c.html#aeaa813ddeb6a5fac3c45714c7351c526">sys_exec</a> (void)</td></tr>
<tr class="separator:aeaa813ddeb6a5fac3c45714c7351c526"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee72faa31a0c32b410aba558ef1d59f2"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/dd8/syscall_8c.html#aee72faa31a0c32b410aba558ef1d59f2">sys_exit</a> (void)</td></tr>
<tr class="separator:aee72faa31a0c32b410aba558ef1d59f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b05102e512b34446a54334f916ba5cd"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/dd8/syscall_8c.html#a3b05102e512b34446a54334f916ba5cd">sys_fork</a> (void)</td></tr>
<tr class="separator:a3b05102e512b34446a54334f916ba5cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac243c8f20f5fb2e3e257b5007af2c204"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/dd8/syscall_8c.html#ac243c8f20f5fb2e3e257b5007af2c204">sys_fstat</a> (void)</td></tr>
<tr class="separator:ac243c8f20f5fb2e3e257b5007af2c204"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac81965412a0725574b8c72afda11243e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/dd8/syscall_8c.html#ac81965412a0725574b8c72afda11243e">sys_getpid</a> (void)</td></tr>
<tr class="separator:ac81965412a0725574b8c72afda11243e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad766b54842470b464a6497bb5c514e59"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/dd8/syscall_8c.html#ad766b54842470b464a6497bb5c514e59">sys_kill</a> (void)</td></tr>
<tr class="separator:ad766b54842470b464a6497bb5c514e59"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a759600870314007ac558871239122fb7"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/dd8/syscall_8c.html#a759600870314007ac558871239122fb7">sys_link</a> (void)</td></tr>
<tr class="separator:a759600870314007ac558871239122fb7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a057e5bce2de7a87ebfd2dc33967bca4a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/dd8/syscall_8c.html#a057e5bce2de7a87ebfd2dc33967bca4a">sys_mkdir</a> (void)</td></tr>
<tr class="separator:a057e5bce2de7a87ebfd2dc33967bca4a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a25697aa3d828b5878d38170d724adb27"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/dd8/syscall_8c.html#a25697aa3d828b5878d38170d724adb27">sys_mknod</a> (void)</td></tr>
<tr class="separator:a25697aa3d828b5878d38170d724adb27"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a74e45efc661ca17c068bc283b3842e6d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/dd8/syscall_8c.html#a74e45efc661ca17c068bc283b3842e6d">sys_open</a> (void)</td></tr>
<tr class="separator:a74e45efc661ca17c068bc283b3842e6d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a70db941def46ec25939e6c2d30e399"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/dd8/syscall_8c.html#a9a70db941def46ec25939e6c2d30e399">sys_pipe</a> (void)</td></tr>
<tr class="separator:a9a70db941def46ec25939e6c2d30e399"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a54bf714d9e898cbdcbc061b280bbfae0"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/dd8/syscall_8c.html#a54bf714d9e898cbdcbc061b280bbfae0">sys_read</a> (void)</td></tr>
<tr class="separator:a54bf714d9e898cbdcbc061b280bbfae0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab21d46be776cf6075a997af525a1a628"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/dd8/syscall_8c.html#ab21d46be776cf6075a997af525a1a628">sys_sbrk</a> (void)</td></tr>
<tr class="separator:ab21d46be776cf6075a997af525a1a628"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a59778ec9bfa6b6f2100b43fbba000573"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/dd8/syscall_8c.html#a59778ec9bfa6b6f2100b43fbba000573">sys_sleep</a> (void)</td></tr>
<tr class="separator:a59778ec9bfa6b6f2100b43fbba000573"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae1e58ee11d41f643929520d8c1640da7"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/dd8/syscall_8c.html#ae1e58ee11d41f643929520d8c1640da7">sys_unlink</a> (void)</td></tr>
<tr class="separator:ae1e58ee11d41f643929520d8c1640da7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad202e06addda05ba6fe60f05d3f61913"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/dd8/syscall_8c.html#ad202e06addda05ba6fe60f05d3f61913">sys_wait</a> (void)</td></tr>
<tr class="separator:ad202e06addda05ba6fe60f05d3f61913"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a687d939a9e4792af15db96f2c2f34378"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/dd8/syscall_8c.html#a687d939a9e4792af15db96f2c2f34378">sys_write</a> (void)</td></tr>
<tr class="separator:a687d939a9e4792af15db96f2c2f34378"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf8553903ba8f2776247679d4db0d121"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/dd8/syscall_8c.html#aaf8553903ba8f2776247679d4db0d121">sys_uptime</a> (void)</td></tr>
<tr class="separator:aaf8553903ba8f2776247679d4db0d121"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05c333cee816dc0cb3bf7dbe435dfcef"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/dd8/syscall_8c.html#a05c333cee816dc0cb3bf7dbe435dfcef">sys_halt</a> (void)</td></tr>
<tr class="separator:a05c333cee816dc0cb3bf7dbe435dfcef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9eeed93775248f221437260b177591b8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/dd8/syscall_8c.html#a9eeed93775248f221437260b177591b8">sys_cps</a> (void)</td></tr>
<tr class="separator:a9eeed93775248f221437260b177591b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc90a5b53d06206904d099c62efc1696"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/dd8/syscall_8c.html#abc90a5b53d06206904d099c62efc1696">sys_chpr</a> (void)</td></tr>
<tr class="separator:abc90a5b53d06206904d099c62efc1696"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a65e52d7f297b2757ffbf46e4deccf188"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/dd8/syscall_8c.html#a65e52d7f297b2757ffbf46e4deccf188">sys_getprocs</a> (void)</td></tr>
<tr class="separator:a65e52d7f297b2757ffbf46e4deccf188"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd6bcafe6626fe8e7d00cacdbc3cc4f1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/dd8/syscall_8c.html#acd6bcafe6626fe8e7d00cacdbc3cc4f1">syscall</a> (void)</td></tr>
<tr class="separator:acd6bcafe6626fe8e7d00cacdbc3cc4f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="ade56ef2176f85cd61e7b91b400e7d4d3" name="ade56ef2176f85cd61e7b91b400e7d4d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ade56ef2176f85cd61e7b91b400e7d4d3">&#9670;&#160;</a></span>argint()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int argint </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>ip</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/dd8/syscall_8c_source.html#l00050">50</a> of file <a class="el" href="../../db/dd8/syscall_8c_source.html">syscall.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   51</span>{</div>
<div class="line"><span class="lineno">   52</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="../../db/dd8/syscall_8c.html#a918cadc6c55aa7ac38982659c27a3a75">fetchint</a>((<a class="code hl_function" href="../../d5/d64/defs_8h.html#a3d2327db1e34643f4a9e6a07c8cc62c6">myproc</a>()-&gt;tf-&gt;esp) + 4 + 4*n, ip);</div>
<div class="line"><span class="lineno">   53</span>}</div>
<div class="ttc" id="adefs_8h_html_a3d2327db1e34643f4a9e6a07c8cc62c6"><div class="ttname"><a href="../../d5/d64/defs_8h.html#a3d2327db1e34643f4a9e6a07c8cc62c6">myproc</a></div><div class="ttdeci">struct proc * myproc()</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dda/proc_8c_source.html#l00058">proc.c:58</a></div></div>
<div class="ttc" id="asyscall_8c_html_a918cadc6c55aa7ac38982659c27a3a75"><div class="ttname"><a href="../../db/dd8/syscall_8c.html#a918cadc6c55aa7ac38982659c27a3a75">fetchint</a></div><div class="ttdeci">int fetchint(uint addr, int *ip)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/dd8/syscall_8c_source.html#l00018">syscall.c:18</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../db/dd8/syscall_8c_ade56ef2176f85cd61e7b91b400e7d4d3_cgraph.png" border="0" usemap="#adb/dd8/syscall_8c_ade56ef2176f85cd61e7b91b400e7d4d3_cgraph" alt=""/></div>
<map name="adb/dd8/syscall_8c_ade56ef2176f85cd61e7b91b400e7d4d3_cgraph" id="adb/dd8/syscall_8c_ade56ef2176f85cd61e7b91b400e7d4d3_cgraph">
<area shape="rect" title=" " alt="" coords="5,170,60,195"/>
<area shape="rect" href="../../db/dd8/syscall_8c.html#a918cadc6c55aa7ac38982659c27a3a75" title=" " alt="" coords="108,195,173,221"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a41af0935f3989aae450cf8988cd9c3a9" title=" " alt="" coords="221,170,287,195"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="335,170,396,195"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="941,447,997,473"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="937,69,1000,94"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="562,195,621,221"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="444,297,497,322"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="562,297,621,322"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="545,346,637,371"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="685,233,749,258"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="685,359,749,385"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="797,209,889,234"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="812,258,875,283"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../db/dd8/syscall_8c_ade56ef2176f85cd61e7b91b400e7d4d3_icgraph.png" border="0" usemap="#adb/dd8/syscall_8c_ade56ef2176f85cd61e7b91b400e7d4d3_icgraph" alt=""/></div>
<map name="adb/dd8/syscall_8c_ade56ef2176f85cd61e7b91b400e7d4d3_icgraph" id="adb/dd8/syscall_8c_ade56ef2176f85cd61e7b91b400e7d4d3_icgraph">
<area shape="rect" title=" " alt="" coords="283,375,337,400"/>
<area shape="rect" href="../../db/dd8/syscall_8c.html#a6ade9205d1f46b759cf93b60513a3421" title=" " alt="" coords="167,107,221,132"/>
<area shape="rect" href="../../dd/d35/sysproc_8c.html#a65e52d7f297b2757ffbf46e4deccf188" title=" " alt="" coords="5,5,105,31"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a54bf714d9e898cbdcbc061b280bbfae0" title=" " alt="" coords="18,153,93,179"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a687d939a9e4792af15db96f2c2f34378" title=" " alt="" coords="16,203,95,228"/>
<area shape="rect" href="../../db/dd8/syscall_8c.html#a662eedd65f3e2165093842b80e3bc024" title=" " alt="" coords="167,349,221,375"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#aeaa813ddeb6a5fac3c45714c7351c526" title=" " alt="" coords="16,252,95,277"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a25697aa3d828b5878d38170d724adb27" title=" " alt="" coords="11,499,100,524"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a74e45efc661ca17c068bc283b3842e6d" title=" " alt="" coords="16,548,95,573"/>
<area shape="rect" href="../../dd/d35/sysproc_8c.html#abc90a5b53d06206904d099c62efc1696" title=" " alt="" coords="157,501,231,527"/>
<area shape="rect" href="../../dd/d35/sysproc_8c.html#ad766b54842470b464a6497bb5c514e59" title=" " alt="" coords="161,551,227,576"/>
<area shape="rect" href="../../dd/d35/sysproc_8c.html#ab21d46be776cf6075a997af525a1a628" title=" " alt="" coords="157,600,231,625"/>
<area shape="rect" href="../../dd/d35/sysproc_8c.html#a59778ec9bfa6b6f2100b43fbba000573" title=" " alt="" coords="153,649,235,675"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#ac243c8f20f5fb2e3e257b5007af2c204" title=" " alt="" coords="17,55,93,80"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a9a70db941def46ec25939e6c2d30e399" title=" " alt="" coords="18,104,93,129"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#ad1c5f8693cb35b9605fee09eebdda640" title=" " alt="" coords="16,301,95,327"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a759600870314007ac558871239122fb7" title=" " alt="" coords="20,351,91,376"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a057e5bce2de7a87ebfd2dc33967bca4a" title=" " alt="" coords="14,400,97,425"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#ae1e58ee11d41f643929520d8c1640da7" title=" " alt="" coords="13,449,97,475"/>
</map>
</div>

</div>
</div>
<a id="a6ade9205d1f46b759cf93b60513a3421" name="a6ade9205d1f46b759cf93b60513a3421"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6ade9205d1f46b759cf93b60513a3421">&#9670;&#160;</a></span>argptr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int argptr </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>pp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/dd8/syscall_8c_source.html#l00059">59</a> of file <a class="el" href="../../db/dd8/syscall_8c_source.html">syscall.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   60</span>{</div>
<div class="line"><span class="lineno">   61</span>  <span class="keywordtype">int</span> i;</div>
<div class="line"><span class="lineno">   62</span>  <span class="keyword">struct </span><a class="code hl_struct" href="../../de/d48/structproc.html">proc</a> *curproc = <a class="code hl_function" href="../../d5/d64/defs_8h.html#a3d2327db1e34643f4a9e6a07c8cc62c6">myproc</a>();</div>
<div class="line"><span class="lineno">   63</span> </div>
<div class="line"><span class="lineno">   64</span>  <span class="keywordflow">if</span>(<a class="code hl_function" href="../../db/dd8/syscall_8c.html#ade56ef2176f85cd61e7b91b400e7d4d3">argint</a>(n, &amp;i) &lt; 0)</div>
<div class="line"><span class="lineno">   65</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">   66</span>  <span class="keywordflow">if</span>(size &lt; 0 || (<a class="code hl_typedef" href="../../d9/d49/types_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>)i &gt;= curproc-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#a6e67042bb361124ff287af88efc33e00">sz</a> || (<a class="code hl_typedef" href="../../d9/d49/types_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>)i+size &gt; curproc-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#a6e67042bb361124ff287af88efc33e00">sz</a>)</div>
<div class="line"><span class="lineno">   67</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">   68</span>  *pp = (<span class="keywordtype">char</span>*)i;</div>
<div class="line"><span class="lineno">   69</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">   70</span>}</div>
<div class="ttc" id="astructproc_html"><div class="ttname"><a href="../../de/d48/structproc.html">proc</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d03/proc_8h_source.html#l00038">proc.h:38</a></div></div>
<div class="ttc" id="astructproc_html_a6e67042bb361124ff287af88efc33e00"><div class="ttname"><a href="../../de/d48/structproc.html#a6e67042bb361124ff287af88efc33e00">proc::sz</a></div><div class="ttdeci">uint sz</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d03/proc_8h_source.html#l00039">proc.h:39</a></div></div>
<div class="ttc" id="asyscall_8c_html_ade56ef2176f85cd61e7b91b400e7d4d3"><div class="ttname"><a href="../../db/dd8/syscall_8c.html#ade56ef2176f85cd61e7b91b400e7d4d3">argint</a></div><div class="ttdeci">int argint(int n, int *ip)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/dd8/syscall_8c_source.html#l00050">syscall.c:50</a></div></div>
<div class="ttc" id="atypes_8h_html_a91ad9478d81a7aaf2593e8d9c3d06a14"><div class="ttname"><a href="../../d9/d49/types_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a></div><div class="ttdeci">unsigned int uint</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d49/types_8h_source.html#l00001">types.h:1</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../db/dd8/syscall_8c_a6ade9205d1f46b759cf93b60513a3421_cgraph.png" border="0" usemap="#adb/dd8/syscall_8c_a6ade9205d1f46b759cf93b60513a3421_cgraph" alt=""/></div>
<map name="adb/dd8/syscall_8c_a6ade9205d1f46b759cf93b60513a3421_cgraph" id="adb/dd8/syscall_8c_a6ade9205d1f46b759cf93b60513a3421_cgraph">
<area shape="rect" title=" " alt="" coords="5,145,60,170"/>
<area shape="rect" href="../../db/dd8/syscall_8c.html#ade56ef2176f85cd61e7b91b400e7d4d3" title=" " alt="" coords="108,170,163,195"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a41af0935f3989aae450cf8988cd9c3a9" title=" " alt="" coords="324,170,389,195"/>
<area shape="rect" href="../../db/dd8/syscall_8c.html#a918cadc6c55aa7ac38982659c27a3a75" title=" " alt="" coords="211,170,276,195"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="437,170,499,195"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="1043,447,1099,473"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="1040,69,1103,94"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="665,195,723,221"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="547,297,600,322"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="665,297,723,322"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="648,346,740,371"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="788,233,852,258"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="788,359,852,385"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="900,209,992,234"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="915,258,977,283"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../db/dd8/syscall_8c_a6ade9205d1f46b759cf93b60513a3421_icgraph.png" border="0" usemap="#adb/dd8/syscall_8c_a6ade9205d1f46b759cf93b60513a3421_icgraph" alt=""/></div>
<map name="adb/dd8/syscall_8c_a6ade9205d1f46b759cf93b60513a3421_icgraph" id="adb/dd8/syscall_8c_a6ade9205d1f46b759cf93b60513a3421_icgraph">
<area shape="rect" title=" " alt="" coords="153,104,208,129"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#ac243c8f20f5fb2e3e257b5007af2c204" title=" " alt="" coords="17,5,93,31"/>
<area shape="rect" href="../../dd/d35/sysproc_8c.html#a65e52d7f297b2757ffbf46e4deccf188" title=" " alt="" coords="5,55,105,80"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a9a70db941def46ec25939e6c2d30e399" title=" " alt="" coords="18,104,93,129"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a54bf714d9e898cbdcbc061b280bbfae0" title=" " alt="" coords="18,153,93,179"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a687d939a9e4792af15db96f2c2f34378" title=" " alt="" coords="16,203,95,228"/>
</map>
</div>

</div>
</div>
<a id="a662eedd65f3e2165093842b80e3bc024" name="a662eedd65f3e2165093842b80e3bc024"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a662eedd65f3e2165093842b80e3bc024">&#9670;&#160;</a></span>argstr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int argstr </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>pp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/dd8/syscall_8c_source.html#l00077">77</a> of file <a class="el" href="../../db/dd8/syscall_8c_source.html">syscall.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   78</span>{</div>
<div class="line"><span class="lineno">   79</span>  <span class="keywordtype">int</span> addr;</div>
<div class="line"><span class="lineno">   80</span>  <span class="keywordflow">if</span>(<a class="code hl_function" href="../../db/dd8/syscall_8c.html#ade56ef2176f85cd61e7b91b400e7d4d3">argint</a>(n, &amp;addr) &lt; 0)</div>
<div class="line"><span class="lineno">   81</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">   82</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="../../db/dd8/syscall_8c.html#ace37b4584713ab6bda44a282a298961f">fetchstr</a>(addr, pp);</div>
<div class="line"><span class="lineno">   83</span>}</div>
<div class="ttc" id="asyscall_8c_html_ace37b4584713ab6bda44a282a298961f"><div class="ttname"><a href="../../db/dd8/syscall_8c.html#ace37b4584713ab6bda44a282a298961f">fetchstr</a></div><div class="ttdeci">int fetchstr(uint addr, char **pp)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/dd8/syscall_8c_source.html#l00032">syscall.c:32</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../db/dd8/syscall_8c_a662eedd65f3e2165093842b80e3bc024_cgraph.png" border="0" usemap="#adb/dd8/syscall_8c_a662eedd65f3e2165093842b80e3bc024_cgraph" alt=""/></div>
<map name="adb/dd8/syscall_8c_a662eedd65f3e2165093842b80e3bc024_cgraph" id="adb/dd8/syscall_8c_a662eedd65f3e2165093842b80e3bc024_cgraph">
<area shape="rect" title=" " alt="" coords="5,195,60,221"/>
<area shape="rect" href="../../db/dd8/syscall_8c.html#ade56ef2176f85cd61e7b91b400e7d4d3" title=" " alt="" coords="108,170,163,195"/>
<area shape="rect" href="../../db/dd8/syscall_8c.html#ace37b4584713ab6bda44a282a298961f" title=" " alt="" coords="211,221,277,246"/>
<area shape="rect" href="../../db/dd8/syscall_8c.html#a918cadc6c55aa7ac38982659c27a3a75" title=" " alt="" coords="211,119,277,145"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a41af0935f3989aae450cf8988cd9c3a9" title=" " alt="" coords="325,170,391,195"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="439,170,500,195"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="1045,447,1101,473"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="1041,69,1104,94"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="666,195,725,221"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="548,297,601,322"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="666,297,725,322"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="649,346,741,371"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="789,233,853,258"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="789,359,853,385"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="901,209,993,234"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="916,258,979,283"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../db/dd8/syscall_8c_a662eedd65f3e2165093842b80e3bc024_icgraph.png" border="0" usemap="#adb/dd8/syscall_8c_a662eedd65f3e2165093842b80e3bc024_icgraph" alt=""/></div>
<map name="adb/dd8/syscall_8c_a662eedd65f3e2165093842b80e3bc024_icgraph" id="adb/dd8/syscall_8c_a662eedd65f3e2165093842b80e3bc024_icgraph">
<area shape="rect" title=" " alt="" coords="143,153,197,179"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#ad1c5f8693cb35b9605fee09eebdda640" title=" " alt="" coords="11,5,89,31"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#aeaa813ddeb6a5fac3c45714c7351c526" title=" " alt="" coords="11,55,89,80"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a759600870314007ac558871239122fb7" title=" " alt="" coords="15,104,85,129"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a057e5bce2de7a87ebfd2dc33967bca4a" title=" " alt="" coords="9,153,91,179"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a25697aa3d828b5878d38170d724adb27" title=" " alt="" coords="5,203,95,228"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a74e45efc661ca17c068bc283b3842e6d" title=" " alt="" coords="11,252,89,277"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#ae1e58ee11d41f643929520d8c1640da7" title=" " alt="" coords="8,301,92,327"/>
</map>
</div>

</div>
</div>
<a id="a918cadc6c55aa7ac38982659c27a3a75" name="a918cadc6c55aa7ac38982659c27a3a75"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a918cadc6c55aa7ac38982659c27a3a75">&#9670;&#160;</a></span>fetchint()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int fetchint </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d49/types_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>ip</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/dd8/syscall_8c_source.html#l00018">18</a> of file <a class="el" href="../../db/dd8/syscall_8c_source.html">syscall.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   19</span>{</div>
<div class="line"><span class="lineno">   20</span>  <span class="keyword">struct </span><a class="code hl_struct" href="../../de/d48/structproc.html">proc</a> *curproc = <a class="code hl_function" href="../../d5/d64/defs_8h.html#a3d2327db1e34643f4a9e6a07c8cc62c6">myproc</a>();</div>
<div class="line"><span class="lineno">   21</span> </div>
<div class="line"><span class="lineno">   22</span>  <span class="keywordflow">if</span>(addr &gt;= curproc-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#a6e67042bb361124ff287af88efc33e00">sz</a> || addr+4 &gt; curproc-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#a6e67042bb361124ff287af88efc33e00">sz</a>)</div>
<div class="line"><span class="lineno">   23</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">   24</span>  *ip = *(<span class="keywordtype">int</span>*)(addr);</div>
<div class="line"><span class="lineno">   25</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">   26</span>}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../db/dd8/syscall_8c_a918cadc6c55aa7ac38982659c27a3a75_cgraph.png" border="0" usemap="#adb/dd8/syscall_8c_a918cadc6c55aa7ac38982659c27a3a75_cgraph" alt=""/></div>
<map name="adb/dd8/syscall_8c_a918cadc6c55aa7ac38982659c27a3a75_cgraph" id="adb/dd8/syscall_8c_a918cadc6c55aa7ac38982659c27a3a75_cgraph">
<area shape="rect" title=" " alt="" coords="5,170,71,195"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a41af0935f3989aae450cf8988cd9c3a9" title=" " alt="" coords="119,170,184,195"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="232,170,293,195"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="838,447,894,473"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="835,75,897,101"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="459,195,518,221"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="341,297,395,322"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="459,297,518,322"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="443,346,535,371"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="583,221,647,246"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="583,315,647,341"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="695,209,787,234"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="709,258,772,283"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../db/dd8/syscall_8c_a918cadc6c55aa7ac38982659c27a3a75_icgraph.png" border="0" usemap="#adb/dd8/syscall_8c_a918cadc6c55aa7ac38982659c27a3a75_icgraph" alt=""/></div>
<map name="adb/dd8/syscall_8c_a918cadc6c55aa7ac38982659c27a3a75_icgraph" id="adb/dd8/syscall_8c_a918cadc6c55aa7ac38982659c27a3a75_icgraph">
<area shape="rect" title=" " alt="" coords="385,405,451,431"/>
<area shape="rect" href="../../db/dd8/syscall_8c.html#ade56ef2176f85cd61e7b91b400e7d4d3" title=" " alt="" coords="283,355,337,380"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#aeaa813ddeb6a5fac3c45714c7351c526" title=" " alt="" coords="16,357,95,383"/>
<area shape="rect" href="../../db/dd8/syscall_8c.html#a6ade9205d1f46b759cf93b60513a3421" title=" " alt="" coords="167,101,221,127"/>
<area shape="rect" href="../../dd/d35/sysproc_8c.html#a65e52d7f297b2757ffbf46e4deccf188" title=" " alt="" coords="5,5,105,31"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a54bf714d9e898cbdcbc061b280bbfae0" title=" " alt="" coords="18,153,93,179"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a687d939a9e4792af15db96f2c2f34378" title=" " alt="" coords="16,203,95,228"/>
<area shape="rect" href="../../db/dd8/syscall_8c.html#a662eedd65f3e2165093842b80e3bc024" title=" " alt="" coords="167,505,221,531"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a25697aa3d828b5878d38170d724adb27" title=" " alt="" coords="11,604,100,629"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a74e45efc661ca17c068bc283b3842e6d" title=" " alt="" coords="16,655,95,680"/>
<area shape="rect" href="../../dd/d35/sysproc_8c.html#abc90a5b53d06206904d099c62efc1696" title=" " alt="" coords="157,607,231,632"/>
<area shape="rect" href="../../dd/d35/sysproc_8c.html#ad766b54842470b464a6497bb5c514e59" title=" " alt="" coords="161,253,227,279"/>
<area shape="rect" href="../../dd/d35/sysproc_8c.html#ab21d46be776cf6075a997af525a1a628" title=" " alt="" coords="157,355,231,380"/>
<area shape="rect" href="../../dd/d35/sysproc_8c.html#a59778ec9bfa6b6f2100b43fbba000573" title=" " alt="" coords="153,404,235,429"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#ac243c8f20f5fb2e3e257b5007af2c204" title=" " alt="" coords="17,55,93,80"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a9a70db941def46ec25939e6c2d30e399" title=" " alt="" coords="18,104,93,129"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#ad1c5f8693cb35b9605fee09eebdda640" title=" " alt="" coords="16,407,95,432"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a759600870314007ac558871239122fb7" title=" " alt="" coords="20,456,91,481"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a057e5bce2de7a87ebfd2dc33967bca4a" title=" " alt="" coords="14,505,97,531"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#ae1e58ee11d41f643929520d8c1640da7" title=" " alt="" coords="13,555,97,580"/>
</map>
</div>

</div>
</div>
<a id="ace37b4584713ab6bda44a282a298961f" name="ace37b4584713ab6bda44a282a298961f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ace37b4584713ab6bda44a282a298961f">&#9670;&#160;</a></span>fetchstr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int fetchstr </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d49/types_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>pp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/dd8/syscall_8c_source.html#l00032">32</a> of file <a class="el" href="../../db/dd8/syscall_8c_source.html">syscall.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   33</span>{</div>
<div class="line"><span class="lineno">   34</span>  <span class="keywordtype">char</span> *s, *ep;</div>
<div class="line"><span class="lineno">   35</span>  <span class="keyword">struct </span><a class="code hl_struct" href="../../de/d48/structproc.html">proc</a> *curproc = <a class="code hl_function" href="../../d5/d64/defs_8h.html#a3d2327db1e34643f4a9e6a07c8cc62c6">myproc</a>();</div>
<div class="line"><span class="lineno">   36</span> </div>
<div class="line"><span class="lineno">   37</span>  <span class="keywordflow">if</span>(addr &gt;= curproc-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#a6e67042bb361124ff287af88efc33e00">sz</a>)</div>
<div class="line"><span class="lineno">   38</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">   39</span>  *pp = (<span class="keywordtype">char</span>*)addr;</div>
<div class="line"><span class="lineno">   40</span>  ep = (<span class="keywordtype">char</span>*)curproc-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#a6e67042bb361124ff287af88efc33e00">sz</a>;</div>
<div class="line"><span class="lineno">   41</span>  <span class="keywordflow">for</span>(s = *pp; s &lt; ep; s++){</div>
<div class="line"><span class="lineno">   42</span>    <span class="keywordflow">if</span>(*s == 0)</div>
<div class="line"><span class="lineno">   43</span>      <span class="keywordflow">return</span> s - *pp;</div>
<div class="line"><span class="lineno">   44</span>  }</div>
<div class="line"><span class="lineno">   45</span>  <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">   46</span>}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../db/dd8/syscall_8c_ace37b4584713ab6bda44a282a298961f_cgraph.png" border="0" usemap="#adb/dd8/syscall_8c_ace37b4584713ab6bda44a282a298961f_cgraph" alt=""/></div>
<map name="adb/dd8/syscall_8c_ace37b4584713ab6bda44a282a298961f_cgraph" id="adb/dd8/syscall_8c_ace37b4584713ab6bda44a282a298961f_cgraph">
<area shape="rect" title=" " alt="" coords="5,170,72,195"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a41af0935f3989aae450cf8988cd9c3a9" title=" " alt="" coords="120,170,185,195"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="233,170,295,195"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="839,447,895,473"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="836,75,899,101"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="461,195,519,221"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="343,297,396,322"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="461,297,519,322"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="444,346,536,371"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="584,221,648,246"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="584,315,648,341"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="696,209,788,234"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="711,258,773,283"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../db/dd8/syscall_8c_ace37b4584713ab6bda44a282a298961f_icgraph.png" border="0" usemap="#adb/dd8/syscall_8c_ace37b4584713ab6bda44a282a298961f_icgraph" alt=""/></div>
<map name="adb/dd8/syscall_8c_ace37b4584713ab6bda44a282a298961f_icgraph" id="adb/dd8/syscall_8c_ace37b4584713ab6bda44a282a298961f_icgraph">
<area shape="rect" title=" " alt="" coords="245,104,312,129"/>
<area shape="rect" href="../../db/dd8/syscall_8c.html#a662eedd65f3e2165093842b80e3bc024" title=" " alt="" coords="143,129,197,155"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#aeaa813ddeb6a5fac3c45714c7351c526" title=" " alt="" coords="11,5,89,31"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#ad1c5f8693cb35b9605fee09eebdda640" title=" " alt="" coords="11,55,89,80"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a759600870314007ac558871239122fb7" title=" " alt="" coords="15,104,85,129"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a057e5bce2de7a87ebfd2dc33967bca4a" title=" " alt="" coords="9,153,91,179"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a25697aa3d828b5878d38170d724adb27" title=" " alt="" coords="5,203,95,228"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#a74e45efc661ca17c068bc283b3842e6d" title=" " alt="" coords="11,252,89,277"/>
<area shape="rect" href="../../d1/d14/sysfile_8c.html#ae1e58ee11d41f643929520d8c1640da7" title=" " alt="" coords="8,301,92,327"/>
</map>
</div>

</div>
</div>
<a id="ad1c5f8693cb35b9605fee09eebdda640" name="ad1c5f8693cb35b9605fee09eebdda640"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad1c5f8693cb35b9605fee09eebdda640">&#9670;&#160;</a></span>sys_chdir()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sys_chdir </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/d14/sysfile_8c_source.html#l00372">372</a> of file <a class="el" href="../../d1/d14/sysfile_8c_source.html">sysfile.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  373</span>{</div>
<div class="line"><span class="lineno">  374</span>  <span class="keywordtype">char</span> *path;</div>
<div class="line"><span class="lineno">  375</span>  <span class="keyword">struct </span><a class="code hl_struct" href="../../d0/df8/structinode.html">inode</a> *ip;</div>
<div class="line"><span class="lineno">  376</span>  <span class="keyword">struct </span><a class="code hl_struct" href="../../de/d48/structproc.html">proc</a> *curproc = <a class="code hl_function" href="../../d5/d64/defs_8h.html#a3d2327db1e34643f4a9e6a07c8cc62c6">myproc</a>();</div>
<div class="line"><span class="lineno">  377</span>  </div>
<div class="line"><span class="lineno">  378</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#a603ca98212e00d2ffdba7827ef0f1003">begin_op</a>();</div>
<div class="line"><span class="lineno">  379</span>  <span class="keywordflow">if</span>(<a class="code hl_function" href="../../d5/d64/defs_8h.html#afc00cb2e6a06b1021f3d82fa4d0eff07">argstr</a>(0, &amp;path) &lt; 0 || (ip = <a class="code hl_function" href="../../d5/d64/defs_8h.html#acde7d3975db286253e584452ba03a54f">namei</a>(path)) == 0){</div>
<div class="line"><span class="lineno">  380</span>    <a class="code hl_function" href="../../d5/d64/defs_8h.html#a2504e37a109f9bae5ca11fe89e4e8fa1">end_op</a>();</div>
<div class="line"><span class="lineno">  381</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  382</span>  }</div>
<div class="line"><span class="lineno">  383</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#a29a4d743d41fe659f74b0a57fdc25012">ilock</a>(ip);</div>
<div class="line"><span class="lineno">  384</span>  <span class="keywordflow">if</span>(ip-&gt;<a class="code hl_variable" href="../../d0/df8/structinode.html#a8d74bec2898785c057111c328d23fda2">type</a> != <a class="code hl_define" href="../../d2/d1b/stat_8h.html#a91136bcd71a9f499304f5d7e7e9d6376">T_DIR</a>){</div>
<div class="line"><span class="lineno">  385</span>    <a class="code hl_function" href="../../d5/d64/defs_8h.html#adff5bb5a1eeaf921853ec06479f8c49b">iunlockput</a>(ip);</div>
<div class="line"><span class="lineno">  386</span>    <a class="code hl_function" href="../../d5/d64/defs_8h.html#a2504e37a109f9bae5ca11fe89e4e8fa1">end_op</a>();</div>
<div class="line"><span class="lineno">  387</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  388</span>  }</div>
<div class="line"><span class="lineno">  389</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#af301c10ad8ced77a5dfb2de3a64c666c">iunlock</a>(ip);</div>
<div class="line"><span class="lineno">  390</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#a29530a0afdfe924818d8c70b6724528d">iput</a>(curproc-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#a493bc338ce008a838eef521972a35257">cwd</a>);</div>
<div class="line"><span class="lineno">  391</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#a2504e37a109f9bae5ca11fe89e4e8fa1">end_op</a>();</div>
<div class="line"><span class="lineno">  392</span>  curproc-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#a493bc338ce008a838eef521972a35257">cwd</a> = ip;</div>
<div class="line"><span class="lineno">  393</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  394</span>}</div>
<div class="ttc" id="adefs_8h_html_a2504e37a109f9bae5ca11fe89e4e8fa1"><div class="ttname"><a href="../../d5/d64/defs_8h.html#a2504e37a109f9bae5ca11fe89e4e8fa1">end_op</a></div><div class="ttdeci">void end_op()</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/df8/log_8c_source.html#l00146">log.c:146</a></div></div>
<div class="ttc" id="adefs_8h_html_a29530a0afdfe924818d8c70b6724528d"><div class="ttname"><a href="../../d5/d64/defs_8h.html#a29530a0afdfe924818d8c70b6724528d">iput</a></div><div class="ttdeci">void iput(struct inode *)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d5a/fs_8c_source.html#l00332">fs.c:332</a></div></div>
<div class="ttc" id="adefs_8h_html_a29a4d743d41fe659f74b0a57fdc25012"><div class="ttname"><a href="../../d5/d64/defs_8h.html#a29a4d743d41fe659f74b0a57fdc25012">ilock</a></div><div class="ttdeci">void ilock(struct inode *)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d5a/fs_8c_source.html#l00288">fs.c:288</a></div></div>
<div class="ttc" id="adefs_8h_html_a603ca98212e00d2ffdba7827ef0f1003"><div class="ttname"><a href="../../d5/d64/defs_8h.html#a603ca98212e00d2ffdba7827ef0f1003">begin_op</a></div><div class="ttdeci">void begin_op()</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/df8/log_8c_source.html#l00126">log.c:126</a></div></div>
<div class="ttc" id="adefs_8h_html_acde7d3975db286253e584452ba03a54f"><div class="ttname"><a href="../../d5/d64/defs_8h.html#acde7d3975db286253e584452ba03a54f">namei</a></div><div class="ttdeci">struct inode * namei(char *)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d5a/fs_8c_source.html#l00660">fs.c:660</a></div></div>
<div class="ttc" id="adefs_8h_html_adff5bb5a1eeaf921853ec06479f8c49b"><div class="ttname"><a href="../../d5/d64/defs_8h.html#adff5bb5a1eeaf921853ec06479f8c49b">iunlockput</a></div><div class="ttdeci">void iunlockput(struct inode *)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d5a/fs_8c_source.html#l00356">fs.c:356</a></div></div>
<div class="ttc" id="adefs_8h_html_af301c10ad8ced77a5dfb2de3a64c666c"><div class="ttname"><a href="../../d5/d64/defs_8h.html#af301c10ad8ced77a5dfb2de3a64c666c">iunlock</a></div><div class="ttdeci">void iunlock(struct inode *)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d5a/fs_8c_source.html#l00316">fs.c:316</a></div></div>
<div class="ttc" id="adefs_8h_html_afc00cb2e6a06b1021f3d82fa4d0eff07"><div class="ttname"><a href="../../d5/d64/defs_8h.html#afc00cb2e6a06b1021f3d82fa4d0eff07">argstr</a></div><div class="ttdeci">int argstr(int, char **)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/dd8/syscall_8c_source.html#l00077">syscall.c:77</a></div></div>
<div class="ttc" id="astat_8h_html_a91136bcd71a9f499304f5d7e7e9d6376"><div class="ttname"><a href="../../d2/d1b/stat_8h.html#a91136bcd71a9f499304f5d7e7e9d6376">T_DIR</a></div><div class="ttdeci">#define T_DIR</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d1b/stat_8h_source.html#l00001">stat.h:1</a></div></div>
<div class="ttc" id="astructinode_html"><div class="ttname"><a href="../../d0/df8/structinode.html">inode</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d4d/file_8h_source.html#l00013">file.h:13</a></div></div>
<div class="ttc" id="astructinode_html_a8d74bec2898785c057111c328d23fda2"><div class="ttname"><a href="../../d0/df8/structinode.html#a8d74bec2898785c057111c328d23fda2">inode::type</a></div><div class="ttdeci">short type</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d4d/file_8h_source.html#l00020">file.h:20</a></div></div>
<div class="ttc" id="astructproc_html_a493bc338ce008a838eef521972a35257"><div class="ttname"><a href="../../de/d48/structproc.html#a493bc338ce008a838eef521972a35257">proc::cwd</a></div><div class="ttdeci">struct inode * cwd</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d03/proc_8h_source.html#l00050">proc.h:50</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../db/dd8/syscall_8c_ad1c5f8693cb35b9605fee09eebdda640_cgraph.png" border="0" usemap="#adb/dd8/syscall_8c_ad1c5f8693cb35b9605fee09eebdda640_cgraph" alt=""/></div>
<map name="adb/dd8/syscall_8c_ad1c5f8693cb35b9605fee09eebdda640_cgraph" id="adb/dd8/syscall_8c_ad1c5f8693cb35b9605fee09eebdda640_cgraph">
<area shape="rect" title=" " alt="" coords="5,1309,84,1334"/>
<area shape="rect" href="../../db/dd8/syscall_8c.html#a662eedd65f3e2165093842b80e3bc024" title=" " alt="" coords="723,447,778,473"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a41af0935f3989aae450cf8988cd9c3a9" title=" " alt="" coords="1103,434,1169,459"/>
<area shape="rect" href="../../d7/df8/log_8c.html#ac96aa31ffc0500e749c62c4d377c21c9" title=" " alt="" coords="577,679,651,705"/>
<area shape="rect" href="../../d7/df8/log_8c.html#ac0f12be0ca0de555e60b27b06a57a65b" title=" " alt="" coords="1232,1461,1296,1486"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#aed28187406d84a3aa71f10c6235a03ec" title=" " alt="" coords="359,1194,409,1219"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#ab3c447f135c68e4c3c1f8d5866f6e77b" title=" " alt="" coords="261,1321,304,1346"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#ae4e29916219b9293b37f9c34220694fe" title=" " alt="" coords="840,1422,903,1447"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a207b3008bae35596c55ec7c4fc6875eb" title=" " alt="" coords="132,1359,213,1385"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a35c52ecf358097c17dcbbd5594acb41a" title=" " alt="" coords="144,1726,201,1751"/>
<area shape="rect" href="../../db/dd8/syscall_8c.html#ade56ef2176f85cd61e7b91b400e7d4d3" title=" " alt="" coords="844,473,899,498"/>
<area shape="rect" href="../../db/dd8/syscall_8c.html#ace37b4584713ab6bda44a282a298961f" title=" " alt="" coords="965,398,1031,423"/>
<area shape="rect" href="../../db/dd8/syscall_8c.html#a918cadc6c55aa7ac38982659c27a3a75" title=" " alt="" coords="965,447,1031,473"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="1233,575,1295,601"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="1859,575,1915,601"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="1856,94,1919,119"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="1481,854,1539,879"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="1356,1055,1409,1081"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="1481,1055,1539,1081"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="1464,1006,1556,1031"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="1604,651,1668,677"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="1604,1537,1668,1562"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="1716,651,1808,677"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="1731,246,1793,271"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ae70cc0370342e46f6db3bec367232457" title=" " alt="" coords="724,761,777,786"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad788da91743c333b5bed7c4a0dd12365" title=" " alt="" coords="843,751,900,777"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a9fa00b0be5d3c4781048861e2506eb63" title=" " alt="" coords="959,751,1037,777"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a1d9e7047d3dfb57809a2541d8387705e" title=" " alt="" coords="1107,802,1165,827"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a02ca0670bc1fe12e38453082631ff360" title=" " alt="" coords="1093,651,1179,677"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a87c90f0ab2a1b11c2b55f4e483bb8493" title=" " alt="" coords="1093,701,1179,726"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a4a34d9f03e436cfa09b88f735f6ee952" title=" " alt="" coords="1349,1461,1416,1486"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#aaad2d7a86d4859982dd9a132f5128ff2" title=" " alt="" coords="567,779,661,805"/>
<area shape="rect" href="../../dc/de6/bio_8c.html#a30b8d2ef2300ed8e3d879a428fe39898" title=" " alt="" coords="464,1219,519,1245"/>
<area shape="rect" href="../../d1/db0/string_8c.html#a07f97e2ed1ce37955192d52de8f4911f" title=" " alt="" coords="709,1422,792,1447"/>
<area shape="rect" href="../../dc/de6/bio_8c.html#ab5335aeb503731104314321a78a6d727" title=" " alt="" coords="843,1207,900,1233"/>
<area shape="rect" href="../../da/d9b/memide_8c.html#a7f36b008f02088c86f76e98e05b55af5" title=" " alt="" coords="587,1219,641,1245"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#a6fdbe54cbecd8fc67d74793b27adcf05" title=" " alt="" coords="951,1157,1045,1182"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#aa997067c2c9bfef15af6fa0a10c20f4a" title=" " alt="" coords="951,1523,1045,1549"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a7220afa8e5f4bea540eb95879ea7df6e" title=" " alt="" coords="352,1321,416,1346"/>
<area shape="rect" href="../../d7/df8/log_8c.html#a7eacb0fbebe5ce4c7d3ddea15908b13d" title=" " alt="" coords="1227,1410,1301,1435"/>
</map>
</div>

</div>
</div>
<a id="abc90a5b53d06206904d099c62efc1696" name="abc90a5b53d06206904d099c62efc1696"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abc90a5b53d06206904d099c62efc1696">&#9670;&#160;</a></span>sys_chpr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sys_chpr </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d35/sysproc_8c_source.html#l00125">125</a> of file <a class="el" href="../../dd/d35/sysproc_8c_source.html">sysproc.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  126</span>{</div>
<div class="line"><span class="lineno">  127</span>  <span class="keywordtype">int</span> pid, pr;</div>
<div class="line"><span class="lineno">  128</span>  <span class="keywordflow">if</span>(<a class="code hl_function" href="../../d5/d64/defs_8h.html#a75bc8d8c7ea0b4b39d4f470e18e0dba7">argint</a>(0, &amp;pid) &lt; 0)</div>
<div class="line"><span class="lineno">  129</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  130</span>  <span class="keywordflow">if</span>(<a class="code hl_function" href="../../d5/d64/defs_8h.html#a75bc8d8c7ea0b4b39d4f470e18e0dba7">argint</a>(1, &amp;pr) &lt; 0)</div>
<div class="line"><span class="lineno">  131</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  132</span> </div>
<div class="line"><span class="lineno">  133</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="../../d5/d64/defs_8h.html#a2ca17a3161c80e3e4894ec6a96e0a281">chpr</a>(pid, pr);</div>
<div class="line"><span class="lineno">  134</span>}</div>
<div class="ttc" id="adefs_8h_html_a2ca17a3161c80e3e4894ec6a96e0a281"><div class="ttname"><a href="../../d5/d64/defs_8h.html#a2ca17a3161c80e3e4894ec6a96e0a281">chpr</a></div><div class="ttdeci">int chpr(int pid, int priority)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dda/proc_8c_source.html#l00559">proc.c:559</a></div></div>
<div class="ttc" id="adefs_8h_html_a75bc8d8c7ea0b4b39d4f470e18e0dba7"><div class="ttname"><a href="../../d5/d64/defs_8h.html#a75bc8d8c7ea0b4b39d4f470e18e0dba7">argint</a></div><div class="ttdeci">int argint(int, int *)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/dd8/syscall_8c_source.html#l00050">syscall.c:50</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../db/dd8/syscall_8c_abc90a5b53d06206904d099c62efc1696_cgraph.png" border="0" usemap="#adb/dd8/syscall_8c_abc90a5b53d06206904d099c62efc1696_cgraph" alt=""/></div>
<map name="adb/dd8/syscall_8c_abc90a5b53d06206904d099c62efc1696_cgraph" id="adb/dd8/syscall_8c_abc90a5b53d06206904d099c62efc1696_cgraph">
<area shape="rect" title=" " alt="" coords="5,119,80,145"/>
<area shape="rect" href="../../db/dd8/syscall_8c.html#ade56ef2176f85cd61e7b91b400e7d4d3" title=" " alt="" coords="128,270,183,295"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a2ca17a3161c80e3e4894ec6a96e0a281" title=" " alt="" coords="691,145,737,170"/>
<area shape="rect" href="../../db/dd8/syscall_8c.html#a918cadc6c55aa7ac38982659c27a3a75" title=" " alt="" coords="231,270,296,295"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a41af0935f3989aae450cf8988cd9c3a9" title=" " alt="" coords="344,321,409,346"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="457,397,519,422"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="1063,94,1119,119"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="1060,447,1123,473"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="685,397,743,422"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="567,271,620,297"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="685,246,743,271"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="668,295,760,321"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="808,346,872,371"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="808,195,872,221"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="920,422,1012,447"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="935,321,997,346"/>
</map>
</div>

</div>
</div>
<a id="a32945488fd39bc405757177b37cd2250" name="a32945488fd39bc405757177b37cd2250"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a32945488fd39bc405757177b37cd2250">&#9670;&#160;</a></span>sys_close()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sys_close </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/d14/sysfile_8c_source.html#l00094">94</a> of file <a class="el" href="../../d1/d14/sysfile_8c_source.html">sysfile.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   95</span>{</div>
<div class="line"><span class="lineno">   96</span>  <span class="keywordtype">int</span> fd;</div>
<div class="line"><span class="lineno">   97</span>  <span class="keyword">struct </span><a class="code hl_struct" href="../../d7/d3a/structfile.html">file</a> *f;</div>
<div class="line"><span class="lineno">   98</span> </div>
<div class="line"><span class="lineno">   99</span>  <span class="keywordflow">if</span>(argfd(0, &amp;fd, &amp;f) &lt; 0)</div>
<div class="line"><span class="lineno">  100</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  101</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#a3d2327db1e34643f4a9e6a07c8cc62c6">myproc</a>()-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#a4a9eb0352efe3fc097c91fccfaac50bd">ofile</a>[fd] = 0;</div>
<div class="line"><span class="lineno">  102</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#ac865ee0b2d70f753d61d1fefef9de0f6">fileclose</a>(f);</div>
<div class="line"><span class="lineno">  103</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  104</span>}</div>
<div class="ttc" id="adefs_8h_html_ac865ee0b2d70f753d61d1fefef9de0f6"><div class="ttname"><a href="../../d5/d64/defs_8h.html#ac865ee0b2d70f753d61d1fefef9de0f6">fileclose</a></div><div class="ttdeci">void fileclose(struct file *)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l00057">file.c:57</a></div></div>
<div class="ttc" id="astructfile_html"><div class="ttname"><a href="../../d7/d3a/structfile.html">file</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d4d/file_8h_source.html#l00001">file.h:1</a></div></div>
<div class="ttc" id="astructproc_html_a4a9eb0352efe3fc097c91fccfaac50bd"><div class="ttname"><a href="../../de/d48/structproc.html#a4a9eb0352efe3fc097c91fccfaac50bd">proc::ofile</a></div><div class="ttdeci">struct file * ofile[NOFILE]</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d03/proc_8h_source.html#l00049">proc.h:49</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../db/dd8/syscall_8c_a32945488fd39bc405757177b37cd2250_cgraph.png" border="0" usemap="#adb/dd8/syscall_8c_a32945488fd39bc405757177b37cd2250_cgraph" alt=""/></div>
<map name="adb/dd8/syscall_8c_a32945488fd39bc405757177b37cd2250_cgraph" id="adb/dd8/syscall_8c_a32945488fd39bc405757177b37cd2250_cgraph">
<area shape="rect" title=" " alt="" coords="5,1310,87,1335"/>
<area shape="rect" href="../../d6/d13/file_8c.html#ae557c81ab89c24219146144bb6adaa2c" title=" " alt="" coords="135,423,205,449"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a41af0935f3989aae450cf8988cd9c3a9" title=" " alt="" coords="981,1715,1047,1741"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="1112,987,1176,1013"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="1595,1013,1648,1038"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="1836,633,1900,658"/>
<area shape="rect" href="../../d7/df8/log_8c.html#ac96aa31ffc0500e749c62c4d377c21c9" title=" " alt="" coords="569,1258,643,1283"/>
<area shape="rect" href="../../d7/df8/log_8c.html#ac0f12be0ca0de555e60b27b06a57a65b" title=" " alt="" coords="847,347,911,373"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#ab3c447f135c68e4c3c1f8d5866f6e77b" title=" " alt="" coords="253,575,296,601"/>
<area shape="rect" href="../../d1/d47/pipe_8c.html#a48642f54734698f6f881ee07723292cb" title=" " alt="" coords="841,195,918,221"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="1235,937,1327,962"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="1249,1551,1312,1577"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="1485,1614,1547,1639"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="1375,1665,1437,1690"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="1948,1589,2004,1614"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="1713,1411,1771,1437"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="1713,1013,1771,1038"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="1696,911,1788,937"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ae70cc0370342e46f6db3bec367232457" title=" " alt="" coords="716,1285,769,1310"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad788da91743c333b5bed7c4a0dd12365" title=" " alt="" coords="851,1563,908,1589"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a9fa00b0be5d3c4781048861e2506eb63" title=" " alt="" coords="975,1563,1053,1589"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a1d9e7047d3dfb57809a2541d8387705e" title=" " alt="" coords="1115,1462,1173,1487"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a02ca0670bc1fe12e38453082631ff360" title=" " alt="" coords="1101,1563,1187,1589"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a87c90f0ab2a1b11c2b55f4e483bb8493" title=" " alt="" coords="1238,1766,1323,1791"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a4a34d9f03e436cfa09b88f735f6ee952" title=" " alt="" coords="981,347,1047,373"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#aaad2d7a86d4859982dd9a132f5128ff2" title=" " alt="" coords="559,1209,653,1234"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a7220afa8e5f4bea540eb95879ea7df6e" title=" " alt="" coords="344,651,408,677"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#aa997067c2c9bfef15af6fa0a10c20f4a" title=" " alt="" coords="832,449,927,474"/>
<area shape="rect" href="../../dc/de6/bio_8c.html#a30b8d2ef2300ed8e3d879a428fe39898" title=" " alt="" coords="456,831,511,857"/>
<area shape="rect" href="../../d1/db0/string_8c.html#a07f97e2ed1ce37955192d52de8f4911f" title=" " alt="" coords="701,734,784,759"/>
<area shape="rect" href="../../dc/de6/bio_8c.html#ab5335aeb503731104314321a78a6d727" title=" " alt="" coords="714,651,771,677"/>
<area shape="rect" href="../../d7/df8/log_8c.html#a7eacb0fbebe5ce4c7d3ddea15908b13d" title=" " alt="" coords="977,550,1051,575"/>
<area shape="rect" href="../../da/d9b/memide_8c.html#a7f36b008f02088c86f76e98e05b55af5" title=" " alt="" coords="579,879,633,905"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#a6fdbe54cbecd8fc67d74793b27adcf05" title=" " alt="" coords="832,879,927,905"/>
<area shape="rect" href="../../d4/def/kalloc_8c.html#aced59ecf8411235f6dffc065236711a5" title=" " alt="" coords="989,145,1039,170"/>
<area shape="rect" href="../../db/d8a/ulib_8c.html#aa9cdc2409c15ccd5ee3b2031576f4093" title=" " alt="" coords="1109,145,1179,170"/>
</map>
</div>

</div>
</div>
<a id="a9eeed93775248f221437260b177591b8" name="a9eeed93775248f221437260b177591b8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9eeed93775248f221437260b177591b8">&#9670;&#160;</a></span>sys_cps()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sys_cps </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d35/sysproc_8c_source.html#l00119">119</a> of file <a class="el" href="../../dd/d35/sysproc_8c_source.html">sysproc.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  120</span>{</div>
<div class="line"><span class="lineno">  121</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="../../d5/d64/defs_8h.html#a1e777db371a84ab92eb05662e4fa12d4">cps</a>();</div>
<div class="line"><span class="lineno">  122</span>}</div>
<div class="ttc" id="adefs_8h_html_a1e777db371a84ab92eb05662e4fa12d4"><div class="ttname"><a href="../../d5/d64/defs_8h.html#a1e777db371a84ab92eb05662e4fa12d4">cps</a></div><div class="ttdeci">int cps(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dda/proc_8c_source.html#l00537">proc.c:537</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../db/dd8/syscall_8c_a9eeed93775248f221437260b177591b8_cgraph.png" border="0" usemap="#adb/dd8/syscall_8c_a9eeed93775248f221437260b177591b8_cgraph" alt=""/></div>
<map name="adb/dd8/syscall_8c_a9eeed93775248f221437260b177591b8_cgraph" id="adb/dd8/syscall_8c_a9eeed93775248f221437260b177591b8_cgraph">
<area shape="rect" title=" " alt="" coords="5,43,76,69"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a45a59a61c8799cb754b4326a32c14dc4" title=" " alt="" coords="124,43,167,69"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="215,271,279,297"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="805,119,863,145"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="928,119,992,145"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="327,371,419,397"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="341,322,404,347"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="577,322,639,347"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="687,221,740,246"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="467,423,529,449"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="1040,322,1096,347"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="805,322,863,347"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="788,221,880,246"/>
</map>
</div>

</div>
</div>
<a id="a8f8b9e2d98e8b444f23a39ae8992feff" name="a8f8b9e2d98e8b444f23a39ae8992feff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8f8b9e2d98e8b444f23a39ae8992feff">&#9670;&#160;</a></span>sys_dup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sys_dup </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/d14/sysfile_8c_source.html#l00056">56</a> of file <a class="el" href="../../d1/d14/sysfile_8c_source.html">sysfile.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   57</span>{</div>
<div class="line"><span class="lineno">   58</span>  <span class="keyword">struct </span><a class="code hl_struct" href="../../d7/d3a/structfile.html">file</a> *f;</div>
<div class="line"><span class="lineno">   59</span>  <span class="keywordtype">int</span> fd;</div>
<div class="line"><span class="lineno">   60</span> </div>
<div class="line"><span class="lineno">   61</span>  <span class="keywordflow">if</span>(argfd(0, 0, &amp;f) &lt; 0)</div>
<div class="line"><span class="lineno">   62</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">   63</span>  <span class="keywordflow">if</span>((fd=fdalloc(f)) &lt; 0)</div>
<div class="line"><span class="lineno">   64</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">   65</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#a67aac4011147fe1ec585211e23580721">filedup</a>(f);</div>
<div class="line"><span class="lineno">   66</span>  <span class="keywordflow">return</span> fd;</div>
<div class="line"><span class="lineno">   67</span>}</div>
<div class="ttc" id="adefs_8h_html_a67aac4011147fe1ec585211e23580721"><div class="ttname"><a href="../../d5/d64/defs_8h.html#a67aac4011147fe1ec585211e23580721">filedup</a></div><div class="ttdeci">struct file * filedup(struct file *)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l00045">file.c:45</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../db/dd8/syscall_8c_a8f8b9e2d98e8b444f23a39ae8992feff_cgraph.png" border="0" usemap="#adb/dd8/syscall_8c_a8f8b9e2d98e8b444f23a39ae8992feff_cgraph" alt=""/></div>
<map name="adb/dd8/syscall_8c_a8f8b9e2d98e8b444f23a39ae8992feff_cgraph" id="adb/dd8/syscall_8c_a8f8b9e2d98e8b444f23a39ae8992feff_cgraph">
<area shape="rect" title=" " alt="" coords="5,43,76,69"/>
<area shape="rect" href="../../d6/d13/file_8c.html#a9ef0346d08d8ed79ce2a9c03f9a4b4b2" title=" " alt="" coords="124,43,184,69"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="232,195,296,221"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="704,94,757,119"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="945,143,1009,169"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="344,297,436,322"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="359,346,421,371"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="595,234,656,259"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="484,246,547,271"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="1057,221,1113,246"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="822,194,881,219"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="822,143,881,169"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="805,94,897,119"/>
</map>
</div>

</div>
</div>
<a id="aeaa813ddeb6a5fac3c45714c7351c526" name="aeaa813ddeb6a5fac3c45714c7351c526"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeaa813ddeb6a5fac3c45714c7351c526">&#9670;&#160;</a></span>sys_exec()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sys_exec </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/d14/sysfile_8c_source.html#l00397">397</a> of file <a class="el" href="../../d1/d14/sysfile_8c_source.html">sysfile.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  398</span>{</div>
<div class="line"><span class="lineno">  399</span>  <span class="keywordtype">char</span> *path, *<a class="code hl_variable" href="../../d8/d60/init_8c.html#abd1a2cf54950f450187ef24c1cdcac0c">argv</a>[<a class="code hl_define" href="../../d5/d33/param_8h.html#a4c171d1ccc50f0b6ce7ad2f475eeba32">MAXARG</a>];</div>
<div class="line"><span class="lineno">  400</span>  <span class="keywordtype">int</span> i;</div>
<div class="line"><span class="lineno">  401</span>  <a class="code hl_typedef" href="../../d9/d49/types_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> uargv, uarg;</div>
<div class="line"><span class="lineno">  402</span> </div>
<div class="line"><span class="lineno">  403</span>  <span class="keywordflow">if</span>(<a class="code hl_function" href="../../d5/d64/defs_8h.html#afc00cb2e6a06b1021f3d82fa4d0eff07">argstr</a>(0, &amp;path) &lt; 0 || <a class="code hl_function" href="../../d5/d64/defs_8h.html#a75bc8d8c7ea0b4b39d4f470e18e0dba7">argint</a>(1, (<span class="keywordtype">int</span>*)&amp;uargv) &lt; 0){</div>
<div class="line"><span class="lineno">  404</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  405</span>  }</div>
<div class="line"><span class="lineno">  406</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#a0098886a849eef10803e9f35ceec61b9">memset</a>(<a class="code hl_variable" href="../../d8/d60/init_8c.html#abd1a2cf54950f450187ef24c1cdcac0c">argv</a>, 0, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="../../d8/d60/init_8c.html#abd1a2cf54950f450187ef24c1cdcac0c">argv</a>));</div>
<div class="line"><span class="lineno">  407</span>  <span class="keywordflow">for</span>(i=0;; i++){</div>
<div class="line"><span class="lineno">  408</span>    <span class="keywordflow">if</span>(i &gt;= <a class="code hl_define" href="../../d5/d64/defs_8h.html#afacd331296c10f360da7640e0d68429f">NELEM</a>(<a class="code hl_variable" href="../../d8/d60/init_8c.html#abd1a2cf54950f450187ef24c1cdcac0c">argv</a>))</div>
<div class="line"><span class="lineno">  409</span>      <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  410</span>    <span class="keywordflow">if</span>(<a class="code hl_function" href="../../d5/d64/defs_8h.html#ab8c95490fad429ac2701653041f2efcf">fetchint</a>(uargv+4*i, (<span class="keywordtype">int</span>*)&amp;uarg) &lt; 0)</div>
<div class="line"><span class="lineno">  411</span>      <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  412</span>    <span class="keywordflow">if</span>(uarg == 0){</div>
<div class="line"><span class="lineno">  413</span>      <a class="code hl_variable" href="../../d8/d60/init_8c.html#abd1a2cf54950f450187ef24c1cdcac0c">argv</a>[i] = 0;</div>
<div class="line"><span class="lineno">  414</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  415</span>    }</div>
<div class="line"><span class="lineno">  416</span>    <span class="keywordflow">if</span>(<a class="code hl_function" href="../../d5/d64/defs_8h.html#a386d969a02c926521cf2e1816069a4dc">fetchstr</a>(uarg, &amp;<a class="code hl_variable" href="../../d8/d60/init_8c.html#abd1a2cf54950f450187ef24c1cdcac0c">argv</a>[i]) &lt; 0)</div>
<div class="line"><span class="lineno">  417</span>      <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  418</span>  }</div>
<div class="line"><span class="lineno">  419</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="../../d5/d64/defs_8h.html#aa7b4aae4a12acd187e23396214aeca47">exec</a>(path, <a class="code hl_variable" href="../../d8/d60/init_8c.html#abd1a2cf54950f450187ef24c1cdcac0c">argv</a>);</div>
<div class="line"><span class="lineno">  420</span>}</div>
<div class="ttc" id="adefs_8h_html_a0098886a849eef10803e9f35ceec61b9"><div class="ttname"><a href="../../d5/d64/defs_8h.html#a0098886a849eef10803e9f35ceec61b9">memset</a></div><div class="ttdeci">void * memset(void *, int, uint)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/db0/string_8c_source.html#l00005">string.c:5</a></div></div>
<div class="ttc" id="adefs_8h_html_a386d969a02c926521cf2e1816069a4dc"><div class="ttname"><a href="../../d5/d64/defs_8h.html#a386d969a02c926521cf2e1816069a4dc">fetchstr</a></div><div class="ttdeci">int fetchstr(uint, char **)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/dd8/syscall_8c_source.html#l00032">syscall.c:32</a></div></div>
<div class="ttc" id="adefs_8h_html_aa7b4aae4a12acd187e23396214aeca47"><div class="ttname"><a href="../../d5/d64/defs_8h.html#aa7b4aae4a12acd187e23396214aeca47">exec</a></div><div class="ttdeci">int exec(char *, char **)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dc9/exec_8c_source.html#l00011">exec.c:11</a></div></div>
<div class="ttc" id="adefs_8h_html_ab8c95490fad429ac2701653041f2efcf"><div class="ttname"><a href="../../d5/d64/defs_8h.html#ab8c95490fad429ac2701653041f2efcf">fetchint</a></div><div class="ttdeci">int fetchint(uint, int *)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/dd8/syscall_8c_source.html#l00018">syscall.c:18</a></div></div>
<div class="ttc" id="adefs_8h_html_afacd331296c10f360da7640e0d68429f"><div class="ttname"><a href="../../d5/d64/defs_8h.html#afacd331296c10f360da7640e0d68429f">NELEM</a></div><div class="ttdeci">#define NELEM(x)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d64/defs_8h_source.html#l00195">defs.h:195</a></div></div>
<div class="ttc" id="ainit_8c_html_abd1a2cf54950f450187ef24c1cdcac0c"><div class="ttname"><a href="../../d8/d60/init_8c.html#abd1a2cf54950f450187ef24c1cdcac0c">argv</a></div><div class="ttdeci">char * argv[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d60/init_8c_source.html#l00008">init.c:8</a></div></div>
<div class="ttc" id="aparam_8h_html_a4c171d1ccc50f0b6ce7ad2f475eeba32"><div class="ttname"><a href="../../d5/d33/param_8h.html#a4c171d1ccc50f0b6ce7ad2f475eeba32">MAXARG</a></div><div class="ttdeci">#define MAXARG</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d33/param_8h_source.html#l00009">param.h:9</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../db/dd8/syscall_8c_aeaa813ddeb6a5fac3c45714c7351c526_cgraph.png" border="0" usemap="#adb/dd8/syscall_8c_aeaa813ddeb6a5fac3c45714c7351c526_cgraph" alt=""/></div>
<map name="adb/dd8/syscall_8c_aeaa813ddeb6a5fac3c45714c7351c526_cgraph" id="adb/dd8/syscall_8c_aeaa813ddeb6a5fac3c45714c7351c526_cgraph">
<area shape="rect" title=" " alt="" coords="5,101,84,126"/>
<area shape="rect" href="../../db/dd8/syscall_8c.html#ade56ef2176f85cd61e7b91b400e7d4d3" title=" " alt="" coords="245,126,299,151"/>
<area shape="rect" href="../../db/dd8/syscall_8c.html#a918cadc6c55aa7ac38982659c27a3a75" title=" " alt="" coords="362,75,427,101"/>
<area shape="rect" href="../../db/dd8/syscall_8c.html#a662eedd65f3e2165093842b80e3bc024" title=" " alt="" coords="132,25,187,50"/>
<area shape="rect" href="../../db/dd8/syscall_8c.html#ace37b4584713ab6bda44a282a298961f" title=" " alt="" coords="239,25,305,50"/>
<area shape="rect" href="../../df/dc9/exec_8c.html#ace32454ed0d37834dcb1cb4f8b727e6e" title=" " alt="" coords="134,709,185,734"/>
<area shape="rect" href="../../db/d8a/ulib_8c.html#aa9cdc2409c15ccd5ee3b2031576f4093" title=" " alt="" coords="1148,1822,1217,1847"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a41af0935f3989aae450cf8988cd9c3a9" title=" " alt="" coords="1025,178,1090,203"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="1152,330,1213,355"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="1596,203,1659,229"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="1599,381,1655,406"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="1373,482,1432,507"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="1267,773,1320,798"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="1373,1293,1432,1318"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="1484,963,1548,989"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="1484,1418,1548,1443"/>
<area shape="rect" href="../../de/de9/vm_8c.html#afea0f0a82a9f9c7aae26f90b5e0836c6" title=" " alt="" coords="235,1773,309,1798"/>
<area shape="rect" href="../../d7/df8/log_8c.html#ac96aa31ffc0500e749c62c4d377c21c9" title=" " alt="" coords="746,1038,821,1063"/>
<area shape="rect" href="../../d7/df8/log_8c.html#ac0f12be0ca0de555e60b27b06a57a65b" title=" " alt="" coords="1151,1291,1215,1317"/>
<area shape="rect" href="../../d1/db0/string_8c.html#aca73516e4b2fdb2663e0d26f855ac3ca" title=" " alt="" coords="1016,1646,1099,1671"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a795e27a0cb916cfb41411ebbb9669ddf" title=" " alt="" coords="357,734,432,759"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a532bc3f3e39942c20a471a11cff1a582" title=" " alt="" coords="238,355,306,381"/>
<area shape="rect" href="../../de/de9/vm_8c.html#aa883924e2f068c520b695cdc168e1603" title=" " alt="" coords="752,1545,815,1570"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#aed28187406d84a3aa71f10c6235a03ec" title=" " alt="" coords="624,506,673,531"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a207b3008bae35596c55ec7c4fc6875eb" title=" " alt="" coords="480,633,561,658"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a201acc8337a2893268b61ea5a1ee0d53" title=" " alt="" coords="485,785,556,810"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a3aba1fa9f6789d09356aec5b96d91fa8" title=" " alt="" coords="623,582,674,607"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a35c52ecf358097c17dcbbd5594acb41a" title=" " alt="" coords="243,405,301,430"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a1c8a7a02e9391b5cf0984388216695c0" title=" " alt="" coords="609,1393,688,1418"/>
<area shape="rect" href="../../db/d8a/ulib_8c.html#a59b5e6e6105ef0e97aed266ec6fdfe60" title=" " alt="" coords="245,454,299,479"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a87c90f0ab2a1b11c2b55f4e483bb8493" title=" " alt="" coords="1015,278,1100,303"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a6d3019ea15a9bfdc5131ae97f3623c49" title=" " alt="" coords="879,1545,967,1570"/>
<area shape="rect" href="../../d4/def/kalloc_8c.html#aced59ecf8411235f6dffc065236711a5" title=" " alt="" coords="1032,1695,1083,1721"/>
<area shape="rect" href="../../d4/def/kalloc_8c.html#a5e965f6365c721b5b23c12d16d45c3dc" title=" " alt="" coords="1265,1533,1321,1558"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#aa1c6e6e76813ccb29a29bb119dba668a" title=" " alt="" coords="369,1773,420,1798"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#aaf98ef7cdde3a0dfb2e49919de3298b1" title=" " alt="" coords="499,1089,542,1114"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#acd2e1ded4bb6fce4500438bf928330f4" title=" " alt="" coords="901,1697,945,1722"/>
<area shape="rect" href="../../df/d5d/umalloc_8c.html#adebb229f063e66907017098087cbe791" title=" " alt="" coords="499,1897,543,1922"/>
<area shape="rect" href="../../d8/ddb/user_8h.html#a939cb25a305fe68aad9b365077f1a8c7" title=" " alt="" coords="492,1798,549,1823"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a650cf0caaaa8b75f653c1c92818d03a4" title=" " alt="" coords="1383,1545,1422,1570"/>
<area shape="rect" href="../../df/d5d/umalloc_8c.html#ac131c16d1dcb6bea908d0237c82e981d" title=" " alt="" coords="491,1847,551,1873"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#ab3c447f135c68e4c3c1f8d5866f6e77b" title=" " alt="" coords="627,835,670,861"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ae70cc0370342e46f6db3bec367232457" title=" " alt="" coords="896,798,949,823"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a4a34d9f03e436cfa09b88f735f6ee952" title=" " alt="" coords="1369,1342,1436,1367"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#aaad2d7a86d4859982dd9a132f5128ff2" title=" " alt="" coords="736,683,831,709"/>
<area shape="rect" href="../../d1/db0/string_8c.html#a07f97e2ed1ce37955192d52de8f4911f" title=" " alt="" coords="742,430,825,455"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a3436a3bf222c074c4ed4d985f0c1ecef" title=" " alt="" coords="363,379,427,405"/>
<area shape="rect" href="../../dc/de6/bio_8c.html#a30b8d2ef2300ed8e3d879a428fe39898" title=" " alt="" coords="756,531,811,557"/>
<area shape="rect" href="../../dc/de6/bio_8c.html#ab5335aeb503731104314321a78a6d727" title=" " alt="" coords="1154,379,1211,405"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#ae4e29916219b9293b37f9c34220694fe" title=" " alt="" coords="891,379,954,405"/>
</map>
</div>

</div>
</div>
<a id="aee72faa31a0c32b410aba558ef1d59f2" name="aee72faa31a0c32b410aba558ef1d59f2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aee72faa31a0c32b410aba558ef1d59f2">&#9670;&#160;</a></span>sys_exit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sys_exit </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d35/sysproc_8c_source.html#l00025">25</a> of file <a class="el" href="../../dd/d35/sysproc_8c_source.html">sysproc.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   26</span>{</div>
<div class="line"><span class="lineno">   27</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#aaf98ef7cdde3a0dfb2e49919de3298b1">exit</a>();</div>
<div class="line"><span class="lineno">   28</span>  <span class="keywordflow">return</span> 0;  <span class="comment">// not reached</span></div>
<div class="line"><span class="lineno">   29</span>}</div>
<div class="ttc" id="adefs_8h_html_aaf98ef7cdde3a0dfb2e49919de3298b1"><div class="ttname"><a href="../../d5/d64/defs_8h.html#aaf98ef7cdde3a0dfb2e49919de3298b1">exit</a></div><div class="ttdeci">void exit(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dda/proc_8c_source.html#l00228">proc.c:228</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../db/dd8/syscall_8c_aee72faa31a0c32b410aba558ef1d59f2_cgraph.png" border="0" usemap="#adb/dd8/syscall_8c_aee72faa31a0c32b410aba558ef1d59f2_cgraph" alt=""/></div>
<map name="adb/dd8/syscall_8c_aee72faa31a0c32b410aba558ef1d59f2_cgraph" id="adb/dd8/syscall_8c_aee72faa31a0c32b410aba558ef1d59f2_cgraph">
<area shape="rect" title=" " alt="" coords="5,959,76,984"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#aaf98ef7cdde3a0dfb2e49919de3298b1" title=" " alt="" coords="124,959,167,984"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="1192,1035,1256,1060"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="1675,1260,1728,1285"/>
<area shape="rect" href="../../d7/df8/log_8c.html#ac96aa31ffc0500e749c62c4d377c21c9" title=" " alt="" coords="649,832,723,857"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a41af0935f3989aae450cf8988cd9c3a9" title=" " alt="" coords="1061,325,1127,351"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad788da91743c333b5bed7c4a0dd12365" title=" " alt="" coords="931,477,988,503"/>
<area shape="rect" href="../../d7/df8/log_8c.html#ac0f12be0ca0de555e60b27b06a57a65b" title=" " alt="" coords="927,1592,991,1617"/>
<area shape="rect" href="../../d6/d13/file_8c.html#ae557c81ab89c24219146144bb6adaa2c" title=" " alt="" coords="215,1452,285,1477"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#ab3c447f135c68e4c3c1f8d5866f6e77b" title=" " alt="" coords="333,984,376,1009"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="1315,1085,1407,1111"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="1329,579,1392,604"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="1565,705,1627,731"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="1455,680,1517,705"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="2028,93,2084,119"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="1793,1085,1851,1111"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="1793,1135,1851,1160"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="1776,1184,1868,1209"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="1916,1035,1980,1060"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ae70cc0370342e46f6db3bec367232457" title=" " alt="" coords="796,680,849,705"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a9fa00b0be5d3c4781048861e2506eb63" title=" " alt="" coords="1055,427,1133,452"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a1d9e7047d3dfb57809a2541d8387705e" title=" " alt="" coords="1195,427,1253,452"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a02ca0670bc1fe12e38453082631ff360" title=" " alt="" coords="1181,528,1267,553"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a87c90f0ab2a1b11c2b55f4e483bb8493" title=" " alt="" coords="1318,680,1403,705"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a4a34d9f03e436cfa09b88f735f6ee952" title=" " alt="" coords="1061,1592,1127,1617"/>
<area shape="rect" href="../../d1/d47/pipe_8c.html#a48642f54734698f6f881ee07723292cb" title=" " alt="" coords="921,1732,998,1757"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#aaad2d7a86d4859982dd9a132f5128ff2" title=" " alt="" coords="639,680,733,705"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a7220afa8e5f4bea540eb95879ea7df6e" title=" " alt="" coords="424,1136,488,1161"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#aa997067c2c9bfef15af6fa0a10c20f4a" title=" " alt="" coords="912,1541,1007,1567"/>
<area shape="rect" href="../../dc/de6/bio_8c.html#a30b8d2ef2300ed8e3d879a428fe39898" title=" " alt="" coords="536,1060,591,1085"/>
<area shape="rect" href="../../d1/db0/string_8c.html#a07f97e2ed1ce37955192d52de8f4911f" title=" " alt="" coords="781,1136,864,1161"/>
<area shape="rect" href="../../dc/de6/bio_8c.html#ab5335aeb503731104314321a78a6d727" title=" " alt="" coords="794,1288,851,1313"/>
<area shape="rect" href="../../d7/df8/log_8c.html#a7eacb0fbebe5ce4c7d3ddea15908b13d" title=" " alt="" coords="1057,1389,1131,1415"/>
<area shape="rect" href="../../da/d9b/memide_8c.html#a7f36b008f02088c86f76e98e05b55af5" title=" " alt="" coords="659,1035,713,1060"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#a6fdbe54cbecd8fc67d74793b27adcf05" title=" " alt="" coords="912,680,1007,705"/>
<area shape="rect" href="../../d4/def/kalloc_8c.html#aced59ecf8411235f6dffc065236711a5" title=" " alt="" coords="1069,1744,1119,1769"/>
<area shape="rect" href="../../db/d8a/ulib_8c.html#aa9cdc2409c15ccd5ee3b2031576f4093" title=" " alt="" coords="1189,1795,1259,1820"/>
</map>
</div>

</div>
</div>
<a id="a3b05102e512b34446a54334f916ba5cd" name="a3b05102e512b34446a54334f916ba5cd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3b05102e512b34446a54334f916ba5cd">&#9670;&#160;</a></span>sys_fork()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sys_fork </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d35/sysproc_8c_source.html#l00019">19</a> of file <a class="el" href="../../dd/d35/sysproc_8c_source.html">sysproc.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   20</span>{</div>
<div class="line"><span class="lineno">   21</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="../../d5/d64/defs_8h.html#acd2e1ded4bb6fce4500438bf928330f4">fork</a>();</div>
<div class="line"><span class="lineno">   22</span>}</div>
<div class="ttc" id="adefs_8h_html_acd2e1ded4bb6fce4500438bf928330f4"><div class="ttname"><a href="../../d5/d64/defs_8h.html#acd2e1ded4bb6fce4500438bf928330f4">fork</a></div><div class="ttdeci">int fork(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dda/proc_8c_source.html#l00181">proc.c:181</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../db/dd8/syscall_8c_a3b05102e512b34446a54334f916ba5cd_cgraph.png" border="0" usemap="#adb/dd8/syscall_8c_a3b05102e512b34446a54334f916ba5cd_cgraph" alt=""/></div>
<map name="adb/dd8/syscall_8c_a3b05102e512b34446a54334f916ba5cd_cgraph" id="adb/dd8/syscall_8c_a3b05102e512b34446a54334f916ba5cd_cgraph">
<area shape="rect" title=" " alt="" coords="5,1337,77,1362"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#acd2e1ded4bb6fce4500438bf928330f4" title=" " alt="" coords="125,1337,169,1362"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="1309,1411,1373,1437"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="2025,1359,2089,1385"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a1b57bfa0091c9be3ccc16dbb85ce3acf" title=" " alt="" coords="221,575,296,601"/>
<area shape="rect" href="../../d4/def/kalloc_8c.html#aced59ecf8411235f6dffc065236711a5" title=" " alt="" coords="1194,221,1245,246"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a41af0935f3989aae450cf8988cd9c3a9" title=" " alt="" coords="1187,1967,1252,1993"/>
<area shape="rect" href="../../d6/d13/file_8c.html#a9ef0346d08d8ed79ce2a9c03f9a4b4b2" title=" " alt="" coords="1189,1918,1249,1943"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a24a91383ab80b4b8a1ef1f4df896035c" title=" " alt="" coords="1196,347,1243,373"/>
<area shape="rect" href="../../d1/db0/string_8c.html#aca73516e4b2fdb2663e0d26f855ac3ca" title=" " alt="" coords="217,2329,300,2354"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="1424,1359,1516,1385"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="1439,1866,1501,1891"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="1675,1714,1736,1739"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="1784,1057,1837,1082"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="1564,1663,1627,1689"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="2137,2119,2193,2145"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="1902,1511,1961,1537"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="1902,1233,1961,1258"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="1885,1057,1977,1082"/>
<area shape="rect" href="../../de/de9/vm_8c.html#aa883924e2f068c520b695cdc168e1603" title=" " alt="" coords="917,398,979,423"/>
<area shape="rect" href="../../d4/def/kalloc_8c.html#a5e965f6365c721b5b23c12d16d45c3dc" title=" " alt="" coords="1057,499,1113,525"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#aa1c6e6e76813ccb29a29bb119dba668a" title=" " alt="" coords="348,1337,399,1362"/>
<area shape="rect" href="../../d1/db0/string_8c.html#a07f97e2ed1ce37955192d52de8f4911f" title=" " alt="" coords="907,1362,989,1387"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a1c8a7a02e9391b5cf0984388216695c0" title=" " alt="" coords="772,449,851,474"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a6d3019ea15a9bfdc5131ae97f3623c49" title=" " alt="" coords="1041,297,1129,322"/>
<area shape="rect" href="../../db/d8a/ulib_8c.html#aa9cdc2409c15ccd5ee3b2031576f4093" title=" " alt="" coords="1307,94,1376,119"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#aaf98ef7cdde3a0dfb2e49919de3298b1" title=" " alt="" coords="455,1462,498,1487"/>
<area shape="rect" href="../../df/d5d/umalloc_8c.html#adebb229f063e66907017098087cbe791" title=" " alt="" coords="455,1361,499,1386"/>
<area shape="rect" href="../../d8/ddb/user_8h.html#a939cb25a305fe68aad9b365077f1a8c7" title=" " alt="" coords="448,1410,505,1435"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a650cf0caaaa8b75f653c1c92818d03a4" title=" " alt="" coords="1200,702,1239,727"/>
<area shape="rect" href="../../df/d5d/umalloc_8c.html#ac131c16d1dcb6bea908d0237c82e981d" title=" " alt="" coords="447,1311,507,1337"/>
<area shape="rect" href="../../d5/de1/forktest_8c.html#a249680925885256274fa9f02dd51cec4" title=" " alt="" coords="451,2054,502,2079"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#af6f31822f7e737b4e414bdac1ccb59a4" title=" " alt="" coords="788,702,835,727"/>
<area shape="rect" href="../../d7/df8/log_8c.html#ac96aa31ffc0500e749c62c4d377c21c9" title=" " alt="" coords="774,1866,849,1891"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad788da91743c333b5bed7c4a0dd12365" title=" " alt="" coords="1056,2121,1113,2146"/>
<area shape="rect" href="../../d7/df8/log_8c.html#ac0f12be0ca0de555e60b27b06a57a65b" title=" " alt="" coords="1053,1234,1117,1259"/>
<area shape="rect" href="../../d6/d13/file_8c.html#ae557c81ab89c24219146144bb6adaa2c" title=" " alt="" coords="555,1185,625,1210"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#ab3c447f135c68e4c3c1f8d5866f6e77b" title=" " alt="" coords="673,1462,716,1487"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ae70cc0370342e46f6db3bec367232457" title=" " alt="" coords="921,1817,975,1842"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a9fa00b0be5d3c4781048861e2506eb63" title=" " alt="" coords="1180,2119,1259,2145"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a1d9e7047d3dfb57809a2541d8387705e" title=" " alt="" coords="1313,2170,1370,2195"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a4a34d9f03e436cfa09b88f735f6ee952" title=" " alt="" coords="1186,1259,1253,1285"/>
<area shape="rect" href="../../d1/d47/pipe_8c.html#a48642f54734698f6f881ee07723292cb" title=" " alt="" coords="1046,905,1123,930"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#aaad2d7a86d4859982dd9a132f5128ff2" title=" " alt="" coords="764,1817,859,1842"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a7220afa8e5f4bea540eb95879ea7df6e" title=" " alt="" coords="779,1463,843,1489"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#aa997067c2c9bfef15af6fa0a10c20f4a" title=" " alt="" coords="1037,1411,1132,1437"/>
<area shape="rect" href="../../dc/de6/bio_8c.html#a30b8d2ef2300ed8e3d879a428fe39898" title=" " alt="" coords="921,1463,975,1489"/>
<area shape="rect" href="../../dc/de6/bio_8c.html#ab5335aeb503731104314321a78a6d727" title=" " alt="" coords="919,1513,977,1538"/>
<area shape="rect" href="../../db/d8a/ulib_8c.html#a59b5e6e6105ef0e97aed266ec6fdfe60" title=" " alt="" coords="563,2103,617,2129"/>
<area shape="rect" href="../../d8/ddb/user_8h.html#ae57e95d717eb7386cd8b935a0c136abe" title=" " alt="" coords="565,2054,615,2079"/>
</map>
</div>

</div>
</div>
<a id="ac243c8f20f5fb2e3e257b5007af2c204" name="ac243c8f20f5fb2e3e257b5007af2c204"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac243c8f20f5fb2e3e257b5007af2c204">&#9670;&#160;</a></span>sys_fstat()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sys_fstat </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/d14/sysfile_8c_source.html#l00107">107</a> of file <a class="el" href="../../d1/d14/sysfile_8c_source.html">sysfile.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  108</span>{</div>
<div class="line"><span class="lineno">  109</span>  <span class="keyword">struct </span><a class="code hl_struct" href="../../d7/d3a/structfile.html">file</a> *f;</div>
<div class="line"><span class="lineno">  110</span>  <span class="keyword">struct </span><a class="code hl_struct" href="../../da/de7/structstat.html">stat</a> *st;</div>
<div class="line"><span class="lineno">  111</span> </div>
<div class="line"><span class="lineno">  112</span>  <span class="keywordflow">if</span>(argfd(0, 0, &amp;f) &lt; 0 || <a class="code hl_function" href="../../d5/d64/defs_8h.html#a05c7464938c27eb91540c06ec6137f26">argptr</a>(1, (<span class="keywordtype">void</span>*)&amp;st, <span class="keyword">sizeof</span>(*st)) &lt; 0)</div>
<div class="line"><span class="lineno">  113</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  114</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="../../d5/d64/defs_8h.html#ac4979f97957194db01001985b1bfa84e">filestat</a>(f, st);</div>
<div class="line"><span class="lineno">  115</span>}</div>
<div class="ttc" id="adefs_8h_html_a05c7464938c27eb91540c06ec6137f26"><div class="ttname"><a href="../../d5/d64/defs_8h.html#a05c7464938c27eb91540c06ec6137f26">argptr</a></div><div class="ttdeci">int argptr(int, char **, int)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/dd8/syscall_8c_source.html#l00059">syscall.c:59</a></div></div>
<div class="ttc" id="adefs_8h_html_ac4979f97957194db01001985b1bfa84e"><div class="ttname"><a href="../../d5/d64/defs_8h.html#ac4979f97957194db01001985b1bfa84e">filestat</a></div><div class="ttdeci">int filestat(struct file *, struct stat *)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l00084">file.c:84</a></div></div>
<div class="ttc" id="astructstat_html"><div class="ttname"><a href="../../da/de7/structstat.html">stat</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d1b/stat_8h_source.html#l00005">stat.h:5</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../db/dd8/syscall_8c_ac243c8f20f5fb2e3e257b5007af2c204_cgraph.png" border="0" usemap="#adb/dd8/syscall_8c_ac243c8f20f5fb2e3e257b5007af2c204_cgraph" alt=""/></div>
<map name="adb/dd8/syscall_8c_ac243c8f20f5fb2e3e257b5007af2c204_cgraph" id="adb/dd8/syscall_8c_ac243c8f20f5fb2e3e257b5007af2c204_cgraph">
<area shape="rect" title=" " alt="" coords="5,991,81,1017"/>
<area shape="rect" href="../../db/dd8/syscall_8c.html#a6ade9205d1f46b759cf93b60513a3421" title=" " alt="" coords="595,322,650,347"/>
<area shape="rect" href="../../d6/d13/file_8c.html#afff8e849fa54dea2a5a27dbb97474607" title=" " alt="" coords="129,1143,191,1169"/>
<area shape="rect" href="../../db/dd8/syscall_8c.html#ade56ef2176f85cd61e7b91b400e7d4d3" title=" " alt="" coords="716,322,771,347"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a41af0935f3989aae450cf8988cd9c3a9" title=" " alt="" coords="975,347,1041,373"/>
<area shape="rect" href="../../db/dd8/syscall_8c.html#a918cadc6c55aa7ac38982659c27a3a75" title=" " alt="" coords="837,297,903,322"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="1099,575,1160,601"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="1746,651,1802,677"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="1743,94,1805,119"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="1367,753,1426,778"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="1229,903,1282,929"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="1367,903,1426,929"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="1351,854,1443,879"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="1491,499,1555,525"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="1491,1182,1555,1207"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="1603,499,1695,525"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="1617,349,1680,374"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#aed28187406d84a3aa71f10c6235a03ec" title=" " alt="" coords="239,1119,288,1145"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#ae4e29916219b9293b37f9c34220694fe" title=" " alt="" coords="712,1246,775,1271"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a4ccff0bd4d9802e709d0af8d71a59861" title=" " alt="" coords="240,1169,287,1194"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#aaad2d7a86d4859982dd9a132f5128ff2" title=" " alt="" coords="439,739,533,765"/>
<area shape="rect" href="../../dc/de6/bio_8c.html#a30b8d2ef2300ed8e3d879a428fe39898" title=" " alt="" coords="336,1043,391,1069"/>
<area shape="rect" href="../../d1/db0/string_8c.html#a07f97e2ed1ce37955192d52de8f4911f" title=" " alt="" coords="581,1119,664,1145"/>
<area shape="rect" href="../../dc/de6/bio_8c.html#ab5335aeb503731104314321a78a6d727" title=" " alt="" coords="715,1151,772,1177"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ae70cc0370342e46f6db3bec367232457" title=" " alt="" coords="596,739,649,765"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad788da91743c333b5bed7c4a0dd12365" title=" " alt="" coords="715,601,772,626"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a9fa00b0be5d3c4781048861e2506eb63" title=" " alt="" coords="831,702,909,727"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a1d9e7047d3dfb57809a2541d8387705e" title=" " alt="" coords="979,499,1037,525"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a02ca0670bc1fe12e38453082631ff360" title=" " alt="" coords="965,601,1051,626"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a87c90f0ab2a1b11c2b55f4e483bb8493" title=" " alt="" coords="965,702,1051,727"/>
<area shape="rect" href="../../da/d9b/memide_8c.html#a7f36b008f02088c86f76e98e05b55af5" title=" " alt="" coords="459,1018,513,1043"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#a6fdbe54cbecd8fc67d74793b27adcf05" title=" " alt="" coords="823,1006,917,1031"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#aa997067c2c9bfef15af6fa0a10c20f4a" title=" " alt="" coords="1208,1157,1303,1182"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a4a34d9f03e436cfa09b88f735f6ee952" title=" " alt="" coords="1363,1055,1430,1081"/>
</map>
</div>

</div>
</div>
<a id="ac81965412a0725574b8c72afda11243e" name="ac81965412a0725574b8c72afda11243e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac81965412a0725574b8c72afda11243e">&#9670;&#160;</a></span>sys_getpid()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sys_getpid </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d35/sysproc_8c_source.html#l00048">48</a> of file <a class="el" href="../../dd/d35/sysproc_8c_source.html">sysproc.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   49</span>{</div>
<div class="line"><span class="lineno">   50</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="../../d5/d64/defs_8h.html#a3d2327db1e34643f4a9e6a07c8cc62c6">myproc</a>()-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#acf2bdf54d1f957ccbcdc987007029944">pid</a>;</div>
<div class="line"><span class="lineno">   51</span>}</div>
<div class="ttc" id="astructproc_html_acf2bdf54d1f957ccbcdc987007029944"><div class="ttname"><a href="../../de/d48/structproc.html#acf2bdf54d1f957ccbcdc987007029944">proc::pid</a></div><div class="ttdeci">int pid</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d03/proc_8h_source.html#l00043">proc.h:43</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../db/dd8/syscall_8c_ac81965412a0725574b8c72afda11243e_cgraph.png" border="0" usemap="#adb/dd8/syscall_8c_ac81965412a0725574b8c72afda11243e_cgraph" alt=""/></div>
<map name="adb/dd8/syscall_8c_ac81965412a0725574b8c72afda11243e_cgraph" id="adb/dd8/syscall_8c_ac81965412a0725574b8c72afda11243e_cgraph">
<area shape="rect" title=" " alt="" coords="5,170,91,195"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a41af0935f3989aae450cf8988cd9c3a9" title=" " alt="" coords="139,170,204,195"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="252,170,313,195"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="858,447,914,473"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="855,75,917,101"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="479,195,538,221"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="361,297,415,322"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="479,297,538,322"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="463,346,555,371"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="603,221,667,246"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="603,315,667,341"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="715,209,807,234"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="729,258,792,283"/>
</map>
</div>

</div>
</div>
<a id="a65e52d7f297b2757ffbf46e4deccf188" name="a65e52d7f297b2757ffbf46e4deccf188"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a65e52d7f297b2757ffbf46e4deccf188">&#9670;&#160;</a></span>sys_getprocs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sys_getprocs </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d35/sysproc_8c_source.html#l00137">137</a> of file <a class="el" href="../../dd/d35/sysproc_8c_source.html">sysproc.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  137</span>                  {</div>
<div class="line"><span class="lineno">  138</span>  <span class="comment">// declare local variables for max uproc size, struct uproc, and counter</span></div>
<div class="line"><span class="lineno">  139</span>  <span class="keywordtype">int</span> max;</div>
<div class="line"><span class="lineno">  140</span>  <span class="keyword">struct </span><a class="code hl_struct" href="../../d3/d1f/structuproc.html">uproc</a> *p;</div>
<div class="line"><span class="lineno">  141</span>  <span class="keywordtype">int</span> i=0;</div>
<div class="line"><span class="lineno">  142</span> </div>
<div class="line"><span class="lineno">  143</span>  <span class="comment">// if argint has trouble, return error -1</span></div>
<div class="line"><span class="lineno">  144</span>  <span class="keywordflow">if</span>(<a class="code hl_function" href="../../d5/d64/defs_8h.html#a75bc8d8c7ea0b4b39d4f470e18e0dba7">argint</a>(0,&amp;max) &lt; 0)</div>
<div class="line"><span class="lineno">  145</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  146</span> </div>
<div class="line"><span class="lineno">  147</span>  <span class="comment">// if argptr for allocating struct size has trouble, return -1</span></div>
<div class="line"><span class="lineno">  148</span>  <span class="keywordflow">if</span>(<a class="code hl_function" href="../../d5/d64/defs_8h.html#a05c7464938c27eb91540c06ec6137f26">argptr</a>(1,(<span class="keywordtype">char</span>**)&amp;p, max*<span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code hl_struct" href="../../d3/d1f/structuproc.html">uproc</a>)) &lt; 0)</div>
<div class="line"><span class="lineno">  149</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  150</span> </div>
<div class="line"><span class="lineno">  151</span>  <span class="comment">// create pointer to ptable processes</span></div>
<div class="line"><span class="lineno">  152</span>  <span class="keyword">struct </span><a class="code hl_struct" href="../../de/d48/structproc.html">proc</a> *ptr = <a class="code hl_variable" href="../../dd/d35/sysproc_8c.html#ae184b491d39d06a7ba30c72b18472ad3">ptable</a>.proc;</div>
<div class="line"><span class="lineno">  153</span> </div>
<div class="line"><span class="lineno">  154</span>  <span class="comment">// loop through ptable</span></div>
<div class="line"><span class="lineno">  155</span>  <span class="keywordflow">for</span>(; ptr &lt; &amp;<a class="code hl_variable" href="../../dd/d35/sysproc_8c.html#ae184b491d39d06a7ba30c72b18472ad3">ptable</a>.proc[<a class="code hl_define" href="../../d5/d33/param_8h.html#a810c5b751df5bb30588613ed91095129">NPROC</a>]; ptr++)</div>
<div class="line"><span class="lineno">  156</span>  {</div>
<div class="line"><span class="lineno">  157</span>    <span class="keywordflow">if</span>(!(ptr-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#a0f2fe91548a1382672ae26e29ca9e736">state</a> == <a class="code hl_enumvalue" href="../../df/d03/proc_8h.html#aa1ced7d2b60040fded3fa873d0c03ba7aa09b651ef326a9d8efcee5cc5b720ab4">UNUSED</a>))</div>
<div class="line"><span class="lineno">  158</span>    {</div>
<div class="line"><span class="lineno">  159</span>      <span class="comment">// if the process in ptable is not UNUSED, assign pid, parent pid, and name to uproc</span></div>
<div class="line"><span class="lineno">  160</span>      p[i].pid = ptr-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#acf2bdf54d1f957ccbcdc987007029944">pid</a>;</div>
<div class="line"><span class="lineno">  161</span>      p[i].ppid = ptr-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#a14ea8849701ffafba4d142725de154d4">parent</a>-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#acf2bdf54d1f957ccbcdc987007029944">pid</a>;</div>
<div class="line"><span class="lineno">  162</span>      <a class="code hl_function" href="../../d5/d64/defs_8h.html#a66107cd2364627727a36cef6c773b39c">strncpy</a>(p[i].<a class="code hl_variable" href="../../de/dc0/usertests_8c.html#aee754febd402311e2a552cb0d6ab6629">name</a>, ptr-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#ac04af53e17d24b90c3cbfab56d658d62">name</a>, 16);</div>
<div class="line"><span class="lineno">  163</span>      <span class="comment">// add 1 to the process counter</span></div>
<div class="line"><span class="lineno">  164</span>      i++;</div>
<div class="line"><span class="lineno">  165</span>    }</div>
<div class="line"><span class="lineno">  166</span>  }</div>
<div class="line"><span class="lineno">  167</span>  </div>
<div class="line"><span class="lineno">  168</span>  <span class="comment">// return the number of processes that are not UNUSED</span></div>
<div class="line"><span class="lineno">  169</span>  <span class="keywordflow">return</span> i;</div>
<div class="line"><span class="lineno">  170</span>}</div>
<div class="ttc" id="adefs_8h_html_a66107cd2364627727a36cef6c773b39c"><div class="ttname"><a href="../../d5/d64/defs_8h.html#a66107cd2364627727a36cef6c773b39c">strncpy</a></div><div class="ttdeci">char * strncpy(char *, const char *, int)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/db0/string_8c_source.html#l00069">string.c:69</a></div></div>
<div class="ttc" id="aparam_8h_html_a810c5b751df5bb30588613ed91095129"><div class="ttname"><a href="../../d5/d33/param_8h.html#a810c5b751df5bb30588613ed91095129">NPROC</a></div><div class="ttdeci">#define NPROC</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d33/param_8h_source.html#l00001">param.h:1</a></div></div>
<div class="ttc" id="aproc_8h_html_aa1ced7d2b60040fded3fa873d0c03ba7aa09b651ef326a9d8efcee5cc5b720ab4"><div class="ttname"><a href="../../df/d03/proc_8h.html#aa1ced7d2b60040fded3fa873d0c03ba7aa09b651ef326a9d8efcee5cc5b720ab4">UNUSED</a></div><div class="ttdeci">@ UNUSED</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d03/proc_8h_source.html#l00035">proc.h:35</a></div></div>
<div class="ttc" id="astructproc_html_a0f2fe91548a1382672ae26e29ca9e736"><div class="ttname"><a href="../../de/d48/structproc.html#a0f2fe91548a1382672ae26e29ca9e736">proc::state</a></div><div class="ttdeci">enum procstate state</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d03/proc_8h_source.html#l00042">proc.h:42</a></div></div>
<div class="ttc" id="astructproc_html_a14ea8849701ffafba4d142725de154d4"><div class="ttname"><a href="../../de/d48/structproc.html#a14ea8849701ffafba4d142725de154d4">proc::parent</a></div><div class="ttdeci">struct proc * parent</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d03/proc_8h_source.html#l00044">proc.h:44</a></div></div>
<div class="ttc" id="astructproc_html_ac04af53e17d24b90c3cbfab56d658d62"><div class="ttname"><a href="../../de/d48/structproc.html#ac04af53e17d24b90c3cbfab56d658d62">proc::name</a></div><div class="ttdeci">char name[16]</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d03/proc_8h_source.html#l00051">proc.h:51</a></div></div>
<div class="ttc" id="astructuproc_html"><div class="ttname"><a href="../../d3/d1f/structuproc.html">uproc</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d1f/uproc_8h_source.html#l00001">uproc.h:1</a></div></div>
<div class="ttc" id="asysproc_8c_html_ae184b491d39d06a7ba30c72b18472ad3"><div class="ttname"><a href="../../dd/d35/sysproc_8c.html#ae184b491d39d06a7ba30c72b18472ad3">ptable</a></div><div class="ttdeci">struct @8 ptable</div></div>
<div class="ttc" id="ausertests_8c_html_aee754febd402311e2a552cb0d6ab6629"><div class="ttname"><a href="../../de/dc0/usertests_8c.html#aee754febd402311e2a552cb0d6ab6629">name</a></div><div class="ttdeci">char name[3]</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dc0/usertests_8c_source.html#l00012">usertests.c:12</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../db/dd8/syscall_8c_a65e52d7f297b2757ffbf46e4deccf188_cgraph.png" border="0" usemap="#adb/dd8/syscall_8c_a65e52d7f297b2757ffbf46e4deccf188_cgraph" alt=""/></div>
<map name="adb/dd8/syscall_8c_a65e52d7f297b2757ffbf46e4deccf188_cgraph" id="adb/dd8/syscall_8c_a65e52d7f297b2757ffbf46e4deccf188_cgraph">
<area shape="rect" title=" " alt="" coords="5,221,105,246"/>
<area shape="rect" href="../../db/dd8/syscall_8c.html#ade56ef2176f85cd61e7b91b400e7d4d3" title=" " alt="" coords="267,170,321,195"/>
<area shape="rect" href="../../db/dd8/syscall_8c.html#a6ade9205d1f46b759cf93b60513a3421" title=" " alt="" coords="159,221,213,246"/>
<area shape="rect" href="../../d1/db0/string_8c.html#a2d641d114b243d1a2d5284129a4f7078" title=" " alt="" coords="153,270,219,295"/>
<area shape="rect" href="../../db/dd8/syscall_8c.html#a918cadc6c55aa7ac38982659c27a3a75" title=" " alt="" coords="369,119,435,145"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a41af0935f3989aae450cf8988cd9c3a9" title=" " alt="" coords="483,170,548,195"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="596,170,657,195"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="1202,447,1258,473"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="1199,69,1261,94"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="823,195,882,221"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="705,297,759,322"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="823,297,882,322"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="807,346,899,371"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="947,233,1011,258"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="947,359,1011,385"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="1059,209,1151,234"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="1073,258,1136,283"/>
</map>
</div>

</div>
</div>
<a id="a05c333cee816dc0cb3bf7dbe435dfcef" name="a05c333cee816dc0cb3bf7dbe435dfcef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a05c333cee816dc0cb3bf7dbe435dfcef">&#9670;&#160;</a></span>sys_halt()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sys_halt </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d35/sysproc_8c_source.html#l00111">111</a> of file <a class="el" href="../../dd/d35/sysproc_8c_source.html">sysproc.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  112</span>{</div>
<div class="line"><span class="lineno">  113</span>  outb(0xf4, 0x00);</div>
<div class="line"><span class="lineno">  114</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  115</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ad766b54842470b464a6497bb5c514e59" name="ad766b54842470b464a6497bb5c514e59"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad766b54842470b464a6497bb5c514e59">&#9670;&#160;</a></span>sys_kill()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sys_kill </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d35/sysproc_8c_source.html#l00038">38</a> of file <a class="el" href="../../dd/d35/sysproc_8c_source.html">sysproc.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   39</span>{</div>
<div class="line"><span class="lineno">   40</span>  <span class="keywordtype">int</span> pid;</div>
<div class="line"><span class="lineno">   41</span> </div>
<div class="line"><span class="lineno">   42</span>  <span class="keywordflow">if</span>(<a class="code hl_function" href="../../d5/d64/defs_8h.html#a75bc8d8c7ea0b4b39d4f470e18e0dba7">argint</a>(0, &amp;pid) &lt; 0)</div>
<div class="line"><span class="lineno">   43</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">   44</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="../../d5/d64/defs_8h.html#ab893e9671d6bfe2b2604002a50639f21">kill</a>(pid);</div>
<div class="line"><span class="lineno">   45</span>}</div>
<div class="ttc" id="adefs_8h_html_ab893e9671d6bfe2b2604002a50639f21"><div class="ttname"><a href="../../d5/d64/defs_8h.html#ab893e9671d6bfe2b2604002a50639f21">kill</a></div><div class="ttdeci">int kill(int)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dda/proc_8c_source.html#l00480">proc.c:480</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../db/dd8/syscall_8c_ad766b54842470b464a6497bb5c514e59_cgraph.png" border="0" usemap="#adb/dd8/syscall_8c_ad766b54842470b464a6497bb5c514e59_cgraph" alt=""/></div>
<map name="adb/dd8/syscall_8c_ad766b54842470b464a6497bb5c514e59_cgraph" id="adb/dd8/syscall_8c_ad766b54842470b464a6497bb5c514e59_cgraph">
<area shape="rect" title=" " alt="" coords="5,119,72,145"/>
<area shape="rect" href="../../db/dd8/syscall_8c.html#ade56ef2176f85cd61e7b91b400e7d4d3" title=" " alt="" coords="120,270,175,295"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a650cf0caaaa8b75f653c1c92818d03a4" title=" " alt="" coords="687,145,725,170"/>
<area shape="rect" href="../../db/dd8/syscall_8c.html#a918cadc6c55aa7ac38982659c27a3a75" title=" " alt="" coords="223,270,288,295"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a41af0935f3989aae450cf8988cd9c3a9" title=" " alt="" coords="336,321,401,346"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="449,397,511,422"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="1055,94,1111,119"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="1052,447,1115,473"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="677,397,735,422"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="559,271,612,297"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="677,246,735,271"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="660,295,752,321"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="800,346,864,371"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="800,195,864,221"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="912,422,1004,447"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="927,321,989,346"/>
</map>
</div>

</div>
</div>
<a id="a759600870314007ac558871239122fb7" name="a759600870314007ac558871239122fb7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a759600870314007ac558871239122fb7">&#9670;&#160;</a></span>sys_link()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sys_link </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/d14/sysfile_8c_source.html#l00119">119</a> of file <a class="el" href="../../d1/d14/sysfile_8c_source.html">sysfile.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  120</span>{</div>
<div class="line"><span class="lineno">  121</span>  <span class="keywordtype">char</span> <a class="code hl_variable" href="../../de/dc0/usertests_8c.html#aee754febd402311e2a552cb0d6ab6629">name</a>[<a class="code hl_define" href="../../df/d26/fs_8h.html#a48246fb9e5cb7f6a71ebc9ebc2f06562">DIRSIZ</a>], *<span class="keyword">new</span>, *old;</div>
<div class="line"><span class="lineno">  122</span>  <span class="keyword">struct </span><a class="code hl_struct" href="../../d0/df8/structinode.html">inode</a> *dp, *ip;</div>
<div class="line"><span class="lineno">  123</span> </div>
<div class="line"><span class="lineno">  124</span>  <span class="keywordflow">if</span>(<a class="code hl_function" href="../../d5/d64/defs_8h.html#afc00cb2e6a06b1021f3d82fa4d0eff07">argstr</a>(0, &amp;old) &lt; 0 || <a class="code hl_function" href="../../d5/d64/defs_8h.html#afc00cb2e6a06b1021f3d82fa4d0eff07">argstr</a>(1, &amp;<span class="keyword">new</span>) &lt; 0)</div>
<div class="line"><span class="lineno">  125</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  126</span> </div>
<div class="line"><span class="lineno">  127</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#a603ca98212e00d2ffdba7827ef0f1003">begin_op</a>();</div>
<div class="line"><span class="lineno">  128</span>  <span class="keywordflow">if</span>((ip = <a class="code hl_function" href="../../d5/d64/defs_8h.html#acde7d3975db286253e584452ba03a54f">namei</a>(old)) == 0){</div>
<div class="line"><span class="lineno">  129</span>    <a class="code hl_function" href="../../d5/d64/defs_8h.html#a2504e37a109f9bae5ca11fe89e4e8fa1">end_op</a>();</div>
<div class="line"><span class="lineno">  130</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  131</span>  }</div>
<div class="line"><span class="lineno">  132</span> </div>
<div class="line"><span class="lineno">  133</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#a29a4d743d41fe659f74b0a57fdc25012">ilock</a>(ip);</div>
<div class="line"><span class="lineno">  134</span>  <span class="keywordflow">if</span>(ip-&gt;<a class="code hl_variable" href="../../d0/df8/structinode.html#a8d74bec2898785c057111c328d23fda2">type</a> == <a class="code hl_define" href="../../d2/d1b/stat_8h.html#a91136bcd71a9f499304f5d7e7e9d6376">T_DIR</a>){</div>
<div class="line"><span class="lineno">  135</span>    <a class="code hl_function" href="../../d5/d64/defs_8h.html#adff5bb5a1eeaf921853ec06479f8c49b">iunlockput</a>(ip);</div>
<div class="line"><span class="lineno">  136</span>    <a class="code hl_function" href="../../d5/d64/defs_8h.html#a2504e37a109f9bae5ca11fe89e4e8fa1">end_op</a>();</div>
<div class="line"><span class="lineno">  137</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  138</span>  }</div>
<div class="line"><span class="lineno">  139</span> </div>
<div class="line"><span class="lineno">  140</span>  ip-&gt;<a class="code hl_variable" href="../../d0/df8/structinode.html#af8b88b409bea7ef99c49a55f387538b2">nlink</a>++;</div>
<div class="line"><span class="lineno">  141</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#a2ee6784c123b2a2656d88b5b357f2253">iupdate</a>(ip);</div>
<div class="line"><span class="lineno">  142</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#af301c10ad8ced77a5dfb2de3a64c666c">iunlock</a>(ip);</div>
<div class="line"><span class="lineno">  143</span> </div>
<div class="line"><span class="lineno">  144</span>  <span class="keywordflow">if</span>((dp = <a class="code hl_function" href="../../d5/d64/defs_8h.html#a699674601988291ebcc47d902f18bee8">nameiparent</a>(<span class="keyword">new</span>, <a class="code hl_variable" href="../../de/dc0/usertests_8c.html#aee754febd402311e2a552cb0d6ab6629">name</a>)) == 0)</div>
<div class="line"><span class="lineno">  145</span>    <span class="keywordflow">goto</span> bad;</div>
<div class="line"><span class="lineno">  146</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#a29a4d743d41fe659f74b0a57fdc25012">ilock</a>(dp);</div>
<div class="line"><span class="lineno">  147</span>  <span class="keywordflow">if</span>(dp-&gt;<a class="code hl_variable" href="../../d0/df8/structinode.html#a121742a89c4531f03a7de1613d5be605">dev</a> != ip-&gt;<a class="code hl_variable" href="../../d0/df8/structinode.html#a121742a89c4531f03a7de1613d5be605">dev</a> || <a class="code hl_function" href="../../d5/d64/defs_8h.html#ae4ccea0aa02557162963e597737f665a">dirlink</a>(dp, <a class="code hl_variable" href="../../de/dc0/usertests_8c.html#aee754febd402311e2a552cb0d6ab6629">name</a>, ip-&gt;<a class="code hl_variable" href="../../d0/df8/structinode.html#a8acc2b9df0bfc6856da62925763db7fe">inum</a>) &lt; 0){</div>
<div class="line"><span class="lineno">  148</span>    <a class="code hl_function" href="../../d5/d64/defs_8h.html#adff5bb5a1eeaf921853ec06479f8c49b">iunlockput</a>(dp);</div>
<div class="line"><span class="lineno">  149</span>    <span class="keywordflow">goto</span> bad;</div>
<div class="line"><span class="lineno">  150</span>  }</div>
<div class="line"><span class="lineno">  151</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#adff5bb5a1eeaf921853ec06479f8c49b">iunlockput</a>(dp);</div>
<div class="line"><span class="lineno">  152</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#a29530a0afdfe924818d8c70b6724528d">iput</a>(ip);</div>
<div class="line"><span class="lineno">  153</span> </div>
<div class="line"><span class="lineno">  154</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#a2504e37a109f9bae5ca11fe89e4e8fa1">end_op</a>();</div>
<div class="line"><span class="lineno">  155</span> </div>
<div class="line"><span class="lineno">  156</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  157</span> </div>
<div class="line"><span class="lineno">  158</span>bad:</div>
<div class="line"><span class="lineno">  159</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#a29a4d743d41fe659f74b0a57fdc25012">ilock</a>(ip);</div>
<div class="line"><span class="lineno">  160</span>  ip-&gt;<a class="code hl_variable" href="../../d0/df8/structinode.html#af8b88b409bea7ef99c49a55f387538b2">nlink</a>--;</div>
<div class="line"><span class="lineno">  161</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#a2ee6784c123b2a2656d88b5b357f2253">iupdate</a>(ip);</div>
<div class="line"><span class="lineno">  162</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#adff5bb5a1eeaf921853ec06479f8c49b">iunlockput</a>(ip);</div>
<div class="line"><span class="lineno">  163</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#a2504e37a109f9bae5ca11fe89e4e8fa1">end_op</a>();</div>
<div class="line"><span class="lineno">  164</span>  <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  165</span>}</div>
<div class="ttc" id="adefs_8h_html_a2ee6784c123b2a2656d88b5b357f2253"><div class="ttname"><a href="../../d5/d64/defs_8h.html#a2ee6784c123b2a2656d88b5b357f2253">iupdate</a></div><div class="ttdeci">void iupdate(struct inode *)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d5a/fs_8c_source.html#l00221">fs.c:221</a></div></div>
<div class="ttc" id="adefs_8h_html_a699674601988291ebcc47d902f18bee8"><div class="ttname"><a href="../../d5/d64/defs_8h.html#a699674601988291ebcc47d902f18bee8">nameiparent</a></div><div class="ttdeci">struct inode * nameiparent(char *, char *)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d5a/fs_8c_source.html#l00667">fs.c:667</a></div></div>
<div class="ttc" id="adefs_8h_html_ae4ccea0aa02557162963e597737f665a"><div class="ttname"><a href="../../d5/d64/defs_8h.html#ae4ccea0aa02557162963e597737f665a">dirlink</a></div><div class="ttdeci">int dirlink(struct inode *, char *, uint)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d5a/fs_8c_source.html#l00552">fs.c:552</a></div></div>
<div class="ttc" id="afs_8h_html_a48246fb9e5cb7f6a71ebc9ebc2f06562"><div class="ttname"><a href="../../df/d26/fs_8h.html#a48246fb9e5cb7f6a71ebc9ebc2f06562">DIRSIZ</a></div><div class="ttdeci">#define DIRSIZ</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d26/fs_8h_source.html#l00051">fs.h:51</a></div></div>
<div class="ttc" id="astructinode_html_a121742a89c4531f03a7de1613d5be605"><div class="ttname"><a href="../../d0/df8/structinode.html#a121742a89c4531f03a7de1613d5be605">inode::dev</a></div><div class="ttdeci">uint dev</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d4d/file_8h_source.html#l00014">file.h:14</a></div></div>
<div class="ttc" id="astructinode_html_a8acc2b9df0bfc6856da62925763db7fe"><div class="ttname"><a href="../../d0/df8/structinode.html#a8acc2b9df0bfc6856da62925763db7fe">inode::inum</a></div><div class="ttdeci">uint inum</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d4d/file_8h_source.html#l00015">file.h:15</a></div></div>
<div class="ttc" id="astructinode_html_af8b88b409bea7ef99c49a55f387538b2"><div class="ttname"><a href="../../d0/df8/structinode.html#af8b88b409bea7ef99c49a55f387538b2">inode::nlink</a></div><div class="ttdeci">short nlink</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d4d/file_8h_source.html#l00023">file.h:23</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../db/dd8/syscall_8c_a759600870314007ac558871239122fb7_cgraph.png" border="0" usemap="#adb/dd8/syscall_8c_a759600870314007ac558871239122fb7_cgraph" alt=""/></div>
<map name="adb/dd8/syscall_8c_a759600870314007ac558871239122fb7_cgraph" id="adb/dd8/syscall_8c_a759600870314007ac558871239122fb7_cgraph">
<area shape="rect" title=" " alt="" coords="5,1589,76,1614"/>
<area shape="rect" href="../../db/dd8/syscall_8c.html#a662eedd65f3e2165093842b80e3bc024" title=" " alt="" coords="652,221,707,246"/>
<area shape="rect" href="../../d7/df8/log_8c.html#ac96aa31ffc0500e749c62c4d377c21c9" title=" " alt="" coords="642,75,717,101"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a69a135a0e8a06d9f306d77ebc0c1f7a0" title=" " alt="" coords="143,1410,199,1435"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#ab3c447f135c68e4c3c1f8d5866f6e77b" title=" " alt="" coords="281,1614,324,1639"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a7220afa8e5f4bea540eb95879ea7df6e" title=" " alt="" coords="395,1233,459,1258"/>
<area shape="rect" href="../../d7/df8/log_8c.html#ac0f12be0ca0de555e60b27b06a57a65b" title=" " alt="" coords="1329,1817,1393,1842"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#aed28187406d84a3aa71f10c6235a03ec" title=" " alt="" coords="403,905,452,930"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#ae4e29916219b9293b37f9c34220694fe" title=" " alt="" coords="785,1766,847,1791"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a207b3008bae35596c55ec7c4fc6875eb" title=" " alt="" coords="130,1639,211,1665"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a35c52ecf358097c17dcbbd5594acb41a" title=" " alt="" coords="142,1918,199,1943"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#ade44726f2aed2af27fa0df5f63f9e688" title=" " alt="" coords="124,1967,217,1993"/>
<area shape="rect" href="../../db/dd8/syscall_8c.html#ade56ef2176f85cd61e7b91b400e7d4d3" title=" " alt="" coords="789,271,843,297"/>
<area shape="rect" href="../../db/dd8/syscall_8c.html#ace37b4584713ab6bda44a282a298961f" title=" " alt="" coords="919,170,986,195"/>
<area shape="rect" href="../../db/dd8/syscall_8c.html#a918cadc6c55aa7ac38982659c27a3a75" title=" " alt="" coords="920,271,985,297"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a41af0935f3989aae450cf8988cd9c3a9" title=" " alt="" coords="1063,297,1128,322"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="1331,449,1392,474"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="1957,474,2013,499"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="1953,246,2016,271"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="1578,854,1637,879"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="1453,1106,1507,1131"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="1578,1106,1637,1131"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="1561,1057,1653,1082"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="1701,1006,1765,1031"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="1701,1410,1765,1435"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="1813,1006,1905,1031"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="1828,449,1891,474"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ae70cc0370342e46f6db3bec367232457" title=" " alt="" coords="789,817,843,842"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad788da91743c333b5bed7c4a0dd12365" title=" " alt="" coords="924,525,981,550"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a9fa00b0be5d3c4781048861e2506eb63" title=" " alt="" coords="1056,550,1135,575"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a1d9e7047d3dfb57809a2541d8387705e" title=" " alt="" coords="1205,449,1262,474"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a02ca0670bc1fe12e38453082631ff360" title=" " alt="" coords="1191,651,1276,677"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a87c90f0ab2a1b11c2b55f4e483bb8493" title=" " alt="" coords="1191,550,1276,575"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a5341068f021beac8cf0032b97d231e6f" title=" " alt="" coords="265,1410,340,1435"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a3aba1fa9f6789d09356aec5b96d91fa8" title=" " alt="" coords="402,1157,453,1182"/>
<area shape="rect" href="../../d1/db0/string_8c.html#a2d641d114b243d1a2d5284129a4f7078" title=" " alt="" coords="270,1283,335,1309"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a15858f4d8a4cc1def3d84d03c312836b" title=" " alt="" coords="276,1333,329,1358"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#ae74f6e5b19a4e7f3e72807ee67141819" title=" " alt="" coords="388,1410,467,1435"/>
<area shape="rect" href="../../d1/db0/string_8c.html#a81b6f58fa9c826f064fb6844dda4c475" title=" " alt="" coords="515,1410,584,1435"/>
<area shape="rect" href="../../dc/de6/bio_8c.html#a30b8d2ef2300ed8e3d879a428fe39898" title=" " alt="" coords="522,1031,577,1057"/>
<area shape="rect" href="../../d1/db0/string_8c.html#a07f97e2ed1ce37955192d52de8f4911f" title=" " alt="" coords="775,322,857,347"/>
<area shape="rect" href="../../dc/de6/bio_8c.html#ab5335aeb503731104314321a78a6d727" title=" " alt="" coords="787,1246,845,1271"/>
<area shape="rect" href="../../da/d9b/memide_8c.html#a7f36b008f02088c86f76e98e05b55af5" title=" " alt="" coords="653,1006,706,1031"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#a6fdbe54cbecd8fc67d74793b27adcf05" title=" " alt="" coords="905,1221,1000,1246"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#aa997067c2c9bfef15af6fa0a10c20f4a" title=" " alt="" coords="1048,1766,1143,1791"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a4a34d9f03e436cfa09b88f735f6ee952" title=" " alt="" coords="1447,1765,1513,1790"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#aaad2d7a86d4859982dd9a132f5128ff2" title=" " alt="" coords="632,1055,727,1081"/>
<area shape="rect" href="../../d7/df8/log_8c.html#a7eacb0fbebe5ce4c7d3ddea15908b13d" title=" " alt="" coords="1324,1613,1399,1638"/>
</map>
</div>

</div>
</div>
<a id="a057e5bce2de7a87ebfd2dc33967bca4a" name="a057e5bce2de7a87ebfd2dc33967bca4a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a057e5bce2de7a87ebfd2dc33967bca4a">&#9670;&#160;</a></span>sys_mkdir()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sys_mkdir </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/d14/sysfile_8c_source.html#l00336">336</a> of file <a class="el" href="../../d1/d14/sysfile_8c_source.html">sysfile.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  337</span>{</div>
<div class="line"><span class="lineno">  338</span>  <span class="keywordtype">char</span> *path;</div>
<div class="line"><span class="lineno">  339</span>  <span class="keyword">struct </span><a class="code hl_struct" href="../../d0/df8/structinode.html">inode</a> *ip;</div>
<div class="line"><span class="lineno">  340</span> </div>
<div class="line"><span class="lineno">  341</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#a603ca98212e00d2ffdba7827ef0f1003">begin_op</a>();</div>
<div class="line"><span class="lineno">  342</span>  <span class="keywordflow">if</span>(<a class="code hl_function" href="../../d5/d64/defs_8h.html#afc00cb2e6a06b1021f3d82fa4d0eff07">argstr</a>(0, &amp;path) &lt; 0 || (ip = create(path, <a class="code hl_define" href="../../d2/d1b/stat_8h.html#a91136bcd71a9f499304f5d7e7e9d6376">T_DIR</a>, 0, 0)) == 0){</div>
<div class="line"><span class="lineno">  343</span>    <a class="code hl_function" href="../../d5/d64/defs_8h.html#a2504e37a109f9bae5ca11fe89e4e8fa1">end_op</a>();</div>
<div class="line"><span class="lineno">  344</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  345</span>  }</div>
<div class="line"><span class="lineno">  346</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#adff5bb5a1eeaf921853ec06479f8c49b">iunlockput</a>(ip);</div>
<div class="line"><span class="lineno">  347</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#a2504e37a109f9bae5ca11fe89e4e8fa1">end_op</a>();</div>
<div class="line"><span class="lineno">  348</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  349</span>}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../db/dd8/syscall_8c_a057e5bce2de7a87ebfd2dc33967bca4a_cgraph.png" border="0" usemap="#adb/dd8/syscall_8c_a057e5bce2de7a87ebfd2dc33967bca4a_cgraph" alt=""/></div>
<map name="adb/dd8/syscall_8c_a057e5bce2de7a87ebfd2dc33967bca4a_cgraph" id="adb/dd8/syscall_8c_a057e5bce2de7a87ebfd2dc33967bca4a_cgraph">
<area shape="rect" title=" " alt="" coords="5,897,88,922"/>
<area shape="rect" href="../../db/dd8/syscall_8c.html#a662eedd65f3e2165093842b80e3bc024" title=" " alt="" coords="727,351,782,377"/>
<area shape="rect" href="../../d7/df8/log_8c.html#ac96aa31ffc0500e749c62c4d377c21c9" title=" " alt="" coords="581,98,655,123"/>
<area shape="rect" href="../../d7/df8/log_8c.html#ac0f12be0ca0de555e60b27b06a57a65b" title=" " alt="" coords="1236,1718,1300,1743"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a207b3008bae35596c55ec7c4fc6875eb" title=" " alt="" coords="136,1390,217,1415"/>
<area shape="rect" href="../../db/dd8/syscall_8c.html#ade56ef2176f85cd61e7b91b400e7d4d3" title=" " alt="" coords="848,301,903,326"/>
<area shape="rect" href="../../db/dd8/syscall_8c.html#ace37b4584713ab6bda44a282a298961f" title=" " alt="" coords="969,351,1035,377"/>
<area shape="rect" href="../../db/dd8/syscall_8c.html#a918cadc6c55aa7ac38982659c27a3a75" title=" " alt="" coords="969,250,1035,275"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a41af0935f3989aae450cf8988cd9c3a9" title=" " alt="" coords="1107,351,1173,377"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="1237,655,1299,681"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="1863,541,1919,566"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="1860,199,1923,225"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="1485,858,1543,883"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="1360,1111,1413,1137"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="1485,1110,1543,1135"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="1468,1061,1560,1086"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="1608,757,1672,782"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="1608,1426,1672,1451"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="1720,757,1812,782"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="1735,414,1797,439"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ae70cc0370342e46f6db3bec367232457" title=" " alt="" coords="728,681,781,706"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad788da91743c333b5bed7c4a0dd12365" title=" " alt="" coords="847,681,904,706"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a9fa00b0be5d3c4781048861e2506eb63" title=" " alt="" coords="963,706,1041,731"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a1d9e7047d3dfb57809a2541d8387705e" title=" " alt="" coords="1111,503,1169,529"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a02ca0670bc1fe12e38453082631ff360" title=" " alt="" coords="1097,605,1183,630"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a87c90f0ab2a1b11c2b55f4e483bb8493" title=" " alt="" coords="1097,757,1183,782"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a4a34d9f03e436cfa09b88f735f6ee952" title=" " alt="" coords="1353,1661,1420,1686"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#ab3c447f135c68e4c3c1f8d5866f6e77b" title=" " alt="" coords="265,1390,308,1415"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#ae4e29916219b9293b37f9c34220694fe" title=" " alt="" coords="844,1415,907,1441"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#aaad2d7a86d4859982dd9a132f5128ff2" title=" " alt="" coords="571,681,665,706"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a7220afa8e5f4bea540eb95879ea7df6e" title=" " alt="" coords="356,1441,420,1466"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#aa997067c2c9bfef15af6fa0a10c20f4a" title=" " alt="" coords="955,1466,1049,1491"/>
<area shape="rect" href="../../dc/de6/bio_8c.html#a30b8d2ef2300ed8e3d879a428fe39898" title=" " alt="" coords="468,1314,523,1339"/>
<area shape="rect" href="../../d1/db0/string_8c.html#a07f97e2ed1ce37955192d52de8f4911f" title=" " alt="" coords="713,1390,796,1415"/>
<area shape="rect" href="../../dc/de6/bio_8c.html#ab5335aeb503731104314321a78a6d727" title=" " alt="" coords="847,1542,904,1567"/>
<area shape="rect" href="../../d7/df8/log_8c.html#a7eacb0fbebe5ce4c7d3ddea15908b13d" title=" " alt="" coords="1231,1466,1305,1491"/>
<area shape="rect" href="../../da/d9b/memide_8c.html#a7f36b008f02088c86f76e98e05b55af5" title=" " alt="" coords="591,1289,645,1314"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#a6fdbe54cbecd8fc67d74793b27adcf05" title=" " alt="" coords="955,1339,1049,1365"/>
</map>
</div>

</div>
</div>
<a id="a25697aa3d828b5878d38170d724adb27" name="a25697aa3d828b5878d38170d724adb27"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a25697aa3d828b5878d38170d724adb27">&#9670;&#160;</a></span>sys_mknod()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sys_mknod </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/d14/sysfile_8c_source.html#l00352">352</a> of file <a class="el" href="../../d1/d14/sysfile_8c_source.html">sysfile.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  353</span>{</div>
<div class="line"><span class="lineno">  354</span>  <span class="keyword">struct </span><a class="code hl_struct" href="../../d0/df8/structinode.html">inode</a> *ip;</div>
<div class="line"><span class="lineno">  355</span>  <span class="keywordtype">char</span> *path;</div>
<div class="line"><span class="lineno">  356</span>  <span class="keywordtype">int</span> <a class="code hl_variable" href="../../d0/df8/structinode.html#a34af7242018a977dace5730683850875">major</a>, <a class="code hl_variable" href="../../d0/df8/structinode.html#a37878866e7905b666db2aa33076076a2">minor</a>;</div>
<div class="line"><span class="lineno">  357</span> </div>
<div class="line"><span class="lineno">  358</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#a603ca98212e00d2ffdba7827ef0f1003">begin_op</a>();</div>
<div class="line"><span class="lineno">  359</span>  <span class="keywordflow">if</span>((<a class="code hl_function" href="../../d5/d64/defs_8h.html#afc00cb2e6a06b1021f3d82fa4d0eff07">argstr</a>(0, &amp;path)) &lt; 0 ||</div>
<div class="line"><span class="lineno">  360</span>     <a class="code hl_function" href="../../d5/d64/defs_8h.html#a75bc8d8c7ea0b4b39d4f470e18e0dba7">argint</a>(1, &amp;<a class="code hl_variable" href="../../d0/df8/structinode.html#a34af7242018a977dace5730683850875">major</a>) &lt; 0 ||</div>
<div class="line"><span class="lineno">  361</span>     <a class="code hl_function" href="../../d5/d64/defs_8h.html#a75bc8d8c7ea0b4b39d4f470e18e0dba7">argint</a>(2, &amp;<a class="code hl_variable" href="../../d0/df8/structinode.html#a37878866e7905b666db2aa33076076a2">minor</a>) &lt; 0 ||</div>
<div class="line"><span class="lineno">  362</span>     (ip = create(path, <a class="code hl_define" href="../../d2/d1b/stat_8h.html#a62b045a3e4fdf204bdddda0f3fc3d8c4">T_DEV</a>, <a class="code hl_variable" href="../../d0/df8/structinode.html#a34af7242018a977dace5730683850875">major</a>, <a class="code hl_variable" href="../../d0/df8/structinode.html#a37878866e7905b666db2aa33076076a2">minor</a>)) == 0){</div>
<div class="line"><span class="lineno">  363</span>    <a class="code hl_function" href="../../d5/d64/defs_8h.html#a2504e37a109f9bae5ca11fe89e4e8fa1">end_op</a>();</div>
<div class="line"><span class="lineno">  364</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  365</span>  }</div>
<div class="line"><span class="lineno">  366</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#adff5bb5a1eeaf921853ec06479f8c49b">iunlockput</a>(ip);</div>
<div class="line"><span class="lineno">  367</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#a2504e37a109f9bae5ca11fe89e4e8fa1">end_op</a>();</div>
<div class="line"><span class="lineno">  368</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  369</span>}</div>
<div class="ttc" id="astat_8h_html_a62b045a3e4fdf204bdddda0f3fc3d8c4"><div class="ttname"><a href="../../d2/d1b/stat_8h.html#a62b045a3e4fdf204bdddda0f3fc3d8c4">T_DEV</a></div><div class="ttdeci">#define T_DEV</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d1b/stat_8h_source.html#l00003">stat.h:3</a></div></div>
<div class="ttc" id="astructinode_html_a34af7242018a977dace5730683850875"><div class="ttname"><a href="../../d0/df8/structinode.html#a34af7242018a977dace5730683850875">inode::major</a></div><div class="ttdeci">short major</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d4d/file_8h_source.html#l00021">file.h:21</a></div></div>
<div class="ttc" id="astructinode_html_a37878866e7905b666db2aa33076076a2"><div class="ttname"><a href="../../d0/df8/structinode.html#a37878866e7905b666db2aa33076076a2">inode::minor</a></div><div class="ttdeci">short minor</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d4d/file_8h_source.html#l00022">file.h:22</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../db/dd8/syscall_8c_a25697aa3d828b5878d38170d724adb27_cgraph.png" border="0" usemap="#adb/dd8/syscall_8c_a25697aa3d828b5878d38170d724adb27_cgraph" alt=""/></div>
<map name="adb/dd8/syscall_8c_a25697aa3d828b5878d38170d724adb27_cgraph" id="adb/dd8/syscall_8c_a25697aa3d828b5878d38170d724adb27_cgraph">
<area shape="rect" title=" " alt="" coords="5,823,95,849"/>
<area shape="rect" href="../../db/dd8/syscall_8c.html#ade56ef2176f85cd61e7b91b400e7d4d3" title=" " alt="" coords="855,170,909,195"/>
<area shape="rect" href="../../db/dd8/syscall_8c.html#a662eedd65f3e2165093842b80e3bc024" title=" " alt="" coords="734,245,789,270"/>
<area shape="rect" href="../../d7/df8/log_8c.html#ac96aa31ffc0500e749c62c4d377c21c9" title=" " alt="" coords="587,823,662,849"/>
<area shape="rect" href="../../d7/df8/log_8c.html#ac0f12be0ca0de555e60b27b06a57a65b" title=" " alt="" coords="1243,1415,1307,1441"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a207b3008bae35596c55ec7c4fc6875eb" title=" " alt="" coords="143,1062,224,1087"/>
<area shape="rect" href="../../db/dd8/syscall_8c.html#a918cadc6c55aa7ac38982659c27a3a75" title=" " alt="" coords="976,195,1041,221"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a41af0935f3989aae450cf8988cd9c3a9" title=" " alt="" coords="1114,270,1179,295"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="1244,582,1305,607"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="1870,783,1926,809"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="1867,253,1929,278"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="1491,861,1550,886"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="1367,1050,1420,1075"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="1491,962,1550,987"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="1475,1011,1567,1037"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="1615,709,1679,734"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="1615,1594,1679,1619"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="1727,709,1819,734"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="1741,405,1804,430"/>
<area shape="rect" href="../../db/dd8/syscall_8c.html#ace37b4584713ab6bda44a282a298961f" title=" " alt="" coords="975,245,1042,270"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ae70cc0370342e46f6db3bec367232457" title=" " alt="" coords="735,835,788,861"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad788da91743c333b5bed7c4a0dd12365" title=" " alt="" coords="853,734,911,759"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a9fa00b0be5d3c4781048861e2506eb63" title=" " alt="" coords="969,734,1048,759"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a1d9e7047d3dfb57809a2541d8387705e" title=" " alt="" coords="1118,859,1175,885"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a02ca0670bc1fe12e38453082631ff360" title=" " alt="" coords="1104,709,1189,734"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a87c90f0ab2a1b11c2b55f4e483bb8493" title=" " alt="" coords="1104,758,1189,783"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a4a34d9f03e436cfa09b88f735f6ee952" title=" " alt="" coords="1360,1466,1427,1491"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#ab3c447f135c68e4c3c1f8d5866f6e77b" title=" " alt="" coords="272,1214,315,1239"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#ae4e29916219b9293b37f9c34220694fe" title=" " alt="" coords="851,1214,913,1239"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#aaad2d7a86d4859982dd9a132f5128ff2" title=" " alt="" coords="577,873,672,898"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a7220afa8e5f4bea540eb95879ea7df6e" title=" " alt="" coords="363,1265,427,1290"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#aa997067c2c9bfef15af6fa0a10c20f4a" title=" " alt="" coords="961,1366,1056,1391"/>
<area shape="rect" href="../../dc/de6/bio_8c.html#a30b8d2ef2300ed8e3d879a428fe39898" title=" " alt="" coords="475,1214,529,1239"/>
<area shape="rect" href="../../d1/db0/string_8c.html#a07f97e2ed1ce37955192d52de8f4911f" title=" " alt="" coords="720,1265,803,1290"/>
<area shape="rect" href="../../dc/de6/bio_8c.html#ab5335aeb503731104314321a78a6d727" title=" " alt="" coords="853,1265,911,1290"/>
<area shape="rect" href="../../d7/df8/log_8c.html#a7eacb0fbebe5ce4c7d3ddea15908b13d" title=" " alt="" coords="1237,1366,1312,1391"/>
<area shape="rect" href="../../da/d9b/memide_8c.html#a7f36b008f02088c86f76e98e05b55af5" title=" " alt="" coords="598,1163,651,1189"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#a6fdbe54cbecd8fc67d74793b27adcf05" title=" " alt="" coords="961,1113,1056,1138"/>
</map>
</div>

</div>
</div>
<a id="a74e45efc661ca17c068bc283b3842e6d" name="a74e45efc661ca17c068bc283b3842e6d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a74e45efc661ca17c068bc283b3842e6d">&#9670;&#160;</a></span>sys_open()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sys_open </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/d14/sysfile_8c_source.html#l00286">286</a> of file <a class="el" href="../../d1/d14/sysfile_8c_source.html">sysfile.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  287</span>{</div>
<div class="line"><span class="lineno">  288</span>  <span class="keywordtype">char</span> *path;</div>
<div class="line"><span class="lineno">  289</span>  <span class="keywordtype">int</span> fd, omode;</div>
<div class="line"><span class="lineno">  290</span>  <span class="keyword">struct </span><a class="code hl_struct" href="../../d7/d3a/structfile.html">file</a> *f;</div>
<div class="line"><span class="lineno">  291</span>  <span class="keyword">struct </span><a class="code hl_struct" href="../../d0/df8/structinode.html">inode</a> *ip;</div>
<div class="line"><span class="lineno">  292</span> </div>
<div class="line"><span class="lineno">  293</span>  <span class="keywordflow">if</span>(<a class="code hl_function" href="../../d5/d64/defs_8h.html#afc00cb2e6a06b1021f3d82fa4d0eff07">argstr</a>(0, &amp;path) &lt; 0 || <a class="code hl_function" href="../../d5/d64/defs_8h.html#a75bc8d8c7ea0b4b39d4f470e18e0dba7">argint</a>(1, &amp;omode) &lt; 0)</div>
<div class="line"><span class="lineno">  294</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  295</span> </div>
<div class="line"><span class="lineno">  296</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#a603ca98212e00d2ffdba7827ef0f1003">begin_op</a>();</div>
<div class="line"><span class="lineno">  297</span> </div>
<div class="line"><span class="lineno">  298</span>  <span class="keywordflow">if</span>(omode &amp; <a class="code hl_define" href="../../d7/d9f/fcntl_8h.html#ab40a23079c3b9a7e25ffdc8108c7fb02">O_CREATE</a>){</div>
<div class="line"><span class="lineno">  299</span>    ip = create(path, <a class="code hl_define" href="../../d2/d1b/stat_8h.html#a0a8afbed81f5fb3930e9d153fbd51737">T_FILE</a>, 0, 0);</div>
<div class="line"><span class="lineno">  300</span>    <span class="keywordflow">if</span>(ip == 0){</div>
<div class="line"><span class="lineno">  301</span>      <a class="code hl_function" href="../../d5/d64/defs_8h.html#a2504e37a109f9bae5ca11fe89e4e8fa1">end_op</a>();</div>
<div class="line"><span class="lineno">  302</span>      <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  303</span>    }</div>
<div class="line"><span class="lineno">  304</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  305</span>    <span class="keywordflow">if</span>((ip = <a class="code hl_function" href="../../d5/d64/defs_8h.html#acde7d3975db286253e584452ba03a54f">namei</a>(path)) == 0){</div>
<div class="line"><span class="lineno">  306</span>      <a class="code hl_function" href="../../d5/d64/defs_8h.html#a2504e37a109f9bae5ca11fe89e4e8fa1">end_op</a>();</div>
<div class="line"><span class="lineno">  307</span>      <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  308</span>    }</div>
<div class="line"><span class="lineno">  309</span>    <a class="code hl_function" href="../../d5/d64/defs_8h.html#a29a4d743d41fe659f74b0a57fdc25012">ilock</a>(ip);</div>
<div class="line"><span class="lineno">  310</span>    <span class="keywordflow">if</span>(ip-&gt;<a class="code hl_variable" href="../../d0/df8/structinode.html#a8d74bec2898785c057111c328d23fda2">type</a> == <a class="code hl_define" href="../../d2/d1b/stat_8h.html#a91136bcd71a9f499304f5d7e7e9d6376">T_DIR</a> &amp;&amp; omode != <a class="code hl_define" href="../../d7/d9f/fcntl_8h.html#a7a68c9ffaac7dbcd652225dd7c06a54b">O_RDONLY</a>){</div>
<div class="line"><span class="lineno">  311</span>      <a class="code hl_function" href="../../d5/d64/defs_8h.html#adff5bb5a1eeaf921853ec06479f8c49b">iunlockput</a>(ip);</div>
<div class="line"><span class="lineno">  312</span>      <a class="code hl_function" href="../../d5/d64/defs_8h.html#a2504e37a109f9bae5ca11fe89e4e8fa1">end_op</a>();</div>
<div class="line"><span class="lineno">  313</span>      <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  314</span>    }</div>
<div class="line"><span class="lineno">  315</span>  }</div>
<div class="line"><span class="lineno">  316</span> </div>
<div class="line"><span class="lineno">  317</span>  <span class="keywordflow">if</span>((f = <a class="code hl_function" href="../../d5/d64/defs_8h.html#ac56b15561658d0e74ce1c53309b8f97d">filealloc</a>()) == 0 || (fd = fdalloc(f)) &lt; 0){</div>
<div class="line"><span class="lineno">  318</span>    <span class="keywordflow">if</span>(f)</div>
<div class="line"><span class="lineno">  319</span>      <a class="code hl_function" href="../../d5/d64/defs_8h.html#ac865ee0b2d70f753d61d1fefef9de0f6">fileclose</a>(f);</div>
<div class="line"><span class="lineno">  320</span>    <a class="code hl_function" href="../../d5/d64/defs_8h.html#adff5bb5a1eeaf921853ec06479f8c49b">iunlockput</a>(ip);</div>
<div class="line"><span class="lineno">  321</span>    <a class="code hl_function" href="../../d5/d64/defs_8h.html#a2504e37a109f9bae5ca11fe89e4e8fa1">end_op</a>();</div>
<div class="line"><span class="lineno">  322</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  323</span>  }</div>
<div class="line"><span class="lineno">  324</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#af301c10ad8ced77a5dfb2de3a64c666c">iunlock</a>(ip);</div>
<div class="line"><span class="lineno">  325</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#a2504e37a109f9bae5ca11fe89e4e8fa1">end_op</a>();</div>
<div class="line"><span class="lineno">  326</span> </div>
<div class="line"><span class="lineno">  327</span>  f-&gt;<a class="code hl_variable" href="../../d7/d3a/structfile.html#a3a28c808a8dcd4acf45087ac30c075e7">type</a> = FD_INODE;</div>
<div class="line"><span class="lineno">  328</span>  f-&gt;<a class="code hl_variable" href="../../d7/d3a/structfile.html#a4fd095f927715574dc2a4f243690e508">ip</a> = ip;</div>
<div class="line"><span class="lineno">  329</span>  f-&gt;<a class="code hl_variable" href="../../d7/d3a/structfile.html#a94a911be6cc1b1326728392d8b40150d">off</a> = 0;</div>
<div class="line"><span class="lineno">  330</span>  f-&gt;<a class="code hl_variable" href="../../d7/d3a/structfile.html#a0c5c8eced8bc562dbbecc8d450a6b646">readable</a> = !(omode &amp; <a class="code hl_define" href="../../d7/d9f/fcntl_8h.html#a11b644a8526139c4cc1850dac1271ced">O_WRONLY</a>);</div>
<div class="line"><span class="lineno">  331</span>  f-&gt;<a class="code hl_variable" href="../../d7/d3a/structfile.html#a6e1b641ea1551ac4316a0c11a683df45">writable</a> = (omode &amp; <a class="code hl_define" href="../../d7/d9f/fcntl_8h.html#a11b644a8526139c4cc1850dac1271ced">O_WRONLY</a>) || (omode &amp; <a class="code hl_define" href="../../d7/d9f/fcntl_8h.html#abb0586253488ee61072b73557eeb873b">O_RDWR</a>);</div>
<div class="line"><span class="lineno">  332</span>  <span class="keywordflow">return</span> fd;</div>
<div class="line"><span class="lineno">  333</span>}</div>
<div class="ttc" id="adefs_8h_html_ac56b15561658d0e74ce1c53309b8f97d"><div class="ttname"><a href="../../d5/d64/defs_8h.html#ac56b15561658d0e74ce1c53309b8f97d">filealloc</a></div><div class="ttdeci">struct file * filealloc(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l00027">file.c:27</a></div></div>
<div class="ttc" id="afcntl_8h_html_a11b644a8526139c4cc1850dac1271ced"><div class="ttname"><a href="../../d7/d9f/fcntl_8h.html#a11b644a8526139c4cc1850dac1271ced">O_WRONLY</a></div><div class="ttdeci">#define O_WRONLY</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9f/fcntl_8h_source.html#l00002">fcntl.h:2</a></div></div>
<div class="ttc" id="afcntl_8h_html_a7a68c9ffaac7dbcd652225dd7c06a54b"><div class="ttname"><a href="../../d7/d9f/fcntl_8h.html#a7a68c9ffaac7dbcd652225dd7c06a54b">O_RDONLY</a></div><div class="ttdeci">#define O_RDONLY</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9f/fcntl_8h_source.html#l00001">fcntl.h:1</a></div></div>
<div class="ttc" id="afcntl_8h_html_ab40a23079c3b9a7e25ffdc8108c7fb02"><div class="ttname"><a href="../../d7/d9f/fcntl_8h.html#ab40a23079c3b9a7e25ffdc8108c7fb02">O_CREATE</a></div><div class="ttdeci">#define O_CREATE</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9f/fcntl_8h_source.html#l00004">fcntl.h:4</a></div></div>
<div class="ttc" id="afcntl_8h_html_abb0586253488ee61072b73557eeb873b"><div class="ttname"><a href="../../d7/d9f/fcntl_8h.html#abb0586253488ee61072b73557eeb873b">O_RDWR</a></div><div class="ttdeci">#define O_RDWR</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9f/fcntl_8h_source.html#l00003">fcntl.h:3</a></div></div>
<div class="ttc" id="astat_8h_html_a0a8afbed81f5fb3930e9d153fbd51737"><div class="ttname"><a href="../../d2/d1b/stat_8h.html#a0a8afbed81f5fb3930e9d153fbd51737">T_FILE</a></div><div class="ttdeci">#define T_FILE</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d1b/stat_8h_source.html#l00002">stat.h:2</a></div></div>
<div class="ttc" id="astructfile_html_a0c5c8eced8bc562dbbecc8d450a6b646"><div class="ttname"><a href="../../d7/d3a/structfile.html#a0c5c8eced8bc562dbbecc8d450a6b646">file::readable</a></div><div class="ttdeci">char readable</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d4d/file_8h_source.html#l00004">file.h:4</a></div></div>
<div class="ttc" id="astructfile_html_a3a28c808a8dcd4acf45087ac30c075e7"><div class="ttname"><a href="../../d7/d3a/structfile.html#a3a28c808a8dcd4acf45087ac30c075e7">file::type</a></div><div class="ttdeci">enum file::@4 type</div></div>
<div class="ttc" id="astructfile_html_a4fd095f927715574dc2a4f243690e508"><div class="ttname"><a href="../../d7/d3a/structfile.html#a4fd095f927715574dc2a4f243690e508">file::ip</a></div><div class="ttdeci">struct inode * ip</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d4d/file_8h_source.html#l00007">file.h:7</a></div></div>
<div class="ttc" id="astructfile_html_a6e1b641ea1551ac4316a0c11a683df45"><div class="ttname"><a href="../../d7/d3a/structfile.html#a6e1b641ea1551ac4316a0c11a683df45">file::writable</a></div><div class="ttdeci">char writable</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d4d/file_8h_source.html#l00005">file.h:5</a></div></div>
<div class="ttc" id="astructfile_html_a94a911be6cc1b1326728392d8b40150d"><div class="ttname"><a href="../../d7/d3a/structfile.html#a94a911be6cc1b1326728392d8b40150d">file::off</a></div><div class="ttdeci">uint off</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d4d/file_8h_source.html#l00008">file.h:8</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../db/dd8/syscall_8c_a74e45efc661ca17c068bc283b3842e6d_cgraph.png" border="0" usemap="#adb/dd8/syscall_8c_a74e45efc661ca17c068bc283b3842e6d_cgraph" alt=""/></div>
<map name="adb/dd8/syscall_8c_a74e45efc661ca17c068bc283b3842e6d_cgraph" id="adb/dd8/syscall_8c_a74e45efc661ca17c068bc283b3842e6d_cgraph">
<area shape="rect" title=" " alt="" coords="5,1210,84,1235"/>
<area shape="rect" href="../../db/dd8/syscall_8c.html#ade56ef2176f85cd61e7b91b400e7d4d3" title=" " alt="" coords="844,173,899,198"/>
<area shape="rect" href="../../db/dd8/syscall_8c.html#a662eedd65f3e2165093842b80e3bc024" title=" " alt="" coords="723,247,778,273"/>
<area shape="rect" href="../../d7/df8/log_8c.html#ac96aa31ffc0500e749c62c4d377c21c9" title=" " alt="" coords="577,855,651,881"/>
<area shape="rect" href="../../d7/df8/log_8c.html#ac0f12be0ca0de555e60b27b06a57a65b" title=" " alt="" coords="1232,1565,1296,1590"/>
<area shape="rect" href="../../d6/d13/file_8c.html#ac56b15561658d0e74ce1c53309b8f97d" title=" " alt="" coords="1479,1718,1546,1743"/>
<area shape="rect" href="../../d6/d13/file_8c.html#ae557c81ab89c24219146144bb6adaa2c" title=" " alt="" coords="137,1641,208,1666"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#aed28187406d84a3aa71f10c6235a03ec" title=" " alt="" coords="359,1070,409,1095"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#ae4e29916219b9293b37f9c34220694fe" title=" " alt="" coords="840,1261,903,1286"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a207b3008bae35596c55ec7c4fc6875eb" title=" " alt="" coords="132,1261,213,1286"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a35c52ecf358097c17dcbbd5594acb41a" title=" " alt="" coords="144,2071,201,2097"/>
<area shape="rect" href="../../db/dd8/syscall_8c.html#a918cadc6c55aa7ac38982659c27a3a75" title=" " alt="" coords="965,198,1031,223"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a41af0935f3989aae450cf8988cd9c3a9" title=" " alt="" coords="1103,274,1169,299"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="1233,502,1295,527"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="1862,401,1918,426"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="1859,147,1921,173"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="1483,857,1542,882"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="1357,1110,1411,1135"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="1483,1110,1542,1135"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="1467,1009,1559,1034"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="1607,755,1671,781"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="1607,1667,1671,1693"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="1719,755,1811,781"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="1733,299,1796,325"/>
<area shape="rect" href="../../db/dd8/syscall_8c.html#ace37b4584713ab6bda44a282a298961f" title=" " alt="" coords="965,247,1031,273"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ae70cc0370342e46f6db3bec367232457" title=" " alt="" coords="724,703,777,729"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad788da91743c333b5bed7c4a0dd12365" title=" " alt="" coords="843,602,900,627"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a9fa00b0be5d3c4781048861e2506eb63" title=" " alt="" coords="959,653,1037,678"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a1d9e7047d3dfb57809a2541d8387705e" title=" " alt="" coords="1107,451,1165,477"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a02ca0670bc1fe12e38453082631ff360" title=" " alt="" coords="1093,603,1179,629"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a87c90f0ab2a1b11c2b55f4e483bb8493" title=" " alt="" coords="1093,653,1179,678"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a4a34d9f03e436cfa09b88f735f6ee952" title=" " alt="" coords="1351,1615,1417,1641"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#ab3c447f135c68e4c3c1f8d5866f6e77b" title=" " alt="" coords="261,1413,304,1438"/>
<area shape="rect" href="../../d1/d47/pipe_8c.html#a48642f54734698f6f881ee07723292cb" title=" " alt="" coords="1097,1869,1175,1894"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#aaad2d7a86d4859982dd9a132f5128ff2" title=" " alt="" coords="567,729,661,754"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a7220afa8e5f4bea540eb95879ea7df6e" title=" " alt="" coords="352,1362,416,1387"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#aa997067c2c9bfef15af6fa0a10c20f4a" title=" " alt="" coords="951,1413,1045,1438"/>
<area shape="rect" href="../../dc/de6/bio_8c.html#a30b8d2ef2300ed8e3d879a428fe39898" title=" " alt="" coords="464,1109,519,1134"/>
<area shape="rect" href="../../d1/db0/string_8c.html#a07f97e2ed1ce37955192d52de8f4911f" title=" " alt="" coords="709,1058,792,1083"/>
<area shape="rect" href="../../dc/de6/bio_8c.html#ab5335aeb503731104314321a78a6d727" title=" " alt="" coords="843,1362,900,1387"/>
<area shape="rect" href="../../d7/df8/log_8c.html#a7eacb0fbebe5ce4c7d3ddea15908b13d" title=" " alt="" coords="1227,1413,1301,1438"/>
<area shape="rect" href="../../da/d9b/memide_8c.html#a7f36b008f02088c86f76e98e05b55af5" title=" " alt="" coords="587,957,641,982"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#a6fdbe54cbecd8fc67d74793b27adcf05" title=" " alt="" coords="951,1210,1045,1235"/>
<area shape="rect" href="../../d4/def/kalloc_8c.html#aced59ecf8411235f6dffc065236711a5" title=" " alt="" coords="1239,1818,1289,1843"/>
<area shape="rect" href="../../db/d8a/ulib_8c.html#aa9cdc2409c15ccd5ee3b2031576f4093" title=" " alt="" coords="1349,1818,1419,1843"/>
</map>
</div>

</div>
</div>
<a id="a9a70db941def46ec25939e6c2d30e399" name="a9a70db941def46ec25939e6c2d30e399"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9a70db941def46ec25939e6c2d30e399">&#9670;&#160;</a></span>sys_pipe()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sys_pipe </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/d14/sysfile_8c_source.html#l00423">423</a> of file <a class="el" href="../../d1/d14/sysfile_8c_source.html">sysfile.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  424</span>{</div>
<div class="line"><span class="lineno">  425</span>  <span class="keywordtype">int</span> *fd;</div>
<div class="line"><span class="lineno">  426</span>  <span class="keyword">struct </span><a class="code hl_struct" href="../../d7/d3a/structfile.html">file</a> *rf, *wf;</div>
<div class="line"><span class="lineno">  427</span>  <span class="keywordtype">int</span> fd0, fd1;</div>
<div class="line"><span class="lineno">  428</span> </div>
<div class="line"><span class="lineno">  429</span>  <span class="keywordflow">if</span>(<a class="code hl_function" href="../../d5/d64/defs_8h.html#a05c7464938c27eb91540c06ec6137f26">argptr</a>(0, (<span class="keywordtype">void</span>*)&amp;fd, 2*<span class="keyword">sizeof</span>(fd[0])) &lt; 0)</div>
<div class="line"><span class="lineno">  430</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  431</span>  <span class="keywordflow">if</span>(<a class="code hl_function" href="../../d5/d64/defs_8h.html#a3de41eab56ff42bea4d1ae78bbd1e472">pipealloc</a>(&amp;rf, &amp;wf) &lt; 0)</div>
<div class="line"><span class="lineno">  432</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  433</span>  fd0 = -1;</div>
<div class="line"><span class="lineno">  434</span>  <span class="keywordflow">if</span>((fd0 = fdalloc(rf)) &lt; 0 || (fd1 = fdalloc(wf)) &lt; 0){</div>
<div class="line"><span class="lineno">  435</span>    <span class="keywordflow">if</span>(fd0 &gt;= 0)</div>
<div class="line"><span class="lineno">  436</span>      <a class="code hl_function" href="../../d5/d64/defs_8h.html#a3d2327db1e34643f4a9e6a07c8cc62c6">myproc</a>()-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#a4a9eb0352efe3fc097c91fccfaac50bd">ofile</a>[fd0] = 0;</div>
<div class="line"><span class="lineno">  437</span>    <a class="code hl_function" href="../../d5/d64/defs_8h.html#ac865ee0b2d70f753d61d1fefef9de0f6">fileclose</a>(rf);</div>
<div class="line"><span class="lineno">  438</span>    <a class="code hl_function" href="../../d5/d64/defs_8h.html#ac865ee0b2d70f753d61d1fefef9de0f6">fileclose</a>(wf);</div>
<div class="line"><span class="lineno">  439</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  440</span>  }</div>
<div class="line"><span class="lineno">  441</span>  fd[0] = fd0;</div>
<div class="line"><span class="lineno">  442</span>  fd[1] = fd1;</div>
<div class="line"><span class="lineno">  443</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  444</span>}</div>
<div class="ttc" id="adefs_8h_html_a3de41eab56ff42bea4d1ae78bbd1e472"><div class="ttname"><a href="../../d5/d64/defs_8h.html#a3de41eab56ff42bea4d1ae78bbd1e472">pipealloc</a></div><div class="ttdeci">int pipealloc(struct file **, struct file **)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d47/pipe_8c_source.html#l00023">pipe.c:23</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../db/dd8/syscall_8c_a9a70db941def46ec25939e6c2d30e399_cgraph.png" border="0" usemap="#adb/dd8/syscall_8c_a9a70db941def46ec25939e6c2d30e399_cgraph" alt=""/></div>
<map name="adb/dd8/syscall_8c_a9a70db941def46ec25939e6c2d30e399_cgraph" id="adb/dd8/syscall_8c_a9a70db941def46ec25939e6c2d30e399_cgraph">
<area shape="rect" title=" " alt="" coords="5,802,80,827"/>
<area shape="rect" href="../../db/dd8/syscall_8c.html#a6ade9205d1f46b759cf93b60513a3421" title=" " alt="" coords="830,549,885,574"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a41af0935f3989aae450cf8988cd9c3a9" title=" " alt="" coords="1205,547,1270,573"/>
<area shape="rect" href="../../d6/d13/file_8c.html#ae557c81ab89c24219146144bb6adaa2c" title=" " alt="" coords="249,1625,320,1650"/>
<area shape="rect" href="../../d1/d47/pipe_8c.html#a9d6f0c526148e6002b6776619c7563e6" title=" " alt="" coords="128,1903,201,1929"/>
<area shape="rect" href="../../db/dd8/syscall_8c.html#ade56ef2176f85cd61e7b91b400e7d4d3" title=" " alt="" coords="948,650,1003,675"/>
<area shape="rect" href="../../db/dd8/syscall_8c.html#a918cadc6c55aa7ac38982659c27a3a75" title=" " alt="" coords="1067,611,1132,637"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="1345,851,1406,877"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="1983,953,2039,978"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="1980,243,2043,269"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="1605,953,1663,978"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="1479,1205,1532,1230"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="1605,1154,1663,1179"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="1588,1105,1680,1130"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="1728,725,1792,750"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="1728,1813,1792,1838"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="1840,725,1932,750"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="1855,498,1917,523"/>
<area shape="rect" href="../../d7/df8/log_8c.html#ac96aa31ffc0500e749c62c4d377c21c9" title=" " alt="" coords="683,847,758,873"/>
<area shape="rect" href="../../d7/df8/log_8c.html#ac0f12be0ca0de555e60b27b06a57a65b" title=" " alt="" coords="1343,1661,1407,1686"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#ab3c447f135c68e4c3c1f8d5866f6e77b" title=" " alt="" coords="368,1473,411,1498"/>
<area shape="rect" href="../../d1/d47/pipe_8c.html#a48642f54734698f6f881ee07723292cb" title=" " alt="" coords="1199,1965,1276,1990"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ae70cc0370342e46f6db3bec367232457" title=" " alt="" coords="831,1067,884,1093"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad788da91743c333b5bed7c4a0dd12365" title=" " alt="" coords="947,1093,1004,1118"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a9fa00b0be5d3c4781048861e2506eb63" title=" " alt="" coords="1060,1067,1139,1093"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a1d9e7047d3dfb57809a2541d8387705e" title=" " alt="" coords="1209,1118,1266,1143"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a02ca0670bc1fe12e38453082631ff360" title=" " alt="" coords="1195,865,1280,890"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a87c90f0ab2a1b11c2b55f4e483bb8493" title=" " alt="" coords="1195,966,1280,991"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a4a34d9f03e436cfa09b88f735f6ee952" title=" " alt="" coords="1472,1711,1539,1737"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#aaad2d7a86d4859982dd9a132f5128ff2" title=" " alt="" coords="673,1067,768,1093"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a7220afa8e5f4bea540eb95879ea7df6e" title=" " alt="" coords="459,1422,523,1447"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#aa997067c2c9bfef15af6fa0a10c20f4a" title=" " alt="" coords="1328,1813,1423,1838"/>
<area shape="rect" href="../../dc/de6/bio_8c.html#a30b8d2ef2300ed8e3d879a428fe39898" title=" " alt="" coords="571,1295,625,1321"/>
<area shape="rect" href="../../d1/db0/string_8c.html#a07f97e2ed1ce37955192d52de8f4911f" title=" " alt="" coords="816,1371,899,1397"/>
<area shape="rect" href="../../dc/de6/bio_8c.html#ab5335aeb503731104314321a78a6d727" title=" " alt="" coords="947,1321,1004,1346"/>
<area shape="rect" href="../../d7/df8/log_8c.html#a7eacb0fbebe5ce4c7d3ddea15908b13d" title=" " alt="" coords="1338,1407,1413,1433"/>
<area shape="rect" href="../../da/d9b/memide_8c.html#a7f36b008f02088c86f76e98e05b55af5" title=" " alt="" coords="694,1270,747,1295"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#a6fdbe54cbecd8fc67d74793b27adcf05" title=" " alt="" coords="1052,915,1147,941"/>
<area shape="rect" href="../../d4/def/kalloc_8c.html#aced59ecf8411235f6dffc065236711a5" title=" " alt="" coords="1350,2015,1401,2041"/>
<area shape="rect" href="../../db/d8a/ulib_8c.html#aa9cdc2409c15ccd5ee3b2031576f4093" title=" " alt="" coords="1471,2015,1540,2041"/>
<area shape="rect" href="../../d6/d13/file_8c.html#ac56b15561658d0e74ce1c53309b8f97d" title=" " alt="" coords="1601,1610,1667,1635"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#abda07b4a007b2e888d9d783920460b89" title=" " alt="" coords="253,1979,316,2005"/>
<area shape="rect" href="../../d4/def/kalloc_8c.html#a5e965f6365c721b5b23c12d16d45c3dc" title=" " alt="" coords="1606,1255,1662,1281"/>
</map>
</div>

</div>
</div>
<a id="a54bf714d9e898cbdcbc061b280bbfae0" name="a54bf714d9e898cbdcbc061b280bbfae0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a54bf714d9e898cbdcbc061b280bbfae0">&#9670;&#160;</a></span>sys_read()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sys_read </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/d14/sysfile_8c_source.html#l00070">70</a> of file <a class="el" href="../../d1/d14/sysfile_8c_source.html">sysfile.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   71</span>{</div>
<div class="line"><span class="lineno">   72</span>  <span class="keyword">struct </span><a class="code hl_struct" href="../../d7/d3a/structfile.html">file</a> *f;</div>
<div class="line"><span class="lineno">   73</span>  <span class="keywordtype">int</span> n;</div>
<div class="line"><span class="lineno">   74</span>  <span class="keywordtype">char</span> *p;</div>
<div class="line"><span class="lineno">   75</span> </div>
<div class="line"><span class="lineno">   76</span>  <span class="keywordflow">if</span>(argfd(0, 0, &amp;f) &lt; 0 || <a class="code hl_function" href="../../d5/d64/defs_8h.html#a75bc8d8c7ea0b4b39d4f470e18e0dba7">argint</a>(2, &amp;n) &lt; 0 || <a class="code hl_function" href="../../d5/d64/defs_8h.html#a05c7464938c27eb91540c06ec6137f26">argptr</a>(1, &amp;p, n) &lt; 0)</div>
<div class="line"><span class="lineno">   77</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">   78</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="../../d5/d64/defs_8h.html#a6bd1db179155944c9d1fbc89d8b7b162">fileread</a>(f, p, n);</div>
<div class="line"><span class="lineno">   79</span>}</div>
<div class="ttc" id="adefs_8h_html_a6bd1db179155944c9d1fbc89d8b7b162"><div class="ttname"><a href="../../d5/d64/defs_8h.html#a6bd1db179155944c9d1fbc89d8b7b162">fileread</a></div><div class="ttdeci">int fileread(struct file *, char *, int n)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l00097">file.c:97</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../db/dd8/syscall_8c_a54bf714d9e898cbdcbc061b280bbfae0_cgraph.png" border="0" usemap="#adb/dd8/syscall_8c_a54bf714d9e898cbdcbc061b280bbfae0_cgraph" alt=""/></div>
<map name="adb/dd8/syscall_8c_a54bf714d9e898cbdcbc061b280bbfae0_cgraph" id="adb/dd8/syscall_8c_a54bf714d9e898cbdcbc061b280bbfae0_cgraph">
<area shape="rect" title=" " alt="" coords="5,201,80,226"/>
<area shape="rect" href="../../db/dd8/syscall_8c.html#ade56ef2176f85cd61e7b91b400e7d4d3" title=" " alt="" coords="719,175,773,201"/>
<area shape="rect" href="../../db/dd8/syscall_8c.html#a6ade9205d1f46b759cf93b60513a3421" title=" " alt="" coords="598,150,653,175"/>
<area shape="rect" href="../../d6/d13/file_8c.html#a1dc8c87c7e48bdaaf98e9c7047928f29" title=" " alt="" coords="128,1047,192,1073"/>
<area shape="rect" href="../../db/dd8/syscall_8c.html#a918cadc6c55aa7ac38982659c27a3a75" title=" " alt="" coords="840,201,905,226"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a41af0935f3989aae450cf8988cd9c3a9" title=" " alt="" coords="978,302,1043,327"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="1101,530,1163,555"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="1749,682,1805,707"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="1745,354,1808,379"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="1370,809,1429,834"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="1231,961,1285,986"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="1370,1011,1429,1037"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="1353,910,1445,935"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="1493,555,1557,581"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="1493,1315,1557,1341"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="1605,555,1697,581"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="1620,506,1683,531"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#aed28187406d84a3aa71f10c6235a03ec" title=" " alt="" coords="241,1225,290,1250"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#ae4e29916219b9293b37f9c34220694fe" title=" " alt="" coords="715,1415,777,1441"/>
<area shape="rect" href="../../d1/d47/pipe_8c.html#ad4cce6144039b615d139f8660c60293a" title=" " alt="" coords="453,845,524,870"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a3aba1fa9f6789d09356aec5b96d91fa8" title=" " alt="" coords="240,1427,291,1453"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#aaad2d7a86d4859982dd9a132f5128ff2" title=" " alt="" coords="441,894,536,919"/>
<area shape="rect" href="../../dc/de6/bio_8c.html#a30b8d2ef2300ed8e3d879a428fe39898" title=" " alt="" coords="339,1402,393,1427"/>
<area shape="rect" href="../../d1/db0/string_8c.html#a07f97e2ed1ce37955192d52de8f4911f" title=" " alt="" coords="584,1453,667,1478"/>
<area shape="rect" href="../../dc/de6/bio_8c.html#ab5335aeb503731104314321a78a6d727" title=" " alt="" coords="717,1314,775,1339"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ae70cc0370342e46f6db3bec367232457" title=" " alt="" coords="599,869,652,894"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad788da91743c333b5bed7c4a0dd12365" title=" " alt="" coords="717,606,775,631"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a9fa00b0be5d3c4781048861e2506eb63" title=" " alt="" coords="833,606,912,631"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a1d9e7047d3dfb57809a2541d8387705e" title=" " alt="" coords="982,706,1039,731"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a02ca0670bc1fe12e38453082631ff360" title=" " alt="" coords="968,555,1053,581"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a87c90f0ab2a1b11c2b55f4e483bb8493" title=" " alt="" coords="968,605,1053,630"/>
<area shape="rect" href="../../da/d9b/memide_8c.html#a7f36b008f02088c86f76e98e05b55af5" title=" " alt="" coords="462,1250,515,1275"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#a6fdbe54cbecd8fc67d74793b27adcf05" title=" " alt="" coords="825,1263,920,1289"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#aa997067c2c9bfef15af6fa0a10c20f4a" title=" " alt="" coords="1211,1314,1305,1339"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a4a34d9f03e436cfa09b88f735f6ee952" title=" " alt="" coords="1366,1265,1433,1290"/>
</map>
</div>

</div>
</div>
<a id="ab21d46be776cf6075a997af525a1a628" name="ab21d46be776cf6075a997af525a1a628"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab21d46be776cf6075a997af525a1a628">&#9670;&#160;</a></span>sys_sbrk()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sys_sbrk </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d35/sysproc_8c_source.html#l00054">54</a> of file <a class="el" href="../../dd/d35/sysproc_8c_source.html">sysproc.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   55</span>{</div>
<div class="line"><span class="lineno">   56</span>  <span class="keywordtype">int</span> addr;</div>
<div class="line"><span class="lineno">   57</span>  <span class="keywordtype">int</span> n;</div>
<div class="line"><span class="lineno">   58</span> </div>
<div class="line"><span class="lineno">   59</span>  <span class="keywordflow">if</span>(<a class="code hl_function" href="../../d5/d64/defs_8h.html#a75bc8d8c7ea0b4b39d4f470e18e0dba7">argint</a>(0, &amp;n) &lt; 0)</div>
<div class="line"><span class="lineno">   60</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">   61</span>  addr = <a class="code hl_function" href="../../d5/d64/defs_8h.html#a3d2327db1e34643f4a9e6a07c8cc62c6">myproc</a>()-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#a6e67042bb361124ff287af88efc33e00">sz</a>;</div>
<div class="line"><span class="lineno">   62</span>  <span class="keywordflow">if</span>(<a class="code hl_function" href="../../d5/d64/defs_8h.html#acb02e9289fb8a1017c3455b137a9bccd">growproc</a>(n) &lt; 0)</div>
<div class="line"><span class="lineno">   63</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">   64</span>  <span class="keywordflow">return</span> addr;</div>
<div class="line"><span class="lineno">   65</span>}</div>
<div class="ttc" id="adefs_8h_html_acb02e9289fb8a1017c3455b137a9bccd"><div class="ttname"><a href="../../d5/d64/defs_8h.html#acb02e9289fb8a1017c3455b137a9bccd">growproc</a></div><div class="ttdeci">int growproc(int)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dda/proc_8c_source.html#l00159">proc.c:159</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../db/dd8/syscall_8c_ab21d46be776cf6075a997af525a1a628_cgraph.png" border="0" usemap="#adb/dd8/syscall_8c_ab21d46be776cf6075a997af525a1a628_cgraph" alt=""/></div>
<map name="adb/dd8/syscall_8c_ab21d46be776cf6075a997af525a1a628_cgraph" id="adb/dd8/syscall_8c_ab21d46be776cf6075a997af525a1a628_cgraph">
<area shape="rect" title=" " alt="" coords="5,195,80,221"/>
<area shape="rect" href="../../db/dd8/syscall_8c.html#ade56ef2176f85cd61e7b91b400e7d4d3" title=" " alt="" coords="932,195,987,221"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a41af0935f3989aae450cf8988cd9c3a9" title=" " alt="" coords="1172,297,1237,322"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a9c16214741f4fcd088e5eea468709328" title=" " alt="" coords="128,297,203,322"/>
<area shape="rect" href="../../db/dd8/syscall_8c.html#a918cadc6c55aa7ac38982659c27a3a75" title=" " alt="" coords="1043,145,1109,170"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="1429,398,1491,423"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="2078,418,2134,443"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="2075,170,2137,195"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="1699,1209,1758,1234"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="1561,1513,1614,1538"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="1699,1665,1758,1690"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="1683,1513,1775,1538"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="1823,955,1887,981"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="1823,1462,1887,1487"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="1935,955,2027,981"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="1949,506,2012,531"/>
<area shape="rect" href="../../de/de9/vm_8c.html#afea0f0a82a9f9c7aae26f90b5e0836c6" title=" " alt="" coords="251,2323,325,2349"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a6d3019ea15a9bfdc5131ae97f3623c49" title=" " alt="" coords="1292,2273,1380,2298"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a87c90f0ab2a1b11c2b55f4e483bb8493" title=" " alt="" coords="1293,211,1379,237"/>
<area shape="rect" href="../../d4/def/kalloc_8c.html#aced59ecf8411235f6dffc065236711a5" title=" " alt="" coords="1435,2121,1485,2146"/>
<area shape="rect" href="../../db/d8a/ulib_8c.html#aa9cdc2409c15ccd5ee3b2031576f4093" title=" " alt="" coords="1553,2246,1622,2271"/>
<area shape="rect" href="../../d4/def/kalloc_8c.html#a5e965f6365c721b5b23c12d16d45c3dc" title=" " alt="" coords="1308,2577,1364,2602"/>
<area shape="rect" href="../../de/dc0/usertests_8c.html#aa1c6e6e76813ccb29a29bb119dba668a" title=" " alt="" coords="373,1589,424,1614"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#aaf98ef7cdde3a0dfb2e49919de3298b1" title=" " alt="" coords="481,1133,523,1158"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#acd2e1ded4bb6fce4500438bf928330f4" title=" " alt="" coords="937,2071,981,2097"/>
<area shape="rect" href="../../df/d5d/umalloc_8c.html#adebb229f063e66907017098087cbe791" title=" " alt="" coords="480,1465,524,1490"/>
<area shape="rect" href="../../d8/ddb/user_8h.html#a939cb25a305fe68aad9b365077f1a8c7" title=" " alt="" coords="473,1514,531,1539"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a650cf0caaaa8b75f653c1c92818d03a4" title=" " alt="" coords="1709,1867,1748,1893"/>
<area shape="rect" href="../../df/d5d/umalloc_8c.html#ac131c16d1dcb6bea908d0237c82e981d" title=" " alt="" coords="472,1563,532,1589"/>
<area shape="rect" href="../../d5/de1/forktest_8c.html#a249680925885256274fa9f02dd51cec4" title=" " alt="" coords="477,385,527,410"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#af6f31822f7e737b4e414bdac1ccb59a4" title=" " alt="" coords="813,1665,860,1690"/>
<area shape="rect" href="../../d7/df8/log_8c.html#ac96aa31ffc0500e749c62c4d377c21c9" title=" " alt="" coords="799,1133,874,1158"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad788da91743c333b5bed7c4a0dd12365" title=" " alt="" coords="1047,663,1105,689"/>
<area shape="rect" href="../../d7/df8/log_8c.html#ac0f12be0ca0de555e60b27b06a57a65b" title=" " alt="" coords="1428,1259,1492,1285"/>
<area shape="rect" href="../../d6/d13/file_8c.html#ae557c81ab89c24219146144bb6adaa2c" title=" " alt="" coords="580,1233,651,1258"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#ab3c447f135c68e4c3c1f8d5866f6e77b" title=" " alt="" coords="699,775,741,801"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ae70cc0370342e46f6db3bec367232457" title=" " alt="" coords="933,946,986,971"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a9fa00b0be5d3c4781048861e2506eb63" title=" " alt="" coords="1165,601,1244,626"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a4a34d9f03e436cfa09b88f735f6ee952" title=" " alt="" coords="1695,1057,1762,1082"/>
<area shape="rect" href="../../d1/d47/pipe_8c.html#a48642f54734698f6f881ee07723292cb" title=" " alt="" coords="1297,1310,1375,1335"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#aaad2d7a86d4859982dd9a132f5128ff2" title=" " alt="" coords="789,725,884,750"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a7220afa8e5f4bea540eb95879ea7df6e" title=" " alt="" coords="805,675,869,701"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#aa997067c2c9bfef15af6fa0a10c20f4a" title=" " alt="" coords="1540,1006,1635,1031"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a1b57bfa0091c9be3ccc16dbb85ce3acf" title=" " alt="" coords="1039,2171,1113,2197"/>
<area shape="rect" href="../../d6/d13/file_8c.html#a9ef0346d08d8ed79ce2a9c03f9a4b4b2" title=" " alt="" coords="1430,1817,1490,1842"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a24a91383ab80b4b8a1ef1f4df896035c" title=" " alt="" coords="1705,1917,1752,1942"/>
<area shape="rect" href="../../d1/db0/string_8c.html#aca73516e4b2fdb2663e0d26f855ac3ca" title=" " alt="" coords="1035,2122,1117,2147"/>
<area shape="rect" href="../../de/de9/vm_8c.html#aa883924e2f068c520b695cdc168e1603" title=" " alt="" coords="1173,2070,1236,2095"/>
<area shape="rect" href="../../db/d8a/ulib_8c.html#a59b5e6e6105ef0e97aed266ec6fdfe60" title=" " alt="" coords="588,385,643,410"/>
<area shape="rect" href="../../d8/ddb/user_8h.html#ae57e95d717eb7386cd8b935a0c136abe" title=" " alt="" coords="590,335,641,361"/>
</map>
</div>

</div>
</div>
<a id="a59778ec9bfa6b6f2100b43fbba000573" name="a59778ec9bfa6b6f2100b43fbba000573"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a59778ec9bfa6b6f2100b43fbba000573">&#9670;&#160;</a></span>sys_sleep()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sys_sleep </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d35/sysproc_8c_source.html#l00068">68</a> of file <a class="el" href="../../dd/d35/sysproc_8c_source.html">sysproc.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   69</span>{</div>
<div class="line"><span class="lineno">   70</span>  <span class="keywordtype">int</span> n;</div>
<div class="line"><span class="lineno">   71</span>  <a class="code hl_typedef" href="../../d9/d49/types_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> ticks0;</div>
<div class="line"><span class="lineno">   72</span> </div>
<div class="line"><span class="lineno">   73</span>  <span class="keywordflow">if</span>(<a class="code hl_function" href="../../d5/d64/defs_8h.html#a75bc8d8c7ea0b4b39d4f470e18e0dba7">argint</a>(0, &amp;n) &lt; 0)</div>
<div class="line"><span class="lineno">   74</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">   75</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#afe4ef8638f1ecb962a6e67fb086ee3b8">acquire</a>(&amp;<a class="code hl_variable" href="../../d5/d64/defs_8h.html#a094a4703b62095e2fa469fab3ffea5c7">tickslock</a>);</div>
<div class="line"><span class="lineno">   76</span>  ticks0 = <a class="code hl_variable" href="../../d5/d64/defs_8h.html#a7fcd6915876e066781399d7b00f1b1f0">ticks</a>;</div>
<div class="line"><span class="lineno">   77</span>  <span class="keywordflow">while</span>(<a class="code hl_variable" href="../../d5/d64/defs_8h.html#a7fcd6915876e066781399d7b00f1b1f0">ticks</a> - ticks0 &lt; n){</div>
<div class="line"><span class="lineno">   78</span>    <span class="keywordflow">if</span>(<a class="code hl_function" href="../../d5/d64/defs_8h.html#a3d2327db1e34643f4a9e6a07c8cc62c6">myproc</a>()-&gt;killed){</div>
<div class="line"><span class="lineno">   79</span>      <a class="code hl_function" href="../../d5/d64/defs_8h.html#a4f8616948f3dbce65671f666eed1d669">release</a>(&amp;<a class="code hl_variable" href="../../d5/d64/defs_8h.html#a094a4703b62095e2fa469fab3ffea5c7">tickslock</a>);</div>
<div class="line"><span class="lineno">   80</span>      <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">   81</span>    }</div>
<div class="line"><span class="lineno">   82</span>    <a class="code hl_function" href="../../d5/d64/defs_8h.html#aca4a88f06b3ebbcc04330f7ae06c8507">sleep</a>(&amp;<a class="code hl_variable" href="../../d5/d64/defs_8h.html#a7fcd6915876e066781399d7b00f1b1f0">ticks</a>, &amp;<a class="code hl_variable" href="../../d5/d64/defs_8h.html#a094a4703b62095e2fa469fab3ffea5c7">tickslock</a>);</div>
<div class="line"><span class="lineno">   83</span>  }</div>
<div class="line"><span class="lineno">   84</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#a4f8616948f3dbce65671f666eed1d669">release</a>(&amp;<a class="code hl_variable" href="../../d5/d64/defs_8h.html#a094a4703b62095e2fa469fab3ffea5c7">tickslock</a>);</div>
<div class="line"><span class="lineno">   85</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">   86</span>}</div>
<div class="ttc" id="adefs_8h_html_a094a4703b62095e2fa469fab3ffea5c7"><div class="ttname"><a href="../../d5/d64/defs_8h.html#a094a4703b62095e2fa469fab3ffea5c7">tickslock</a></div><div class="ttdeci">struct spinlock tickslock</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d6f/trap_8c_source.html#l00014">trap.c:14</a></div></div>
<div class="ttc" id="adefs_8h_html_a4f8616948f3dbce65671f666eed1d669"><div class="ttname"><a href="../../d5/d64/defs_8h.html#a4f8616948f3dbce65671f666eed1d669">release</a></div><div class="ttdeci">void release(struct spinlock *)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d2d/spinlock_8c_source.html#l00047">spinlock.c:47</a></div></div>
<div class="ttc" id="adefs_8h_html_a7fcd6915876e066781399d7b00f1b1f0"><div class="ttname"><a href="../../d5/d64/defs_8h.html#a7fcd6915876e066781399d7b00f1b1f0">ticks</a></div><div class="ttdeci">uint ticks</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d6f/trap_8c_source.html#l00015">trap.c:15</a></div></div>
<div class="ttc" id="adefs_8h_html_aca4a88f06b3ebbcc04330f7ae06c8507"><div class="ttname"><a href="../../d5/d64/defs_8h.html#aca4a88f06b3ebbcc04330f7ae06c8507">sleep</a></div><div class="ttdeci">void sleep(void *, struct spinlock *)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dda/proc_8c_source.html#l00418">proc.c:418</a></div></div>
<div class="ttc" id="adefs_8h_html_afe4ef8638f1ecb962a6e67fb086ee3b8"><div class="ttname"><a href="../../d5/d64/defs_8h.html#afe4ef8638f1ecb962a6e67fb086ee3b8">acquire</a></div><div class="ttdeci">void acquire(struct spinlock *)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d2d/spinlock_8c_source.html#l00025">spinlock.c:25</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../db/dd8/syscall_8c_a59778ec9bfa6b6f2100b43fbba000573_cgraph.png" border="0" usemap="#adb/dd8/syscall_8c_a59778ec9bfa6b6f2100b43fbba000573_cgraph" alt=""/></div>
<map name="adb/dd8/syscall_8c_a59778ec9bfa6b6f2100b43fbba000573_cgraph" id="adb/dd8/syscall_8c_a59778ec9bfa6b6f2100b43fbba000573_cgraph">
<area shape="rect" title=" " alt="" coords="5,449,87,474"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="488,449,552,474"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="1212,297,1276,322"/>
<area shape="rect" href="../../db/dd8/syscall_8c.html#ade56ef2176f85cd61e7b91b400e7d4d3" title=" " alt="" coords="135,525,189,550"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a41af0935f3989aae450cf8988cd9c3a9" title=" " alt="" coords="357,626,423,651"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ae70cc0370342e46f6db3bec367232457" title=" " alt="" coords="135,322,189,347"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="611,398,703,423"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="625,246,688,271"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="861,537,923,562"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="971,347,1024,373"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="751,550,813,575"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="1324,575,1380,601"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="1089,527,1147,553"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="1089,297,1147,322"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="1072,346,1164,371"/>
<area shape="rect" href="../../db/dd8/syscall_8c.html#a918cadc6c55aa7ac38982659c27a3a75" title=" " alt="" coords="237,575,303,601"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad788da91743c333b5bed7c4a0dd12365" title=" " alt="" coords="241,347,299,373"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a9fa00b0be5d3c4781048861e2506eb63" title=" " alt="" coords="351,525,429,550"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a1d9e7047d3dfb57809a2541d8387705e" title=" " alt="" coords="491,702,549,727"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a02ca0670bc1fe12e38453082631ff360" title=" " alt="" coords="477,550,563,575"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a87c90f0ab2a1b11c2b55f4e483bb8493" title=" " alt="" coords="614,702,699,727"/>
</map>
</div>

</div>
</div>
<a id="ae1e58ee11d41f643929520d8c1640da7" name="ae1e58ee11d41f643929520d8c1640da7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae1e58ee11d41f643929520d8c1640da7">&#9670;&#160;</a></span>sys_unlink()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sys_unlink </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/d14/sysfile_8c_source.html#l00185">185</a> of file <a class="el" href="../../d1/d14/sysfile_8c_source.html">sysfile.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  186</span>{</div>
<div class="line"><span class="lineno">  187</span>  <span class="keyword">struct </span><a class="code hl_struct" href="../../d0/df8/structinode.html">inode</a> *ip, *dp;</div>
<div class="line"><span class="lineno">  188</span>  <span class="keyword">struct </span><a class="code hl_struct" href="../../d5/de2/structdirent.html">dirent</a> de;</div>
<div class="line"><span class="lineno">  189</span>  <span class="keywordtype">char</span> <a class="code hl_variable" href="../../de/dc0/usertests_8c.html#aee754febd402311e2a552cb0d6ab6629">name</a>[<a class="code hl_define" href="../../df/d26/fs_8h.html#a48246fb9e5cb7f6a71ebc9ebc2f06562">DIRSIZ</a>], *path;</div>
<div class="line"><span class="lineno">  190</span>  <a class="code hl_typedef" href="../../d9/d49/types_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> off;</div>
<div class="line"><span class="lineno">  191</span> </div>
<div class="line"><span class="lineno">  192</span>  <span class="keywordflow">if</span>(<a class="code hl_function" href="../../d5/d64/defs_8h.html#afc00cb2e6a06b1021f3d82fa4d0eff07">argstr</a>(0, &amp;path) &lt; 0)</div>
<div class="line"><span class="lineno">  193</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  194</span> </div>
<div class="line"><span class="lineno">  195</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#a603ca98212e00d2ffdba7827ef0f1003">begin_op</a>();</div>
<div class="line"><span class="lineno">  196</span>  <span class="keywordflow">if</span>((dp = <a class="code hl_function" href="../../d5/d64/defs_8h.html#a699674601988291ebcc47d902f18bee8">nameiparent</a>(path, <a class="code hl_variable" href="../../de/dc0/usertests_8c.html#aee754febd402311e2a552cb0d6ab6629">name</a>)) == 0){</div>
<div class="line"><span class="lineno">  197</span>    <a class="code hl_function" href="../../d5/d64/defs_8h.html#a2504e37a109f9bae5ca11fe89e4e8fa1">end_op</a>();</div>
<div class="line"><span class="lineno">  198</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  199</span>  }</div>
<div class="line"><span class="lineno">  200</span> </div>
<div class="line"><span class="lineno">  201</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#a29a4d743d41fe659f74b0a57fdc25012">ilock</a>(dp);</div>
<div class="line"><span class="lineno">  202</span> </div>
<div class="line"><span class="lineno">  203</span>  <span class="comment">// Cannot unlink &quot;.&quot; or &quot;..&quot;.</span></div>
<div class="line"><span class="lineno">  204</span>  <span class="keywordflow">if</span>(<a class="code hl_function" href="../../d5/d64/defs_8h.html#a0206c4090dc4bdfd8481e38057d5b2af">namecmp</a>(<a class="code hl_variable" href="../../de/dc0/usertests_8c.html#aee754febd402311e2a552cb0d6ab6629">name</a>, <span class="stringliteral">&quot;.&quot;</span>) == 0 || <a class="code hl_function" href="../../d5/d64/defs_8h.html#a0206c4090dc4bdfd8481e38057d5b2af">namecmp</a>(<a class="code hl_variable" href="../../de/dc0/usertests_8c.html#aee754febd402311e2a552cb0d6ab6629">name</a>, <span class="stringliteral">&quot;..&quot;</span>) == 0)</div>
<div class="line"><span class="lineno">  205</span>    <span class="keywordflow">goto</span> bad;</div>
<div class="line"><span class="lineno">  206</span> </div>
<div class="line"><span class="lineno">  207</span>  <span class="keywordflow">if</span>((ip = <a class="code hl_function" href="../../d5/d64/defs_8h.html#aef19d16d1d20d8f7cdcd8ee0d98fc13f">dirlookup</a>(dp, <a class="code hl_variable" href="../../de/dc0/usertests_8c.html#aee754febd402311e2a552cb0d6ab6629">name</a>, &amp;off)) == 0)</div>
<div class="line"><span class="lineno">  208</span>    <span class="keywordflow">goto</span> bad;</div>
<div class="line"><span class="lineno">  209</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#a29a4d743d41fe659f74b0a57fdc25012">ilock</a>(ip);</div>
<div class="line"><span class="lineno">  210</span> </div>
<div class="line"><span class="lineno">  211</span>  <span class="keywordflow">if</span>(ip-&gt;<a class="code hl_variable" href="../../d0/df8/structinode.html#af8b88b409bea7ef99c49a55f387538b2">nlink</a> &lt; 1)</div>
<div class="line"><span class="lineno">  212</span>    <a class="code hl_function" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a">panic</a>(<span class="stringliteral">&quot;unlink: nlink &lt; 1&quot;</span>);</div>
<div class="line"><span class="lineno">  213</span>  <span class="keywordflow">if</span>(ip-&gt;<a class="code hl_variable" href="../../d0/df8/structinode.html#a8d74bec2898785c057111c328d23fda2">type</a> == <a class="code hl_define" href="../../d2/d1b/stat_8h.html#a91136bcd71a9f499304f5d7e7e9d6376">T_DIR</a> &amp;&amp; !isdirempty(ip)){</div>
<div class="line"><span class="lineno">  214</span>    <a class="code hl_function" href="../../d5/d64/defs_8h.html#adff5bb5a1eeaf921853ec06479f8c49b">iunlockput</a>(ip);</div>
<div class="line"><span class="lineno">  215</span>    <span class="keywordflow">goto</span> bad;</div>
<div class="line"><span class="lineno">  216</span>  }</div>
<div class="line"><span class="lineno">  217</span> </div>
<div class="line"><span class="lineno">  218</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#a0098886a849eef10803e9f35ceec61b9">memset</a>(&amp;de, 0, <span class="keyword">sizeof</span>(de));</div>
<div class="line"><span class="lineno">  219</span>  <span class="keywordflow">if</span>(<a class="code hl_function" href="../../d5/d64/defs_8h.html#a515876d4653cefef4732806ef7f2833f">writei</a>(dp, (<span class="keywordtype">char</span>*)&amp;de, off, <span class="keyword">sizeof</span>(de)) != <span class="keyword">sizeof</span>(de))</div>
<div class="line"><span class="lineno">  220</span>    <a class="code hl_function" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a">panic</a>(<span class="stringliteral">&quot;unlink: writei&quot;</span>);</div>
<div class="line"><span class="lineno">  221</span>  <span class="keywordflow">if</span>(ip-&gt;<a class="code hl_variable" href="../../d0/df8/structinode.html#a8d74bec2898785c057111c328d23fda2">type</a> == <a class="code hl_define" href="../../d2/d1b/stat_8h.html#a91136bcd71a9f499304f5d7e7e9d6376">T_DIR</a>){</div>
<div class="line"><span class="lineno">  222</span>    dp-&gt;<a class="code hl_variable" href="../../d0/df8/structinode.html#af8b88b409bea7ef99c49a55f387538b2">nlink</a>--;</div>
<div class="line"><span class="lineno">  223</span>    <a class="code hl_function" href="../../d5/d64/defs_8h.html#a2ee6784c123b2a2656d88b5b357f2253">iupdate</a>(dp);</div>
<div class="line"><span class="lineno">  224</span>  }</div>
<div class="line"><span class="lineno">  225</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#adff5bb5a1eeaf921853ec06479f8c49b">iunlockput</a>(dp);</div>
<div class="line"><span class="lineno">  226</span> </div>
<div class="line"><span class="lineno">  227</span>  ip-&gt;<a class="code hl_variable" href="../../d0/df8/structinode.html#af8b88b409bea7ef99c49a55f387538b2">nlink</a>--;</div>
<div class="line"><span class="lineno">  228</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#a2ee6784c123b2a2656d88b5b357f2253">iupdate</a>(ip);</div>
<div class="line"><span class="lineno">  229</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#adff5bb5a1eeaf921853ec06479f8c49b">iunlockput</a>(ip);</div>
<div class="line"><span class="lineno">  230</span> </div>
<div class="line"><span class="lineno">  231</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#a2504e37a109f9bae5ca11fe89e4e8fa1">end_op</a>();</div>
<div class="line"><span class="lineno">  232</span> </div>
<div class="line"><span class="lineno">  233</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  234</span> </div>
<div class="line"><span class="lineno">  235</span>bad:</div>
<div class="line"><span class="lineno">  236</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#adff5bb5a1eeaf921853ec06479f8c49b">iunlockput</a>(dp);</div>
<div class="line"><span class="lineno">  237</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#a2504e37a109f9bae5ca11fe89e4e8fa1">end_op</a>();</div>
<div class="line"><span class="lineno">  238</span>  <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  239</span>}</div>
<div class="ttc" id="aconsole_8c_html_a95c0aca5d6d7487933984f08b189917a"><div class="ttname"><a href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a">panic</a></div><div class="ttdeci">void panic(char *s)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d56/console_8c_source.html#l00107">console.c:107</a></div></div>
<div class="ttc" id="adefs_8h_html_a0206c4090dc4bdfd8481e38057d5b2af"><div class="ttname"><a href="../../d5/d64/defs_8h.html#a0206c4090dc4bdfd8481e38057d5b2af">namecmp</a></div><div class="ttdeci">int namecmp(const char *, const char *)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d5a/fs_8c_source.html#l00517">fs.c:517</a></div></div>
<div class="ttc" id="adefs_8h_html_a515876d4653cefef4732806ef7f2833f"><div class="ttname"><a href="../../d5/d64/defs_8h.html#a515876d4653cefef4732806ef7f2833f">writei</a></div><div class="ttdeci">int writei(struct inode *, char *, uint, uint)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d5a/fs_8c_source.html#l00482">fs.c:482</a></div></div>
<div class="ttc" id="adefs_8h_html_aef19d16d1d20d8f7cdcd8ee0d98fc13f"><div class="ttname"><a href="../../d5/d64/defs_8h.html#aef19d16d1d20d8f7cdcd8ee0d98fc13f">dirlookup</a></div><div class="ttdeci">struct inode * dirlookup(struct inode *, char *, uint *)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d5a/fs_8c_source.html#l00525">fs.c:525</a></div></div>
<div class="ttc" id="astructdirent_html"><div class="ttname"><a href="../../d5/de2/structdirent.html">dirent</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d26/fs_8h_source.html#l00053">fs.h:53</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../db/dd8/syscall_8c_ae1e58ee11d41f643929520d8c1640da7_cgraph.png" border="0" usemap="#adb/dd8/syscall_8c_ae1e58ee11d41f643929520d8c1640da7_cgraph" alt=""/></div>
<map name="adb/dd8/syscall_8c_ae1e58ee11d41f643929520d8c1640da7_cgraph" id="adb/dd8/syscall_8c_ae1e58ee11d41f643929520d8c1640da7_cgraph">
<area shape="rect" title=" " alt="" coords="5,1881,89,1906"/>
<area shape="rect" href="../../db/dd8/syscall_8c.html#a662eedd65f3e2165093842b80e3bc024" title=" " alt="" coords="802,386,857,411"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="1435,1461,1488,1486"/>
<area shape="rect" href="../../d7/df8/log_8c.html#ac96aa31ffc0500e749c62c4d377c21c9" title=" " alt="" coords="655,345,730,370"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a5341068f021beac8cf0032b97d231e6f" title=" " alt="" coords="279,1969,353,1994"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#ae74f6e5b19a4e7f3e72807ee67141819" title=" " alt="" coords="401,2070,480,2095"/>
<area shape="rect" href="../../d7/df8/log_8c.html#ac0f12be0ca0de555e60b27b06a57a65b" title=" " alt="" coords="1311,1866,1375,1891"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#aed28187406d84a3aa71f10c6235a03ec" title=" " alt="" coords="416,1354,465,1379"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a207b3008bae35596c55ec7c4fc6875eb" title=" " alt="" coords="143,1126,225,1151"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a7220afa8e5f4bea540eb95879ea7df6e" title=" " alt="" coords="409,1531,473,1557"/>
<area shape="rect" href="../../db/d8a/ulib_8c.html#aa9cdc2409c15ccd5ee3b2031576f4093" title=" " alt="" coords="149,2121,219,2146"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#ade44726f2aed2af27fa0df5f63f9e688" title=" " alt="" coords="137,2170,231,2195"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a15858f4d8a4cc1def3d84d03c312836b" title=" " alt="" coords="289,1758,343,1783"/>
<area shape="rect" href="../../db/dd8/syscall_8c.html#ade56ef2176f85cd61e7b91b400e7d4d3" title=" " alt="" coords="923,386,977,411"/>
<area shape="rect" href="../../db/dd8/syscall_8c.html#ace37b4584713ab6bda44a282a298961f" title=" " alt="" coords="1043,297,1110,322"/>
<area shape="rect" href="../../db/dd8/syscall_8c.html#a918cadc6c55aa7ac38982659c27a3a75" title=" " alt="" coords="1044,398,1109,423"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a41af0935f3989aae450cf8988cd9c3a9" title=" " alt="" coords="1182,347,1247,373"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="1312,525,1373,550"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="1938,575,1994,601"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="1935,246,1997,271"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="1559,1209,1618,1234"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="1559,1461,1618,1486"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="1543,1411,1635,1437"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="1683,854,1747,879"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="1683,1386,1747,1411"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="1795,854,1887,879"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="1809,525,1872,550"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ae70cc0370342e46f6db3bec367232457" title=" " alt="" coords="803,905,856,930"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad788da91743c333b5bed7c4a0dd12365" title=" " alt="" coords="921,753,979,778"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a9fa00b0be5d3c4781048861e2506eb63" title=" " alt="" coords="1037,753,1116,778"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a1d9e7047d3dfb57809a2541d8387705e" title=" " alt="" coords="1186,803,1243,829"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a02ca0670bc1fe12e38453082631ff360" title=" " alt="" coords="1172,702,1257,727"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a87c90f0ab2a1b11c2b55f4e483bb8493" title=" " alt="" coords="1172,601,1257,626"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a3aba1fa9f6789d09356aec5b96d91fa8" title=" " alt="" coords="415,1709,466,1734"/>
<area shape="rect" href="../../d1/db0/string_8c.html#a81b6f58fa9c826f064fb6844dda4c475" title=" " alt="" coords="528,2070,597,2095"/>
<area shape="rect" href="../../dc/de6/bio_8c.html#a30b8d2ef2300ed8e3d879a428fe39898" title=" " alt="" coords="535,1582,590,1607"/>
<area shape="rect" href="../../d1/db0/string_8c.html#a07f97e2ed1ce37955192d52de8f4911f" title=" " alt="" coords="788,1513,871,1538"/>
<area shape="rect" href="../../dc/de6/bio_8c.html#ab5335aeb503731104314321a78a6d727" title=" " alt="" coords="921,1614,979,1639"/>
<area shape="rect" href="../../da/d9b/memide_8c.html#a7f36b008f02088c86f76e98e05b55af5" title=" " alt="" coords="666,1683,719,1709"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#a6fdbe54cbecd8fc67d74793b27adcf05" title=" " alt="" coords="1029,1241,1124,1266"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#aa997067c2c9bfef15af6fa0a10c20f4a" title=" " alt="" coords="1029,1297,1124,1322"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a4a34d9f03e436cfa09b88f735f6ee952" title=" " alt="" coords="1428,1613,1495,1638"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#aaad2d7a86d4859982dd9a132f5128ff2" title=" " alt="" coords="645,978,740,1003"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#ab3c447f135c68e4c3c1f8d5866f6e77b" title=" " alt="" coords="295,1126,337,1151"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#ae4e29916219b9293b37f9c34220694fe" title=" " alt="" coords="919,1107,981,1133"/>
<area shape="rect" href="../../d7/df8/log_8c.html#a7eacb0fbebe5ce4c7d3ddea15908b13d" title=" " alt="" coords="1305,1817,1380,1842"/>
</map>
</div>

</div>
</div>
<a id="aaf8553903ba8f2776247679d4db0d121" name="aaf8553903ba8f2776247679d4db0d121"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaf8553903ba8f2776247679d4db0d121">&#9670;&#160;</a></span>sys_uptime()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sys_uptime </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d35/sysproc_8c_source.html#l00091">91</a> of file <a class="el" href="../../dd/d35/sysproc_8c_source.html">sysproc.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   92</span>{</div>
<div class="line"><span class="lineno">   93</span>  <a class="code hl_typedef" href="../../d9/d49/types_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> xticks;</div>
<div class="line"><span class="lineno">   94</span> </div>
<div class="line"><span class="lineno">   95</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#afe4ef8638f1ecb962a6e67fb086ee3b8">acquire</a>(&amp;<a class="code hl_variable" href="../../d5/d64/defs_8h.html#a094a4703b62095e2fa469fab3ffea5c7">tickslock</a>);</div>
<div class="line"><span class="lineno">   96</span>  xticks = <a class="code hl_variable" href="../../d5/d64/defs_8h.html#a7fcd6915876e066781399d7b00f1b1f0">ticks</a>;</div>
<div class="line"><span class="lineno">   97</span>  <a class="code hl_function" href="../../d5/d64/defs_8h.html#a4f8616948f3dbce65671f666eed1d669">release</a>(&amp;<a class="code hl_variable" href="../../d5/d64/defs_8h.html#a094a4703b62095e2fa469fab3ffea5c7">tickslock</a>);</div>
<div class="line"><span class="lineno">   98</span>  <span class="keywordflow">return</span> xticks;</div>
<div class="line"><span class="lineno">   99</span>}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../db/dd8/syscall_8c_aaf8553903ba8f2776247679d4db0d121_cgraph.png" border="0" usemap="#adb/dd8/syscall_8c_aaf8553903ba8f2776247679d4db0d121_cgraph" alt=""/></div>
<map name="adb/dd8/syscall_8c_aaf8553903ba8f2776247679d4db0d121_cgraph" id="adb/dd8/syscall_8c_aaf8553903ba8f2776247679d4db0d121_cgraph">
<area shape="rect" title=" " alt="" coords="5,119,95,145"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="143,246,207,271"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="856,94,920,119"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="255,347,347,373"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="269,246,332,271"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="505,347,567,373"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="615,195,668,221"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="395,347,457,373"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="968,270,1024,295"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="733,346,791,371"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="733,94,791,119"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="716,143,808,169"/>
</map>
</div>

</div>
</div>
<a id="ad202e06addda05ba6fe60f05d3f61913" name="ad202e06addda05ba6fe60f05d3f61913"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad202e06addda05ba6fe60f05d3f61913">&#9670;&#160;</a></span>sys_wait()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sys_wait </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d35/sysproc_8c_source.html#l00032">32</a> of file <a class="el" href="../../dd/d35/sysproc_8c_source.html">sysproc.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   33</span>{</div>
<div class="line"><span class="lineno">   34</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="../../d5/d64/defs_8h.html#af6f31822f7e737b4e414bdac1ccb59a4">wait</a>();</div>
<div class="line"><span class="lineno">   35</span>}</div>
<div class="ttc" id="adefs_8h_html_af6f31822f7e737b4e414bdac1ccb59a4"><div class="ttname"><a href="../../d5/d64/defs_8h.html#af6f31822f7e737b4e414bdac1ccb59a4">wait</a></div><div class="ttdeci">int wait(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dda/proc_8c_source.html#l00273">proc.c:273</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../db/dd8/syscall_8c_ad202e06addda05ba6fe60f05d3f61913_cgraph.png" border="0" usemap="#adb/dd8/syscall_8c_ad202e06addda05ba6fe60f05d3f61913_cgraph" alt=""/></div>
<map name="adb/dd8/syscall_8c_ad202e06addda05ba6fe60f05d3f61913_cgraph" id="adb/dd8/syscall_8c_ad202e06addda05ba6fe60f05d3f61913_cgraph">
<area shape="rect" title=" " alt="" coords="5,246,80,271"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#af6f31822f7e737b4e414bdac1ccb59a4" title=" " alt="" coords="128,246,175,271"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="607,449,671,474"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="1331,423,1395,449"/>
<area shape="rect" href="../../de/de9/vm_8c.html#aa883924e2f068c520b695cdc168e1603" title=" " alt="" coords="223,170,285,195"/>
<area shape="rect" href="../../d4/def/kalloc_8c.html#aced59ecf8411235f6dffc065236711a5" title=" " alt="" coords="483,145,534,170"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a41af0935f3989aae450cf8988cd9c3a9" title=" " alt="" coords="476,1006,541,1031"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ae70cc0370342e46f6db3bec367232457" title=" " alt="" coords="227,373,281,398"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="729,398,821,423"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="744,715,807,741"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="980,803,1041,829"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="1089,449,1143,474"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="869,803,932,829"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="1443,753,1499,778"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="1207,753,1266,778"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="1207,398,1266,423"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="1191,499,1283,525"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a6d3019ea15a9bfdc5131ae97f3623c49" title=" " alt="" coords="333,195,421,221"/>
<area shape="rect" href="../../db/d8a/ulib_8c.html#aa9cdc2409c15ccd5ee3b2031576f4093" title=" " alt="" coords="604,145,673,170"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad788da91743c333b5bed7c4a0dd12365" title=" " alt="" coords="349,854,406,879"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a9fa00b0be5d3c4781048861e2506eb63" title=" " alt="" coords="469,753,548,778"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a1d9e7047d3dfb57809a2541d8387705e" title=" " alt="" coords="610,854,667,879"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a02ca0670bc1fe12e38453082631ff360" title=" " alt="" coords="596,702,681,727"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a87c90f0ab2a1b11c2b55f4e483bb8493" title=" " alt="" coords="733,905,818,930"/>
</map>
</div>

</div>
</div>
<a id="a687d939a9e4792af15db96f2c2f34378" name="a687d939a9e4792af15db96f2c2f34378"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a687d939a9e4792af15db96f2c2f34378">&#9670;&#160;</a></span>sys_write()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sys_write </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/d14/sysfile_8c_source.html#l00082">82</a> of file <a class="el" href="../../d1/d14/sysfile_8c_source.html">sysfile.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   83</span>{</div>
<div class="line"><span class="lineno">   84</span>  <span class="keyword">struct </span><a class="code hl_struct" href="../../d7/d3a/structfile.html">file</a> *f;</div>
<div class="line"><span class="lineno">   85</span>  <span class="keywordtype">int</span> n;</div>
<div class="line"><span class="lineno">   86</span>  <span class="keywordtype">char</span> *p;</div>
<div class="line"><span class="lineno">   87</span> </div>
<div class="line"><span class="lineno">   88</span>  <span class="keywordflow">if</span>(argfd(0, 0, &amp;f) &lt; 0 || <a class="code hl_function" href="../../d5/d64/defs_8h.html#a75bc8d8c7ea0b4b39d4f470e18e0dba7">argint</a>(2, &amp;n) &lt; 0 || <a class="code hl_function" href="../../d5/d64/defs_8h.html#a05c7464938c27eb91540c06ec6137f26">argptr</a>(1, &amp;p, n) &lt; 0)</div>
<div class="line"><span class="lineno">   89</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">   90</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="../../d5/d64/defs_8h.html#a90e8980df48fa900fc33de53448a2e18">filewrite</a>(f, p, n);</div>
<div class="line"><span class="lineno">   91</span>}</div>
<div class="ttc" id="adefs_8h_html_a90e8980df48fa900fc33de53448a2e18"><div class="ttname"><a href="../../d5/d64/defs_8h.html#a90e8980df48fa900fc33de53448a2e18">filewrite</a></div><div class="ttdeci">int filewrite(struct file *, char *, int n)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l00118">file.c:118</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../db/dd8/syscall_8c_a687d939a9e4792af15db96f2c2f34378_cgraph.png" border="0" usemap="#adb/dd8/syscall_8c_a687d939a9e4792af15db96f2c2f34378_cgraph" alt=""/></div>
<map name="adb/dd8/syscall_8c_a687d939a9e4792af15db96f2c2f34378_cgraph" id="adb/dd8/syscall_8c_a687d939a9e4792af15db96f2c2f34378_cgraph">
<area shape="rect" title=" " alt="" coords="5,1793,84,1819"/>
<area shape="rect" href="../../db/dd8/syscall_8c.html#ade56ef2176f85cd61e7b91b400e7d4d3" title=" " alt="" coords="719,1819,774,1844"/>
<area shape="rect" href="../../db/dd8/syscall_8c.html#a6ade9205d1f46b759cf93b60513a3421" title=" " alt="" coords="583,1844,637,1869"/>
<area shape="rect" href="../../d6/d13/file_8c.html#ab8de757a0a9f58dcc6511ea5e46ebb88" title=" " alt="" coords="132,636,199,661"/>
<area shape="rect" href="../../db/dd8/syscall_8c.html#a918cadc6c55aa7ac38982659c27a3a75" title=" " alt="" coords="851,1768,916,1793"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a41af0935f3989aae450cf8988cd9c3a9" title=" " alt="" coords="985,1667,1051,1692"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="1255,1440,1317,1465"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="1891,1364,1947,1389"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="1888,1871,1951,1896"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="1513,1212,1571,1237"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="1388,933,1441,959"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="1513,908,1571,933"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="1496,1009,1588,1035"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="1636,1313,1700,1339"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="1636,452,1700,477"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="1748,1313,1840,1339"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="1763,1719,1825,1744"/>
<area shape="rect" href="../../d7/df8/log_8c.html#ac96aa31ffc0500e749c62c4d377c21c9" title=" " alt="" coords="573,1087,647,1112"/>
<area shape="rect" href="../../d7/df8/log_8c.html#ac0f12be0ca0de555e60b27b06a57a65b" title=" " alt="" coords="1254,401,1318,427"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#aed28187406d84a3aa71f10c6235a03ec" title=" " alt="" coords="355,712,405,737"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#ae4e29916219b9293b37f9c34220694fe" title=" " alt="" coords="715,553,778,579"/>
<area shape="rect" href="../../d1/d47/pipe_8c.html#acfca0fab7d2c0c0dcc56359c8febe14a" title=" " alt="" coords="573,1136,647,1161"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a15858f4d8a4cc1def3d84d03c312836b" title=" " alt="" coords="247,509,300,535"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ae70cc0370342e46f6db3bec367232457" title=" " alt="" coords="720,1136,773,1161"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad788da91743c333b5bed7c4a0dd12365" title=" " alt="" coords="855,1413,912,1439"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a9fa00b0be5d3c4781048861e2506eb63" title=" " alt="" coords="979,1363,1057,1388"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a1d9e7047d3dfb57809a2541d8387705e" title=" " alt="" coords="1119,1464,1177,1489"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a02ca0670bc1fe12e38453082631ff360" title=" " alt="" coords="1105,1312,1191,1337"/>
<area shape="rect" href="../../de/de9/vm_8c.html#a87c90f0ab2a1b11c2b55f4e483bb8493" title=" " alt="" coords="1105,1263,1191,1288"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a4a34d9f03e436cfa09b88f735f6ee952" title=" " alt="" coords="1381,553,1448,579"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#aaad2d7a86d4859982dd9a132f5128ff2" title=" " alt="" coords="563,1037,657,1063"/>
<area shape="rect" href="../../dc/de6/bio_8c.html#a30b8d2ef2300ed8e3d879a428fe39898" title=" " alt="" coords="460,636,515,661"/>
<area shape="rect" href="../../d1/db0/string_8c.html#a07f97e2ed1ce37955192d52de8f4911f" title=" " alt="" coords="705,199,788,224"/>
<area shape="rect" href="../../dc/de6/bio_8c.html#ab5335aeb503731104314321a78a6d727" title=" " alt="" coords="718,655,775,680"/>
<area shape="rect" href="../../da/d9b/memide_8c.html#a7f36b008f02088c86f76e98e05b55af5" title=" " alt="" coords="583,788,637,813"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#a6fdbe54cbecd8fc67d74793b27adcf05" title=" " alt="" coords="836,731,931,756"/>
<area shape="rect" href="../../d8/dd1/sleeplock_8c.html#aa997067c2c9bfef15af6fa0a10c20f4a" title=" " alt="" coords="1239,552,1333,577"/>
<area shape="rect" href="../../d2/d5a/fs_8c.html#a7220afa8e5f4bea540eb95879ea7df6e" title=" " alt="" coords="348,484,412,509"/>
<area shape="rect" href="../../d7/df8/log_8c.html#a7eacb0fbebe5ce4c7d3ddea15908b13d" title=" " alt="" coords="1249,451,1323,476"/>
</map>
</div>

</div>
</div>
<a id="acd6bcafe6626fe8e7d00cacdbc3cc4f1" name="acd6bcafe6626fe8e7d00cacdbc3cc4f1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acd6bcafe6626fe8e7d00cacdbc3cc4f1">&#9670;&#160;</a></span>syscall()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void syscall </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/dd8/syscall_8c_source.html#l00140">140</a> of file <a class="el" href="../../db/dd8/syscall_8c_source.html">syscall.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  141</span>{</div>
<div class="line"><span class="lineno">  142</span>  <span class="keywordtype">int</span> num;</div>
<div class="line"><span class="lineno">  143</span>  <span class="keyword">struct </span><a class="code hl_struct" href="../../de/d48/structproc.html">proc</a> *curproc = <a class="code hl_function" href="../../d5/d64/defs_8h.html#a3d2327db1e34643f4a9e6a07c8cc62c6">myproc</a>();</div>
<div class="line"><span class="lineno">  144</span> </div>
<div class="line"><span class="lineno">  145</span>  num = curproc-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#a56ec07ac1e10ce42adfc8dd2a366071f">tf</a>-&gt;<a class="code hl_variable" href="../../df/d05/structtrapframe.html#ab1dd3a10936b61129d7395c3a21bc2fe">eax</a>;</div>
<div class="line"><span class="lineno">  146</span>  <span class="keywordflow">if</span>(num &gt; 0 &amp;&amp; num &lt; <a class="code hl_define" href="../../d5/d64/defs_8h.html#afacd331296c10f360da7640e0d68429f">NELEM</a>(syscalls) &amp;&amp; syscalls[num]) {</div>
<div class="line"><span class="lineno">  147</span>    curproc-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#a56ec07ac1e10ce42adfc8dd2a366071f">tf</a>-&gt;<a class="code hl_variable" href="../../df/d05/structtrapframe.html#ab1dd3a10936b61129d7395c3a21bc2fe">eax</a> = syscalls[num]();</div>
<div class="line"><span class="lineno">  148</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  149</span>    <a class="code hl_function" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6">cprintf</a>(<span class="stringliteral">&quot;%d %s: unknown sys call %d\n&quot;</span>,</div>
<div class="line"><span class="lineno">  150</span>            curproc-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#acf2bdf54d1f957ccbcdc987007029944">pid</a>, curproc-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#ac04af53e17d24b90c3cbfab56d658d62">name</a>, num);</div>
<div class="line"><span class="lineno">  151</span>    curproc-&gt;<a class="code hl_variable" href="../../de/d48/structproc.html#a56ec07ac1e10ce42adfc8dd2a366071f">tf</a>-&gt;<a class="code hl_variable" href="../../df/d05/structtrapframe.html#ab1dd3a10936b61129d7395c3a21bc2fe">eax</a> = -1;</div>
<div class="line"><span class="lineno">  152</span>  }</div>
<div class="line"><span class="lineno">  153</span>}</div>
<div class="ttc" id="aconsole_8c_html_a90f0742d846503e4ed1804f1df421ec6"><div class="ttname"><a href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6">cprintf</a></div><div class="ttdeci">void cprintf(char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d56/console_8c_source.html#l00055">console.c:55</a></div></div>
<div class="ttc" id="astructproc_html_a56ec07ac1e10ce42adfc8dd2a366071f"><div class="ttname"><a href="../../de/d48/structproc.html#a56ec07ac1e10ce42adfc8dd2a366071f">proc::tf</a></div><div class="ttdeci">struct trapframe * tf</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d03/proc_8h_source.html#l00045">proc.h:45</a></div></div>
<div class="ttc" id="astructtrapframe_html_ab1dd3a10936b61129d7395c3a21bc2fe"><div class="ttname"><a href="../../df/d05/structtrapframe.html#ab1dd3a10936b61129d7395c3a21bc2fe">trapframe::eax</a></div><div class="ttdeci">uint eax</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d39/x86_8h_source.html#l00159">x86.h:159</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../db/dd8/syscall_8c_acd6bcafe6626fe8e7d00cacdbc3cc4f1_cgraph.png" border="0" usemap="#adb/dd8/syscall_8c_acd6bcafe6626fe8e7d00cacdbc3cc4f1_cgraph" alt=""/></div>
<map name="adb/dd8/syscall_8c_acd6bcafe6626fe8e7d00cacdbc3cc4f1_cgraph" id="adb/dd8/syscall_8c_acd6bcafe6626fe8e7d00cacdbc3cc4f1_cgraph">
<area shape="rect" title=" " alt="" coords="5,221,68,246"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a90f0742d846503e4ed1804f1df421ec6" title=" " alt="" coords="116,297,175,322"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#a41af0935f3989aae450cf8988cd9c3a9" title=" " alt="" coords="348,45,413,70"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aed377f16a085b00de3a4b32392adbdfb" title=" " alt="" coords="223,170,287,195"/>
<area shape="rect" href="../../d0/d56/console_8c.html#a95c0aca5d6d7487933984f08b189917a" title=" " alt="" coords="695,247,748,273"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a1cee376aa9a00e754bf5481cd5f3d97b" title=" " alt="" coords="223,297,287,322"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a6ac35304ea80f01086b47edcc2328010" title=" " alt="" coords="335,94,427,119"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#aea48df3e5cfb903179ad3dc78ab502d9" title=" " alt="" coords="349,195,412,221"/>
<area shape="rect" href="../../d3/dda/proc_8c.html#ad427959ad025dabd8cd393b27ec39160" title=" " alt="" coords="585,146,647,171"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#a206b749d1b7768dadce61cbcde7e0f1c" title=" " alt="" coords="475,95,537,121"/>
<area shape="rect" href="../../d3/d2d/spinlock_8c.html#ae3424f669269fef400ce29c3aeb43fdb" title=" " alt="" coords="478,197,534,222"/>
<area shape="rect" href="../../dc/df6/lapic_8c.html#a627f7996b64f99d885244a5102c85164" title=" " alt="" coords="813,198,871,223"/>
<area shape="rect" href="../../d5/d64/defs_8h.html#a4105de9e2969515d6c6c795c4386f69f" title=" " alt="" coords="796,247,888,273"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../db/dd8/syscall_8c_acd6bcafe6626fe8e7d00cacdbc3cc4f1_icgraph.png" border="0" usemap="#adb/dd8/syscall_8c_acd6bcafe6626fe8e7d00cacdbc3cc4f1_icgraph" alt=""/></div>
<map name="adb/dd8/syscall_8c_acd6bcafe6626fe8e7d00cacdbc3cc4f1_icgraph" id="adb/dd8/syscall_8c_acd6bcafe6626fe8e7d00cacdbc3cc4f1_icgraph">
<area shape="rect" title=" " alt="" coords="97,5,160,31"/>
<area shape="rect" href="../../dc/d6f/trap_8c.html#a372d166e36c086c91e5f5d81e5fead3a" title=" " alt="" coords="5,5,49,31"/>
</map>
</div>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6
</small></address>
</body>
</html>
